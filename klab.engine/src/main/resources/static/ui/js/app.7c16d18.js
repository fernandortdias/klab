(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{0:function(e,n,t){e.exports=t("LzkT")},"0kf8":function(e,n,t){"use strict";t.d(n,"b",function(){return o}),t.d(n,"a",function(){return r});t("DW2E"),Object.freeze({SEARCH_TYPES:[{enumId:"CONCEPT",name:"CONCEPT",color:"#ff0000"},{enumId:"OPERATOR",name:"OPERATOR",color:"#ffff00"},{enumId:"OBSERVATION",name:"OBSERVATION",color:"#ff00ff"},{enumId:"MODEL",name:"MODEL",color:"#0000ff"}]});var o=Object.freeze({CLASS_USERCONTEXTCHANGE:"UserContextChange",CLASS_SEARCH:"Search",CLASS_OBSERVATIONLIFECYCLE:"ObservationLifecycle",PAYLOAD_CLASS_SPATIALEXTENT:"SpatialExtent",PAYLOAD_CLASS_TEMPORALEXTENT:"TemporalExtent",PAYLOAD_CLASS_SEARCHREQUEST:"SearchRequest",PAYLOAD_CLASS_SEARCHMATCHACTION:"SearchMatchAction",PAYLOAD_CLASS_OBSERVATIONREQUEST:"ObservationRequest",PAYLOAD_CLASS_EMPTY:"String",TYPE_REGIONOFINTEREST:"RegionOfInterest",TYPE_PERIODOFINTEREST:"PeriodOfInterest",TYPE_SUBMITSEARCH:"SubmitSearch",TYPE_MATCHACTION:"MatchAction",TYPE_REQUESTOBSERVATION:"RequestObservation",TYPE_RESETCONTEXT:"ResetContext"}),r=Object.freeze({CLASS_TASKLIFECYCLE:"TaskLifecycle",CLASS_OBSERVATIONLIFECYCLE:"ObservationLifecycle",CLASS_QUERY:"Query",CLASS_USERCONTEXTCHANGE:"UserContextChange",CLASS_NOTIFICATION:"Notification",PAYLOAD_CLASS_TASKREFERENCE:"TaskReference",PAYLOAD_CLASS_DATAFLOWREFERENCE:"DataflowReference",PAYLOAD_CLASS_OBSERVATIONREFERENCE:"ObservationReference",PAYLOAD_CLASS_SEARCHRESPONSE:"SearchResponse",PAYLOAD_CLASS_EMPTY:"String",TYPE_TASKSTARTED:"TaskStarted",TYPE_TASKFINISHED:"TaskFinished",TYPE_TASKABORTED:"TaskAborted",TYPE_DEBUG:"Debug",TYPE_INFO:"Info",TYPE_WARNING:"Warning",TYPE_ERROR:"Error",TYPE_DATAFLOWCOMPILED:"DataflowCompiled",TYPE_NEWOBSERVATION:"NewObservation",TYPE_MODIFIEDOBSERVATION:"ModifiedObservation",TYPE_QUERYRESULT:"QueryResult",TYPE_RESETCONTEXT:"ResetContext"})},"A0++":function(e,n,t){"use strict";var o=t("TOJS"),r=t.n(o);r.a},F9zT:function(e,n,t){"use strict";t.d(n,"a",function(){return f});var o=t("MVZn"),r=t.n(o),i=t("J4zp"),s=t.n(i),a=t("I2m6"),c=t("wd/R"),l=t.n(c),u=t("0kf8");function d(e,n,t,o,r){var i=t!==u["b"].PAYLOAD_CLASS_EMPTY?a["b"].validateJsonSchema(o,t):o;return{validated:i,body:{messageClass:e,type:n,payloadClass:t,payload:o,identity:r,timestamp:l()().valueOf(),inResponseTo:null}}}var E={SPATIAL_EXTENT:function(e){var n=s()(e,4),t=n[0],o=n[1],r=n[2],i=n[3];return{south:o,west:t,north:i,east:r}},SEARCH_REQUEST:function(e){var n=e.queryString,t=e.requestId,o=e.contextId,i=void 0===o?null:o,s=e.matchTypes,a=void 0===s?null:s;return r()({},null!==i&&{contextId:i},null!==a&&{matchTypes:a},{queryString:n,requestId:t})}},f={REGION_OF_INTEREST:function(e,n){return d(u["b"].CLASS_USERCONTEXTCHANGE,u["b"].TYPE_REGIONOFINTEREST,u["b"].PAYLOAD_CLASS_SPATIALEXTENT,E.SPATIAL_EXTENT(e),n)},SEARCH_REQUEST:function(e){var n=e.queryString,t=e.requestId,o=e.contextId,i=void 0===o?null:o,s=e.matchTypes,a=void 0===s?null:s,c=e.cancelSearch,l=void 0!==c&&c,E=e.maxResults,f=e.session;return d(u["b"].CLASS_SEARCH,u["b"].TYPE_SUBMITSEARCH,u["b"].PAYLOAD_CLASS_SEARCHREQUEST,r()({},null!==i&&{contextId:i},null!==a&&{matchTypes:a},{queryString:n,requestId:t,cancelSearch:l,maxResults:E}),f)},OBSERVATION_REQUEST:function(e){var n=e.urn,t=e.contextId,o=e.searchContextId,i=void 0===o?null:o,s=e.session;return d(u["b"].CLASS_OBSERVATIONLIFECYCLE,u["b"].TYPE_REQUESTOBSERVATION,u["b"].PAYLOAD_CLASS_OBSERVATIONREQUEST,r()({urn:n},null!==t&&{contextId:t},null!==i&&{searchContextId:i}),s)},RESET_CONTEXT:function(e){return d(u["b"].CLASS_USERCONTEXTCHANGE,u["b"].TYPE_RESETCONTEXT,u["b"].PAYLOAD_CLASS_EMPTY,"",e)}}},FEKV:function(e,n,t){"use strict";t.d(n,"c",function(){return p}),t.d(n,"e",function(){return h}),t.d(n,"d",function(){return I}),t.d(n,"b",function(){return v}),t.d(n,"a",function(){return _});t("rGqo"),t("dRSK"),t("bHtr");var o=t("SAzV"),r=t("0OmE"),i=t("Jz61"),s=t("LvFn"),a=t("oiaU"),c=t("bHcU"),l=t("g6Z0"),u=t("hoJM"),d=t("gpXz"),E=t("bL/2"),f=t("TN97"),O=t("3arD"),T=t("jzpJ"),S=t("JW8z"),p={BING_KEY:"",COORD_BC3:[-2.968226,43.332125],PROJ_EPSG_4326:Object(S["f"])("EPSG:4326"),PROJ_EPSG_3857:Object(S["f"])("EPSG:3857"),ZINDEX_OFFSET:1e4,ZINDEX_MULTIPLIER_RASTER:0,ZINDEX_MULTIPLIER_POLYGONS:1,ZINDEX_MULTIPLIER_LINES:2,ZINDEX_MULTIPLIER_POINTS:3,DEFAULT_BASELAYER:"mapbox_cali_terrain"},b={MARKER_SVG:function(e){var n=e.fill,t=void 0===n?"yellow":n,o=e.stroke,r=void 0===o?"black":o,i=e.strokeWidth,s=void 0===i?"5":i;return'<svg width="80" height="80" version="1.1" xmlns="http://www.w3.org/2000/svg"\n  viewBox="0 -'.concat(s," 80 ").concat(2*s+80,'">\n  <path fill="').concat(t,'" stroke="').concat(r,'" stroke-width="').concat(s,'" d="M40,0C26.191,0,15,11.194,15,25c0,23.87,25,55,25,55s25-31.13,25-55C65,11.194,53.807,0,40,0z\n  M40,38.8c-7.457,0-13.5-6.044-13.5-13.5S32.543,11.8,40,11.8c7.455,0,13.5,6.044,13.5,13.5S47.455,38.8,40,38.8z"/></svg>')}},h={POINT_OBSERVATION_ICON:new E["a"]({anchor:[.5,1],src:"statics/maps/marker.png",opacity:.8,scale:.6}),POINT_OBSERVATION_SVG_ICON:function(e){return new E["a"]({opacity:1,src:"data:image/svg+xml;utf8,".concat(b.MARKER_SVG(e)),scale:.3})},POINT_OBSERVATION_TEXT:new d["a"]({textAlign:"center",textBaseline:"bottom",offsetY:-20})},I={POLYGON_CONTEXT_STYLE:new c["b"]({fill:new l["a"]({color:"rgba(38, 166, 154, 0.2)"})}),POLYGON_OBSERVATION_STYLE:new c["b"]({fill:new l["a"]({color:"rgba(255, 102, 0, 0.4)"})}),LNE_OBSERVATION_STYLE:new c["b"]({stroke:new u["a"]({color:"rgb(255, 102, 0)",width:2})})},m={OSM_LAYER:new o["a"]({name:"osm_layer",title:"Open Street Map",type:"base",source:new r["b"],visible:!1}),STAMEN_WATER_COLOR_LAYER:new o["a"]({name:"stamen_water_color_layer",title:"Stamen Watercolor",type:"base",source:new i["a"]({layer:"watercolor"}),visible:!1}),OPEN_TOPO_MAT:new o["a"]({name:"open_topo_mat",title:"Open Topo",type:"base",source:new s["a"]({url:"//{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:"© OpenTopoMap"}),visible:!1}),GOOGLE_HYBRID:new o["a"]({name:"google_hybrid",title:"Google Hybrid",type:"base",source:new s["a"]({crossOrigin:"anonymous",url:"http://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}&s=Ga",attribution:"© 2018 Google, Inc"}),visible:!1}),GOOGLE_STREET:new o["a"]({name:"google_street",title:"Google Street",type:"base",source:new s["a"]({crossOrigin:"anonymous",url:"http://mt{0-3}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:"© 2018 Google, Inc"}),visible:!1}),GOOGLE_TERRAIN:new o["a"]({name:"google_terrain",title:"Google Terrain",type:"base",source:new s["a"]({crossOrigin:"anonymous",url:"https://mt1.google.com/vt/lyrs=t&x={x}&y={y}&z={z}",attribution:"© 2018 Google, Inc"}),visible:!1}),MAPBOX_CALI_TERRAIN:new o["a"]({name:"mapbox_cali_terrain",title:"k.LAB Mapbox Cali terrain",type:"base",source:new s["a"]({crossOrigin:"anonymous",url:"https://api.mapbox.com/styles/v1/k-lab/cjkwh1z9z06ok2rrn9unfpn2n/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoiay1sYWIiLCJhIjoiY2prd2d2dWNxMHlvcDNxcDVsY3FncDBydiJ9.zMQE3gu-0qPpkLapVfVhnA",attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>'}),visible:!1}),EMPTY_LAYER:new o["a"]({name:"empty_layer",title:"No background",type:"base",visible:!1}),BING_IMAGINERY:new o["a"]({name:"bing_imaginery",title:"Bing Imagery",type:"base",source:new a["a"]({crossOrigin:"anonymous",maxZoom:19,key:p.BING_KEY,imagerySet:"AerialWithLabels",attribution:"© 2017 Bing, Inc"}),visible:!1})},v={controls:T["a"]({attribution:!1}).extend([]),target:"map",projection:p.PROJ_EPSG_4326,center:Object(S["j"])(p.COORD_BC3,p.PROJ_EPSG_4326,p.PROJ_EPSG_3857),zoom:13},_={layers:[m.EMPTY_LAYER,m.STAMEN_WATER_COLOR_LAYER,m.OSM_LAYER,m.OPEN_TOPO_MAT,m.GOOGLE_STREET,m.GOOGLE_HYBRID,m.GOOGLE_TERRAIN,m.MAPBOX_CALI_TERRAIN],mask:null,hasMask:function(){return null!==this.mask},getBaseLayer:function(){return this.layers.find(function(e){return"base"===e.get("type")&&e.getVisible()})},setMask:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[38,38,38,.4];null!==this.mask&&this.removeMask(),this.mask=new O["a"]({feature:new f["a"]({geometry:e,name:"Context"}),inner:!1,active:!0,fill:new l["a"]({color:t})}),this.layers.forEach(function(e){e.addFilter(n.mask)})},removeMask:function(){var e=this;null!==this.mask&&this.layers.forEach(function(n){n.removeFilter(e.mask)}),this.mask=null}}},Hl11:function(e,n,t){},I2m6:function(e,n,t){"use strict";var o=t("J4zp"),r=t.n(o),i=(t("rGqo"),t("yt8O"),t("/8Fb"),t("cDf5")),s=t.n(i),a=t("lwsE"),c=t.n(a),l=t("W8MJ"),u=t.n(l),d=t("vDqi"),E=t.n(d),f=t("Oxth"),O=t.n(f),T=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{draft:"draft-04"};if(c()(this,e),void 0===n||""===n)throw Error("URL is mandatory");this.djvEnv=new O.a({version:t.draft}),this.initialized=!1,this.url=n,this.initTimeout=null,this.axios=E.a.create(),console.debug("Load schema(s) on creation"),this.initTimeout=setTimeout(this.init(n),2e3)}return u()(e,[{key:"validateJsonSchema",value:function(e,n){if(!this.initialized)return console.info("djvEnv not read"),!1;if(this.djvEnv.resolve(n)){var t=this.djvEnv.validate(n,e);if("undefined"===typeof t)return console.debug("Validation ok"),!0;throw Error(t)}throw Error("Schema not found: ".concat(n))}},{key:"init",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;this.initialized||this.axios.get(n,{transformRequest:[function(e,n){return delete n.common.Authorization,e}]}).then(function(n){var t=n.data;if("object"!==s()(t))throw Error("Error asking for JsonSchema(s): no data");for(var o=Object.entries(t),i=0;i<o.length;i++){var a=r()(o[i],2),c=a[0],l=a[1];e.djvEnv.addSchema(c,l),console.info("Added schema ".concat(c))}e.initialized=!0}).catch(function(n){console.log(n),clearTimeout(e.initTimeout),e.initTimeout=setTimeout(function(){e.init(),console.info("Trying to connect to donwload schema(s)")},5e3)})}}]),e}();t.d(n,"b",function(){return S});var S=new T("".concat("").concat("/modeler","/schema"));n["a"]=function(e){var n=e.Vue;n.prototype.$djvEnv=S}},LzkT:function(e,n,t){"use strict";t.r(n);t("rGqo"),t("SpHO"),t("oRQL"),t("0UuB"),t("r3/s"),t("ETwY"),t("PUmY"),t("WKVH"),t("vaAy"),t("Iomn"),t("CF6H"),t("gBTy"),t("q5hK"),t("qrIa"),t("FfHN"),t("uWio"),t("M5GN"),t("7VtN"),t("CliU"),t("pKm8"),t("WWXe"),t("2oCq"),t("tg5a"),t("EHBt"),t("FiUO"),t("kzg4"),t("DC5c"),t("81dB"),t("74+S"),t("dHoL"),t("5/vb"),t("uK9C"),t("WLhn"),t("WQIU"),t("632X"),t("3HPs"),t("SH0w"),t("v2tj"),t("e5Zg"),t("ifhg"),t("y4yY"),t("eeoa"),t("qWPx"),t("O3aI"),t("IeMT"),t("OPPa"),t("JXdd"),t("GZIC"),t("72gz"),t("l6Fa"),t("853k"),t("qbXy"),t("Bt10"),t("Zrw1"),t("kI+G"),t("Jc2o"),t("k+pq"),t("yIhU"),t("Xx1C"),t("pVV8"),t("iTTW"),t("lDgw"),t("NRvT"),t("I6Vv"),t("csU/"),t("uK2o"),t("0EOz"),t("WSzb"),t("3mUJ"),t("gTSn"),t("Hqc8"),t("Y9Ea"),t("/MMa"),t("q+3l"),t("+FdI"),t("CkM9"),t("VwYb"),t("zBUS"),t("KsZc"),t("H9SI"),t("+i/6"),t("keWq"),t("Hl11"),t("fm0S");var o=t("Kw5r"),r=t("n/R6"),i=t("6E/o"),s=t("cFFF"),a=t("IEC1"),c=t("zxLP"),l=t("RIeW"),u=t("Rqni"),d=t("MqH6"),E=t("8wy3"),f=t("zmdN"),O=t("SC7v"),T=t("UrUt"),S=t("EYBb"),p=t("HlXa"),b=t("UG+o"),h=t("uNnR"),I=t("fUOT"),m=t("lUGP"),v=t("kci6"),_=t("5PmM"),R=t("NjtJ"),N=t("CVJq"),g=t("Z4Xi"),A=t("B7AW"),P=t("7r/T"),C=t("dkar"),L=t("ZYCo"),y=t("OggR"),w=t("3CNK"),k=t("MFSH"),x=t("bduK"),M=t("YYYh"),D=t("fqDv"),j=t("5X41"),Y=t("k/Uo"),G=t("XYut"),V=t("A9jH"),B=t("zhyI"),F=t("S/Rk"),U=t("xWPs"),z=t("23sU"),H=t("FSbK"),W=t("Ezub"),Q=t("dB3m");o["a"].use(i["a"],{config:{},i18n:r["a"],components:{QLayout:s["a"],QLayoutHeader:a["a"],QLayoutDrawer:c["a"],QLayoutFooter:l["a"],QPageContainer:u["a"],QPage:d["a"],QToolbar:E["a"],QToolbarTitle:f["a"],QBtn:O["a"],QIcon:T["a"],QList:S["a"],QListHeader:p["a"],QItem:b["a"],QItemMain:h["a"],QItemSide:I["a"],QItemTile:m["a"],QItemSeparator:v["a"],QTree:_["a"],QResizeObservable:R["a"],QModal:N["a"],QSpinnerRadio:g["a"],QSpinnerBall:A["a"],QPageSticky:P["a"],QCard:C["a"],QCardTitle:L["a"],QCardMain:y["a"],QCardMedia:w["a"],QCardSeparator:k["a"],QCardActions:x["a"],QSearch:M["a"],QAutocomplete:D["a"],QChipsInput:j["a"],QScrollArea:Y["a"],QInput:G["a"],QTooltip:V["a"],QContextMenu:B["a"],QChip:F["a"],QTabs:U["a"],QTab:z["a"]},directives:{Ripple:H["a"]},plugins:{Notify:W["a"],Cookies:Q["a"]}});var K=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"q-app"}},[t("router-view")],1)},X=[];K._withStripped=!0;t("dRSK");var J=t("MVZn"),q=t.n(J),Z=t("L2JU"),$=t("sSqL"),ee=t("0kf8"),ne=t("F9zT"),te={name:"App",data:function(){return{subscriptions:[]}},computed:q()({},Object(Z["c"])("data",["session"]),Object(Z["c"])("stomp",["queuedMessage"]),Object(Z["c"])("view",["lastKexplorerLog","kexplorerLog"])),sockets:{onconnect:function(e){var n=this;console.log("Connect to websocket: ".concat(JSON.stringify(e,null,4)));var t=this.subscriptions.find(function(e){return e.id===n.session});"undefined"!==typeof t&&(console.warn("Invalidate session ".concat(this.session," this.session")),t.subscription.unsubscribe());var o=this.subscribe(this.session);this.subscriptions.push({id:this.session,subscription:o}),console.log("Session ".concat(this.session," subscribed with subscriptionid ").concat(o.id)),this.sendQueue()},onmessage:function(e){var n=e.body,t=JSON.parse(n),o=t.type,r=t.payload;if(o===ee["a"].TYPE_TASKSTARTED){var i=this.subscribe(r.id);this.subscriptions.push({id:r.id,subscription:i}),console.log("Task ".concat(r.id," subscribed with subscriptionid ").concat(i.id))}else if(o===ee["a"].TYPE_TASKABORTED||o===ee["a"].TYPE_TASKFINISHED){var s=this.subscriptions.find(function(e){return e.id===r.id});"undefined"!==typeof s&&s.subscription.unsubscribe()}},onsend:function(e){var n=e.headers,t=e.message;this.queuedMessage&&t===this.queuedMessage.message&&(this.stompCleanQueue(),console.log("Send a queued message: ".concat(JSON.stringify(t)," with this headers: ").concat(JSON.stringify(n))))}},methods:q()({sendQueue:function(){if(this.queuedMessage){var e=this.queuedMessage,n=e.message,t=e.headers;this.sendStompMessage(n,t)}}},Object(Z["b"])("stomp",{stompCleanQueue:"stomp_cleanqueue"})),watch:{kexplorerLog:function(){var e=this.lastKexplorerLog();null===e||e.type!==$["a"].TYPE_ERROR&&e.type!==$["a"].TYPE_WARNING||this.$q.notify({message:e.payload.message,type:e.type===$["a"].TYPE_ERROR?"negative":"warning",timeout:1e3})}},beforeMount:function(){this.$store.dispatch("data/addObservation",{observation:$["b"].OBSERVATION_DEFAULT,main:!0},{root:!0})},beforeDestroy:function(){var e=this,n=this.subscriptions.find(function(n){return n.id===e.session});"undefined"!==typeof n&&n.unsubscribe(),this.sendStompMessage(ne["a"].RESET_CONTEXT(this.$store.state.data.session).body)}},oe=te,re=(t("A0++"),t("KHd+")),ie=Object(re["a"])(oe,K,X,!1,null,null,null);ie.options.__file="App.vue";var se=ie.exports,ae=t("Q2AE"),ce=t("jE9Z"),le=[{path:"/",component:function(){return t.e(2).then(t.bind(null,"ez0Y"))},children:[{path:"/explorer",component:function(){return t.e(0).then(t.bind(null,"kmF/"))}},{path:"/viewer",component:function(){return t.e(0).then(t.bind(null,"kmF/"))}},{path:"/",redirect:"/viewer"},{name:"icons",path:"icons",component:function(){return t.e(3).then(t.bind(null,"0s7m"))}}]},{path:"*",component:function(){return t.e(4).then(t.bind(null,"7l0S"))}}];o["a"].use(ce["a"]);var ue=new ce["a"]({mode:"history",base:"/modeler/ui/",scrollBehavior:function(){return{y:0}},routes:le}),de=ue,Ee=function(){var e="function"===typeof ae["a"]?Object(ae["a"])():ae["a"],n="function"===typeof de?de({store:e}):de;e.$router=n;var t={el:"#q-app",router:n,store:e,render:function(e){return e(se)}};return{app:t,store:e,router:n}},fe=(t("OG14"),t("FEKV")),Oe=t("+4JY"),Te=function(e){var n=e.Vue,t=e.store,o=new URLSearchParams(window.location.search);n.prototype.$urlParams=o,n.prototype.$constants=$["a"],n.prototype.$helpers=$["b"];var r=o.get($["a"].PARAMS_SESSION)||Q["a"].get($["a"].COOKIE_SESSION),i=o.get($["a"].PARAMS_MODE)||Q["a"].get($["a"].COOKIE_MODE),s=o.get($["a"].PARAMS_LOG)||Q["a"].get($["a"].COOKIE_LOG)||$["a"].PARAMS_LOG_HIDDEN,a=Q["a"].get($["a"].COOKIE_BASELAYER)||fe["c"].DEFAULT_BASELAYER;n.mixin({methods:{hexToRgb:function(e){if("undefined"!==typeof e){var n=Oe["a"].hexToRgb(e);return"".concat(n.r,", ").concat(n.g,", ").concat(n.b)}return"black"}}}),n.prototype.$eventBus=new n,t.state.data.session=r,n.prototype.$mode=i,Q["a"].set($["a"].COOKIE_MODE,i,{expires:30,path:"/"}),n.prototype.$logVisibility=s,Q["a"].set($["a"].COOKIE_LOG,s,{expires:30,path:"/"}),n.prototype.$baseLayer=a,Q["a"].set($["a"].COOKIE_BASELAYER,a,{expires:30,path:"/"}),console.log("Session: ".concat(r," / mode: ").concat(i))},Se=t("qSUR"),pe={label:{appTitle:"k.LAB Explorer EN",appRunning:"Running on Quasar v{version}",klabNoMessage:"No message",klabUnknownError:"Unknown error",klabNoDate:"No date",klabMessagesToSend:"There are one message in queue",modalNoConnection:"No connection, please wait",appFooter:"k.LAB Explorer - 2018",treeTitle:"Observation",reconnect:"Reconnect",unknownLabel:"Unknown",noContext:"",noObservation:"No observations available",searchPlaceholder:"Search in k.LAB",askForObservation:"Observing {urn}",noTokenDescription:"No description available",btnContextReset:"Reset context",itemCounter:"{loaded} of {total}",logTab:"Log",treeTab:"Tree"},messages:{connectionClosed:"Connection closed",connectionWorking:"Trying to reconnect",connectionUnknown:"Starting...",noSpaceAllowedInSearch:"It is not allowed to use spaces in search box",noSearchResults:"No search results",noActionForObservation:"No actions available",noTime:"no time"},tooltips:{treePane:"View tree",logPane:"View log",resetContext:"Reset context"},errors:{connectionError:"Connection error",searchTimeout:"Search timeout"},langName:"English"},be={label:{appTitle:"k.LAB Explorer ES",appRunning:"Corriendo sobre Quasar v{version}",klabNoMessage:"No hay ningún mensaje",klabUnknownError:"Error desconocido",klabNoDate:"No hay fecha",klabMessagesToSend:"Hay un mensaje en la cola",modalNoConnection:"No hay conexi&oacute;n, esperar",appFooter:"k.LAB Explorer - 2018",treeTitle:"Observaciones",reconnect:"Reconectar",unknownLabel:"Desconocido",noContext:"",noObservation:"No hay observaciones",searchPlaceholder:"Buscar in k.LAB",askForObservation:"Pidiendo {urn}",noTokenDescription:"No hay descripción",btnContextReset:"Resetear contexto",itemCounter:"{loaded} de {total}",logTab:"Log",treeTab:"Árbol"},messages:{connectionClosed:"Conexión cerrada",connectionWorking:"Intentando reconectar",connectionUnknown:"Inicializando...",noSpaceAllowedInSearch:"No está permitido utilizar espacios en la búsqueda",noSearchResults:"No hay resultados",noActionForObservation:"No hay acciones disponibles",noTime:"sin información"},tooltips:{treePane:"Ver árbol",logPane:"Ver log",resetContext:"Reset context"},errors:{connectionError:"Error de conexión"},langName:"Español"},he={label:{appTitle:"k.LAB Explorer IT",appRunning:"Funzionando  con Quasar v{version}",klabNoMessage:"Nessun messaggio",klabUnknownError:"Errore sconosciuto",klabNoDate:"Nessuna data",klabMessagesToSend:"C'è un messaggio in coda",modalNoConnection:"Non c'è connessione",appFooter:"k.LAB Explorer - 2018",treeTitle:"Osservazioni",reconnect:"Riconnettere",unknownLabel:"Sconosciuto",noContext:"Non è stato selezionato nessun contesto",noObservation:"Nessuna osservazione disponibile",searchPlaceholder:"Cerca in k.LAB",askForObservation:"Chiedendo {urn}",noTokenDescription:"Descrizione non disponibile",btnContextReset:"Reinizializzare il contesto",itemCounter:"{loaded} di {total}",logTab:"Log",treeTab:"Albero"},messages:{connectionClosed:"Connessione chiusa",connectionWorking:"Cercando di riconnettere",connectionUnknown:"Inizializzando...",noSpaceAllowedInSearch:"Non è permesso utilizare spazi nella ricerca",noSearchResults:"Non esistono risultati",noActionForObservation:"Nessuna azione disponibile",noTime:"senza informazione di ora"},tooltips:{treePane:"Albero",logPane:"Log",resetContext:"Reset context"},errors:{connectionError:"Errore di connessione"},langName:"Italiano"},Ie={en:pe,es:be,it:he},me=function(e){var n=e.app,t=e.Vue;t.use(Se["a"]),n.i18n=new Se["a"]({locale:"en",fallbackLocale:"en",messages:Ie})},ve=t("vjsO"),_e=t("fMpr"),Re=function(e){var n=e.app,t=e.Vue;t.use(Se["a"]);var o="en";Q["a"].has(_e["a"].COOKIE_LANG)?(o=Q["a"].get(_e["a"].COOKIE_LANG),console.log("Locale setted from cookie to ".concat(o))):(Q["a"].set(_e["a"].COOKIE_LANG,o,{expires:30,path:"/"}),console.log("Lang cookie setted to ".concat(o))),n.i18n=new Se["a"]({locale:o,fallbackLocale:"en",messages:Ie})},Ne=t("I2m6"),ge=(t("yt8O"),t("RW0V"),t("9VmF"),t("lwsE")),Ae=t.n(ge),Pe=t("W8MJ"),Ce=t.n(Pe),Le=t("zH15"),ye=t.n(Le),we=t("xuFv"),ke=t.n(we),xe=(t("9AAn"),function(){function e(){Ae()(this,e),this.listeners=new Map}return Ce()(e,[{key:"addListener",value:function(e,n,t){return"function"===typeof n&&(this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push({callback:n,vm:t}),!0)}},{key:"removeListener",value:function(e,n,t){var o,r=this.listeners.get(e);return!!(r&&r.length&&(o=r.reduce(function(e,o,r){return"function"===typeof o.callback&&o.callback===n&&o.vm===t&&(e=r),e},-1),o>-1))&&(r.splice(o,1),this.listeners.set(e,r),!0)}},{key:"emit",value:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var r=this.listeners.get(e);return!(!r||!r.length)&&(r.forEach(function(e){var n;(n=e.callback).call.apply(n,[e.vm].concat(t))}),!0)}}]),e}()),Me=new xe,De=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Ae()(this,e),!n)throw new Error("Connection url is needed");this.connectionUrl=n,this.connectionHeaders=t;var r=o.stompOptions,i=void 0===r?{debug:!1}:r,s=o.sockJSOptions,a=void 0===s?{}:s,c=o.reconnection,l=void 0!==c&&c,u=o.reconnectionAttempts,d=void 0===u?1/0:u,E=o.reconnectionDelay,f=void 0===E?2e3:E,O=o.debug,T=void 0!==O&&O,S=o.store,p=void 0===S?null:S,b=o.storeNS,h=void 0===b?"":b;this.reconnection=l,this.reconnectionAttempts=d,this.reconnectionDelay=f,this.hasDebug=T,this.reconnectTimeoutId=-1,this.reconnectionCount=0,"undefined"!==typeof p&&null!==p&&(this.store=p,this.storeNS=h),this.stompOptions=i,this.sockJSOptions=a,this.connect()}return Ce()(e,[{key:"debug",value:function(){var e;this.hasDebug&&(e=console).debug.apply(e,arguments)}},{key:"connect",value:function(){var e=this,n=ye()(this.connectionUrl,this.sockJSOptions);n.protocol=this.stompOptions.protocol||"",this.StompClient=ke.a.over(n,this.stompOptions),this.StompClient.connect(this.connectionHeaders,function(n){e.doOnEvent("onconnect",n)},function(n){return setTimeout(function(){e.doOnEvent("onerror",n)},1e3)})}},{key:"isConnected",value:function(){return this.StompClient&&this.StompClient.connected}},{key:"reconnect",value:function(){var e=this;this.reconnectionCount<=this.reconnectionAttempts?(this.reconnectionCount+=1,clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=setTimeout(function(){e.doOnEvent("reconnect",e.reconnectionCount),e.connect()},this.reconnectionDelay)):this.store&&this.passToStore("stomp_onerror","Reconnection error")}},{key:"subscribe",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){n.doOnEvent("onmessage",e)};if(e){var r=this.StompClient.subscribe(e,o,t);if(r)return this.doOnEvent("onsubscribe",r),r}return null}},{key:"unsubscribe",value:function(e,n){this.StompClient.unsubscribe(e,n)}},{key:"send",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.isConnected()?(this.StompClient.send(e,JSON.stringify(n),t),this.doOnEvent("onsend",{headers:t,message:n}),!0):(this.doOnEvent("onerrorsend",{headers:t,message:n}),!1)}},{key:"doOnEvent",value:function(e,n){Me.emit(e,n)||this.debug("No listener for ".concat(e)),this.store&&this.passToStore("stomp_".concat(e),n),this.reconnection&&"onoconnect"===e&&(this.reconnectionCount=0),this.reconnection&&"onerror"===e&&this.reconnect()}},{key:"passToStore",value:function(e,n){if(e.startsWith("stomp_")){var t="dispatch",o=[this.storeNS||"",e.toLowerCase()].filter(function(e){return!!e}).join("/"),r=n||null;n&&n.data&&(r=JSON.parse(n.data),r.mutation?o=[r.namespace||"",r.mutation].filter(function(e){return!!e}).join("/"):r.action&&(t="dispatch",o=[r.namespace||"",r.action].filter(function(e){return!!e}).join("/"))),this.store[t](o,r)}}},{key:"close",value:function(){this.StompClient&&(this.StompClient.disconnect(),this.doOnEvent("onclose")),this.reconnectTimeoutId&&clearTimeout(this.reconnectTimeoutId)}}]),e}(),je={install:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("[vue-stomp-client] cannot locate connection");var r=null;o.connectManually?(e.prototype.$connect=function(){r=new De(n,t,o),e.prototype.$stompClient=r.StompClient},e.prototype.$disconnect=function(){r&&r.reconnection&&(r.reconnection=!1),e.prototype.$stompClient&&(r.close(),delete e.prototype.$stompClient)}):(r=new De(n,t,o),e.prototype.$stompClient=r.StompClient),e.mixin({methods:{sendStompMessage:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.defaultMessageDestination;r.send(t,e,n)},subscribe:function(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.defaultSubscribeDestination;return r.subscribe("".concat(i,"/").concat(e),n,t)},unsubscribe:function(e){r.unsubscribe(e)},reconnect:function(){r.StompClient&&!r.StompClient.connected&&r.reconnect()}},created:function(){var e=this;if(this.$options.sockets){var n=this,t=this.$options.sockets;this.$options.sockets=new Proxy({},{set:function(e,t,o){return Me.addListener(t,o,n),e[t]=o,!0},deleteProperty:function(e,t){return Me.removeListener(t,n.$options.sockets[t],n),delete e.key,!0}}),t&&Object.keys(t).forEach(function(n){e.$options.sockets[n]=t[n]})}},beforeDestroy:function(){var e=this;if(this.$options.sockets){var n=this.$options.sockets;n&&Object.keys(n).forEach(function(n){console.log("Remove listener ".concat(n)),Me.removeListener(n,e.$options.sockets[n],e),delete e.$options.sockets[n]})}}})}},Ye=function(e){var n=e.Vue,t=e.store;n.use(je,"/modeler/message",{},{stompOptions:{reconnection:!0,debug:!1,protocol:"v12.stomp"},store:t,storeNS:"stomp",reconnection:!0,debug:!1,defaultMessageDestination:"/klab/message",defaultSubscribeDestination:"/message"})},Ge=Ee(),Ve=Ge.app,Be=Ge.store,Fe=Ge.router;[Te,me,ve["b"],Re,Ne["a"],Ye].forEach(function(e){e({app:Ve,router:Fe,store:Be,Vue:o["a"],ssrContext:null})}),new o["a"](Ve)},Q2AE:function(e,n,t){"use strict";var o,r=t("Kw5r"),i=t("L2JU"),s=t("fMpr"),a={mainWin:{paletteVisible:!0},kexplorerLog:[],klabLog:[],viewers:[],lastViewerId:0,contextGeometry:null,spinner:s["a"].SPINNER_STOPPED,spinnerOwners:[],searchActive:!1,searchFocus:!1,searchLostChar:"",searchHistory:[]},c=(t("dRSK"),t("RIqP")),l=t.n(c),u=t("sSqL"),d={hasPalette:function(e){return e.mainWin.paletteVisible},kexplorerLog:function(e){return e.kexplorerLog},lastKexplorerLog:function(e){return function(n){return u["b"].lastFilteredLogElement(e.kexplorerLog,n)}},klabLog:function(e){return e.klabLog},lastKlabLog:function(e){return function(n){return u["b"].lastFilteredLogElement(e.klabLog,n)}},klabLogReversedAndFiltered:function(e){return function(n){if(0===e.klabLog.length)return e.klabLog;var t=l()(e.klabLog).reverse();return void 0===n?t:t.find(function(e){return e.type===n})}},contextGeometry:function(e){return e.contextGeometry},viewers:function(e){return e.viewers},mainViewer:function(e){return e.viewers.find(function(e){return e.main})},lastViewerId:function(e){return e.lastViewerId},viewer:function(e){return function(n){return e.viewers.length>0?e.viewers.find(function(e){return e.idx===n}):null}},spinnerIsAnimated:function(e){return e.spinner.animated},spinner:function(e){return e.spinner},spinnerOwners:function(e){return e.spinnerOwners},searchIsActive:function(e){return e.searchActive},searchIsFocused:function(e){return e.searchFocus},searchLostChar:function(e){return e.searchLostChar},searchHistory:function(e){return e.searchHistory}},E=(t("rGqo"),{ADD_TO_KEXPLORER_LOG:function(e,n){u["b"].pushElementInFixedQueue(e.kexplorerLog,n)},ADD_TO_KLAB_LOG:function(e,n){u["b"].pushElementInFixedQueue(e.klabLog,n)},SET_CONTEXT_LAYER:function(e,n){e.viewers.splice(0,e.viewers.length),e.lastViewerId=0,e.contextGeometry=n},SET_MAIN_VIEWER:function(e,n){e.viewers.forEach(function(e){e.main=e.idx===n})},ADD_VIEWER_ELEMENT:function(e,n){var t=n.main,o=n.type,r=n.callback;0===e.lastViewerId?t=!0:!0===t&&e.viewers.forEach(function(e){e.main=!1}),e.lastViewerId+=1,e.viewers.push({idx:e.lastViewerId,main:t,type:o,observations:[]}),"function"===typeof r&&r(e.lastViewerId)},SET_SPINNER_ANIMATED:function(e,n){e.spinner.animated=n},SET_SPINNER_COLOR:function(e,n){e.spinner.color=n},SET_SPINNER:function(e,n){var t=n.animated,o=n.color,r=n.errorMessage,i=void 0===r?null:r;e.spinner={animated:t,color:o,errorMessage:i}},ADD_TO_SPINNER_OWNERS:function(e,n){var t=e.spinnerOwners.indexOf(n);-1===t&&e.spinnerOwners.push(n)},REMOVE_FROM_SPINNER_OWNERS:function(e,n){var t=e.spinnerOwners.indexOf(n);-1!==t&&e.spinnerOwners.splice(t,1)},SEARCH_ACTIVE:function(e,n){var t=n.active,o=n.char,r=void 0===o?"":o;e.searchActive!==t&&(e.searchLostChar=r,e.searchActive=t)},SEARCH_FOCUS:function(e,n){var t=n.focused,o=n.char,r=void 0===o?"":o;e.searchFocus!==t&&(e.searchLostChar=r,e.searchFocus=t)},RESET_SEARCH_LOST_CHAR:function(e){e.searchLostChar=""},RESET_SEARCH:function(e){e.searchActive=!1,e.searchFocus=!1,e.searchLostChar=""},STORE_SEARCH:function(e,n){e.searchHistory.push(n)}}),f=t("MVZn"),O=t.n(f),T=(t("VRzm"),t("wd/R")),S=t.n(T),p={addToKexplorerLog:function(e,n){var t=e.commit,o=n.type,r=n.payload;t("ADD_TO_KEXPLORER_LOG",{type:o,payload:r,time:S()()})},addToKlabLog:function(e,n){var t=e.commit,o=n.type,r=n.id,i=n.payload,s=n.timestamp;t("ADD_TO_KLAB_LOG",{type:o,id:r,payload:i,time:S()(s)})},setContextLayer:function(e,n){var t=e.commit,o=e.dispatch;u["b"].getContextGeometry(n).then(function(e){t("SET_CONTEXT_LAYER",e),t("RESET_SEARCH"),o("assignViewer",{observation:n,main:!0})})},resetContextLayer:function(e){var n=e.commit;n("SET_CONTEXT_LAYER",null),n("RESET_SEARCH")},setMainViewer:function(e,n){var t=e.commit;t("SET_MAIN_VIEWER",n)},assignViewer:function(e,n){var t=e.commit,o=e.getters,r=e.dispatch,i=e.rootGetters,s=n.observation,a=n.main,c=void 0!==a&&a;return new Promise(function(e,n){var a=null;if(s.observationType)switch(s.observationType){case u["a"].OBSTYP_STATE:if(1===s.valueCount)a=null;else if(a=u["a"].VIEW_MAP,s.parentId===i["data/contextId"])s.encodedShape=i["data/fullContext"].encodedShape;else{var l=u["b"].findNodeById(i["data/tree"],s.parentId);null!==l?s.encodedShape=l.encodedShape:console.warn("Need parent of ".concat(s.id," but doesn't find it. Parent id is ").concat(s.parentId))}break;case u["a"].OBSTYP_INITIAL:case u["a"].OBSTYP_SUBJECT:a=u["a"].VIEW_MAP;break;case u["a"].OBSTYP_CONFIGURATION:a=u["a"].VIEW_GRAPH;break;case u["a"].OBSTYP_EVENT:case u["a"].OBSTYP_PROCESS:case u["a"].OBSTYP_RELATIONSHIP:a=u["a"].VIEW_UNKNOWN;break;default:n(new Error("Unknown observation type ".concat(JSON.stringify(s))));break}if(null!==a){console.log("Need a viewer of type ".concat(a));var d=o.viewers.find(function(e){return e.type===a});"undefined"===typeof d?(console.log("Create new viewer of type ".concat(a)),t("ADD_VIEWER_ELEMENT",{main:c,type:a,callback:function(n){e(n)}})):(c&&r("setMainViewer",d.idx),e(d.idx))}else e(null)})},setSpinner:function(e,n){var t=e.commit,o=e.getters,r=e.dispatch,i=n.animated,s=n.color,a=n.time,c=void 0===a?null:a,l=n.then,d=void 0===l?null:l,E=n.errorMessage,f=void 0===E?null:E,T=n.owner;return new Promise(function(e){if(!T||null===T)throw new Error("No spinner owner!");i?t("ADD_TO_SPINNER_OWNERS",T):(t("REMOVE_FROM_SPINNER_OWNERS",T),0!==o.spinnerOwners.length&&(i=!0,s!==u["a"].SPINNER_ERROR.color&&(s=u["a"].SPINNER_LOADING.color))),t("SET_SPINNER",{animated:i,color:s,errorMessage:f}),null!==c&&null!==d&&setTimeout(function(){r("setSpinner",O()({},d,{owner:T}))},1e3*c),e()})},searchStart:function(e){var n=e.commit,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n("SEARCH_ACTIVE",{active:!0,char:t})},searchStop:function(e){var n=e.commit;n("SEARCH_ACTIVE",{active:!1})},searchFocus:function(e,n){var t=e.commit,o=n.focused,r=n.char,i=void 0===r?null:r;t("SEARCH_FOCUS",{focused:o,char:i})},resetSearchLostChar:function(e){var n=e.commit;n("RESET_SEARCH_LOST_CHAR")},storePreviousSearch:function(e,n){var t=e.commit;t("STORE_SEARCH",n)}},b={namespaced:!0,state:a,getters:d,mutations:E,actions:p},h={tree:[],lasts:[],context:null,observations:[],tasks:[],session:null,history:[],orphans:[],searchResult:null},I={tree:function(e){return e.tree},treeNode:function(e){return function(n){return u["b"].findNodeById(e.tree,n)}},lasts:function(e){return e.lasts},observations:function(e){return function(n){var t=e.observations.filter(function(e){return e.viewerIdx===n});return t}},hasContext:function(e){return null!==e.context},contextLabel:function(e){return null!==e.context?e.context.label:null},contextId:function(e){return null!==e.context?e.context.id:null},fullContext:function(e){return e.context},session:function(e){return e.session},searchResult:function(e){return e.searchResult}},m=(t("Z2Ku"),t("INYr"),{SET_CONTEXT:function(e,n){null!==e.context&&e.history.push({time:S()(),contextId:e.context.id,contextLabel:e.context.label}),e.context=n,e.tree=[],e.lasts=[],e.observations=[],e.tasks=[],e.nodeSelected=null},ADD_OBSERVATION:function(e,n){e.observations.push(n),console.log("Added observation: ".concat(n.label)),e.tasks[n.taskId]&&e.tasks[n.taskId].push(n)},ADD_NODE:function(e,n){var t=n.node,o=n.parentId;if(null!==e.context)if(e.context.id!==t.id)if(e.context.id===o)e.tree.push(t);else{var r=u["b"].findNodeById(e.tree,o);null!==r?r.children.push(O()({},t,{idx:r.children.length,siblingCount:r.siblingCount})):(console.warn("Orphan founded with id ".concat(t.id)),e.orphans.push(t))}else console.error("Try to add context to tree, check it!");else console.log("Context is null, is it just resetted?")},ADD_TASKID:function(e,n){"undefined"===typeof e.tasks[n]&&(e.tasks[n]=[])},RECALCULATE_TREE:function(e,n){var t=e.tasks[n];if("undefined"!==typeof t)if(0!==t.length)if(1!==t.length){var o=[],r=[],i=null,s=[];if(t.forEach(function(e,n){e.main?n===t.length-1?i=u["b"].getNodeFromObservation(e).node:r.push(u["b"].getNodeFromObservation(e).node):s.push(u["b"].getNodeFromObservation(e).node),o.push(e.id)}),null!==i){i.header="folder";var a,c=t[0],l=null,d=-1;if(c.parentId===e.context.id)l=e.tree,d=e.tree.findIndex(function(e){return e.id===c.id});else{var E=u["b"].findNodeById(e.tree,c.folderId||c.parentId);if(null===E)throw new Error("Element is not first level but cannot find parent: folderId: ".concat(c.folderId,", parentId: ").concat(c.parentId));l=E.children,d=l.findIndex(function(e){return e.id===c.id})}if(s.length>0)s.forEach(function(e,n){e.folderId=i.id,e.idx=n,e.siblingCount=s.length}),(a=i.children).push.apply(a,s);else console.log("No children found");if(null!==l&&-1!==d){var f,O=l.length;while(O--)o.includes(l[O].id)&&l.splice(O,1);if(l.splice(d,0,i),r.length>0)(f=l).splice.apply(f,[d+1,0].concat(r))}}else console.warn("No main observation found")}else console.log("No recalculation needed, only one observation");else console.log("No recalculation needed, no observation for this task");else console.warn("No observations for taskId ".concat(n))},SET_FOLDER_VISIBLE:function(e,n){var t=n.folderId,o=n.visible,r=n.callback,i=void 0===r?null:r,s=e.observations.find(function(e){return e.folderId===t});if("undefined"!==typeof s){var a=s.zIndexOffset;e.observations.forEach(function(e){e.folderId===t?(e.visible=o,e.top=o,null!==i&&i(e)):o&&e.zIndexOffset===a&&(e.top=!1)})}else console.warn("Folder with id ".concat(t," has no elements"));var c=u["b"].findNodeById(e.tree,t);"undefined"!==typeof c&&null!==c&&c.children.length>0&&(c.children.forEach(function(e){e.ticked=o}),c.ticked=o)},SET_VISIBLE:function(e,n){var t=n.id,o=n.visible,r=n.callback,i=void 0===r?null:r,s=e.observations.find(function(e){return e.id===t});if("undefined"!==typeof s){var a=s.zIndexOffset;s.visible=o,s.top=o,null!==i&&i(s),o&&e.observations.forEach(function(e){e.id!==t&&e.zIndexOffset===a&&(e.top=!1)});var c=u["b"].findNodeById(e.tree,t);c&&(c.ticked=o)}else console.warn("Try to change visibility to no existing observations with id ".concat(t))},STORE_RAW_SEARCH_RESULT:function(e,n){e.searchResult=n},ADD_LAST:function(e,n){var t=n.folderId,o=n.observationId,r=n.offsetToAdd,i=n.total,s=e.lasts.findIndex(function(e){return t===e.folderId});if(-1!==s){var a=e.lasts[s];a.offset+r+1>=a.total?(e.lasts.splice(s,1),console.log("Delete folder ".concat(t))):(a.observationId=o,a.offset+=r,console.log("Change folder ".concat(t,". Now offset is ").concat(a.offset," ")))}else{if(r+1===i)return void console.log("Nothing to do in folder ".concat(t,". Offset is ").concat(r," and total is ").concat(i," "));e.lasts.push({folderId:t,observationId:o,offset:r,total:i}),console.log("Added folder ".concat(t,". Offset is ").concat(r," "))}},REMOVE_LAST:function(e,n){var t=e.lasts.findIndex(function(e){return e.folderId===n});-1!==t&&e.lasts.splice(t,1)}}),v=t("vjsO"),_={setContext:function(e,n){var t=e.commit,o=e.state,r=e.dispatch;null!==o.context&&o.context.id===n.id||(t("SET_CONTEXT",n),r("view/setContextLayer",n,{root:!0}))},resetContext:function(e){var n=e.commit,t=e.dispatch,o=e.state;null!==o.context?(n("SET_CONTEXT",null),t("view/resetContextLayer",null,{root:!0}),t("data/addObservation",{observation:u["b"].OBSERVATION_DEFAULT,main:!0},{root:!0})):console.warn("Try to reset null context")},addObservation:function(e,n){var t=e.commit,o=e.state,r=e.dispatch,i=n.observation,s=n.folderId,a=void 0===s?null:s,c=n.main,l=void 0!==c&&c,d=n.toTree,E=void 0===d||d,f=n.visible,O=void 0!==f&&f;return new Promise(function(e){var n=o.observations.find(function(e){return e.id===i.id});if("undefined"!==typeof n){if(n.main=i.main,n.main&&null!==n.folderId&&0===n.folderId.indexOf("ff_")){var s=u["b"].findNodeById(o.tree,n.folderId);s.main=!0,n.main=!1}var c=u["b"].findNodeById(o.tree,i.id);return null!==c?c.main=n.main:t("ADD_NODE",u["b"].getNodeFromObservation(n)),e()}return r("view/assignViewer",{observation:i,main:l},{root:!0}).then(function(n){if(i.viewerIdx=n,i.visible=O,i.top=!1,i.zIndex=0,t("ADD_OBSERVATION",i),i.observationType===u["a"].OBSTYP_INITIAL)return e();var o=!1;return i.siblingCount>1&&null===a&&(a="ff_".concat(Math.floor(Date.now()/1e3)),t("ADD_NODE",{node:{id:a,label:"".concat(i.observable," folder"),type:u["a"].GEOMTYP_FOLDER,header:"folder",siblingCount:i.siblingCount,siblingsLoaded:1,children:[],main:i.main},parentId:i.parentId}),o=!0),i.folderId=a,i.children.length>0&&i.children.forEach(function(e){r("addObservation",{observation:e,toTree:E})}),o&&r("askForSiblings",{nodeId:i.id,folderId:a,offset:0,count:u["a"].SIBLINGS_TO_ASK_FOR}),E&&t("ADD_NODE",u["b"].getNodeFromObservation(i)),e()}),null})},recalculateTree:function(e,n){var t=e.commit;if("undefined"===typeof n||null===n)throw new Error("Try to recalculate tree with a not existing task id: ".concat(n));return new Promise(function(e){t("RECALCULATE_TREE",n),e()})},askForSiblings:function(e,n){var t=e.commit,o=e.dispatch,r=e.state,i=n.nodeId,s=n.folderId,a=n.offset,c=void 0===a?0:a,l=n.count,d=void 0===l?u["a"].SIBLINGS_TO_ASK_FOR:l,E=n.toTree,f=void 0===E||E,T=n.visible,S=void 0!==T&&T;return new Promise(function(e){console.log("Ask for sibling of node ".concat(i," in folder ").concat(s,": count:").concat(d," / offset ").concat(c)),v["a"].get("".concat("").concat("/modeler/engine/session/view/","siblings/").concat(i),{params:{count:d,offset:c,childLevel:-1}}).then(function(n){var a=n.data;a&&a.siblingCount>1&&a.siblings&&o("view/setSpinner",O()({},u["a"].SPINNER_LOADING,{owner:i}),{root:!0}).then(function(){if(a.siblings&&a.siblings.length>0){a.siblings.forEach(function(n,r,c){o("addObservation",{observation:n,folderId:s,toTree:f,visible:S}).then(function(){r===c.length-1&&(f&&t("ADD_LAST",{folderId:s,observationId:n.id,offsetToAdd:a.siblings.length,total:a.siblingCount}),o("view/setSpinner",O()({},u["a"].SPINNER_STOPPED,{owner:i}),{root:!0}),e())})});var n=u["b"].findNodeById(r.tree,s);null!==n&&(n.siblingsLoaded+=a.siblings.length)}}),e()})})},hideNode:function(e,n){var t=e.commit;t("SET_VISIBLE",{id:n,visible:!1})},showNode:function(e,n){var t=e.commit,o=e.dispatch,r=n.nodeId,i=n.selectMainViewer,s=void 0!==i&&i;t("SET_VISIBLE",{id:r,visible:!0,callback:s?function(e){o("view/setMainViewer",e.viewerIdx,{root:!0})}:null})},setFolderVisibility:function(e,n){var t=e.commit,o=e.dispatch,r=n.folderId,i=n.visible,s=n.selectMainViewer,a=void 0!==s&&s;t("SET_FOLDER_VISIBLE",{folderId:r,visible:i,callback:i&&a?function(e){o("view/setMainViewer",e.viewerIdx,{root:!0})}:null})},selectNode:function(e,n){var t=e.dispatch,o=e.state,r=o.observations.find(function(e){return e.id===n});r&&r.visible&&!r.top&&t("showNode",{nodeId:n})},storeSearchResult:function(e,n){var t=e.commit;t("STORE_RAW_SEARCH_RESULT",n)}},R={namespaced:!0,state:h,getters:I,mutations:m,actions:_},N={stompClient:null,connectionState:s["a"].CONNECTION_UNKNOWN,reconnectionsAttempt:0,subscriber:null,sendedMessages:[],receivedMessages:[],queuedMessage:null,tasks:[]},g={lastError:function(e){var n=e.receivedMessages.filter(function(e){return e.type===s["a"].TYPE_ERROR}).slice(-1);return 1===n.length?n[0]:null},lastMessage:function(e){var n=e.receivedMessages.filter(function(e){return e.type===s["a"].TYPE_MESSAGE}).slice(-1);return 1===n.length?n[0]:null},lastReceivedMessage:function(e){return e.receivedMessages.length>0?e.receivedMessages.slice(-1)[0]:null},lastSendedMessage:function(e){return e.sendedMessages.length>0?e.sendedMessages.slice(-1)[0]:null},subscriberId:function(e){return null!==e.subscriber?e.subscriber.id:null},queuedMessage:function(e){return e.queuedMessage},connectionState:function(e){return e.connectionState},taskIsAlive:function(e){return function(n){e.tasks.has(n)}},hasTasks:function(e){return 0!==e.tasks.length}},A={STOMP_CONNECTION_STATE:function(e,n){e.connectionState=n},STOMP_ERROR:function(e,n){u["b"].pushElementInFixedQueue(e.receivedMessages,{date:S()().format("HH:mm:ss"),type:u["a"].TYPE_ERROR,message:n})},STOMP_MESSAGE:function(e,n){u["b"].pushElementInFixedQueue(e.receivedMessages,{date:S()().format("HH:mm:ss"),type:u["a"].TYPE_MESSAGE,message:n})},STOMP_SEND_MESSAGE:function(e,n){u["b"].pushElementInFixedQueue(e.sendedMessages,O()({date:S()().format("HH:mm:ss")},n))},STOMP_SUBSCRIBED:function(e,n){e.subscriber=n},STOMP_RECONNECTIONS_ATTEMPT:function(e,n){e.reconnectionsAttempt=n},STOMP_RECONNECTIONS_ATTEMPT_RESET:function(e){e.reconnectionsAttempt=0},STOMP_QUEUE_MESSAGE:function(e,n){e.queuedMessage=n},STOMP_CLEAN_QUEUE:function(e){e.queuedMessage=null},TASK_START:function(e,n){e.tasks.push({id:n.id,task:n})},TASK_END:function(e,n){var t=n.id,o=e.tasks.findIndex(function(e){return e.id===t});"undefined"!==typeof o?e.tasks.splice(o,1):console.debug("Task with id = ".concat(t," not founded"))},TASK_RESET_ALL:function(e){e.tasks=[]}},P=t("lSNA"),C=t.n(P),L=t("0kf8");function y(e,n,t,o){e("view/addToKexplorerLog",{type:n,payload:{message:t,attach:o}},{root:!0})}var w=(o={},C()(o,L["a"].TYPE_TASKSTARTED,function(e,n){n("stomp/taskStart",e,{root:!0}),y(n,u["a"].TYPE_DEBUG,"Started task with id ".concat(e.id))}),C()(o,L["a"].TYPE_TASKABORTED,function(e,n){n("stomp/taskAbort",e,{root:!0}),y(n,u["a"].TYPE_ERROR,"Aborted task with id ".concat(e.id))}),C()(o,L["a"].TYPE_TASKFINISHED,function(e,n){n("stomp/taskEnd",e,{root:!0}),y(n,u["a"].TYPE_DEBUG,"Ended task with id ".concat(e.id))}),C()(o,L["a"].TYPE_DATAFLOWCOMPILED,function(e,n){y(n,u["a"].TYPE_DEBUG,"Dataflow compiled in task ".concat(e.taskId))}),C()(o,L["a"].TYPE_NEWOBSERVATION,function(e,n){y(n,u["a"].TYPE_DEBUG,"New observation received with id ".concat(e.id),JSON.stringify(e,null,4)),console.log("Observation:\n".concat(JSON.stringify(e,null,4))),null===e.parentId||e.parentId===e.id?n("data/setContext",e,{root:!0}):n("data/addObservation",{observation:e},{root:!0})}),C()(o,L["a"].TYPE_QUERYRESULT,function(e,n){y(n,u["a"].TYPE_INFO,"Received search results",JSON.stringify(e)),n("data/storeSearchResult",e,{root:!0})}),C()(o,L["a"].TYPE_RESETCONTEXT,function(e,n){y(n,u["a"].TYPE_INFO,"Received context reset"),n("data/resetContext",null,{root:!0})}),C()(o,L["a"].TYPE_DEBUG,function(e,n){y(n,u["a"].TYPE_DEBUG,e)}),C()(o,L["a"].TYPE_INFO,function(e,n){y(n,u["a"].TYPE_INFO,e)}),C()(o,L["a"].TYPE_WARNING,function(e,n){y(n,u["a"].TYPE_WARNING,e)}),C()(o,L["a"].TYPE_ERROR,function(e,n){y(n,u["a"].TYPE_ERROR,e)}),o),k=function(e){var n=e.body,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=JSON.parse(n);return o.messageClass===L["a"].CLASS_NOTIFICATION&&t("view/addToKlabLog",o,{root:!0}),Object.prototype.hasOwnProperty.call(w,o.type)?w[o.type](o.payload,t):(console.log("Unknown parser ".concat(o.type)),!1)},x={stomp_onconnect:function(e,n){var t=e.commit;t("STOMP_CONNECTION_STATE",s["a"].CONNECTION_UP),t("STOMP_RECONNECTIONS_ATTEMPT_RESET"),t("STOMP_MESSAGE",n)},stomp_onclose:function(e){var n=e.commit;n("STOMP_CONNECTION_STATE",s["a"].CONNECTION_DOWN)},stomp_onerror:function(e,n){var t=e.commit;t("STOMP_CONNECTION_STATE",s["a"].CONNECTION_ERROR),t("STOMP_ERROR",n)},stomp_onmessage:function(e,n){var t=e.commit,o=e.dispatch;t("STOMP_MESSAGE",n),k(n,o)},stomp_onsubscribe:function(e,n){var t=e.commit;t("STOMP_SUBSCRIBED",n)},stomp_reconnect:function(e,n){var t=e.commit;t("STOMP_RECONNECTIONS_ATTEMPT",n),t("STOMP_CONNECTION_STATE",s["a"].CONNECTION_WORKING)},stomp_onsend:function(e,n){var t=e.commit,o=n.message;t("STOMP_SEND_MESSAGE",o)},stomp_onerrorsend:function(e,n){var t=e.commit;t("STOMP_QUEUE_MESSAGE",n)},stomp_cleanqueue:function(e){var n=e.commit;n("STOMP_CLEAN_QUEUE")},taskStart:function(e,n){var t=e.commit,o=e.dispatch;o("view/setSpinner",O()({},s["a"].SPINNER_LOADING,{owner:n.id}),{root:!0}),t("TASK_START",n),t("data/ADD_TASKID",n.id,{root:!0})},taskAbort:function(e,n){var t=e.commit,o=e.dispatch;t("TASK_END",n),o("view/setSpinner",O()({},s["a"].SPINNER_STOPPED,{owner:n.id}),{root:!0})},taskEnd:function(e,n){var t=e.commit,o=e.dispatch;t("TASK_END",n),o("data/recalculateTree",n.id,{root:!0}).then(function(){o("view/setSpinner",O()({},s["a"].SPINNER_STOPPED,{owner:n.id}),{root:!0})})}},M={namespaced:!0,state:N,getters:g,mutations:A,actions:x};r["a"].use(i["a"]);var D=new i["a"].Store({modules:{view:b,data:R,stomp:M}});n["a"]=D},RnhZ:function(e,n,t){var o={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var n=i(e);return t(n)}function i(e){var n=o[e];if(!(n+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id="RnhZ"},TOJS:function(e,n,t){},fMpr:function(e,n,t){"use strict";var o={SPINNER_STOPPED_COLOR:"rgb(17, 170, 187)",SPINNER_LOADING_COLOR:"rgb(255, 195, 0)",SPINNER_ERROR_COLOR:"negative"};n["a"]={HIST_MAX_LENGTH:50,SIBLINGS_TO_ASK_FOR:25,CONNECTION_UNKNOWN:"UNKNOWN",CONNECTION_UP:"UP",CONNECTION_DOWN:"DOWN",CONNECTION_WORKING:"WORKING",CONNECTION_ERROR:"ERROR",TYPE_DEBUG:"debug",TYPE_WARNING:"warning",TYPE_ERROR:"error",TYPE_INFO:"info",TYPE_MESSAGE:"MSG",TYPE_ALL:"ALL",OBSTYP_PROCESS:"PROCESS",OBSTYP_STATE:"STATE",OBSTYP_SUBJECT:"SUBJECT",OBSTYP_CONFIGURATION:"CONFIGURATION",OBSTYP_EVENT:"EVENT",OBSTYP_RELATIONSHIP:"RELATIONSHIP",OBSTYP_INITIAL:"INITIAL",VALTYP_VOID:"VOID",VALTYP_NUMBER:"NUMBER",VALTYP_BOOLEAN:"BOOLEAN",VALTYP_CATEGORY:"CATEGORY",VALTYP_DISTRIBUTION:"DISTRIBUTION",GEOMTYP_RASTER:"RASTER",GEOMTYP_SHAPE:"SHAPE",GEOMTYP_SCALAR:"SCALAR",GEOMTYP_TIMESERIES:"TIMESERIES",GEOMTYP_NETWORK:"NETWORK",GEOMTYP_PROPORTIONS:"PROPORTIONS",GEOMTYP_FOLDER:"FOLDER",MATCH_TYPES:{CONCEPT:{label:"Concept",symbol:"C",color:"sem-types",rgb:"rgb(38, 50, 56)"},PREFIX_OPERATOR:{label:"Prefix operator",symbol:"Po",color:"sem-types",rgb:"rgb(38, 50, 56)"},INFIX_OPERATOR:{label:"Infix operator",symbol:"Io",color:"sem-types",rgb:"rgb(38, 50, 56)"},OBSERVATION:{label:"Observation",symbol:"O",color:"sem-types",rgb:"rgb(38, 50, 56)"},MODEL:{label:"Model",symbol:"Ml",color:"sem-types",rgb:"rgb(38, 50, 56)"},MODIFIER:{label:"Modifier",symbol:"Mf",color:"sem-types",rgb:"rgb(38, 50, 56)"}},SEMANTIC_TYPES:{QUALITY:{label:"Quality",symbol:"Q",color:"sem-quality",rgb:"rgb(0, 153, 0)"},SUBJECT:{label:"Subject",symbol:"S",color:"sem-subject",rgb:"rgb(153, 76, 0)"},IDENTITY:{label:"identity",symbol:"Id",color:"sem-identity",rgb:"rgb(0, 102, 204)"},ATTRIBUTE:{label:"Attribute",symbol:"A",color:"sem-attribute",rgb:"rgb(0, 102, 204)"},REALM:{label:"Realm",symbol:"R",color:"sem-realm",rgb:"rgb(0, 102, 204)"},TRAIT:{label:"Trait",symbol:"T",color:"sem-trait",rgb:"rgb(0, 102, 204)"},EVENT:{label:"Event",symbol:"E",color:"sem-event",rgb:"rgb(53, 153, 0)"},RELATIONSHIP:{label:"Relationship",symbol:"R",color:"sem-relationship",rgb:"rgb(210, 170, 0)"},PROCESS:{label:"Process",symbol:"P",color:"sem-process",rgb:"rgb(204, 0, 0)"},ROLE:{label:"Role",symbol:"R",color:"sem-role",rgb:"rgb(0, 86, 163)"},CONFIGURATION:{label:"Configuration",symbol:"C",color:"sem-configuration",rgb:"rgb(98, 98, 98)"},DOMAIN:{label:"Domain",symbol:"D",color:"sem-domain",rgb:"rgb(240, 240, 240)"}},PARAMS_MODE:"mode",PARAMS_MODE_IDE:"ide",PARAMS_SESSION:"session",PARAMS_LOG:"log",PARAMS_LOG_HIDDEN:"hidden",PARAMS_LOG_VISIBLE:"visible",COOKIE_LANG:"klab_exp_lang",COOKIE_SESSION:"klab_session",COOKIE_MODE:"klab_mode",COOKIE_LOG:"klab_log",COOKIE_BASELAYER:"klab_baselayer",VIEW_MAP:"MapViewer",VIEW_CHART:"ChartViewer",VIEW_GRAPH:"GraphViewer",VIEW_BLOB:"BlobViewer",VIEW_UNKNOWN:"UnknownViewer",VIEW_INITIAL:"MapViewer",SHAPE_POLYGON:"POLYGON",SHAPE_POINT:"POINT",SHAPE_EMPTY:"EMPTY",PARAM_VIEWPORT_SIZE:800,PARAM_VIEWPORT_MAX_SIZE:7680,PARAM_VIEWPORT_MULTIPLIER:2,COLOR_PRIMARY:"primary",COLOR_SECONDARY:"secondary",COLOR_TERTIARY:"tertiary",COLOR_POSITIVE:"positive",COLOR_NEGATIVE:"negative",COLOR_INFO:"info",COLOR_WARNING:"warning",COLOR_LIGHT:"light",COLOR_DARK:"dark",COLOR_FADED:"faded",SPINNER_LOADING:{color:o.SPINNER_LOADING_COLOR,animated:!0},SPINNER_STOPPED:{color:o.SPINNER_STOPPED_COLOR,animated:!1},SPINNER_ERROR:{color:o.SPINNER_ERROR_COLOR,animated:!1,time:2,then:{color:o.SPINNER_STOPPED_COLOR,animated:!1}}}},fm0S:function(e,n,t){},sSqL:function(e,n,t){"use strict";t.d(n,"b",function(){return C});var o=t("MVZn"),r=t.n(o),i=(t("pIFo"),t("ls82"),t("yXPU")),s=t.n(i),a=(t("VRzm"),t("RIqP")),c=t.n(a),l=(t("dRSK"),t("WDFe")),u=t("Pmt0"),d=t("ZNkr"),E=t("TN97"),f=t("yBBP"),O=t("599d"),T=t("CvXi"),S=t("JW8z"),p=t("vIFP"),b=t("p5/s"),h=t("vjsO"),I=t("fMpr");t.d(n,"a",function(){return I["a"]});var m=t("Q2AE"),v=t("bHcU"),_=t("+4JY"),R=t("FEKV"),N=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/,g=_["a"].hexToRgb,A=_["a"].getBrand,P=_["a"].rgbToHex,C={capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},pushElementInFixedQueue:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I["a"].HIST_MAX_LENGTH;e.push(n),e.length>t&&e.shift()},lastFilteredLogElement:function(e,n){if(0===e.length)return null;if(void 0===n)return e[e.length-1];var t=c()(e).reverse().find(function(e){return e.type===n});return"undefined"!==typeof t?t:null},formatExtent:function(e){return e?[e.south.toFixed(2),e.west.toFixed(2),e.north.toFixed(2),e.east.toFixed(2)]:null},findNodeById:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&null!==n){var t=[].reduce,o=function e(o,r){return o||!r?o:Array.isArray(r)?t.call(Object(r),e,o):r.id===n?r:r.children&&r.children.length>0?e(null,r.children):null};return o(null,e)}return null},getNodeFromObservation:function(e){return{node:{id:e.id,label:e.literalValue||e.label,type:e.shapeType,viewerIdx:e.viewerIdx,children:[],tickable:null!==e.viewerIdx&&!e.empty,disabled:e.empty,actions:e.actions,header:"default",folderId:e.folderId,main:e.main},parentId:null===e.folderId?e.parentId:e.folderId}},registerProjection:function(e){return new Promise(function(n,t){var o=e.substring(5);fetch("https://epsg.io/?format=json&q=".concat(o)).then(function(o){return o.json().then(function(o){var r=o.results;if(r&&r.length>0)for(var i=0,s=r.length;i<s;i+=1){var a=r[i];if(a){var c=a.code,l=a.proj4,u=a.bbox;if(c&&c.length>0&&l&&l.length>0&&u&&4===u.length){var d="EPSG:".concat(c);b["a"].defs(d,l),Object(p["a"])(b["a"]);var E=Object(S["f"])(d),f=Object(S["h"])(R["c"].PROJ_EPSG_4326,E),O=Object(T["a"])([u[1],u[2],u[3],u[0]],f);E.setExtent(O),console.log("New projection registered: ".concat(d)),n(E)}else t(new Error("Some error in projection search result: ".concat(JSON.stringify(a))))}else t(new Error("Some error in projection search result: no results"))}else t(new Error("Unknown projection: ".concat(e)))})})})},getContextGeometry:function(){var e=s()(regeneratorRuntime.mark(function e(n){var t,o,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.spatialProjection,null===o){e.next=9;break}if(t=Object(S["f"])(o),null!==t){e.next=7;break}return e.next=6,this.registerProjection(o);case 6:t=e.sent;case 7:e.next=10;break;case 9:t=R["c"].PROJ_EPSG_4326;case 10:return r=n.encodedShape,0===r.indexOf("LINEARRING")&&(r=r.replace("LINEARRING","LINESTRING")),i=(new d["a"]).readGeometry(r,{dataProjection:t,featureProjection:R["c"].PROJ_EPSG_3857}),n.zIndexOffset=0,e.abrupt("return",i);case 15:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),getLayerObject:function(){var e=s()(regeneratorRuntime.mark(function e(n,t){var o,i,s,a,c,T,p,b,_,N,g,A,P,C,L,y,w;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.viewport,i=void 0===o?null:o,s=n.geometryTypes,a=s&&"undefined"!==typeof s.find(function(e){return e===I["a"].GEOMTYP_RASTER}),a?n.parentId===m["a"].state.data.context.id?c=m["a"].state.data.context.spatialProjection:(T=this.findNodeById(m["a"].state.data.tree,n.parentId),null!==T&&T.spatialProjection?c=T.spatialProjection:console.log("Unknown parent with id ".concat(n.parentId))):c=n.spatialProjection,null===c){e.next=12;break}if(p=Object(S["f"])(c),null!==p){e.next=10;break}return e.next=9,this.registerProjection(c);case 9:p=e.sent;case 10:e.next=13;break;case 12:p=R["c"].PROJ_EPSG_4326;case 13:if(b=n.encodedShape,0===b.indexOf("LINEARRING")&&(b=b.replace("LINEARRING","LINESTRING")),_=(new d["a"]).readGeometry(b,{dataProjection:p,featureProjection:R["c"].PROJ_EPSG_3857}),!a){e.next=23;break}return n.zIndexOffset=R["c"].ZINDEX_OFFSET*R["c"].ZINDEX_MULTIPLIER_RASTER,null===i?i=Math.max(document.body.clientHeight,document.body.clientWidth)*I["a"].PARAM_VIEWPORT_MULTIPLIER:i>I["a"].PARAM_VIEWPORT_MAX_SIZE&&(i=I["a"].PARAM_VIEWPORT_MAX_SIZE),N=_.getExtent(),g="".concat("").concat("/modeler/engine/session/view/","data/").concat(n.id),A=new O["a"]({projection:R["c"].PROJ_EPSG_3857,imageExtent:N,url:g,style:R["d"].POLYGON_OBSERVATION_STYLE,imageLoadFunction:function(e,n){m["a"].dispatch("view/setSpinner",r()({},I["a"].SPINNER_LOADING,{owner:n}),{root:!0}),h["a"].get(n,{params:{format:I["a"].GEOMTYP_RASTER,viewport:i},responseType:"blob"}).then(function(t){if(t){var o=new FileReader;o.readAsDataURL(t.data),o.onload=function(){var t=e.getImage();t.src=o.result,m["a"].dispatch("view/setSpinner",r()({},I["a"].SPINNER_STOPPED,{owner:n}),{root:!0})},o.onerror=function(e){m["a"].dispatch("view/setSpinner",r()({},I["a"].SPINNER_ERROR,{owner:n,errorMessage:e}),{root:!0})}}}).catch(function(e){m["a"].dispatch("view/setSpinner",r()({},I["a"].SPINNER_ERROR,{owner:n,errorMessage:e}),{root:!0})})}}),e.abrupt("return",new f["a"]({id:n.id,source:A}));case 23:return 0===b.indexOf("LINESTRING")||0===b.indexOf("MULTILINESTRING")?(P=R["d"].LNE_OBSERVATION_STYLE,n.zIndexOffset=R["c"].ZINDEX_OFFSET*R["c"].ZINDEX_MULTIPLIER_LINES):0===b.indexOf("POINT")||0===b.indexOf("MULTIPOINT")?(C=R["e"].POINT_OBSERVATION_TEXT.clone(),L=R["e"].POINT_OBSERVATION_SVG_ICON({fill:"%23eee",stroke:"%23333",strokeWidth:"4"}).clone(),C.setText(n.label),P=new v["b"]({image:L,text:C}),n.zIndexOffset=R["c"].ZINDEX_OFFSET*R["c"].ZINDEX_MULTIPLIER_POINTS):(P=R["d"].POLYGON_OBSERVATION_STYLE,n.zIndexOffset=R["c"].ZINDEX_OFFSET*R["c"].ZINDEX_MULTIPLIER_POLYGONS),y=new E["a"]({geometry:_,name:n.label,id:n.id}),w=new u["a"]({id:n.id,source:new l["a"]({features:[y]}),style:P}),e.abrupt("return",w);case 27:case"end":return e.stop()}},e,this)}));return function(n,t){return e.apply(this,arguments)}}(),reverseKeys:regeneratorRuntime.mark(function e(n){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=n.length-1;case 1:if(!(t>=0)){e.next=7;break}return e.next=4,t;case 4:t-=1,e.next=1;break;case 7:case"end":return e.stop()}},e,this)}),textToRgb:function(e){if("string"!==typeof e)throw new TypeError("Expected a string");var n=N.exec(e);if(n){var t={r:parseInt(n[1],10),g:parseInt(n[2],10),b:parseInt(n[3],10)};return n[4]&&(t.a=parseFloat(n[4])),t}return g(e)},getColorObject:function(e){var n,t;return 0===e.indexOf("#")?(t=e,n=g(e)):-1!==e.indexOf(",")?(n=this.textToRgb(e),t=P(n)):(t=A(e),n=g(t)),{rgb:n,hex:t,color:e}},OBSERVATION_DEFAULT:{shapeType:"POINT",encodedShape:"POINT (40.299841 9.343971)",id:null,label:"DEFAULT",parentId:-1,visible:!0,spatialProjection:"EPSG:4326",observationType:I["a"].OBSTYP_INITIAL}}},vjsO:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t("vDqi"),r=t.n(o),i=r.a.create();n["b"]=function(e){var n=e.Vue,t=e.store;t.state.data.session?i.defaults.headers.common.Authorization=t.state.data.session:console.warn("No session established en axios header, check what it means"),n.prototype.$axios=i}}},[[0,6,5]]]);
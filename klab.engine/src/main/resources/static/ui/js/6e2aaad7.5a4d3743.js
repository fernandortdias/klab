(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6e2aaad7"],{"0300":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(i.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(i.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(i.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(i.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(i.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,i){var o=n.filter(function(e){return!t(e)});o.length>0?e._map.set(i,o):e._map.delete(i)})},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(i.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(t,n){t.forEach(function(t){return e.add(n,t.clone())})}),e},t.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},t}();e.Lookup=o},"0312":function(t,e){var n=!("undefined"===typeof window||!window.document||!window.document.createElement);t.exports=n},"0332":function(t,e,n){},"0483":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("b485"),s=new i.ContainerModule(function(t){t(o.TYPES.MouseListener).to(r.OpenMouseListener)});e.default=s},"04c2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("4741"),s=new i.ContainerModule(function(t){t(o.TYPES.IButtonHandler).toConstructor(r.ExpandButtonHandler)});e.default=s},"064a":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("393a"),c=n("e1c6"),l=n("6923"),u=n("302f"),d=n("3864"),h=n("dd02"),f=function(t){function e(e){var n=t.call(this)||this;return n.registerDefaults(),e.forEach(function(t){return n.register(t.type,t.constr)}),n}return i(e,t),e.prototype.registerDefaults=function(){this.register(u.EMPTY_ROOT.type,v)},e.prototype.missing=function(t){return new m},e=o([c.injectable(),s(0,c.multiInject(l.TYPES.ViewRegistration)),s(0,c.optional()),r("design:paramtypes",[Array])],e),e}(d.ProviderRegistry);function p(t,e,n,i){t.bind(l.TYPES.SModelElementRegistration).toConstantValue({type:e,constr:n}),t.bind(l.TYPES.ViewRegistration).toConstantValue({type:e,constr:i})}e.ViewRegistry=f,e.configureModelElement=p;var v=function(){function t(){}return t.prototype.render=function(t,e){return a.svg("svg",{"class-sprotty-empty":!0})},t}();e.EmptyView=v;var m=function(){function t(){}return t.prototype.render=function(t,e){var n=t.position||h.ORIGIN_POINT;return a.svg("text",{"class-sprotty-missing":!0,x:n.x,y:n.y},"?",t.id,"?")},t}();e.MissingView=m},"07d6":function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},"0bae":function(t,e,n){"use strict";var i=n("7282"),o=n.n(i);o.a},"0bd8":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=function(){function t(t){this.options=t}return t.prototype.decorate=function(t,e){return t},t.prototype.postUpdate=function(){var t=document.getElementById(this.options.popupDiv);if(null!==t&&"undefined"!==typeof window){var e=t.getBoundingClientRect();window.innerHeight<e.height+e.top&&(t.style.top=window.scrollY+window.innerHeight-e.height-5+"px"),window.innerWidth<e.left+e.width&&(t.style.left=window.scrollX+window.innerWidth-e.width-5+"px"),e.left<0&&(t.style.left="0px"),e.top<0&&(t.style.top="0px")}},t=i([s.injectable(),r(0,s.inject(a.TYPES.ViewerOptions)),o("design:paramtypes",[Object])],t),t}();e.PopupPositionUpdater=c},"0be1":function(t,e,n){"use strict";function i(t,e,n){return{red:t,green:e,blue:n}}function o(t){return"rgb("+t.red+","+t.green+","+t.blue+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.rgb=i,e.toSVG=o;var r=function(){function t(t){this.stops=t}return t.prototype.getColor=function(t){t=Math.max(0,Math.min(.99999999,t));var e=Math.floor(t*this.stops.length);return this.stops[e]},t}();e.ColorMap=r},"0d7a":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=function(){function t(t){this.viewerOptions=t}return t.prototype.getPrefix=function(){var t=void 0!==this.viewerOptions&&void 0!==this.viewerOptions.baseDiv?this.viewerOptions.baseDiv+"_":"";return t},t.prototype.createUniqueDOMElementId=function(t){return this.getPrefix()+t.id},t.prototype.findSModelIdByDOMElement=function(t){return t.id.replace(this.getPrefix(),"")},t=i([s.injectable(),r(0,s.inject(a.TYPES.ViewerOptions)),o("design:paramtypes",[Object])],t),t}();e.DOMHelper=c},"0f4c":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("c146"),r=function(t){function e(e,n,i,o){void 0===o&&(o=!1);var r=t.call(this,i)||this;return r.model=e,r.elementResizes=n,r.reverse=o,r}return i(e,t),e.prototype.tween=function(t){var e=this;return this.elementResizes.forEach(function(n){var i=n.element,o=e.reverse?{width:(1-t)*n.toDimension.width+t*n.fromDimension.width,height:(1-t)*n.toDimension.height+t*n.fromDimension.height}:{width:(1-t)*n.fromDimension.width+t*n.toDimension.width,height:(1-t)*n.fromDimension.height+t*n.toDimension.height};i.bounds={x:i.bounds.x,y:i.bounds.y,width:o.width,height:o.height}}),this.model},e}(o.Animation);e.ResizeAnimation=r},"0fb6":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=n("302f"),l=n("538c"),u=n("3f0a"),d=n("c20e"),h=n("510b"),f=n("be02"),p=function(){function t(t,e,n,i){this.actionHandlerRegistry=t,this.commandStack=e,this.logger=n,this.syncer=i,this.postponedActions=[],this.postponedActions=[];var o=new u.SetModelCommand(new u.SetModelAction(c.EMPTY_ROOT));this.blockUntil=o.blockUntil,this.commandStack.execute(o)}return t.prototype.dispatchAll=function(t){var e=this;return Promise.all(t.map(function(t){return e.dispatch(t)}))},t.prototype.dispatch=function(t){return void 0!==this.blockUntil?this.handleBlocked(t,this.blockUntil):t.kind===d.UndoAction.KIND?this.commandStack.undo().then(function(){}):t.kind===d.RedoAction.KIND?this.commandStack.redo().then(function(){}):this.handleAction(t)},t.prototype.handleAction=function(t){this.logger.log(this,"handle",t);var e=this.actionHandlerRegistry.get(t.kind);if(e.length>0){for(var n=[],i=0,o=e;i<o.length;i++){var r=o[i],s=r.handle(t);h.isAction(s)?n.push(this.dispatch(s)):void 0!==s&&(n.push(this.commandStack.execute(s)),this.blockUntil=s.blockUntil)}return Promise.all(n)}return this.logger.warn(this,"Missing handler for action",t),Promise.reject("Missing handler for action '"+t.kind+"'")},t.prototype.handleBlocked=function(t,e){var n=this;if(e(t)){this.blockUntil=void 0;var i=this.handleAction(t),o=this.postponedActions;this.postponedActions=[];for(var r=0,s=o;r<s.length;r++){var a=s[r];this.dispatch(a.action).then(a.resolve,a.reject)}return i}return this.logger.log(this,"Action is postponed due to block condition",t),new Promise(function(e,i){n.postponedActions.push({action:t,resolve:e,reject:i})})},t=i([s.injectable(),r(0,s.inject(a.TYPES.ActionHandlerRegistry)),r(1,s.inject(a.TYPES.ICommandStack)),r(2,s.inject(a.TYPES.ILogger)),r(3,s.inject(a.TYPES.AnimationFrameSyncer)),o("design:paramtypes",[f.ActionHandlerRegistry,Object,Object,l.AnimationFrameSyncer])],t),t}();e.ActionDispatcher=p},"0fd9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e801"),o=n("e34e"),r=n("cf81"),s=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=s},1288:function(t,e,n){},1417:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=n("3a92"),l=n("e45b"),u=function(){function t(t,e){void 0===e&&(e=[]),this.actionDispatcher=t,this.keyListeners=e}return t.prototype.register=function(t){this.keyListeners.push(t)},t.prototype.deregister=function(t){var e=this.keyListeners.indexOf(t);e>=0&&this.keyListeners.splice(e,1)},t.prototype.handleEvent=function(t,e,n){var i=this.keyListeners.map(function(i){return i[t].apply(i,[e,n])}).reduce(function(t,e){return t.concat(e)});i.length>0&&(n.preventDefault(),this.actionDispatcher.dispatchAll(i))},t.prototype.keyDown=function(t,e){this.handleEvent("keyDown",t,e)},t.prototype.focus=function(){},t.prototype.decorate=function(t,e){return e instanceof c.SModelRoot&&(l.on(t,"focus",this.focus.bind(this),e),l.on(t,"keydown",this.keyDown.bind(this),e)),t},t.prototype.postUpdate=function(){},t=i([s.injectable(),r(0,s.inject(a.TYPES.IActionDispatcher)),r(1,s.multiInject(a.TYPES.KeyListener)),r(1,s.optional()),o("design:paramtypes",[Object,Array])],t),t}();e.KeyTool=u;var d=function(){function t(){}return t.prototype.keyDown=function(t,e){return[]},t=i([s.injectable()],t),t}();e.KeyListener=d},1468:function(t,e){var n=1e3,i=60*n,o=60*i,r=24*o,s=365.25*r;function a(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var a=parseFloat(e[1]),c=(e[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function c(t){return t>=r?Math.round(t/r)+"d":t>=o?Math.round(t/o)+"h":t>=i?Math.round(t/i)+"m":t>=n?Math.round(t/n)+"s":t+"ms"}function l(t){return u(t,r,"day")||u(t,o,"hour")||u(t,i,"minute")||u(t,n,"second")||t+" ms"}function u(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var n=typeof t;if("string"===n&&t.length>0)return a(t);if("number"===n&&!1===isNaN(t))return e.long?l(t):c(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"155f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingScopeEnum=i;var o={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.BindingTypeEnum=o;var r={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};e.TargetTypeEnum=r},"15f6":function(t,e,n){},"160b":function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i["throw"](t))}catch(t){r(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n("e1c6"),u=n("6923"),d=n("302f"),h=n("538c"),f=n("9757"),p=function(){function t(t,e,n,i,o){this.modelFactory=t,this.viewerProvider=e,this.logger=n,this.syncer=i,this.options=o,this.undoStack=[],this.redoStack=[],this.offStack=[],this.currentPromise=Promise.resolve({root:t.createRoot(d.EMPTY_ROOT),hiddenRoot:void 0,popupRoot:void 0,rootChanged:!1,hiddenRootChanged:!1,popupChanged:!1})}return Object.defineProperty(t.prototype,"currentModel",{get:function(){return this.currentPromise.then(function(t){return t.root})},enumerable:!0,configurable:!0}),t.prototype.executeAll=function(t){var e=this;return t.forEach(function(t){e.logger.log(e,"Executing",t),e.handleCommand(t,t.execute,e.mergeOrPush)}),this.thenUpdate()},t.prototype.execute=function(t){return this.logger.log(this,"Executing",t),this.handleCommand(t,t.execute,this.mergeOrPush),this.thenUpdate()},t.prototype.undo=function(){var t=this;this.undoOffStackSystemCommands(),this.undoPreceedingSystemCommands();var e=this.undoStack.pop();return void 0!==e&&(this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,function(e,n){t.redoStack.push(e)})),this.thenUpdate()},t.prototype.redo=function(){var t=this;this.undoOffStackSystemCommands();var e=this.redoStack.pop();return void 0!==e&&(this.logger.log(this,"Redoing",e),this.handleCommand(e,e.redo,function(e,n){t.pushToUndoStack(e)})),this.redoFollowingSystemCommands(),this.thenUpdate()},t.prototype.handleCommand=function(t,e,n){var o=this;this.currentPromise=this.currentPromise.then(function(r){return new Promise(function(s,a){var c,l=o.createContext(r.root);try{c=e.call(t,l)}catch(t){o.logger.error(o,"Failed to execute command:",t),c=r.root}t instanceof f.HiddenCommand?s(i({},r,{hiddenRoot:c,hiddenRootChanged:!0})):t instanceof f.PopupCommand?s(i({},r,{popupRoot:c,popupChanged:!0})):c instanceof Promise?c.then(function(e){n.call(o,t,l),s(i({},r,{root:e,rootChanged:!0}))}):(n.call(o,t,l),s(i({},r,{root:c,rootChanged:!0})))})})},t.prototype.pushToUndoStack=function(t){this.undoStack.push(t),this.options.undoHistoryLimit>=0&&this.undoStack.length>this.options.undoHistoryLimit&&this.undoStack.splice(0,this.undoStack.length-this.options.undoHistoryLimit)},t.prototype.thenUpdate=function(){var t=this;return this.currentPromise=this.currentPromise.then(function(e){return a(t,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return e.hiddenRootChanged&&void 0!==e.hiddenRoot?[4,this.updateHidden(e.hiddenRoot)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.rootChanged?[4,this.update(e.root)]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.popupChanged&&void 0!==e.popupRoot?[4,this.updatePopup(e.popupRoot)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2,{root:e.root,hiddenRoot:void 0,popupRoot:void 0,rootChanged:!1,hiddenRootChanged:!1,popupChanged:!1}]}})})}),this.currentModel},t.prototype.update=function(t){return a(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return void 0!==this.viewer?[3,2]:(e=this,[4,this.viewerProvider()]);case 1:e.viewer=n.sent(),n.label=2;case 2:return this.viewer.update(t),[2]}})})},t.prototype.updateHidden=function(t){return a(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return void 0!==this.viewer?[3,2]:(e=this,[4,this.viewerProvider()]);case 1:e.viewer=n.sent(),n.label=2;case 2:return this.viewer.updateHidden(t),[2]}})})},t.prototype.updatePopup=function(t){return a(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return void 0!==this.viewer?[3,2]:(e=this,[4,this.viewerProvider()]);case 1:e.viewer=n.sent(),n.label=2;case 2:return this.viewer.updatePopup(t),[2]}})})},t.prototype.mergeOrPush=function(t,e){var n=this;if(!(t instanceof f.HiddenCommand))if(t instanceof f.SystemCommand&&this.redoStack.length>0)this.offStack.push(t);else{if(this.offStack.forEach(function(t){return n.undoStack.push(t)}),this.offStack=[],this.redoStack=[],this.undoStack.length>0){var i=this.undoStack[this.undoStack.length-1];if(i instanceof f.MergeableCommand&&i.merge(t,e))return}this.pushToUndoStack(t)}},t.prototype.undoOffStackSystemCommands=function(){var t=this.offStack.pop();while(void 0!==t)this.logger.log(this,"Undoing off-stack",t),this.handleCommand(t,t.undo,function(){}),t=this.offStack.pop()},t.prototype.undoPreceedingSystemCommands=function(){var t=this,e=this.undoStack[this.undoStack.length-1];while(void 0!==e&&e instanceof f.SystemCommand)this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,function(e,n){t.redoStack.push(e)}),e=this.undoStack[this.undoStack.length-1]},t.prototype.redoFollowingSystemCommands=function(){var t=this,e=this.redoStack[this.redoStack.length-1];while(void 0!==e&&e instanceof f.SystemCommand)this.redoStack.pop(),this.logger.log(this,"Redoing ",e),this.handleCommand(e,e.redo,function(e,n){t.pushToUndoStack(e)}),e=this.redoStack[this.redoStack.length-1]},t.prototype.createContext=function(t){return{root:t,modelChanged:this,modelFactory:this.modelFactory,duration:this.options.defaultDuration,logger:this.logger,syncer:this.syncer}},t=o([l.injectable(),s(0,l.inject(u.TYPES.IModelFactory)),s(1,l.inject(u.TYPES.IViewerProvider)),s(2,l.inject(u.TYPES.ILogger)),s(3,l.inject(u.TYPES.AnimationFrameSyncer)),s(4,l.inject(u.TYPES.CommandStackOptions)),r("design:paramtypes",[Object,Function,Object,h.AnimationFrameSyncer,Object])],t),t}();e.CommandStack=p},1817:function(t,e,n){"use strict";var i=n("c23f"),o=n.n(i);o.a},1848:function(t,e,n){"use strict";var i=n("98ab"),o=n.n(i);o.a},1979:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=o},"19b5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("393a"),o=n("9964"),r=n("3623"),s=function(){function t(){}return t.prototype.render=function(t,e){var n=r.findParentByFeature(t,o.isExpandable),s=void 0!==n&&n.expanded?"M 1,5 L 8,12 L 15,5 Z":"M 1,8 L 8,15 L 8,1 Z";return i.svg("g",{"class-sprotty-button":"{true}","class-enabled":"{button.enabled}"},i.svg("rect",{x:0,y:0,width:16,height:16,opacity:0}),i.svg("path",{d:s}))},t}();e.ExpandButtonView=s},"19f2":function(t,e,n){"use strict";var i=n("8ac3"),o=n.n(i);o.a},"1c4c":function(t,e,n){"use strict";var i=n("9b43"),o=n("5ca1"),r=n("4bf8"),s=n("1fa8"),a=n("33a4"),c=n("9def"),l=n("f1ae"),u=n("27ee");o(o.S+o.F*!n("5cc5")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,d,h=r(t),f="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,y=u(h);if(m&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&a(y))for(e=c(h.length),n=new f(e);e>g;g++)l(n,g,m?v(h[g],g):h[g]);else for(d=y.call(h),n=new f;!(o=d.next()).done;g++)l(n,g,m?s(d,v,[o.value,g],!0):o.value);return n.length=g,n}})},"1cd9":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("9757"),l=n("4c18"),u=n("3a92"),d=n("1417"),h=n("b669"),f=n("7faf"),p=n("5d19"),v=n("302f"),m=n("5eb6"),g=n("e4f0"),y=n("6923"),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return h.matchesKeystroke(e,"KeyE","ctrlCmd","shift")?[new _]:[]},e=o([a.injectable()],e),e}(d.KeyListener);e.ExportSvgKeyListener=b;var _=function(){function t(){this.kind=w.KIND}return t}();e.RequestExportSvgAction=_;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.execute=function(t){if(f.isExportable(t.root)){var e=t.modelFactory.createRoot(t.modelFactory.createSchema(t.root));if(f.isExportable(e))return e.export=!0,m.isViewport(e)&&(e.zoom=1,e.scroll={x:0,y:0}),e.index.all().forEach(function(t){l.isSelectable(t)&&t.selected&&(t.selected=!1),g.isHoverable(t)&&t.hoverFeedback&&(t.hoverFeedback=!1)}),e}return t.modelFactory.createRoot(v.EMPTY_ROOT)},e.KIND="requestExportSvg",e}(c.HiddenCommand);e.ExportSvgCommand=w;var S=function(){function t(t){this.svgExporter=t}return t.prototype.decorate=function(t,e){return e instanceof u.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(){this.root&&f.isExportable(this.root)&&this.root.export&&this.svgExporter.export(this.root)},t=o([a.injectable(),s(0,a.inject(y.TYPES.SvgExporter)),r("design:paramtypes",[p.SvgExporter])],t),t}();e.ExportSvgDecorator=S},"1e19":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("ed4f"),s=n("c444"),a=n("cf98"),c=n("fe37"),l=new i.ContainerModule(function(t){t(o.TYPES.ICommand).toConstructor(r.CenterCommand),t(o.TYPES.ICommand).toConstructor(r.FitToScreenCommand),t(o.TYPES.ICommand).toConstructor(s.ViewportCommand),t(o.TYPES.KeyListener).to(r.CenterKeyboardListener),t(o.TYPES.MouseListener).to(a.ScrollMouseListener),t(o.TYPES.MouseListener).to(c.ZoomMouseListener)});e.default=l},"1e94":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.of=function(e,n){var i=new t;return i.bindings=e,i.middleware=n,i},t}();e.ContainerSnapshot=i},"1f0f":function(t,e,n){},"1f6f":function(t,e,n){"use strict";var i=n("2dae"),o=n.n(i);o.a},"1f89":function(t,e,n){"use strict";function i(t){return t.hasFeature(e.openFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.openFeature=Symbol("openFeature"),e.isOpenable=i},"1fac":function(t,e,n){"use strict";var i=n("e5a7"),o=n.n(i);o.a},"1fb5":function(t,e,n){"use strict";e.byteLength=u,e.toByteArray=h,e.fromByteArray=v;for(var i=[],o=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)i[a]=s[a],o[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function u(t){var e=l(t),n=e[0],i=e[1];return 3*(n+i)/4-i}function d(t,e,n){return 3*(e+n)/4-n}function h(t){var e,n,i=l(t),s=i[0],a=i[1],c=new r(d(t,s,a)),u=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===a&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,c[u++]=255&e),1===a&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c}function f(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function p(t,e,n){for(var i,o=[],r=e;r<n;r+=3)i=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),o.push(f(i));return o.join("")}function v(t){for(var e,n=t.length,o=n%3,r=[],s=16383,a=0,c=n-o;a<c;a+=s)r.push(p(t,a,a+s>c?c:a+s));return 1===o?(e=t[n-1],r.push(i[e>>2]+i[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],r.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),r.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"218d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("393a"),o=n("47b7"),r=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return i.svg("svg",null,i.svg("g",{transform:n},e.renderChildren(t)))},t}();e.SvgViewportView=r;var s=function(){function t(){}return t.prototype.render=function(t,e){var n=this.getRadius(t);return i.svg("g",null,i.svg("circle",{"class-sprotty-node":t instanceof o.SNode,"class-sprotty-port":t instanceof o.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,r:n,cx:n,cy:n}),e.renderChildren(t))},t.prototype.getRadius=function(t){var e=Math.min(t.size.width,t.size.height);return e>0?e/2:0},t}();e.CircularNodeView=s;var a=function(){function t(){}return t.prototype.render=function(t,e){return i.svg("g",null,i.svg("rect",{"class-sprotty-node":t instanceof o.SNode,"class-sprotty-port":t instanceof o.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:Math.max(t.size.width,0),height:Math.max(t.size.height,0)}),e.renderChildren(t))},t}();e.RectangularNodeView=a},2440:function(t,e,n){var i,o=o||function(t){"use strict";if(!("undefined"===typeof t||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in i,r=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},s=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l="application/octet-stream",u=4e4,d=function(t){var e=function(){"string"===typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,u)},h=function(t,e,n){e=[].concat(e);var i=e.length;while(i--){var o=t["on"+e[i]];if("function"===typeof o)try{o.call(t,n||t)}catch(t){c(t)}}},f=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},p=function(e,c,u){u||(e=f(e));var p,v=this,m=e.type,g=m===l,y=function(){h(v,"writestart progress write writeend".split(" "))},b=function(){if((a||g&&s)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=a?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=t.open(e,"_blank");n||(t.location.href=e),e=void 0,v.readyState=v.DONE,y()},i.readAsDataURL(e),void(v.readyState=v.INIT)}if(p||(p=n().createObjectURL(e)),g)t.location.href=p;else{var o=t.open(p,"_blank");o||(t.location.href=p)}v.readyState=v.DONE,y(),d(p)};if(v.readyState=v.INIT,o)return p=n().createObjectURL(e),void setTimeout(function(){i.href=p,i.download=c,r(i),y(),d(p),v.readyState=v.DONE});b()},v=p.prototype,m=function(t,e,n){return new p(t,e||t.name||"download",n)};return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=f(t)),navigator.msSaveOrOpenBlob(t,e)}:(v.abort=function(){},v.readyState=v.INIT=0,v.WRITING=1,v.DONE=2,v.error=v.onwritestart=v.onprogress=v.onwrite=v.onabort=v.onerror=v.onwriteend=null,m)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */t.exports?t.exports.saveAs=o:null!==n("07d6")&&null!==n("3c35")&&(i=function(){return o}.call(e,n,e,t),void 0===i||(t.exports=i))},2447:function(t,e,n){},2590:function(t,e,n){"use strict";var i=n("1288"),o=n.n(i);o.a},"26ad":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=n("be02"),l=n("3f0a"),u=n("5d19"),d=function(){function t(t,e,n){this.actionDispatcher=t,this.viewerOptions=n,this.initialize(e)}return t.prototype.initialize=function(t){t.registerCommand(l.SetModelCommand),t.register(l.RequestModelAction.KIND,this),t.register(u.ExportSvgAction.KIND,this)},t=i([s.injectable(),r(0,s.inject(a.TYPES.IActionDispatcher)),r(1,s.inject(a.TYPES.ActionHandlerRegistry)),r(2,s.inject(a.TYPES.ViewerOptions)),o("design:paramtypes",[Object,c.ActionHandlerRegistry,Object])],t),t}();e.ModelSource=d},"29fa":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("393a"),a=n("dd7b"),c=n("6af2"),l=n("ff70"),u=n("9016"),d=n("6907"),h=n("f923"),f=n("e1c6"),p=n("6923"),v=n("dd02"),m=n("33b2"),g=n("e45b"),y=n("8d53"),b=n("302f"),_=function(){function t(t,e){this.viewRegistry=t,this.decorators=e}return t.prototype.decorate=function(t,e){return y.isThunk(t)?t:this.decorators.reduce(function(t,n){return n.decorate(t,e)},t)},t.prototype.renderElement=function(t,e){var n=this.viewRegistry.get(t.type,void 0).render(t,this,e);return this.decorate(n,t)},t.prototype.renderChildren=function(t,e){var n=this;return t.children.map(function(t){return n.renderElement(t,e)})},t.prototype.postUpdate=function(){this.decorators.forEach(function(t){return t.postUpdate()})},t}();e.ModelRenderer=_;var w=function(){function t(t,e,n,i,o,r,s){var a=this;this.decorators=e,this.hiddenDecorators=n,this.popupDecorators=i,this.options=o,this.logger=r,this.actiondispatcher=s,this.onWindowResize=function(t){var e=document.getElementById(a.options.baseDiv);if(null!==e){var n=a.getBoundsInPage(e);a.actiondispatcher.dispatch(new m.InitializeCanvasBoundsAction(n))}},this.patcher=this.createPatcher(),this.renderer=t(e),this.hiddenRenderer=t(n),this.popupRenderer=t(i)}return t.prototype.createModules=function(){return[c.propsModule,l.attributesModule,h.classModule,u.styleModule,d.eventListenersModule]},t.prototype.createPatcher=function(){return a.init(this.createModules())},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n="undefined"!==typeof window?{x:window.scrollX,y:window.scrollY}:v.ORIGIN_POINT;return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},t.prototype.update=function(t){var e=this;this.logger.log(this,"rendering",t);var n=s.html("div",{id:this.options.baseDiv},this.renderer.renderElement(t));if(void 0!==this.lastVDOM){var i=this.hasFocus();g.copyClassesFromVNode(this.lastVDOM,n),this.lastVDOM=this.patcher.call(this,this.lastVDOM,n),this.restoreFocus(i)}else if("undefined"!==typeof document){var o=document.getElementById(this.options.baseDiv);null!==o?("undefined"!==typeof window&&window.addEventListener("resize",function(){e.onWindowResize(n)}),g.copyClassesFromElement(o,n),g.setClass(n,this.options.baseClass,!0),this.lastVDOM=this.patcher.call(this,o,n)):this.logger.error(this,"element not in DOM:",this.options.baseDiv)}this.renderer.postUpdate()},t.prototype.hasFocus=function(){if("undefined"!==typeof document&&document.activeElement&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var t=this.lastVDOM.children[0];if("object"===typeof t){var e=t.elm;return document.activeElement===e}}return!1},t.prototype.restoreFocus=function(t){if(t&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var e=this.lastVDOM.children[0];if("object"===typeof e){var n=e.elm;n&&"function"===typeof n.focus&&n.focus()}}},t.prototype.updateHidden=function(t){var e;if(this.logger.log(this,"rendering hidden"),t.type===b.EMPTY_ROOT.type)e=s.html("div",{id:this.options.hiddenDiv});else{var n=this.hiddenRenderer.renderElement(t);g.setAttr(n,"opacity",0),e=s.html("div",{id:this.options.hiddenDiv},n)}if(void 0!==this.lastHiddenVDOM)g.copyClassesFromVNode(this.lastHiddenVDOM,e),this.lastHiddenVDOM=this.patcher.call(this,this.lastHiddenVDOM,e);else{var i=document.getElementById(this.options.hiddenDiv);null===i?(i=document.createElement("div"),document.body.appendChild(i)):g.copyClassesFromElement(i,e),g.setClass(e,this.options.baseClass,!0),g.setClass(e,this.options.hiddenClass,!0),this.lastHiddenVDOM=this.patcher.call(this,i,e)}this.hiddenRenderer.postUpdate()},t.prototype.updatePopup=function(t){this.logger.log(this,"rendering popup",t);var e,n=t.type===b.EMPTY_ROOT.type;if(n)e=s.html("div",{id:this.options.popupDiv});else{var i=t.canvasBounds,o={top:i.y+"px",left:i.x+"px"};e=s.html("div",{id:this.options.popupDiv,style:o},this.popupRenderer.renderElement(t))}if(void 0!==this.lastPopupVDOM)g.copyClassesFromVNode(this.lastPopupVDOM,e),g.setClass(e,this.options.popupClosedClass,n),this.lastPopupVDOM=this.patcher.call(this,this.lastPopupVDOM,e);else if("undefined"!==typeof document){var r=document.getElementById(this.options.popupDiv);null===r?(r=document.createElement("div"),document.body.appendChild(r)):g.copyClassesFromElement(r,e),g.setClass(e,this.options.popupClass,!0),g.setClass(e,this.options.popupClosedClass,n),this.lastPopupVDOM=this.patcher.call(this,r,e)}this.popupRenderer.postUpdate()},t=i([f.injectable(),r(0,f.inject(p.TYPES.ModelRendererFactory)),r(1,f.multiInject(p.TYPES.IVNodeDecorator)),r(1,f.optional()),r(2,f.multiInject(p.TYPES.HiddenVNodeDecorator)),r(2,f.optional()),r(3,f.multiInject(p.TYPES.PopupVNodeDecorator)),r(3,f.optional()),r(4,f.inject(p.TYPES.ViewerOptions)),r(5,f.inject(p.TYPES.ILogger)),r(6,f.inject(p.TYPES.IActionDispatcher)),o("design:paramtypes",[Function,Array,Array,Array,Object,Object,Object])],t),t}();e.Viewer=w},"2b54":function(t,e,n){"use strict";var i=n("e7ed"),o=n.n(i);o.a},"2cac":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e34e"),o=n("cf81"),r=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=r},"2dae":function(t,e,n){},"2e0b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("155f"),o=n("77d3"),r=function(){function t(t,e){this.id=o.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=r},"2eed":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("81aa"),o=n("6b35");function r(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var i=0;i<e.length;++i){var o=e[i].data;void 0!==o&&r(o,e[i].children,e[i].sel)}}function s(t,e,n){var s,a,c,l={};if(void 0!==n?(l=e,o.array(n)?s=n:o.primitive(n)?a=n:n&&n.sel&&(s=[n])):void 0!==e&&(o.array(e)?s=e:o.primitive(e)?a=e:e&&e.sel?s=[e]:l=e),void 0!==s)for(c=0;c<s.length;++c)o.primitive(s[c])&&(s[c]=i.vnode(void 0,void 0,void 0,s[c],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||r(l,s,t),i.vnode(t,l,s,a,void 0)}e.h=s,e.default=s},"302f":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("6923"),l=n("3864"),u=n("3a92"),d=function(){function t(t){this.registry=t}return t.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var i=this.registry.get(t.type,void 0);if(!(i instanceof u.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=i}else n=new u.SChildElement;return this.initializeChild(n,t,e)},t.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof u.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else e=new u.SModelRoot;return this.initializeRoot(e,t)},t.prototype.createSchema=function(t){var e=this,n={};for(var i in t)if(!this.isReserved(t,i)){var o=t[i];"function"!==typeof o&&(n[i]=o)}return t instanceof u.SParentElement&&(n["children"]=t.children.map(function(t){return e.createSchema(t)})),n},t.prototype.initializeElement=function(t,e){for(var n in e)if(!this.isReserved(t,n)){var i=e[n];"function"!==typeof i&&(t[n]=i)}return t},t.prototype.isReserved=function(t,e){if(["children","parent","index"].indexOf(e)>=0)return!0;var n=t;do{var i=Object.getOwnPropertyDescriptor(n,e);if(void 0!==i)return void 0!==i.get;n=Object.getPrototypeOf(n)}while(n);return!1},t.prototype.initializeParent=function(t,e){var n=this;return this.initializeElement(t,e),u.isParent(e)&&(t.children=e.children.map(function(e){return n.createElement(e,t)})),t},t.prototype.initializeChild=function(t,e,n){return this.initializeParent(t,e),void 0!==n&&(t.parent=n),t},t.prototype.initializeRoot=function(t,e){return this.initializeParent(t,e),t.index.add(t),t},t=o([a.injectable(),s(0,a.inject(c.TYPES.SModelRegistry)),r("design:paramtypes",[h])],t),t}();e.SModelFactory=d,e.EMPTY_ROOT=Object.freeze({type:"NONE",id:"EMPTY"});var h=function(t){function e(e){var n=t.call(this)||this;return e.forEach(function(t){return n.register(t.type,t.constr)}),n}return i(e,t),e=o([a.injectable(),s(0,a.multiInject(c.TYPES.SModelElementRegistration)),s(0,a.optional()),r("design:paramtypes",[Array])],e),e}(l.ProviderRegistry);e.SModelRegistry=h},"30e3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},"31da":function(t,e,n){"use strict";var i=n("ba8b"),o=n.n(i);o.a},"320b":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("6923"),l=n("3864"),u=n("dd02"),d=n("66f9"),h=n("da84"),f=n("4b75"),p=n("ac2a"),v=function(t){function e(){var e=t.call(this)||this;return e.register(h.VBoxLayouter.KIND,new h.VBoxLayouter),e.register(f.HBoxLayouter.KIND,new f.HBoxLayouter),e.register(p.StackLayouter.KIND,new p.StackLayouter),e}return i(e,t),e}(l.InstanceRegistry);e.LayoutRegistry=v;var m=function(){function t(t,e){this.layoutRegistry=t,this.logger=e}return t.prototype.layout=function(t){new g(t,this.layoutRegistry,this.logger).layout()},t=o([a.injectable(),s(0,a.inject(c.TYPES.LayoutRegistry)),s(1,a.inject(c.TYPES.ILogger)),r("design:paramtypes",[v,Object])],t),t}();e.Layouter=m;var g=function(){function t(t,e,n){var i=this;this.element2boundsData=t,this.layoutRegistry=e,this.log=n,this.toBeLayouted=[],t.forEach(function(t,e){d.isLayoutContainer(e)&&i.toBeLayouted.push(e)})}return t.prototype.getBoundsData=function(t){var e=this.element2boundsData.get(t),n=t.bounds;return d.isLayoutContainer(t)&&this.toBeLayouted.indexOf(t)>=0&&(n=this.doLayout(t)),e||(e={bounds:n,boundsChanged:!1,alignmentChanged:!1},this.element2boundsData.set(t,e)),e},t.prototype.layout=function(){while(this.toBeLayouted.length>0){var t=this.toBeLayouted[0];this.doLayout(t)}},t.prototype.doLayout=function(t){var e=this.toBeLayouted.indexOf(t);e>=0&&this.toBeLayouted.splice(e,1);var n=this.layoutRegistry.get(t.layout);n&&n.layout(t,this);var i=this.element2boundsData.get(t);return void 0!==i&&void 0!==i.bounds?i.bounds:(this.log.error(t,"Layout failed"),u.EMPTY_BOUNDS)},t}();e.StatefulLayouter=g},"33b2":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("6923"),l=n("dd02"),u=n("3a92"),d=n("9757"),h=function(){function t(t){this.actionDispatcher=t}return t.prototype.decorate=function(t,e){return e instanceof u.SModelRoot&&!l.isValidDimension(e.canvasBounds)&&(this.rootAndVnode=[e,t]),t},t.prototype.postUpdate=function(){if(void 0!==this.rootAndVnode){var t=this.rootAndVnode[1].elm,e=this.rootAndVnode[0].canvasBounds;if(void 0!==t){var n=this.getBoundsInPage(t);l.almostEquals(n.x,e.x)&&l.almostEquals(n.y,e.y)&&l.almostEquals(n.width,e.width)&&l.almostEquals(n.height,e.width)||this.actionDispatcher.dispatch(new f(n))}this.rootAndVnode=void 0}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n="undefined"!==typeof window?{x:window.scrollX,y:window.scrollY}:l.ORIGIN_POINT;return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},t=o([a.injectable(),s(0,a.inject(c.TYPES.IActionDispatcher)),r("design:paramtypes",[Object])],t),t}();e.CanvasBoundsInitializer=h;var f=function(){function t(t){this.newCanvasBounds=t,this.kind=p.KIND}return t}();e.InitializeCanvasBoundsAction=f;var p=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.newCanvasBounds=this.action.newCanvasBounds,t.root.canvasBounds=this.newCanvasBounds,t.root},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND="initializeCanvasBounds",e}(d.SystemCommand);e.InitializeCanvasBoundsCommand=p},"34eb":function(t,e,n){(function(i){function o(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function r(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var o=0,r=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(r=o))}),t.splice(r,0,i)}}function s(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function c(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!==typeof i&&"env"in i&&(t=Object({NODE_ENV:"production",CLIENT:!0,SERVER:!1,DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",WS_BASE_URL:"",STOMP_CLIENT_DEBUG:!1,KEXPLORER_DEBUG:!1,PACKAGE_VERSION:"0.10.5",PACKAGE_BUILD:"",ENGINE_URL:"/modeler",ENGINE_SHARED:"/modeler/shared/",WS_URL:"/modeler/message",WS_SUBSCRIBE:"/message",WS_MESSAGE_DESTINATION:"/klab/message",REST_UPLOAD_MAX_SIZE:"1024MB",SEARCH_TIMEOUT_MS:"4000",VUE_ROUTER_MODE:"hash",VUE_ROUTER_BASE:"",APP_URL:"undefined"}).DEBUG),t}function l(){try{return window.localStorage}catch(t){}}e=t.exports=n("96fe"),e.log=s,e.formatArgs=r,e.save=a,e.load=c,e.useColors=o,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(c())}).call(this,n("4362"))},"359b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("393a"),o=n("e45b"),r=function(){function t(){}return t.prototype.render=function(t,e){for(var n=i.html("div",null,e.renderChildren(t)),r=0,s=t.classes;r<s.length;r++){var a=s[r];o.setClass(n,a,!0)}return n},t}();e.HtmlRootView=r},3623:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("3a92");function o(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(0,e):t.type}function r(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(e+1):t.type}function s(t,e){if(t.id===e)return t;if(void 0!==t.children)for(var n=0,i=t.children;n<i.length;n++){var o=i[n],r=s(o,e);if(void 0!==r)return r}}function a(t,e){var n=t;while(void 0!==n){if(e(n))return n;n=n instanceof i.SChildElement?n.parent:void 0}return n}function c(t,e){var n=t;while(void 0!==n){if(e(n))return n;n=n instanceof i.SChildElement?n.parent:void 0}return n}function l(t,e,n){if(e!==n){while(e instanceof i.SChildElement)if(t=e.localToParent(t),e=e.parent,e===n)return t;var o=[];while(n instanceof i.SChildElement)o.push(n),n=n.parent;if(e!==n)throw new Error("Incompatible source and target: "+e.id+", "+n.id);for(var r=o.length-1;r>=0;r--)t=o[r].parentToLocal(t)}return t}e.getBasicType=o,e.getSubType=r,e.findElement=s,e.findParent=a,e.findParentByFeature=c,e.translatePoint=l},3672:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("a5f4"),s=new i.ContainerModule(function(t){t(o.TYPES.ICommand).toConstructor(r.SwitchEditModeCommand),t(o.TYPES.ICommand).toConstructor(r.MoveRoutingHandleCommand)});e.default=s},"36e4":function(t,e,n){},"37a9":function(t,e,n){"use strict";var i=n("ddfc"),o=n.n(i);o.a},3864:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),r=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?new n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},t=i([o.injectable()],t),t}();e.ProviderRegistry=r;var s=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t){var e=this.elements.get(t);return e||this.missing(t)},t.prototype.missing=function(t){throw new Error("Unknown registry key: "+t)},t=i([o.injectable()],t),t}();e.InstanceRegistry=s;var a=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");var n=this.elements.get(t);void 0!==n?n.push(e):this.elements.set(t,[e])},t.prototype.deregisterAll=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.get=function(t){var e=this.elements.get(t);return void 0!==e?e:[]},t=i([o.injectable()],t),t}();e.MultiInstanceRegistry=a},"38e8":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("66f9"),r=n("7d36"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e}return i(e,t),e.prototype.hasFeature=function(t){return t===o.boundsFeature||t===r.fadeFeature||t===o.layoutableChildFeature},e}(o.SShapeElement);e.SButton=s},"393a":function(t,e,n){"use strict";var i="http://www.w3.org/2000/svg",o=["hook","on","style","class","props","attrs","dataset"],r=Array.prototype.slice;function s(t){return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||"symbol"===typeof t||null===t||void 0===t}function a(t,e,n,i){for(var o={ns:e},r=0,s=i.length;r<s;r++){var a=i[r];t[a]&&(o[a]=t[a])}for(var c in t)if("key"!==c&&"classNames"!==c&&"selector"!==c){var l=c.indexOf("-");l>0?u(c.slice(0,l),c.slice(l+1),t[c]):o[c]||u(n,c,t[c])}return o;function u(t,e,n){var i=o[t]||(o[t]={});i[e]=n}}function c(t,e,n,i,o,r){if(o.selector&&(i+=o.selector),o.classNames){var c=o.classNames;i=i+"."+(Array.isArray(c)?c.join("."):c.replace(/\s+/g,"."))}return{sel:i,data:a(o,t,e,n),children:r.map(function(t){return s(t)?{text:t}:t}),key:o.key}}function l(t,e,n,i,o,r){var s;if("function"===typeof i)s=i(o,r);else if(i&&"function"===typeof i.view)s=i.view(o,r);else{if(!i||"function"!==typeof i.render)throw"JSX tag must be either a string, a function or an object with 'view' or 'render' methods";s=i.render(o,r)}return s.key=o.key,s}function u(t,e,n){for(var i=e,o=t.length;i<o;i++){var r=t[i];Array.isArray(r)?u(r,0,n):n.push(r)}}function d(t){if(t)for(var e=0,n=t.length;e<n;e++)if(Array.isArray(t[e])){var i=t.slice(0,e);u(t,e,i),t=i;break}return t}function h(t,e,n,i,o,r){return o=o||{},r=d(r),"string"===typeof i?c(t,e,n,i,o,r):l(t,e,n,i,o,r)}function f(t,e,n){return function(i,s,a){return(arguments.length>3||!Array.isArray(a))&&(a=r.call(arguments,2)),h(t,e||"props",n||o,i,s,a)}}t.exports={html:f(void 0),svg:f(i,"attrs"),JSX:f}},"3a92":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd02"),r=n("e629"),s=function(){function t(){}return Object.defineProperty(t.prototype,"root",{get:function(){var t=this;while(t){if(t instanceof u)return t;t=t instanceof l?t.parent:void 0}throw new Error("Element has no root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.root.index},enumerable:!0,configurable:!0}),t.prototype.hasFeature=function(t){return!1},t}();function a(t){var e=t.children;return void 0!==e&&e.constructor===Array}e.SModelElement=s,e.isParent=a;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return i(e,t),e.prototype.add=function(t,e){var n=this.children;if(void 0===e)n.push(t);else{if(e<0||e>this.children.length)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(e,0,t)}t.parent=this,this.index.add(t)},e.prototype.remove=function(t){var e=this.children,n=e.indexOf(t);if(n<0)throw new Error("No such child "+t.id);e.splice(n,1),delete t.parent,this.index.remove(t)},e.prototype.removeAll=function(t){var e=this,n=this.children;if(void 0!==t){for(var i=n.length-1;i>=0;i--)if(t(n[i])){var o=n.splice(i,1)[0];delete o.parent,this.index.remove(o)}}else n.forEach(function(t){delete t.parent,e.index.remove(t)}),n.splice(0,n.length)},e.prototype.move=function(t,e){var n=this.children,i=n.indexOf(t);if(-1===i)throw new Error("No such child "+t.id);if(e<0||e>n.length-1)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(i,1),n.splice(e,0,t)},e.prototype.localToParent=function(t){return o.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e.prototype.parentToLocal=function(t){return o.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e}(s);e.SParentElement=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(c);e.SChildElement=l;var u=function(t){function e(e){void 0===e&&(e=new f);var n=t.call(this)||this;return n.canvasBounds=o.EMPTY_BOUNDS,Object.defineProperty(n,"index",{value:e,writable:!1}),n}return i(e,t),e}(c);e.SModelRoot=u;var d="0123456789abcdefghijklmnopqrstuvwxyz";function h(t){void 0===t&&(t=8);for(var e="",n=0;n<t;n++)e+=d.charAt(Math.floor(Math.random()*d.length));return e}e.createRandomId=h;var f=function(){function t(){this.id2element=new Map}return t.prototype.add=function(t){if(t.id){if(this.contains(t))throw new Error("Duplicate ID in model: "+t.id)}else do{t.id=h()}while(this.contains(t));if(this.id2element.set(t.id,t),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var i=n[e];this.add(i)}},t.prototype.remove=function(t){if(this.id2element.delete(t.id),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var i=n[e];this.remove(i)}},t.prototype.contains=function(t){return this.id2element.has(t.id)},t.prototype.getById=function(t){return this.id2element.get(t)},t.prototype.getAttachedElements=function(t){return[]},t.prototype.all=function(){return r.mapIterable(this.id2element,function(t){t[0];var e=t[1];return e})},t}();e.SModelIndex=f},"3b4c":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("6923"),l=n("3a92"),u=n("510b"),d=n("e45b"),h=n("0d7a"),f=function(){function t(t,e,n){void 0===n&&(n=[]),this.actionDispatcher=t,this.domHelper=e,this.mouseListeners=n}return t.prototype.register=function(t){this.mouseListeners.push(t)},t.prototype.deregister=function(t){var e=this.mouseListeners.indexOf(t);e>=0&&this.mouseListeners.splice(e,1)},t.prototype.getTargetElement=function(t,e){var n=e.target,i=t.index;while(n){if(n.id){var o=i.getById(this.domHelper.findSModelIdByDOMElement(n));if(void 0!==o)return o}n=n.parentNode}},t.prototype.handleEvent=function(t,e,n){var i=this;this.focusOnMouseEvent(t,e);var o=this.getTargetElement(e,n);if(o){var r=this.mouseListeners.map(function(e){return e[t].apply(e,[o,n])}).reduce(function(t,e){return t.concat(e)});if(r.length>0){n.preventDefault();for(var s=0,a=r;s<a.length;s++){var c=a[s];u.isAction(c)?this.actionDispatcher.dispatch(c):c.then(function(t){i.actionDispatcher.dispatch(t)})}}}},t.prototype.focusOnMouseEvent=function(t,e){if(document){var n=document.getElementById(this.domHelper.createUniqueDOMElementId(e));"mouseDown"===t&&null!==n&&"function"===typeof n.focus&&n.focus()}},t.prototype.mouseOver=function(t,e){this.handleEvent("mouseOver",t,e)},t.prototype.mouseOut=function(t,e){this.handleEvent("mouseOut",t,e)},t.prototype.mouseEnter=function(t,e){this.handleEvent("mouseEnter",t,e)},t.prototype.mouseLeave=function(t,e){this.handleEvent("mouseLeave",t,e)},t.prototype.mouseDown=function(t,e){this.handleEvent("mouseDown",t,e)},t.prototype.mouseMove=function(t,e){this.handleEvent("mouseMove",t,e)},t.prototype.mouseUp=function(t,e){this.handleEvent("mouseUp",t,e)},t.prototype.wheel=function(t,e){this.handleEvent("wheel",t,e)},t.prototype.doubleClick=function(t,e){this.handleEvent("doubleClick",t,e)},t.prototype.decorate=function(t,e){return e instanceof l.SModelRoot&&(d.on(t,"mouseover",this.mouseOver.bind(this),e),d.on(t,"mouseout",this.mouseOut.bind(this),e),d.on(t,"mouseenter",this.mouseEnter.bind(this),e),d.on(t,"mouseleave",this.mouseLeave.bind(this),e),d.on(t,"mousedown",this.mouseDown.bind(this),e),d.on(t,"mouseup",this.mouseUp.bind(this),e),d.on(t,"mousemove",this.mouseMove.bind(this),e),d.on(t,"wheel",this.wheel.bind(this),e),d.on(t,"contextmenu",function(t,e){e.preventDefault()},e),d.on(t,"dblclick",this.doubleClick.bind(this),e)),t=this.mouseListeners.reduce(function(t,n){return n.decorate(t,e)},t),t},t.prototype.postUpdate=function(){},t=o([a.injectable(),s(0,a.inject(c.TYPES.IActionDispatcher)),s(1,a.inject(c.TYPES.DOMHelper)),s(2,a.multiInject(c.TYPES.MouseListener)),s(2,a.optional()),r("design:paramtypes",[Object,h.DOMHelper,Array])],t),t}();e.MouseTool=f;var p=function(t){function e(e,n,i){void 0===i&&(i=[]);var o=t.call(this,e,n,i)||this;return o.actionDispatcher=e,o.domHelper=n,o.mouseListeners=i,o}return i(e,t),e=o([a.injectable(),s(0,a.inject(c.TYPES.IActionDispatcher)),s(1,a.inject(c.TYPES.DOMHelper)),s(2,a.multiInject(c.TYPES.PopupMouseListener)),s(2,a.optional()),r("design:paramtypes",[Object,h.DOMHelper,Array])],e),e}(f);e.PopupMouseTool=p;var v=function(){function t(){}return t.prototype.mouseOver=function(t,e){return[]},t.prototype.mouseOut=function(t,e){return[]},t.prototype.mouseEnter=function(t,e){return[]},t.prototype.mouseLeave=function(t,e){return[]},t.prototype.mouseDown=function(t,e){return[]},t.prototype.mouseMove=function(t,e){return[]},t.prototype.mouseUp=function(t,e){return[]},t.prototype.wheel=function(t,e){return[]},t.prototype.doubleClick=function(t,e){return[]},t.prototype.decorate=function(t,e){return t},t=o([a.injectable()],t),t}();e.MouseListener=v},"3b62":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd02"),r=n("3a92"),s=n("5eb6"),a=n("7faf"),c=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll={x:0,y:0},n.zoom=1,n.export=!1,n}return i(e,t),e.prototype.hasFeature=function(t){return t===s.viewportFeature||t===a.exportFeature},e.prototype.localToParent=function(t){var e={x:(t.x-this.scroll.x)*this.zoom,y:(t.y-this.scroll.y)*this.zoom,width:-1,height:-1};return o.isBounds(t)&&(e.width=t.width*this.zoom,e.height=t.height*this.zoom),e},e.prototype.parentToLocal=function(t){var e={x:t.x/this.zoom+this.scroll.x,y:t.y/this.zoom+this.scroll.y,width:-1,height:-1};return o.isBounds(t)&&o.isValidDimension(t)&&(e.width=t.width/this.zoom,e.height=t.height/this.zoom),e},e}(r.SModelRoot);e.ViewportRootElement=c},"3b74":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("c20e"),s=new i.ContainerModule(function(t){t(o.TYPES.KeyListener).to(r.UndoRedoKeyListener)});e.default=s},"3e33":function(t,e,n){},"3f0a":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("9757"),c=n("33b2"),l=function(){function t(e){this.options=e,this.kind=t.KIND}return t.KIND="requestModel",t}();e.RequestModelAction=l;var u=function(){function t(t){this.newRoot=t,this.kind=d.KIND}return t}();e.SetModelAction=u;var d=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.oldRoot=t.modelFactory.createRoot(t.root),this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===c.InitializeCanvasBoundsCommand.KIND}},enumerable:!0,configurable:!0}),e.KIND="setModel",e=o([s.injectable(),r("design:paramtypes",[u])],e),e}(a.Command);e.SetModelCommand=d},4047:function(t,e){t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},"40a1":function(t,e,n){"use strict";var i=n("f215"),o=n.n(i);o.a},"424f":function(t,e,n){"use strict";var i=n("5578"),o=n.n(i);o.a},"42d6":function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n("510b")),i(n("0fb6")),i(n("be02")),i(n("538c")),i(n("c146")),i(n("987d")),i(n("5e9c")),i(n("160b")),i(n("9757")),i(n("33b2")),i(n("3f0a")),i(n("302f")),i(n("7436")),i(n("3623")),i(n("3a92")),i(n("1417")),i(n("3b4c")),i(n("8d53")),i(n("064a")),i(n("8794")),i(n("65d1")),i(n("29fa")),i(n("d4ec")),i(n("e45b")),i(n("6923"));var o=n("8122");e.defaultModule=o.default,i(n("42f7")),i(n("320b")),i(n("66f9")),i(n("da84")),i(n("4b75")),i(n("ac2a")),i(n("70d9")),i(n("38e8")),i(n("a5f4")),i(n("cc26")),i(n("4741")),i(n("9964")),i(n("19b5")),i(n("1cd9")),i(n("7faf")),i(n("5d19")),i(n("e7fa")),i(n("7d36")),i(n("f4cb")),i(n("e4f0")),i(n("a0af")),i(n("559d")),i(n("b485")),i(n("1f89")),i(n("4c18")),i(n("bcbd")),i(n("c20e")),i(n("d084")),i(n("cf61")),i(n("ed4f")),i(n("5eb6")),i(n("cf98")),i(n("3b62")),i(n("c444")),i(n("fe37"));var r=n("520d");e.moveModule=r.default;var s=n("72dd");e.boundsModule=s.default;var a=n("9811");e.fadeModule=a.default;var c=n("c4e6");e.selectModule=c.default;var l=n("3b74");e.undoRedoModule=l.default;var u=n("1e19");e.viewportModule=u.default;var d=n("c95e");e.hoverModule=d.default;var h=n("3672");e.edgeEditModule=h.default;var f=n("9f8d");e.exportModule=f.default;var p=n("04c2");e.expandModule=p.default;var v=n("0483");e.openModule=v.default;var m=n("54f8");e.buttonModule=m.default,i(n("dfc0")),i(n("47b7")),i(n("6bb9")),i(n("9ad4")),i(n("359b")),i(n("87fa")),i(n("218d")),i(n("945d")),i(n("df60")),i(n("cb6e")),i(n("85ed")),i(n("26ad")),i(n("484b"));var g=n("8e65");e.modelSourceModule=g.default,i(n("ba30")),i(n("fba3")),i(n("0be1")),i(n("dd02")),i(n("9e2e")),i(n("3864"))},"42f7":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("9757"),r=n("66f9"),s=function(){function t(t){this.bounds=t,this.kind=l.KIND}return t}();e.SetBoundsAction=s;var a=function(){function t(t){this.newRoot=t,this.kind=u.KIND}return t}();e.RequestBoundsAction=a;var c=function(){function t(e,n,i){this.bounds=e,this.revision=n,this.alignments=i,this.kind=t.KIND}return t.KIND="computedBounds",t}();e.ComputedBoundsAction=c;var l=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.bounds=[],n}return i(e,t),e.prototype.execute=function(t){var e=this;return this.action.bounds.forEach(function(n){var i=t.root.index.getById(n.elementId);i&&r.isBoundsAware(i)&&e.bounds.push({element:i,oldBounds:i.bounds,newBounds:n.newBounds})}),this.redo(t)},e.prototype.undo=function(t){return this.bounds.forEach(function(t){return t.element.bounds=t.oldBounds}),t.root},e.prototype.redo=function(t){return this.bounds.forEach(function(t){return t.element.bounds=t.newBounds}),t.root},e.KIND="setBounds",e}(o.SystemCommand);e.SetBoundsCommand=l;var u=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return t.modelFactory.createRoot(this.action.newRoot)},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===c.KIND}},enumerable:!0,configurable:!0}),e.KIND="requestBounds",e}(o.HiddenCommand);e.RequestBoundsCommand=u},"451f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=n("1979"),r=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||r(n,e))};e.traverseAncerstors=r;var s=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new o.Metadata(t,e),n}};e.taggedConstraint=s;var a=s(i.NAMED_TAG);e.namedConstraint=a;var c=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"===typeof t){var i=n.serviceIdentifier;return i===t}var o=e.bindings[0].implementationType;return t===o}return!1}};e.typeConstraint=c},"45d1":function(t,e,n){},4741:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=n("3623"),r=n("9964"),s=n("e1c6"),a=function(){function t(e,n){this.expandIds=e,this.collapseIds=n,this.kind=t.KIND}return t.KIND="collapseExpand",t}();e.CollapseExpandAction=a;var c=function(){function t(e){void 0===e&&(e=!0),this.expand=e,this.kind=t.KIND}return t.KIND="collapseExpandAll",t}();e.CollapseExpandAllAction=c;var l=function(){function t(){}return t.prototype.buttonPressed=function(t){var e=o.findParentByFeature(t,r.isExpandable);return void 0!==e?[new a(e.expanded?[]:[e.id],e.expanded?[e.id]:[])]:[]},t.TYPE="button:expand",t=i([s.injectable()],t),t}();e.ExpandButtonHandler=l},"47b7":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("e629"),r=n("3a92"),s=n("66f9"),a=n("7d36"),c=n("e4f0"),l=n("a0af"),u=n("4c18"),d=n("3b62"),h=n("dd02"),f=n("66f9"),p=n("cc26"),v=n("3623"),m=n("7959"),g=function(t){function e(e){return void 0===e&&(e=new x),t.call(this,e)||this}return i(e,t),e}(d.ViewportRootElement);e.SGraph=g;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"incomingEdges",{get:function(){return this.index.getIncomingEdges(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingEdges",{get:function(){return this.index.getOutgoingEdges(this)},enumerable:!0,configurable:!0}),e.prototype.getAnchor=function(t,e){return h.center(this.bounds)},e.prototype.getTranslatedAnchor=function(t,e,n,i){var o=v.translatePoint(t,e,this.parent),r=this.getAnchor(o,i);return v.translatePoint(r,this.parent,n.parent)},e}(f.SShapeElement);e.SConnectableElement=y;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return i(e,t),e.prototype.hasFeature=function(t){return t===u.selectFeature||t===l.moveFeature||t===s.boundsFeature||t===s.layoutContainerFeature||t===a.fadeFeature||t===c.hoverFeedbackFeature||t===c.popupFeature},e}(y);e.SNode=b;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return i(e,t),e.prototype.hasFeature=function(t){return t===u.selectFeature||t===s.boundsFeature||t===a.fadeFeature||t===c.hoverFeedbackFeature},e}(y);e.SPort=_;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.routingPoints=[],e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return i(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.index.getById(this.sourceId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.index.getById(this.targetId)},enumerable:!0,configurable:!0}),e.prototype.route=function(){void 0===this.router&&(this.router=new m.LinearEdgeRouter);var t=this.router.route(this);return p.filterEditModeHandles(t,this)},e.prototype.hasFeature=function(t){return t===a.fadeFeature||t===u.selectFeature||t===p.editFeature||t===c.hoverFeedbackFeature},e}(r.SChildElement);e.SEdge=w;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.alignment=h.ORIGIN_POINT,e.opacity=1,e}return i(e,t),e.prototype.hasFeature=function(t){return t===s.boundsFeature||t===s.alignFeature||t===a.fadeFeature||t===s.layoutableChildFeature},e}(f.SShapeElement);e.SLabel=S;var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opacity=1,e}return i(e,t),e.prototype.hasFeature=function(t){return t===s.boundsFeature||t===s.layoutContainerFeature||t===s.layoutableChildFeature||t===a.fadeFeature},e}(f.SShapeElement);e.SCompartment=E;var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outgoing=new Map,e.incoming=new Map,e}return i(e,t),e.prototype.add=function(e){if(t.prototype.add.call(this,e),e instanceof w){if(e.sourceId){var n=this.outgoing.get(e.sourceId);void 0===n?this.outgoing.set(e.sourceId,[e]):n.push(e)}if(e.targetId){var i=this.incoming.get(e.targetId);void 0===i?this.incoming.set(e.targetId,[e]):i.push(e)}}},e.prototype.remove=function(e){if(t.prototype.remove.call(this,e),e instanceof w){var n=this.outgoing.get(e.sourceId);if(void 0!==n){var i=n.indexOf(e);i>=0&&(1===n.length?this.outgoing.delete(e.sourceId):n.splice(i,1))}var o=this.incoming.get(e.targetId);if(void 0!==o){i=o.indexOf(e);i>=0&&(1===o.length?this.incoming.delete(e.targetId):o.splice(i,1))}}},e.prototype.getAttachedElements=function(t){var e=this;return new o.FluentIterableImpl(function(){return{outgoing:e.outgoing.get(t.id),incoming:e.incoming.get(t.id),nextOutgoingIndex:0,nextIncomingIndex:0}},function(t){var e=t.nextOutgoingIndex;if(void 0!==t.outgoing&&e<t.outgoing.length)return t.nextOutgoingIndex=e+1,{done:!1,value:t.outgoing[e]};if(e=t.nextIncomingIndex,void 0!==t.incoming)while(e<t.incoming.length){var n=t.incoming[e];if(n.sourceId!==n.targetId)return t.nextIncomingIndex=e+1,{done:!1,value:n};e++}return{done:!0,value:void 0}})},e.prototype.getIncomingEdges=function(t){return this.incoming.get(t.id)||[]},e.prototype.getOutgoingEdges=function(t){return this.outgoing.get(t.id)||[]},e}(r.SModelIndex);e.SGraphIndex=x},"484b":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),s=n("945d"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.listen=function(t){var e=this;t.addEventListener("message",function(t){e.messageReceived(t.data)}),t.addEventListener("error",function(t){e.logger.error(e,"error event received",t)}),this.webSocket=t},e.prototype.disconnect=function(){this.webSocket&&(this.webSocket.close(),this.webSocket=void 0)},e.prototype.sendMessage=function(t){if(!this.webSocket)throw new Error("WebSocket is not connected");this.webSocket.send(JSON.stringify(t))},e=o([r.injectable()],e),e}(s.DiagramServer);e.WebSocketDiagramServer=a},"48f9":function(t,e,n){},"4a4f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=n("c5f4"),r=n("1979");function s(){return function(t,e,n){var s=new r.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,s,t.constructor)}}e.postConstruct=s},"4b75":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("dd02"),s=n("a2e1"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getChildrenSize=function(t,e,n){var i=0,o=-1,s=!0;return t.children.forEach(function(t){var a=n.getBoundsData(t).bounds;void 0!==a&&r.isValidDimension(a)&&(s?s=!1:i+=e.hGap,i+=a.width,o=Math.max(o,a.height))}),{width:i,height:o}},e.prototype.layoutChild=function(t,e,n,i,o,r,s,a){var c=this.getDy(i.vAlign,n,a);return e.bounds={x:r.x+t.bounds.x-n.x,y:o.paddingTop+t.bounds.y-n.y+c,width:n.width,height:n.height},e.boundsChanged=!0,{x:r.x+n.width+o.hGap,y:r.y}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hGap:1,vAlign:"center"}},e.prototype.spread=function(t,e){return o({},t,e)},e.KIND="hbox",e}(s.AbstractLayout);e.HBoxLayouter=a},"4c18":function(t,e,n){"use strict";function i(t){return t.hasFeature(e.selectFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.selectFeature=Symbol("selectFeature"),e.isSelectable=i},"4df2":function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMzAwIgogICBoZWlnaHQ9IjMxNS45MjI1OCIKICAgdmlld0JveD0iMCAwIDc5LjM3NDk5OCA4My41ODc4NTEiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzgiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImtsYWItc3Bpbm5lci5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1Ij4KICA8ZGVmcwogICAgIGlkPSJkZWZzMiIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMC45NjAxOTk4NCIKICAgICBpbmtzY2FwZTpjeD0iLTIzOS45OTE1MyIKICAgICBpbmtzY2FwZTpjeT0iNy4xMTA3MjY4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJtbSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDI4IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgdW5pdHM9InB4IgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTUiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9ImtsYWItZWxlcGhhbnQtbGF5ZXIiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00My40NjU1NzQsLTE1NS4zNjMwOSkiPgogICAgPHBhdGgKICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICBpZD0ia2xhYi1lbGVwaGFudCIKICAgICAgIGQ9Im0gODQuNzYxOTA2LDIzOC44OTY5MSBjIDAsLTAuMDQ3MiAwLjE3NzcxOCwtMC4zODEwNyAwLjM5NDkzLC0wLjc0MTk3IDAuNzcxODU3LC0xLjI4MjQ4IDEuMzAwNTAxLC0yLjgzNjcxIDEuNDk2NDA2LC00LjM5OTUgMC4xMTg1ODQsLTAuOTQ1OTcgMC4wNjE4NiwtMi42NjMzNiAtMC4xMTgxNTIsLTMuNTc3MjkgLTAuNDUyNjU1LC0yLjI5ODExIC0xLjcwMzk3NiwtNC41NTk0NyAtMy40MDMwMzYsLTYuMTQ5ODkgLTAuNzI0MzA1LC0wLjY3Nzk5IC0xLjk4NDEwNiwtMS41NzU0OCAtMi4yMTE0ODYsLTEuNTc1NDggLTAuMDkwNjQsMCAtMC4xOTI1NDYsMC4xNTY0OCAtMC4zMjAyNTcsMC40OTE3NiAtMC4xMDMwMjQsMC4yNzA0NyAtMC4zOTQ0NTQsMC45MDEzMSAtMC42NDc2MTksMS40MDE4NiAtMi4wNjM4MDQsNC4wODA0NyAtNS44NDI3ODUsNi45MzAyOSAtMTAuNDk0NTcsNy45MTQyIC0wLjk0MTEzNiwwLjE5OTA3IC0xLjE2NzQ4NSwwLjIxNjY3IC0yLjgzMjU3NywwLjIyMDI5IC0xLjg5ODM1LDAuMDA0IC0yLjMyNDY5OSwtMC4wNDEzIC0zLjc3Njc2NywtMC40MDI3OSAtMC43MTQxODksLTAuMTc3NzcgLTIuMDY1MDQ1LC0wLjYzOTA4IC0yLjQyNjIzMiwtMC44Mjg1NCAtMC4yNDkwNjgsLTAuMTMwNjQgLTAuMDg3MDMsLTAuMTU0OTIgMC40MjAxNzQsLTAuMDYyOSAwLjI2ODgzNCwwLjA0ODcgMC45MzAzMTYsMC4xMTcyNiAxLjQ2OTk2LDAuMTUyMjYgNC4xMjA4NzEsMC4yNjcyNyA4LjEyNDIyNywtMS4yNDEwNiAxMS4wNDQyNzIsLTQuMTYxMTEgMC45ODM5NzcsLTAuOTgzOTcgMi4xNDk3NzcsLTIuNTE4NzMgMi4wMTUzNDUsLTIuNjUzMTYgLTAuMDI1MjMsLTAuMDI1MiAtMC40ODEwNjUsMC4xMzEzNiAtMS4wMTI5NTgsMC4zNDc5OSAtMC41MzE4OTYsMC4yMTY2MyAtMS4yNTAzNCwwLjQ4NTE5IC0xLjU5NjU0MywwLjU5Njc5IC01LjY3NTgzLDEuODI5NzggLTExLjk4MjI0OCwxLjA0OTg0IC0xNy4wMTIyNSwtMi4xMDM5NiAtMS44OTYzMDgsLTEuMTg4OTggLTMuNzYwNTU4LC0yLjg1NDA1IC01LjA1ODYwOCwtNC41MTgxMyAtNi4wMDAyMiwtNy42OTIxOSAtOC40MDU2MDcsLTE3LjQ0OTMzIC02LjY4MTU0OSwtMjcuMTAyODUgMC44Nzc1ODQsLTQuOTEzODYgMy40MjIyMTcsLTEwLjkxNDQ3IDYuNDYzNzEzLC0xNS4yNDIzNiAzLjI2NTcyNywtNC42NDY5NiA3LjY5OTc0MiwtOC43NzA3IDEyLjIyMzYxOSwtMTEuMzY4MjUgMS44MTczMjYsLTEuMDQzNDkgNC4zOTk0NzMsLTIuMjgwNDIgNC42NTEwMjQsLTIuMjI3OTggMC4wNzgzMiwwLjAxNjMgLTAuMDMyNTUsMC4yMzEyNiAtMC4zNjQzMTYsMC43MDYyNyAtMC4yNjIyOTksMC4zNzU1NSAtMC40NzY5MDYsMC43MjAxIC0wLjQ3NjkwNiwwLjc2NTY2IDAsMC4wODY0IDAuMDM2NjksMC4wOTY5IDAuODU2ODA1LDAuMjQzOTcgMS4wNDM3NDIsMC4xODcxOCAxLjA0ODY5NCwwLjE3MTQ3IC0wLjI2OTgzOSwwLjg1NjEzIC0zLjYyODU2NCwxLjg4NDE4IC02LjgzMjU0NSw0LjMwNjE0IC05LjQxNzE2Miw3LjExODY3IC01LjIxNjcwOCw1LjY3NjcgLTguMjg2NzAxLDEyLjYzOTUzIC04Ljk1NTI5NywyMC4zMTA4NyAtMC4xODc5MzUsMi4xNTYzMSAtMC4wNTg2MSw1LjgwMDQ2IDAuMjc5MjIzLDcuODY4MjYgMC42NjIzNTcsNC4wNTQxMSAwLjk5MjU0LDUuMjU4NDIgMi4wMDYyMjcsNy4zMTc0OSAxLjY5MzIxLDMuNDM5MzcgNC40MzEyNyw2LjE5OTU3IDcuODI5MDI0LDcuODkyMzQgMS42OTg3MTIsMC44NDYzIDMuMTMyMzE1LDEuMzA3NTMgNC4zNDk4MTQsMS4zOTk0NCAxLjgxMzc1LDAuMTM2OTIgMy45NTU5OTIsLTAuNTY2ODEgNS4yNTc5NzYsLTEuNzI3MjUgMS4xMDE5NzksLTAuOTgyMTggMi4zNTU5NDEsLTMuNDg2MSAyLjk4MTI3NCwtNS45NTMwMiAwLjQ2NTAxMSwtMS44MzQ0NiAwLjY0MzY1OSwtMy41NTcwMiAwLjc0MjQyNSwtNy4xNTg2MyAwLjA3NjQ2LC0yLjc4ODM2IDAuMTUwNTE0LC0zLjQwNDIyIDAuNTk2MjIxLC00Ljk1ODU1IDEuNDMzNjAxLC00Ljk5OTQ0IDQuMjMyNjI4LC05LjQ5NjM5IDcuNzQ4ODI2LC0xMi40NDkzNSAyLjE4NzkzNiwtMS44Mzc0NyA1LjE3MDMwMywtMy40MDcwNiA3Ljc0NTkyOSwtNC4wNzY2MyAyLjk5Mjc1NiwtMC43NzggNS44Mzc0MDUsLTAuODk4NTcgOC45MzgyODUsLTAuMzc4ODYgbCAwLjk4NzAxOSwwLjE2NTQzIDAuNDAzNjgxLC0wLjI0ODM5IGMgMC43MTYwNjQsLTAuNDQwNiAxLjMwMDkyMiwtMC42MjA4MSAzLjMzNDU5NiwtMS4wMjc0NyA1LjM4OTMyLC0xLjA3NzY2IDguMjU1MTIsLTIuMTQyNzMgMTEuMzgzNzksLTQuMjMwNzIgMC41MzQ5NywtMC4zNTcwMyAwLjk5OTMzLC0wLjY0OTE0IDEuMDMxOTMsLTAuNjQ5MTQgMC4wNywwIDEuMjA3NDgsMS41NDc5OCAxLjg3OTEsMi41NTcxOSA1LjgxNDUzLDguNzM3MjEgNy45MjIzOSwxOS41MTcwNSA1LjgzODc0LDI5Ljg2MDA4IC0yLjIzMjI1LDExLjA4MDY0IC05LjAwMzgsMjAuNTg3NDkgLTE4LjgwMzc3LDI2LjM5OTM2IC00Ljc1ODY4LDIuODIyMTIgLTEwLjU4MTc2LDQuNzMwMTEgLTE2LjA1MTI3MSw1LjI1OTMzIC0yLjExMDc5NCwwLjIwNDI0IC0yLjQzOTE2MywwLjIyMTU1IC0yLjQzOTE2MywwLjEyODU3IHogTSA4MC44NzMwNDUsMjAyLjgwODIgYyAwLjUwMDc3NSwtMC4yNDUyMSAxLjA3OTcwNywtMC44Mjk2NyAxLjI5MjQxNiwtMS4zMDQ3OCAwLjE4NDA4MiwtMC40MTExNiAwLjEyNDI4MywtMC40OTcwOSAtMC41NTk0NTksLTAuODAzOTMgLTEuMjQyNDQ4LC0wLjU1NzU4IC0yLjk1MzE1LC0wLjIwNjYxIC0zLjk1MzI5MSwwLjgxMTA2IC0wLjI5NDAzLDAuMjk5MTkgLTAuMzY5OTcsMC40MjU4OCAtMC4zMzAyNjMsMC41NTA5OSAwLjA2MTAzLDAuMTkyMjggMC42ODcyMjMsMC42Njg1MSAxLjExNjY3OCwwLjg0OTI1IDAuNzA2NzY4LDAuMjk3NDUgMS43MDI2NjIsMC4yNTU0NyAyLjQzMzkxOSwtMC4xMDI1OSB6IgogICAgICAgc3R5bGU9ImZpbGw6IzAxMDEwMjtzdHJva2Utd2lkdGg6MC4wNzg2ODI2OSI+CiAgICAgIDx0aXRsZQogICAgICAgICBpZD0idGl0bGUzMzk1Ij5rLkxBQiBFbGVwaGFudDwvdGl0bGU+CiAgICA8L3BhdGg+CiAgPC9nPgo8L3N2Zz4K"},"50fb":function(t,e,n){var i,o,r;/*! scrollbarWidth.js v0.1.3 | felixexter | MIT | https://github.com/felixexter/scrollbarWidth */ /*! scrollbarWidth.js v0.1.3 | felixexter | MIT | https://github.com/felixexter/scrollbarWidth */
(function(n,s){o=[],i=s,r="function"===typeof i?i.apply(e,o):i,void 0===r||(t.exports=r)})(0,function(){"use strict";function t(){if("undefined"===typeof document)return 0;var t,e=document.body,n=document.createElement("div"),i=n.style;return i.position="absolute",i.top=i.left="-9999px",i.width=i.height="100px",i.overflow="scroll",e.appendChild(n),t=n.offsetWidth-n.clientWidth,e.removeChild(n),t}return t})},"510b":function(t,e,n){"use strict";function i(t){return void 0!==t&&t.hasOwnProperty("kind")&&"string"===typeof t["kind"]}Object.defineProperty(e,"__esModule",{value:!0}),e.isAction=i},"520d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("559d"),s=new i.ContainerModule(function(t){t(o.TYPES.MouseListener).to(r.MoveMouseListener),t(o.TYPES.ICommand).toConstructor(r.MoveCommand),t(o.TYPES.IVNodeDecorator).to(r.LocationDecorator),t(o.TYPES.HiddenVNodeDecorator).to(r.LocationDecorator)});e.default=s},"538c":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),r=function(){function t(){this.tasks=[],this.endTasks=[],this.triggered=!1}return t.prototype.isAvailable=function(){return"function"===typeof requestAnimationFrame},t.prototype.onNextFrame=function(t){this.tasks.push(t),this.trigger()},t.prototype.onEndOfNextFrame=function(t){this.endTasks.push(t),this.trigger()},t.prototype.trigger=function(){var t=this;this.triggered||(this.triggered=!0,this.isAvailable()?requestAnimationFrame(function(e){return t.run(e)}):setTimeout(function(e){return t.run(e)}))},t.prototype.run=function(t){var e=this.tasks,n=this.endTasks;this.triggered=!1,this.tasks=[],this.endTasks=[],e.forEach(function(e){return e.call(void 0,t)}),n.forEach(function(e){return e.call(void 0,t)})},t=i([o.injectable()],t),t}();e.AnimationFrameSyncer=r},"54f8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("70d9"),r=new i.ContainerModule(function(t){t(o.ButtonHandlerRegistry).toSelf().inSingletonScope()});e.default=r},5578:function(t,e,n){},"559d":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),s=n("dd02"),a=n("3a92"),c=n("3a92"),l=n("3623"),u=n("9757"),d=n("c146"),h=n("3b4c"),f=n("e45b"),p=n("5eb6"),v=n("4c18"),m=n("66f9"),g=n("cc26"),y=n("a5f4"),b=n("a0af"),_=function(){function t(t,e){void 0===e&&(e=!0),this.moves=t,this.animate=e,this.kind=w.KIND}return t}();e.MoveAction=_;var w=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedMoves=new Map,n.resolvedRoutes=new Map,n}return i(e,t),e.prototype.execute=function(t){var e=this,n=t.root,i=new Set;return this.action.moves.forEach(function(t){var o=e.resolve(t,n.index);void 0!==o&&(e.resolvedMoves.set(o.elementId,o),n.index.getAttachedElements(o.element).forEach(function(t){return i.add(t)}))}),i.forEach(function(t){return e.handleAttachedElement(t)}),this.action.animate?new S(n,this.resolvedMoves,this.resolvedRoutes,t).start():this.doMove(t)},e.prototype.resolve=function(t,e){var n=e.getById(t.elementId);if(void 0!==n&&b.isLocateable(n)){var i=t.fromPosition||{x:n.position.x,y:n.position.y};return{elementId:t.elementId,element:n,fromPosition:i,toPosition:t.toPosition}}},e.prototype.handleAttachedElement=function(t){if(g.isRoutable(t)){var e=t.source,n=e?this.resolvedMoves.get(e.id):void 0,i=t.target,o=i?this.resolvedMoves.get(i.id):void 0;if(void 0!==n&&void 0!==o){var r=o.toPosition.x-o.fromPosition.x,s=o.toPosition.y-o.fromPosition.y;this.resolvedRoutes.set(t.id,{elementId:t.id,element:t,fromRoute:t.routingPoints,toRoute:t.routingPoints.map(function(t){return{x:t.x+r,y:t.y+s}})})}}},e.prototype.doMove=function(t,e){return this.resolvedMoves.forEach(function(t){t.element.position=e?t.fromPosition:t.toPosition}),this.resolvedRoutes.forEach(function(t){t.element.routingPoints=e?t.fromRoute:t.toRoute}),t.root},e.prototype.undo=function(t){return new S(t.root,this.resolvedMoves,this.resolvedRoutes,t,!0).start()},e.prototype.redo=function(t){return new S(t.root,this.resolvedMoves,this.resolvedRoutes,t,!1).start()},e.prototype.merge=function(t,n){var i=this;return!this.action.animate&&t instanceof e&&(t.action.moves.forEach(function(t){var e=i.resolvedMoves.get(t.elementId);if(e)e.toPosition=t.toPosition;else{var o=i.resolve(t,n.root.index);o&&i.resolvedMoves.set(o.elementId,o)}}),!0)},e.KIND="move",e}(u.MergeableCommand);e.MoveCommand=w;var S=function(t){function e(e,n,i,o,r){void 0===r&&(r=!1);var s=t.call(this,o)||this;return s.model=e,s.elementMoves=n,s.elementRoutes=i,s.reverse=r,s}return i(e,t),e.prototype.tween=function(t){var e=this;return this.elementMoves.forEach(function(n){e.reverse?n.element.position={x:(1-t)*n.toPosition.x+t*n.fromPosition.x,y:(1-t)*n.toPosition.y+t*n.fromPosition.y}:n.element.position={x:(1-t)*n.fromPosition.x+t*n.toPosition.x,y:(1-t)*n.fromPosition.y+t*n.toPosition.y}}),this.elementRoutes.forEach(function(n){for(var i=[],o=0;o<n.fromRoute.length&&o<n.toRoute.length;o++){var r=n.fromRoute[o],s=n.toRoute[o];e.reverse?i.push({x:(1-t)*s.x+t*r.x,y:(1-t)*s.y+t*r.y}):i.push({x:(1-t)*r.x+t*s.x,y:(1-t)*r.y+t*s.y})}n.element.routingPoints=i}),this.model},e}(d.Animation);e.MoveAnimation=S;var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasDragged=!1,e}return i(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){var i=l.findParentByFeature(t,b.isMoveable),o=t instanceof g.SRoutingHandle;this.lastDragPosition=void 0!==i||o?{x:e.pageX,y:e.pageY}:void 0,this.hasDragged=!1,o&&n.push(new y.SwitchEditModeAction([t.id],[]))}return n},e.prototype.mouseMove=function(t,e){var n=this,i=[];if(0===e.buttons)this.mouseUp(t,e);else if(this.lastDragPosition){var o=l.findParentByFeature(t,p.isViewport);this.hasDragged=!0;var r=o?o.zoom:1,s=(e.pageX-this.lastDragPosition.x)/r,a=(e.pageY-this.lastDragPosition.y)/r,c=[],u=[];t.root.index.all().filter(function(t){return v.isSelectable(t)&&t.selected}).forEach(function(t){if(b.isMoveable(t))c.push({elementId:t.id,fromPosition:{x:t.position.x,y:t.position.y},toPosition:{x:t.position.x+s,y:t.position.y+a}});else if(t instanceof g.SRoutingHandle){var e=n.getHandlePosition(t);void 0!==e&&u.push({elementId:t.id,fromPosition:e,toPosition:{x:e.x+s,y:e.y+a}})}}),this.lastDragPosition={x:e.pageX,y:e.pageY},c.length>0&&i.push(new _(c,!1)),u.length>0&&i.push(new y.MoveRoutingHandleAction(u,!1))}return i},e.prototype.getHandlePosition=function(t){var e=t.parent;if(g.isRoutable(e))if("line"===t.kind){for(var n=function(t){return void 0!==t.pointIndex?t.pointIndex:"target"===t.kind?e.routingPoints.length:-1},i=e.route(),o=void 0,r=void 0,a=0,c=i;a<c.length;a++){var l=c[a],u=n(l);u<=t.pointIndex&&(void 0===o||u>n(o))&&(o=l),u>t.pointIndex&&(void 0===r||u<n(r))&&(r=l)}if(void 0!==o&&void 0!==r)return s.centerOfLine(o,r)}else if(t.pointIndex>=0)return e.routingPoints[t.pointIndex]},e.prototype.mouseEnter=function(t,e){return t instanceof c.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){var n=[];return this.lastDragPosition&&t.root.index.all().forEach(function(t){t instanceof g.SRoutingHandle&&t.editMode&&n.push(new y.SwitchEditModeAction([],[t.id]))}),this.hasDragged=!1,this.lastDragPosition=void 0,n},e.prototype.decorate=function(t,e){return t},e}(h.MouseListener);e.MoveMouseListener=E;var x=function(){function t(){}return t.prototype.decorate=function(t,e){var n="";return b.isLocateable(e)&&e instanceof a.SChildElement&&void 0!==e.parent&&(n="translate("+e.position.x+", "+e.position.y+")"),m.isAlignable(e)&&(n.length>0&&(n+=" "),n+="translate("+e.alignment.x+", "+e.alignment.y+")"),n.length>0&&f.setAttr(t,"transform",n),t},t.prototype.postUpdate=function(){},t=o([r.injectable()],t),t}();e.LocationDecorator=x},"5b35":function(t,e,n){"use strict";var i=n("b878"),o=n.n(i);o.a},"5bc0":function(t,e,n){},"5bcd":function(t,e,n){},"5d19":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("66f9"),a=n("0fb6"),c=n("6923"),l=n("dd02"),u=n("e1c6"),d=function(){function t(e){this.svg=e,this.kind=t.KIND}return t.KIND="exportSvg",t}();e.ExportSvgAction=d;var h=function(){function t(t,e,n){this.options=t,this.actionDispatcher=e,this.log=n}return t.prototype.export=function(t){if("undefined"!==typeof document){var e=document.getElementById(this.options.hiddenDiv);if(null!==e&&e.firstElementChild&&"svg"===e.firstElementChild.tagName){var n=e.firstElementChild,i=this.createSvg(n,t);this.actionDispatcher.dispatch(new d(i))}}},t.prototype.createSvg=function(t,e){var n=new XMLSerializer,i=n.serializeToString(t),o=document.createElement("iframe");if(document.body.appendChild(o),!o.contentWindow)throw new Error("IFrame has no contentWindow");var r=o.contentWindow.document;r.open(),r.write(i),r.close();var s=r.getElementById(t.id);s.removeAttribute("opacity"),this.copyStyles(t,s,["width","height","opacity"]),s.setAttribute("version","1.1");var a=this.getBounds(e);s.setAttribute("viewBox",a.x+" "+a.y+" "+a.width+" "+a.height);var c=n.serializeToString(s);return document.body.removeChild(o),c},t.prototype.copyStyles=function(t,e,n){for(var i=getComputedStyle(t),o=getComputedStyle(e),r="",s=0;s<i.length;s++){var a=i[s];if(-1===n.indexOf(a)){var c=i.getPropertyValue(a);o.getPropertyValue(a)!==c&&(r+=a+":"+c+";")}}""!==r&&e.setAttribute("style",r);for(s=0;s<t.childNodes.length;++s){var l=t.childNodes[s],u=e.childNodes[s];l instanceof Element&&this.copyStyles(l,u,[])}},t.prototype.getBounds=function(t){var e=[l.EMPTY_BOUNDS];return t.children.forEach(function(t){s.isBoundsAware(t)&&e.push(t.bounds)}),e.reduce(function(t,e){return l.combine(t,e)})},t=i([u.injectable(),r(0,u.inject(c.TYPES.ViewerOptions)),r(1,u.inject(c.TYPES.IActionDispatcher)),r(2,u.inject(c.TYPES.ILogger)),o("design:paramtypes",[Object,a.ActionDispatcher,Object])],t),t}();e.SvgExporter=h},"5df2":function(t,e,n){var i=n("5ca1"),o=n("d752");i(i.S+i.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},"5df3":function(t,e,n){"use strict";var i=n("02f4")(!0);n("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},"5e36":function(t,e,n){"use strict";(function(t){n("6b54"),n("a481");var i=n("3156"),o=n.n(i),r=n("2f62"),s=n("e2ed"),a=n("b8ea"),c=n("fd04"),l=n("7cca"),u=n("d247"),d=n("abcf"),h=n("be3b"),f=d["b"].width,p=d["b"].height,v="statics/klab-logo.png";e["a"]={name:"LayoutDefault",components:{KExplorer:s["a"],KlabLayoutViewer:a["a"],KlabComponentsViewer:c["a"]},data:function(){return{header:{width:0,height:0},leftPanel:{width:0,height:0},logoImage:v,showLeft:!0}},computed:o()({},Object(r["c"])("view",["layout"]),{hasHeader:function(){return null!==this.logo||null!==this.layout.header},showLeftPanel:{get:function(){return this.layout&&this.layout.leftPanels.length>0},set:function(){}},mainPanelStyle:function(){return{width:"".concat(this.header.width-this.leftPanel.width,"px"),height:"".concat(this.leftPanel.height,"px")}}}),methods:{setLogoImage:function(){var e=this;this.layout&&this.layout.logo?h["a"].get("".concat("").concat(u["c"].REST_GET_PROJECT_RESOURCE,"/").concat(this.layout.projectId,"/").concat(this.layout.logo.replace("/",":")),{responseType:"arraybuffer"}).then(function(n){n.data?e.logoImage="data:image/png;base64,".concat(t.from(n.data,"binary").toString("base64")):e.logoImage=v}):this.logoImage=v},updateLayout:function(){var t=this;this.setLogoImage();var e=document.getElementById("klab-main-header");this.header.height=e?p(e):0,this.header.width=window.innerWidth;var n=document.querySelector("#klab-main-left-panel aside");this.leftPanel.width=n?f(n):0,this.leftPanel.height=window.innerHeight-this.header.height,this.$nextTick(function(){t.$eventBus.$emit(l["d"].MAP_SIZE_CHANGED,"changelayout")})}},watch:{layout:function(){var t=this;this.$nextTick(function(){t.updateLayout()})}},created:function(){},mounted:function(){this.updateLayout()}}}).call(this,n("b639").Buffer)},"5e9c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("6923");function o(t,e){var n=t.get(i.TYPES.CommandStackOptions);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n}e.overrideCommandStackOptions=o},"5eb6":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("3a92");function o(t){return t instanceof i.SModelRoot&&t.hasFeature(e.viewportFeature)&&"zoom"in t&&"scroll"in t}e.viewportFeature=Symbol("viewportFeature"),e.isViewport=o},"61bf":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=n("dd02"),l=n("3a92"),u=n("42f7"),d=n("66f9"),h=n("320b"),f=n("7faf"),p=function(){function t(){}return t}();e.BoundsData=p;var v=function(){function t(t,e){this.actionDispatcher=t,this.layouter=e,this.element2boundsData=new Map}return t.prototype.decorate=function(t,e){return(d.isSizeable(e)||d.isLayoutContainer(e))&&this.element2boundsData.set(e,{vnode:t,bounds:e.bounds,boundsChanged:!1,alignmentChanged:!1}),e instanceof l.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(){if(void 0===this.root||!f.isExportable(this.root)||!this.root.export){this.getBoundsFromDOM(),this.layouter.layout(this.element2boundsData);var t=[],e=[];this.element2boundsData.forEach(function(n,i){n.boundsChanged&&void 0!==n.bounds&&t.push({elementId:i.id,newBounds:n.bounds}),n.alignmentChanged&&void 0!==n.alignment&&e.push({elementId:i.id,newAlignment:n.alignment})});var n=void 0!==this.root?this.root.revision:void 0;this.actionDispatcher.dispatch(new u.ComputedBoundsAction(t,n,e)),this.element2boundsData.clear()}},t.prototype.getBoundsFromDOM=function(){var t=this;this.element2boundsData.forEach(function(e,n){if(e.bounds&&d.isSizeable(n)){var i=e.vnode;if(i&&i.elm){var o=t.getBounds(i.elm,n);!d.isAlignable(n)||c.almostEquals(o.x,0)&&c.almostEquals(o.y,0)||(e.alignment={x:-o.x,y:-o.y},e.alignmentChanged=!0);var r={x:n.bounds.x,y:n.bounds.y,width:o.width,height:o.height};c.almostEquals(r.x,n.bounds.x)&&c.almostEquals(r.y,n.bounds.y)&&c.almostEquals(r.width,n.bounds.width)&&c.almostEquals(r.height,n.bounds.height)||(e.bounds=r,e.boundsChanged=!0)}}})},t.prototype.getBounds=function(t,e){var n=t.getBBox();return{x:n.x,y:n.y,width:n.width,height:n.height}},t=i([s.injectable(),r(0,s.inject(a.TYPES.IActionDispatcher)),r(1,s.inject(a.TYPES.Layouter)),o("design:paramtypes",[Object,h.Layouter])],t),t}();e.HiddenBoundsUpdater=v},6208:function(t,e,n){"use strict";var i=n("6cea"),o=n.n(i);o.a},"624f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=n("c5f4"),r=n("1979"),s=n("66d7"),a=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();function c(t){return function(e,n,a){if(void 0===t)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(e.name));var c=new r.Metadata(o.INJECT_TAG,t);"number"===typeof a?s.tagParameter(e,n,a,c):s.tagProperty(e,n,c)}}e.LazyServiceIdentifer=a,e.inject=c},6283:function(t,e,n){"use strict";var i=n("5bcd"),o=n.n(i);o.a},6420:function(t,e,n){"use strict";var i=n("1f0f"),o=n.n(i);o.a},6592:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextVNode=s,e.transformName=a,e.unescapeEntities=u;var i=n("81aa"),o=r(i);function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e){return(0,o.default)(void 0,void 0,void 0,u(t,e))}function a(t){t=t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()});var e=t.charAt(0).toLowerCase();return""+e+t.substring(1)}var c=new RegExp("&[a-z0-9#]+;","gi"),l=null;function u(t,e){return l||(l=e.createElement("div")),t.replace(c,function(t){return l.innerHTML=t,l.textContent})}},"65d1":function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n("6923");function r(t,n){var r=i({},e.defaultViewerOptions(),n);t.isBound(o.TYPES.ViewerOptions)?t.rebind(o.TYPES.ViewerOptions).toConstantValue(r):t.bind(o.TYPES.ViewerOptions).toConstantValue(r)}function s(t,e){var n=t.get(o.TYPES.ViewerOptions);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}e.defaultViewerOptions=function(){return{baseDiv:"sprotty",baseClass:"sprotty",hiddenDiv:"sprotty-hidden",hiddenClass:"sprotty-hidden",popupDiv:"sprotty-popup",popupClass:"sprotty-popup",popupClosedClass:"sprotty-popup-closed",needsClientLayout:!0,needsServerLayout:!1,popupOpenDelay:1e3,popupCloseDelay:300}},e.configureViewerOptions=r,e.overrideViewerOptions=s},"66a6":function(t,e,n){},"66d7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=n("c5f4");function r(t,e,n,i){var r=o.TAGGED;a(r,t,e,i,n)}function s(t,e,n){var i=o.TAGGED_PROP;a(i,t.constructor,e,n)}function a(t,e,n,o,r){var s={},a="number"===typeof r,c=void 0!==r&&a?r.toString():n;if(a&&void 0!==n)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(s=Reflect.getMetadata(t,e));var l=s[c];if(Array.isArray(l))for(var u=0,d=l;u<d.length;u++){var h=d[u];if(h.key===o.key)throw new Error(i.DUPLICATED_METADATA+" "+h.key.toString())}else l=[];l.push(o),s[c]=l,Reflect.defineMetadata(t,s,e)}function c(t,e){Reflect.decorate(t,e)}function l(t,e){return function(n,i){e(n,i,t)}}function u(t,e,n){"number"===typeof n?c([l(n,t)],e):"string"===typeof n?Reflect.decorate([t],e,n):c([t],e)}e.tagParameter=r,e.tagProperty=s,e.decorate=u},"66f9":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd02"),r=n("3a92"),s=n("3623");function a(t){return"bounds"in t}function c(t){return a(t)&&t.hasFeature(e.layoutContainerFeature)&&"layout"in t}function l(t){return a(t)&&t.hasFeature(e.layoutableChildFeature)}function u(t){return t.hasFeature(e.boundsFeature)&&a(t)}function d(t){return t.hasFeature(e.alignFeature)&&"alignment"in t}function h(t){var e=s.findParentByFeature(t,a);if(void 0!==e){var n=e.bounds,i=e;while(i instanceof r.SChildElement){var c=i.parent;n=c.localToParent(n),i=c}return n}if(t instanceof r.SModelRoot){var l=t.canvasBounds;return{x:0,y:0,width:l.width,height:l.height}}return o.EMPTY_BOUNDS}e.boundsFeature=Symbol("boundsFeature"),e.layoutContainerFeature=Symbol("layoutContainerFeature"),e.layoutableChildFeature=Symbol("layoutableChildFeature"),e.alignFeature=Symbol("alignFeature"),e.isBoundsAware=a,e.isLayoutContainer=c,e.isLayoutableChild=l,e.isSizeable=u,e.isAlignable=d,e.getAbsoluteBounds=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=o.ORIGIN_POINT,e.size=o.EMPTY_DIMENSION,e}return i(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.localToParent=function(t){var e={x:t.x+this.position.x,y:t.y+this.position.y,width:-1,height:-1};return o.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e.prototype.parentToLocal=function(t){var e={x:t.x-this.position.x,y:t.y-this.position.y,width:-1,height:-1};return o.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e}(r.SChildElement);e.SShapeElement=f},6730:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=n("1979"),r=n("66d7");function s(t){return function(e,n,s){var a=new o.Metadata(i.NAMED_TAG,t);"number"===typeof s?r.tagParameter(e,n,s,a):r.tagProperty(e,n,a)}}e.named=s},6774:function(t,e,n){"use strict";var i=n("36e4"),o=n.n(i);o.a},"68f1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=n("155f"),r=n("a8af"),s=n("ba33"),a=n("7122"),c=function(t,e,n){try{return n()}catch(n){throw r.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},l=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,u=e.target&&e.target.isArray(),d=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(u&&d)return r.map(function(e){var n=l(t);return n(e)});var h=null;if(!e.target.isOptional()||0!==n.length){var f=n[0],p=f.scope===o.BindingScopeEnum.Singleton,v=f.scope===o.BindingScopeEnum.Request;if(p&&f.activated)return f.cache;if(v&&null!==t&&t.has(f.id))return t.get(f.id);if(f.type===o.BindingTypeEnum.ConstantValue)h=f.cache;else if(f.type===o.BindingTypeEnum.Function)h=f.cache;else if(f.type===o.BindingTypeEnum.Constructor)h=f.implementationType;else if(f.type===o.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)h=c("toDynamicValue",f.serviceIdentifier,function(){return f.dynamicValue(e.parentContext)});else if(f.type===o.BindingTypeEnum.Factory&&null!==f.factory)h=c("toFactory",f.serviceIdentifier,function(){return f.factory(e.parentContext)});else if(f.type===o.BindingTypeEnum.Provider&&null!==f.provider)h=c("toProvider",f.serviceIdentifier,function(){return f.provider(e.parentContext)});else{if(f.type!==o.BindingTypeEnum.Instance||null===f.implementationType){var m=s.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+m)}h=a.resolveInstance(f.implementationType,r,l(t))}return"function"===typeof f.onActivation&&(h=f.onActivation(e.parentContext,h)),p&&(f.cache=h,f.activated=!0),v&&null!==t&&!t.has(f.id)&&t.set(f.id,h),h}}};function u(t){var e=l(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}e.resolve=u},6907:function(t,e,n){"use strict";function i(t,e,n){if("function"===typeof t)t.call(e,n,e);else if("object"===typeof t)if("function"===typeof t[0])if(2===t.length)t[0].call(e,t[1],n,e);else{var o=t.slice(1);o.push(n),o.push(e),t[0].apply(e,o)}else for(var r=0;r<t.length;r++)i(t[r],e,n)}function o(t,e){var n=t.type,o=e.data.on;o&&o[n]&&i(o[n],e,t)}function r(){return function t(e){o(e,t.vnode)}}function s(t,e){var n,i=t.data.on,o=t.listener,s=t.elm,a=e&&e.data.on,c=e&&e.elm;if(i!==a){if(i&&o)if(a)for(n in i)a[n]||s.removeEventListener(n,o,!1);else for(n in i)s.removeEventListener(n,o,!1);if(a){var l=e.listener=t.listener||r();if(l.vnode=e,i)for(n in a)i[n]||c.addEventListener(n,l,!1);else for(n in a)c.addEventListener(n,l,!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventListenersModule={create:s,update:s,destroy:s},e.default=e.eventListenersModule},6923:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={IActionDispatcher:Symbol("IActionDispatcher"),IActionDispatcherProvider:Symbol("IActionDispatcherProvider"),IActionHandlerInitializer:Symbol("IActionHandlerInitializer"),ActionHandlerRegistry:Symbol("ActionHandlerRegistry"),AnimationFrameSyncer:Symbol("AnimationFrameSyncer"),CommandStackOptions:Symbol("CommandStackOptions"),IButtonHandler:Symbol("IButtonHandler"),ICommand:Symbol("ICommand"),ICommandStack:Symbol("ICommandStack"),ICommandStackProvider:Symbol("ICommandStackProvider"),DOMHelper:Symbol("DOMHelper"),HiddenVNodeDecorator:Symbol("HiddenVNodeDecorator"),HoverState:Symbol("HoverState"),KeyListener:Symbol("KeyListener"),Layouter:Symbol("Layouter"),LayoutRegistry:Symbol("LayoutRegistry"),ILogger:Symbol("ILogger"),LogLevel:Symbol("LogLevel"),IModelFactory:Symbol("IModelFactory"),IModelLayoutEngine:Symbol("IModelLayoutEngine"),ModelRendererFactory:Symbol("ModelRendererFactory"),ModelSource:Symbol("ModelSource"),ModelSourceProvider:Symbol("ModelSourceProvider"),MouseListener:Symbol("MouseListener"),PopupModelFactory:Symbol("PopupModelFactory"),IPopupModelProvider:Symbol("IPopupModelProvider"),PopupMouseListener:Symbol("PopupMouseListener"),PopupVNodeDecorator:Symbol("PopupVNodeDecorator"),SModelElementRegistration:Symbol("SModelElementRegistration"),SModelRegistry:Symbol("SModelRegistry"),SModelStorage:Symbol("SModelStorage"),StateAwareModelProvider:Symbol("StateAwareModelProvider"),SvgExporter:Symbol("SvgExporter"),IViewer:Symbol("IViewer"),ViewerOptions:Symbol("ViewerOptions"),IViewerProvider:Symbol("IViewerProvider"),ViewRegistration:Symbol("ViewRegistration"),ViewRegistry:Symbol("ViewRegistry"),IVNodeDecorator:Symbol("IVNodeDecorator")}},"6af2":function(t,e,n){"use strict";function i(t,e){var n,i,o,r=e.elm,s=t.data.props,a=e.data.props;if((s||a)&&s!==a){for(n in s=s||{},a=a||{},s)a[n]||delete r[n];for(n in a)i=a[n],o=s[n],o===i||"value"===n&&r[n]===i||(r[n]=i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:i,update:i},e.default=e.propsModule},"6b35":function(t,e,n){"use strict";function i(t){return"string"===typeof t||"number"===typeof t}Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=i},"6bb9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("393a"),o=n("dd02"),r=n("e45b"),s=n("3623"),a=n("cc26"),c=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return i.svg("svg",{"class-sprotty-graph":!0},i.svg("g",{transform:n},e.renderChildren(t)))},t}();e.SGraphView=c;var l=function(){function t(){}return t.prototype.render=function(t,e){var n=t.route();return 0===n.length?this.renderDanglingEdge("Cannot compute route",t,e):i.svg("g",{"class-sprotty-edge":!0,"class-mouseover":t.hoverFeedback},this.renderLine(t,n,e),this.renderAdditionals(t,n,e),e.renderChildren(t,{route:n}))},t.prototype.renderLine=function(t,e,n){for(var o=e[0],r="M "+o.x+","+o.y,s=1;s<e.length;s++){var a=e[s];r+=" L "+a.x+","+a.y}return i.svg("path",{d:r})},t.prototype.renderAdditionals=function(t,e,n){return[]},t.prototype.renderDanglingEdge=function(t,e,n){return i.svg("text",{"class-sprotty-edge-dangling":!0,title:t},"?")},t}();e.PolylineEdgeView=l;var u=function(){function t(){this.minimalPointDistance=10}return t.prototype.render=function(t,e,n){if(n&&n.route){var o=this.getPosition(t,n.route);if(void 0!==o){var s=i.svg("circle",{"class-sprotty-routing-handle":!0,"class-selected":t.selected,"class-mouseover":t.hoverFeedback,cx:o.x,cy:o.y});return r.setAttr(s,"data-kind",t.kind),s}}return i.svg("g",null)},t.prototype.getPosition=function(t,e){return"line"===t.kind?this.getLinePosition(t,e):this.getJunctionPosition(t,e)},t.prototype.getJunctionPosition=function(t,e){return e.find(function(e){return e.pointIndex===t.pointIndex})},t.prototype.getLinePosition=function(t,e){var n=t.parent;if(a.isRoutable(n)){for(var i=function(t){return void 0!==t.pointIndex?t.pointIndex:"target"===t.kind?n.routingPoints.length:-1},r=void 0,s=void 0,c=0,l=e;c<l.length;c++){var u=l[c],d=i(u);d<=t.pointIndex&&(void 0===r||d>i(r))&&(r=u),d>t.pointIndex&&(void 0===s||d<i(s))&&(s=u)}if(void 0!==r&&void 0!==s){if(i(r)!==t.pointIndex&&t.pointIndex>=0){var h=n.routingPoints[t.pointIndex];if(o.maxDistance(h,r)>=o.maxDistance(h,s))return}if(i(s)!==t.pointIndex+1&&t.pointIndex+1<n.routingPoints.length){h=n.routingPoints[t.pointIndex+1];if(o.maxDistance(h,r)<o.maxDistance(h,s))return}if(o.maxDistance(r,s)>=this.minimalPointDistance)return o.centerOfLine(r,s)}}},t}();e.SRoutingHandleView=u;var d=function(){function t(){}return t.prototype.render=function(t,e){var n=i.svg("text",{"class-sprotty-label":!0},t.text),o=s.getSubType(t);return o&&r.setAttr(n,"class",o),n},t}();e.SLabelView=d;var h=function(){function t(){}return t.prototype.render=function(t,e){var n="translate("+t.bounds.x+", "+t.bounds.y+")",o=i.svg("g",{transform:n,"class-sprotty-comp":"{true}"},e.renderChildren(t)),a=s.getSubType(t);return a&&r.setAttr(o,"class",a),o},t}();e.SCompartmentView=h},"6c8f":function(t,e,n){"use strict";var i=n("bb59"),o=n.n(i);o.a},"6cea":function(t,e,n){},"6dd8":function(t,e,n){"use strict";(function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];t.call(e,o[1],o[0])}},e}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,o=function(){return"undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),r=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),s=2;function a(t,e){var n=!1,i=!1,o=0;function a(){n&&(n=!1,t()),i&&l()}function c(){r(a)}function l(){var t=Date.now();if(n){if(t-o<s)return;i=!0}else n=!0,i=!1,setTimeout(c,e);o=t}return l}var c=20,l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,d=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=a(this.refresh.bind(this),c)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e,i=l.some(function(t){return!!~n.indexOf(t)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),h=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},f=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||o},p=x(0,0,0,0);function v(t){return parseFloat(t)||0}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){var i=t["border-"+n+"-width"];return e+v(i)},0)}function g(t){for(var e=["top","right","bottom","left"],n={},i=0,o=e;i<o.length;i++){var r=o[i],s=t["padding-"+r];n[r]=v(s)}return n}function y(t){var e=t.getBBox();return x(0,0,e.width,e.height)}function b(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return p;var i=f(t).getComputedStyle(t),o=g(i),r=o.left+o.right,s=o.top+o.bottom,a=v(i.width),c=v(i.height);if("border-box"===i.boxSizing&&(Math.round(a+r)!==e&&(a-=m(i,"left","right")+r),Math.round(c+s)!==n&&(c-=m(i,"top","bottom")+s)),!w(t)){var l=Math.round(a+r)-e,u=Math.round(c+s)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return x(o.left,o.top,a,c)}var _=function(){return"undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof f(t).SVGGraphicsElement}:function(t){return t instanceof f(t).SVGElement&&"function"===typeof t.getBBox}}();function w(t){return t===f(t).document.documentElement}function S(t){return i?_(t)?y(t):b(t):p}function E(t){var e=t.x,n=t.y,i=t.width,o=t.height,r="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(r.prototype);return h(s,{x:e,y:n,width:i,height:o,top:n,right:e+i,bottom:o+n,left:e}),s}function x(t,e,n,i){return{x:t,y:e,width:n,height:i}}var C=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=x(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=S(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),O=function(){function t(t,e){var n=E(e);h(this,{target:t,contentRect:n})}return t}(),T=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new C(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new O(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),I="undefined"!==typeof WeakMap?new WeakMap:new n,M=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=d.getInstance(),i=new T(e,n,this);I.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){M.prototype[t]=function(){var e;return(e=I.get(this))[t].apply(e,arguments)}});var k=function(){return"undefined"!==typeof o.ResizeObserver?o.ResizeObserver:M}();e["a"]=k}).call(this,n("c8ba"))},"70d9":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("3864"),c=n("e1c6"),l=n("6923"),u=function(t){function e(e){var n=t.call(this)||this;return e.forEach(function(t){return n.register(t.TYPE,new t)}),n}return i(e,t),e=o([c.injectable(),s(0,c.multiInject(l.TYPES.IButtonHandler)),s(0,c.optional()),r("design:paramtypes",[Array])],e),e}(a.InstanceRegistry);e.ButtonHandlerRegistry=u},7122:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=n("155f"),r=n("c5f4");function s(t,e,n){var i=e.filter(function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ClassProperty}),r=i.map(n);return i.forEach(function(e,n){var i="";i=e.target.name.value();var o=r[n];t[i]=o}),t}function a(t,e){return new(t.bind.apply(t,[void 0].concat(e)))}function c(t,e){if(Reflect.hasMetadata(r.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(r.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(i.POST_CONSTRUCT_ERROR(t.name,e.message))}}}function l(t,e,n){var i=null;if(e.length>0){var r=e.filter(function(t){return null!==t.target&&t.target.type===o.TargetTypeEnum.ConstructorArgument}),l=r.map(n);i=a(t,l),i=s(i,e,n)}else i=new t;return c(t,i),i}e.resolveInstance=l},"719e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=n("c5f4");function r(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}e.injectable=r},7282:function(t,e,n){},"72dd":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("42f7"),s=n("61bf"),a=n("320b"),c=new i.ContainerModule(function(t){t(o.TYPES.ICommand).toConstructor(r.SetBoundsCommand),t(o.TYPES.ICommand).toConstructor(r.RequestBoundsCommand),t(o.TYPES.HiddenVNodeDecorator).to(s.HiddenBoundsUpdater).inSingletonScope(),t(o.TYPES.Layouter).to(a.Layouter).inSingletonScope(),t(o.TYPES.LayoutRegistry).to(a.LayoutRegistry).inSingletonScope()});e.default=c},7436:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),s=n("6923"),a=n("302f"),c=function(){function t(){this.localCache=new Map}return t.prototype.store=function(t){this.isLocalStorageAvailable()?localStorage.setItem(this.key,JSON.stringify(t)):this.localCache.set(this.key,JSON.stringify(t))},t.prototype.load=function(){var t=this.isLocalStorageAvailable()?localStorage.getItem(this.key):this.localCache.get(this.key);return t?JSON.parse(t):a.EMPTY_ROOT},t.prototype.isLocalStorageAvailable=function(){try{return"object"===typeof localStorage&&null!==localStorage}catch(t){return!1}},Object.defineProperty(t.prototype,"key",{get:function(){return this.viewerOptions.baseDiv},enumerable:!0,configurable:!0}),i([r.inject(s.TYPES.ViewerOptions),o("design:type",Object)],t.prototype,"viewerOptions",void 0),t=i([r.injectable()],t),t}();e.SModelStorage=c},7521:function(t,e,n){"use strict";var i=n("48f9"),o=n.n(i);o.a},"757d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=n("77d3"),r=n("1979"),s=n("cf13"),a=function(){function t(t,e,n,a){this.id=o.id(),this.type=t,this.serviceIdentifier=n,this.name=new s.QueryableString(e||""),this.metadata=new Array;var c=null;"string"===typeof a?c=new r.Metadata(i.NAMED_TAG,a):a instanceof r.Metadata&&(c=a),null!==c&&this.metadata.push(c)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){var i=n[e];if(i.key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(i.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(t){return t.key!==i.INJECT_TAG&&t.key!==i.MULTI_INJECT_TAG&&t.key!==i.NAME_TAG&&t.key!==i.UNMANAGED_TAG&&t.key!==i.NAMED_TAG})},t.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===i.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return t.key!==i.INJECT_TAG&&t.key!==i.MULTI_INJECT_TAG&&t.key!==i.NAME_TAG&&t.key!==i.UNMANAGED_TAG&&t.key!==i.NAMED_TAG}):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(i.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,o=e.metadata;i<o.length;i++){var r=o[i];if(r.key===t&&r.value===n)return!0}return!1}},t}();e.Target=a},"75c1":function(t,e,n){"use strict";var i=n("77b3"),o=n.n(i);o.a},7685:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};e.BindingCount=i},"771c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("77d3"),o=function(){function t(t){this.id=i.id(),this.registry=t}return t}();e.ContainerModule=o;var r=function(){function t(t){this.id=i.id(),this.registry=t}return t}();e.AsyncContainerModule=r},"77b3":function(t,e,n){},"77d3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=0;function o(){return i++}e.id=o},7890:function(t,e,n){"use strict";var i=n("d741"),o=n.n(i);o.a},7959:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),r=n("dd02"),s=function(){function t(){}return t.prototype.route=function(t,e){void 0===e&&(e={minimalPointDistance:2});var n,i,o=t.source,s=t.target;if(void 0===o||void 0===s)return[];var a=void 0!==t.routingPoints?t.routingPoints.length:0;if(a>=1){var c=t.routingPoints[0];n=o.getTranslatedAnchor(c,t.parent,t,t.sourceAnchorCorrection);var l=t.routingPoints[a-1];i=s.getTranslatedAnchor(l,t.parent,t,t.targetAnchorCorrection)}else{var u=r.center(s.bounds);n=o.getTranslatedAnchor(u,s.parent,t,t.sourceAnchorCorrection);var d=r.center(o.bounds);i=s.getTranslatedAnchor(d,o.parent,t,t.targetAnchorCorrection)}var h=[];h.push({kind:"source",x:n.x,y:n.y});for(var f=0;f<a;f++){var p=t.routingPoints[f];(f>0&&f<a-1||0===f&&r.maxDistance(n,p)>=e.minimalPointDistance+(t.sourceAnchorCorrection||0)||f===a-1&&r.maxDistance(p,i)>=e.minimalPointDistance+(t.targetAnchorCorrection||0))&&h.push({kind:"linear",x:p.x,y:p.y,pointIndex:f})}return h.push({kind:"target",x:i.x,y:i.y}),h},t=i([o.injectable()],t),t}();e.LinearEdgeRouter=s},"7b3d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{attrs:{view:"hhh lpr fFf"}},[t.layout&&(t.layout.header||t.layout.logo||t.layout.label||t.layout.description)?n("q-layout-header",{attrs:{id:"klab-main-header"}},[t.layout.header?n("klab-components-viewer",{staticClass:"klab-main-header",attrs:{component:t.layout.header,direction:"horizontal"}}):n("div",{staticClass:"klab-main-header"},[n("img",{ref:"main-logo",staticClass:"main-logo",attrs:{src:t.logoImage}}),n("div",{staticClass:"main-title-container"},[t.layout.label?n("div",{staticClass:"main-title"},[t._v(t._s(t.layout.label))]):t._e(),t.layout.description?n("div",{staticClass:"main-subtitle"},[t._v(t._s(t.layout.description))]):t._e()])])],1):t._e(),t.showLeftPanel?n("q-layout-drawer",{attrs:{side:"left",id:"klab-main-left-panel","content-class":"klab-main-left-panel",width:600},model:{value:t.showLeftPanel,callback:function(e){t.showLeftPanel=e},expression:"showLeftPanel"}},[t.leftPanel?[n("klab-components-viewer",{attrs:{id:"left-panel-0",component:t.layout.leftPanels[0],direction:"vertical"}})]:t._e()],2):t._e(),n("q-page-container",[t.layout&&0!==t.layout.panels.length?[n("klab-components-viewer",{staticClass:"klab-main-container",attrs:{mainPanelStyle:t.mainPanelStyle,component:t.layout.panels[0]}})]:n("k-explorer",{staticClass:"klab-main-container",attrs:{mainPanelStyle:t.mainPanelStyle}})],2),n("q-resize-observable",{on:{resize:t.updateLayout}})],1)},o=[];i._withStripped=!0;var r=n("5e36"),s=r["a"],a=(n("7521"),n("2877")),c=Object(a["a"])(s,i,o,!1,null,null,null);c.options.__file="default.vue";e["default"]=c.exports},"7bae":function(t,e,n){},"7cd7":function(t,e,n){"use strict";var i=n("45d1"),o=n.n(i);o.a},"7d36":function(t,e,n){"use strict";function i(t){return t.hasFeature(e.fadeFeature)&&void 0!==t["opacity"]}Object.defineProperty(e,"__esModule",{value:!0}),e.fadeFeature=Symbol("fadeFeature"),e.isFadeable=i},"7dba":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("624f"),o=n("30e3"),r=n("155f"),s=n("c5f4"),a=n("ba33");e.getFunctionName=a.getFunctionName;var c=n("757d");function l(t,e){var n=a.getFunctionName(e),i=u(t,n,e,!1);return i}function u(t,e,n,i){var r=t.getConstructorMetadata(n),s=r.compilerGeneratedMetadata;if(void 0===s){var a=o.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(a)}var c=r.userGeneratedMetadata,l=Object.keys(c),u=0===n.length&&l.length>0,d=u?l.length:n.length,p=h(i,e,s,c,d),v=f(t,n),m=p.concat(v);return m}function d(t,e,n,s,a){var l=a[t.toString()]||[],u=v(l),d=!0!==u.unmanaged,h=s[t],f=u.inject||u.multiInject;if(h=f||h,h instanceof i.LazyServiceIdentifer&&(h=h.unwrap()),d){var p=h===Object,m=h===Function,g=void 0===h,y=p||m||g;if(!e&&y){var b=o.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(b)}var _=new c.Target(r.TargetTypeEnum.ConstructorArgument,u.targetName,h);return _.metadata=l,_}return null}function h(t,e,n,i,o){for(var r=[],s=0;s<o;s++){var a=s,c=d(a,t,e,n,i);null!==c&&r.push(c)}return r}function f(t,e){for(var n=t.getPropertiesMetadata(e),i=[],o=Object.keys(n),s=0,a=o;s<a.length;s++){var l=a[s],u=n[l],d=v(n[l]),h=d.targetName||l,p=d.inject||d.multiInject,m=new c.Target(r.TargetTypeEnum.ClassProperty,h,p);m.metadata=u,i.push(m)}var g=Object.getPrototypeOf(e.prototype).constructor;if(g!==Object){var y=f(t,g);i=i.concat(y)}return i}function p(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var i=a.getFunctionName(n),o=u(t,i,n,!0),r=o.map(function(t){return t.metadata.filter(function(t){return t.key===s.UNMANAGED_TAG})}),c=[].concat.apply([],r).length,l=o.length-c;return l>0?l:p(t,n)}return 0}function v(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[s.INJECT_TAG],multiInject:e[s.MULTI_INJECT_TAG],targetName:e[s.NAME_TAG],unmanaged:e[s.UNMANAGED_TAG]}}e.getDependencies=l,e.getBaseClassDependencyCount=p},"7faf":function(t,e,n){"use strict";function i(t){return t.hasFeature(e.exportFeature)&&void 0!==t["export"]}Object.defineProperty(e,"__esModule",{value:!0}),e.exportFeature=Symbol("exportFeature"),e.isExportable=i},8025:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),r=n("f4cb"),s=n("302f"),a=n("ed4f"),c=n("c444"),l=n("559d"),u=function(){function t(){this.popupOpen=!1}return t.prototype.handle=function(t){if(t.kind===r.SetPopupModelCommand.KIND)this.popupOpen=t.newRoot.type!==s.EMPTY_ROOT.type;else if(this.popupOpen)return new r.SetPopupModelAction({id:s.EMPTY_ROOT.id,type:s.EMPTY_ROOT.type})},t}(),d=function(){function t(){}return t.prototype.initialize=function(t){var e=new u;t.register(a.FitToScreenCommand.KIND,e),t.register(a.CenterCommand.KIND,e),t.register(c.ViewportCommand.KIND,e),t.register(r.SetPopupModelCommand.KIND,e),t.register(l.MoveCommand.KIND,e)},t=i([o.injectable()],t),t}();e.PopupActionHandlerInitializer=d},8122:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("7436"),r=n("6923"),s=n("33b2"),a=n("9e2e"),c=n("0fb6"),l=n("be02"),u=n("160b"),d=n("302f"),h=n("538c"),f=n("29fa"),p=n("65d1"),v=n("3b4c"),m=n("1417"),g=n("d4ec"),y=n("064a"),b=n("8794"),_=n("0d7a"),w=n("ed79"),S=n("9757"),E=new i.ContainerModule(function(t){t(r.TYPES.ILogger).to(a.NullLogger).inSingletonScope(),t(r.TYPES.LogLevel).toConstantValue(a.LogLevel.warn),t(r.TYPES.SModelRegistry).to(d.SModelRegistry).inSingletonScope(),t(r.TYPES.ActionHandlerRegistry).to(l.ActionHandlerRegistry).inSingletonScope(),t(r.TYPES.ViewRegistry).to(y.ViewRegistry).inSingletonScope(),t(r.TYPES.IModelFactory).to(d.SModelFactory).inSingletonScope(),t(r.TYPES.IActionDispatcher).to(c.ActionDispatcher).inSingletonScope(),t(r.TYPES.IActionDispatcherProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(r.TYPES.IActionDispatcher))})}}),t(r.TYPES.IActionHandlerInitializer).to(S.CommandActionHandlerInitializer),t(r.TYPES.ICommandStack).to(u.CommandStack).inSingletonScope(),t(r.TYPES.ICommandStackProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(r.TYPES.ICommandStack))})}}),t(r.TYPES.CommandStackOptions).toConstantValue({defaultDuration:250,undoHistoryLimit:50}),t(f.Viewer).toSelf().inSingletonScope(),t(r.TYPES.IViewer).toDynamicValue(function(t){return t.container.get(f.Viewer)}).inSingletonScope().whenTargetNamed("delegate"),t(b.ViewerCache).toSelf().inSingletonScope(),t(r.TYPES.IViewer).toDynamicValue(function(t){return t.container.get(b.ViewerCache)}).inSingletonScope().whenTargetIsDefault(),t(r.TYPES.IViewerProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(r.TYPES.IViewer))})}}),t(r.TYPES.ViewerOptions).toConstantValue(p.defaultViewerOptions()),t(r.TYPES.DOMHelper).to(_.DOMHelper).inSingletonScope(),t(r.TYPES.ModelRendererFactory).toFactory(function(t){return function(e){var n=t.container.get(r.TYPES.ViewRegistry);return new f.ModelRenderer(n,e)}}),t(w.IdDecorator).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(w.IdDecorator)}).inSingletonScope(),t(v.MouseTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(v.MouseTool)}).inSingletonScope(),t(m.KeyTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(m.KeyTool)}).inSingletonScope(),t(g.FocusFixDecorator).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(g.FocusFixDecorator)}).inSingletonScope(),t(r.TYPES.PopupVNodeDecorator).toDynamicValue(function(t){return t.container.get(w.IdDecorator)}).inSingletonScope(),t(v.PopupMouseTool).toSelf().inSingletonScope(),t(r.TYPES.PopupVNodeDecorator).toDynamicValue(function(t){return t.container.get(v.PopupMouseTool)}).inSingletonScope(),t(r.TYPES.HiddenVNodeDecorator).toDynamicValue(function(t){return t.container.get(w.IdDecorator)}).inSingletonScope(),t(r.TYPES.AnimationFrameSyncer).to(h.AnimationFrameSyncer).inSingletonScope(),t(r.TYPES.ICommand).toConstructor(s.InitializeCanvasBoundsCommand),t(s.CanvasBoundsInitializer).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(s.CanvasBoundsInitializer)}).inSingletonScope(),t(r.TYPES.SModelStorage).to(o.SModelStorage).inSingletonScope()});e.default=E},8195:function(t,e,n){},"81aa":function(t,e,n){"use strict";function i(t,e,n,i,o){var r=void 0===e?void 0:e.key;return{sel:t,data:e,children:n,text:i,elm:o,key:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=i,e.default=i},8336:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3"),o=n("155f"),r=n("0fd9"),s=n("2cac"),a=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=o.BindingTypeEnum.Instance,this._binding.implementationType=t,new r.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!==typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=o.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=o.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new r.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=o.BindingTypeEnum.Constructor,this._binding.implementationType=t,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=t,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!==typeof t)throw new Error(i.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=o.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=o.BindingTypeEnum.Factory,this._binding.factory=function(e){var n=function(){return e.container.get(t)};return n},new s.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=o.BindingTypeEnum.Provider,this._binding.provider=t,new s.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},t}();e.BindingToSyntax=a},"84a2":function(t,e,n){(function(e){var n="Expected a function",i=NaN,o="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),f=Object.prototype,p=f.toString,v=Math.max,m=Math.min,g=function(){return h.Date.now()};function y(t,e,i){var o,r,s,a,c,l,u=0,d=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError(n);function p(e){var n=o,i=r;return o=r=void 0,u=e,a=t.apply(i,n),a}function y(t){return u=t,c=setTimeout(S,e),d?p(t):a}function b(t){var n=t-l,i=t-u,o=e-n;return h?m(o,s-i):o}function w(t){var n=t-l,i=t-u;return void 0===l||n>=e||n<0||h&&i>=s}function S(){var t=g();if(w(t))return x(t);c=setTimeout(S,b(t))}function x(t){return c=void 0,f&&o?p(t):(o=r=void 0,a)}function C(){void 0!==c&&clearTimeout(c),u=0,o=l=r=c=void 0}function O(){return void 0===c?a:x(g())}function T(){var t=g(),n=w(t);if(o=arguments,r=this,l=t,n){if(void 0===c)return y(l);if(h)return c=setTimeout(S,e),p(l)}return void 0===c&&(c=setTimeout(S,e)),a}return e=E(e)||0,_(i)&&(d=!!i.leading,h="maxWait"in i,s=h?v(E(i.maxWait)||0,e):s,f="trailing"in i?!!i.trailing:f),T.cancel=C,T.flush=O,T}function b(t,e,i){var o=!0,r=!0;if("function"!=typeof t)throw new TypeError(n);return _(i)&&(o="leading"in i?!!i.leading:o,r="trailing"in i?!!i.trailing:r),y(t,e,{leading:o,maxWait:e,trailing:r})}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function w(t){return!!t&&"object"==typeof t}function S(t){return"symbol"==typeof t||w(t)&&p.call(t)==o}function E(t){if("number"==typeof t)return t;if(S(t))return i;if(_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=a.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):s.test(t)?i:+t}t.exports=b}).call(this,n("c8ba"))},"84fd":function(t,e,n){},"85ed":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("9e2e"),c=n("6923"),l=function(){function t(e,n,i,o,r){this.severity=e,this.time=n,this.caller=i,this.message=o,this.params=r,this.kind=t.KIND}return t.KIND="logging",t}();e.LoggingAction=l;var u=function(){function t(t,e){this.modelSourceProvider=t,this.logLevel=e}return t.prototype.error=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.logLevel>=a.LogLevel.error&&this.forward(t,e,a.LogLevel.error,n)},t.prototype.warn=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.logLevel>=a.LogLevel.warn&&this.forward(t,e,a.LogLevel.warn,n)},t.prototype.info=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.logLevel>=a.LogLevel.info&&this.forward(t,e,a.LogLevel.info,n)},t.prototype.log=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(this.logLevel>=a.LogLevel.log)try{var o="object"===typeof t?t.constructor.name:String(t);console.log.apply(t,[o+": "+e].concat(n))}catch(t){}},t.prototype.forward=function(t,e,n,i){var o=new Date,r=new l(a.LogLevel[n],o.toLocaleTimeString(),"object"===typeof t?t.constructor.name:String(t),e,i.map(function(t){return JSON.stringify(t)}));this.modelSourceProvider().then(function(n){try{n.handle(r)}catch(n){try{console.log.apply(t,[e,r,n])}catch(t){}}})},t=i([s.injectable(),r(0,s.inject(c.TYPES.ModelSourceProvider)),r(1,s.inject(c.TYPES.LogLevel)),o("design:paramtypes",[Function,Number])],t),t}();e.ForwardingLogger=u},"861d":function(t,e,n){var i=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,o=n("c4ec"),r=Object.create?Object.create(null):{};function s(t,e,n,i,o){var r=e.indexOf("<",i),s=e.slice(i,-1===r?void 0:r);/^\s*$/.test(s)&&(s=" "),(!o&&r>-1&&n+t.length>=0||" "!==s)&&t.push({type:"text",content:s})}t.exports=function(t,e){e||(e={}),e.components||(e.components=r);var n,a=[],c=-1,l=[],u={},d=!1;return t.replace(i,function(i,r){if(d){if(i!=="</"+n.name+">")return;d=!1}var h,f="/"!==i.charAt(1),p=0===i.indexOf("\x3c!--"),v=r+i.length,m=t.charAt(v);f&&!p&&(c++,n=o(i),"tag"===n.type&&e.components[n.name]&&(n.type="component",d=!0),n.voidElement||d||!m||"<"===m||s(n.children,t,c,v,e.ignoreWhitespace),u[n.tagName]=n,0===c&&a.push(n),h=l[c-1],h&&h.children.push(n),l[c]=n),(p||!f||n.voidElement)&&(p||c--,!d&&"<"!==m&&m&&(h=-1===c?a:l[c].children,s(h,t,c,v,e.ignoreWhitespace)))}),!a.length&&t.length&&s(a,t,0,0,e.ignoreWhitespace),a}},8622:function(t,e,n){"use strict";var i=n("bc63"),o=n.n(i);o.a},8794:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=n("538c"),l=function(){function t(t,e){this.delegate=t,this.syncer=e}return t.prototype.isCacheEmpty=function(){return void 0===this.cachedModelRoot&&void 0===this.cachedHiddenModelRoot&&void 0===this.cachedPopup},t.prototype.updatePopup=function(t){var e=this.isCacheEmpty();this.cachedPopup=t,e&&this.scheduleUpdate()},t.prototype.update=function(t){var e=this.isCacheEmpty();this.cachedModelRoot=t,e&&this.scheduleUpdate()},t.prototype.updateHidden=function(t){var e=this.isCacheEmpty();this.cachedHiddenModelRoot=t,e&&this.scheduleUpdate()},t.prototype.scheduleUpdate=function(){var t=this;this.syncer.onEndOfNextFrame(function(){if(t.cachedHiddenModelRoot){var e=t.cachedHiddenModelRoot;t.delegate.updateHidden(e),t.cachedHiddenModelRoot=void 0}if(t.cachedModelRoot){var n=t.cachedModelRoot;t.delegate.update(n),t.cachedModelRoot=void 0}if(t.cachedPopup){n=t.cachedPopup;t.delegate.updatePopup(n),t.cachedPopup=void 0}})},t=i([s.injectable(),r(0,s.inject(a.TYPES.IViewer)),r(0,s.named("delegate")),r(1,s.inject(a.TYPES.AnimationFrameSyncer)),o("design:paramtypes",[Object,c.AnimationFrameSyncer])],t),t}();e.ViewerCache=l},"87b3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7685"),o=n("30e3"),r=n("155f"),s=n("c5f4"),a=n("a8af"),c=n("ba33"),l=n("a32f"),u=n("1979"),d=n("c8c0"),h=n("7dba"),f=n("c622"),p=n("757d");function v(t){return t._bindingDictionary}function m(t,e,n,i,o,r){var a=t?s.MULTI_INJECT_TAG:s.INJECT_TAG,c=new u.Metadata(a,n),l=new p.Target(e,i,n,c);if(void 0!==o){var d=new u.Metadata(o,r);l.metadata.push(d)}return l}function g(t,e,n,o,r){var s=_(n.container,r.serviceIdentifier),a=[];return s.length===i.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"===typeof r.serviceIdentifier&&t.getConstructorMetadata(r.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(r.serviceIdentifier).toSelf(),s=_(n.container,r.serviceIdentifier)),a=e?s:s.filter(function(t){var e=new f.Request(t.serviceIdentifier,n,o,t,r);return t.constraint(e)}),y(r.serviceIdentifier,a,r,n.container),a}function y(t,e,n,r){switch(e.length){case i.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var s=c.getServiceIdentifierAsString(t),a=o.NOT_REGISTERED;throw a+=c.listMetadataForTarget(s,n),a+=c.listRegisteredBindingsForServiceIdentifier(r,s,_),new Error(a);case i.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case i.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;s=c.getServiceIdentifierAsString(t),a=o.AMBIGUOUS_MATCH+" "+s;throw a+=c.listRegisteredBindingsForServiceIdentifier(r,s,_),new Error(a)}}function b(t,e,n,i,s,a){var c,l;if(null===s){c=g(t,e,i,null,a),l=new f.Request(n,i,null,c,a);var u=new d.Plan(i,l);i.addPlan(u)}else c=g(t,e,i,s,a),l=s.addChildRequest(a.serviceIdentifier,c,a);c.forEach(function(e){var n=null;if(a.isArray())n=l.addChildRequest(e.serviceIdentifier,e,a);else{if(e.cache)return;n=l}if(e.type===r.BindingTypeEnum.Instance&&null!==e.implementationType){var s=h.getDependencies(t,e.implementationType);if(!i.container.options.skipBaseClassChecks){var c=h.getBaseClassDependencyCount(t,e.implementationType);if(s.length<c){var u=o.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(e.implementationType));throw new Error(u)}}s.forEach(function(e){b(t,!1,e.serviceIdentifier,i,n,e)})}})}function _(t,e){var n=[],i=v(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=_(t.parent,e)),n}function w(t,e,n,i,o,r,s,u){void 0===u&&(u=!1);var d=new l.Context(e),h=m(n,i,o,"",r,s);try{return b(t,u,o,d,null,h),d}catch(t){throw a.isStackOverflowExeption(t)&&d.plan&&c.circularDependencyToException(d.plan.rootRequest),t}}function S(t,e,n,i){var o=new p.Target(r.TargetTypeEnum.Variable,"",e,new u.Metadata(n,i)),s=new l.Context(t),a=new f.Request(e,s,null,[],o);return a}e.getBindingDictionary=v,e.plan=w,e.createMockRequest=S},"87fa":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("3a92"),r=n("dd02"),s=n("ba30"),a=n("66f9"),c=n("a0af"),l=n("4c18"),u=n("47b7"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){var t=Math.min(this.size.width,this.size.height);return t>0?t/2:0},enumerable:!0,configurable:!0}),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return s.computeCircleAnchor(this.position,this.radius,t,e+n)},e}(u.SNode);e.CircularNode=d;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return i(e,t),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return s.computeRectangleAnchor(this.bounds,t,e+n)},e}(u.SNode);e.RectangularNode=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){var t=Math.min(this.size.width,this.size.height);return t>0?t/2:0},enumerable:!0,configurable:!0}),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return s.computeCircleAnchor(this.position,this.radius,t,e+n)},e}(u.SPort);e.CircularPort=f;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return i(e,t),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return s.computeRectangleAnchor(this.bounds,t,e+n)},e}(u.SPort);e.RectangularPort=p;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.classes=[],e}return i(e,t),e}(o.SModelRoot);e.HtmlRoot=v;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o.SChildElement);e.PreRenderedElement=m;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=r.ORIGIN_POINT,e.size=r.EMPTY_DIMENSION,e.selected=!1,e.alignment=r.ORIGIN_POINT,e}return i(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.hasFeature=function(t){return t===c.moveFeature||t===a.boundsFeature||t===l.selectFeature||t===a.alignFeature},e}(m);e.ShapedPreRenderedElement=g},"8ac3":function(t,e,n){},"8b1b":function(t,e,n){},"8c88":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=n("1979"),r=n("66d7");function s(t){return function(e,n,s){var a=new o.Metadata(i.MULTI_INJECT_TAG,t);"number"===typeof s?r.tagParameter(e,n,s,a):r.tagProperty(e,n,a)}}e.multiInject=s},"8d53":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd7b"),o=function(){function t(){}return t.prototype.render=function(t,e){var n=this;return i.h(this.selector(t),{key:t.id,hook:{init:this.init.bind(this),prepatch:this.prepatch.bind(this)},fn:function(){return n.renderAndDecorate(t,e)},args:this.watchedArgs(t),thunk:!0})},t.prototype.renderAndDecorate=function(t,e){var n=this.doRender(t,e);return e.decorate(n,t),n},t.prototype.copyToThunk=function(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm},t.prototype.init=function(t){var e=t.data,n=e.fn.apply(void 0,e.args);this.copyToThunk(n,t)},t.prototype.prepatch=function(t,e){var n=t.data,i=e.data;this.equals(n.args,i.args)?this.copyToThunk(t,e):this.copyToThunk(i.fn.apply(void 0,i.args),e)},t.prototype.equals=function(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<e.length;++n)if(!this.equals(t[n],e[n]))return!1}else if("object"===typeof t&&"object"===typeof e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if("parent"!==i&&"root"!==i&&(!(i in e)||!this.equals(t[i],e[i])))return!1}else if(t!==e)return!1;return!0},t}();function r(t){return"thunk"in t}e.ThunkView=o,e.isThunk=r},"8d8c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=n("1979"),r=n("66d7");function s(){return function(t,e,n){var s=new o.Metadata(i.OPTIONAL_TAG,!0);"number"===typeof n?r.tagParameter(t,e,n,s):r.tagProperty(t,e,s)}}e.optional=s},"8e08":function(t,e,n){},"8e65":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=new i.ContainerModule(function(t){t(o.TYPES.ModelSourceProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(o.TYPES.ModelSource))})}})});e.default=r},9016:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="undefined"!==typeof window&&window.requestAnimationFrame.bind(window)||setTimeout,o=function(t){i(function(){i(t)})},r=!1;function s(t,e,n){o(function(){t[e]=n})}function a(t,e){var n,i,o=e.elm,r=t.data.style,a=e.data.style;if((r||a)&&r!==a){r=r||{},a=a||{};var c="delayed"in r;for(i in r)a[i]||("-"===i[0]&&"-"===i[1]?o.style.removeProperty(i):o.style[i]="");for(i in a)if(n=a[i],"delayed"===i&&a.delayed)for(var l in a.delayed)n=a.delayed[l],c&&n===r.delayed[l]||s(o.style,l,n);else"remove"!==i&&n!==r[i]&&("-"===i[0]&&"-"===i[1]?o.style.setProperty(i,n):o.style[i]=n)}}function c(t){var e,n,i=t.elm,o=t.data.style;if(o&&(e=o.destroy))for(n in e)i.style[n]=e[n]}function l(t,e){var n=t.data.style;if(n&&n.remove){r||(t.elm.offsetLeft,r=!0);var i,o,s=t.elm,a=0,c=n.remove,l=0,u=[];for(i in c)u.push(i),s.style[i]=c[i];o=getComputedStyle(s);for(var d=o["transition-property"].split(", ");a<d.length;++a)-1!==u.indexOf(d[a])&&l++;s.addEventListener("transitionend",function(t){t.target===s&&--l,0===l&&e()})}else e()}function u(){r=!1}e.styleModule={pre:u,create:a,update:a,destroy:c,remove:l},e.default=e.styleModule},9152:function(t,e){e.read=function(t,e,n,i,o){var r,s,a=8*o-i-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?o-1:0,h=n?-1:1,f=t[e+d];for(d+=h,r=f&(1<<-u)-1,f>>=-u,u+=a;u>0;r=256*r+t[e+d],d+=h,u-=8);for(s=r&(1<<-u)-1,r>>=-u,u+=i;u>0;s=256*s+t[e+d],d+=h,u-=8);if(0===r)r=1-l;else{if(r===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),r-=l}return(f?-1:1)*s*Math.pow(2,r-i)},e.write=function(t,e,n,i,o,r){var s,a,c,l=8*r-o-1,u=(1<<l)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:r-1,p=i?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+d>=1?h/c:h*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(e*c-1)*Math.pow(2,o),s+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;t[n+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+f]=255&s,f+=p,s/=256,l-=8);t[n+f-p]|=128*v}},9175:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}();e.Deferred=i},9198:function(t,e,n){"use strict";var i=n("eb61"),o=n.n(i);o.a},9417:function(t,e,n){"use strict";var i=n("ac8e"),o=n.n(i);o.a},"945d":function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("6923"),l=n("3a92"),u=n("7436"),d=n("be02"),h=n("3f0a"),f=n("cf61"),p=n("42f7"),v=n("f4cb"),m=n("26ad"),g=n("5d19"),y=n("2440"),b=n("4741"),_=n("b485");function w(t){return void 0!==t&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("action")}e.isActionMessage=w;var S=function(){function t(){this.kind=t.KIND}return t.KIND="serverStatus",t}();e.ServerStatusAction=S;var E="__receivedFromServer",x=function(t){function e(e,n,i,o,r){var s=t.call(this,e,n,i)||this;return s.storage=o,s.logger=r,s.currentRoot={type:"NONE",id:"ROOT"},s.clientId=s.viewerOptions.baseDiv,s}return i(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.registerCommand(f.UpdateModelCommand),e.register(p.ComputedBoundsAction.KIND,this),e.register(p.RequestBoundsCommand.KIND,this),e.register(v.RequestPopupModelAction.KIND,this),e.register(b.CollapseExpandAction.KIND,this),e.register(b.CollapseExpandAllAction.KIND,this),e.register(_.OpenAction.KIND,this),e.register(S.KIND,this)},e.prototype.handle=function(t){var e=this.handleLocally(t);if(e){var n={clientId:this.clientId,action:t};this.logger.log(this,"sending",n),this.sendMessage(n)}},e.prototype.messageReceived=function(t){var e=this,n="string"===typeof t?JSON.parse(t):t;w(n)&&n.action?n.clientId&&n.clientId!==this.clientId||(n.action[E]=!0,this.logger.log(this,"receiving",n),this.actionDispatcher.dispatch(n.action).then(function(){e.storeNewModel(n.action)})):this.logger.error(this,"received data is not an action message",n)},e.prototype.handleLocally=function(t){switch(this.storeNewModel(t),t.kind){case p.ComputedBoundsAction.KIND:return this.handleComputedBounds(t);case p.RequestBoundsCommand.KIND:return!1;case g.ExportSvgAction.KIND:return this.handleExportSvgAction(t);case S.KIND:return this.handleServerStateAction(t)}return!t[E]},e.prototype.storeNewModel=function(t){if(t.kind===h.SetModelCommand.KIND||t.kind===f.UpdateModelCommand.KIND||t.kind===p.RequestBoundsCommand.KIND){var e=t.newRoot;e&&(this.currentRoot=e,t.kind!==h.SetModelCommand.KIND&&t.kind!==f.UpdateModelCommand.KIND||(this.lastSubmittedModelType=e.type),this.storage.store(this.currentRoot))}},e.prototype.handleComputedBounds=function(t){if(this.viewerOptions.needsServerLayout)return!0;var e=new l.SModelIndex,n=this.currentRoot;e.add(n);for(var i=0,o=t.bounds;i<o.length;i++){var r=o[i],s=e.getById(r.elementId);void 0!==s&&this.applyBounds(s,r.newBounds)}if(void 0!==t.alignments)for(var a=0,c=t.alignments;a<c.length;a++){var u=c[a];s=e.getById(u.elementId);void 0!==s&&this.applyAlignment(s,u.newAlignment)}return n.type===this.lastSubmittedModelType?this.actionDispatcher.dispatch(new f.UpdateModelAction(n)):this.actionDispatcher.dispatch(new h.SetModelAction(n)),this.lastSubmittedModelType=n.type,!1},e.prototype.applyBounds=function(t,e){var n=t;n.position={x:e.x,y:e.y},n.size={width:e.width,height:e.height}},e.prototype.applyAlignment=function(t,e){var n=t;n.alignment={x:e.x,y:e.y}},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});return y.saveAs(e,"diagram.svg"),!1},e.prototype.handleServerStateAction=function(t){return!1},e=o([a.injectable(),s(0,a.inject(c.TYPES.IActionDispatcher)),s(1,a.inject(c.TYPES.ActionHandlerRegistry)),s(2,a.inject(c.TYPES.ViewerOptions)),s(3,a.inject(c.TYPES.SModelStorage)),s(4,a.inject(c.TYPES.ILogger)),r("design:paramtypes",[Object,d.ActionHandlerRegistry,Object,u.SModelStorage,Object])],e),e}(m.ModelSource);e.DiagramServer=x},"96fa":function(t,e,n){"use strict";var i=n("fd0f"),o=n.n(i);o.a},"96fe":function(t,e,n){var i;function o(t){var n,i=0;for(n in t)i=(i<<5)-i+t.charCodeAt(n),i|=0;return e.colors[Math.abs(i)%e.colors.length]}function r(t){function n(){if(n.enabled){var t=n,o=+new Date,r=o-(i||o);t.diff=r,t.prev=i,t.curr=o,i=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;c++;var o=e.formatters[i];if("function"===typeof o){var r=s[c];n=o.call(t,r),s.splice(c,1),c--}return n}),e.formatArgs.call(t,s);var l=n.log||e.log||console.log.bind(console);l.apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=o(t),"function"===typeof e.init&&e.init(n),n}function s(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"===typeof t?t:"").split(/[\s,]+/),i=n.length,o=0;o<i;o++)n[o]&&(t=n[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function a(){e.enable("")}function c(t){var n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1}function l(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=r.debug=r["default"]=r,e.coerce=l,e.disable=a,e.enable=s,e.enabled=c,e.humanize=n("1468"),e.names=[],e.skips=[],e.formatters={}},9757:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("6923"),l=function(){function t(){}return t}();e.Command=l;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.merge=function(t,e){return!1},e}(l);e.MergeableCommand=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.undo=function(t){return t.logger.error(this,"Cannot undo a hidden command"),t.root},e.prototype.redo=function(t){return t.logger.error(this,"Cannot redo a hidden command"),t.root},e}(l);e.HiddenCommand=d;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(l);e.PopupCommand=h;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(l);e.SystemCommand=f;var p=function(){function t(t){this.commandType=t}return t.prototype.handle=function(t){return new this.commandType(t)},t}();e.CommandActionHandler=p;var v=function(){function t(t){this.commandCtrs=t}return t.prototype.initialize=function(t){this.commandCtrs.forEach(function(e){return t.registerCommand(e)})},t=o([a.injectable(),s(0,a.multiInject(c.TYPES.ICommand)),s(0,a.optional()),r("design:paramtypes",[Array])],t),t}();e.CommandActionHandlerInitializer=v},9811:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("e7fa"),s=new i.ContainerModule(function(t){t(o.TYPES.IVNodeDecorator).to(r.ElementFader).inSingletonScope()});e.default=s},"987d":function(t,e,n){"use strict";function i(t){return t<.5?t*t*2:1-(1-t)*(1-t)*2}Object.defineProperty(e,"__esModule",{value:!0}),e.easeInOut=i},"98ab":function(t,e,n){},"98db":function(t,e,n){(function(t,e){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;(function(n){(function(t){var i="object"===typeof e?e:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),o=r(n);function r(t,e){return function(n,i){"function"!==typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:i}),e&&e(n,i)}}"undefined"===typeof i.Reflect?i.Reflect=n:o=r(i.Reflect,o),t(o)})(function(e){var n=Object.prototype.hasOwnProperty,i="function"===typeof Symbol,o=i&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=i&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",s="function"===typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,l={create:s?function(){return rt(Object.create(null))}:a?function(){return rt({__proto__:null})}:function(){return rt({})},has:c?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),d="object"===typeof t&&Object({NODE_ENV:"production",CLIENT:!0,SERVER:!1,DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",WS_BASE_URL:"",STOMP_CLIENT_DEBUG:!1,KEXPLORER_DEBUG:!1,PACKAGE_VERSION:"0.10.5",PACKAGE_BUILD:"",ENGINE_URL:"/modeler",ENGINE_SHARED:"/modeler/shared/",WS_URL:"/modeler/message",WS_SUBSCRIBE:"/message",WS_MESSAGE_DESTINATION:"/klab/message",REST_UPLOAD_MAX_SIZE:"1024MB",SEARCH_TIMEOUT_MS:"4000",VUE_ROUTER_MODE:"hash",VUE_ROUTER_BASE:"",APP_URL:"undefined"})&&"true"===Object({NODE_ENV:"production",CLIENT:!0,SERVER:!1,DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",WS_BASE_URL:"",STOMP_CLIENT_DEBUG:!1,KEXPLORER_DEBUG:!1,PACKAGE_VERSION:"0.10.5",PACKAGE_BUILD:"",ENGINE_URL:"/modeler",ENGINE_SHARED:"/modeler/shared/",WS_URL:"/modeler/message",WS_SUBSCRIBE:"/message",WS_MESSAGE_DESTINATION:"/klab/message",REST_UPLOAD_MAX_SIZE:"1024MB",SEARCH_TIMEOUT_MS:"4000",VUE_ROUTER_MODE:"hash",VUE_ROUTER_BASE:"",APP_URL:"undefined"})["REFLECT_METADATA_USE_MAP_POLYFILL"],h=d||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?nt():Map,f=d||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?it():Set,p=d||"function"!==typeof WeakMap?ot():WeakMap,v=new p;function m(t,e,n,i){if(j(n)){if(!G(t))throw new TypeError;if(!K(e))throw new TypeError;return O(t,e)}if(!G(t))throw new TypeError;if(!z(e))throw new TypeError;if(!z(i)&&!j(i)&&!B(i))throw new TypeError;return B(i)&&(i=void 0),n=$(n),T(t,e,n,i)}function g(t,e){function n(n,i){if(!z(n))throw new TypeError;if(!j(i)&&!W(i))throw new TypeError;N(t,e,n,i)}return n}function y(t,e,n,i){if(!z(n))throw new TypeError;return j(i)||(i=$(i)),N(t,e,n,i)}function b(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=$(n)),M(t,e,n)}function _(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=$(n)),k(t,e,n)}function w(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=$(n)),P(t,e,n)}function S(t,e,n){if(!z(e))throw new TypeError;return j(n)||(n=$(n)),A(t,e,n)}function E(t,e){if(!z(t))throw new TypeError;return j(e)||(e=$(e)),L(t,e)}function x(t,e){if(!z(t))throw new TypeError;return j(e)||(e=$(e)),R(t,e)}function C(t,e,n){if(!z(e))throw new TypeError;j(n)||(n=$(n));var i=I(e,n,!1);if(j(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var o=v.get(e);return o.delete(n),o.size>0||(v.delete(e),!0)}function O(t,e){for(var n=t.length-1;n>=0;--n){var i=t[n],o=i(e);if(!j(o)&&!B(o)){if(!K(o))throw new TypeError;e=o}}return e}function T(t,e,n,i){for(var o=t.length-1;o>=0;--o){var r=t[o],s=r(e,n,i);if(!j(s)&&!B(s)){if(!z(s))throw new TypeError;i=s}}return i}function I(t,e,n){var i=v.get(t);if(j(i)){if(!n)return;i=new h,v.set(t,i)}var o=i.get(e);if(j(o)){if(!n)return;o=new h,i.set(e,o)}return o}function M(t,e,n){var i=k(t,e,n);if(i)return!0;var o=et(e);return!B(o)&&M(t,o,n)}function k(t,e,n){var i=I(e,n,!1);return!j(i)&&q(i.has(t))}function P(t,e,n){var i=k(t,e,n);if(i)return A(t,e,n);var o=et(e);return B(o)?void 0:P(t,o,n)}function A(t,e,n){var i=I(e,n,!1);if(!j(i))return i.get(t)}function N(t,e,n,i){var o=I(n,i,!0);o.set(t,e)}function L(t,e){var n=R(t,e),i=et(t);if(null===i)return n;var o=L(i,e);if(o.length<=0)return n;if(n.length<=0)return o;for(var r=new f,s=[],a=0,c=n;a<c.length;a++){var l=c[a],u=r.has(l);u||(r.add(l),s.push(l))}for(var d=0,h=o;d<h.length;d++){l=h[d],u=r.has(l);u||(r.add(l),s.push(l))}return s}function R(t,e){var n=[],i=I(t,e,!1);if(j(i))return n;var o=i.keys(),r=Z(o),s=0;while(1){var a=J(r);if(!a)return n.length=s,n;var c=Q(a);try{n[s]=c}catch(t){try{tt(r)}finally{throw t}}s++}}function D(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function j(t){return void 0===t}function B(t){return null===t}function F(t){return"symbol"===typeof t}function z(t){return"object"===typeof t?null!==t:"function"===typeof t}function V(t,e){switch(D(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var n=3===e?"string":5===e?"number":"default",i=X(t,o);if(void 0!==i){var r=i.call(t,n);if(z(r))throw new TypeError;return r}return U(t,"default"===n?"number":n)}function U(t,e){if("string"===e){var n=t.toString;if(H(n)){var i=n.call(t);if(!z(i))return i}var o=t.valueOf;if(H(o)){i=o.call(t);if(!z(i))return i}}else{o=t.valueOf;if(H(o)){i=o.call(t);if(!z(i))return i}var r=t.toString;if(H(r)){i=r.call(t);if(!z(i))return i}}throw new TypeError}function q(t){return!!t}function Y(t){return""+t}function $(t){var e=V(t,3);return F(e)?e:Y(e)}function G(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function H(t){return"function"===typeof t}function K(t){return"function"===typeof t}function W(t){switch(D(t)){case 3:return!0;case 4:return!0;default:return!1}}function X(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!H(n))throw new TypeError;return n}}function Z(t){var e=X(t,r);if(!H(e))throw new TypeError;var n=e.call(t);if(!z(n))throw new TypeError;return n}function Q(t){return t.value}function J(t){var e=t.next();return!e.done&&e}function tt(t){var e=t["return"];e&&e.call(t)}function et(t){var e=Object.getPrototypeOf(t);if("function"!==typeof t||t===u)return e;if(e!==u)return e;var n=t.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var o=i.constructor;return"function"!==typeof o?e:o===t?e:o}function nt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var i=this._keys.length,o=n+1;o<i;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,i)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function i(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}function it(){return function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}()}function ot(){var t=16,e=l.create(),i=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=r(t,!1);return void 0!==e&&l.has(e,this._key)},t.prototype.get=function(t){var e=r(t,!1);return void 0!==e?l.get(e,this._key):void 0},t.prototype.set=function(t,e){var n=r(t,!0);return n[this._key]=e,this},t.prototype.delete=function(t){var e=r(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+c()}while(l.has(e,t));return e[t]=!0,t}function r(t,e){if(!n.call(t,i)){if(!e)return;Object.defineProperty(t,i,{value:l.create()})}return t[i]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(t){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function c(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",i=0;i<t;++i){var o=e[i];4!==i&&6!==i&&8!==i||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function rt(t){return t.__=void 0,delete t.__,t}e("decorate",m),e("metadata",g),e("defineMetadata",y),e("hasMetadata",b),e("hasOwnMetadata",_),e("getMetadata",w),e("getOwnMetadata",S),e("getMetadataKeys",E),e("getOwnMetadataKeys",x),e("deleteMetadata",C)})})(n||(n={}))}).call(this,n("4362"),n("c8ba"))},9964:function(t,e,n){"use strict";function i(t){return t.hasFeature(e.expandFeature)&&"expanded"in t}Object.defineProperty(e,"__esModule",{value:!0}),e.expandFeature=Symbol("expandFeature"),e.isExpandable=i},"9ad4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ee16"),o=function(){function t(){}return t.prototype.render=function(t,e){var n=i.default(t.code);return this.correctNamespace(n),n},t.prototype.correctNamespace=function(t){"svg"!==t.sel&&"g"!==t.sel||this.setNamespace(t,"http://www.w3.org/2000/svg")},t.prototype.setNamespace=function(t,e){void 0===t.data&&(t.data={}),t.data.ns=e;var n=t.children;if(void 0!==n)for(var i=0;i<n.length;i++){var o=n[i];"string"!==typeof o&&this.setNamespace(o,e)}},t}();e.PreRenderedView=o},"9d14":function(t,e,n){"use strict";var i=n("a5de"),o=n.n(i);o.a},"9e2e":function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=n("e1c6"),c=n("6923");(function(t){t[t["none"]=0]="none",t[t["error"]=1]="error",t[t["warn"]=2]="warn",t[t["info"]=3]="info",t[t["log"]=4]="log"})(s=e.LogLevel||(e.LogLevel={}));var l=function(){function t(){this.logLevel=s.none}return t.prototype.error=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]},t.prototype.warn=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]},t.prototype.info=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]},t.prototype.log=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]},t=i([a.injectable()],t),t}();e.NullLogger=l;var u=function(){function t(t,e){void 0===t&&(t=s.log),void 0===e&&(e={baseDiv:""}),this.logLevel=t,this.viewOptions=e}return t.prototype.error=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(this.logLevel>=s.error)try{console.error.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.warn=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(this.logLevel>=s.warn)try{console.warn.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.info=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(this.logLevel>=s.info)try{console.info.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.log=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(this.logLevel>=s.log)try{console.log.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.consoleArguments=function(t,e,n){var i;i="object"===typeof t?t.constructor.name:t;var o=new Date;return[o.toLocaleTimeString()+" "+this.viewOptions.baseDiv+" "+i+": "+e].concat(n)},t=i([a.injectable(),r(0,a.inject(c.TYPES.LogLevel)),r(1,a.inject(c.TYPES.ViewerOptions)),o("design:paramtypes",[Number,Object])],t),t}();e.ConsoleLogger=u},"9f62":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=n("1979"),r=n("66d7");function s(){return function(t,e,n){var s=new o.Metadata(i.UNMANAGED_TAG,!0);r.tagParameter(t,e,n,s)}}e.unmanaged=s},"9f8d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("1cd9"),s=n("5d19"),a=new i.ContainerModule(function(t){t(o.TYPES.KeyListener).to(r.ExportSvgKeyListener).inSingletonScope(),t(o.TYPES.HiddenVNodeDecorator).to(r.ExportSvgDecorator).inSingletonScope(),t(o.TYPES.ICommand).toConstructor(r.ExportSvgCommand),t(o.TYPES.SvgExporter).to(s.SvgExporter).inSingletonScope()});e.default=a},a0af:function(t,e,n){"use strict";function i(t){return void 0!==t["position"]}function o(t){return t.hasFeature(e.moveFeature)&&i(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.moveFeature=Symbol("moveFeature"),e.isLocateable=i,e.isMoveable=o},a16f:function(t,e,n){},a1a5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=n("1979"),r=n("66d7");function s(t){return function(e,n,s){var a=new o.Metadata(i.NAME_TAG,t);r.tagParameter(e,n,s,a)}}e.targetName=s},a263:function(t,e,n){"use strict";var i=n("2447"),o=n.n(i);o.a},a27f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("bcc9");e.Draggable=i.Draggable},a2e1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd02"),o=n("3a92"),r=n("66f9"),s=function(){function t(){}return t.prototype.layout=function(t,e){var n=e.getBoundsData(t),i=this.getLayoutOptions(t),o=this.getChildrenSize(t,i,e),r=i.paddingFactor*(i.resizeContainer?o.width:Math.max(0,this.getFixedContainerBounds(t,i,e).width)-i.paddingLeft-i.paddingRight),s=i.paddingFactor*(i.resizeContainer?o.height:Math.max(0,this.getFixedContainerBounds(t,i,e).height)-i.paddingTop-i.paddingBottom);if(r>0&&s>0){var a=this.layoutChildren(t,e,i,r,s);n.bounds=this.getFinalContainerBounds(t,a,i,r,s),n.boundsChanged=!0}},t.prototype.getFinalContainerBounds=function(t,e,n,i,o){return{x:t.bounds.x,y:t.bounds.y,width:i+n.paddingLeft+n.paddingRight,height:o+n.paddingTop+n.paddingBottom}},t.prototype.getFixedContainerBounds=function(t,e,n){var s=t;while(1){if(r.isBoundsAware(s)){var a=s.bounds;if(r.isLayoutContainer(s)&&e.resizeContainer&&n.log.error(s,"Resizable container found while detecting fixed bounds"),i.isValidDimension(a))return a}if(!(s instanceof o.SChildElement))return n.log.error(s,"Cannot detect fixed bounds"),i.EMPTY_BOUNDS;s=s.parent}},t.prototype.layoutChildren=function(t,e,n,o,s){var a=this,c={x:n.paddingLeft+.5*(o-o/n.paddingFactor),y:n.paddingTop+.5*(s-s/n.paddingFactor)};return t.children.forEach(function(t){if(r.isLayoutableChild(t)){var l=e.getBoundsData(t),u=l.bounds,d=a.getChildLayoutOptions(t,n);void 0!==u&&i.isValidDimension(u)&&(c=a.layoutChild(t,l,u,d,n,c,o,s))}}),c},t.prototype.getDx=function(t,e,n){switch(t){case"left":return 0;case"center":return.5*(n-e.width);case"right":return n-e.width}},t.prototype.getDy=function(t,e,n){switch(t){case"top":return 0;case"center":return.5*(n-e.height);case"bottom":return n-e.height}},t.prototype.getChildLayoutOptions=function(t,e){var n=t.layoutOptions;return void 0===n?e:this.spread(e,n)},t.prototype.getLayoutOptions=function(t){var e=this,n=t,i=[];while(void 0!==n){var r=n.layoutOptions;if(void 0!==r&&i.push(r),!(n instanceof o.SChildElement))break;n=n.parent}return i.reverse().reduce(function(t,n){return e.spread(t,n)},this.getDefaultLayoutOptions())},t}();e.AbstractLayout=s},a32f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("77d3"),o=function(){function t(t){this.id=i.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=o},a5b7:function(t,e,n){(function(e,n){t.exports=n()})("undefined"!==typeof self&&self,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({"014b":function(t,e,n){"use strict";var i=n("e53d"),o=n("07e3"),r=n("8e60"),s=n("63b6"),a=n("9138"),c=n("ebfd").KEY,l=n("294c"),u=n("dbdb"),d=n("45f2"),h=n("62a0"),f=n("5168"),p=n("ccb9"),v=n("6718"),m=n("47ee"),g=n("9003"),y=n("e4ae"),b=n("f772"),_=n("36c3"),w=n("1bc3"),S=n("aebd"),E=n("a159"),x=n("0395"),C=n("bf0b"),O=n("d9f6"),T=n("c3a1"),I=C.f,M=O.f,k=x.f,P=i.Symbol,A=i.JSON,N=A&&A.stringify,L="prototype",R=f("_hidden"),D=f("toPrimitive"),j={}.propertyIsEnumerable,B=u("symbol-registry"),F=u("symbols"),z=u("op-symbols"),V=Object[L],U="function"==typeof P,q=i.QObject,Y=!q||!q[L]||!q[L].findChild,$=r&&l(function(){return 7!=E(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=I(V,e);i&&delete V[e],M(t,e,n),i&&t!==V&&M(V,e,i)}:M,G=function(t){var e=F[t]=E(P[L]);return e._k=t,e},H=U&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},K=function(t,e,n){return t===V&&K(z,e,n),y(t),e=w(e,!0),y(n),o(F,e)?(n.enumerable?(o(t,R)&&t[R][e]&&(t[R][e]=!1),n=E(n,{enumerable:S(0,!1)})):(o(t,R)||M(t,R,S(1,{})),t[R][e]=!0),$(t,e,n)):M(t,e,n)},W=function(t,e){y(t);var n,i=m(e=_(e)),o=0,r=i.length;while(r>o)K(t,n=i[o++],e[n]);return t},X=function(t,e){return void 0===e?E(t):W(E(t),e)},Z=function(t){var e=j.call(this,t=w(t,!0));return!(this===V&&o(F,t)&&!o(z,t))&&(!(e||!o(this,t)||!o(F,t)||o(this,R)&&this[R][t])||e)},Q=function(t,e){if(t=_(t),e=w(e,!0),t!==V||!o(F,e)||o(z,e)){var n=I(t,e);return!n||!o(F,e)||o(t,R)&&t[R][e]||(n.enumerable=!0),n}},J=function(t){var e,n=k(_(t)),i=[],r=0;while(n.length>r)o(F,e=n[r++])||e==R||e==c||i.push(e);return i},tt=function(t){var e,n=t===V,i=k(n?z:_(t)),r=[],s=0;while(i.length>s)!o(F,e=i[s++])||n&&!o(V,e)||r.push(F[e]);return r};U||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(z,n),o(this,R)&&o(this[R],t)&&(this[R][t]=!1),$(this,t,S(1,n))};return r&&Y&&$(V,t,{configurable:!0,set:e}),G(t)},a(P[L],"toString",function(){return this._k}),C.f=Q,O.f=K,n("6abf").f=x.f=J,n("355d").f=Z,n("9aa9").f=tt,r&&!n("b8e3")&&a(V,"propertyIsEnumerable",Z,!0),p.f=function(t){return G(f(t))}),s(s.G+s.W+s.F*!U,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)f(et[nt++]);for(var it=T(f.store),ot=0;it.length>ot;)v(it[ot++]);s(s.S+s.F*!U,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=P(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),s(s.S+s.F*!U,"Object",{create:X,defineProperty:K,defineProperties:W,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:tt}),A&&s(s.S+s.F*(!U||l(function(){var t=P();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){var e,n,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(n=e=i[1],(b(e)||void 0!==t)&&!H(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!H(e))return e}),i[1]=e,N.apply(A,i)}}),P[L][D]||n("35e8")(P[L],D,P[L].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},"01f9":function(t,e,n){"use strict";var i=n("2d00"),o=n("5ca1"),r=n("2aba"),s=n("32e9"),a=n("84f2"),c=n("41a0"),l=n("7f20"),u=n("38fd"),d=n("2b4c")("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",p="keys",v="values",m=function(){return this};t.exports=function(t,e,n,g,y,b,_){c(n,e,g);var w,S,E,x=function(t){if(!h&&t in I)return I[t];switch(t){case p:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},C=e+" Iterator",O=y==v,T=!1,I=t.prototype,M=I[d]||I[f]||y&&I[y],k=M||x(y),P=y?O?x("entries"):k:void 0,A="Array"==e&&I.entries||M;if(A&&(E=u(A.call(new t)),E!==Object.prototype&&E.next&&(l(E,C,!0),i||"function"==typeof E[d]||s(E,d,m))),O&&M&&M.name!==v&&(T=!0,k=function(){return M.call(this)}),i&&!_||!h&&!T&&I[d]||s(I,d,k),a[e]=k,a[C]=m,y)if(w={values:O?k:x(v),keys:b?k:x(p),entries:P},_)for(S in w)S in I||r(I,S,w[S]);else o(o.P+o.F*(h||T),e,w);return w}},"0395":function(t,e,n){var i=n("36c3"),o=n("6abf").f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(t){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?a(t):o(i(t))}},"07e3":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"09fa":function(t,e,n){var i=n("4588"),o=n("9def");t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=o(e);if(e!==n)throw RangeError("Wrong length!");return n}},"0a49":function(t,e,n){var i=n("9b43"),o=n("626a"),r=n("4bf8"),s=n("9def"),a=n("cd1c");t.exports=function(t,e){var n=1==t,c=2==t,l=3==t,u=4==t,d=6==t,h=5==t||d,f=e||a;return function(e,a,p){for(var v,m,g=r(e),y=o(g),b=i(a,p,3),_=s(y.length),w=0,S=n?f(e,_):c?f(e,0):void 0;_>w;w++)if((h||w in y)&&(v=y[w],m=b(v,w,g),t))if(n)S[w]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:S.push(v)}else if(u)return!1;return d?-1:l||u?u:S}}},"0bfb":function(t,e,n){"use strict";var i=n("cb7c");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,n){var i=n("ce10"),o=n("e11e");t.exports=Object.keys||function(t){return i(t,o)}},"0f88":function(t,e,n){var i,o=n("7726"),r=n("32e9"),s=n("ca5a"),a=s("typed_array"),c=s("view"),l=!(!o.ArrayBuffer||!o.DataView),u=l,d=0,h=9,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");while(d<h)(i=o[f[d++]])?(r(i.prototype,a,!0),r(i.prototype,c,!0)):u=!1;t.exports={ABV:l,CONSTR:u,TYPED:a,VIEW:c}},"0fc9":function(t,e,n){var i=n("3a38"),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"11e9":function(t,e,n){var i=n("52a7"),o=n("4630"),r=n("6821"),s=n("6a99"),a=n("69a8"),c=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=r(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(a(t,e))return o(!i.f.call(t,e),t[e])}},"13c8":function(t,e,n){var i=n("c3a1"),o=n("36c3"),r=n("355d").f;t.exports=function(t){return function(e){var n,s=o(e),a=i(s),c=a.length,l=0,u=[];while(c>l)r.call(s,n=a[l++])&&u.push(t?[n,s[n]]:s[n]);return u}}},1495:function(t,e,n){var i=n("86cc"),o=n("cb7c"),r=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){o(t);var n,s=r(e),a=s.length,c=0;while(a>c)i.f(t,n=s[c++],e[n]);return t}},1654:function(t,e,n){"use strict";var i=n("71c1")(!0);n("30f1")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"1af6":function(t,e,n){var i=n("63b6");i(i.S,"Array",{isArray:n("9003")})},"1bc3":function(t,e,n){var i=n("f772");t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},"1ec9":function(t,e,n){var i=n("f772"),o=n("e53d").document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},"20fd":function(t,e,n){"use strict";var i=n("d9f6"),o=n("aebd");t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},"214f":function(t,e,n){"use strict";var i=n("32e9"),o=n("2aba"),r=n("79e5"),s=n("be13"),a=n("2b4c");t.exports=function(t,e,n){var c=a(t),l=n(s,c,""[t]),u=l[0],d=l[1];r(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(o(String.prototype,t,u),i(RegExp.prototype,c,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)}))}},"230e":function(t,e,n){var i=n("d3f4"),o=n("7726").document,r=i(o)&&i(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},"23c6":function(t,e,n){var i=n("2d95"),o=n("2b4c")("toStringTag"),r="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),o))?n:r?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},"241e":function(t,e,n){var i=n("25eb");t.exports=function(t){return Object(i(t))}},"25eb":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"27ee":function(t,e,n){var i=n("23c6"),o=n("2b4c")("iterator"),r=n("84f2");t.exports=n("8378").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[i(t)]}},"28a5":function(t,e,n){n("214f")("split",2,function(t,e,i){"use strict";var o=n("aae3"),r=i,s=[].push,a="split",c="length",l="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[c]||2!="ab"[a](/(?:ab)*/)[c]||4!="."[a](/(.?)(.?)/)[c]||"."[a](/()()/)[c]>1||""[a](/.?/)[c]){var u=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!o(t))return r.call(n,t,e);var i,a,d,h,f,p=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,g=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,v+"g");u||(i=new RegExp("^"+y.source+"$(?!\\s)",v));while(a=y.exec(n)){if(d=a.index+a[0][c],d>m&&(p.push(n.slice(m,a.index)),!u&&a[c]>1&&a[0].replace(i,function(){for(f=1;f<arguments[c]-2;f++)void 0===arguments[f]&&(a[f]=void 0)}),a[c]>1&&a.index<n[c]&&s.apply(p,a.slice(1)),h=a[0][c],m=d,p[c]>=g))break;y[l]===a.index&&y[l]++}return m===n[c]?!h&&y.test("")||p.push(""):p.push(n.slice(m)),p[c]>g?p.slice(0,g):p}}else"0"[a](void 0,0)[c]&&(i=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(n,o){var r=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,r,o):i.call(String(r),n,o)},i]})},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"2aba":function(t,e,n){var i=n("7726"),o=n("32e9"),r=n("69a8"),s=n("ca5a")("src"),a="toString",c=Function[a],l=(""+c).split(a);n("8378").inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,a){var c="function"==typeof n;c&&(r(n,"name")||o(n,"name",e)),t[e]!==n&&(c&&(r(n,s)||o(n,s,t[e]?""+t[e]:l.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||c.call(this)})},"2aeb":function(t,e,n){var i=n("cb7c"),o=n("1495"),r=n("e11e"),s=n("613b")("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=n("230e")("iframe"),i=r.length,o="<",s=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),l=t.F;while(i--)delete l[c][r[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[c]=i(t),n=new a,a[c]=null,n[s]=t):n=l(),void 0===e?n:o(n,e)}},"2b4c":function(t,e,n){var i=n("5537")("wks"),o=n("ca5a"),r=n("7726").Symbol,s="function"==typeof r,a=t.exports=function(t){return i[t]||(i[t]=s&&r[t]||(s?r:o)("Symbol."+t))};a.store=i},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"30f1":function(t,e,n){"use strict";var i=n("b8e3"),o=n("63b6"),r=n("9138"),s=n("35e8"),a=n("481b"),c=n("8f60"),l=n("45f2"),u=n("53e2"),d=n("5168")("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",p="keys",v="values",m=function(){return this};t.exports=function(t,e,n,g,y,b,_){c(n,e,g);var w,S,E,x=function(t){if(!h&&t in I)return I[t];switch(t){case p:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},C=e+" Iterator",O=y==v,T=!1,I=t.prototype,M=I[d]||I[f]||y&&I[y],k=M||x(y),P=y?O?x("entries"):k:void 0,A="Array"==e&&I.entries||M;if(A&&(E=u(A.call(new t)),E!==Object.prototype&&E.next&&(l(E,C,!0),i||"function"==typeof E[d]||s(E,d,m))),O&&M&&M.name!==v&&(T=!0,k=function(){return M.call(this)}),i&&!_||!h&&!T&&I[d]||s(I,d,k),a[e]=k,a[C]=m,y)if(w={values:O?k:x(v),keys:b?k:x(p),entries:P},_)for(S in w)S in I||r(I,S,w[S]);else o(o.P+o.F*(h||T),e,w);return w}},"32e9":function(t,e,n){var i=n("86cc"),o=n("4630");t.exports=n("9e1e")?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"32fc":function(t,e,n){var i=n("e53d").document;t.exports=i&&i.documentElement},"335c":function(t,e,n){var i=n("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},"33a4":function(t,e,n){var i=n("84f2"),o=n("2b4c")("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},"33cb":function(t,e,n){},"34ef":function(t,e,n){n("ec30")("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},"355d":function(t,e){e.f={}.propertyIsEnumerable},"35e8":function(t,e,n){var i=n("d9f6"),o=n("aebd");t.exports=n("8e60")?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},"36bd":function(t,e,n){"use strict";var i=n("4bf8"),o=n("77f1"),r=n("9def");t.exports=function(t){var e=i(this),n=r(e.length),s=arguments.length,a=o(s>1?arguments[1]:void 0,n),c=s>2?arguments[2]:void 0,l=void 0===c?n:o(c,n);while(l>a)e[a++]=t;return e}},"36c3":function(t,e,n){var i=n("335c"),o=n("25eb");t.exports=function(t){return i(o(t))}},3702:function(t,e,n){var i=n("481b"),o=n("5168")("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[o]===t)}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"386b":function(t,e,n){var i=n("5ca1"),o=n("79e5"),r=n("be13"),s=/"/g,a=function(t,e,n,i){var o=String(r(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+o+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),i(i.P+i.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},"38fd":function(t,e,n){var i=n("69a8"),o=n("4bf8"),r=n("613b")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},"3a38":function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},"3d11":function(t,e,n){"use strict";var i=n("33cb"),o=n.n(i);o.a},"40c3":function(t,e,n){var i=n("6b4c"),o=n("5168")("toStringTag"),r="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),o))?n:r?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},"41a0":function(t,e,n){"use strict";var i=n("2aeb"),o=n("4630"),r=n("7f20"),s={};n("32e9")(s,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:o(1,n)}),r(t,e+" Iterator")}},4588:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},"45f2":function(t,e,n){var i=n("d9f6").f,o=n("07e3"),r=n("5168")("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"47ee":function(t,e,n){var i=n("c3a1"),o=n("9aa9"),r=n("355d");t.exports=function(t){var e=i(t),n=o.f;if(n){var s,a=n(t),c=r.f,l=0;while(a.length>l)c.call(t,s=a[l++])&&e.push(s)}return e}},"481b":function(t,e){t.exports={}},"4bf8":function(t,e,n){var i=n("be13");t.exports=function(t){return Object(i(t))}},"4ee1":function(t,e,n){var i=n("5168")("iterator"),o=!1;try{var r=[7][i]();r["return"]=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],s=r[i]();s.next=function(){return{done:n=!0}},r[i]=function(){return s},t(r)}catch(t){}return n}},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5168:function(t,e,n){var i=n("dbdb")("wks"),o=n("62a0"),r=n("e53d").Symbol,s="function"==typeof r,a=t.exports=function(t){return i[t]||(i[t]=s&&r[t]||(s?r:o)("Symbol."+t))};a.store=i},5176:function(t,e,n){t.exports=n("51b6")},"51b6":function(t,e,n){n("a3c3"),t.exports=n("584a").Object.assign},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"53e2":function(t,e,n){var i=n("07e3"),o=n("241e"),r=n("5559")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},"549b":function(t,e,n){"use strict";var i=n("d864"),o=n("63b6"),r=n("241e"),s=n("b0dc"),a=n("3702"),c=n("b447"),l=n("20fd"),u=n("7cd6");o(o.S+o.F*!n("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,o,d,h=r(t),f="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,g=0,y=u(h);if(m&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&a(y))for(e=c(h.length),n=new f(e);e>g;g++)l(n,g,m?v(h[g],g):h[g]);else for(d=y.call(h),n=new f;!(o=d.next()).done;g++)l(n,g,m?s(d,v,[o.value,g],!0):o.value);return n.length=g,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},5537:function(t,e,n){var i=n("8378"),o=n("7726"),r="__core-js_shared__",s=o[r]||(o[r]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("2d00")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},5559:function(t,e,n){var i=n("dbdb")("keys"),o=n("62a0");t.exports=function(t){return i[t]||(i[t]=o(t))}},"584a":function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},"59a0":function(t,e,n){"use strict";var i=n("9257"),o=n.n(i);o.a},"5b4e":function(t,e,n){var i=n("36c3"),o=n("b447"),r=n("0fc9");t.exports=function(t){return function(e,n,s){var a,c=i(e),l=o(c.length),u=r(s,l);if(t&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},"5ca1":function(t,e,n){var i=n("7726"),o=n("8378"),r=n("32e9"),s=n("2aba"),a=n("9b43"),c="prototype",l=function(t,e,n){var u,d,h,f,p=t&l.F,v=t&l.G,m=t&l.S,g=t&l.P,y=t&l.B,b=v?i:m?i[e]||(i[e]={}):(i[e]||{})[c],_=v?o:o[e]||(o[e]={}),w=_[c]||(_[c]={});for(u in v&&(n=e),n)d=!p&&b&&void 0!==b[u],h=(d?b:n)[u],f=y&&d?a(h,i):g&&"function"==typeof h?a(Function.call,h):h,b&&s(b,u,h,t&l.U),_[u]!=h&&r(_,u,f),g&&w[u]!=h&&(w[u]=h)};i.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"5cc5":function(t,e,n){var i=n("2b4c")("iterator"),o=!1;try{var r=[7][i]();r["return"]=function(){o=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],s=r[i]();s.next=function(){return{done:n=!0}},r[i]=function(){return s},t(r)}catch(t){}return n}},"5d58":function(t,e,n){t.exports=n("d8d6")},"5d6b":function(t,e,n){var i=n("e53d").parseInt,o=n("a1ce").trim,r=n("e692"),s=/^[-+]?0[xX]/;t.exports=8!==i(r+"08")||22!==i(r+"0x16")?function(t,e){var n=o(String(t),3);return i(n,e>>>0||(s.test(n)?16:10))}:i},"5d73":function(t,e,n){t.exports=n("469f")},"613b":function(t,e,n){var i=n("5537")("keys"),o=n("ca5a");t.exports=function(t){return i[t]||(i[t]=o(t))}},"626a":function(t,e,n){var i=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},"62a0":function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},"63b6":function(t,e,n){var i=n("e53d"),o=n("584a"),r=n("d864"),s=n("35e8"),a=n("07e3"),c="prototype",l=function(t,e,n){var u,d,h,f=t&l.F,p=t&l.G,v=t&l.S,m=t&l.P,g=t&l.B,y=t&l.W,b=p?o:o[e]||(o[e]={}),_=b[c],w=p?i:v?i[e]:(i[e]||{})[c];for(u in p&&(n=e),n)d=!f&&w&&void 0!==w[u],d&&a(b,u)||(h=d?w[u]:n[u],b[u]=p&&"function"!=typeof w[u]?n[u]:g&&d?r(h,i):y&&w[u]==h?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[c]=t[c],e}(h):m&&"function"==typeof h?r(Function.call,h):h,m&&((b.virtual||(b.virtual={}))[u]=h,t&l.R&&_&&!_[u]&&s(_,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},6718:function(t,e,n){var i=n("e53d"),o=n("584a"),r=n("b8e3"),s=n("ccb9"),a=n("d9f6").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},"67bb":function(t,e,n){t.exports=n("f921")},6821:function(t,e,n){var i=n("626a"),o=n("be13");t.exports=function(t){return i(o(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"69d3":function(t,e,n){n("6718")("asyncIterator")},"6a99":function(t,e,n){var i=n("d3f4");t.exports=function(t,e){if(!i(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!i(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!i(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},"6abf":function(t,e,n){var i=n("e6f3"),o=n("1691").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},"6b4c":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"6b54":function(t,e,n){"use strict";n("3846");var i=n("cb7c"),o=n("0bfb"),r=n("9e1e"),s="toString",a=/./[s],c=function(t){n("2aba")(RegExp.prototype,s,t,!0)};n("79e5")(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?c(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?o.call(t):void 0)}):a.name!=s&&c(function(){return a.call(this)})},"6c1c":function(t,e,n){n("c367");for(var i=n("e53d"),o=n("35e8"),r=n("481b"),s=n("5168")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var l=a[c],u=i[l],d=u&&u.prototype;d&&!d[s]&&o(d,s,l),r[l]=r.Array}},"6c7b":function(t,e,n){var i=n("5ca1");i(i.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},"71c1":function(t,e,n){var i=n("3a38"),o=n("25eb");t.exports=function(t){return function(e,n){var r,s,a=String(o(e)),c=i(n),l=a.length;return c<0||c>=l?t?"":void 0:(r=a.charCodeAt(c),r<55296||r>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):r:t?a.slice(c,c+2):s-56320+(r-55296<<10)+65536)}}},7445:function(t,e,n){var i=n("63b6"),o=n("5d6b");i(i.G+i.F*(parseInt!=o),{parseInt:o})},"765d":function(t,e,n){n("6718")("observable")},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"774e":function(t,e,n){t.exports=n("d2d5")},"77f1":function(t,e,n){var i=n("4588"),o=Math.max,r=Math.min;t.exports=function(t,e){return t=i(t),t<0?o(t+e,0):r(t,e)}},"794b":function(t,e,n){t.exports=!n("8e60")&&!n("294c")(function(){return 7!=Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"7a56":function(t,e,n){"use strict";var i=n("7726"),o=n("86cc"),r=n("9e1e"),s=n("2b4c")("species");t.exports=function(t){var e=i[t];r&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},"7cd6":function(t,e,n){var i=n("40c3"),o=n("5168")("iterator"),r=n("481b");t.exports=n("584a").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||r[i(t)]}},"7d6d":function(t,e,n){var i=n("63b6"),o=n("13c8")(!1);i(i.S,"Object",{values:function(t){return o(t)}})},"7d7b":function(t,e,n){var i=n("e4ae"),o=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},"7e90":function(t,e,n){var i=n("d9f6"),o=n("e4ae"),r=n("c3a1");t.exports=n("8e60")?Object.defineProperties:function(t,e){o(t);var n,s=r(e),a=s.length,c=0;while(a>c)i.f(t,n=s[c++],e[n]);return t}},"7f20":function(t,e,n){var i=n("86cc").f,o=n("69a8"),r=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},"7f7f":function(t,e,n){var i=n("86cc").f,o=Function.prototype,r=/^\s*function ([^ (]*)/,s="name";s in o||n("9e1e")&&i(o,s,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},8378:function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},8436:function(t,e){t.exports=function(){}},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,n){var i=n("cb7c"),o=n("c69a"),r=n("6a99"),s=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"8e60":function(t,e,n){t.exports=!n("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"8f60":function(t,e,n){"use strict";var i=n("a159"),o=n("aebd"),r=n("45f2"),s={};n("35e8")(s,n("5168")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:o(1,n)}),r(t,e+" Iterator")}},9003:function(t,e,n){var i=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==i(t)}},9093:function(t,e,n){var i=n("ce10"),o=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},9138:function(t,e,n){t.exports=n("35e8")},9257:function(t,e,n){},9306:function(t,e,n){"use strict";var i=n("c3a1"),o=n("9aa9"),r=n("355d"),s=n("241e"),a=n("335c"),c=Object.assign;t.exports=!c||n("294c")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){var n=s(t),c=arguments.length,l=1,u=o.f,d=r.f;while(c>l){var h,f=a(arguments[l++]),p=u?i(f).concat(u(f)):i(f),v=p.length,m=0;while(v>m)d.call(f,h=p[m++])&&(n[h]=f[h])}return n}:c},"95d5":function(t,e,n){var i=n("40c3"),o=n("5168")("iterator"),r=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||r.hasOwnProperty(i(e))}},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},"9b43":function(t,e,n){var i=n("d8e8");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var i=n("2b4c")("unscopables"),o=Array.prototype;void 0==o[i]&&n("32e9")(o,i,{}),t.exports=function(t){o[i][t]=!0}},"9def":function(t,e,n){var i=n("4588"),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},"9e1c":function(t,e,n){n("7d6d"),t.exports=n("584a").Object.values},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a159:function(t,e,n){var i=n("e4ae"),o=n("7e90"),r=n("1691"),s=n("5559")("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=n("1ec9")("iframe"),i=r.length,o="<",s=">";e.style.display="none",n("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),l=t.F;while(i--)delete l[c][r[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(a[c]=i(t),n=new a,a[c]=null,n[s]=t):n=l(),void 0===e?n:o(n,e)}},a1ce:function(t,e,n){var i=n("63b6"),o=n("25eb"),r=n("294c"),s=n("e692"),a="["+s+"]",c="​",l=RegExp("^"+a+a+"*"),u=RegExp(a+a+"*$"),d=function(t,e,n){var o={},a=r(function(){return!!s[t]()||c[t]()!=c}),l=o[t]=a?e(h):s[t];n&&(o[n]=l),i(i.P+i.F*a,"String",o)},h=d.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},a3c3:function(t,e,n){var i=n("63b6");i(i.S+i.F,"Object",{assign:n("9306")})},a481:function(t,e,n){n("214f")("replace",2,function(t,e,n){return[function(i,o){"use strict";var r=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,r,o):n.call(String(r),i,o)},n]})},a745:function(t,e,n){t.exports=n("f410")},aae3:function(t,e,n){var i=n("d3f4"),o=n("2d95"),r=n("2b4c")("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==o(t))}},ac6a:function(t,e,n){for(var i=n("cadf"),o=n("0d58"),r=n("2aba"),s=n("7726"),a=n("32e9"),c=n("84f2"),l=n("2b4c"),u=l("iterator"),d=l("toStringTag"),h=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=o(f),v=0;v<p.length;v++){var m,g=p[v],y=f[g],b=s[g],_=b&&b.prototype;if(_&&(_[u]||a(_,u,h),_[d]||a(_,d,g),c[g]=h,y))for(m in i)_[m]||r(_,m,i[m],!0)}},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},b0dc:function(t,e,n){var i=n("e4ae");t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){var r=t["return"];throw void 0!==r&&i(r.call(t)),e}}},b447:function(t,e,n){var i=n("3a38"),o=Math.min;t.exports=function(t){return t>0?o(i(t),9007199254740991):0}},b54a:function(t,e,n){"use strict";n("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},b8e3:function(t,e){t.exports=!0},b9e9:function(t,e,n){n("7445"),t.exports=n("584a").parseInt},ba92:function(t,e,n){"use strict";var i=n("4bf8"),o=n("77f1"),r=n("9def");t.exports=[].copyWithin||function(t,e){var n=i(this),s=r(n.length),a=o(t,s),c=o(e,s),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?s:o(l,s))-c,s-a),d=1;c<a&&a<c+u&&(d=-1,c+=u-1,a+=u-1);while(u-- >0)c in n?n[a]=n[c]:delete n[a],a+=d,c+=d;return n}},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},bf0b:function(t,e,n){var i=n("355d"),o=n("aebd"),r=n("36c3"),s=n("1bc3"),a=n("07e3"),c=n("794b"),l=Object.getOwnPropertyDescriptor;e.f=n("8e60")?l:function(t,e){if(t=r(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(a(t,e))return o(!i.f.call(t,e),t[e])}},c207:function(t,e){},c366:function(t,e,n){var i=n("6821"),o=n("9def"),r=n("77f1");t.exports=function(t){return function(e,n,s){var a,c=i(e),l=o(c.length),u=r(s,l);if(t&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},c367:function(t,e,n){"use strict";var i=n("8436"),o=n("50ed"),r=n("481b"),s=n("36c3");t.exports=n("30f1")(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},c3a1:function(t,e,n){var i=n("e6f3"),o=n("1691");t.exports=Object.keys||function(t){return i(t,o)}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c8bb:function(t,e,n){t.exports=n("54a1")},ca5a:function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},cadf:function(t,e,n){"use strict";var i=n("9c6c"),o=n("d53b"),r=n("84f2"),s=n("6821");t.exports=n("01f9")(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},cb7c:function(t,e,n){var i=n("d3f4");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},ccb9:function(t,e,n){e.f=n("5168")},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},ce10:function(t,e,n){var i=n("69a8"),o=n("6821"),r=n("c366")(!1),s=n("613b")("IE_PROTO");t.exports=function(t,e){var n,a=o(t),c=0,l=[];for(n in a)n!=s&&i(a,n)&&l.push(n);while(e.length>c)i(a,n=e[c++])&&(~r(l,n)||l.push(n));return l}},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d864:function(t,e,n){var i=n("79aa");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}}},d8d6:function(t,e,n){n("1654"),n("6c1c"),t.exports=n("ccb9").f("iterator")},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},d9f6:function(t,e,n){var i=n("e4ae"),o=n("794b"),r=n("1bc3"),s=Object.defineProperty;e.f=n("8e60")?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),o)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},db0c:function(t,e,n){t.exports=n("9e1c")},dbdb:function(t,e,n){var i=n("584a"),o=n("e53d"),r="__core-js_shared__",s=o[r]||(o[r]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("b8e3")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},dcbc:function(t,e,n){var i=n("2aba");t.exports=function(t,e,n){for(var o in e)i(t,o,e[o],n);return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e4ae:function(t,e,n){var i=n("f772");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e6f3:function(t,e,n){var i=n("07e3"),o=n("36c3"),r=n("5b4e")(!1),s=n("5559")("IE_PROTO");t.exports=function(t,e){var n,a=o(t),c=0,l=[];for(n in a)n!=s&&i(a,n)&&l.push(n);while(e.length>c)i(a,n=e[c++])&&(~r(l,n)||l.push(n));return l}},e814:function(t,e,n){t.exports=n("b9e9")},e853:function(t,e,n){var i=n("d3f4"),o=n("1169"),r=n("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),i(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},ebd6:function(t,e,n){var i=n("cb7c"),o=n("d8e8"),r=n("2b4c")("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[r])?e:o(n)}},ebfd:function(t,e,n){var i=n("62a0")("meta"),o=n("f772"),r=n("07e3"),s=n("d9f6").f,a=0,c=Object.isExtensible||function(){return!0},l=!n("294c")(function(){return c(Object.preventExtensions({}))}),u=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},d=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[i].i},h=function(t,e){if(!r(t,i)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[i].w},f=function(t){return l&&p.NEED&&c(t)&&!r(t,i)&&u(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:d,getWeak:h,onFreeze:f}},ec30:function(t,e,n){"use strict";if(n("9e1e")){var i=n("2d00"),o=n("7726"),r=n("79e5"),s=n("5ca1"),a=n("0f88"),c=n("ed0b"),l=n("9b43"),u=n("f605"),d=n("4630"),h=n("32e9"),f=n("dcbc"),p=n("4588"),v=n("9def"),m=n("09fa"),g=n("77f1"),y=n("6a99"),b=n("69a8"),_=n("23c6"),w=n("d3f4"),S=n("4bf8"),E=n("33a4"),x=n("2aeb"),C=n("38fd"),O=n("9093").f,T=n("27ee"),I=n("ca5a"),M=n("2b4c"),k=n("0a49"),P=n("c366"),A=n("ebd6"),N=n("cadf"),L=n("84f2"),R=n("5cc5"),D=n("7a56"),j=n("36bd"),B=n("ba92"),F=n("86cc"),z=n("11e9"),V=F.f,U=z.f,q=o.RangeError,Y=o.TypeError,$=o.Uint8Array,G="ArrayBuffer",H="Shared"+G,K="BYTES_PER_ELEMENT",W="prototype",X=Array[W],Z=c.ArrayBuffer,Q=c.DataView,J=k(0),tt=k(2),et=k(3),nt=k(4),it=k(5),ot=k(6),rt=P(!0),st=P(!1),at=N.values,ct=N.keys,lt=N.entries,ut=X.lastIndexOf,dt=X.reduce,ht=X.reduceRight,ft=X.join,pt=X.sort,vt=X.slice,mt=X.toString,gt=X.toLocaleString,yt=M("iterator"),bt=M("toStringTag"),_t=I("typed_constructor"),wt=I("def_constructor"),St=a.CONSTR,Et=a.TYPED,xt=a.VIEW,Ct="Wrong length!",Ot=k(1,function(t,e){return Pt(A(t,t[wt]),e)}),Tt=r(function(){return 1===new $(new Uint16Array([1]).buffer)[0]}),It=!!$&&!!$[W].set&&r(function(){new $(1).set({})}),Mt=function(t,e){var n=p(t);if(n<0||n%e)throw q("Wrong offset!");return n},kt=function(t){if(w(t)&&Et in t)return t;throw Y(t+" is not a typed array!")},Pt=function(t,e){if(!(w(t)&&_t in t))throw Y("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Nt(A(t,t[wt]),e)},Nt=function(t,e){var n=0,i=e.length,o=Pt(t,i);while(i>n)o[n]=e[n++];return o},Lt=function(t,e,n){V(t,e,{get:function(){return this._d[n]}})},Rt=function(t){var e,n,i,o,r,s,a=S(t),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=T(a);if(void 0!=h&&!E(h)){for(s=h.call(a),i=[],e=0;!(r=s.next()).done;e++)i.push(r.value);a=i}for(d&&c>2&&(u=l(u,arguments[2],2)),e=0,n=v(a.length),o=Pt(this,n);n>e;e++)o[e]=d?u(a[e],e):a[e];return o},Dt=function(){var t=0,e=arguments.length,n=Pt(this,e);while(e>t)n[t]=arguments[t++];return n},jt=!!$&&r(function(){gt.call(new $(1))}),Bt=function(){return gt.apply(jt?vt.call(kt(this)):kt(this),arguments)},Ft={copyWithin:function(t,e){return B.call(kt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return j.apply(kt(this),arguments)},filter:function(t){return At(this,tt(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return ot(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){J(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return rt(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ft.apply(kt(this),arguments)},lastIndexOf:function(t){return ut.apply(kt(this),arguments)},map:function(t){return Ot(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return dt.apply(kt(this),arguments)},reduceRight:function(t){return ht.apply(kt(this),arguments)},reverse:function(){var t,e=this,n=kt(e).length,i=Math.floor(n/2),o=0;while(o<i)t=e[o],e[o++]=e[--n],e[n]=t;return e},some:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(kt(this),t)},subarray:function(t,e){var n=kt(this),i=n.length,o=g(t,i);return new(A(n,n[wt]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,v((void 0===e?i:g(e,i))-o))}},zt=function(t,e){return At(this,vt.call(kt(this),t,e))},Vt=function(t){kt(this);var e=Mt(arguments[1],1),n=this.length,i=S(t),o=v(i.length),r=0;if(o+e>n)throw q(Ct);while(r<o)this[e+r]=i[r++]},Ut={entries:function(){return lt.call(kt(this))},keys:function(){return ct.call(kt(this))},values:function(){return at.call(kt(this))}},qt=function(t,e){return w(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Yt=function(t,e){return qt(t,e=y(e,!0))?d(2,t[e]):U(t,e)},$t=function(t,e,n){return!(qt(t,e=y(e,!0))&&w(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?V(t,e,n):(t[e]=n.value,t)};St||(z.f=Yt,F.f=$t),s(s.S+s.F*!St,"Object",{getOwnPropertyDescriptor:Yt,defineProperty:$t}),r(function(){mt.call({})})&&(mt=gt=function(){return ft.call(this)});var Gt=f({},Ft);f(Gt,Ut),h(Gt,yt,Ut.values),f(Gt,{slice:zt,set:Vt,constructor:function(){},toString:mt,toLocaleString:Bt}),Lt(Gt,"buffer","b"),Lt(Gt,"byteOffset","o"),Lt(Gt,"byteLength","l"),Lt(Gt,"length","e"),V(Gt,bt,{get:function(){return this[Et]}}),t.exports=function(t,e,n,c){c=!!c;var l=t+(c?"Clamped":"")+"Array",d="get"+t,f="set"+t,p=o[l],g=p||{},y=p&&C(p),b=!p||!a.ABV,S={},E=p&&p[W],T=function(t,n){var i=t._d;return i.v[d](n*e+i.o,Tt)},I=function(t,n,i){var o=t._d;c&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),o.v[f](n*e+o.o,i,Tt)},M=function(t,e){V(t,e,{get:function(){return T(this,e)},set:function(t){return I(this,e,t)},enumerable:!0})};b?(p=n(function(t,n,i,o){u(t,p,l,"_d");var r,s,a,c,d=0,f=0;if(w(n)){if(!(n instanceof Z||(c=_(n))==G||c==H))return Et in n?Nt(p,n):Rt.call(p,n);r=n,f=Mt(i,e);var g=n.byteLength;if(void 0===o){if(g%e)throw q(Ct);if(s=g-f,s<0)throw q(Ct)}else if(s=v(o)*e,s+f>g)throw q(Ct);a=s/e}else a=m(n),s=a*e,r=new Z(s);h(t,"_d",{b:r,o:f,l:s,e:a,v:new Q(r)});while(d<a)M(t,d++)}),E=p[W]=x(Gt),h(E,"constructor",p)):r(function(){p(1)})&&r(function(){new p(-1)})&&R(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=n(function(t,n,i,o){var r;return u(t,p,l),w(n)?n instanceof Z||(r=_(n))==G||r==H?void 0!==o?new g(n,Mt(i,e),o):void 0!==i?new g(n,Mt(i,e)):new g(n):Et in n?Nt(p,n):Rt.call(p,n):new g(m(n))}),J(y!==Function.prototype?O(g).concat(O(y)):O(g),function(t){t in p||h(p,t,g[t])}),p[W]=E,i||(E.constructor=p));var k=E[yt],P=!!k&&("values"==k.name||void 0==k.name),A=Ut.values;h(p,_t,!0),h(E,Et,l),h(E,xt,!0),h(E,wt,p),(c?new p(1)[bt]==l:bt in E)||V(E,bt,{get:function(){return l}}),S[l]=p,s(s.G+s.W+s.F*(p!=g),S),s(s.S,l,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*r(function(){g.of.call(p,1)}),l,{from:Rt,of:Dt}),K in E||h(E,K,e),s(s.P,l,Ft),D(l),s(s.P+s.F*It,l,{set:Vt}),s(s.P+s.F*!P,l,Ut),i||E.toString==mt||(E.toString=mt),s(s.P+s.F*r(function(){new p(1).slice()}),l,{slice:zt}),s(s.P+s.F*(r(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!r(function(){E.toLocaleString.call([1,2])})),l,{toLocaleString:Bt}),L[l]=P?k:A,i||P||h(E,yt,A)}}else t.exports=function(){}},ed0b:function(t,e,n){"use strict";var i=n("7726"),o=n("9e1e"),r=n("2d00"),s=n("0f88"),a=n("32e9"),c=n("dcbc"),l=n("79e5"),u=n("f605"),d=n("4588"),h=n("9def"),f=n("09fa"),p=n("9093").f,v=n("86cc").f,m=n("36bd"),g=n("7f20"),y="ArrayBuffer",b="DataView",_="prototype",w="Wrong length!",S="Wrong index!",E=i[y],x=i[b],C=i.Math,O=i.RangeError,T=i.Infinity,I=E,M=C.abs,k=C.pow,P=C.floor,A=C.log,N=C.LN2,L="buffer",R="byteLength",D="byteOffset",j=o?"_b":L,B=o?"_l":R,F=o?"_o":D;function z(t,e,n){var i,o,r,s=new Array(n),a=8*n-e-1,c=(1<<a)-1,l=c>>1,u=23===e?k(2,-24)-k(2,-77):0,d=0,h=t<0||0===t&&1/t<0?1:0;for(t=M(t),t!=t||t===T?(o=t!=t?1:0,i=c):(i=P(A(t)/N),t*(r=k(2,-i))<1&&(i--,r*=2),t+=i+l>=1?u/r:u*k(2,1-l),t*r>=2&&(i++,r/=2),i+l>=c?(o=0,i=c):i+l>=1?(o=(t*r-1)*k(2,e),i+=l):(o=t*k(2,l-1)*k(2,e),i=0));e>=8;s[d++]=255&o,o/=256,e-=8);for(i=i<<e|o,a+=e;a>0;s[d++]=255&i,i/=256,a-=8);return s[--d]|=128*h,s}function V(t,e,n){var i,o=8*n-e-1,r=(1<<o)-1,s=r>>1,a=o-7,c=n-1,l=t[c--],u=127&l;for(l>>=7;a>0;u=256*u+t[c],c--,a-=8);for(i=u&(1<<-a)-1,u>>=-a,a+=e;a>0;i=256*i+t[c],c--,a-=8);if(0===u)u=1-s;else{if(u===r)return i?NaN:l?-T:T;i+=k(2,e),u-=s}return(l?-1:1)*i*k(2,u-e)}function U(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function q(t){return[255&t]}function Y(t){return[255&t,t>>8&255]}function $(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function G(t){return z(t,52,8)}function H(t){return z(t,23,4)}function K(t,e,n){v(t[_],e,{get:function(){return this[n]}})}function W(t,e,n,i){var o=+n,r=f(o);if(r+e>t[B])throw O(S);var s=t[j]._b,a=r+t[F],c=s.slice(a,a+e);return i?c:c.reverse()}function X(t,e,n,i,o,r){var s=+n,a=f(s);if(a+e>t[B])throw O(S);for(var c=t[j]._b,l=a+t[F],u=i(+o),d=0;d<e;d++)c[l+d]=u[r?d:e-d-1]}if(s.ABV){if(!l(function(){E(1)})||!l(function(){new E(-1)})||l(function(){return new E,new E(1.5),new E(NaN),E.name!=y})){E=function(t){return u(this,E),new I(f(t))};for(var Z,Q=E[_]=I[_],J=p(I),tt=0;J.length>tt;)(Z=J[tt++])in E||a(E,Z,I[Z]);r||(Q.constructor=E)}var et=new x(new E(2)),nt=x[_].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||c(x[_],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else E=function(t){u(this,E,y);var e=f(t);this._b=m.call(new Array(e),0),this[B]=e},x=function(t,e,n){u(this,x,b),u(t,E,b);var i=t[B],o=d(e);if(o<0||o>i)throw O("Wrong offset!");if(n=void 0===n?i-o:h(n),o+n>i)throw O(w);this[j]=t,this[F]=o,this[B]=n},o&&(K(E,R,"_l"),K(x,L,"_b"),K(x,R,"_l"),K(x,D,"_o")),c(x[_],{getInt8:function(t){return W(this,1,t)[0]<<24>>24},getUint8:function(t){return W(this,1,t)[0]},getInt16:function(t){var e=W(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=W(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return U(W(this,4,t,arguments[1]))},getUint32:function(t){return U(W(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return V(W(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return V(W(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){X(this,1,t,q,e)},setUint8:function(t,e){X(this,1,t,q,e)},setInt16:function(t,e){X(this,2,t,Y,e,arguments[2])},setUint16:function(t,e){X(this,2,t,Y,e,arguments[2])},setInt32:function(t,e){X(this,4,t,$,e,arguments[2])},setUint32:function(t,e){X(this,4,t,$,e,arguments[2])},setFloat32:function(t,e){X(this,4,t,H,e,arguments[2])},setFloat64:function(t,e){X(this,8,t,G,e,arguments[2])}});g(E,y),g(x,b),a(x[_],s.VIEW,!0),e[y]=E,e[b]=x},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray},f605:function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},f921:function(t,e,n){n("014b"),n("c207"),n("69d3"),n("765d"),t.exports=n("584a").Symbol},fab2:function(t,e,n){var i=n("7726").document;t.exports=i&&i.documentElement},fb15:function(t,e,n){"use strict";n.r(e);var i,o={};(n.r(o),n.d(o,"forceCenter",function(){return g}),n.d(o,"forceCollide",function(){return Y}),n.d(o,"forceLink",function(){return tt}),n.d(o,"forceManyBody",function(){return Nt}),n.d(o,"forceRadial",function(){return Lt}),n.d(o,"forceSimulation",function(){return At}),n.d(o,"forceX",function(){return Rt}),n.d(o,"forceY",function(){return Dt}),"undefined"!==typeof window)&&((i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=i[1]));n("7f7f");var r=n("a745"),s=n.n(r);function a(t){if(s()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var c=n("774e"),l=n.n(c),u=n("c8bb"),d=n.n(u);function h(t){if(d()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return l()(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return a(t)||h(t)||f()}var v=n("5176"),m=n.n(v),g=function(t,e){var n;function i(){var i,o,r=n.length,s=0,a=0;for(i=0;i<r;++i)o=n[i],s+=o.x,a+=o.y;for(s=s/r-t,a=a/r-e,i=0;i<r;++i)o=n[i],o.x-=s,o.y-=a}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},y=function(t){return function(){return t}},b=function(){return 1e-6*(Math.random()-.5)},_=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return w(this.cover(e,n),e,n,t)};function w(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var o,r,s,a,c,l,u,d,h,f=t._root,p={data:i},v=t._x0,m=t._y0,g=t._x1,y=t._y1;if(!f)return t._root=p,t;while(f.length)if((l=e>=(r=(v+g)/2))?v=r:g=r,(u=n>=(s=(m+y)/2))?m=s:y=s,o=f,!(f=f[d=u<<1|l]))return o[d]=p,t;if(a=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===a&&n===c)return p.next=f,o?o[d]=p:t._root=p,t;do{o=o?o[d]=new Array(4):t._root=new Array(4),(l=e>=(r=(v+g)/2))?v=r:g=r,(u=n>=(s=(m+y)/2))?m=s:y=s}while((d=u<<1|l)===(h=(c>=s)<<1|a>=r));return o[h]=f,o[d]=p,t}function S(t){var e,n,i,o,r=t.length,s=new Array(r),a=new Array(r),c=1/0,l=1/0,u=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,a[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>d&&(d=o));for(u<c&&(c=this._x0,u=this._x1),d<l&&(l=this._y0,d=this._y1),this.cover(c,l).cover(u,d),n=0;n<r;++n)w(this,s[n],a[n],t[n]);return this}var E=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,o=this._x1,r=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{if(!(n>t||t>o||i>e||e>r))return this;var s,a,c=o-n,l=this._root;switch(a=(e<(i+r)/2)<<1|t<(n+o)/2){case 0:do{s=new Array(4),s[a]=l,l=s}while(c*=2,o=n+c,r=i+c,t>o||e>r);break;case 1:do{s=new Array(4),s[a]=l,l=s}while(c*=2,n=o-c,r=i+c,n>t||e>r);break;case 2:do{s=new Array(4),s[a]=l,l=s}while(c*=2,o=n+c,i=r-c,t>o||i>e);break;case 3:do{s=new Array(4),s[a]=l,l=s}while(c*=2,n=o-c,i=r-c,n>t||i>e);break}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=o,this._y1=r,this},x=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},C=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},O=function(t,e,n,i,o){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=o},T=function(t,e,n){var i,o,r,s,a,c,l,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],v=this._root;v&&p.push(new O(v,u,d,h,f)),null==n?n=1/0:(u=t-n,d=e-n,h=t+n,f=e+n,n*=n);while(c=p.pop())if(!(!(v=c.node)||(o=c.x0)>h||(r=c.y0)>f||(s=c.x1)<u||(a=c.y1)<d))if(v.length){var m=(o+s)/2,g=(r+a)/2;p.push(new O(v[3],m,g,s,a),new O(v[2],o,g,m,a),new O(v[1],m,r,s,g),new O(v[0],o,r,m,g)),(l=(e>=g)<<1|t>=m)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=c)}else{var y=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),_=y*y+b*b;if(_<n){var w=Math.sqrt(n=_);u=t-w,d=e-w,h=t+w,f=e+w,i=v.data}}return i},I=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,o,r,s,a,c,l,u,d,h,f=this._root,p=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!f)return this;if(f.length)while(1){if((l=r>=(a=(p+m)/2))?p=a:m=a,(u=s>=(c=(v+g)/2))?v=c:g=c,e=f,!(f=f[d=u<<1|l]))return this;if(!f.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,h=d)}while(f.data!==t)if(i=f,!(f=f.next))return this;return(o=f.next)&&delete f.next,i?(o?i.next=o:delete i.next,this):e?(o?e[d]=o:delete e[d],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f),this):(this._root=o,this)};function M(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}var k=function(){return this._root},P=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},A=function(t){var e,n,i,o,r,s,a=[],c=this._root;c&&a.push(new O(c,this._x0,this._y0,this._x1,this._y1));while(e=a.pop())if(!t(c=e.node,i=e.x0,o=e.y0,r=e.x1,s=e.y1)&&c.length){var l=(i+r)/2,u=(o+s)/2;(n=c[3])&&a.push(new O(n,l,u,r,s)),(n=c[2])&&a.push(new O(n,i,u,l,s)),(n=c[1])&&a.push(new O(n,l,o,r,u)),(n=c[0])&&a.push(new O(n,i,o,l,u))}return this},N=function(t){var e,n=[],i=[];this._root&&n.push(new O(this._root,this._x0,this._y0,this._x1,this._y1));while(e=n.pop()){var o=e.node;if(o.length){var r,s=e.x0,a=e.y0,c=e.x1,l=e.y1,u=(s+c)/2,d=(a+l)/2;(r=o[0])&&n.push(new O(r,s,a,u,d)),(r=o[1])&&n.push(new O(r,u,a,c,d)),(r=o[2])&&n.push(new O(r,s,d,u,l)),(r=o[3])&&n.push(new O(r,u,d,c,l))}i.push(e)}while(e=i.pop())t(e.node,e.x0,e.y0,e.x1,e.y1);return this};function L(t){return t[0]}var R=function(t){return arguments.length?(this._x=t,this):this._x};function D(t){return t[1]}var j=function(t){return arguments.length?(this._y=t,this):this._y};function B(t,e,n){var i=new F(null==e?L:e,null==n?D:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function F(t,e,n,i,o,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=o,this._y1=r,this._root=void 0}function z(t){var e={data:t.data},n=e;while(t=t.next)n=n.next={data:t.data};return e}var V=B.prototype=F.prototype;function U(t){return t.x+t.vx}function q(t){return t.y+t.vy}V.copy=function(){var t,e,n=new F(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=z(i),n;t=[{source:i,target:n._root=new Array(4)}];while(i=t.pop())for(var o=0;o<4;++o)(e=i.source[o])&&(e.length?t.push({source:e,target:i.target[o]=new Array(4)}):i.target[o]=z(e));return n},V.add=_,V.addAll=S,V.cover=E,V.data=x,V.extent=C,V.find=T,V.remove=I,V.removeAll=M,V.root=k,V.size=P,V.visit=A,V.visitAfter=N,V.x=R,V.y=j;var Y=function(t){var e,n,i=1,o=1;function r(){for(var t,r,a,c,l,u,d,h=e.length,f=0;f<o;++f)for(r=B(e,U,q).visitAfter(s),t=0;t<h;++t)a=e[t],u=n[a.index],d=u*u,c=a.x+a.vx,l=a.y+a.vy,r.visit(p);function p(t,e,n,o,r){var s=t.data,h=t.r,f=u+h;if(!s)return e>c+f||o<c-f||n>l+f||r<l-f;if(s.index>a.index){var p=c-s.x-s.vx,v=l-s.y-s.vy,m=p*p+v*v;m<f*f&&(0===p&&(p=b(),m+=p*p),0===v&&(v=b(),m+=v*v),m=(f-(m=Math.sqrt(m)))/m*i,a.vx+=(p*=m)*(f=(h*=h)/(d+h)),a.vy+=(v*=m)*f,s.vx-=p*(f=1-f),s.vy-=v*f)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function a(){if(e){var i,o,r=e.length;for(n=new Array(r),i=0;i<r;++i)o=e[i],n[o.index]=+t(o,i,e)}}return"function"!==typeof t&&(t=y(null==t?1:+t)),r.initialize=function(t){e=t,a()},r.iterations=function(t){return arguments.length?(o=+t,r):o},r.strength=function(t){return arguments.length?(i=+t,r):i},r.radius=function(e){return arguments.length?(t="function"===typeof e?e:y(+e),a(),r):t},r},$="$";function G(){}function H(t,e){var n=new G;if(t instanceof G)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,r=t.length;if(null==e)while(++o<r)n.set(o,t[o]);else while(++o<r)n.set(e(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}G.prototype=H.prototype={constructor:G,has:function(t){return $+t in this},get:function(t){return this[$+t]},set:function(t,e){return this[$+t]=e,this},remove:function(t){var e=$+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===$&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===$&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===$&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===$&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===$&&++t;return t},empty:function(){for(var t in this)if(t[0]===$)return!1;return!0},each:function(t){for(var e in this)e[0]===$&&t(this[e],e.slice(1),this)}};var K=H;function W(){}var X=K.prototype;function Z(t,e){var n=new W;if(t instanceof W)t.each(function(t){n.add(t)});else if(t){var i=-1,o=t.length;if(null==e)while(++i<o)n.add(t[i]);else while(++i<o)n.add(e(t[i],i,t))}return n}W.prototype=Z.prototype={constructor:W,has:X.has,add:function(t){return t+="",this[$+t]=t,this},remove:X.remove,clear:X.clear,values:X.keys,size:X.size,empty:X.empty,each:X.each};function Q(t){return t.index}function J(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var tt=function(t){var e,n,i,o,r,s=Q,a=u,c=y(30),l=1;function u(t){return 1/Math.min(o[t.source.index],o[t.target.index])}function d(i){for(var o=0,s=t.length;o<l;++o)for(var a,c,u,d,h,f,p,v=0;v<s;++v)a=t[v],c=a.source,u=a.target,d=u.x+u.vx-c.x-c.vx||b(),h=u.y+u.vy-c.y-c.vy||b(),f=Math.sqrt(d*d+h*h),f=(f-n[v])/f*i*e[v],d*=f,h*=f,u.vx-=d*(p=r[v]),u.vy-=h*p,c.vx+=d*(p=1-p),c.vy+=h*p}function h(){if(i){var a,c,l=i.length,u=t.length,d=K(i,s);for(a=0,o=new Array(l);a<u;++a)c=t[a],c.index=a,"object"!==typeof c.source&&(c.source=J(d,c.source)),"object"!==typeof c.target&&(c.target=J(d,c.target)),o[c.source.index]=(o[c.source.index]||0)+1,o[c.target.index]=(o[c.target.index]||0)+1;for(a=0,r=new Array(u);a<u;++a)c=t[a],r[a]=o[c.source.index]/(o[c.source.index]+o[c.target.index]);e=new Array(u),f(),n=new Array(u),p()}}function f(){if(i)for(var n=0,o=t.length;n<o;++n)e[n]=+a(t[n],n,t)}function p(){if(i)for(var e=0,o=t.length;e<o;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t){i=t,h()},d.links=function(e){return arguments.length?(t=e,h(),d):t},d.id=function(t){return arguments.length?(s=t,d):s},d.iterations=function(t){return arguments.length?(l=+t,d):l},d.strength=function(t){return arguments.length?(a="function"===typeof t?t:y(+t),f(),d):a},d.distance=function(t){return arguments.length?(c="function"===typeof t?t:y(+t),p(),d):c},d},et={value:function(){}};function nt(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new it(i)}function it(t){this._=t}function ot(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function rt(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function st(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=et,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}it.prototype=nt.prototype={constructor:it,on:function(t,e){var n,i=this._,o=ot(t+"",i),r=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);while(++r<s)if(n=(t=o[r]).type)i[n]=st(i[n],t.name,e);else if(null==e)for(n in i)i[n]=st(i[n],t.name,null);return this}while(++r<s)if((n=(t=o[r]).type)&&(n=rt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new it(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),r=0;r<n;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,n=i.length;r<n;++r)i[r].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}};var at,ct,lt=nt,ut=0,dt=0,ht=0,ft=1e3,pt=0,vt=0,mt=0,gt="object"===typeof performance&&performance.now?performance:Date,yt="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bt(){return vt||(yt(_t),vt=gt.now()+mt)}function _t(){vt=0}function wt(){this._call=this._time=this._next=null}function St(t,e,n){var i=new wt;return i.restart(t,e,n),i}function Et(){bt(),++ut;var t,e=at;while(e)(t=vt-e._time)>=0&&e._call.call(null,t),e=e._next;--ut}function xt(){vt=(pt=gt.now())+mt,ut=dt=0;try{Et()}finally{ut=0,Ot(),vt=0}}function Ct(){var t=gt.now(),e=t-pt;e>ft&&(mt-=e,pt=t)}function Ot(){var t,e,n=at,i=1/0;while(n)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:at=e);ct=t,Tt(i)}function Tt(t){if(!ut){dt&&(dt=clearTimeout(dt));var e=t-vt;e>24?(t<1/0&&(dt=setTimeout(xt,t-gt.now()-mt)),ht&&(ht=clearInterval(ht))):(ht||(pt=gt.now(),ht=setInterval(Ct,ft)),ut=1,yt(xt))}}wt.prototype=St.prototype={constructor:wt,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?bt():+n)+(null==e?0:+e),this._next||ct===this||(ct?ct._next=this:at=this,ct=this),this._call=t,this._time=n,Tt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tt())}};function It(t){return t.x}function Mt(t){return t.y}var kt=10,Pt=Math.PI*(3-Math.sqrt(5)),At=function(t){var e,n=1,i=.001,o=1-Math.pow(i,1/300),r=0,s=.6,a=K(),c=St(u),l=lt("tick","end");function u(){d(),l.call("tick",e),n<i&&(c.stop(),l.call("end",e))}function d(){var e,i,c=t.length;for(n+=(r-n)*o,a.each(function(t){t(n)}),e=0;e<c;++e)i=t[e],null==i.fx?i.x+=i.vx*=s:(i.x=i.fx,i.vx=0),null==i.fy?i.y+=i.vy*=s:(i.y=i.fy,i.vy=0)}function h(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var o=kt*Math.sqrt(n),r=n*Pt;e.x=o*Math.cos(r),e.y=o*Math.sin(r)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),h(),e={tick:d,restart:function(){return c.restart(u),e},stop:function(){return c.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),a.each(f),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(o=+t,e):+o},alphaTarget:function(t){return arguments.length?(r=+t,e):r},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},force:function(t,n){return arguments.length>1?(null==n?a.remove(t):a.set(t,f(n)),e):a.get(t)},find:function(e,n,i){var o,r,s,a,c,l=0,u=t.length;for(null==i?i=1/0:i*=i,l=0;l<u;++l)a=t[l],o=e-a.x,r=n-a.y,s=o*o+r*r,s<i&&(c=a,i=s);return c},on:function(t,n){return arguments.length>1?(l.on(t,n),e):l.on(t)}}},Nt=function(){var t,e,n,i,o=y(-30),r=1,s=1/0,a=.81;function c(i){var o,r=t.length,s=B(t,It,Mt).visitAfter(u);for(n=i,o=0;o<r;++o)e=t[o],s.visit(d)}function l(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function u(t){var e,n,o,r,s,a=0,c=0;if(t.length){for(o=r=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,c+=n,o+=n*e.x,r+=n*e.y);t.x=o/c,t.y=r/c}else{e=t,e.x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function d(t,o,c,l){if(!t.value)return!0;var u=t.x-e.x,d=t.y-e.y,h=l-o,f=u*u+d*d;if(h*h/a<f)return f<s&&(0===u&&(u=b(),f+=u*u),0===d&&(d=b(),f+=d*d),f<r&&(f=Math.sqrt(r*f)),e.vx+=u*t.value*n/f,e.vy+=d*t.value*n/f),!0;if(!(t.length||f>=s)){(t.data!==e||t.next)&&(0===u&&(u=b(),f+=u*u),0===d&&(d=b(),f+=d*d),f<r&&(f=Math.sqrt(r*f)));do{t.data!==e&&(h=i[t.data.index]*n/f,e.vx+=u*h,e.vy+=d*h)}while(t=t.next)}}return c.initialize=function(e){t=e,l()},c.strength=function(t){return arguments.length?(o="function"===typeof t?t:y(+t),l(),c):o},c.distanceMin=function(t){return arguments.length?(r=t*t,c):Math.sqrt(r)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c},Lt=function(t,e,n){var i,o,r,s=y(.1);function a(t){for(var s=0,a=i.length;s<a;++s){var c=i[s],l=c.x-e||1e-6,u=c.y-n||1e-6,d=Math.sqrt(l*l+u*u),h=(r[s]-d)*o[s]*t/d;c.vx+=l*h,c.vy+=u*h}}function c(){if(i){var e,n=i.length;for(o=new Array(n),r=new Array(n),e=0;e<n;++e)r[e]=+t(i[e],e,i),o[e]=isNaN(r[e])?0:+s(i[e],e,i)}}return"function"!==typeof t&&(t=y(+t)),null==e&&(e=0),null==n&&(n=0),a.initialize=function(t){i=t,c()},a.strength=function(t){return arguments.length?(s="function"===typeof t?t:y(+t),c(),a):s},a.radius=function(e){return arguments.length?(t="function"===typeof e?e:y(+e),c(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(n=+t,a):n},a},Rt=function(t){var e,n,i,o=y(.1);function r(t){for(var o,r=0,s=e.length;r<s;++r)o=e[r],o.vx+=(i[r]-o.x)*n[r]*t}function s(){if(e){var r,s=e.length;for(n=new Array(s),i=new Array(s),r=0;r<s;++r)n[r]=isNaN(i[r]=+t(e[r],r,e))?0:+o(e[r],r,e)}}return"function"!==typeof t&&(t=y(null==t?0:+t)),r.initialize=function(t){e=t,s()},r.strength=function(t){return arguments.length?(o="function"===typeof t?t:y(+t),s(),r):o},r.x=function(e){return arguments.length?(t="function"===typeof e?e:y(+e),s(),r):t},r},Dt=function(t){var e,n,i,o=y(.1);function r(t){for(var o,r=0,s=e.length;r<s;++r)o=e[r],o.vy+=(i[r]-o.y)*n[r]*t}function s(){if(e){var r,s=e.length;for(n=new Array(s),i=new Array(s),r=0;r<s;++r)n[r]=isNaN(i[r]=+t(e[r],r,e))?0:+o(e[r],r,e)}}return"function"!==typeof t&&(t=y(null==t?0:+t)),r.initialize=function(t){e=t,s()},r.strength=function(t){return arguments.length?(o="function"===typeof t?t:y(+t),s(),r):o},r.y=function(e){return arguments.length?(t="function"===typeof e?e:y(+e),s(),r):t},r},jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{ref:"svg",staticClass:"net-svg",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t.size.w,height:t.size.h},on:{mouseup:function(e){t.emit("dragEnd",[e])},"&touchend":function(e){t.emit("dragEnd",[e])},"&touchstart":function(t){}}},[n("g",{staticClass:"links",attrs:{id:"l-links"}},t._l(t.links,function(e){return n("path",t._b({class:t.linkClass(e.id),style:t.linkStyle(e),attrs:{d:t.linkPath(e),id:e.id},on:{click:function(n){t.emit("linkClick",[n,e])},"&touchstart":function(n){t.emit("linkClick",[n,e])}}},"path",t.linkAttrs(e),!1))})),t.noNodes?t._e():n("g",{staticClass:"nodes",attrs:{id:"l-nodes"}},[t._l(t.nodes,function(e,i){return[t.svgIcon(e)?n("svg",t._b({key:i,class:t.nodeClass(e,["node-svg"]),style:t.nodeStyle(e),attrs:{viewBox:t.svgIcon(e).attrs.viewBox,width:t.getNodeSize(e,"width"),height:t.getNodeSize(e,"height"),x:e.x-t.getNodeSize(e,"width")/2,y:e.y-t.getNodeSize(e,"height")/2,title:e.name},domProps:{innerHTML:t._s(t.svgIcon(e).data)},on:{click:function(n){t.emit("nodeClick",[n,e])},"&touchend":function(n){t.emit("nodeClick",[n,e])},mousedown:function(e){e.preventDefault(),t.emit("dragStart",[e,i])},touchstart:function(e){e.preventDefault(),t.emit("dragStart",[e,i])}}},"svg",e._svgAttrs,!1)):n("circle",t._b({key:i,class:t.nodeClass(e),style:t.nodeStyle(e),attrs:{r:t.getNodeSize(e)/2,cx:e.x,cy:e.y,title:e.name},on:{click:function(n){t.emit("nodeClick",[n,e])},"&touchend":function(n){t.emit("nodeClick",[n,e])},mousedown:function(e){e.preventDefault(),t.emit("dragStart",[e,i])},touchstart:function(e){e.preventDefault(),t.emit("dragStart",[e,i])}}},"circle",e._svgAttrs,!1))]})],2),t.linkLabels?n("g",{staticClass:"labels",attrs:{id:"link-labels"}},t._l(t.links,function(e){return n("text",{staticClass:"link-label",attrs:{"font-size":t.fontSize}},[n("textPath",{attrs:{"xlink:href":"#"+e.id,startOffset:"50%"}},[t._v(t._s(e.name))])])})):t._e(),t.nodeLabels?n("g",{staticClass:"labels",attrs:{id:"node-labels"}},t._l(t.nodes,function(e){return n("text",{staticClass:"node-label",class:e._labelClass?e._labelClass:"",attrs:{x:e.x+t.getNodeSize(e)/2+t.fontSize/2,y:e.y+t.labelOffset.y,"font-size":t.fontSize,"stroke-width":t.fontSize/8}},[t._v(t._s(e.name))])})):t._e()])},Bt=[],Ft=n("e814"),zt=n.n(Ft),Vt=(n("a481"),n("28a5"),n("ac6a"),n("5d58")),Ut=n.n(Vt),qt=n("67bb"),Yt=n.n(qt);function $t(t){return $t="function"===typeof Yt.a&&"symbol"===typeof Ut.a?function(t){return typeof t}:function(t){return t&&"function"===typeof Yt.a&&t.constructor===Yt.a&&t!==Yt.a.prototype?"symbol":typeof t},$t(t)}function Gt(t){return Gt="function"===typeof Yt.a&&"symbol"===$t(Ut.a)?function(t){return $t(t)}:function(t){return t&&"function"===typeof Yt.a&&t.constructor===Yt.a&&t!==Yt.a.prototype?"symbol":$t(t)},Gt(t)}var Ht=n("5d73"),Kt=n.n(Ht),Wt=n("db0c"),Xt=n.n(Wt),Zt={NS:"http://www.w3.org/2000/svg",export:function(t,e){var n=null;if(this.isSvgData(t)){n=t.cloneNode(!0);var i=t.parentNode.querySelectorAll("*"),o={},r=this.getcssRules(),s=!0,a=!1,c=void 0;try{for(var l,u=function(){var t=l.value,n=r;e||(n=r.filter(function(e){return t.matches(e.selectorText)}));var i=!0,s=!1,a=void 0;try{for(var c,u=Kt()(n);!(i=(c=u.next()).done);i=!0){var d=c.value;o[d.selectorText]=d.cssText}}catch(t){s=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(s)throw a}}},d=Kt()(i);!(s=(l=d.next()).done);s=!0)u()}catch(t){a=!0,c=t}finally{try{s||null==d.return||d.return()}finally{if(a)throw c}}var h=Xt()(o).join("\n");if(h){var f=document.createElementNS(this.NS,"style");f.type="text/css",n.insertBefore(f,n.childNodes[0]),f.innerHTML=h,n.appendChild(f)}}return n},makeCanvas:function(t,e,n){var i=document.createElement("canvas");i.width=t,i.height=e;var o=i.getContext("2d");return o.fillStyle=n||"white",o.fillRect(0,0,i.width,i.height),i},serialize:function(t){return(new XMLSerializer).serializeToString(t)},svgToImg:function(t,e,n){var i=this.serialize(t),o=new Image,r=e.getContext("2d");o.onload=function(){r.drawImage(this,0,0);var t=e.toDataURL("image/png");n(null,t,r)},o.onerror=function(t){n(t)},o.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i)))},save:function(t){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(this.serialize(t))},getcssRules:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var o,r=Kt()(document.styleSheets);!(e=(o=r.next()).done);e=!0){var s=o.value,a=this.readRules(s),c=!0,l=!1,u=void 0;try{for(var d,h=Kt()(a);!(c=(d=h.next()).done);c=!0){var f=d.value;f&&f.cssText&&t.push(f)}}catch(t){l=!0,u=t}finally{try{c||null==h.return||h.return()}finally{if(l)throw u}}}}catch(t){n=!0,i=t}finally{try{e||null==r.return||r.return()}finally{if(n)throw i}}return t},readRules:function(t){try{if(!t.cssRules)return t.rules||[]}catch(t){if("SecurityError"!==t.name)throw t;return[]}return t.cssRules},toDom:function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild||null},toObject:function(t){if(t){var e={};if(t.attributes)for(var n=t.attributes.length;n>=0;n--){var i=t.attributes[n];i&&(e[i.name]=i.value)}var o=t.innerHTML;if(o)return{attrs:e,data:o}}return null},svgElFromString:function(t){var e=this.toDom(t);if(this.isSvgData(e))return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e},svgDataToUrl:function(t,e){if("object"===Gt(e))for(var n in e){var i=e[n]?e[n]:"";t.setAttribute(n,i)}var o=this.export(t);return o?this.svgToUrl(this.serialize(o)):null},isSvgData:function(t){return!!t.firstChild&&"svg"===t.firstChild.parentNode.nodeName},svgToUrl:function(t){var e=new Blob([t],{type:"image/svg+xml"}),n=URL.createObjectURL(e);return n}},Qt={name:"svg-renderer",props:["size","nodes","noNodes","selected","linksSelected","links","nodeSize","padding","fontSize","strLinks","linkWidth","nodeLabels","linkLabels","labelOffset","nodeSym"],computed:{nodeSvg:function(){return this.nodeSym?Zt.toObject(this.nodeSym):null}},methods:{getNodeSize:function(t,e){var n=t._size||this.nodeSize;return e&&(n=t["_"+e]||n),n},svgIcon:function(t){return t.svgObj||this.nodeSvg},emit:function(t,e){this.$emit("action",t,e)},svgScreenShot:function(t,e,n,i){var o=Zt.export(this.$refs.svg,i);if(e)t(null,Zt.save(o));else{n||(n=this.searchBackground());var r=Zt.makeCanvas(this.size.w,this.size.h,n);Zt.svgToImg(o,r,function(e,n){e?t(e):t(null,n)})}},linkClass:function(t){var e=["link"];return this.linksSelected.hasOwnProperty(t)&&e.push("selected"),this.strLinks||e.push("curve"),e},linkPath:function(t){var e={M:[0|t.source.x,0|t.source.y],X:[0|t.target.x,0|t.target.y]};return this.strLinks?"M "+e.M.join(" ")+" L"+e.X.join(" "):(e.Q=[t.source.x,t.target.y],"M "+e.M+" Q "+e.Q.join(" ")+" "+e.X)},nodeStyle:function(t){return t._color?"fill: "+t._color:""},linkStyle:function(t){var e={};return t._color&&(e.stroke=t._color),e},nodeClass:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t._cssClass?t._cssClass:[];return s()(n)||(n=[n]),n.push("node"),e.forEach(function(t){return n.push(t)}),this.selected[t.id]&&n.push("selected"),(t.fx||t.fy)&&n.push("pinned"),n},searchBackground:function(){var t=this;while(t.$parent){var e=window.getComputedStyle(t.$el),n=e.getPropertyValue("background-color"),i=n.replace(/[^\d,]/g,"").split(","),o=i.reduce(function(t,e){return zt()(t)+zt()(e)},0);if(o>0)return n;t=t.$parent}return"white"},spriteSymbol:function(){var t=this.nodeSym;if(t)return Zt.toSymbol(t)},linkAttrs:function(t){var e=t._svgAttrs||{};return e["stroke-width"]=e["stroke-width"]||this.linkWidth,e}}},Jt=Qt;function te(t,e,n,i,o,r,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}var ee,ne,ie=te(Jt,jt,Bt,!1,null,null,null),oe=ie.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{directives:[{name:"render-canvas",rawName:"v-render-canvas",value:{links:t.links,nodes:t.nodes},expression:"{links, nodes}"}],ref:"canvas",style:t.canvasStyle,attrs:{id:"canvas",width:t.size.w,height:t.size.h},on:{mouseup:function(e){return e.preventDefault(),t.canvasClick(e)},mousedown:function(e){return e.preventDefault(),t.canvasClick(e)},touchstart:function(e){return e.preventDefault(),t.canvasClick(e)},"&touchend":function(e){return t.canvasClick(e)}}})},se=[],ae=(n("b54a"),n("6c7b"),{background:{_cssClass:"net-svg",fillStyle:"white"},node:{_cssClass:"node",fillStyle:"green",strokeStyle:"orange",lineWidth:2},link:{_cssClass:"link",strokeStyle:"blue",lineWidth:1},labels:{_cssClass:"node-label",_svgElement:"text",fillStyle:"black",fontFamily:"Arial"},nodeSelected:{_cssClass:"node selected",fillStyle:"red",strokeStyle:"orange",lineWidth:2},linkSelected:{_cssClass:"link selected",strokeStyle:"green",lineWidth:2},nodePinned:{_cssClass:"node pinned",fillStyle:"green",strokeStyle:"red"},nodeSelectedPinned:{_cssClass:"node selected pinned",fillStyle:"green",strokeStyle:"red"}}),ce=(n("6b54"),{randomId:function(){return Math.random().toString(36).substring(7)},fillStyle:function(t,e){var n=null,i="picker-"+this.randomId(),o=this.canvasPicker(t,i);e.appendChild(o);var r={fillStyle:"fill",strokeStyle:"stroke",lineWidth:"stroke-width",fontFamily:"font-family"};return t=this.mapStyle(i,r,t,n),e.removeChild(o),t},mapStyle:function(t,e,n,i,o){var r=window.getComputedStyle(document.getElementById(t),i);for(var s in o=o||["lineWidth"],e){var a=r.getPropertyValue(e[s]);o.indexOf(s)>-1&&(a=zt()(a,10)),a&&(n[s]=a)}return n},canvasPicker:function(t,e){var n=t._svgAttrs||{},i=t._svgElement||"circle";if(!t._svgAttrs)switch(i){case"text":n={x:10,y:10,fontSize:20};break;case"circle":n={cx:10,cy:10,r:10};break}return n.class=t._cssClass,n.id=e,this.svgCreate(i,n)},compColor:function(t){var e=document.createElement("div");e.style.backgroundColor=t,document.body.appendChild(e);var n=window.getComputedStyle(e,null).getPropertyValue("background-color");return document.body.removeChild(e),n},svgCreate:function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var i in e)n.setAttributeNS(null,i,e[i]);return n},create:function(t,e,n){n=n||"body";var i=document.createElement(t),o=e||"";return o+=this.randomId(),i.setAttribute("id",o),document[n].appendChild(i),i}}),le={name:"canvas-renderer",props:["size","offset","padding","nodes","selected","linksSelected","links","nodeSize","fontSize","strLinks","linkWidth","nodeLabels","labelOffset","canvasStyles","nodeSym","noNodes"],data:function(){return{hitCanvas:null,shapes:{},drag:null,stylesReady:!1,CssStyles:!0,styles:ae,sprites:{}}},computed:{nodeSvg:function(){return this.nodeSym},canvasStyle:function(){var t=this.padding.x+"px",e=this.padding.y+"px";return{left:t,top:e}}},directives:{renderCanvas:function(t,e,n){var i=e.value.nodes,o=e.value.links;n.context.draw(i,o,t)}},created:function(){if(this.canvasStyles)for(var t in this.canvasStyles)this.styles[t]=this.canvasStyles[t]},mounted:function(){var t=this;this.$nextTick(function(){t.hitCanvas.width=t.size.w,t.hitCanvas.height=t.size.h})},watch:{nodeSize:function(){this.resetSprites()},canvasStyles:function(){this.resetSprites()}},methods:{canvasScreenShot:function(t,e){var n=this.$refs.canvas,i=document.createElement("canvas");i.width=n.width,i.height=n.height;var o=this.styles.background;e&&(o=this.getCssColor(e));var r=i.getContext("2d");r=this.setCtx(r,o),r.fillRect(0,0,i.width,i.height),r.drawImage(n,0,0);var s=i.toDataURL("image/png");s?t(null,s):t(new Error("error generating canvas image"))},emit:function(t,e){this.$emit("action",t,e)},canvasInit:function(){var t=document.createElement("canvas");t.width=this.size.w,t.height=this.size.h,t.top=this.offset.y,t.left=this.offset.x,t.id="hit-canvas",this.hitCanvas=t,this.resetSprites()},resetSprites:function(){this.sprites={};for(var t=["node","nodeSelected","nodePinned","nodeSelectedPinned"],e=0;e<t.length;e++){var n=t[e];this.sprites[n]=this.nodeSprite(this.styles[n])}},canvasClick:function(t){var e=this.hitCanvas.getContext("2d"),n=t.touches?t.touches[0]||t.changedTouches[0]:t,i=document.body.scrollTop,o=document.body.scrollLeft,r=n.clientX+o-this.padding.x,s=n.clientY+i-this.padding.y,a=e.getImageData(r,s,1,1).data,c="rgb(".concat(a[0],",").concat(a[1],",").concat(a[2],")"),l=this.shapes[c];if(l){var u=l.type+"s",d=this[u][l.index];d&&("mouseup"===t.type||"touchend"===t.type?(this.drag&&(this.drag=null,this.emit("dragEnd")),this.emit(l.type+"Click",[t,d])):"mousedown"!==t.type&&"touchstart"!==t.type||(this.drag=d,this.emit("dragStart",[t,d.index])))}},drawNode:function(t,e){t.beginPath(),t.arc(e.x,e.y,this.nodeSize/2,0,2*Math.PI,!1);var n=t.fillStyle,i=t.strokeStyle;e._color&&(t.fillStyle=e._color),e._borderColor&&(t.strokeStyle=e._borderColor),t.fill(),t.stroke(),t.closePath(),t.fillStyle=n,t.strokeStyle=i},drawLink:function(t,e){t.beginPath(),t.moveTo(e.source.x,e.source.y),t.lineTo(e.target.x,e.target.y),t.lineWidth=this.linkWidth,t.strokeStyle=e._color?e._color:e.color,t.stroke()},drawText:function(t,e,n,i){e=this.setCtx(e,n),this.fontSize&&(e.font=this.fontSize+"px "+n.fontFamily);var o=i?t[i]:t.name,r=t.x+this.labelOffset.x,s=t.y+this.labelOffset.y;e.fillText(o,r,s)},draw:function(t,e,n){this.hitCanvas||this.canvasInit();var i=n.getContext("2d"),o=this.hitCanvas.getContext("2d");!this.stylesReady&&this.CssStyles&&(this.getCssStyles(),this.resetSprites()),i.clearRect(0,0,this.size.w,this.size.h),i=this.setCtx(i,this.styles.link);var r=!0,s=!1,a=void 0;try{for(var c,l=Kt()(e);!(r=(c=l.next()).done);r=!0){var u=c.value;this.linksSelected[u.id]||this.drawLink(i,u),this.mapShape(u,"link",this.drawLink,o)}}catch(t){s=!0,a=t}finally{try{r||null==l.return||l.return()}finally{if(s)throw a}}for(var d in i=this.setCtx(i,this.styles.linkSelected),this.linksSelected){var h=this.linksSelected[d];this.isOnView(h.source)&&this.isOnView(h.target)&&this.drawLink(i,h)}i=this.setCtx(i,this.styles.node);var f=!0,p=!1,v=void 0;try{for(var m,g=Kt()(t);!(f=(m=g.next()).done);f=!0){var y=m.value;if(this.isOnView(y)){if(!this.noNodes){var b=this.getNodeSprite(y);i.drawImage(b,y.x-b.width/2,y.y-b.height/2),this.mapShape(y,"node",this.drawNode,o)}this.nodeLabels&&(y.size=this.nodeSize,this.drawText(y,i,this.labelStyle(y)))}}}catch(t){p=!0,v=t}finally{try{f||null==g.return||g.return()}finally{if(p)throw v}}for(var _ in i=this.setCtx(i,this.styles.nodeSelected),this.selected){var w=this.selected[_];if(this.isOnView(w)){var S=this.getNodeSprite(w);i.drawImage(S,w.x-S.width/2,w.y-S.height/2)}}},getNodeSprite:function(t){var e=this.nodeSpriteName(t),n=this.sprites[e];if(!n){var i=this.loadNodeStyle(t);n=this.nodeSprite(i),this.sprites[e]=n}return n},nodeSpriteName:function(t){var e="node";return this.selected[t.id]&&(e+="Selected"),t.pinned&&(e+="Pinned"),t._cssClass&&(e+="-"+t._cssClass),t._color&&(e+="-"+ce.compColor(t._color)),e},nodeSprite:function(t){var e=this.nodeSize+this.styles.node.lineWidth,n=this.nodeSvg?e:2*e,i=this.spriteCanvas(n),o=i.getContext("2d");if(this.nodeSvg){var r={width:e,height:e,class:t._cssClass||"",style:t._cssStyle||""},s=Zt.svgDataToUrl(this.nodeSvg,r);if(s){var a=new Image;a.onload=function(){o.drawImage(a,0,0),URL.revokeObjectURL(s)},a.onerror=function(t){console.log("error creating node image",t)},a.src=s}}else o=this.setCtx(o,t),this.drawNode(o,{x:e,y:e});return i},spriteCanvas:function(t){var e=document.createElement("canvas");return e.width=t,e.height=t,e},isOnView:function(t){return t.x>0&&t.y>0&&t.x<this.size.w&&t.y<this.size.h},mapShape:function(t,e,n,i){t.colorIndex||(t.colorIndex=this.newColorIndex());var o=m()({},t);o.color=t.colorIndex.rgb,o.borderColor=t.colorIndex.rgb,o.type=e;var r=this.sprites[e];r?(r=this.cloneCanvas(r),r=this.fillCanvas(r,t.colorIndex),i.drawImage(r,t.x-r.width/2,t.y-r.height/2)):n(i,o),this.shapes[t.colorIndex.rgb]=o},fillCanvas:function(t,e){for(var n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),o=t.width*t.height*4,r=3;r<=o;r+=4)i.data[r]>0&&(i.data[r]=255,i.data[r-3]=e.r,i.data[r-2]=e.g,i.data[r-1]=e.b);return n.putImageData(i,0,0),t},newColorIndex:function(){while(1){var t=this.randomColor();if(!this.shapes[t.rgb])return t}},randomColor:function(){var t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),n=Math.round(255*Math.random());return{r:t,g:e,b:n,rgb:"rgb(".concat(t,",").concat(e,",").concat(n,")")}},setCtx:function(t,e){for(var n in e)t[n]=e[n];return t},cloneCanvas:function(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),e},Sprite:function(t,e){return this.sprites[t]||(this.sprites[t]=e()),this.sprites[t]},getCssStyles:function(){var t=ce.create("svg","css-picker");for(var e in this.styles){var n=this.styles[e]||{};n=ce.fillStyle(n,t)}document.body.removeChild(t),this.stylesReady=!0},loadNodeStyle:function(t){var e="node",n=this.selected[t.id];if(n&&(e="nodeSelected"),t.pinned&&(e="nodePinned"),n&&t.pinned&&(e="nodeSelectedPinned"),t._cssClass){var i=e+"-"+t._cssClass;if(!this.styles[i]){var o=m()({},this.styles[e]||{});o._cssClass=o._cssClass||"",o._cssClass+=" "+t._cssClass,this.updateStyle(i,o)}e=i}var r=m()({},this.styles[e]||this.updateStyle(e));return t._color&&(r.fillStyle=t._color,r._cssStyle="fill:"+t._color),t._cssClass&&(r._cssClass+=" "+t._cssClass),r},updateStyle:function(t,e){e=e||this.styles[t]||{};var n=ce.create("svg","css-picker");return e=ce.fillStyle(e,n),this.styles[t]=e,document.body.removeChild(n),e},getCssColor:function(t){var e=ce.create("div","color-picker"),n=e.id;e.setAttribute("style","background-color:"+t);var i=ce.mapStyle(n,{fillStyle:"background-color"},[]);return document.body.removeChild(e),i},labelStyle:function(t){var e=this.styles.labels,n=t._labelClass;if(n){var i="labels-"+n,o=this.styles[i];o||(o=m()({},e),o._cssClass+=" "+n,o=this.updateStyle(i,o)),e=o}return e}}},ue=le,de=(n("3d11"),te(ue,re,se,!1,null,null,null)),he=de.exports,fe=(n("34ef"),{save:function(t,e){var n=this;t&&(t=this.dataURIToBlob(t,function(t){var i=URL.createObjectURL(t);n.download(i,e)}))},dataURIToBlob:function(t,e){for(var n=atob(t.split(",")[1]),i=n.length,o=new Uint8Array(i),r=0;r<i;r++)o[r]=n.charCodeAt(r);e(new Blob([o]))},download:function(t,e){e=e||"";var n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e);var i=document.body.appendChild(n);n.click(),document.body.removeChild(i)}}),pe=m()({},o),ve={name:"d3-network",components:{canvasRenderer:he,svgRenderer:oe},props:{netNodes:{type:Array},netLinks:{type:Array},options:{type:Object},nodeSym:{type:String},nodeCb:{type:Function},linkCb:{type:Function},simCb:{type:Function},customForces:{type:Object},selection:{type:Object,default:function(){return{nodes:{},links:{}}}}},data:function(){return{canvas:!1,nodes:[],links:[],size:{w:500,h:500},offset:{x:0,y:0},clientOffset:{x:0,y:0},force:500,forces:{Center:!1,X:.5,Y:.5,ManyBody:!0,Link:!0},noNodes:!1,strLinks:!0,fontSize:10,dragging:!1,linkWidth:1,nodeLabels:!1,linkLabels:!1,nodeSize:5,mouseOfst:{x:0,y:0},padding:{x:0,y:0},simulation:null,nodeSvg:null,resizeListener:!0}},render:function(t){for(var e="svg",n={},i="svg-renderer",o=["size","nodes","links","selected","linksSelected","strLinks","linkWidth","nodeLabels","linkLabels","fontSize","labelOffset","offset","padding","nodeSize","noNodes"],r=0;r<o.length;r++){var s=o[r];n[s]=this[s]}return n.nodeSym=this.nodeSvg,this.canvas&&(i="canvas-renderer",e="canvas",n.canvasStyles=this.options.canvasStyles),t("div",{attrs:{class:"net"},on:{mousemove:this.move,"&touchmove":this.move}},[t(i,{props:n,ref:e,on:{action:this.methodCall}})])},created:function(){this.updateOptions(this.options),this.buildNodes(this.netNodes),this.links=this.buildLinks(this.netLinks),this.updateNodeSvg()},mounted:function(){var t=this;this.onResize(),this.$nextTick(function(){t.animate()}),this.resizeListener&&window.addEventListener("resize",this.onResize)},beforeDestroy:function(){this.resizeListener&&window.removeEventListener("resize",this.onResize)},computed:{selected:function(){return this.selection.nodes},linksSelected:function(){return this.selection.links},center:function(){return{x:this.size.w/2+this.size.w/200+this.offset.x,y:this.size.h/2+this.size.h/200+this.offset.y}},labelOffset:function(){return{x:this.nodeSize/2+this.fontSize/2,y:this.fontSize/2}}},watch:{netNodes:function(t){this.buildNodes(t),this.reset()},netLinks:function(t,e){this.links=this.buildLinks(t),this.reset()},nodeSym:function(){this.updateNodeSvg()},options:function(t,e){this.updateOptions(t),e.size&&t.size&&(e.size.w===t.size.w&&e.size.h===t.size.h||this.onResize()),this.animate()}},methods:{updateNodeSvg:function(){var t=null;this.nodeSym&&(t=Zt.svgElFromString(this.nodeSym)),this.nodeSvg=t},methodCall:function(t,e){var n=this[t];n&&"function"===typeof n&&(e?n.apply(void 0,p(e)):n())},onResize:function(){var t=this.options.size;t&&t.w||(this.size.w=this.$el.clientWidth),t&&t.h||(this.size.h=this.$el.clientHeight),this.padding.x=0,this.padding.y=0;var e=this;while(e.$parent)this.padding.x+=e.$el.offsetLeft||0,this.padding.y+=e.$el.offsetTop||0,e=e.$parent;this.animate()},updateOptions:function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},buildNodes:function(t){var e=this,n=this;this.nodes=t.map(function(t,i){return t=e.itemCb(e.nodeCb,t),t.id||0===t.id||n.$set(t,"id",i),t.x||n.$set(t,"x",0),t.y||n.$set(t,"y",0),t.name||"0"===t.name||n.$set(t,"name","node "+t.id),t.svgSym&&(t.svgIcon=Zt.svgElFromString(t.svgSym),e.canvas||!t.svgIcon||t.svgObj||(t.svgObj=Zt.toObject(t.svgIcon))),t})},buildLinks:function(t){var e=this,n=this;return t.concat().map(function(t,i){return t=e.itemCb(e.linkCb,t),t.source=t.sid,t.target=t.tid,t.id||n.$set(t,"id","link-"+i),t})},itemCb:function(t,e){return t&&"function"===typeof t&&(e=t(e)),e},simulate:function(t,e){var n=this.forces,i=pe.forceSimulation().stop().alpha(.5).nodes(t);return!1!==n.Center&&i.force("center",pe.forceCenter(this.center.x,this.center.y)),!1!==n.X&&i.force("X",pe.forceX(this.center.x).strength(n.X)),!1!==n.Y&&i.force("Y",pe.forceY(this.center.y).strength(n.Y)),!1!==n.ManyBody&&i.force("charge",pe.forceManyBody().strength(-this.force)),!1!==n.Link&&i.force("link",pe.forceLink(e).id(function(t){return t.id})),i=this.setCustomForces(i),i=this.itemCb(this.simCb,i),i},setCustomForces:function(t){var e=this.customForces;if(e)for(var n in e){var i=this.getD3Func("force"+n);if(i){var o=e[n];t.force("custom"+n,i.apply(void 0,p(o)))}}return t},getD3Func:function(t){var e=pe[t];return e&&"function"===typeof e?e:null},animate:function(){this.simulation&&this.simulation.stop(),!1!==this.forces.Link?this.simulation=this.simulate(this.nodes,this.links):this.simulation=this.simulate(this.nodes),this.simulation.restart()},reset:function(){this.animate(),this.nodes=this.simulation.nodes(),this.forces.links&&(this.links=this.simulation.force("link").links())},move:function(t){var e=this.clientPos(t);!1!==this.dragging&&this.nodes[this.dragging]&&(this.simulation.restart(),this.simulation.alpha(.5),this.nodes[this.dragging].fx=e.x-this.mouseOfst.x,this.nodes[this.dragging].fy=e.y-this.mouseOfst.y)},clientPos:function(t){var e=t.touches?t.touches[0].clientX:t.clientX,n=t.touches?t.touches[0].clientY:t.clientY;return e=e||0,n=n||0,{x:e,y:n}},dragStart:function(t,e){this.dragging=!1!==e&&e,this.setMouseOffset(t,this.nodes[e]),!1===this.dragging&&(this.simulation.alpha(.1),this.simulation.restart(),this.setMouseOffset())},dragEnd:function(){var t=this.nodes[this.dragging];t&&!t.pinned&&(t.fx=null,t.fy=null),this.dragStart(!1)},nodeClick:function(t,e){this.$emit("node-click",t,e)},linkClick:function(t,e){this.$emit("link-click",t,e)},setMouseOffset:function(t,e){var n=0,i=0;if(t&&e){var o=this.clientPos(t);n=o.x?o.x-e.x:e.x,i=o.y?o.y-e.y:e.y}this.mouseOfst={x:n,y:i}},screenShot:function(t,e,n,i){var o,r=this,s=[];this.canvas?(n=!1,o=this.$refs.canvas.canvasScreenShot,s=[e]):(o=this.$refs.svg.svgScreenShot,s=[n,e,i]),n&&(t=t||"export.svg"),o.apply(void 0,[function(e,i){e||(n?fe.download(i,t):fe.save(i,t)),r.$emit("screen-shot",e)}].concat(p(s)))}}},me=ve,ge=(n("59a0"),te(me,ee,ne,!1,null,null,null)),ye=ge.exports;e["default"]=ye}})["default"]})},a5de:function(t,e,n){},a5f4:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("cc26"),c=n("9757"),l=n("3a92"),u=n("c146");function d(t,e,n){var i=new a.SRoutingHandle;return i.type="junction"===t?"routing-point":"volatile-routing-point",i.kind=t,i.pointIndex=n,i}function h(t){var e=t.routingPoints.length,n=t.id;t.add(d("line",n,-1));for(var i=0;i<e;i++)t.add(d("junction",n,i)),t.add(d("line",n,i))}e.createRoutingHandle=d,e.createRoutingHandles=h;var f=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.elementsToActivate=t,this.elementsToDeactivate=e,this.kind=p.KIND}return t}();e.SwitchEditModeAction=f;var p=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.elementsToActivate=[],n.elementsToDeactivate=[],n.handlesToRemove=[],n}return i(e,t),e.prototype.execute=function(t){var e=this,n=t.root.index;return this.action.elementsToActivate.forEach(function(t){var i=n.getById(t);void 0!==i&&e.elementsToActivate.push(i)}),this.action.elementsToDeactivate.forEach(function(t){var i=n.getById(t);if(void 0!==i&&e.elementsToDeactivate.push(i),i instanceof a.SRoutingHandle&&a.isRoutable(i.parent)){var o=i.parent;e.shouldRemoveHandle(i,o)&&(e.handlesToRemove.push({handle:i,parent:o}),e.elementsToDeactivate.push(o),e.elementsToActivate.push(o))}}),this.doExecute(t)},e.prototype.doExecute=function(t){return this.handlesToRemove.forEach(function(t){t.point=t.parent.routingPoints.splice(t.handle.pointIndex,1)[0]}),this.elementsToDeactivate.forEach(function(t){a.isRoutable(t)&&t instanceof l.SParentElement?t.removeAll(function(t){return t instanceof a.SRoutingHandle}):t instanceof a.SRoutingHandle&&(t.editMode=!1)}),this.elementsToActivate.forEach(function(t){a.canEditRouting(t)&&t instanceof l.SParentElement?h(t):t instanceof a.SRoutingHandle&&(t.editMode=!0)}),t.root},e.prototype.shouldRemoveHandle=function(t,e){if("junction"===t.kind){var n=e.route();return void 0===n.find(function(e){return e.pointIndex===t.pointIndex})}return!1},e.prototype.undo=function(t){return this.handlesToRemove.forEach(function(t){void 0!==t.point&&t.parent.routingPoints.splice(t.handle.pointIndex,0,t.point)}),this.elementsToActivate.forEach(function(t){a.isRoutable(t)&&t instanceof l.SParentElement?t.removeAll(function(t){return t instanceof a.SRoutingHandle}):t instanceof a.SRoutingHandle&&(t.editMode=!1)}),this.elementsToDeactivate.forEach(function(t){a.canEditRouting(t)&&t instanceof l.SParentElement?h(t):t instanceof a.SRoutingHandle&&(t.editMode=!0)}),t.root},e.prototype.redo=function(t){return this.doExecute(t)},e.KIND="switchEditMode",e=o([s.injectable(),r("design:paramtypes",[f])],e),e}(c.Command);e.SwitchEditModeCommand=p;var v=function(){function t(t,e){void 0===e&&(e=!0),this.moves=t,this.animate=e,this.kind=m.KIND}return t}();e.MoveRoutingHandleAction=v;var m=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedMoves=new Map,n.originalRoutingPoints=new Map,n}return i(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.moves.forEach(function(t){var i=e.resolve(t,n.index);if(void 0!==i){e.resolvedMoves.set(i.elementId,i);var o=i.parent;a.isRoutable(o)&&e.originalRoutingPoints.set(o.id,o.routingPoints.slice())}}),this.action.animate?new g(n,this.resolvedMoves,this.originalRoutingPoints,t).start():this.doMove(t)},e.prototype.resolve=function(t,e){var n=e.getById(t.elementId);if(n instanceof a.SRoutingHandle)return{elementId:t.elementId,element:n,parent:n.parent,fromPosition:t.fromPosition,toPosition:t.toPosition}},e.prototype.doMove=function(t){return this.resolvedMoves.forEach(function(t){var e=t.element,n=t.parent;if(a.isRoutable(n)){var i=n.routingPoints,o=e.pointIndex;"line"===e.kind&&(e.kind="junction",e.type="routing-point",i.splice(o+1,0,t.fromPosition||i[Math.max(o,0)]),n.children.forEach(function(t){t instanceof a.SRoutingHandle&&(t===e||t.pointIndex>o)&&t.pointIndex++}),n.add(d("line",n.id,o)),n.add(d("line",n.id,o+1)),o++),o>=0&&o<i.length&&(i[o]=t.toPosition)}}),t.root},e.prototype.undo=function(t){var e=this;return this.action.animate?new g(t.root,this.resolvedMoves,this.originalRoutingPoints,t,!0).start():(this.resolvedMoves.forEach(function(t){var n=t.parent,i=e.originalRoutingPoints.get(n.id);void 0!==i&&a.isRoutable(n)&&(n.routingPoints=i,n.removeAll(function(t){return t instanceof a.SRoutingHandle}),h(n))}),t.root)},e.prototype.redo=function(t){return this.action.animate?new g(t.root,this.resolvedMoves,this.originalRoutingPoints,t,!1).start():this.doMove(t)},e.KIND="moveHandle",e=o([s.injectable(),r("design:paramtypes",[v])],e),e}(c.Command);e.MoveRoutingHandleCommand=m;var g=function(t){function e(e,n,i,o,r){void 0===r&&(r=!1);var s=t.call(this,o)||this;return s.model=e,s.handleMoves=n,s.originalRoutingPoints=i,s.reverse=r,s}return i(e,t),e.prototype.tween=function(t){var e=this;return this.handleMoves.forEach(function(n){var i=n.parent;if(a.isRoutable(i)&&void 0!==n.fromPosition){if(e.reverse&&1===t){var o=e.originalRoutingPoints.get(i.id);if(void 0!==o)return i.routingPoints=o,i.removeAll(function(t){return t instanceof a.SRoutingHandle}),void h(i)}var r=i.routingPoints,s=n.element.pointIndex;s>=0&&s<r.length&&(e.reverse?r[s]={x:(1-t)*n.toPosition.x+t*n.fromPosition.x,y:(1-t)*n.toPosition.y+t*n.fromPosition.y}:r[s]={x:(1-t)*n.fromPosition.x+t*n.toPosition.x,y:(1-t)*n.fromPosition.y+t*n.toPosition.y})}}),this.model},e}(u.Animation);e.MoveHandlesAnimation=g},a663:function(t,e,n){"use strict";var i=n("84fd"),o=n.n(i);o.a},a8af:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3");function o(t){return t instanceof RangeError||t.message===i.STACK_OVERFLOW}e.isStackOverflowExeption=o},ac29:function(t,e,n){"use strict";var i=n("01d4"),o=n("4cdf"),r=n("0b2d"),s=n("de46"),a=n("e269"),c=n("a568"),l=n("1e8d"),u=n("cef7"),d=n("06f8"),h=(n("0af5"),n("57cb")),f=n("f822"),p=n("f623"),v=n("7a09"),m=n("47e4"),g=n("9a44"),y=n("88da"),b=n("5dca"),_=n("f403"),w=n("5bc3"),S=n("4105"),E=n("bf62"),x=n("3e6b"),C=n("5831"),O=n("6c77"),T={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I={DRAWSTART:"drawstart",DRAWEND:"drawend"},M=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u["a"]),k=function(t){function e(e){var n=e;n.stopDown||(n.stopDown=h["a"]),t.call(this,n),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=A(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===T.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:h["b"];var i=e.geometryFunction;if(!i)if(this.type_===p["a"].CIRCLE)i=function(t,e){var n=e||new f["a"]([NaN,NaN]),i=Object(c["g"])(t[0],t[1]);return n.setCenterAndRadius(t[0],Math.sqrt(i)),n};else{var o,r=this.mode_;r===T.POINT?o=_["a"]:r===T.LINE_STRING?o=v["a"]:r===T.POLYGON&&(o=w["a"]),i=function(t,e){var n=e;return n?r===T.POLYGON?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new o(t),n}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new x["a"]({source:new C["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:P(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:d["g"],this.freehandCondition_,e.freehand?this.freehandCondition_=d["c"]:this.freehandCondition_=e.freehandCondition?e.freehandCondition:d["i"],Object(l["a"])(this,Object(a["b"])(E["a"].ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===i["a"].CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==T.POINT&&this.freehandCondition_(e);var n=e.type===r["a"].POINTERMOVE,o=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===r["a"].POINTERDRAG){var s=Date.now();s-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===r["a"].POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),o=!1):this.freehand_&&e.type===r["a"].POINTERDOWN?o=!1:n?(o=e.type===r["a"].POINTERMOVE,o&&this.freehand_?o=this.handlePointerMove_(e):(e.pointerEvent.pointerType==b["b"]||e.type===r["a"].POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===r["a"].DBLCLICK&&(o=!1),t.prototype.handleEvent.call(this,e)&&o},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new s["a"](r["a"].POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var n=this.mode_===T.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||n?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===T.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,i=e[0]-n[0],o=e[1]-n[1],r=i*i+o*o;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,i=[this.finishCoordinate_];if(this.mode_===T.LINE_STRING)n=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===T.POLYGON){var o=this.sketchCoords_;n=o[0].length>this.minPoints_,i=[o[0][0],o[0][o[0].length-2]]}if(n)for(var r=t.map,s=0,a=i.length;s<a;s++){var c=i[s],l=r.getPixelFromCoordinate(c),u=t.pixel,d=u[0]-l[0],h=u[1]-l[1],f=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(d*d+h*h)<=f,e){this.finishCoordinate_=c;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_){var n=this.sketchPoint_.getGeometry();n.setCoordinates(e)}else this.sketchPoint_=new o["a"](new _["a"](e)),this.updateSketchFeatures_()},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===T.POINT?this.sketchCoords_=e.slice():this.mode_===T.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o["a"](new v["a"](this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o["a"],this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new M(I.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,n,i,r=t.coordinate,s=this.sketchFeature_.getGeometry();if(this.mode_===T.POINT?n=this.sketchCoords_:this.mode_===T.POLYGON?(e=this.sketchCoords_[0],n=e[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):(e=this.sketchCoords_,n=e[e.length-1]),n[0]=r[0],n[1]=r[1],this.geometryFunction_(this.sketchCoords_,s),this.sketchPoint_){var a=this.sketchPoint_.getGeometry();a.setCoordinates(r)}if(s.getType()==p["a"].POLYGON&&this.mode_!==T.POLYGON){this.sketchLine_||(this.sketchLine_=new o["a"]);var c=s.getLinearRing(0);i=this.sketchLine_.getGeometry(),i?(i.setFlatCoordinates(c.getLayout(),c.getFlatCoordinates()),i.changed()):(i=new v["a"](c.getFlatCoordinates(),c.getLayout()),this.sketchLine_.setGeometry(i))}else this.sketchLineCoords_&&(i=this.sketchLine_.getGeometry(),i.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,n,i=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===T.LINE_STRING?(this.finishCoordinate_=i.slice(),n=this.sketchCoords_,n.length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(i.slice()),this.geometryFunction_(n,o)):this.mode_===T.POLYGON&&(n=this.sketchCoords_[0],n.length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(i.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e,n=this.sketchFeature_.getGeometry();this.mode_===T.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,n),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===T.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),e=this.sketchLine_.getGeometry(),e.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,n)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry();this.mode_===T.LINE_STRING?(e.pop(),this.geometryFunction_(e,n)):this.mode_===T.POLYGON&&(e[0].pop(),this.geometryFunction_(e,n),e=n.getCoordinates()),this.type_===p["a"].MULTI_POINT?t.setGeometry(new g["a"]([e])):this.type_===p["a"].MULTI_LINE_STRING?t.setGeometry(new m["a"]([e])):this.type_===p["a"].MULTI_POLYGON&&t.setGeometry(new y["a"]([e])),this.dispatchEvent(new M(I.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry(),n=e;this.sketchFeature_=t,this.sketchCoords_=n.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new M(I.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(S["b"]);function P(){var t=Object(O["b"])();return function(e,n){return t[e.getGeometry().getType()]}}function A(t){var e;return t===p["a"].POINT||t===p["a"].MULTI_POINT?e=T.POINT:t===p["a"].LINE_STRING||t===p["a"].MULTI_LINE_STRING?e=T.LINE_STRING:t===p["a"].POLYGON||t===p["a"].MULTI_POLYGON?e=T.POLYGON:t===p["a"].CIRCLE&&(e=T.CIRCLE),e}e["a"]=k},ac2a:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("dd02"),s=n("a2e1"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getChildrenSize=function(t,e,n){var i=-1,o=-1;return t.children.forEach(function(t){var e=n.getBoundsData(t).bounds;void 0!==e&&r.isValidDimension(e)&&(i=Math.max(i,e.width),o=Math.max(o,e.height))}),{width:i,height:o}},e.prototype.layoutChild=function(t,e,n,i,o,r,s,a){var c=this.getDx(i.hAlign,n,s),l=this.getDy(i.vAlign,n,a);return e.bounds={x:o.paddingLeft+t.bounds.x-n.x+c,y:o.paddingTop+t.bounds.y-n.y+l,width:n.width,height:n.height},e.boundsChanged=!0,r},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hAlign:"center",vAlign:"center"}},e.prototype.spread=function(t,e){return o({},t,e)},e.KIND="stack",e}(s.AbstractLayout);e.StackLayouter=a},ac8e:function(t,e,n){},ad0b:function(t,e,n){"use strict";var i=n("d988"),o=n.n(i);o.a},aff7:function(t,e,n){"use strict";var i=n("7bae"),o=n.n(i);o.a},b2da:function(t,e,n){(function(e,i){t.exports=i(n("3900"),n("35a7"))})(0,function(t,e){"use strict";t="default"in t?t["default"]:t;var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(i):void 0},r=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},a="layer-switcher-",c=function(t){function c(t){n(this,c);var e=t||{},i=e.tipLabel?e.tipLabel:"Legend",o=document.createElement("div"),r=s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,{element:o,target:e.target}));r.groupSelectStyle=c.getGroupSelectStyle(e.groupSelectStyle),r.reverse=!1!==e.reverse,r.mapListeners=[],r.hiddenClassName="ol-unselectable ol-control layer-switcher",c.isTouchDevice_()&&(r.hiddenClassName+=" touch"),r.shownClassName="shown",o.className=r.hiddenClassName;var a=document.createElement("button");a.setAttribute("title",i),o.appendChild(a),r.panel=document.createElement("div"),r.panel.className="panel",o.appendChild(r.panel),c.enableTouchScroll_(r.panel);var l=r;return a.onmouseover=function(t){l.showPanel()},a.onclick=function(t){t=t||window.event,l.showPanel(),t.preventDefault()},l.panel.onmouseout=function(t){t=t||window.event,l.panel.contains(t.toElement||t.relatedTarget)||l.hidePanel()},r}return r(c,t),i(c,[{key:"setMap",value:function(t){for(var n=0;n<this.mapListeners.length;n++)e.unByKey(this.mapListeners[n]);if(this.mapListeners.length=0,o(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"setMap",this).call(this,t),t){var i=this;this.mapListeners.push(t.on("pointerdown",function(){i.hidePanel()})),this.renderPanel()}}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){this.dispatchEvent({type:"render"}),c.renderPanel(this.getMap(),this.panel,{groupSelectStyle:this.groupSelectStyle,reverse:this.reverse}),this.dispatchEvent({type:"rendercomplete"})}}],[{key:"renderPanel",value:function(t,e,n){var i=new Event("render");e.dispatchEvent(i),n=n||{},n.groupSelectStyle=c.getGroupSelectStyle(n.groupSelectStyle),c.ensureTopVisibleBaseLayerShown_(t);while(e.firstChild)e.removeChild(e.firstChild);c.forEachRecursive(t,function(t,e,n){t.set("indeterminate",!1)}),"children"===n.groupSelectStyle||"none"===n.groupSelectStyle?c.setGroupVisibility(t):"group"===n.groupSelectStyle&&c.setChildVisibility(t);var o=document.createElement("ul");e.appendChild(o),c.renderLayers_(t,t,o,n,function(i){c.renderPanel(t,e,n)});var r=new Event("rendercomplete");e.dispatchEvent(r)}},{key:"isBaseGroup",value:function(t){var e=t.getLayers?t.getLayers().getArray():[];return e.length&&"base"===e[0].get("type")}},{key:"setGroupVisibility",value:function(t){var e=c.getGroupsAndLayers(t,function(t){return t.getLayers&&!t.get("combine")&&!c.isBaseGroup(t)}).reverse();e.forEach(function(t){var e=t.getLayersArray().map(function(t){var e=t.getVisible();return e});e.every(function(t){return!0===t})?(t.setVisible(!0),t.set("indeterminate",!1)):e.every(function(t){return!1===t})?(t.setVisible(!1),t.set("indeterminate",!1)):(t.setVisible(!0),t.set("indeterminate",!0))})}},{key:"setChildVisibility",value:function(t){var e=c.getGroupsAndLayers(t,function(t){return t.getLayers&&!t.get("combine")&&!c.isBaseGroup(t)});e.forEach(function(t){var e=t.getVisible(),n=t.get("indeterminate");t.getLayers().getArray().forEach(function(t){t.set("indeterminate",!1),e&&!n||!t.getVisible()||t.set("indeterminate",!0)})})}},{key:"ensureTopVisibleBaseLayerShown_",value:function(t){var e;c.forEachRecursive(t,function(t,n,i){"base"===t.get("type")&&t.getVisible()&&(e=t)}),e&&c.setVisible_(t,e,!0)}},{key:"getGroupsAndLayers",value:function(t,e){var n=[];return e=e||function(t,e,n){return!0},c.forEachRecursive(t,function(t,i,o){t.get("title")&&e(t,i,o)&&n.push(t)}),n}},{key:"setVisible_",value:function(t,e,n,i){e.setVisible(n),n&&"base"===e.get("type")&&c.forEachRecursive(t,function(t,n,i){t!=e&&"base"===t.get("type")&&t.setVisible(!1)}),e.getLayers&&!e.get("combine")&&"children"===i&&e.getLayers().forEach(function(n){c.setVisible_(t,n,e.getVisible(),i)})}},{key:"renderLayer_",value:function(t,e,n,i,o){var r=document.createElement("li"),s=e.get("title"),l=c.uuid(),u=document.createElement("label");if(e.getLayers&&!e.get("combine")){var d=c.isBaseGroup(e);if(r.classList.add("group"),d&&r.classList.add(a+"base-group"),e.get("fold")){r.classList.add(a+"fold"),r.classList.add(a+e.get("fold"));var h=document.createElement("button");h.onclick=function(t){t=t||window.event,c.toggleFold_(e,r),t.preventDefault()},r.appendChild(h)}if(!d&&"none"!=i.groupSelectStyle){var f=document.createElement("input");f.type="checkbox",f.id=l,f.checked=e.getVisible(),f.indeterminate=e.get("indeterminate"),f.onchange=function(n){c.setVisible_(t,e,n.target.checked,i.groupSelectStyle),o(e)},r.appendChild(f),u.htmlFor=l}u.innerHTML=s,r.appendChild(u);var p=document.createElement("ul");r.appendChild(p),c.renderLayers_(t,e,p,i,o)}else{r.className="layer";var v=document.createElement("input");"base"===e.get("type")?(v.type="radio",v.name="base"):v.type="checkbox",v.id=l,v.checked=e.get("visible"),v.indeterminate=e.get("indeterminate"),v.onchange=function(n){c.setVisible_(t,e,n.target.checked,i.groupSelectStyle),o(e)},r.appendChild(v),u.htmlFor=l,u.innerHTML=s;var m=t.getView().getResolution();(m>e.getMaxResolution()||m<e.getMinResolution())&&(u.className+=" disabled"),r.appendChild(u)}return r}},{key:"renderLayers_",value:function(t,e,n,i,o){var r=e.getLayers().getArray().slice();i.reverse&&(r=r.reverse());for(var s,a=0;a<r.length;a++)s=r[a],s.get("title")&&n.appendChild(c.renderLayer_(t,s,a,i,o))}},{key:"forEachRecursive",value:function(t,e){t.getLayers().forEach(function(t,n,i){e(t,n,i),t.getLayers&&c.forEachRecursive(t,e)})}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}},{key:"enableTouchScroll_",value:function(t){if(c.isTouchDevice_()){var e=0;t.addEventListener("touchstart",function(t){e=this.scrollTop+t.touches[0].pageY},!1),t.addEventListener("touchmove",function(t){this.scrollTop=e-t.touches[0].pageY},!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}},{key:"toggleFold_",value:function(t,e){e.classList.remove(a+t.get("fold")),t.set("fold","open"===t.get("fold")?"close":"open"),e.classList.add(a+t.get("fold"))}},{key:"getGroupSelectStyle",value:function(t){return["none","children","group"].indexOf(t)>=0?t:"children"}}]),c}(t);return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=c),c})},b485:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("3b4c"),r=n("3623"),s=n("1f89"),a=function(){function t(e){this.elementId=e,this.kind=t.KIND}return t.KIND="open",t}();e.OpenAction=a;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.doubleClick=function(t,e){var n=r.findParentByFeature(t,s.isOpenable);return void 0!==n?[new a(n.id)]:[]},e}(o.MouseListener);e.OpenMouseListener=c},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n("1fb5"),o=n("9152"),r=n("e3db");function s(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=l.prototype):(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return u(this,t,e,n)}function u(t,e,n,i){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?m(t,e,n,i):"string"===typeof e?p(t,e,n):g(t,e)}function d(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e,n,i){return d(e),e<=0?c(t,e):void 0!==n?"string"===typeof i?c(t,e).fill(n,i):c(t,e).fill(n):c(t,e)}function f(t,e){if(d(e),t=c(t,e<0?0:0|y(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|_(e,n);t=c(t,i);var o=t.write(e,n);return o!==i&&(t=t.slice(0,o)),t}function v(t,e){var n=e.length<0?0:0|y(e.length);t=c(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function m(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),l.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=l.prototype):t=v(t,e),t}function g(t,e){if(l.isBuffer(e)){var n=0|y(e.length);return t=c(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?c(t,0):v(t,e);if("Buffer"===e.type&&r(e.data))return v(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),l.alloc(+t)}function _(t,e){if(l.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(t).length;default:if(i)return X(t).length;e=(""+e).toLowerCase(),i=!0}}function w(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return D(this,e,n);case"base64":return P(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function S(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function E(t,e,n,i,o){if(0===t.length)return-1;if("string"===typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:x(t,e,n,i,o);if("number"===typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):x(t,[e],n,i,o);throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,i,o){var r,s=1,a=t.length,c=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var u=-1;for(r=n;r<a;r++)if(l(t,r)===l(e,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===c)return u*s}else-1!==u&&(r-=r-u),u=-1}else for(n+c>a&&(n=a-c),r=n;r>=0;r--){for(var d=!0,h=0;h<c;h++)if(l(t,r+h)!==l(e,h)){d=!1;break}if(d)return r}return-1}function C(t,e,n,i){n=Number(n)||0;var o=t.length-n;i?(i=Number(i),i>o&&(i=o)):i=o;var r=e.length;if(r%2!==0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function O(t,e,n,i){return tt(X(e,t.length-n),t,n,i)}function T(t,e,n,i){return tt(Z(e),t,n,i)}function I(t,e,n,i){return T(t,e,n,i)}function M(t,e,n,i){return tt(J(e),t,n,i)}function k(t,e,n,i){return tt(Q(e,t.length-n),t,n,i)}function P(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);var i=[],o=e;while(o<n){var r,s,a,c,l=t[o],u=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:r=t[o+1],128===(192&r)&&(c=(31&l)<<6|63&r,c>127&&(u=c));break;case 3:r=t[o+1],s=t[o+2],128===(192&r)&&128===(192&s)&&(c=(15&l)<<12|(63&r)<<6|63&s,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:r=t[o+1],s=t[o+2],a=t[o+3],128===(192&r)&&128===(192&s)&&128===(192&a)&&(c=(15&l)<<18|(63&r)<<12|(63&s)<<6|63&a,c>65535&&c<1114112&&(u=c))}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),o+=d}return L(i)}e.Buffer=l,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:s(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return h(null,t,e,n)},l.allocUnsafe=function(t){return f(null,t)},l.allocUnsafeSlow=function(t){return f(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,r=Math.min(n,i);o<r;++o)if(t[o]!==e[o]){n=t[o],i=e[o];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},l.byteLength=_,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)S(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)S(this,e,e+3),S(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)S(this,e,e+7),S(this,e+1,e+6),S(this,e+2,e+5),S(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):w.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),e<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var r=o-i,s=n-e,a=Math.min(r,s),c=this.slice(i,o),u=t.slice(e,n),d=0;d<a;++d)if(c[d]!==u[d]){r=c[d],s=u[d];break}return r<s?-1:s<r?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return E(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return E(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return C(this,t,e,n);case"utf8":case"utf-8":return O(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return I(this,t,e,n);case"base64":return M(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function L(t){var e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);var n="",i=0;while(i<e)n+=String.fromCharCode.apply(String,t.slice(i,i+=N));return n}function R(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(127&t[o]);return i}function D(t,e,n){var i="";n=Math.min(t.length,n);for(var o=e;o<n;++o)i+=String.fromCharCode(t[o]);return i}function j(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var o="",r=e;r<n;++r)o+=W(t[r]);return o}function B(t,e,n){for(var i=t.slice(e,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function F(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,i,o,r){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<r)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function V(t,e,n,i){e<0&&(e=65535+e+1);for(var o=0,r=Math.min(t.length-n,2);o<r;++o)t[n+o]=(e&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function U(t,e,n,i){e<0&&(e=4294967295+e+1);for(var o=0,r=Math.min(t.length-n,4);o<r;++o)t[n+o]=e>>>8*(i?o:3-o)&255}function q(t,e,n,i,o,r){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Y(t,e,n,i,r){return r||q(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),o.write(t,e,n,i,23,4),n+4}function $(t,e,n,i,r){return r||q(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),o.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=l.prototype;else{var o=e-t;n=new l(o,void 0);for(var r=0;r<o;++r)n[r]=this[r+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=this[t],o=1,r=0;while(++r<e&&(o*=256))i+=this[t+r]*o;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=this[t+--e],o=1;while(e>0&&(o*=256))i+=this[t+--e]*o;return i},l.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=this[t],o=1,r=0;while(++r<e&&(o*=256))i+=this[t+r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=e,o=1,r=this[t+--i];while(i>0&&(o*=256))r+=this[t+--i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r},l.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var o=Math.pow(2,8*n)-1;z(this,t,e,n,o,0)}var r=1,s=0;this[e]=255&t;while(++s<n&&(r*=256))this[e+s]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var o=Math.pow(2,8*n)-1;z(this,t,e,n,o,0)}var r=n-1,s=1;this[e+r]=255&t;while(--r>=0&&(s*=256))this[e+r]=t/s&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):U(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=Math.pow(2,8*n-1);z(this,t,e,n,o-1,-o)}var r=0,s=1,a=0;this[e]=255&t;while(++r<n&&(s*=256))t<0&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var o=Math.pow(2,8*n-1);z(this,t,e,n,o-1,-o)}var r=n-1,s=1,a=0;this[e+r]=255&t;while(--r>=0&&(s*=256))t<0&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):U(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):U(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return Y(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return Y(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return $(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return $(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o,r=i-n;if(this===t&&n<e&&e<i)for(o=r-1;o>=0;--o)t[o+e]=this[o+n];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+r),e);return r},l.prototype.fill=function(t,e,n,i){if("string"===typeof t){if("string"===typeof e?(i=e,e=0,n=this.length):"string"===typeof n&&(i=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var r;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(r=e;r<n;++r)this[r]=t;else{var s=l.isBuffer(t)?t:X(new l(t,i).toString()),a=s.length;for(r=0;r<n-e;++r)this[r+e]=s[r%a]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function H(t){if(t=K(t).replace(G,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function K(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t,e){var n;e=e||1/0;for(var i=t.length,o=null,r=[],s=0;s<i;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&r.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;r.push(n)}else if(n<2048){if((e-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function Z(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function Q(t,e){for(var n,i,o,r=[],s=0;s<t.length;++s){if((e-=2)<0)break;n=t.charCodeAt(s),i=n>>8,o=n%256,r.push(o),r.push(i)}return r}function J(t){return i.toByteArray(H(t))}function tt(t,e,n,i){for(var o=0;o<i;++o){if(o+n>=e.length||o>=t.length)break;e[o+n]=t[o]}return o}function et(t){return t!==t}}).call(this,n("c8ba"))},b669:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("fba3");function o(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(r(t)!==e)return!1;if(i.isMac()){if(t.ctrlKey!==n.findIndex(function(t){return"ctrl"===t})>=0)return!1;if(t.metaKey!==n.findIndex(function(t){return"meta"===t||"ctrlCmd"===t})>=0)return!1}else{if(t.ctrlKey!==n.findIndex(function(t){return"ctrl"===t||"ctrlCmd"===t})>=0)return!1;if(t.metaKey!==n.findIndex(function(t){return"meta"===t})>=0)return!1}return t.altKey===n.findIndex(function(t){return"alt"===t})>=0&&t.shiftKey===n.findIndex(function(t){return"shift"===t})>=0}function r(t){if(t.keyCode){var e=s[t.keyCode];if(void 0!==e)return e}return t.code}e.matchesKeystroke=o,e.getActualCode=r;var s=new Array(256);(function(){function t(t,e){void 0===s[e]&&(s[e]=t)}t("Pause",3),t("Backspace",8),t("Tab",9),t("Enter",13),t("ShiftLeft",16),t("ShiftRight",16),t("ControlLeft",17),t("ControlRight",17),t("AltLeft",18),t("AltRight",18),t("CapsLock",20),t("Escape",27),t("Space",32),t("PageUp",33),t("PageDown",34),t("End",35),t("Home",36),t("ArrowLeft",37),t("ArrowUp",38),t("ArrowRight",39),t("ArrowDown",40),t("Insert",45),t("Delete",46),t("Digit1",49),t("Digit2",50),t("Digit3",51),t("Digit4",52),t("Digit5",53),t("Digit6",54),t("Digit7",55),t("Digit8",56),t("Digit9",57),t("Digit0",48),t("KeyA",65),t("KeyB",66),t("KeyC",67),t("KeyD",68),t("KeyE",69),t("KeyF",70),t("KeyG",71),t("KeyH",72),t("KeyI",73),t("KeyJ",74),t("KeyK",75),t("KeyL",76),t("KeyM",77),t("KeyN",78),t("KeyO",79),t("KeyP",80),t("KeyQ",81),t("KeyR",82),t("KeyS",83),t("KeyT",84),t("KeyU",85),t("KeyV",86),t("KeyW",87),t("KeyX",88),t("KeyY",89),t("KeyZ",90),t("OSLeft",91),t("MetaLeft",91),t("OSRight",92),t("MetaRight",92),t("ContextMenu",93),t("Numpad0",96),t("Numpad1",97),t("Numpad2",98),t("Numpad3",99),t("Numpad4",100),t("Numpad5",101),t("Numpad6",102),t("Numpad7",103),t("Numpad8",104),t("Numpad9",105),t("NumpadMultiply",106),t("NumpadAdd",107),t("NumpadSeparator",108),t("NumpadSubtract",109),t("NumpadDecimal",110),t("NumpadDivide",111),t("F1",112),t("F2",113),t("F3",114),t("F4",115),t("F5",116),t("F6",117),t("F7",118),t("F8",119),t("F9",120),t("F10",121),t("F11",122),t("F12",123),t("F13",124),t("F14",125),t("F15",126),t("F16",127),t("F17",128),t("F18",129),t("F19",130),t("F20",131),t("F21",132),t("F22",133),t("F23",134),t("F24",135),t("NumLock",144),t("ScrollLock",145),t("Semicolon",186),t("Equal",187),t("Comma",188),t("Minus",189),t("Period",190),t("Slash",191),t("Backquote",192),t("IntlRo",193),t("BracketLeft",219),t("Backslash",220),t("BracketRight",221),t("Quote",222),t("IntlYen",255)})()},b878:function(t,e,n){},b8ea:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{staticClass:"shadow-2",staticStyle:{height:"500px",width:"300px",position:"absolute",top:"10px",left:"10px","z-index":"1000"},attrs:{view:"LHh lpR fff",container:""}},[n("q-layout-header",{attrs:{reveal:""}},[n("q-toolbar",[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"menu"}}),n("q-toolbar-title",[t._v("Header")])],1)],1),n("q-layout-footer",[n("q-toolbar",[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"menu"},on:{click:function(e){t.drawer=!t.drawer}}}),n("q-toolbar-title",[t._v("Footer")])],1)],1),n("q-layout-drawer",{attrs:{width:200,breakpoint:300},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},t._l(50,function(e){return n("div",{key:e},[t._v("Drawer")])})),n("q-page-container",[n("q-page",{staticStyle:{"padding-top":"50px"}},t._l(50,function(e){return n("div",{key:e},[t._v("My page")])}))],1)],1)},o=[];i._withStripped=!0;var r=n("3156"),s=n.n(r),a={name:"LayoutViewer",props:{layout:{type:Object,required:!0}},data:function(){return{drawer:!1}},computed:{attributeStyle:function(){return s()({},this.layout.style)}}},c=a,l=(n("7cd7"),n("2877")),u=Object(l["a"])(c,i,o,!1,null,null,null);u.options.__file="KlabLayoutViewer.vue";e["a"]=u.exports},ba30:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd02");function o(t,e,n,i){void 0===i&&(i=0);var o=t.x+e,r=t.y+e,s=o-n.x,a=r-n.y,c=Math.sqrt(s*s+a*a),l=s/c||0,u=a/c||0;return{x:o-l*(e+i),y:r-u*(e+i)}}function r(t,e,n){var i=(t-e.y)/(n.y-e.y);return(n.x-e.x)*i+e.x}function s(t,e,n){var i=(t-e.x)/(n.x-e.x);return(n.y-e.y)*i+e.y}e.computeCircleAnchor=o;var a=function(){function t(t,e){this.centerPoint=t,this.refPoint=e,this.currentDist=-1}return t.prototype.addCandidate=function(t,e){var n=this.refPoint.x-t,i=this.refPoint.y-e,o=n*n+i*i;(this.currentDist<0||o<this.currentDist)&&(this.currentBest={x:t,y:e},this.currentDist=o)},Object.defineProperty(t.prototype,"best",{get:function(){return void 0===this.currentBest?this.centerPoint:this.currentBest},enumerable:!0,configurable:!0}),t}();function c(t,e,n){var o=i.center(t),c=new a(o,e);if(!i.almostEquals(o.y,e.y)){var l=r(t.y,o,e);l>=t.x&&l<=t.x+t.width&&c.addCandidate(l,t.y-n);var u=r(t.y+t.height,o,e);u>=t.x&&u<=t.x+t.width&&c.addCandidate(u,t.y+t.height+n)}if(!i.almostEquals(o.x,e.x)){var d=s(t.x,o,e);d>=t.y&&d<=t.y+t.height&&c.addCandidate(t.x-n,d);var h=s(t.x+t.width,o,e);h>=t.y&&h<=t.y+t.height&&c.addCandidate(t.x+t.width+n,h)}return c.best}e.computeRectangleAnchor=c},ba33:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("30e3");function o(t){if("function"===typeof t){var e=t;return e.name}if("symbol"===typeof t)return t.toString();e=t;return e}function r(t,e,n){var i="",o=n(t,e);return 0!==o.length&&(i="\nRegistered bindings:",o.forEach(function(t){var e="Object";null!==t.implementationType&&(e=u(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)})),i}function s(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||s(t.parentRequest,e))}function a(t){function e(t,n){void 0===n&&(n=[]);var i=o(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}var n=e(t);return n.reverse().join(" --\x3e ")}function c(t){t.childRequests.forEach(function(t){if(s(t,t.serviceIdentifier)){var e=a(t);throw new Error(i.CIRCULAR_DEPENDENCY+" "+e)}c(t)})}function l(t,e){if(e.isTagged()||e.isNamed()){var n="",i=e.getNamedTag(),o=e.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==o&&o.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n}return" "+t}function u(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=o,e.listRegisteredBindingsForServiceIdentifier=r,e.circularDependencyToException=c,e.listMetadataForTarget=l,e.getFunctionName=u},ba8b:function(t,e,n){},bab1:function(t,e,n){},bafd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.context||document;if(!t)return null;var i=[],r=u((0,o.default)(t),i,n),s=void 0;return s=r?1===r.length?r[0]:r:d({type:"text",content:t},i,n),e.hooks&&e.hooks.create&&i.forEach(function(t){e.hooks.create(t)}),s};var i=n("861d"),o=c(i),r=n("2eed"),s=c(r),a=n("6592");function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e,n){return t instanceof Array&&t.length>0?t.map(function(t){return d(t,e,n)}):void 0}function d(t,e,n){var i=void 0;return i="text"===t.type?(0,a.createTextVNode)(t.content,n):(0,s.default)(t.name,h(t,n),u(t.children,e,n)),e.push(i),i}function h(t,e){var n={};if(!t.attrs)return n;var i=Object.keys(t.attrs).reduce(function(n,i){if("style"!==i&&"class"!==i){var o=(0,a.unescapeEntities)(t.attrs[i],e);n?n[i]=o:n=l({},i,o)}return n},null);i&&(n.attrs=i);var o=f(t);o&&(n.style=o);var r=p(t);return r&&(n.class=r),n}function f(t){try{return t.attrs.style.split(";").reduce(function(t,e){var n=e.split(":"),i=(0,a.transformName)(n[0].trim());if(i){var o=n[1].replace("!important","").trim();t?t[i]=o:t=l({},i,o)}return t},null)}catch(t){return null}}function p(t){try{return t.attrs.class.split(" ").reduce(function(t,e){return e=e.trim(),e&&(t?t[e]=!0:t=l({},e,!0)),t},null)}catch(t){return null}}},bb33:function(t,e,n){"use strict";var i=n("bee8"),o=n.n(i);o.a},bb59:function(t,e,n){},bc63:function(t,e,n){},bcbd:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("fba3"),l=n("b669"),u=n("e629"),d=n("3a92"),h=n("3623"),f=n("9757"),p=n("3b4c"),v=n("1417"),m=n("e45b"),g=n("70d9"),y=n("38e8"),b=n("cc26"),_=n("a5f4"),w=n("4c18"),S=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.selectedElementsIDs=t,this.deselectedElementsIDs=e,this.kind=x.KIND}return t}();e.SelectAction=S;var E=function(){function t(t){void 0===t&&(t=!0),this.select=t,this.kind=C.KIND}return t}();e.SelectAllAction=E;var x=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n.deselected=[],n}return i(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.selectedElementsIDs.forEach(function(t){var i=n.index.getById(t);i instanceof d.SChildElement&&w.isSelectable(i)&&e.selected.push({element:i,parent:i.parent,index:i.parent.children.indexOf(i)})}),this.action.deselectedElementsIDs.forEach(function(t){var i=n.index.getById(t);i instanceof d.SChildElement&&w.isSelectable(i)&&e.deselected.push({element:i,parent:i.parent,index:i.parent.children.indexOf(i)})}),this.redo(t)},e.prototype.undo=function(t){for(var e=this.selected.length-1;e>=0;--e){var n=this.selected[e],i=n.element;w.isSelectable(i)&&(i.selected=!1),n.parent.move(i,n.index)}return this.deselected.reverse().forEach(function(t){w.isSelectable(t.element)&&(t.element.selected=!0)}),t.root},e.prototype.redo=function(t){for(var e=0;e<this.selected.length;++e){var n=this.selected[e],i=n.element,o=n.parent.children.length;n.parent.move(i,o-1)}return this.deselected.forEach(function(t){w.isSelectable(t.element)&&(t.element.selected=!1)}),this.selected.forEach(function(t){w.isSelectable(t.element)&&(t.element.selected=!0)}),t.root},e.KIND="elementSelected",e}(f.Command);e.SelectCommand=x;var C=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return i(e,t),e.prototype.execute=function(t){return this.selectAll(t.root,this.action.select),t.root},e.prototype.selectAll=function(t,e){w.isSelectable(t)&&(this.previousSelection[t.id]=t.selected,t.selected=e);for(var n=0,i=t.children;n<i.length;n++){var o=i[n];this.selectAll(o,e)}},e.prototype.undo=function(t){var e=t.root.index;for(var n in this.previousSelection)if(this.previousSelection.hasOwnProperty(n)){var i=e.getById(n);void 0!==i&&w.isSelectable(i)&&(i.selected=this.previousSelection[n])}return t.root},e.prototype.redo=function(t){return this.selectAll(t.root,this.action.select),t.root},e.KIND="allSelected",e}(f.Command);e.SelectAllCommand=C;var O=function(t){function e(e){var n=t.call(this)||this;return n.buttonHandlerRegistry=e,n.wasSelected=!1,n.hasDragged=!1,n}return i(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){if(void 0!==this.buttonHandlerRegistry&&t instanceof y.SButton&&t.enabled){var i=this.buttonHandlerRegistry.get(t.type);if(void 0!==i)return i.buttonPressed(t)}var o=h.findParentByFeature(t,w.isSelectable);if(void 0!==o||t instanceof d.SModelRoot){this.hasDragged=!1;var r=[];if(c.isCtrlOrCmd(e)||(r=u.toArray(t.root.index.all().filter(function(t){return w.isSelectable(t)&&t.selected&&!(o instanceof b.SRoutingHandle&&t===o.parent)}))),void 0!==o)if(o.selected)c.isCtrlOrCmd(e)?(this.wasSelected=!1,n.push(new S([],[o.id])),b.isRoutable(o)&&n.push(new _.SwitchEditModeAction([],[o.id]))):this.wasSelected=!0;else{this.wasSelected=!1,n.push(new S([o.id],r.map(function(t){return t.id})));var s=r.filter(function(t){return b.isRoutable(t)}).map(function(t){return t.id});b.isRoutable(o)?n.push(new _.SwitchEditModeAction([o.id],s)):s.length>0&&n.push(new _.SwitchEditModeAction([],s))}else{n.push(new S([],r.map(function(t){return t.id})));s=r.filter(function(t){return b.isRoutable(t)}).map(function(t){return t.id});s.length>0&&n.push(new _.SwitchEditModeAction([],s))}}}return n},e.prototype.mouseMove=function(t,e){return this.hasDragged=!0,[]},e.prototype.mouseUp=function(t,e){if(0===e.button&&!this.hasDragged){var n=h.findParentByFeature(t,w.isSelectable);if(void 0!==n&&this.wasSelected)return[new S([n.id],[])]}return this.hasDragged=!1,[]},e.prototype.decorate=function(t,e){var n=h.findParentByFeature(e,w.isSelectable);return void 0!==n&&m.setClass(t,"selected",n.selected),t},e=o([s(0,a.inject(g.ButtonHandlerRegistry)),s(0,a.optional()),r("design:paramtypes",[g.ButtonHandlerRegistry])],e),e}(p.MouseListener);e.SelectMouseListener=O;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){if(l.matchesKeystroke(e,"KeyA","ctrlCmd")){var n=u.toArray(t.root.index.all().filter(function(t){return w.isSelectable(t)}).map(function(t){return t.id}));return[new S(n,[])]}return[]},e}(v.KeyListener);e.SelectKeyboardListener=T},bcc9:function(t,e,n){"use strict";var i,o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o.apply(this,arguments)};function r(t){return t&&t.$el||t}function s(t,e,n,i,o){void 0===o&&(o={});var r={left:n,top:i},s=t.height,a=t.width,c=i,l=i+s,u=n,d=n+a,h=o.top||0,f=o.bottom||0,p=o.left||0,v=o.right||0,m=e.top+h,g=e.bottom-f,y=e.left+p,b=e.right-v;return c<m?r.top=m:l>g&&(r.top=g-s),u<y?r.left=y:d>b&&(r.left=b-a),r}Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t["Start"]=1]="Start",t[t["End"]=2]="End",t[t["Move"]=3]="Move"}(i||(i={})),e.Draggable={bind:function(t,n,i,o){e.Draggable.update(t,n,i,o)},update:function(t,e,n,a){if(!e.value||!e.value.stopDragging){var c=e.value&&e.value.handle&&r(e.value.handle)||t;e&&e.value&&e.value.resetInitialPos&&(m(),y()),c.getAttribute("draggable")||(t.removeEventListener("mousedown",t["listener"]),c.addEventListener("mousedown",f),t.removeEventListener("touchstart",t["listener"]),c.addEventListener("touchstart",f,{passive:!1}),c.setAttribute("draggable","true"),t["listener"]=f,m(),y())}function l(n){n.preventDefault();var i=e.value&&e.value.stopDragging;if(!i){var o=b();o.startDragPosition&&o.initialMousePos||(m(n),o=b());var r=p(n),a=r.left-o.initialMousePos.left,c=r.top-o.initialMousePos.top,l={left:o.startDragPosition.left+a,top:o.startDragPosition.top+c},h=u(),f=t.getBoundingClientRect();h&&f&&(l=s(f,h,l.left,l.top,e.value.boundingRectMargin)),g({currentDragPosition:l}),d(),y(n)}}function u(){if(e.value)return e.value.boundingRect||e.value.boundingElement&&e.value.boundingElement.getBoundingClientRect()}function d(){var e=b();e.currentDragPosition&&(t.style.touchAction="none",t.style.position="fixed",t.style.left=e.currentDragPosition.left+"px",t.style.top=e.currentDragPosition.top+"px")}function h(t){t.preventDefault(),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",h);var e=v();g({initialMousePos:void 0,startDragPosition:e,currentDragPosition:e}),y(t,i.End)}function f(t){g({initialMousePos:p(t)}),y(t,i.Start),document.addEventListener("mousemove",l),document.addEventListener("mouseup",h),document.addEventListener("touchmove",l),document.addEventListener("touchend",h)}function p(t){if(t instanceof MouseEvent)return{left:t.clientX,top:t.clientY};if(t instanceof TouchEvent){var e=t.changedTouches[t.changedTouches.length-1];return{left:e.clientX,top:e.clientY}}}function v(){var e=t.getBoundingClientRect();if(e.height&&e.width)return{left:e.left,top:e.top}}function m(t){var n=b(),i=e&&e.value&&e.value.initialPosition,o=n.initialPosition,r=v(),s=i||o||r;g({initialPosition:s,startDragPosition:s,currentDragPosition:s,initialMousePos:p(t)}),d()}function g(t){var e=b(),n=o(o({},e),t);c.setAttribute("draggable-state",JSON.stringify(n))}function y(t,n){var r=b(),s={x:0,y:0};r.currentDragPosition&&r.startDragPosition&&(s.x=r.currentDragPosition.left-r.startDragPosition.left,s.y=r.currentDragPosition.top-r.startDragPosition.top);var a=r.currentDragPosition&&o({},r.currentDragPosition);n===i.End?e.value&&e.value.onDragEnd&&r&&e.value.onDragEnd(s,a,t):n===i.Start?e.value&&e.value.onDragStart&&r&&e.value.onDragStart(s,a,t):e.value&&e.value.onPositionChange&&r&&e.value.onPositionChange(s,a,t)}function b(){return JSON.parse(c.getAttribute("draggable-state"))||{}}}}},be02:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("6923"),l=n("3864"),u=n("9757"),d=function(t){function e(e){var n=t.call(this)||this;return e.forEach(function(t){return n.initializeActionHandler(t)}),n}return i(e,t),e.prototype.registerCommand=function(t){this.register(t.KIND,new u.CommandActionHandler(t))},e.prototype.initializeActionHandler=function(t){t.initialize(this)},e=o([a.injectable(),s(0,a.multiInject(c.TYPES.IActionHandlerInitializer)),s(0,a.optional()),r("design:paramtypes",[Array])],e),e}(l.MultiInstanceRegistry);e.ActionHandlerRegistry=d},bee8:function(t,e,n){},c146:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("987d"),r=function(){function t(t,e){void 0===e&&(e=o.easeInOut),this.context=t,this.ease=e}return t.prototype.start=function(){var t=this;return new Promise(function(e,n){var i=void 0,o=0,r=function(n){var s;o++,void 0===i?(i=n,s=0):s=n-i;var a=Math.min(1,s/t.context.duration),c=t.tween(t.ease(a),t.context);t.context.modelChanged.update(c),1===a?(t.context.logger.log(t,1e3*o/t.context.duration+" fps"),e(c)):t.context.syncer.onNextFrame(r)};if(t.context.syncer.isAvailable())t.context.syncer.onNextFrame(r);else{var s=t.tween(1,t.context);e(s)}})},t}();e.Animation=r;var s=function(t){function e(e,n,i,r){void 0===i&&(i=[]),void 0===r&&(r=o.easeInOut);var s=t.call(this,n,r)||this;return s.model=e,s.context=n,s.components=i,s.ease=r,s}return i(e,t),e.prototype.include=function(t){return this.components.push(t),this},e.prototype.tween=function(t,e){for(var n=0,i=this.components;n<i.length;n++){var o=i[n];o.tween(t,e)}return this.model},e}(r);e.CompoundAnimation=s},c20e:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("b669"),r=n("1417"),s=function(){function t(){this.kind=t.KIND}return t.KIND="undo",t}();e.UndoAction=s;var a=function(){function t(){this.kind=t.KIND}return t.KIND="redo",t}();e.RedoAction=a;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return o.matchesKeystroke(e,"KeyZ","ctrlCmd")?[new s]:o.matchesKeystroke(e,"KeyZ","ctrlCmd","shift")?[new a]:[]},e}(r.KeyListener);e.UndoRedoKeyListener=c},c23f:function(t,e,n){},c278:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4"),o=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){var e=Reflect.getMetadata(i.PARAM_TYPES,t),n=Reflect.getMetadata(i.TAGGED,t);return{compilerGeneratedMetadata:e,userGeneratedMetadata:n||{}}},t.prototype.getPropertiesMetadata=function(t){var e=Reflect.getMetadata(i.TAGGED_PROP,t)||[];return e},t}();e.MetadataReader=o},c31b:function(t,e,n){"use strict";var i=n("66a6"),o=n.n(i);o.a},c444:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("9757"),r=n("c146"),s=n("5eb6"),a=function(){function t(t,e,n){this.elementId=t,this.newViewport=e,this.animate=n,this.kind=c.KIND}return t}();e.ViewportAction=a;var c=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.newViewport=e.newViewport,n}return i(e,t),e.prototype.execute=function(t){var e=t.root,n=e.index.getById(this.action.elementId);if(n&&s.isViewport(n)){if(this.element=n,this.oldViewport={scroll:this.element.scroll,zoom:this.element.zoom},this.action.animate)return new l(this.element,this.oldViewport,this.newViewport,t).start();this.element.scroll=this.newViewport.scroll,this.element.zoom=this.newViewport.zoom}return e},e.prototype.undo=function(t){return new l(this.element,this.newViewport,this.oldViewport,t).start()},e.prototype.redo=function(t){return new l(this.element,this.oldViewport,this.newViewport,t).start()},e.prototype.merge=function(t,n){return!this.action.animate&&t instanceof e&&this.element===t.element&&(this.newViewport=t.newViewport,!0)},e.KIND="viewport",e}(o.MergeableCommand);e.ViewportCommand=c;var l=function(t){function e(e,n,i,o){var r=t.call(this,o)||this;return r.element=e,r.oldViewport=n,r.newViewport=i,r.context=o,r.zoomFactor=Math.log(i.zoom/n.zoom),r}return i(e,t),e.prototype.tween=function(t,e){return this.element.scroll={x:(1-t)*this.oldViewport.scroll.x+t*this.newViewport.scroll.x,y:(1-t)*this.oldViewport.scroll.y+t*this.newViewport.scroll.y},this.element.zoom=this.oldViewport.zoom*Math.exp(t*this.zoomFactor),e.root},e}(r.Animation);e.ViewportAnimation=l},c4e6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("bcbd"),s=new i.ContainerModule(function(t){t(o.TYPES.ICommand).toConstructor(r.SelectCommand),t(o.TYPES.ICommand).toConstructor(r.SelectAllCommand),t(o.TYPES.KeyListener).to(r.SelectKeyboardListener),t(o.TYPES.MouseListener).to(r.SelectMouseListener)});e.default=s},c4ec:function(t,e,n){var i=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,o=n("4047");t.exports=function(t){var e,n=0,r=!0,s={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(i,function(i){if("="===i)return r=!0,void n++;r?0===n?((o[i]||"/"===t.charAt(t.length-2))&&(s.voidElement=!0),s.name=i):(s.attrs[e]=i.replace(/^['"]|['"]$/g,""),e=void 0):(e&&(s.attrs[e]=e),e=i),n++,r=!1}),s}},c51d:function(t,e,n){},c58e:function(t,e,n){},c5f4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},c612:function(t,e,n){"use strict";var i=n("8b1b"),o=n.n(i);o.a},c622:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("77d3"),o=function(){function t(t,e,n,o,r){this.id=i.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=r,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,i){var o=new t(e,this.parentContext,this,n,i);return this.childRequests.push(o),o},t}();e.Request=o},c7c3:function(t,e,n){"use strict";var i=n("3e33"),o=n.n(i);o.a},c807:function(t,e,n){"use strict";var i=n("1300"),o=n("e300"),r=n("183a"),s=n("4cdf"),a=n("0b2d"),c=n("9f5e"),l=n("a568"),u=n("1e8d"),d=n("cef7"),h=n("01d4"),f=n("06f8"),p=n("0af5"),v=n("f623"),m=n("f403"),g=n("4105"),y=n("3e6b"),b=n("5831"),_=n("a43f"),w=n("4a7d"),S=n("6c77"),E=0,x=1,C={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},O=function(t){function e(e,n,i){t.call(this,e),this.features=n,this.mapBrowserEvent=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(d["a"]),T=function(t){function e(e){var n;if(t.call(this,e),this.condition_=e.condition?e.condition:f["h"],this.defaultDeleteCondition_=function(t){return Object(f["a"])(t)&&Object(f["j"])(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:f["c"],this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new w["a"],this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new y["a"]({source:new b["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:P(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,n=new o["a"](this.source_.getFeatures()),Object(u["a"])(this.source_,_["a"].ADDFEATURE,this.handleSourceAdd_,this),Object(u["a"])(this.source_,_["a"].REMOVEFEATURE,this.handleSourceRemove_,this)):n=e.features,!n)throw new Error("The modify interaction requires features or a source");this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),Object(u["a"])(this.features_,r["a"].ADD,this.handleFeatureAdd_,this),Object(u["a"])(this.features_,r["a"].REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),Object(u["a"])(t,h["a"].CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new O(C.MODIFYSTART,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(u["c"])(t,h["a"].CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach(function(e){t===e.feature&&n.push(e)});for(var i=n.length-1;i>=0;--i)e.remove(n[i])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,o=n.length;i<o;++i){var r=n[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[r,r]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,o=n.length-1;i<o;++i){var r=n.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:r};this.rBush_.insert(Object(p["b"])(r),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,o=n.length;i<o;++i)for(var r=n[i],s=0,a=r.length-1;s<a;++s){var c=r.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:c};this.rBush_.insert(Object(p["b"])(c),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,o=n.length;i<o;++i)for(var r=n[i],s=0,a=r.length-1;s<a;++s){var c=r.slice(s,s+2),l={feature:t,geometry:e,depth:[i],index:s,segment:c};this.rBush_.insert(Object(p["b"])(c),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),i=0,o=n.length;i<o;++i)for(var r=n[i],s=0,a=r.length;s<a;++s)for(var c=r[s],l=0,u=c.length-1;l<u;++l){var d=c.slice(l,l+2),h={feature:t,geometry:e,depth:[s,i],index:l,segment:d};this.rBush_.insert(Object(p["b"])(d),h)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),i={feature:t,geometry:e,index:E,segment:[n,n]},o={feature:t,geometry:e,index:x,segment:[n,n]},r=[i,o];i.featureSegments=o.featureSegments=r,this.rBush_.insert(Object(p["m"])(n),i),this.rBush_.insert(e.getExtent(),o)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),i=0;i<n.length;++i)this.SEGMENT_WRITERS_[n[i].getType()].call(this,t,n[i])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(e){var n=e.getGeometry();n.setCoordinates(t)}else e=new s["a"](new m["a"](t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e);return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=a["a"].POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(n=!(e.type!=a["a"].SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==a["a"].SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,n=0,i=this.dragSegments_.length;n<i;++n){var o=this.dragSegments_[n],r=o[0],s=r.depth,a=r.geometry,c=void 0,u=r.segment,d=o[1];while(e.length<a.getStride())e.push(u[d][e.length]);switch(a.getType()){case v["a"].POINT:c=e,u[0]=u[1]=e;break;case v["a"].MULTI_POINT:c=a.getCoordinates(),c[r.index]=e,u[0]=u[1]=e;break;case v["a"].LINE_STRING:c=a.getCoordinates(),c[r.index+d]=e,u[d]=e;break;case v["a"].MULTI_LINE_STRING:c=a.getCoordinates(),c[s[0]][r.index+d]=e,u[d]=e;break;case v["a"].POLYGON:c=a.getCoordinates(),c[s[0]][r.index+d]=e,u[d]=e;break;case v["a"].MULTI_POLYGON:c=a.getCoordinates(),c[s[1]][s[0]][r.index+d]=e,u[d]=e;break;case v["a"].CIRCLE:u[0]=u[1]=e,r.index===E?(this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,a.setRadius(Object(l["c"])(a.getCenter(),e)),this.changingFeature_=!1);break;default:}c&&this.setGeometryCoordinates_(a,c)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var n=this.vertexFeature_;if(n){var o=[],r=n.getGeometry(),s=r.getCoordinates(),a=Object(p["b"])([s]),c=this.rBush_.getInExtent(a),u={};c.sort(I);for(var d=0,h=c.length;d<h;++d){var f=c[d],m=f.segment,g=Object(i["c"])(f.feature),y=f.depth;if(y&&(g+="-"+y.join("-")),u[g]||(u[g]=new Array(2)),f.geometry.getType()===v["a"].CIRCLE&&f.index===x){var b=k(e,f);Object(l["d"])(b,s)&&!u[g][0]&&(this.dragSegments_.push([f,0]),u[g][0]=f)}else if(Object(l["d"])(m[0],s)&&!u[g][0])this.dragSegments_.push([f,0]),u[g][0]=f;else if(Object(l["d"])(m[1],s)&&!u[g][1]){if((f.geometry.getType()===v["a"].LINE_STRING||f.geometry.getType()===v["a"].MULTI_LINE_STRING)&&u[g][0]&&0===u[g][0].index)continue;this.dragSegments_.push([f,1]),u[g][1]=f}else this.insertVertexCondition_(t)&&Object(i["c"])(m)in this.vertexSegments_&&!u[g][0]&&!u[g][1]&&o.push([f,s])}o.length&&this.willModifyFeatures_(t);for(var _=o.length-1;_>=0;--_)this.insertVertex_.apply(this,o[_])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0],i=n.geometry;if(i.getType()===v["a"].CIRCLE){var o=i.getCenter(),r=n.featureSegments[0],s=n.featureSegments[1];r.segment[0]=r.segment[1]=o,s.segment[0]=s.segment[1]=o,this.rBush_.update(Object(p["m"])(o),r),this.rBush_.update(i.getExtent(),s)}else this.rBush_.update(Object(p["b"])(n.segment),n)}return this.modified_&&(this.dispatchEvent(new O(C.MODIFYEND,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var n=e.getCoordinateFromPixel(t),o=function(t,e){return M(n,t)-M(n,e)},r=Object(p["c"])(Object(p["m"])(n),e.getView().getResolution()*this.pixelTolerance_),s=this.rBush_,a=s.getInExtent(r);if(a.length>0){a.sort(o);var c=a[0],u=c.segment,d=k(n,c),h=e.getPixelFromCoordinate(d),f=Object(l["c"])(t,h);if(f<=this.pixelTolerance_){var m={};if(c.geometry.getType()===v["a"].CIRCLE&&c.index===x)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(d);else{var g=e.getPixelFromCoordinate(u[0]),y=e.getPixelFromCoordinate(u[1]),b=Object(l["g"])(h,g),_=Object(l["g"])(h,y);f=Math.sqrt(Math.min(b,_)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(d=b>_?u[1]:u[0]),this.createOrUpdateVertexFeature_(d);for(var w=1,S=a.length;w<S;++w){var E=a[w].segment;if(!(Object(l["d"])(u[0],E[0])&&Object(l["d"])(u[1],E[1])||Object(l["d"])(u[0],E[1])&&Object(l["d"])(u[1],E[0])))break;m[Object(i["c"])(E)]=!0}}return m[Object(i["c"])(u)]=!0,void(this.vertexSegments_=m)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){var n,i=t.segment,o=t.feature,r=t.geometry,s=t.depth,a=t.index;while(e.length<r.getStride())e.push(0);switch(r.getType()){case v["a"].MULTI_LINE_STRING:n=r.getCoordinates(),n[s[0]].splice(a+1,0,e);break;case v["a"].POLYGON:n=r.getCoordinates(),n[s[0]].splice(a+1,0,e);break;case v["a"].MULTI_POLYGON:n=r.getCoordinates(),n[s[1]][s[0]].splice(a+1,0,e);break;case v["a"].LINE_STRING:n=r.getCoordinates(),n.splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(r,n);var c=this.rBush_;c.remove(t),this.updateSegmentIndices_(r,a,s,1);var l={segment:[i[0],e],feature:o,geometry:r,depth:s,index:a};c.insert(Object(p["b"])(l.segment),l),this.dragSegments_.push([l,1]);var u={segment:[e,i[1]],feature:o,geometry:r,depth:s,index:a+1};c.insert(Object(p["b"])(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a["a"].POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new O(C.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,n,o,r,s,a,c,l,u,d,h=this.dragSegments_,f={},m=!1;for(r=h.length-1;r>=0;--r)n=h[r],u=n[0],d=Object(i["c"])(u.feature),u.depth&&(d+="-"+u.depth.join("-")),d in f||(f[d]={}),0===n[1]?(f[d].right=u,f[d].index=u.index):1==n[1]&&(f[d].left=u,f[d].index=u.index+1);for(d in f){switch(l=f[d].right,a=f[d].left,s=f[d].index,c=s-1,u=void 0!==a?a:l,c<0&&(c=0),o=u.geometry,e=o.getCoordinates(),t=e,m=!1,o.getType()){case v["a"].MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(s,1),m=!0);break;case v["a"].LINE_STRING:e.length>2&&(e.splice(s,1),m=!0);break;case v["a"].MULTI_POLYGON:t=t[u.depth[1]];case v["a"].POLYGON:t=t[u.depth[0]],t.length>4&&(s==t.length-1&&(s=0),t.splice(s,1),m=!0,0===s&&(t.pop(),t.push(t[0]),c=t.length-1));break;default:}if(m){this.setGeometryCoordinates_(o,e);var g=[];if(void 0!==a&&(this.rBush_.remove(a),g.push(a.segment[0])),void 0!==l&&(this.rBush_.remove(l),g.push(l.segment[1])),void 0!==a&&void 0!==l){var y={depth:u.depth,feature:u.feature,geometry:u.geometry,index:c,segment:g};this.rBush_.insert(Object(p["b"])(y.segment),y)}this.updateSegmentIndices_(o,s,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),h.length=0}}return m},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),function(o){o.geometry===t&&(void 0===n||void 0===o.depth||Object(c["b"])(o.depth,n))&&o.index>e&&(o.index+=i)})},e}(g["b"]);function I(t,e){return t.index-e.index}function M(t,e){var n=e.geometry;if(n.getType()===v["a"].CIRCLE){var i=n;if(e.index===x){var o=Object(l["g"])(i.getCenter(),t),r=Math.sqrt(o)-i.getRadius();return r*r}}return Object(l["h"])(t,e.segment)}function k(t,e){var n=e.geometry;return n.getType()===v["a"].CIRCLE&&e.index===x?n.getClosestPoint(t):Object(l["b"])(t,e.segment)}function P(){var t=Object(S["b"])();return function(e,n){return t[v["a"].POINT]}}e["a"]=T},c8c0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.parentContext=t,this.rootRequest=e}return t}();e.Plan=i},c95e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),o=n("6923"),r=n("f4cb"),s=n("0bd8"),a=n("8025"),c=new i.ContainerModule(function(t){t(o.TYPES.PopupVNodeDecorator).to(s.PopupPositionUpdater).inSingletonScope(),t(o.TYPES.IActionHandlerInitializer).to(a.PopupActionHandlerInitializer),t(o.TYPES.ICommand).toConstructor(r.HoverFeedbackCommand),t(o.TYPES.ICommand).toConstructor(r.SetPopupModelCommand),t(o.TYPES.MouseListener).to(r.HoverMouseListener),t(o.TYPES.PopupMouseListener).to(r.PopupHoverMouseListener),t(o.TYPES.KeyListener).to(r.HoverKeyListener),t(o.TYPES.HoverState).toConstantValue({mouseOverTimer:void 0,mouseOutTimer:void 0,popupOpen:!1,previousPopupElement:void 0})});e.default=c},c998:function(t,e,n){"use strict";var i=n("a16f"),o=n.n(i);o.a},cb6e:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i["throw"](t))}catch(t){r(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((i=i.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n("e1c6"),u=n("9175"),d=n("6923"),h=n("be02"),f=n("3623"),p=n("3f0a"),v=n("3a92"),m=n("42f7"),g=n("d084"),y=n("cf61"),b=n("f4cb"),_=n("26ad"),w=n("5d19"),S=n("2440"),E=n("4741"),x=n("df60"),C=function(t){function e(e,n,i,o,r,s,a){var c=t.call(this,e,n,i)||this;return c.logger=o,c.modelProvider=r,c.popupModelProvider=s,c.layoutEngine=a,c.currentRoot={type:"NONE",id:"ROOT"},c.diagramState={expansionState:new x.ExpansionState(c.currentRoot)},c.pendingUpdates=[],c}return i(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this.currentRoot},set:function(t){this.setModel(t)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.registerCommand(y.UpdateModelCommand),e.register(m.ComputedBoundsAction.KIND,this),e.register(b.RequestPopupModelAction.KIND,this),e.register(E.CollapseExpandAction.KIND,this),e.register(E.CollapseExpandAllAction.KIND,this)},e.prototype.setModel=function(t){return this.currentRoot=t,this.diagramState={expansionState:new x.ExpansionState(t)},this.submitModel(t,!1)},e.prototype.updateModel=function(t){return void 0===t?this.submitModel(this.currentRoot,!0):(this.currentRoot=t,this.submitModel(t,!0))},e.prototype.submitModel=function(t,e){if(this.viewerOptions.needsClientLayout){var n=new u.Deferred;return this.pendingUpdates.push(n),this.actionDispatcher.dispatch(new m.RequestBoundsAction(t)),n.promise}return this.doSubmitModel(t,e)},e.prototype.doSubmitModel=function(t,e,n){return a(this,void 0,void 0,function(){var i,o,r,s,a;return c(this,function(c){switch(c.label){case 0:if(void 0===this.layoutEngine)return[3,6];c.label=1;case 1:return c.trys.push([1,5,,6]),i=this.layoutEngine.layout(t,n),i instanceof Promise?[4,i]:[3,3];case 2:return t=c.sent(),[3,4];case 3:void 0!==i&&(t=i),c.label=4;case 4:return[3,6];case 5:return o=c.sent(),this.logger.error(this,o.toString(),o.stack),[3,6];case 6:return r=this.lastSubmittedModelType,this.lastSubmittedModelType=t.type,s=this.pendingUpdates,this.pendingUpdates=[],e&&t.type===r?(a=Array.isArray(e)?e:t,[4,this.actionDispatcher.dispatch(new y.UpdateModelAction(a))]):[3,8];case 7:return c.sent(),[3,10];case 8:return[4,this.actionDispatcher.dispatch(new p.SetModelAction(t))];case 9:c.sent(),c.label=10;case 10:return s.forEach(function(t){return t.resolve()}),[2]}})})},e.prototype.applyMatches=function(t){var e=this.currentRoot;return g.applyMatches(e,t),this.submitModel(e,t)},e.prototype.addElements=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var o=i[n],r=o;void 0!==r.element&&void 0!==r.parentId?e.push({right:r.element,rightParentId:r.parentId}):void 0!==r.id&&e.push({right:r,rightParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.removeElements=function(t){var e=[],n=new v.SModelIndex;n.add(this.currentRoot);for(var i=0,o=t;i<o.length;i++){var r=o[i],s=r;if(void 0!==s.elementId&&void 0!==s.parentId){var a=n.getById(s.elementId);void 0!==a&&e.push({left:a,leftParentId:s.parentId})}else{a=n.getById(s);void 0!==a&&e.push({left:a,leftParentId:this.currentRoot.id})}}return this.applyMatches(e)},e.prototype.handle=function(t){switch(t.kind){case p.RequestModelAction.KIND:this.handleRequestModel(t);break;case m.ComputedBoundsAction.KIND:this.handleComputedBounds(t);break;case b.RequestPopupModelAction.KIND:this.handleRequestPopupModel(t);break;case w.ExportSvgAction.KIND:this.handleExportSvgAction(t);break;case E.CollapseExpandAction.KIND:this.handleCollapseExpandAction(t);break;case E.CollapseExpandAllAction.KIND:this.handleCollapseExpandAllAction(t);break}},e.prototype.handleRequestModel=function(t){this.modelProvider&&(this.currentRoot=this.modelProvider.getModel(this.diagramState,this.currentRoot)),this.submitModel(this.currentRoot,!1)},e.prototype.handleComputedBounds=function(t){var e=this.currentRoot,n=new v.SModelIndex;n.add(e);for(var i=0,o=t.bounds;i<o.length;i++){var r=o[i],s=n.getById(r.elementId);void 0!==s&&this.applyBounds(s,r.newBounds)}if(void 0!==t.alignments)for(var a=0,c=t.alignments;a<c.length;a++){var l=c[a];s=n.getById(l.elementId);void 0!==s&&this.applyAlignment(s,l.newAlignment)}this.doSubmitModel(e,!0,n)},e.prototype.applyBounds=function(t,e){var n=t;n.position={x:e.x,y:e.y},n.size={width:e.width,height:e.height}},e.prototype.applyAlignment=function(t,e){var n=t;n.alignment={x:e.x,y:e.y}},e.prototype.handleRequestPopupModel=function(t){if(void 0!==this.popupModelProvider){var e=f.findElement(this.currentRoot,t.elementId),n=this.popupModelProvider.getPopupModel(t,e);void 0!==n&&(n.canvasBounds=t.bounds,this.actionDispatcher.dispatch(new b.SetPopupModelAction(n)))}},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});S.saveAs(e,"diagram.svg")},e.prototype.handleCollapseExpandAction=function(t){if(void 0!==this.modelProvider){this.diagramState.expansionState.apply(t);var e=this.modelProvider.getModel(this.diagramState,this.currentRoot);this.updateModel(e)}},e.prototype.handleCollapseExpandAllAction=function(t){if(void 0!==this.modelProvider){t.expand||this.diagramState.expansionState.collapseAll();var e=this.modelProvider.getModel(this.diagramState,this.currentRoot);this.updateModel(e)}},e=o([l.injectable(),s(0,l.inject(d.TYPES.IActionDispatcher)),s(1,l.inject(d.TYPES.ActionHandlerRegistry)),s(2,l.inject(d.TYPES.ViewerOptions)),s(3,l.inject(d.TYPES.ILogger)),s(4,l.inject(d.TYPES.StateAwareModelProvider)),s(4,l.optional()),s(5,l.inject(d.TYPES.IPopupModelProvider)),s(5,l.optional()),s(6,l.inject(d.TYPES.IModelLayoutEngine)),s(6,l.optional()),r("design:paramtypes",[Object,h.ActionHandlerRegistry,Object,Object,Object,Object,Object])],e),e}(_.ModelSource);e.LocalModelSource=C},cc26:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd02"),r=n("3a92"),s=n("4c18"),a=n("a0af"),c=n("e4f0");function l(t){return void 0!==t.routingPoints&&"function"===typeof t.route}function u(t){return l(t)&&t.hasFeature(e.editFeature)}e.editFeature=Symbol("editFeature"),e.isRoutable=l,e.canEditRouting=u;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editMode=!1,e.hoverFeedback=!1,e.selected=!1,e}return i(e,t),e.prototype.hasFeature=function(t){return t===s.selectFeature||t===a.moveFeature||t===c.hoverFeedbackFeature},e}(r.SChildElement);e.SRoutingHandle=d;var h=.1;function f(t,e){if(0===e.children.length)return t;var n=0,i=function(){var i=t[n];if(void 0!==i.pointIndex){var r=e.children.find(function(t){return t instanceof d&&"junction"===t.kind&&t.pointIndex===i.pointIndex});if(void 0!==r&&r.editMode&&n>0&&n<t.length-1){var s=t[n-1],a=t[n+1],c={x:s.x-i.x,y:s.y-i.y},l={x:a.x-i.x,y:a.y-i.y},u=o.angleBetweenPoints(c,l);if(Math.abs(Math.PI-u)<h)return t.splice(n,1),"continue"}}n++};while(n<t.length)i();return t}e.filterEditModeHandles=f},cf13:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=i},cf61:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("dd02"),c=n("c146"),l=n("9757"),u=n("e7fa"),d=n("3a92"),h=n("559d"),f=n("7d36"),p=n("a0af"),v=n("66f9"),m=n("3b62"),g=n("4c18"),y=n("d084"),b=n("0f4c"),_=function(){function t(t,e){void 0===e&&(e=!0),this.animate=e,this.kind=w.KIND,void 0!==t.id?this.newRoot=t:this.matches=t}return t}();e.UpdateModelAction=_;var w=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){var e;return void 0!==this.action.newRoot?e=t.modelFactory.createRoot(this.action.newRoot):(e=t.modelFactory.createRoot(t.root),void 0!==this.action.matches&&this.applyMatches(e,this.action.matches,t)),this.oldRoot=t.root,this.newRoot=e,this.performUpdate(this.oldRoot,this.newRoot,t)},e.prototype.performUpdate=function(t,e,n){if(void 0!==this.action.animate&&!this.action.animate||t.id!==e.id)return t.type===e.type&&a.isValidDimension(t.canvasBounds)&&(e.canvasBounds=t.canvasBounds),e;var i=void 0;if(void 0===this.action.matches){var o=new y.ModelMatcher;i=o.match(t,e)}else i=this.convertToMatchResult(this.action.matches,t,e);var r=this.computeAnimation(e,i,n);return r instanceof c.Animation?r.start():r},e.prototype.applyMatches=function(t,e,n){for(var i=t.index,o=0,r=e;o<r.length;o++){var s=r[o];if(void 0!==s.left){var a=i.getById(s.left.id);a instanceof d.SChildElement&&a.parent.remove(a)}if(void 0!==s.right){a=n.modelFactory.createElement(s.right);var c=void 0;void 0!==s.rightParentId&&(c=i.getById(s.rightParentId)),c instanceof d.SParentElement?c.add(a):t.add(a)}}},e.prototype.convertToMatchResult=function(t,e,n){for(var i={},o=0,r=t;o<r.length;o++){var s=r[o],a={},c=void 0;void 0!==s.left&&(c=s.left.id,a.left=e.index.getById(c),a.leftParentId=s.leftParentId),void 0!==s.right&&(c=s.right.id,a.right=n.index.getById(c),a.rightParentId=s.rightParentId),void 0!==c&&(i[c]=a)}return i},e.prototype.computeAnimation=function(t,e,n){var i=this,o={fades:[]};y.forEachMatch(e,function(e,r){if(void 0!==r.left&&void 0!==r.right)i.updateElement(r.left,r.right,o);else if(void 0!==r.right){var s=r.right;f.isFadeable(s)&&(s.opacity=0,o.fades.push({element:s,type:"in"}))}else if(r.left instanceof d.SChildElement){var a=r.left;if(f.isFadeable(a)&&void 0!==r.leftParentId&&void 0===t.index.getById(a.id)){var c=t.index.getById(r.leftParentId);if(c instanceof d.SParentElement){var l=n.modelFactory.createElement(a);c.add(l),o.fades.push({element:l,type:"out"})}}}});var r=this.createAnimations(o,t,n);return r.length>=2?new c.CompoundAnimation(t,n,r):1===r.length?r[0]:t},e.prototype.updateElement=function(t,e,n){if(p.isLocateable(t)&&p.isLocateable(e)){var i=t.position,o=e.position;a.almostEquals(i.x,o.x)&&a.almostEquals(i.y,o.y)||(void 0===n.moves&&(n.moves=[]),n.moves.push({element:e,elementId:e.id,fromPosition:i,toPosition:o}),e.position=i)}v.isBoundsAware(t)&&v.isBoundsAware(e)&&(a.isValidDimension(e.bounds)?a.almostEquals(t.bounds.width,e.bounds.width)&&a.almostEquals(t.bounds.height,e.bounds.height)||(void 0===n.resizes&&(n.resizes=[]),n.resizes.push({element:e,fromDimension:{width:t.bounds.width,height:t.bounds.height},toDimension:{width:e.bounds.width,height:e.bounds.height}})):e.bounds={x:e.bounds.x,y:e.bounds.y,width:t.bounds.width,height:t.bounds.height}),g.isSelectable(t)&&g.isSelectable(e)&&(e.selected=t.selected),t instanceof d.SModelRoot&&e instanceof d.SModelRoot&&(e.canvasBounds=t.canvasBounds),t instanceof m.ViewportRootElement&&e instanceof m.ViewportRootElement&&(e.scroll=t.scroll,e.zoom=t.zoom)},e.prototype.createAnimations=function(t,e,n){var i=[];if(t.fades.length>0&&i.push(new u.FadeAnimation(e,t.fades,n,!0)),void 0!==t.moves&&t.moves.length>0){for(var o=new Map,r=0,s=t.moves;r<s.length;r++){var a=s[r];o.set(a.elementId,a)}i.push(new h.MoveAnimation(e,o,new Map,n,!1))}if(void 0!==t.resizes&&t.resizes.length>0){for(var c=new Map,l=0,d=t.resizes;l<d.length;l++){var f=d[l];c.set(f.element.id,f)}i.push(new b.ResizeAnimation(e,c,n,!1))}return i},e.prototype.undo=function(t){return this.performUpdate(this.newRoot,this.oldRoot,t)},e.prototype.redo=function(t){return this.performUpdate(this.oldRoot,this.newRoot,t)},e.KIND="updateModel",e=o([s.injectable(),r("design:paramtypes",[_])],e),e}(l.Command);e.UpdateModelCommand=w},cf611:function(t,e,n){"use strict";var i=n("8e08"),o=n.n(i);o.a},cf81:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("e34e"),o=n("451f"),r=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=o.namedConstraint(t),new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var e=null!==t.target&&!t.target.isNamed()&&!t.target.isTagged();return e},new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=o.taggedConstraint(t)(e),new i.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return o.typeConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return o.namedConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return o.taggedConstraint(t)(e)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,o.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,o.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!o.traverseAncerstors(n,o.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return o.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!o.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=r},cf98:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("3a92"),r=n("3b4c"),s=n("3623"),a=n("c444"),c=n("5eb6"),l=n("a0af"),u=n("cc26");function d(t){return"scroll"in t}e.isScrollable=d;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.mouseDown=function(t,e){var n=s.findParentByFeature(t,l.isMoveable);if(void 0===n&&!(t instanceof u.SRoutingHandle)){var i=s.findParentByFeature(t,c.isViewport);this.lastScrollPosition=i?{x:e.pageX,y:e.pageY}:void 0}return[]},e.prototype.mouseMove=function(t,e){if(0===e.buttons)this.mouseUp(t,e);else if(this.lastScrollPosition){var n=s.findParentByFeature(t,c.isViewport);if(n){var i=(e.pageX-this.lastScrollPosition.x)/n.zoom,o=(e.pageY-this.lastScrollPosition.y)/n.zoom,r={scroll:{x:n.scroll.x-i,y:n.scroll.y-o},zoom:n.zoom};return this.lastScrollPosition={x:e.pageX,y:e.pageY},[new a.ViewportAction(n.id,r,!1)]}}return[]},e.prototype.mouseEnter=function(t,e){return t instanceof o.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){return this.lastScrollPosition=void 0,[]},e}(r.MouseListener);e.ScrollMouseListener=h},d084:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("3a92");function o(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}e.forEachMatch=o;var r=function(){function t(){}return t.prototype.match=function(t,e){var n={};return this.matchLeft(t,n),this.matchRight(e,n),n},t.prototype.matchLeft=function(t,e,n){var o=e[t.id];if(void 0!==o?(o.left=t,o.leftParentId=n):(o={left:t,leftParentId:n},e[t.id]=o),i.isParent(t))for(var r=0,s=t.children;r<s.length;r++){var a=s[r];this.matchLeft(a,e,t.id)}},t.prototype.matchRight=function(t,e,n){var o=e[t.id];if(void 0!==o?(o.right=t,o.rightParentId=n):(o={right:t,rightParentId:n},e[t.id]=o),i.isParent(t))for(var r=0,s=t.children;r<s.length;r++){var a=s[r];this.matchRight(a,e,t.id)}},t}();function s(t,e){var n;t instanceof i.SModelRoot?n=t.index:(n=new i.SModelIndex,n.add(t));for(var o=0,r=e;o<r.length;o++){var s=r[o],a=!1;if(void 0!==s.left&&void 0!==s.leftParentId){var c=n.getById(s.leftParentId);if(void 0!==c&&void 0!==c.children){var l=c.children.indexOf(s.left);l>=0&&(void 0!==s.right&&s.leftParentId===s.rightParentId?(c.children.splice(l,1,s.right),a=!0):c.children.splice(l,1)),n.remove(s.left)}}if(!a&&void 0!==s.right&&void 0!==s.rightParentId){var u=n.getById(s.rightParentId);void 0!==u&&(void 0===u.children&&(u.children=[]),u.children.push(s.right))}}}e.ModelMatcher=r,e.applyMatches=s},d204:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("1979"),o=n("66d7");function r(t,e){return function(n,r,s){var a=new i.Metadata(t,e);"number"===typeof s?o.tagParameter(n,r,s,a):o.tagProperty(n,r,a)}}e.tagged=r},d4ec:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),r=n("e45b"),s=function(){function t(){}var e;return e=t,t.prototype.decorate=function(t,n){return t.sel&&t.sel.startsWith("svg")&&r.setAttr(t,"tabindex",++e.tabIndex),t},t.prototype.postUpdate=function(){},t.tabIndex=1e3,t=e=i([o.injectable()],t),t}();e.FocusFixDecorator=s},d5b4:function(t,e,n){"use strict";var i=n("0332"),o=n.n(i);o.a},d6e2:function(t,e,n){"use strict";var i=n("bab1"),o=n.n(i);o.a},d741:function(t,e,n){},d752:function(t,e,n){var i=n("7726").parseFloat,o=n("aa77").trim;t.exports=1/i(n("fdef")+"-0")!==-1/0?function(t){var e=o(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},d988:function(t,e,n){},da84:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("dd02"),s=n("a2e1"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getChildrenSize=function(t,e,n){var i=-1,o=0,s=!0;return t.children.forEach(function(t){var a=n.getBoundsData(t).bounds;void 0!==a&&r.isValidDimension(a)&&(o+=a.height,s?s=!1:o+=e.vGap,i=Math.max(i,a.width))}),{width:i,height:o}},e.prototype.layoutChild=function(t,e,n,i,o,r,s,a){var c=this.getDx(i.hAlign,n,s);return e.bounds={x:o.paddingLeft+t.bounds.x-n.x+c,y:r.y+t.bounds.y-n.y,width:n.width,height:n.height},e.boundsChanged=!0,{x:r.x,y:r.y+n.height+o.vGap}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,vGap:1,hAlign:"center"}},e.prototype.spread=function(t,e){return o({},t,e)},e.KIND="vbox",e}(s.AbstractLayout);e.VBoxLayouter=a},db0a:function(t,e,n){"use strict";var i=n("e445"),o=n.n(i);o.a},dd02:function(t,e,n){"use strict";function i(t,e){return{x:t.x+e.x,y:t.y+e.y}}function o(t,e){return{x:t.x-e.x,y:t.y-e.y}}function r(t){return t.width>=0&&t.height>=0}function s(t){return"x"in t&&"y"in t&&"width"in t&&"height"in t}function a(t,e){var n=Math.min(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.x+(t.width>=0?t.width:0),e.x+(e.width>=0?e.width:0)),r=Math.max(t.y+(t.height>=0?t.height:0),e.y+(e.height>=0?e.height:0));return{x:n,y:i,width:o-n,height:r-i}}function c(t,e){return{x:t.x+e.x,y:t.y+e.y,width:t.width,height:t.height}}function l(t){return{x:t.x+(t.width>=0?.5*t.width:0),y:t.y+(t.height>=0?.5*t.height:0)}}function u(t,e){var n={x:t.x>e.x?e.x:t.x,y:t.y>e.y?e.y:t.y,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)};return l(n)}function d(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function h(t,e){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function f(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function p(t,e){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}function v(t){return Math.atan2(t.y,t.x)}function m(t,e){var n=Math.sqrt((t.x*t.x+t.y*t.y)*(e.x*e.x+e.y*e.y));if(isNaN(n)||0===n)return NaN;var i=t.x*e.x+t.y*e.y;return Math.acos(i/n)}function g(t){return 180*t/Math.PI}function y(t){return t*Math.PI/180}function b(t,e){return Math.abs(t-e)<.001}Object.defineProperty(e,"__esModule",{value:!0}),e.ORIGIN_POINT=Object.freeze({x:0,y:0}),e.add=i,e.subtract=o,e.EMPTY_DIMENSION=Object.freeze({width:-1,height:-1}),e.isValidDimension=r,e.EMPTY_BOUNDS=Object.freeze({x:0,y:0,width:-1,height:-1}),e.isBounds=s,e.combine=a,e.translate=c,e.center=l,e.centerOfLine=u,e.includes=d,function(t){t[t["left"]=0]="left",t[t["right"]=1]="right",t[t["up"]=2]="up",t[t["down"]=3]="down"}(e.Direction||(e.Direction={})),e.euclideanDistance=h,e.manhattanDistance=f,e.maxDistance=p,e.angleOfPoint=v,e.angleBetweenPoints=m,e.toDegrees=g,e.toRadians=y,e.almostEquals=b},dd7b:function(t,e,n){"use strict";function i(t,e,n,i,o){var r=void 0===e?void 0:e.key;return{sel:t,data:e,children:n,text:i,elm:o,key:r}}n.r(e);var o=i,r=Array.isArray;function s(t){return"string"===typeof t||"number"===typeof t}function a(t){return document.createElement(t)}function c(t,e){return document.createElementNS(t,e)}function l(t){return document.createTextNode(t)}function u(t){return document.createComment(t)}function d(t,e,n){t.insertBefore(e,n)}function h(t,e){t.removeChild(e)}function f(t,e){t.appendChild(e)}function p(t){return t.parentNode}function v(t){return t.nextSibling}function m(t){return t.tagName}function g(t,e){t.textContent=e}function y(t){return t.textContent}function b(t){return 1===t.nodeType}function _(t){return 3===t.nodeType}function w(t){return 8===t.nodeType}var S={createElement:a,createElementNS:c,createTextNode:l,createComment:u,insertBefore:d,removeChild:h,appendChild:f,parentNode:p,nextSibling:v,tagName:m,setTextContent:g,getTextContent:y,isElement:b,isText:_,isComment:w},E=S;function x(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var i=0;i<e.length;++i){var o=e[i].data;void 0!==o&&x(o,e[i].children,e[i].sel)}}function C(t,e,n){var o,a,c,l={};if(void 0!==n?(l=e,r(n)?o=n:s(n)?a=n:n&&n.sel&&(o=[n])):void 0!==e&&(r(e)?o=e:s(e)?a=e:e&&e.sel?o=[e]:l=e),void 0!==o)for(c=0;c<o.length;++c)s(o[c])&&(o[c]=i(void 0,void 0,void 0,o[c],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||x(l,o,t),i(t,l,o,a,void 0)}function O(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function T(t){var e=t.data,n=e.fn.apply(void 0,e.args);O(n,t)}function I(t,e){var n,i=t.data,o=e.data,r=i.args,s=o.args;if(i.fn===o.fn&&r.length===s.length){for(n=0;n<s.length;++n)if(r[n]!==s[n])return void O(o.fn.apply(void 0,s),e);O(t,e)}else O(o.fn.apply(void 0,s),e)}var M=function(t,e,n,i){return void 0===i&&(i=n,n=e,e=void 0),C(t,{key:e,hook:{init:T,prepatch:I},fn:n,args:i})};function k(t){return void 0===t}function P(t){return void 0!==t}n.d(e,"init",function(){return j}),n.d(e,"h",function(){return C}),n.d(e,"thunk",function(){return M});var A=o("",{},[],void 0,void 0);function N(t,e){return t.key===e.key&&t.sel===e.sel}function L(t){return void 0!==t.sel}function R(t,e,n){var i,o,r,s={};for(i=e;i<=n;++i)r=t[i],null!=r&&(o=r.key,void 0!==o&&(s[o]=i));return s}var D=["create","update","remove","destroy","pre","post"];function j(t,e){var n,i,a={},c=void 0!==e?e:E;for(n=0;n<D.length;++n)for(a[D[n]]=[],i=0;i<t.length;++i){var l=t[i][D[n]];void 0!==l&&a[D[n]].push(l)}function u(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return o(c.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}function d(t,e){return function(){if(0===--e){var n=c.parentNode(t);c.removeChild(n,t)}}}function h(t,e){var n,i=t.data;void 0!==i&&P(n=i.hook)&&P(n=n.init)&&(n(t),i=t.data);var o=t.children,l=t.sel;if("!"===l)k(t.text)&&(t.text=""),t.elm=c.createComment(t.text);else if(void 0!==l){var u=l.indexOf("#"),d=l.indexOf(".",u),f=u>0?u:l.length,p=d>0?d:l.length,v=-1!==u||-1!==d?l.slice(0,Math.min(f,p)):l,m=t.elm=P(i)&&P(n=i.ns)?c.createElementNS(n,v):c.createElement(v);for(f<p&&m.setAttribute("id",l.slice(f+1,p)),d>0&&m.setAttribute("class",l.slice(p+1).replace(/\./g," ")),n=0;n<a.create.length;++n)a.create[n](A,t);if(r(o))for(n=0;n<o.length;++n){var g=o[n];null!=g&&c.appendChild(m,h(g,e))}else s(t.text)&&c.appendChild(m,c.createTextNode(t.text));n=t.data.hook,P(n)&&(n.create&&n.create(A,t),n.insert&&e.push(t))}else t.elm=c.createTextNode(t.text);return t.elm}function f(t,e,n,i,o,r){for(;i<=o;++i){var s=n[i];null!=s&&c.insertBefore(t,h(s,r),e)}}function p(t){var e,n,i=t.data;if(void 0!==i){for(P(e=i.hook)&&P(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)e=t.children[n],null!=e&&"string"!==typeof e&&p(e)}}function v(t,e,n,i){for(;n<=i;++n){var o=void 0,r=void 0,s=void 0,l=e[n];if(null!=l)if(P(l.sel)){for(p(l),r=a.remove.length+1,s=d(l.elm,r),o=0;o<a.remove.length;++o)a.remove[o](l,s);P(o=l.data)&&P(o=o.hook)&&P(o=o.remove)?o(l,s):s()}else c.removeChild(t,l.elm)}}function m(t,e,n,i){var o,r,s,a,l=0,u=0,d=e.length-1,p=e[0],m=e[d],y=n.length-1,b=n[0],_=n[y];while(l<=d&&u<=y)null==p?p=e[++l]:null==m?m=e[--d]:null==b?b=n[++u]:null==_?_=n[--y]:N(p,b)?(g(p,b,i),p=e[++l],b=n[++u]):N(m,_)?(g(m,_,i),m=e[--d],_=n[--y]):N(p,_)?(g(p,_,i),c.insertBefore(t,p.elm,c.nextSibling(m.elm)),p=e[++l],_=n[--y]):N(m,b)?(g(m,b,i),c.insertBefore(t,m.elm,p.elm),m=e[--d],b=n[++u]):(void 0===o&&(o=R(e,l,d)),r=o[b.key],k(r)?(c.insertBefore(t,h(b,i),p.elm),b=n[++u]):(s=e[r],s.sel!==b.sel?c.insertBefore(t,h(b,i),p.elm):(g(s,b,i),e[r]=void 0,c.insertBefore(t,s.elm,p.elm)),b=n[++u]));(l<=d||u<=y)&&(l>d?(a=null==n[y+1]?null:n[y+1].elm,f(t,a,n,u,y,i)):v(t,e,l,d))}function g(t,e,n){var i,o;P(i=e.data)&&P(o=i.hook)&&P(i=o.prepatch)&&i(t,e);var r=e.elm=t.elm,s=t.children,l=e.children;if(t!==e){if(void 0!==e.data){for(i=0;i<a.update.length;++i)a.update[i](t,e);i=e.data.hook,P(i)&&P(i=i.update)&&i(t,e)}k(e.text)?P(s)&&P(l)?s!==l&&m(r,s,l,n):P(l)?(P(t.text)&&c.setTextContent(r,""),f(r,null,l,0,l.length-1,n)):P(s)?v(r,s,0,s.length-1):P(t.text)&&c.setTextContent(r,""):t.text!==e.text&&(P(s)&&v(r,s,0,s.length-1),c.setTextContent(r,e.text)),P(o)&&P(i=o.postpatch)&&i(t,e)}}return function(t,e){var n,i,o,r=[];for(n=0;n<a.pre.length;++n)a.pre[n]();for(L(t)||(t=u(t)),N(t,e)?g(t,e,r):(i=t.elm,o=c.parentNode(i),h(e,r),null!==o&&(c.insertBefore(o,e.elm,c.nextSibling(i)),v(o,[t],0,0))),n=0;n<r.length;++n)r[n].data.hook.insert(r[n]);for(n=0;n<a.post.length;++n)a.post[n]();return e}}},ddfc:function(t,e,n){},df60:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.expandedElementIds=[],this.initialize(t)}return t.prototype.initialize=function(t){var e=this;t.expanded&&this.expandedElementIds.push(t.id),void 0!==t.children&&t.children.forEach(function(t){return e.initialize(t)})},t.prototype.apply=function(t){for(var e=0,n=t.collapseIds;e<n.length;e++){var i=n[e],o=this.expandedElementIds.indexOf(i);-1!==o&&this.expandedElementIds.splice(o,1)}for(var r=0,s=t.expandIds;r<s.length;r++){var a=s[r];this.expandedElementIds.push(a)}},t.prototype.collapseAll=function(){this.expandedElementIds=[]},t}();e.ExpansionState=i},dfc0:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),s=n("302f"),a=n("3a92"),c=n("3623"),l=n("47b7"),u=n("38e8"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var i=this.registry.get(t.type,void 0);if(!(i instanceof a.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=i}else n=this.isNodeSchema(t)?new l.SNode:this.isPortSchema(t)?new l.SPort:this.isEdgeSchema(t)?new l.SEdge:this.isLabelSchema(t)?new l.SLabel:this.isCompartmentSchema(t)?new l.SCompartment:this.isButtonSchema(t)?new u.SButton:new a.SChildElement;return this.initializeChild(n,t,e)},e.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof a.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else e=this.isGraphSchema(t)?new l.SGraph:new a.SModelRoot;return this.initializeRoot(e,t)},e.prototype.isGraphSchema=function(t){return"graph"===c.getBasicType(t)},e.prototype.isNodeSchema=function(t){return"node"===c.getBasicType(t)},e.prototype.isPortSchema=function(t){return"port"===c.getBasicType(t)},e.prototype.isEdgeSchema=function(t){return"edge"===c.getBasicType(t)},e.prototype.isLabelSchema=function(t){return"label"===c.getBasicType(t)},e.prototype.isCompartmentSchema=function(t){return"comp"===c.getBasicType(t)},e.prototype.isButtonSchema=function(t){return"button"===c.getBasicType(t)},e=o([r.injectable()],e),e}(s.SModelFactory);e.SGraphFactory=d},e1c6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("c5f4");e.METADATA_KEY=i;var o=n("f457");e.Container=o.Container;var r=n("155f");e.BindingScopeEnum=r.BindingScopeEnum,e.BindingTypeEnum=r.BindingTypeEnum,e.TargetTypeEnum=r.TargetTypeEnum;var s=n("771c");e.AsyncContainerModule=s.AsyncContainerModule,e.ContainerModule=s.ContainerModule;var a=n("719e");e.injectable=a.injectable;var c=n("d204");e.tagged=c.tagged;var l=n("6730");e.named=l.named;var u=n("624f");e.inject=u.inject,e.LazyServiceIdentifer=u.LazyServiceIdentifer;var d=n("8d8c");e.optional=d.optional;var h=n("9f62");e.unmanaged=h.unmanaged;var f=n("8c88");e.multiInject=f.multiInject;var p=n("a1a5");e.targetName=p.targetName;var v=n("4a4f");e.postConstruct=v.postConstruct;var m=n("c278");e.MetadataReader=m.MetadataReader;var g=n("77d3");e.id=g.id;var y=n("66d7");e.decorate=y.decorate;var b=n("451f");e.traverseAncerstors=b.traverseAncerstors,e.taggedConstraint=b.taggedConstraint,e.namedConstraint=b.namedConstraint,e.typeConstraint=b.typeConstraint;var _=n("ba33");e.getServiceIdentifierAsString=_.getServiceIdentifierAsString;var w=n("efc5");e.multiBindToService=w.multiBindToService},e2ed:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",{style:t.mainPanelStyle,attrs:{view:"hHh lpr fFf",container:""}},[n("q-layout-drawer",{staticClass:"print-hide",attrs:{side:"left",overlay:!1,breakpoint:0,width:t.leftMenuState===t.LEFTMENU_CONSTANTS.LEFTMENU_MAXIMIZED?t.LEFTMENU_CONSTANTS.LEFTMENU_MAXSIZE:t.LEFTMENU_CONSTANTS.LEFTMENU_MINSIZE,"content-class":["klab-left","no-scroll",t.largeMode?"klab-large-mode":""]},model:{value:t.leftMenuVisible,callback:function(e){t.leftMenuVisible=e},expression:"leftMenuVisible"}},[n("klab-left-menu")],1),n("q-page-container",[n("q-page",{staticClass:"column"},[n("div",{staticClass:"col row full-height",attrs:{id:"kexplorer-container"}},[n("keep-alive",[n(t.mainViewer.name,{tag:"component"})],1),n("q-resize-observable",{on:{resize:t.setChildrenToAskFor}})],1),n("div",{staticClass:"col-1 row"},[t.logVisible?n("klab-log"):t._e()],1),n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[t.mainViewer.mainControl?n("klab-main-control"):t._e()],1),n("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[t.askForUndocking&&!t.mainViewer.mainControl?n("div",{staticClass:"full-height full-width",attrs:{id:"mc-undocking"}}):t._e()]),t.isMainControlDocked?t._e():n("observation-time"),n("q-modal",{attrs:{id:"modal-connection-status","no-esc-dismiss":"","no-backdrop-dismiss":"","content-css":{"background-color":"rgba("+t.hexToRgbValues(t.modalColor)+", 0.5)"},"content-classes":["modal-borders","no-padding","no-margin"]},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[n("div",{staticClass:"bg-opaque-white modal-borders"},[n("div",{staticClass:"q-pa-xs text-bold modal-klab-content",style:{color:t.modalColor}},[n("klab-spinner",{attrs:{color:t.modalColor,size:40,ball:18,id:"modal-spinner",animated:t.modalAnimated,wrapperId:"modal-connection-status"}}),n("span",{staticClass:"text-white"},[t._v(t._s(t.modalText))])],1)])]),n("klab-presentation"),n("input-request-modal"),n("scale-change-dialog")],1)],1)],1)},o=[];i._withStripped=!0;var r=n("9523"),s=n.n(r),a=n("3156"),c=n.n(a),l=n("2f62"),u=n("7cca"),d=n("17dc"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDrawMode,expression:"!isDrawMode"}],ref:"main-control-container",staticClass:"print-hide small",attrs:{id:"mc-container"}},[n("transition",{attrs:{appear:"","enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isHidden,expression:"isHidden"}],staticClass:"klab-spinner-div",style:{left:t.defaultLeft+"px",top:t.defaultTop+"px","border-color":t.hasTasks()?t.spinnerColor.color:"rgba(0,0,0,0)"},attrs:{id:"spinner-lonely-div"}},[n("klab-spinner",{attrs:{id:"spinner-lonely","store-controlled":!0,size:40,ball:22,wrapperId:"spinner-lonely-div"},nativeOn:{dblclick:function(e){return t.show(e)},touchstart:function(e){t.handleTouch(e,null,t.show)}}})],1)]),n("transition",{attrs:{appear:"","enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[n("q-card",{directives:[{name:"draggable",rawName:"v-draggable",value:t.dragMCConfig,expression:"dragMCConfig"},{name:"show",rawName:"v-show",value:!t.isHidden,expression:"!isHidden"}],staticClass:"no-box-shadow absolute lot-of-flow",class:[t.hasContext?"with-context":"bg-transparent without-context","mc-large-mode-"+t.largeMode],style:t.qCardStyle,attrs:{draggable:"false",id:"mc-q-card",flat:!0},nativeOn:{contextmenu:function(t){t.preventDefault()}}},[n("q-card-title",{ref:"mc-draggable",staticClass:"q-pa-xs",class:[t.fuzzyMode?"klab-fuzzy":"",t.searchIsFocused?"klab-search-focused":""],style:{"background-color":t.getBGColor(t.hasContext?"1.0":t.searchIsFocused?".8":".2")},attrs:{id:"mc-q-card-title",ondragstart:"return false;"}},[n("klab-search-bar",{ref:"klab-search-bar"}),n("klab-breadcrumbs",{attrs:{slot:"subtitle"},slot:"subtitle"})],1),n("q-card-actions",{directives:[{name:"show",rawName:"v-show",value:t.hasContext&&!t.isHidden,expression:"hasContext && !isHidden"}],staticClass:"no-margin",attrs:{id:"context-actions"}},[n("div",{attrs:{id:"mc-tabs"}},[n("div",{staticClass:"klab-button mc-tab",class:["tab-button",{active:"klab-log-pane"===t.selectedTab}],on:{click:function(e){t.selectedTab="klab-log-pane"}}},[n("q-icon",{attrs:{name:"mdi-console"}},[n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.showLogPane")))])],1)],1),n("div",{staticClass:"klab-button mc-tab",class:["tab-button",{active:"klab-tree-pane"===t.selectedTab}],on:{click:function(e){t.selectedTab="klab-tree-pane"}}},[n("q-icon",{attrs:{name:"mdi-eye-outline"}},[n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.treePane")))])],1)],1)]),n("main-actions-buttons",{attrs:{orientation:"horizontal","separator-class":"mc-separator"}}),n("scale-buttons",{attrs:{docked:!1}}),n("div",{staticClass:"mc-separator",staticStyle:{right:"35px"}}),n("stop-actions-buttons")],1),n("q-card-main",{directives:[{name:"show",rawName:"v-show",value:t.hasContext&&!t.isHidden,expression:"hasContext && !isHidden"}],staticClass:"no-margin relative-position",attrs:{draggable:"false"}},[n("keep-alive",[n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[n(t.selectedTab,{tag:"component"})],1)],1)],1),n("q-card-actions",{directives:[{name:"show",rawName:"v-show",value:t.hasContext&&!t.isHidden,expression:"hasContext && !isHidden"}],attrs:{id:"kmc-bottom-actions"}},[n("div",{staticClass:"klab-button klab-action"},[n("q-icon",{attrs:{name:"mdi-terrain"}}),n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.scenarios")))])],1),n("div",{staticClass:"klab-button klab-action"},[n("q-icon",{attrs:{name:"mdi-human-male-female"}}),n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.observers")))])],1),t.contextHasTime?n("observations-timeline",{staticClass:"mc-timeline"}):t._e(),n("div",{staticClass:"klab-bottom-right-actions"},[n("div",{staticClass:"klab-button klab-action"},[n("div",{staticClass:"klab-font klab-im-logo float-left",on:{click:function(e){e.preventDefault(),t.paletteOpen=!t.paletteOpen}}}),n("q-icon",{staticClass:"float-left klab-item",staticStyle:{padding:"3px 0 0 8px"},attrs:{name:"mdi-chevron-down"}})],1),n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.palette")))])],1)],1)],1)],1),n("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[t.askForDocking?n("div",{staticClass:"mc-docking full-height",style:{width:t.leftMenuMaximized}}):t._e()])],1)},f=[];h._withStripped=!0;var p;n("f751");function v(t){return t&&(t.$el||t)}function m(t,e,n,i,o){void 0===o&&(o={});var r={left:n,top:i},s=t.height,a=t.width,c=i,l=i+s,u=n,d=n+a,h=o.top||0,f=o.bottom||0,p=o.left||0,v=o.right||0,m=e.top+h,g=e.bottom-f,y=e.left+p,b=e.right-v;return c<m?r.top=m:l>g&&(r.top=g-s),u<y?r.left=y:d>b&&(r.left=b-a),r}(function(t){t[t["Start"]=1]="Start",t[t["End"]=2]="End",t[t["Move"]=3]="Move"})(p||(p={}));var g={bind:function(t,e,n,i){g.update(t,e,n,i)},update:function(t,e,n,i){if(!e.value||!e.value.stopDragging){var o=e.value&&e.value.handle&&v(e.value.handle)||t;e&&e.value&&e.value.resetInitialPos&&(f(),b()),o.getAttribute("draggable")||(t.removeEventListener("touchstart",t.listener),t.removeEventListener("mousedown",t.listener),o.addEventListener("mousedown",c),o.addEventListener("touchstart",c,{passive:!1}),o.setAttribute("draggable","true"),t.listener=c,f(),b())}function r(){if(e.value)return e.value.boundingRect||e.value.boundingElement&&e.value.boundingElement.getBoundingClientRect()}function s(){if(!g()){var e=_();e.currentDragPosition&&(t.style.position="fixed",t.style.left=e.currentDragPosition.left+"px",t.style.top=e.currentDragPosition.top+"px")}}function a(t){return t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY,t}function c(t){if(window.TouchEvent&&t instanceof TouchEvent){if(t.targetTouches.length<e.value.fingers)return;a(t)}y({initialPos:d(t)}),b(t,p.Start),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("mousemove",l),document.addEventListener("touchend",u,{passive:!1}),document.addEventListener("mouseup",u)}function l(n){n.preventDefault(),window.TouchEvent&&n instanceof TouchEvent&&a(n);var i=e.value&&e.value.stopDragging;if(!i){var o=_();o.startDragPosition&&o.initialPos||(f(n),o=_());var c=n.clientX-o.initialPos.left,l=n.clientY-o.initialPos.top,u={left:o.startDragPosition.left+c,top:o.startDragPosition.top+l},d=r(),h=t.getBoundingClientRect();d&&h&&(u=m(h,d,u.left,u.top,e.value.boundingRectMargin)),y({currentDragPosition:u}),s(),b(n)}}function u(t){t.preventDefault();var e=h();y({initialPos:void 0,startDragPosition:e,currentDragPosition:e}),document.removeEventListener("mousemove",l),document.removeEventListener("touchmove",l),document.removeEventListener("mouseup",u),document.removeEventListener("touchend",u),b(t,p.End)}function d(t){return t&&{left:t.clientX,top:t.clientY}}function h(){var e=t.getBoundingClientRect();if(e.height&&e.width)return{left:e.left,top:e.top}}function f(t){var n=_(),i=e&&e.value&&e.value.initialPosition,o=n.initialPosition,r=h(),a=i||o||r;e&&e.value&&e.value.fingers&&e.value.fingers>1||(e.value.fingers=2),y({initialPosition:a,startDragPosition:a,currentDragPosition:a,initialPos:d(t)}),s()}function g(){return e&&e.value&&e.value.noMove}function y(t){var e=_(),n=Object.assign({},e,t);o.setAttribute("draggable-state",JSON.stringify(n))}function b(t,n){var i=_(),o={x:0,y:0};i.currentDragPosition&&i.startDragPosition&&(o.x=i.currentDragPosition.left-i.startDragPosition.left,o.y=i.currentDragPosition.top-i.startDragPosition.top);var r=i.currentDragPosition&&Object.assign({},i.currentDragPosition);n===p.End?e.value&&e.value.onDragEnd&&i&&e.value.onDragEnd(o,r,t):n===p.Start?e.value&&e.value.onDragStart&&i&&e.value.onDragStart(o,r,t):e.value&&e.value.onPositionChange&&i&&e.value.onPositionChange(o,r,t)}function _(){return JSON.parse(o.getAttribute("draggable-state"))||{}}}},y=n("abcf"),b=n("1fe0"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"klab-actions",class:t.orientation},[n("div",{staticClass:"klab-main-actions"},["horizontal"!==t.orientation?n("div",{staticClass:"klab-button klab-action",class:[{active:t.mainViewerName===t.VIEWERS.DATA_VIEWER.name}],on:{click:function(e){t.mainViewerName!==t.VIEWERS.DATA_VIEWER.name&&t.setMainViewer(t.isMainControlDocked?t.VIEWERS.DOCKED_DATA_VIEWER:t.VIEWERS.DATA_VIEWER)}}},[n("q-icon",{attrs:{name:"mdi-eye-outline"}},[n("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.$t("tooltips.dataViewer")))])],1)],1):t._e(),n("div",{staticClass:"klab-button klab-action",class:[{active:t.mainViewerName===t.VIEWERS.REPORT_VIEWER.name,disabled:t.mainViewerName!==t.VIEWERS.REPORT_VIEWER.name&&!t.hasObservations}],on:{click:function(e){t.mainViewerName!==t.VIEWERS.REPORT_VIEWER.name&&t.hasObservations&&t.setMainViewer(t.VIEWERS.REPORT_VIEWER)}}},[n("q-icon",{attrs:{name:"mdi-file-document-box-outline"}},[t.mainViewerName!==t.VIEWERS.REPORT_VIEWER.name&&t.reloadReport&&t.hasObservations?n("span",{staticClass:"klab-button-notification"}):t._e(),n("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.hasObservations?t.$t("tooltips.reportViewer"):t.$t("tooltips.noReportObservation")))])],1)],1),n("div",{staticClass:"klab-button klab-action",class:[{active:t.mainViewerName===t.VIEWERS.DATAFLOW_VIEWER.name,disabled:t.mainViewerName!==t.VIEWERS.DATAFLOW_VIEWER.name&&!t.hasContext}],on:{click:function(e){t.mainViewerName!==t.VIEWERS.DATAFLOW_VIEWER.name&&t.hasContext&&t.setMainViewer(t.VIEWERS.DATAFLOW_VIEWER)}}},[n("q-icon",{attrs:{name:"mdi-sitemap"}},[t.mainViewerName!==t.VIEWERS.DATAFLOW_VIEWER.name&&t.hasContext&&t.reloadDataflow?n("span",{staticClass:"klab-button-notification"}):t._e(),n("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.hasDataflow||t.reloadDataflow?t.$t("tooltips.dataflowViewer"):t.$t("tooltips.noDataflow")))])],1)],1)])])},w=[];_._withStripped=!0;var S={name:"MainActionsButtons",props:{orientation:{type:String,default:"horizontal"},separatorClass:{type:String,default:""}},data:function(){return{}},computed:c()({},Object(l["d"])("view",["reloadReport","reloadDataflow"]),Object(l["c"])("data",["hasObservations","hasDataflow","hasContext"]),Object(l["c"])("view",["spinnerColor","mainViewerName","statusTextsString","statusTextsLength","isMainControlDocked"])),methods:c()({},Object(l["b"])("view",["setMainViewer"]),{tooltipAnchor:function(t){return"".concat(t," ").concat("horizontal"===this.orientation?"middle":"left")}}),created:function(){this.VIEWERS=u["y"]}},E=S,x=(n("6208"),n("2877")),C=Object(x["a"])(E,_,w,!1,null,null,null);C.options.__file="MainActionsButtons.vue";var O=C.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"klab-destructive-actions"},[t.hasContext&&!t.hasTasks(t.contextId)?n("div",{staticClass:"klab-button klab-reset-context",on:{click:t.resetContext}},[n("q-icon",{attrs:{name:"mdi-close-circle-outline"}},[n("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.$t("tooltips.resetContext")))])],1)],1):t._e(),t.hasContext&&t.hasTasks(t.contextId)?n("div",{staticClass:"klab-button klab-interrupt-task",on:{click:t.interruptTask}},[n("q-icon",{attrs:{name:"mdi-stop-circle-outline"}},[n("q-tooltip",{attrs:{offset:[0,8],self:t.tooltipAnchor("top"),anchor:t.tooltipAnchor("bottom")}},[t._v(t._s(t.$t("tooltips.interruptTask",{taskDescription:t.lastActiveTaskText})))])],1)],1):t._e()])},I=[];T._withStripped=!0;n("a481"),n("6762"),n("2fdb");var M={computed:c()({},Object(l["c"])("data",["hasContext","contextId","session"])),methods:c()({},Object(l["b"])("data",["loadContext","setWaitinForReset"]),Object(l["b"])("view",["setSpinner"]),{loadOrReloadContext:function(t,e){null!==t&&this.setSpinner(c()({},u["w"].SPINNER_LOADING,{owner:t})),this.hasContext?(this.sendStompMessage(d["a"].RESET_CONTEXT(this.$store.state.data.session).body),null!==t?this.setWaitinForReset(t):"function"===typeof e&&this.callbackIfNothing()):this.loadContext(t)}})},k={name:"StopActionsButtons",mixins:[M],data:function(){return{}},computed:c()({},Object(l["c"])("data",["hasContext","contextId","previousContext"]),Object(l["c"])("stomp",["hasTasks","lastActiveTask"]),{lastActiveTaskText:function(){var t=null===this.lastActiveTask(this.contextId)?"":this.lastActiveTask(this.contextId).description;return t.includes(u["g"].UNKNOWN_SEARCH_OBSERVATION)?t.replace(u["g"].UNKNOWN_SEARCH_OBSERVATION,this.$t("messages.unknownSearchObservation")):t}}),methods:{tooltipAnchor:function(t){return"".concat(t," ").concat("horizontal"===this.orientation?"middle":"left")},resetContext:function(){this.sendStompMessage(d["a"].RESET_CONTEXT(this.$store.state.data.session).body)},interruptTask:function(){var t=this.lastActiveTask(this.contextId);null!==t&&t.alive&&this.sendStompMessage(d["a"].TASK_INTERRUPTED({taskId:t.id},this.$store.state.data.session).body)}}},P=k,A=(n("c31b"),Object(x["a"])(P,T,I,!1,null,null,null));A.options.__file="StopActionsButtons.vue";var N=A.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"klab-spinner",attrs:{width:t.size,height:t.size,viewBox:"-120 -120 250 250",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("image",{attrs:{x:"-100",y:"-100",width:"200",height:"200","xlink:href":n("4df2")}}),i("circle",{staticClass:"spinner-circle",class:{moving:t.moving},style:{fill:t.ballColor},attrs:{cx:"0",cy:"-90",r:t.ball}})])},R=[];L._withStripped=!0;n("c5f6");var D=n("fb82"),j={name:"KlabSpinner",props:{size:{type:Number,default:200},ball:{type:Number,default:12},color:{type:String,default:D["a"].getBrand("primary")},ballColor:{type:String,default:D["a"].getBrand("primary")},stroke:{type:String,default:"none"},animated:{type:Boolean,default:!1},forceColor:{type:Boolean,default:!1},storeControlled:{type:Boolean,default:!1},wrapperId:{type:String,required:!0}},computed:c()({},Object(l["c"])("view",["spinner"]),{moving:function(){return this.storeControlled&&this.spinner.animated||this.animated},realColor:function(){return this.storeControlled?this.forceColor?this.getBrand(this.color):this.spinner.color:this.getBrand(this.color)}}),methods:{getBrand:function(t){return D["a"].getBrand(t)}}},B=j,F=(n("424f"),Object(x["a"])(B,L,R,!1,null,"3a38908f",null));F.options.__file="KlabSpinner.vue";var z=F.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.hasContext?"with-context":"without-context",t.isDocked?"ksb-docked":""],style:{width:t.isDocked&&t.searchIsFocused&&t.largeMode?t.getLargeModeWidth():"100%"},attrs:{id:"ksb-container"}},[t.isDocked?t._e():n("div",{staticClass:"klab-spinner-div",attrs:{id:"ksb-spinner"}},[n("klab-spinner",{style:{"box-shadow":t.searchIsFocused?"0px 0px 3px "+t.getBGColor(".4"):"none"},attrs:{"store-controlled":!0,color:t.spinnerColor.hex,size:40,ball:22,wrapperId:"ksb-spinner",id:"spinner-searchbar"},nativeOn:{dblclick:function(e){return t.emitSpinnerDoubleclick(e)},touchstart:function(e){e.stopPropagation(),t.handleTouch(e,t.showSuggestions,t.emitSpinnerDoubleclick)}}})],1),n("div",{class:[t.fuzzyMode?"klab-fuzzy":"",t.searchIsFocused?"klab-search-focused":""],style:{"background-color":t.isDocked?t.getBGColor(t.hasContext?"1.0":t.searchIsFocused?".8":t.isDocked?"1.0":".2"):"rgba(0,0,0,0)"},attrs:{id:"ksb-search-container"}},[t.searchIsActive?n("klab-search",{ref:"klab-search",staticClass:"klab-search",on:{"busy-search":t.busySearch}}):n("div",{staticClass:"ksb-context-text text-white"},[n("scrolling-text",{ref:"st-context-text",attrs:{"with-edge":!0,"hover-active":!0,"initial-text":null===t.mainContextLabel?t.$t("label.noContextPlaceholder"):t.mainContextLabel,"placeholder-style":!t.hasContext}})],1),n("div",{ref:"ksb-status-texts",staticClass:"ksb-status-texts"},[n("scrolling-text",{ref:"st-status-text",attrs:{"with-edge":!0,edgeOpacity:t.hasContext?1:t.searchIsFocused?.8:.2,hoverActive:!1,initialText:t.statusTextsString,accentuate:!0}})],1),t.isScaleLocked["space"]&&!t.hasContext?n("q-icon",{attrs:{name:"mdi-lock-outline"}},[n("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[10,5],delay:500}},[t._v(t._s(t.$t("label.scaleLocked",{type:t.$t("label.spaceScale")})))])],1):t._e(),n("main-control-menu")],1)])},U=[];V._withStripped=!0;var q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"ks-container",attrs:{id:"ks-container"}},[n("div",{staticStyle:{position:"relative"},attrs:{id:"ks-internal-container"}},[t._l(t.acceptedTokens,function(e,i){return n("div",{key:e.index,ref:"token-"+e.index,refInFor:!0,class:["ks-tokens-accepted","ks-tokens","bg-semantic-elements",e.selected?"selected":"","text-"+e.leftColor],style:{"border-color":e.selected?e.rgb:"transparent"},attrs:{tabindex:i},on:{focus:function(n){t.onTokenFocus(e,n)},blur:function(n){t.onTokenFocus(e,n)},keydown:t.onKeyPressedOnToken,touchstart:function(e){t.handleTouch(e,null,t.deleteLastToken)}}},[t._v(t._s(e.value)+"\n      "),n("q-tooltip",{attrs:{delay:500,offset:[0,15],self:"top left",anchor:"bottom left"}},[e.sublabel.length>0?n("span",[t._v(t._s(e.sublabel))]):n("span",[t._v(t._s(t.$t("label.noTokenDescription")))])])],1)}),n("div",{staticClass:"ks-tokens",class:[t.fuzzyMode?"ks-tokens-fuzzy":"ks-tokens-klab"]},[n("q-input",{ref:"ks-search-input",class:[t.fuzzyMode?"ks-fuzzy":"",t.searchIsFocused?"ks-search-focused":""],attrs:{autofocus:!0,placeholder:t.fuzzyMode?t.$t("label.fuzzySearchPlaceholder"):t.$t("label.searchPlaceholder"),size:"20",id:"ks-search-input",tabindex:t.acceptedTokens.length,"hide-underline":!0},on:{focus:function(e){t.onInputFocus(!0)},blur:function(e){t.onInputFocus(!1)},keydown:t.onKeyPressedOnSearchInput,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,"Escape"))return null;t.searchEnd({})}},nativeOn:{contextmenu:function(t){t.preventDefault()},touchstart:function(e){t.handleTouch(e,null,t.searchInKLab)}},model:{value:t.actualToken,callback:function(e){t.actualToken=e},expression:"actualToken"}},[n("klab-autocomplete",{ref:"ks-autocomplete",class:[t.notChrome()?"not-chrome":""],attrs:{debounce:400,"min-characters":t.minimumCharForAutocomplete,"max-results":50,id:"ks-autocomplete"},on:{search:t.autocompleteSearch,selected:t.selected,show:t.onAutocompleteShow,hide:t.onAutocompleteHide}})],1)],1)],2)])},Y=[];q._withStripped=!0;n("ac6a");var $=n("448a"),G=n.n($),H=(n("7f7f"),n("386d"),n("278c")),K=n.n(H),W=(n("20d6"),n("2b0e")),X=n("b0b2"),Z=n("b12a"),Q=n("7ea0"),J=n("b5b8"),tt=n("1180"),et=n("68c2"),nt=n("506f"),it=n("b8d9"),ot=(n("7514"),n("52b5")),rt=n("03d8"),st={name:"QItemSide",props:{right:Boolean,icon:String,letter:{type:String,validator:function(t){return 1===t.length}},inverted:Boolean,avatar:String,image:String,stamp:String,color:String,textColor:String,tooltip:{type:Object,default:null}},computed:{type:function(){var t=this;return["icon","image","avatar","letter","stamp"].find(function(e){return t[e]})},classes:function(){var t=["q-item-side-".concat(this.right?"right":"left")];return!this.color||this.icon||this.letter||t.push("text-".concat(this.color)),t},typeClasses:function(){var t=["q-item-".concat(this.type)];return this.color&&(this.inverted&&(this.icon||this.letter)?t.push("bg-".concat(this.color)):this.textColor||t.push("text-".concat(this.color))),this.textColor&&t.push("text-".concat(this.textColor)),this.inverted&&(this.icon||this.letter)&&(t.push("q-item-inverted"),t.push("flex"),t.push("flex-center")),t},imagePath:function(){return this.image||this.avatar}},render:function(t){var e;return this.type&&(this.icon?(e=t(ot["a"],{class:this.inverted?null:this.typeClasses,props:{name:this.icon,tooltip:this.tooltip}}),this.inverted&&(e=t("div",{class:this.typeClasses},[e]))):e=this.imagePath?t("img",{class:this.typeClasses,attrs:{src:this.imagePath}}):t("div",{class:this.typeClasses},[this.stamp||this.letter])),t("div",{staticClass:"q-item-side q-item-section",class:this.classes},[null!==this.tooltip?t(rt["a"],{ref:"tooltip",class:"kl-model-desc-container",props:{offset:[25,0],anchor:"top right",self:"top left"}},[t("div",{class:["kl-model-desc","kl-model-desc-title"]},this.tooltip.title),t("div",{class:["kl-model-desc","kl-model-desc-state","bg-state-".concat(this.tooltip.state)]},this.tooltip.state),t("div",{class:["kl-model-desc","kl-model-desc-content"]},this.tooltip.content)]):null,e,this.$slots.default])}};function at(t,e,n,i,o,r){var s={props:{right:r.right}};if(i&&o)t.push(e(n,s,i));else{var a=!1;for(var c in r)if(r.hasOwnProperty(c)&&(a=r[c],void 0!==a&&!0!==a)){t.push(e(n,{props:r}));break}i&&t.push(e(n,s,i))}}var ct={name:"QItemWrapper",props:{cfg:{type:Object,default:function(){return{}}},slotReplace:Boolean},render:function(t){var e=this.cfg,n=this.slotReplace,i=[];return at(i,t,st,this.$slots.left,n,{icon:e.icon,color:e.leftColor,avatar:e.avatar,letter:e.letter,image:e.image,inverted:e.leftInverted,textColor:e.leftTextColor,tooltip:e.leftTooltip}),at(i,t,it["a"],this.$slots.main,n,{label:e.label,sublabel:e.sublabel,labelLines:e.labelLines,sublabelLines:e.sublabelLines,inset:e.inset}),at(i,t,st,this.$slots.right,n,{right:!0,icon:e.rightIcon,color:e.rightColor,avatar:e.rightAvatar,letter:e.rightLetter,image:e.rightImage,stamp:e.stamp,inverted:e.rightInverted,textColor:e.rightTextColor,tooltip:e.rightTooltip}),i.push(this.$slots.default),t(nt["a"],{attrs:this.$attrs,on:this.$listeners,props:e},i)}},lt=y["b"].width,ut={name:"KlabQAutocomplete",extends:Q["a"],methods:{trigger:function(t){var e=this;if(this.__input&&this.__input.isEditable()&&this.__input.hasFocus()&&this.isWorking()){var n=[null,void 0].includes(this.__input.val)?"":String(this.__input.val),i=n.length,o=Object(et["a"])(),r=this.$refs.popover;if(this.searchId=o,i<this.minCharacters||!0===t&&i>0)return this.searchId="",this.__clearSearch(),void this.hide();if(this.width=lt(this.inputEl)+"px",this.staticData)return this.searchId="",this.results=this.filter(n,this.staticData),this.results.length?void this.__showResults():void r.hide();this.$emit("search",n,function(t){if(e.isWorking()&&e.searchId===o){if(e.__clearSearch(),Array.isArray(t)&&t.length>0)return e.results=t,void e.__showResults();e.hide()}})}}},render:function(t){var e=this,n=this.__input.isDark();return t(J["a"],{ref:"popover",class:n?"bg-dark":null,props:{fit:!0,keepOnScreen:!0,anchorClick:!1,maxHeight:this.maxHeight,noFocus:!0,noRefocus:!0},on:{show:function(){e.__input.selectionOpen=!0,e.$emit("show")},hide:function(){e.__input.selectionOpen=!1,e.$emit("hide")}},nativeOn:{mousedown:function(t){t.preventDefault()}}},[t(tt["a"],{props:{dark:n,noBorder:!0,separator:this.separator},style:this.computedWidth},this.computedResults.map(function(n,i){return t(ct,{key:n.id||i,class:{"q-select-highlight":e.keyboardIndex===i,"cursor-pointer":!n.disable,"text-faded":n.disable,"ka-separator":n.separator},props:{cfg:n},nativeOn:{mousedown:function(t){!n.disable&&(e.keyboardIndex=i),t.preventDefault()},click:function(){!n.disable&&e.setValue(n)}}})}))])}},dt={data:function(){return{doubleTouchTimeout:null}},methods:{handleTouch:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300;window.TouchEvent&&t instanceof TouchEvent&&(1===t.targetTouches.length?null===this.doubleTouchTimeout?this.doubleTouchTimeout=setTimeout(function(){e.doubleTouchTimeout=null,null!==n&&n(t)},r):(clearTimeout(this.doubleTouchTimeout),this.doubleTouchTimeout=null,null!==i&&i()):null!==o&&o(t))}}},ht="=(<)>",ft={name:"KlabSearch",components:{KlabAutocomplete:ut},mixins:[dt],props:{maxResults:{type:Number,default:-1}},data:function(){return{searchContextId:null,searchRequestId:0,doneFunc:null,result:null,acceptedTokens:[],actualToken:"",actualSearchString:"",noSearch:!1,searchDiv:null,searchDivInitialSize:void 0,searchDivInternal:void 0,searchInput:null,autocompleteEl:null,scrolled:0,suggestionShowed:!1,searchTimeout:null,searchHistoryIndex:-1,autocompleteSB:null,freeText:!1,parenthesisDepth:0,last:!1,minimumCharForAutocomplete:2}},computed:c()({},Object(l["c"])("data",["searchResult","contextId","isCrossingIDL"]),Object(l["c"])("view",["spinner","searchIsFocused","searchLostChar","searchHistory","fuzzyMode","largeMode","isDocked","engineEventsCount"]),{inputSearchColor:{get:function(){return this.searchInput?this.searchInput.$refs.input.style.color:"black"},set:function(t){this.searchInput.$refs.input&&(this.searchInput.$refs.input.style.color=t)}}}),methods:c()({},Object(l["b"])("data",["setContextCustomLabel"]),Object(l["b"])("view",["searchStop","setSpinner","searchFocus","resetSearchLostChar","storePreviousSearch","setFuzzyMode","setLargeMode"]),{notChrome:function(){return-1===navigator.userAgent.indexOf("Chrome")},onTokenFocus:function(t,e){t.selected="focus"===e.type},onInputFocus:function(t){this.searchFocus({focused:t}),this.actualToken=this.actualSearchString},onAutocompleteShow:function(){this.suggestionShowed=!0},onAutocompleteHide:function(){this.suggestionShowed=!1,this.actualToken!==this.actualSearchString&&(this.noSearch=!0,this.resetSearchInput())},onKeyPressedOnToken:function(t){var e=this;if(37===t.keyCode||39===t.keyCode){t.preventDefault();var n=this.acceptedTokens.findIndex(function(t){return t.selected}),i=null,o=!1;if(37===t.keyCode&&n>0?i="token-".concat(this.acceptedTokens[n-1].index):39===t.keyCode&&n<this.acceptedTokens.length&&(n===this.acceptedTokens.length-1?(i="ks-search-input",o=!0):i="token-".concat(this.acceptedTokens[n+1].index)),null!==i){var r=this.$refs[i];if(Array.isArray(r)){var s=r,a=K()(s,1);r=a[0]}W["a"].nextTick(function(){r.focus();var n=null,i=e.searchDiv.offsetLeft;if(37===t.keyCode){var s=r.offsetLeft+i-e.searchDiv.offsetLeft;e.searchDiv.scrollLeft>=s&&(n=s)}else{var a=o?r.$el:r,c=(o?a.offsetLeft:r.offsetLeft)+i+a.offsetWidth,l=e.searchDiv.offsetWidth+e.searchDiv.scrollLeft;l<=c&&(n=e.searchDiv.scrollLeft+(c-l)-i)}null!==n&&W["a"].nextTick(function(){e.searchDiv.scrollLeft=n})})}}},onKeyPressedOnSearchInput:function(t){var e=this;if(this.noSearch=!1,this.last)return t.preventDefault(),void this.$q.notify({message:this.$t("messages.lastTermAlertText"),type:"warning",icon:"mdi-alert",timeout:2e3});switch(t.keyCode){case 8:if(""===this.actualToken&&0!==this.acceptedTokens.length){var n=this.acceptedTokens.pop();this.searchHistoryIndex=-1,t.preventDefault(),this.sendStompMessage(d["a"].SEARCH_MATCH({contextId:this.searchContextId,matchIndex:n.matchIndex,matchId:n.id,added:!1},this.$store.state.data.session).body),this.freeText=this.acceptedTokens.length>0&&this.acceptedTokens[this.acceptedTokens.length-1].nextTokenClass!==u["k"].NEXT_TOKENS.TOKEN,this.$nextTick(function(){e.checkLargeMode(!1)})}else""!==this.actualSearchString?(t.preventDefault(),this.actualSearchString=this.actualSearchString.slice(0,-1),""===this.actualSearchString&&this.setFuzzyMode(!1)):""===this.actualSearchString&&""!==this.actualToken&&(this.actualToken="",t.preventDefault());break;case 9:this.suggestionShowed&&-1!==this.autocompleteEl.keyboardIndex?(this.autocompleteEl.setValue(this.autocompleteEl.results[this.autocompleteEl.keyboardIndex]),this.searchHistoryIndex=-1):this.freeText&&this.acceptText(),t.preventDefault();break;case 13:this.freeText||this.fuzzyMode?this.acceptText():this.searchInKLab(t);break;case 27:this.suggestionShowed?this.autocompleteEl.hide():this.searchEnd({noStore:!0}),t.preventDefault();break;case 32:if(t.preventDefault(),this.fuzzyMode)this.searchHistoryIndex=-1,this.actualSearchString+=t.key;else if(this.freeText)this.acceptFreeText();else if(this.suggestionShowed){var i=-1===this.autocompleteEl.keyboardIndex?0:this.autocompleteEl.keyboardIndex,o=this.autocompleteEl.results[i];o.separator||(this.autocompleteEl.setValue(o),this.searchHistoryIndex=-1)}else this.askForSuggestion()||this.$q.notify({message:this.$t("messages.noSpaceAllowedInSearch"),type:"warning",icon:"mdi-alert",timeout:1500});break;case 37:if(!this.suggestionShowed&&0===this.searchInput.$refs.input.selectionStart&&this.acceptedTokens.length>0){var r=this.acceptedTokens[this.acceptedTokens.length-1];W["a"].nextTick(function(){e.$refs["token-".concat(r.index)][0].focus()}),t.preventDefault()}break;case 38:this.suggestionShowed||this.searchHistoryEvent(1,t);break;case 40:this.suggestionShowed||this.searchHistoryEvent(-1,t);break;default:this.isAcceptedKey(t.key)?")"===t.key&&0===this.parenthesisDepth?t.preventDefault():(t.preventDefault(),0===this.acceptedTokens.length&&0===this.searchInput.$refs.input.selectionStart&&Object(X["h"])(t.key)&&this.setFuzzyMode(!0),this.searchHistoryIndex=-1,this.actualSearchString+=t.key,-1!==ht.indexOf(t.key)&&this.askForSuggestion(t.key.trim())):39!==t.keyCode&&t.preventDefault();break}},acceptText:function(){var t=this,e=this.actualToken.trim();""===e?this.$q.notify({message:this.$t("messages.emptyFreeTextSearch"),type:"warning",icon:"mdi-alert",timeout:1e3}):this.search(this.actualToken,function(e){e&&e.length>0?t.selected(e[0],!1):t.$q.notify({message:t.$t("messages.noSearchResults"),type:"info",icon:"mdi-information",timeout:1e3})})},selected:function(t,e){var n=this;if(e)this.inputSearchColor=t.rgb;else{if(this.acceptedTokens.push(t),this.actualSearchString="",this.sendStompMessage(d["a"].SEARCH_MATCH({contextId:this.searchContextId,matchIndex:t.matchIndex,matchId:t.id,added:!0},this.$store.state.data.session).body),this.fuzzyMode)return this.setContextCustomLabel(this.$t("messages.waitingLocation",{location:t.label})),this.setSpinner(c()({},u["w"].SPINNER_LOADING,{owner:this.$options.name})),void this.$nextTick(function(){n.searchEnd({})});this.freeText=t.nextTokenClass!==u["k"].NEXT_TOKENS.TOKEN,this.$nextTick(function(){n.checkLargeMode(!0)})}},checkLargeMode:function(){var t=this;this.$nextTick(function(){var e;if(t.isDocked)e=t.searchDivInitialSize-t.searchDivInternal.clientWidth,e<0&&0===t.largeMode?t.setLargeMode(1):e>=0&&t.largeMode>0&&t.setLargeMode(0);else if(e=t.searchDiv.clientWidth-t.searchDivInternal.clientWidth,e>=0){var n=Math.floor(e/u["c"].SEARCHBAR_INCREMENT);n>0&&t.largeMode>0&&(n>t.largeMode?t.setLargeMode(0):t.setLargeMode(t.largeMode-n))}else{var i=Math.ceil(Math.abs(e)/u["c"].SEARCHBAR_INCREMENT);t.setLargeMode(t.largeMode+i)}})},autocompleteSearch:function(t,e){this.freeText?e([]):this.search(t,e)},search:function(t,e){var n=this;if(this.noSearch)return this.noSearch=!1,void e([]);this.searchRequestId+=1,this.sendStompMessage(d["a"].SEARCH_REQUEST({requestId:this.searchRequestId,contextId:this.searchContextId,maxResults:this.maxResults,cancelSearch:!1,defaultResults:""===t,searchMode:this.fuzzyMode?u["t"].FREETEXT:u["t"].SEMANTIC,queryString:this.actualSearchString},this.$store.state.data.session).body),this.setSpinner(c()({},u["w"].SPINNER_LOADING,{owner:this.$options.name})),this.doneFunc=e,this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){n.setSpinner(c()({},u["w"].SPINNER_ERROR,{owner:n.$options.name,errorMessage:n.$t("errors.searchTimeout"),time:n.fuzzyMode?5:2,then:c()({},u["w"].SPINNER_STOPPED)})),n.doneFunc([])},"4000")},searchInKLab:function(){if(!this.suggestionShowed&&!this.fuzzyMode)if(this.parenthesisDepth>0)this.$q.notify({message:this.$t("messages.parenthesisAlertText"),type:"warning",icon:"mdi-alert",timeout:2e3});else if(this.isCrossingIDL)this.$q.dialog({title:this.$t("label.IDLAlertTitle"),message:this.$t("messages.IDLAlertText"),color:"mc-red"}).catch(function(){});else{if(this.acceptedTokens.length>0){if(this.engineEventsCount>0)return this.$emit("busy-search"),void this.$q.notify({message:this.$t("messages.resourcesValidating"),type:"warning",icon:"mdi-alert",timeout:2e3});var t=this.acceptedTokens.map(function(t){return t.id}).join(" ");this.sendStompMessage(d["a"].OBSERVATION_REQUEST({urn:t,contextId:this.contextId,searchContextId:null},this.$store.state.data.session).body);var e=this.acceptedTokens.map(function(t){return t.label}).join(" ");this.setContextCustomLabel(this.$t("messages.waitingObservationInit",{observation:e})),this.$q.notify({message:this.$t("label.askForObservation",{urn:e}),type:"info",icon:"mdi-information",timeout:2e3})}else console.info("Nothing to search for");this.searchEnd({})}},searchEnd:function(t){var e=t.noStore,n=void 0!==e&&e,i=t.noDelete,o=void 0!==i&&i;if(!this.suggestionShowed){if(this.acceptedTokens.length>0){if(o)return;n||this.storePreviousSearch({acceptedTokens:this.acceptedTokens.slice(0),searchContextId:this.searchContextId,searchRequestId:this.searchRequestId})}this.searchContextId=null,this.searchRequestId=0,this.doneFunc=null,this.result=null,this.acceptedTokens=[],this.searchHistoryIndex=-1,this.actualSearchString="",this.scrolled=0,this.noSearch=!1,this.freeText=!1,this.setFuzzyMode(!1),this.setLargeMode(0),this.parenthesisDepth=0,this.last=!1,this.searchStop()}},resetSearchInput:function(){var t=this;this.$nextTick(function(){t.actualToken=t.actualSearchString,t.inputSearchColor="black"})},searchHistoryEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(""===this.actualToken&&this.searchHistory.length>0&&(0===this.acceptedTokens.length||this.searchHistoryIndex>=0)&&this.searchHistory.length>0&&(t>0||this.searchHistoryIndex>0)&&this.searchHistoryIndex+t<this.searchHistory.length){this.searchHistoryIndex+=t;var n=this.searchHistory[this.searchHistoryIndex];this.acceptedTokens=n.acceptedTokens.slice(0),this.searchContextId=n.searchContextId,this.searchRequestId=n.searchRequestId,null!==e&&e.preventDefault()}},askForSuggestion:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(""!==e||0===this.acceptedTokens.length)&&0===this.searchInput.$refs.input.selectionStart&&(this.search(e,function(n){t.autocompleteEl.__clearSearch(),Array.isArray(n)&&n.length>0?(t.autocompleteEl.results=n,W["a"].nextTick(function(){t.autocompleteEl.__showResults(),""!==e&&(t.autocompleteEl.keyboardIndex=0)})):t.autocompleteEl.hide()}),!0)},deleteLastToken:function(){if(0!==this.acceptedTokens.length){var t=this.acceptedTokens.pop();this.searchHistoryIndex=-1,this.sendStompMessage(d["a"].SEARCH_MATCH({contextId:this.searchContextId,matchIndex:t.matchIndex,matchId:t.id,added:!1},this.$store.state.data.session).body)}},charReceived:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"ArrowUp"===t?this.searchHistoryEvent(1):"ArrowDown"===t?this.searchHistoryEvent(-1):" "===t?this.askForSuggestion():(Object(X["h"])(t)&&this.setFuzzyMode(!0),this.actualSearchString=e?this.actualSearchString+t:t,-1!==ht.indexOf(t)&&this.askForSuggestion(t))}}),watch:{actualSearchString:function(){this.resetSearchInput()},searchResult:function(t){var e=this;this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=t.requestId,i=t.contextId;if(null===this.searchContextId)this.searchContextId=i;else if(i!==this.searchContextId)return void console.warn("Something strange was happened: differents search context ids:\n\n        actual: ".concat(this.searchContextId," / received: ").concat(i));if(this.searchRequestId===n){var o;null!==this.result&&this.result.requestId===n&&(o=t.matches).push.apply(o,G()(this.result.matches)),this.result=t;var r=this.result,s=r.matches,a=r.error,l=r.errorMessage,d=r.parenthesisDepth,h=r.last;if(this.parenthesisDepth=d,this.last=h,a)this.setSpinner(c()({},u["w"].SPINNER_ERROR,{owner:this.$options.name,errorMessage:l}));else{var f=[];s.forEach(function(t){var n=u["k"][t.matchType];if("undefined"!==typeof n){var i=n;if(null!==t.mainSemanticType){var o=u["u"][t.mainSemanticType];"undefined"!==typeof o&&(i=o)}if("SEPARATOR"===t.matchType)f.push({value:t.name,label:t.name,labelLines:1,rgb:i.rgb,selected:!1,disable:!0,separator:!0});else{var r=t.state?t.state:null,s=null!==r?Object(Z["g"])(t.state):null;f.push(c()({value:t.name,label:t.name,labelLines:1,sublabel:t.description,sublabelLines:4,letter:i.symbol,leftInverted:!0,leftColor:i.color,rgb:i.rgb,id:t.id,index:e.acceptedTokens.length+1,matchIndex:t.index,selected:!1,disable:t.state&&"FORTHCOMING"===t.state,separator:!1,nextTokenClass:t.nextTokenClass},null!==s&&{rightIcon:s.icon,rightTextColor:"state-".concat(s.tooltip),rightTooltip:{state:s.tooltip,title:t.name,content:t.extendedDescription||t.description}}))}}else console.warn("Unknown type: ".concat(t.matchType))}),this.fuzzyMode||0!==f.length||this.$q.notify({message:this.$t("messages.noSearchResults"),type:"info",icon:"mdi-information",timeout:1e3}),this.setSpinner(c()({},u["w"].SPINNER_STOPPED,{owner:this.$options.name})),W["a"].nextTick(function(){e.doneFunc(f),e.autocompleteEl.keyboardIndex=0})}}else console.warn("Result discarded for bad request id: actual: ".concat(this.searchRequestId," / received: ").concat(n,"\n"))},acceptedTokens:function(){var t=this;W["a"].nextTick(function(){var e=t.searchDiv.scrollWidth;t.scrolled!==e&&(t.searchDiv.scrollLeft=e,t.scrolled=e)})},searchIsFocused:function(t){t?(this.searchInput.focus(),this.acceptedTokens.forEach(function(t){t.selected=!1})):this.searchInput.blur()},searchLostChar:function(t){null!==t&&""!==t&&(this.charReceived(t,!0),this.resetSearchLostChar())}},beforeMount:function(){this.setFuzzyMode(!1)},mounted:function(){var t=this;this.searchDiv=this.$refs["ks-container"],this.searchDivInternal=document.getElementById("ks-internal-container"),this.searchInput=this.$refs["ks-search-input"],this.autocompleteEl=this.$refs["ks-autocomplete"],null!==this.searchLostChar&&""!==this.searchLostChar?this.charReceived(this.searchLostChar,!1):this.actualSearchString="",this.inputSearchColor="black",this.setLargeMode(0),this.$nextTick(function(){t.searchDivInitialSize=t.searchDiv.clientWidth})},updated:function(){var t=document.querySelectorAll("#ks-autocomplete .q-item-side-right");t.forEach(function(t){t.setAttribute("title","lalala")})},beforeDestroy:function(){this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null)}},pt=ft,vt=(n("aff7"),Object(x["a"])(pt,q,Y,!1,null,null,null));vt.options.__file="KlabSearch.vue";var mt=vt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"st-container",class:{marquee:t.needMarquee<0,"hover-active":t.hoverActive}},[n("div",{ref:"st-text",staticClass:"st-text",class:{"st-accentuate":t.accentuate,"st-placeholder":t.placeholderStyle},style:{left:(t.needMarquee<0?t.needMarquee:0)+"px","animation-duration":t.animationDuration+"s"}},[t._v("\n    "+t._s(t.text)+"\n  ")]),t.withEdge?n("div",{staticClass:"st-edges",style:{"background-color":t.getBGColor(t.spinnerColor,t.edgeOpacity)}}):t._e()])},yt=[];gt._withStripped=!0;var bt={name:"ScrollingText",props:{hoverActive:{type:Boolean,default:!1},initialText:{type:String,default:""},duration:{type:Number,default:10},accentuate:{type:Boolean,default:!1},edgeOpacity:{type:Number,default:1},withEdge:{type:Boolean,default:!0},placeholderStyle:{type:Boolean,default:!1}},data:function(){return{needMarquee:0,animationDuration:this.duration,text:this.initialText,edgeBgGradient:""}},computed:c()({},Object(l["c"])("view",["spinnerColor"])),methods:{isNeededMarquee:function(){var t=this.$refs["st-text"];return"undefined"===typeof t?0:t.offsetWidth-t.scrollWidth},changeText:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.needMarquee=0,t!==this.text&&(this.text=null===t?"":t,this.$nextTick(function(){null!==n&&(e.animationDuration=n),e.needMarquee=e.isNeededMarquee(e.ref)}))},getBGColor:function(t,e){return"rgba(".concat(t.rgb.r,",").concat(t.rgb.g,",").concat(t.rgb.b,", ").concat(e,")")},getEdgeGradient:function(){return"linear-gradient(to right,\n        ".concat(this.getBGColor(this.spinnerColor,1)," 0,\n        ").concat(this.getBGColor(this.spinnerColor,0)," 5%,\n        ").concat(this.getBGColor(this.spinnerColor,0)," 95%,\n        ").concat(this.getBGColor(this.spinnerColor,1)," 100%)")}},watch:{spinnerColor:function(){this.edgeBgGradient=this.getEdgeGradient()}},mounted:function(){var t=this;this.$nextTick(function(){t.needMarquee=t.isNeededMarquee(t.ref)}),this.edgeBgGradient=this.getEdgeGradient()}},_t=bt,wt=(n("2590"),Object(x["a"])(_t,gt,yt,!1,null,null,null));wt.options.__file="ScrollingText.vue";var St=wt.exports,Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-btn",{staticClass:"mcm-menubutton absolute-top-right",attrs:{icon:t.interactiveMode?"mdi-play":"mdi-chevron-right",color:t.interactiveMode?"mc-main-light":"black",size:"sm",round:"",flat:""}},[t.isVisible?n("q-popover",{ref:"mcm-main-popover",attrs:{anchor:"top right",self:"top left",persistent:!1}},[n("q-btn",{staticClass:"mcm-icon-close-popover",attrs:{icon:"mdi-close",color:"grey-8",size:"xs",flat:"",round:""},on:{click:t.closeMenuPopups}}),n("q-list",{attrs:{dense:""}},[n("q-list-header",{staticStyle:{padding:"0 16px 0 16px","min-height":"0"}},[t._v("\n        "+t._s(t.$t("label.mcMenuContext"))+"\n        "),t.hasContext?n("q-icon",{staticClass:"mcm-copy-icon",attrs:{name:"mdi-content-copy"},nativeOn:{click:function(e){t.copyContextES(e,t.contextEncodedShape)}}},[n("q-tooltip",{attrs:{delay:1e3,anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n            "+t._s(t.$t("tooltips.copyEncodedShapeToClipboard"))+"\n          ")])],1):t._e()],1),n("q-item-separator"),t.hasContext?n("q-item",[n("div",{staticClass:"mcm-container"},[n("div",{staticClass:"klab-menuitem klab-clickable",on:{click:function(e){t.closeAndCall(null)}}},[n("div",{staticClass:"klab-item mdi mdi-star-four-points-outline klab-icon"}),n("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.newContext")))])])])]):t._e(),n("q-item",[n("div",{staticClass:"mcm-container"},[n("div",{staticClass:"klab-menuitem klab-clickable",class:{"klab-not-available":0===t.contextsHistory.length},on:{click:t.toggleContextsHistory}},[n("div",{staticClass:"klab-item mdi mdi-history klab-icon"}),n("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.previousContexts")))]),n("div",[n("q-icon",{staticClass:"mcm-contextbutton",attrs:{name:"mdi-chevron-right",color:"black",size:"sm"}}),n("q-popover",{ref:"mcm-contexts-popover",attrs:{anchor:"top right",self:"top left",offset:[18,28]}},[n("q-list",{attrs:{dense:""}},t._l(t.contextsHistory,function(e){return n("q-item",{key:e.id},[n("q-item-main",[n("div",{staticClass:"mcm-container mcm-context-label"},[n("div",{staticClass:"klab-menuitem",class:[e.id===t.contextId?"klab-no-clickable":"klab-clickable"],on:{click:function(n){t.closeAndCall(e.id)}}},[n("div",{staticClass:"klab-item klab-large-text",class:{"mcm-actual-context":e.id===t.contextId},style:{"font-style":t.contextTaskIsAlive(e.id)?"italic":"normal"},on:{mouseover:function(n){t.tooltipIt(n,e.id)}}},[t._v("\n                            "+t._s(t.formatContextTime(e))+": "+t._s(e.label)+"\n                            "),n("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip(e.id),expression:"needTooltip(context.id)"}],attrs:{anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n                              "+t._s(e.label)+"\n                            ")])],1)]),n("q-icon",{staticClass:"absolute-right mcm-copy-icon",attrs:{name:"mdi-content-copy"},nativeOn:{click:function(n){t.copyContextES(n,e.spatialProjection+" "+e.encodedShape)}}},[n("q-tooltip",{attrs:{delay:1e3,anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n                            "+t._s(t.$t("tooltips.copyEncodedShapeToClipboard"))+"\n                          ")])],1)],1)])],1)}))],1)],1)])])]),t.searchIsActive||t.hasContext?t._e():[n("q-item",[n("q-item-main",[n("div",{staticClass:"mcm-container"},[n("div",{staticClass:"klab-menuitem klab-clickable",class:[t.isDrawMode?"klab-select":""],on:{click:function(e){t.startDraw()}}},[n("div",{staticClass:"klab-item mdi mdi-vector-polygon klab-icon"}),n("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.drawCustomContext")))])])])])],1),n("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuScale")))]),n("q-item-separator"),n("q-item",[n("q-item-main",[n("scale-reference",{attrs:{width:"180px",light:!0,scaleType:"space",editable:!0,full:!0}})],1)],1),n("q-item",[n("q-item-main",[n("scale-reference",{attrs:{width:"180px",light:!0,scaleType:"time",editable:!0,full:!0}})],1)],1)],n("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuOption")))]),n("q-item-separator"),n("q-item",[n("div",{staticClass:"mcm-container"},[n("div",{staticClass:"klab-menuitem"},[n("div",{staticClass:"klab-item"},[t._v(t._s(t.$t("label.interactiveMode")))])]),n("q-item-side",{attrs:{right:""}},[n("q-toggle",{attrs:{color:"mc-main"},model:{value:t.interactiveModeModel,callback:function(e){t.interactiveModeModel=e},expression:"interactiveModeModel"}})],1)],1)]),t.hasContext?t._e():[n("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuSettings")))]),n("q-item-separator"),n("q-item",[n("div",{staticClass:"mcm-container"},[n("div",{staticClass:"klab-menuitem"},[n("div",{staticClass:"klab-item"},[t._v(t._s(t.$t("label.optionSaveLocation")))])]),n("q-item-side",{attrs:{right:""}},[n("q-toggle",{attrs:{color:"mc-main"},model:{value:t.saveLocationVar,callback:function(e){t.saveLocationVar=e},expression:"saveLocationVar"}})],1)],1)]),n("q-item",[n("div",{staticClass:"mcm-container"},[n("div",{staticClass:"klab-menuitem"},[n("div",{staticClass:"klab-item"},[t._v(t._s(t.$t("label.saveDockedStatus")))])]),n("q-item-side",{attrs:{right:""}},[n("q-toggle",{attrs:{color:"mc-main"},model:{value:t.saveDockedStatusVar,callback:function(e){t.saveDockedStatusVar=e},expression:"saveDockedStatusVar"}})],1)],1)])],n("q-list-header",{staticStyle:{padding:"8px 16px 0 16px","min-height":"0"}},[t._v(t._s(t.$t("label.mcMenuHelp")))]),n("q-item-separator"),n("q-item",[n("div",{staticClass:"mcm-container"},[n("div",{staticClass:"klab-menuitem klab-clickable",on:{click:t.askTutorial}},[n("div",{staticClass:"klab-item klab-font klab-im-logo klab-icon"}),n("div",{staticClass:"klab-item klab-text klab-only-text"},[t._v(t._s(t.$t("label.showHelp")))])])])]),n("q-item-separator"),n("q-item",[n("div",{staticClass:"klab-version"},[t._v("Version: "+t._s(t.$store.state.data.packageVersion)+"/ Build "+t._s(t.$store.state.data.packageBuild))])])],2)],1):t._e()],1)},xt=[];Et._withStripped=!0;n("96cf");var Ct=n("c973"),Ot=n.n(Ct),Tt=n("c1df"),It=n.n(Tt),Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sr-container",class:[t.light?"sr-light":"sr-dark","vertical"===t.orientation?"sr-vertical":""],style:{width:t.width},on:{click:function(e){t.scaleEditing=t.editable}}},[t.hasScale?n("div",{staticClass:"sr-scalereference klab-menuitem",class:{"sr-full":t.full,"klab-clickable":t.editable}},[t.full?n("div",{staticClass:"sr-locked klab-item mdi sr-icon",class:[t.isScaleLocked[t.scaleType]?"mdi-lock-outline":"mdi-lock-open-outline"],on:{click:function(e){e.preventDefault(),t.lockScale(e)}}},[n("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,5]}},[t._v(t._s(t.isScaleLocked[t.scaleType]?t.$t("label.clickToUnlock"):t.$t("label.clickToLock")))])],1):t._e(),n("div",{staticClass:"sr-editables",style:{cursor:t.editable?"pointer":"default"}},[n("div",{staticClass:"sr-scaletype klab-item",class:["mdi "+t.type+" sr-icon"]}),n("div",{staticClass:"sr-description klab-item"},[t._v(t._s(t.description))]),n("div",{staticClass:"sr-spacescale klab-item"},[t._v(t._s(t.scale))]),t.editable?n("q-tooltip",{attrs:{anchor:"bottom middle",self:"top middle",offset:[0,5]}},[t.scaleType===t.SCALE_TYPE.ST_TIME&&""!==t.timeLimits?n("div",{staticClass:"sr-tooltip sr-time-tooltip",domProps:{innerHTML:t._s(t.timeLimits)}}):t._e(),n("div",{staticClass:"sr-tooltip"},[t._v(t._s(t.$t("label.clickToEditScale")))])]):t._e()],1)]):n("div",{staticClass:"sr-no-scalereference"},[n("p",[t._v(t._s(t.$t("label.noScaleReference")))])])])},kt=[];Mt._withStripped=!0;var Pt={name:"ScaleReference",props:{scaleType:{type:String,validator:function(t){return-1!==[u["q"].ST_SPACE,u["q"].ST_TIME].indexOf(t)},default:u["q"].ST_SPACE},useNext:{type:Boolean,default:!1},width:{type:String,default:"150px"},light:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},full:{type:Boolean,default:!1},orientation:{type:String,default:"horizontal"}},data:function(){return{SCALE_TYPE:u["q"]}},computed:c()({},Object(l["c"])("data",["scaleReference","isScaleLocked","nextScale"]),{scaleObj:function(){return this.useNext?this.nextScale:this.scaleReference},resolution:function(){return this.scaleType===u["q"].ST_SPACE?this.scaleObj.spaceResolutionConverted:this.scaleObj.timeUnit},unit:function(){return this.scaleType===u["q"].ST_SPACE?this.scaleObj.spaceUnit:this.scaleObj.timeUnit},type:function(){return this.scaleType===u["q"].ST_SPACE?"mdi-grid":"mdi-clock-outline"},description:function(){return this.scaleType===u["q"].ST_SPACE?this.scaleObj.spaceResolutionDescription:null===this.scaleObj.timeUnit?"YEAR":this.scaleObj.timeUnit},scale:function(){var t=this;return this.scaleType===u["q"].ST_SPACE?this.scaleObj.spaceScale:this.unit?u["r"].find(function(e){return e.value===t.unit}).index:this.scaleObj.timeScale},hasScale:function(){return this.useNext?null!==this.nextScale:null!==this.scaleReference},timeLimits:function(){return 0===this.scaleObj.start&&0===this.scaleObj.end?"":"".concat(It()(this.scaleObj.start).format("L HH:mm:ss"),"<br />").concat(It()(this.scaleObj.end).format("L HH:mm:ss"))},scaleEditing:{get:function(){return this.$store.getters["view/isScaleEditing"]},set:function(t){this.$store.dispatch("view/setScaleEditing",{active:t,type:this.scaleType})}}}),methods:c()({},Object(l["b"])("data",["setScaleLocked"]),{lockScale:function(t){t.stopPropagation();var e=!this.isScaleLocked[this.scaleType];this.sendStompMessage(d["a"].SETTING_CHANGE_REQUEST({setting:this.scaleType===u["q"].ST_SPACE?u["v"].LOCK_SPACE:u["v"].LOCK_TIME,value:e},this.$store.state.data.session).body),this.setScaleLocked({scaleType:this.scaleType,scaleLocked:e}),e||this.$eventBus.$emit(u["d"].SEND_REGION_OF_INTEREST)}})},At=Pt,Nt=(n("cf611"),Object(x["a"])(At,Mt,kt,!1,null,null,null));Nt.options.__file="ScaleReference.vue";var Lt=Nt.exports,Rt={data:function(){return{ellipsed:[]}},methods:{tooltipIt:function(t,e){t.target.offsetWidth<t.target.scrollWidth?this.ellipsed.push(e):this.ellipsed.splice(this.ellipsed.indexOf(e),1)},needTooltip:function(t){return this.ellipsed.includes(t)},clearTooltip:function(){this.ellipsed=[]}}},Dt=n("741d"),jt=n("1442"),Bt={name:"MainControlMenu",mixins:[Rt,M],components:{ScaleReference:Lt},data:function(){return{}},computed:c()({},Object(l["c"])("data",["contextsHistory","hasContext","contextId","contextReloaded","contextEncodedShape","interactiveMode","session"]),Object(l["d"])("stomp",["subscriptions"]),Object(l["c"])("stomp",["lastActiveTask","contextTaskIsAlive"]),Object(l["c"])("view",["searchIsActive","isDrawMode","isScaleEditing","isMainControlDocked"]),Object(l["d"])("view",["saveLocation","saveDockedStatus"]),{saveLocationVar:{get:function(){return this.saveLocation},set:function(t){this.changeSaveLocation(t)}},saveDockedStatusVar:{get:function(){return this.saveDockedStatus},set:function(t){this.changeSaveDockedStatus(t)}},interactiveModeModel:{get:function(){return this.interactiveMode},set:function(t){this.setInteractiveMode(t)}},isVisible:function(){return!this.isDrawMode&&!this.isScaleEditing}}),methods:c()({},Object(l["b"])("data",["setInteractiveMode"]),Object(l["b"])("view",["setDrawMode"]),{startDraw:function(){this.setDrawMode(!this.isDrawMode)},toggleContextsHistory:function(){this.contextsHistory.length>0&&this.$refs["mcm-contexts-popover"].toggle()},closeAndCall:function(){var t=Ot()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.contextId!==e){t.next=2;break}return t.abrupt("return");case 2:this.closeMenuPopups(),this.clearTooltip(),this.loadOrReloadContext(e,this.closeMenuPopups());case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),formatContextTime:function(t){var e=t.lastUpdate;if(0===e&&(e=t.creationTime),e&&null!==e){var n=It()(e),i=0===It()().diff(n,"days");return i?n.format("HH:mm:ss"):n.format("YYYY/mm/dd HH:mm:ss")}return""},changeSaveLocation:function(t){this.$store.commit("view/SET_SAVE_LOCATION",t,{root:!0}),Dt["a"].set(u["A"].COOKIE_SAVELOCATION,t,{expires:30,path:"/"}),t||(Dt["a"].set(u["A"].COOKIE_SAVELOCATION,t,{expires:30,path:"/"}),Dt["a"].set(u["A"].COOKIE_MAPDEFAULT,{center:jt["b"].center,zoom:jt["b"].zoom},{expires:30,path:"/"}))},changeSaveDockedStatus:function(t){this.$store.commit("view/SET_SAVE_DOCKED_STATUS",t,{root:!0}),t?Dt["a"].set(u["A"].COOKIE_DOCKED_STATUS,this.isMainControlDocked,{expires:30,path:"/"}):Dt["a"].remove(u["A"].COOKIE_DOCKED_STATUS)},copyContextES:function(t,e){t.stopPropagation(),Object(X["b"])(e),this.$q.notify({message:Object(X["a"])(this.$t("messages.customCopyToClipboard",{what:this.$t("label.context")})),type:"info",icon:"mdi-information",timeout:500})},closeMenuPopups:function(){this.$refs["mcm-main-popover"]&&this.$refs["mcm-main-popover"].hide(),this.$refs["mcm-contexts-popover"]&&this.$refs["mcm-contexts-popover"].hide()},sendInteractiveModeState:function(t){this.sendStompMessage(d["a"].SETTING_CHANGE_REQUEST({setting:u["v"].INTERACTIVE_MODE,value:t},this.session).body)},viewerClickListener:function(){this.isDrawMode||this.closeMenuPopups()},askTutorial:function(){this.$eventBus.$emit(u["d"].NEED_HELP),this.closeMenuPopups()}}),watch:{hasContext:function(){this.closeMenuPopups()},searchIsActive:function(t){t&&this.closeMenuPopups()},interactiveModeModel:function(t){this.sendInteractiveModeState(t)}},mounted:function(){this.$eventBus.$on(u["d"].VIEWER_CLICK,this.viewerClickListener)},beforeDestroy:function(){this.$eventBus.$off(u["d"].VIEWER_CLICK,this.viewerClickListener)}},Ft=Bt,zt=(n("6774"),Object(x["a"])(Ft,Et,xt,!1,null,null,null));zt.options.__file="MainControlMenu.vue";var Vt=zt.exports,Ut={name:"KlabSearchBar",components:{KlabSpinner:z,KlabSearch:mt,ScrollingText:St,MainControlMenu:Vt},mixins:[dt],data:function(){return{searchAsked:!1,busyInformed:!1,searchAskedInterval:null}},computed:c()({},Object(l["c"])("data",["hasContext","contextLabel","contextCustomLabel","isScaleLocked"]),Object(l["c"])("view",["spinnerColor","searchIsActive","searchIsFocused","hasMainControl","statusTextsString","statusTextsLength","fuzzyMode","largeMode","isDocked","engineEventsCount"]),{isDocked:function(){return!this.hasMainControl},mainContextLabel:function(){return this.contextLabel?this.contextLabel:this.contextCustomLabel}}),methods:c()({},Object(l["b"])("view",["setMainViewer","searchStart","searchFocus","searchStop","setSpinner"]),{getLargeModeWidth:function(){return"".concat((window.innerWidth||document.body.clientWidth)-u["j"].LEFTMENU_MINSIZE,"px")},getBGColor:function(t){return"rgba(".concat(this.spinnerColor.rgb.r,",").concat(this.spinnerColor.rgb.g,",").concat(this.spinnerColor.rgb.b,", ").concat(t,")")},showSuggestions:function(t){1===t.targetTouches.length&&(t.preventDefault(),this.searchIsActive?this.searchIsFocused?this.$refs["klab-search"].searchEnd({noDelete:!1}):this.searchFocus({char:" ",focused:!0}):this.searchStart(" "))},emitSpinnerDoubleclick:function(){this.$eventBus.$emit(u["d"].SPINNER_DOUBLE_CLICK)},askForSuggestionsListener:function(t){this.showSuggestions(t)},busySearch:function(){this.searchAsked=!0,this.updateBusy()},updateBusy:function(){var t=this;null!==this.searchAskedInterval&&(clearTimeout(this.searchAskedInterval),this.searchAskedInterval=null),this.searchAsked&&(0===this.engineEventsCount?this.searchAskedInterval=setTimeout(function(){t.searchAsked=!1,t.busyInformed=!1,t.setSpinner(c()({},u["w"].SPINNER_STOPPED,{owner:"BusySearch"}))},600):this.busyInformed||(this.setSpinner(c()({},u["w"].SPINNER_LOADING,{owner:"BusySearch"})),this.busyInformed=!0))}}),watch:{statusTextsString:function(t){t.includes(u["g"].UNKNOWN_SEARCH_OBSERVATION)&&(t=t.replace(u["g"].UNKNOWN_SEARCH_OBSERVATION,this.$t("messages.unknownSearchObservation"))),this.$refs["st-status-text"].changeText(t,5*this.statusTextsLength)},mainContextLabel:function(t){this.$refs["st-context-text"]&&this.$refs["st-context-text"].changeText(t)},hasContext:function(t){t&&this.setSpinner(c()({},u["w"].SPINNER_STOPPED,{owner:"KlabSearch"}))},engineEventsCount:function(){this.updateBusy()}},mounted:function(){this.$eventBus.$on(u["d"].ASK_FOR_SUGGESTIONS,this.askForSuggestionsListener),this.updateBusy()},beforeDestroy:function(){this.$eventBus.$off(u["d"].ASK_FOR_SUGGESTIONS,this.askForSuggestionsListener)}},qt=Ut,Yt=(n("19f2"),Object(x["a"])(qt,V,U,!1,null,null,null));Yt.options.__file="KlabSearchBar.vue";var $t=Yt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.contextsCount>1?n("div",{staticClass:"kbc-container"},t._l(t.contextsLabels,function(e,i){return n("span",{key:e.id,on:{click:function(n){t.loadContext(e.contextId,i)}}},[t._v(t._s(e.label))])})):t._e()},Ht=[];Gt._withStripped=!0;var Kt={name:"KlabBreadcrumbs",mixins:[M],computed:c()({},Object(l["c"])("data",["contextsLabels","contextsCount"])),methods:{loadContext:function(t,e){e!==this.contextsCount-1&&this.loadOrReloadContext(t)}}},Wt=Kt,Xt=(n("6c8f"),Object(x["a"])(Wt,Gt,Ht,!1,null,null,null));Xt.options.__file="KlabBreadcrumbs.vue";var Zt=Xt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"klab-tree-pane"}},[n("klab-splitter",{attrs:{margin:0,hidden:t.hasObservationInfo?"":"right"},on:{"close-info":t.onCloseInfo}},[n("div",{staticClass:"full-height",attrs:{slot:"left-pane",id:"ktp-left"},slot:"left-pane"},[t.hasTree?n("div",{ref:"kt-out-container",class:{"ktp-loading":t.taskOfContextIsAlive,"with-splitter":t.hasObservationInfo},attrs:{id:"kt-out-container"}},[n("q-resize-observable",{on:{resize:t.outContainerResized}}),[n("klab-tree",{ref:"kt-user-tree",style:{"max-height":!!t.userTreeMaxHeight&&t.userTreeMaxHeight+"px"},attrs:{id:"kt-user-tree",tree:t.userTree,"is-user":!0},on:{resized:t.recalculateTreeHeight}})],n("details",{directives:[{name:"show",rawName:"v-show",value:t.mainTreeHasNodes(),expression:"mainTreeHasNodes()"}],attrs:{id:"kt-tree-details",open:t.taskOfContextIsAlive||t.mainTreeHasNodes(!0)||t.detailsOpen}},[n("summary",[n("q-icon",{attrs:{name:"mdi-dots-horizontal",id:"ktp-main-tree-arrow"}},[n("q-tooltip",{attrs:{offset:[0,0],self:"top left",anchor:"bottom right"}},[t._v(t._s(t.detailsOpen?t.$t("tooltips.displayMainTree"):t.$t("tooltips.hideMainTree")))])],1)],1),n("klab-tree",{ref:"kt-tree",style:{"max-height":!!t.treeHeight&&t.treeHeight+"px"},attrs:{id:"kt-tree",tree:t.tree,"is-user":!1},on:{resized:t.recalculateTreeHeight}})],1)],2):t.hasContext?n("div",{staticClass:"q-ma-md text-center text-white ktp-no-tree"},[t._v("\n        "+t._s(t.$t("label.noObservation"))+"\n      ")]):n("div",{staticClass:"q-ma-md text-center text-white ktp-no-tree"},[t._v("\n        "+t._s(t.$t("label.noContext"))+"\n      ")])]),n("div",{staticClass:"full-height",attrs:{slot:"right-pane",id:"ktp-right"},slot:"right-pane"},[t.hasObservationInfo?n("observation-info",{on:{shownode:function(e){t.informTree(e)}}}):t._e()],1)])],1)},Jt=[];Qt._withStripped=!0;n("5df2");var te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"splitter-container full-height"},[!t.hidden&&t.controllers?n("div",{staticClass:"splitter-controllers"},[t.onlyOpenClose?t._e():[n("q-btn",{staticClass:"no-padding splitter-actions",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-to-left",icon:"mdi-arrow-left"},nativeOn:{click:function(e){t.percent=0}}}),n("q-btn",{staticClass:"no-padding splitter-actions rotate-90",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-to-middle",icon:"mdi-format-align-middle"},nativeOn:{click:function(e){t.percent=50}}}),n("q-btn",{staticClass:"no-padding splitter-actions",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-to-right",icon:"mdi-arrow-right"},nativeOn:{click:function(e){t.percent=100}}})],n("q-btn",{staticClass:"no-padding splitter-actions",style:{color:t.controlsColor},attrs:{flat:"",round:"",size:"sm",id:"splitter-close",icon:"mdi-close"},nativeOn:{click:function(e){t.$emit("close-info")}}})],2):t._e(),n("div",t._g({staticClass:"vue-splitter",style:{cursor:t.cursor,flexDirection:t.flexDirection}},t.onlyOpenClose?{}:{mouseup:t.onUp,mousemove:t.onMouseMove,touchmove:t.onMove,touchend:t.onUp}),[n("div",{staticClass:"left-pane splitter-pane",style:t.leftPaneStyle},[t._t("left-pane")],2),t.hidden?t._e():[t.onlyOpenClose?t._e():n("div",t._g({staticClass:"splitter",class:{active:t.active},style:t.splitterStyle},t.onlyOpenClose?{}:{mousedown:t.onDown,touchstart:t.onDown})),n("div",{staticClass:"right-pane splitter-pane",style:t.rightPaneStyle},[t._t("right-pane")],2)]],2)])},ee=[];te._withStripped=!0;var ne={props:{margin:{type:Number,default:10},horizontal:{type:Boolean,default:!1},hidden:{type:String,default:""},splitterColor:{type:String,default:"rgba(0, 0, 0, 0.2)"},controlsColor:{type:String,default:"rgba(192, 192, 192)"},splitterSize:{type:Number,default:3},controllers:{type:Boolean,default:!0},onlyOpenClose:{type:Boolean,default:!0}},data:function(){return{active:!1,percent:"left"===this.hidden?0:"right"===this.hidden?100:this.onlyOpenClose?0:50,hasMoved:!1}},computed:{flexDirection:function(){return this.horizontal?"column":"row"},splitterStyle:function(){return this.horizontal?{height:"".concat(this.splitterSize,"px"),cursor:"ns-resize","background-color":this.splitterColor}:{width:"".concat(this.splitterSize,"px"),cursor:"ew-resize","background-color":this.splitterColor}},leftPaneStyle:function(){return this.horizontal?{height:"".concat(this.percent,"%")}:{width:"".concat(this.percent,"%")}},rightPaneStyle:function(){return this.horizontal?{height:"".concat(100-this.percent,"%")}:{width:"".concat(100-this.percent,"%")}},cursor:function(){return this.active?this.horizontal?"ns-resize":"ew-resize":""}},methods:{onDown:function(){this.active=!0,this.hasMoved=!1},onUp:function(){this.active=!1},onMove:function(t){var e=0,n=t.currentTarget,i=0;if(this.active){if(this.horizontal){while(n)e+=n.offsetTop,n=n.offsetParent;i=Math.floor((t.pageY-e)/t.currentTarget.offsetHeight*1e4)/100}else{while(n)e+=n.offsetLeft,n=n.offsetParent;i=Math.floor((t.pageX-e)/t.currentTarget.offsetWidth*1e4)/100}i>this.margin&&i<100-this.margin&&(this.percent=i),this.$emit("splitterresize"),this.hasMoved=!0}},onMouseMove:function(t){0!==t.buttons&&0!==t.which||(this.active=!1),this.onMove(t)}},watch:{hidden:function(){this.percent="left"===this.hidden?0:"right"===this.hidden?100:this.onlyOpenClose?0:50}}},ie=ne,oe=(n("1848"),Object(x["a"])(ie,te,ee,!1,null,null,null));oe.options.__file="KlabSplitter.vue";var re=oe.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"kt-container relative-position klab-menu-component",class:{"kt-drag-enter":t.dragEnter>0&&!t.dragStart},on:{dragenter:t.onDragEnter,dragover:t.onDragOver,dragleave:t.onDragLeave,drop:t.onDrop}},[n("div",{staticClass:"kt-tree-container simplebar-vertical-only",on:{contextmenu:t.rightClickHandler}},[n("klab-q-tree",{ref:"klab-tree",attrs:{nodes:t.tree,"node-key":"id",ticked:t.ticked,selected:t.selected,expanded:t.expanded,"tick-strategy":"strict","text-color":"white","control-color":"white",color:"white",dark:!0,noNodesLabel:t.$t("label.noNodes"),"double-click-function":t.doubleClick,filter:t.isUser?"user":"tree",filterMethod:t.filterUser,noFilteredResultLabel:t.isUser?t.taskOfContextIsAlive?t.$t("messages.treeNoResultUserWaiting"):t.$t("messages.treeNoResultUser"):t.$t("messages.treeNoResultNoUser")},on:{"update:ticked":function(e){t.ticked=e},"update:selected":function(e){t.selected=e},"update:expanded":function(e){t.expanded=e},click:function(e){t.$refs["observations-context"].close()}},scopedSlots:t._u([{key:"header-default",fn:function(e){return n("div",{class:{"node-disabled":e.node.disabled&&!e.node.noTick}},[n("span",{directives:[{name:"ripple",rawName:"v-ripple",value:e.node.main,expression:"prop.node.main"}],staticClass:"node-element",class:[e.node.main?"node-emphasized":"",t.hasObservationInfo&&t.observationInfo.id===e.node.id?"node-selected":"",null!==t.cleanTopLayerId&&t.cleanTopLayerId===e.node.id?"node-on-top":"",t.checkObservationsOnTop(e.node.id)?"node-on-top":"",t.isUser?"node-user-element":"node-tree-element",e.node.needUpdate?"node-updatable":""],attrs:{draggable:e.node.parentId===t.contextId,id:"node-"+e.node.id},on:{dragstart:function(n){t.onDragStart(n,e.node.id)},dragend:t.onDragEnd}},[e.node.observationType===t.OBSERVATION_CONSTANTS.TYPE_PROCESS?n("q-icon",{staticClass:"node-no-tick",attrs:{name:"mdi-buddhism",size:"17px"}}):e.node.noTick?n("q-icon",{attrs:{name:"mdi-checkbox-blank-circle"}}):t._e(),t._v("\n          "+t._s(e.node.label)+"\n          "),e.node.dynamic?n("q-icon",{staticClass:"node-icon-time",class:{"animate-spin":e.node.loading},attrs:{name:"mdi-clock-outline",color:"mc-green"}}):n("q-icon",{staticClass:"node-icon-time node-loading-layer",class:{"animate-spin":e.node.loading},attrs:{name:"mdi-loading"}}),n("q-tooltip",{staticClass:"kt-q-tooltip",attrs:{delay:300,offset:[0,8],self:"bottom left",anchor:"top left"}},[t._v(t._s(t.clearObservable(e.node.observable)))])],1),e.node.childrenCount>0||e.node.children.length>0?[n("q-chip",{staticClass:"node-chip",class:{"node-substituible":!e.node.empty&&!e.node.noTick},attrs:{color:"white",small:"",dense:"","text-color":"grey-7"}},[t._v(t._s(e.node.childrenCount?e.node.childrenCount:e.node.children.length))])]:t._e(),e.node.empty||e.node.noTick?t._e():n("q-btn",{staticClass:"kt-download",attrs:{round:"",flat:"",size:"sm",icon:"mdi-arrow-down"},nativeOn:{click:function(n){t.askForOutputFormat(n,e.node.id,e.node.exportFormats)}}}),"undefined"!==typeof e.node.idx?[n("q-chip",{staticClass:"node-chip transparent",style:{right:e.node.childrenCount>0?t.calculateRightPosition([e.node.childrenCount],"25px"):e.node.children.length>0?t.calculateRightPosition([e.node.children.length],"25px"):""},attrs:{small:"",dense:"","text-color":"grey-9"}},[t._v("\n            "+t._s(t.$t("label.itemCounter",{loaded:e.node.idx+1,total:e.node.siblingsCount}))+"\n          ")])]:t._e()],2)}},{key:"header-folder",fn:function(e){return n("div",{class:{"node-disabled":e.node.disabled&&!e.node.noTick}},[n("span",{directives:[{name:"ripple",rawName:"v-ripple",value:e.node.main,expression:"prop.node.main"}],staticClass:"node-element",class:[e.node.main?"node-emphasized":""],attrs:{draggable:e.node.parentId===t.contextId,id:"node-"+e.node.id},on:{dragstart:function(n){t.onDragStart(n,e.node.id)},dragend:t.onDragEnd}},[t._v(t._s(e.node.label))]),n("q-btn",{staticClass:"kt-download",attrs:{round:"",flat:"",size:"sm",icon:"mdi-arrow-down"},nativeOn:{click:function(n){t.askForOutputFormat(n,e.node.id,e.node.exportFormats,!0)}}}),"undefined"!==typeof e.node.idx?[n("q-chip",{staticClass:"node-chip transparent",style:{right:e.node.childrenCount>0?t.calculateRightPosition([e.node.childrenCount],"25px"):e.node.children.length>0?t.calculateRightPosition([e.node.children.length],"25px"):""},attrs:{small:"",dense:"","text-color":"grey-9"}},[t._v("\n            "+t._s(t.$t("label.itemCounter",{loaded:e.node.idx+1,total:e.node.siblingsCount}))+"\n          ")])]:t._e(),n("q-chip",{staticClass:"node-chip",class:{"node-substituible":!e.node.empty&&!e.node.noTick},attrs:{color:"white",small:"",dense:"","text-color":"grey-7"}},[t._v(t._s(e.node.childrenCount?e.node.childrenCount:e.node.children.length))])],2)}},{key:"header-stub",fn:function(e){return n("div",{staticClass:"node-stub"},[n("span",{staticClass:"node-element node-stub"},[n("q-icon",{staticClass:"node-no-tick",attrs:{name:"mdi-checkbox-blank-circle"}}),t._v(t._s(t.$t("messages.loadingChildren"))+"\n        ")],1)])}}])},[t._v("\n    >\n      ")])],1),n("observation-context-menu",{attrs:{"observation-id":t.contextMenuObservationId},on:{hide:function(e){t.contextMenuObservationId=null}}}),n("q-resize-observable",{on:{resize:function(e){t.$emit("resized")}}})],1)},ae=[];se._withStripped=!0;n("f559"),n("6b54"),n("4917"),n("5df3"),n("1c4c");var ce=n("50fb"),le=n.n(ce),ue=n("84a2"),de=n.n(ue),he=n("6dd8"),fe=n("0312"),pe=n.n(fe);function ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ge(t,e,n){return e&&me(t.prototype,e),n&&me(t,n),t}var ye=function(){function t(e,n){var i=this;ve(this,t),this.onScrollX=function(){i.scrollXTicking||(window.requestAnimationFrame(i.scrollX),i.scrollXTicking=!0)},this.onScrollY=function(){i.scrollYTicking||(window.requestAnimationFrame(i.scrollY),i.scrollYTicking=!0)},this.scrollX=function(){i.showScrollbar("x"),i.positionScrollbar("x"),i.scrollXTicking=!1},this.scrollY=function(){i.showScrollbar("y"),i.positionScrollbar("y"),i.scrollYTicking=!1},this.onMouseEnter=function(){i.showScrollbar("x"),i.showScrollbar("y")},this.onMouseMove=function(t){var e=i.trackY.getBoundingClientRect(),n=i.trackX.getBoundingClientRect();i.mouseX=t.clientX,i.mouseY=t.clientY,i.isWithinBounds(e)&&i.showScrollbar("y"),i.isWithinBounds(n)&&i.showScrollbar("x")},this.onWindowResize=function(){i.hideNativeScrollbar()},this.hideScrollbars=function(){var t=i.trackY.getBoundingClientRect(),e=i.trackX.getBoundingClientRect();i.isWithinBounds(t)||(i.scrollbarY.classList.remove("visible"),i.isVisible.y=!1),i.isWithinBounds(e)||(i.scrollbarX.classList.remove("visible"),i.isVisible.x=!1)},this.onMouseDown=function(t){var e=i.scrollbarY.getBoundingClientRect(),n=i.scrollbarX.getBoundingClientRect();i.isWithinBounds(e)&&(t.preventDefault(),i.onDrag(t,"y")),i.isWithinBounds(n)&&(t.preventDefault(),i.onDrag(t,"x"))},this.drag=function(t){var e,n,o;t.preventDefault(),"y"===i.currentAxis?(e=t.pageY,n=i.trackY,o=i.scrollContentEl):(e=t.pageX,n=i.trackX,o=i.contentEl);var r=e-n.getBoundingClientRect()[i.offsetAttr[i.currentAxis]]-i.dragOffset[i.currentAxis],s=r/n[i.sizeAttr[i.currentAxis]],a=s*i.contentEl[i.scrollSizeAttr[i.currentAxis]];o[i.scrollOffsetAttr[i.currentAxis]]=a},this.onEndDrag=function(){document.removeEventListener("mousemove",i.drag),document.removeEventListener("mouseup",i.onEndDrag)},this.el=e,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isEnabled={x:!0,y:!0},this.isVisible={x:!1,y:!1},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.handleSize={x:0,y:0},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.scrollbarWidth,this.options=Object.assign({},t.defaultOptions,n),this.isRtl="rtl"===this.options.direction,this.classNames=this.options.classNames,this.offsetSize=20,this.recalculate=de()(this.recalculate.bind(this),1e3),this.onMouseMove=de()(this.onMouseMove.bind(this),100),this.init()}return ge(t,[{key:"init",value:function(){this.el.SimpleBar=this,this.initDOM(),pe.a&&(this.hideNativeScrollbar(),this.render(),this.initListeners())}},{key:"initDOM",value:function(){var t=this;if(Array.from(this.el.children).filter(function(e){return e.classList.contains(t.classNames.scrollContent)}).length)this.trackX=this.el.querySelector(".".concat(this.classNames.track,".horizontal")),this.trackY=this.el.querySelector(".".concat(this.classNames.track,".vertical")),this.scrollContentEl=this.el.querySelector(".".concat(this.classNames.scrollContent)),this.contentEl=this.el.querySelector(".".concat(this.classNames.content));else{this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);while(this.el.firstChild)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}if(!this.trackX||!this.trackY){var e=document.createElement("div"),n=document.createElement("div");e.classList.add(this.classNames.track),n.classList.add(this.classNames.scrollbar),this.options.autoHide||n.classList.add("visible"),e.appendChild(n),this.trackX=e.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=e.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)}this.scrollbarX=this.trackX.querySelector(".".concat(this.classNames.scrollbar)),this.scrollbarY=this.trackY.querySelector(".".concat(this.classNames.scrollbar)),this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var t=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mousemove",this.onMouseMove),this.contentEl.addEventListener("scroll",this.onScrollX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),window.addEventListener("resize",this.onWindowResize),"undefined"!==typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(e){e.forEach(function(e){(t.isChildNode(e.target)||e.addedNodes.length)&&t.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new he["a"](this.recalculate),this.resizeObserver.observe(this.el)}},{key:"recalculate",value:function(){this.render()}},{key:"render",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr["x"]],this.contentSizeY=this.contentEl[this.scrollSizeAttr["y"]]-(this.scrollbarWidth||this.offsetSize),this.trackXSize=this.trackX[this.sizeAttr["x"]],this.trackYSize=this.trackY[this.sizeAttr["y"]],this.isEnabled["x"]=this.trackXSize<this.contentSizeX,this.isEnabled["y"]=this.trackYSize<this.contentSizeY,this.resizeScrollbar("x"),this.resizeScrollbar("y"),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},{key:"resizeScrollbar",value:function(){var t,e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";if(this.isEnabled[i]||this.options.forceVisible){"x"===i?(t=this.scrollbarX,e=this.contentSizeX,n=this.trackXSize):(t=this.scrollbarY,e=this.contentSizeY,n=this.trackYSize);var o=n/e;this.handleSize[i]=Math.max(~~(o*n),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(this.handleSize[i]=Math.min(this.handleSize[i],this.options.scrollbarMaxSize)),"x"===i?t.style.width="".concat(this.handleSize[i],"px"):t.style.height="".concat(this.handleSize[i],"px")}}},{key:"positionScrollbar",value:function(){var t,e,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";"x"===o?(t=this.scrollbarX,e=this.contentEl[this.scrollOffsetAttr[o]],n=this.contentSizeX,i=this.trackXSize):(t=this.scrollbarY,e=this.scrollContentEl[this.scrollOffsetAttr[o]],n=this.contentSizeY,i=this.trackYSize);var r=e/(n-i),s=~~((i-this.handleSize[o])*r);(this.isEnabled[o]||this.options.forceVisible)&&(t.style.transform="x"===o?"translate3d(".concat(s,"px, 0, 0)"):"translate3d(0, ".concat(s,"px, 0)"))}},{key:"toggleTrackVisibility",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",e="y"===t?this.trackY:this.trackX,n="y"===t?this.scrollbarY:this.scrollbarX;this.isEnabled[t]||this.options.forceVisible?e.style.visibility="visible":e.style.visibility="hidden",this.options.forceVisible&&(this.isEnabled[t]?n.style.visibility="visible":n.style.visibility="hidden")}},{key:"hideNativeScrollbar",value:function(){this.scrollbarWidth=le()(),this.scrollContentEl.style[this.isRtl?"paddingLeft":"paddingRight"]="".concat(this.scrollbarWidth||this.offsetSize,"px"),this.scrollContentEl.style.marginBottom="-".concat(2*this.scrollbarWidth||this.offsetSize,"px"),this.contentEl.style.paddingBottom="".concat(this.scrollbarWidth||this.offsetSize,"px"),0!==this.scrollbarWidth&&(this.contentEl.style[this.isRtl?"marginLeft":"marginRight"]="-".concat(this.scrollbarWidth,"px"))}},{key:"showScrollbar",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.isVisible[e]||(t="x"===e?this.scrollbarX:this.scrollbarY,this.isEnabled[e]&&(t.classList.add("visible"),this.isVisible[e]=!0),this.options.autoHide&&(window.clearInterval(this.flashTimeout),this.flashTimeout=window.setInterval(this.hideScrollbars,this.options.timeout)))}},{key:"onDrag",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";t.preventDefault();var n="y"===e?this.scrollbarY:this.scrollbarX,i="y"===e?t.pageY:t.pageX;this.dragOffset[e]=i-n.getBoundingClientRect()[this.offsetAttr[e]],this.currentAxis=e,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"getScrollElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";return"y"===t?this.scrollContentEl:this.contentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))}},{key:"isWithinBounds",value:function(t){return this.mouseX>=t.left&&this.mouseX<=t.left+t.width&&this.mouseY>=t.top&&this.mouseY<=t.top+t.height}}],[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!==typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(e){e.forEach(function(e){Array.from(e.addedNodes).forEach(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")?!e.SimpleBar&&new t(e,t.getElOptions(e)):Array.from(e.querySelectorAll("[data-simplebar]")).forEach(function(e){!e.SimpleBar&&new t(e,t.getElOptions(e))}))}),Array.from(e.removedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar&&t.SimpleBar.unMount():Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar&&t.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(t){var e=Array.from(t.attributes).reduce(function(t,e){var n=e.name.match(/data-simplebar-(.+)/);if(n){var i=n[1].replace(/\W+(.)/g,function(t,e){return e.toUpperCase()});switch(e.value){case"true":t[i]=!0;break;case"false":t[i]=!1;break;case void 0:t[i]=!0;break;default:t[i]=e.value}}return t},{});return e}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.from(document.querySelectorAll("[data-simplebar]")).forEach(function(e){e.SimpleBar||new t(e,t.getElOptions(e))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,forceVisible:!1,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25,scrollbarMaxSize:0,direction:"ltr",timeout:1e3}}}]),t}();pe.a&&ye.initHtmlApi();var be=ye,_e=(n("b54a"),n("e4f9")),we=n("bffd"),Se=n("b70a"),Ee=n("525b"),xe={name:"KlabQTree",extends:_e["a"],props:{doubleClickTimeout:{type:Number,default:300},doubleClickFunction:{type:Function,default:null},noFilteredResultLabel:{type:String,default:null}},data:function(){return{lazy:{},innerTicked:this.ticked||[],innerExpanded:this.expanded||[],timeouts:[]}},methods:{__blur:function(){document.activeElement&&document.activeElement.blur()},__getNode:function(t,e){var n=this,i=e[this.nodeKey],o=this.meta[i],r=e.header&&this.$scopedSlots["header-".concat(e.header)]||this.$scopedSlots["default-header"],s=o.isParent?this.__getChildren(t,e.children):[],a=s.length>0||o.lazy&&"loaded"!==o.lazy,c=e.body&&this.$scopedSlots["body-".concat(e.body)]||this.$scopedSlots["default-body"],l=r||c?this.__getSlotScope(e,o,i):null;return c&&(c=t("div",{staticClass:"q-tree-node-body relative-position"},[t("div",{class:this.contentClass},[c(l)])])),t("div",{key:i,staticClass:"q-tree-node",class:{"q-tree-node-parent":a,"q-tree-node-child":!a}},[t("div",{staticClass:"q-tree-node-header relative-position row no-wrap items-center",class:{"q-tree-node-link":o.link,"q-tree-node-selected":o.selected,disabled:o.disabled},on:{click:function(t){t&&t.srcElement&&-1!==t.srcElement.className.indexOf("node-element")&&n.__onClick(e,o)}}},["loading"===o.lazy?t(Se["a"],{staticClass:"q-tree-node-header-media q-mr-xs",props:{color:this.computedControlColor}}):a?t(ot["a"],{staticClass:"q-tree-arrow q-mr-xs transition-generic",class:{"q-tree-arrow-rotate":o.expanded},props:{name:this.computedIcon},nativeOn:{click:function(t){n.__onExpandClick(e,o,t)}}}):null,t("span",{staticClass:"row no-wrap items-center",class:this.contentClass},[o.hasTicking&&!o.noTick?t(Ee["a"],{staticClass:"q-mr-xs",props:{value:o.indeterminate?null:o.ticked,color:this.computedControlColor,dark:this.dark,keepColor:!0,disable:!o.tickable},on:{input:function(t){n.__onTickedClick(e,o,t)}}}):null,r?r(l):[this.__getNodeMedia(t,e),t("span",e[this.labelKey])]])]),a?t(we["a"],{props:{duration:this.duration}},[t("div",{directives:[{name:"show",value:o.expanded}],staticClass:"q-tree-node-collapsible",class:"text-".concat(this.color)},[c,t("div",{staticClass:"q-tree-children",class:{disabled:o.disabled}},s)])]):c])},__onClick:function(t,e){var n=this;null===this.doubleClickFunction?this.__onClickDefault(t,e):"undefined"===typeof this.timeouts["id".concat(t.id)]||null===this.timeouts["id".concat(t.id)]?this.timeouts["id".concat(t.id)]=setTimeout(function(){n.timeouts["id".concat(t.id)]=null,n.__onClickDefault(t,e)},this.doubleClickTimeout):(clearTimeout(this.timeouts["id".concat(t.id)]),this.timeouts["id".concat(t.id)]=null,this.doubleClickFunction(t,e))},__onClickDefault:function(t,e){this.__blur(),this.hasSelection?e.selectable&&this.$emit("update:selected",e.key!==this.selected?e.key:null):this.__onExpandClick(t,e),"function"===typeof t.handler&&t.handler(t)}},render:function(t){var e=this.__getChildren(t,this.nodes),n=this.classes.indexOf("klab-no-nodes");return 0===e.length&&-1===n?this.classes.push("klab-no-nodes"):0!==e.length&&-1!==n&&this.classes.splice(n,1),t("div",{staticClass:"q-tree",class:this.classes},0===e.length?this.filter?this.noFilteredResultLabel:this.noNodesLabel||this.$t("messages.treeNoNodes"):e)}},Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-context-menu",{directives:[{name:"show",rawName:"v-show",value:t.enableContextMenu,expression:"enableContextMenu"}],ref:"observations-context",on:{hide:t.hide}},[n("q-list",{staticStyle:{"min-width":"150px"},attrs:{dense:"","no-border":""}},[t._l(t.itemActions,function(e,i){return e.enabled?[e.separator&&0!==i?n("q-item-separator",{key:e.actionId}):t._e(),!e.separator&&e.enabled?n("q-item",{key:e.actionId,attrs:{link:""},nativeOn:{click:function(n){t.askForAction(e.actionId)}}},[n("q-item-main",{attrs:{label:e.actionLabel}})],1):t._e(),e.separator||e.enabled?t._e():n("q-item",{key:e.actionId,attrs:{disabled:""}},[n("q-item-main",{attrs:{label:e.actionLabel}})],1)]:t._e()})],2)],1)},Oe=[];Ce._withStripped=!0;var Te={name:"ObservationContextMenu",props:{observationId:{type:String,default:null}},data:function(){return{enableContextMenu:!1,itemActions:[],itemObservation:null}},methods:c()({},Object(l["b"])("data",["setContext","setContextMenuObservationId"]),{initContextMenu:function(){var t=this,e=this.$store.state.data.observations.find(function(e){return e.id===t.observationId});e?(this.resetContextMenu(!1),e&&e.actions&&e.actions.length>1?(this.itemActions=e.actions.slice(),this.itemObservation=e):this.resetContextMenu(),e.observationType!==u["n"].TYPE_STATE&&e.observationType!==u["n"].TYPE_GROUP&&(this.itemActions.push(u["o"].SEPARATOR_ITEM),this.itemActions.push(u["o"].RECONTEXTUALIZATION_ITEM),this.itemObservation=e),this.itemActions&&this.itemActions.length>0?this.enableContextMenu=this.itemActions&&this.itemActions.length>0:this.enableContextMenu=!1):this.resetContextMenu()},resetContextMenu:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.itemActions=[],this.itemObservation=null,t&&(this.enableContextMenu=!1)},hide:function(t){this.resetContextMenu(),this.$emit("hide",t)},askForAction:function(t){if(null!==this.itemObservation)switch(console.debug("Will ask for ".concat(t," of observation ").concat(this.itemObservation.id)),t){case"Recontextualization":this.sendStompMessage(d["a"].CONTEXTUALIZATION_REQUEST({contextId:this.itemObservation.id,parentContext:this.itemObservation.contextId},this.$store.state.data.session).body),this.setContext({context:this.itemObservation,isRecontext:!0});break;case"AddToCache":console.log("Ask for Add to cache, no action for now");break;default:break}this.enableContextMenu=!1}}),watch:{observationId:function(){null!==this.observationId?this.initContextMenu():this.resetContextMenu()}},mounted:function(){null!==this.observationId&&this.initContextMenu()}},Ie=Te,Me=(n("ad0b"),Object(x["a"])(Ie,Ce,Oe,!1,null,null,null));Me.options.__file="ObservationContextMenu.vue";var ke=Me.exports,Pe=n("d247"),Ae=null,Ne={name:"klabTree",components:{KlabQTree:xe,ObservationContextMenu:ke},props:{isUser:{type:Boolean,required:!0},tree:{type:Array,required:!0}},data:function(){return{ticked:[],selected:null,expanded:[],itemObservationId:null,askingForChildren:!1,scrollElement:null,showPopover:null,dragStart:!1,dragEnter:0,watchedObservation:[],contextMenuObservationId:null,OBSERVATION_CONSTANTS:u["n"]}},computed:c()({},Object(l["c"])("data",["treeNode","lasts","contextReloaded","contextId","observations","timeEventsOfObservation","timestamp","observationsIdOnTop"]),Object(l["c"])("stomp",["tasks","taskOfContextIsAlive"]),Object(l["c"])("view",["observationInfo","hasObservationInfo","topLayerId"]),Object(l["d"])("view",["treeSelected","treeTicked","treeExpanded","showNotified"]),{cleanTopLayerId:function(){return this.topLayerId?this.topLayerId.substr(0,this.topLayerId.indexOf("T")):null}}),methods:c()({checkObservationsOnTop:function(t){return this.observationsIdOnTop.length>0&&this.observationsIdOnTop.includes(t)},copyToClipboard:X["b"]},Object(l["b"])("data",["setVisibility","selectNode","askForChildren","addChildrenToTree","setContext","changeTreeOfNode","setTimestamp"]),Object(l["b"])("view",["setSpinner","setMainDataViewer"]),{filterUser:function(t,e){return t.userNode?"user"===e:"tree"===e},rightClickHandler:function(t){t.preventDefault();var e=null;if(t.target.className.includes("node-element"))e=t.target;else{var n=t.target.getElementsByClassName("node-element");if(1===n.length){var i=K()(n,1);e=i[0]}}this.contextMenuObservationId=null!==e?e.id.substring(5):null},clearObservable:function(t){return 0===t.indexOf("(")&&t.lastIndexOf(")")===t.length-1?t.substring(1,t.length-1):t},askForOutputFormat:function(t,e,n){var i=this;null!==n&&n.length>0?(t.stopPropagation(),this.$q.dialog({title:this.$t("label.titleOutputFormat"),message:this.$t("label.askForOuputFormat"),options:{type:"radio",model:n[0].value,items:n},cancel:!0,preventClose:!1,color:"info"}).then(function(t){i.askDownload(e,t,n)}).catch(function(){})):this.$q.notify({message:"No available formats",type:"warning",icon:"mdi-alert",timeout:200})},askDownload:function(t,e,n,i){if("undefined"===typeof i){var o="";if(-1!==this.timestamp){var r=new Date(this.timestamp);o="_".concat(r.getFullYear()).concat(r.getMonth()<9?"0":"").concat(r.getMonth()+1).concat(r.getDate()<10?"0":"").concat(r.getDate(),"_").concat(r.getHours()<10?"0":"").concat(r.getHours()).concat(r.getMinutes()<10?"0":"").concat(r.getMinutes()).concat(r.getSeconds()<10?"0":"").concat(r.getSeconds())}i="".concat(t).concat(o)}var s=n.find(function(t){return t.value===e});Object(Z["c"])("dw_".concat(t),"".concat("").concat(Pe["c"].REST_SESSION_VIEW,"data/").concat(t),{params:c()({format:"RAW",outputFormat:e,adapter:s.adapter},-1!==this.timestamp&&{locator:"T1(1){time=".concat(this.timestamp,"}")}),responseType:"blob"},function(t,e){var n=window.URL.createObjectURL(new Blob([t.data])),o=document.createElement("a");o.href=n,o.setAttribute("download","".concat(i,".").concat(s.extension)),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(n),e()})},changeNodeState:function(t){var e=t.nodeId,n=t.state;"undefined"!==typeof this.$refs["klab-tree"]&&this.$refs["klab-tree"].setTicked([e],n)},doubleClick:function(){var t=Ot()(regeneratorRuntime.mark(function t(e,n){var i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isContainer){t.next=4;break}null!==e.viewerIdx&&this.setMainDataViewer({viewerIdx:e.viewerIdx,visible:e.visible}),t.next=14;break;case 4:if(e.observationType!==u["n"].TYPE_STATE){t.next=8;break}this.fitMap(e,n),t.next=14;break;case 8:if(i=this.observations.find(function(t){return t.id===e.id}),!i||null===i){t.next=14;break}return t.next=12,Object(Z["d"])(i);case 12:o=t.sent,this.fitMap(e,n,o);case 14:this.timeEventsOfObservation(e.id).length>0&&this.setTimestamp(-1);case 15:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),fitMap:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$eventBus.$emit(u["d"].NEED_FIT_MAP,{geometry:n}),t&&e&&e.ticked&&this.setVisibility({node:t,visible:!0})},updateFolderListener:function(t){if(t&&t.folderId){var e=Object(Z["b"])(this.tree,t.folderId);e&&null!==e&&(t.visible?this.$refs["klab-tree"].setTicked(e.children.map(function(t){return t.id}),!0):this.$refs["klab-tree"].setTicked(this.ticked.filter(function(t){return-1===e.children.findIndex(function(e){return e.id===t})}),!1))}},treeSizeChangeListener:function(){var t=this;this.isUser||(null!=Ae&&(clearTimeout(this.scrollToTimeout),Ae=null),this.$nextTick(function(){Ae=setTimeout(function(){t.scrollElement.scrollTop=t.scrollElement.scrollHeight},1e3)}))},calculateRightPosition:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.reduce(function(t,e){return t+e.toString().length},0),i=""!==e?" + ".concat(e):"";return"calc(".concat(n,"ch").concat(i,")")},onDragStart:function(t,e){t.dataTransfer.setData("id",e),this.dragStart=!0},onDragEnd:function(){this.dragStart=!1},onDragEnter:function(t){t.preventDefault(),this.dragStart||(this.dragEnter+=1)},onDragLeave:function(t){t.preventDefault(),this.dragStart||(this.dragEnter-=1)},onDragOver:function(t){t.preventDefault()},onDrop:function(t){if(t.preventDefault(),this.dragEnter>0){var e=t.dataTransfer.getData("id");e&&""!==e?this.changeTreeOfNode({id:e,isUserTree:this.isUser}):console.warn("Strange dropped node ".concat(t.dataTransfer.getData("id")))}else console.debug("Self dropped");this.dragStart=!1,this.dragEnter=0}}),watch:{tree:function(){this.treeSizeChangeListener()},treeSelected:function(t){t!==this.selected&&(this.selected=t)},expanded:function(t,e){if(this.$store.state.view.treeExpanded=t,e.length!==t.length){if(e.length>t.length){var n=e.filter(function(e){return t.indexOf(e)<0})[0],i=Object(Z["b"])(this.tree,n);return this.sendStompMessage(d["a"].WATCH_REQUEST({active:!1,observationId:n,rootContextId:i.rootContextId},this.$store.state.data.session).body),this.watchedObservation.splice(this.watchedObservation.findIndex(function(t){return t.observationId===n}),1),void console.info("Stop watching observation ".concat(n," with rootContextId ").concat(i.rootContextId))}var o=t[t.length-1],r=Object(Z["b"])(this.tree,o);r&&(this.sendStompMessage(d["a"].WATCH_REQUEST({active:!0,observationId:o,rootContextId:r.rootContextId},this.$store.state.data.session).body),this.watchedObservation.push({observationId:o,rootContextId:r.rootContextId}),console.info("Start watching observation ".concat(o," with rootContextId ").concat(r.rootContextId)),r.children.length>0&&r.children[0].id.startsWith("STUB")&&(r.children.splice(0,1),r.children.length<r.childrenLoaded&&r.childrenLoaded>0?(this.addChildrenToTree({parent:r}),this.$eventBus.$emit(u["d"].UPDATE_FOLDER,{folderId:r.id,visible:"undefined"!==typeof r.ticked&&r.ticked})):0===r.children.length&&this.askForChildren({parentId:r.id,offset:0,count:this.childrenToAskFor,total:r.childrenCount,visible:"undefined"!==typeof r.ticked&&(!!r.isContainer&&r.ticked)})))}},selected:function(t){null!==t?0===t.indexOf("ff_")?this.selected=null:this.selectNode(t):this.selectNode(null)},ticked:function(t,e){var n=this;if(this.$store.state.view.treeTicked=t,e.length!==t.length)if(e.length>t.length){var i=e.filter(function(e){return t.indexOf(e)<0})[0],o=Object(Z["b"])(this.tree,i);o&&(this.setVisibility({node:o,visible:!1}),o.isContainer&&(this.ticked=this.ticked.filter(function(t){return-1===o.children.findIndex(function(e){return e.id===t})})))}else{var r=t[t.length-1],s=Object(Z["b"])(this.tree,r);if(null!==s)if(s.isContainer){var a=function(){var t;n.setVisibility({node:s,visible:!0}),(t=n.ticked).push.apply(t,G()(s.children.filter(function(t){return t.parentArtifactId===s.id}).map(function(t){return t.id})))};this.askingForChildren||(s.childrenLoaded<s.childrenCount?(this.askingForChildren=!0,this.askForChildren({parentId:s.id,offset:s.childrenLoaded,count:-1,toTree:!1,visible:!0,total:s.childrenCount}).then(function(){n.askingForChildren=!1,a()})):a())}else this.setVisibility({node:s,visible:!0})}}},mounted:function(){var t=this;this.scrollElement=new be(document.querySelector("#".concat(this.$el.id," .kt-tree-container"))).getScrollElement(),this.scrollElement.addEventListener("scroll",function(e){if(t.askingForChildren)return e.preventDefault(),void console.debug("KlabTree -> We are asking for tree now, this call is not need so exit");if(0===t.lasts.length)return e.preventDefault(),void console.debug("KlabTree -> There aren't incompleted folders, exit");var n=t.scrollElement.getBoundingClientRect(),i=n.bottom;t.lasts.forEach(function(e){var n=document.getElementById("node-".concat(e.observationId));if(null!==n){var o=n.getBoundingClientRect();if(0!==o.bottom&&o.bottom<i){t.askingForChildren=!0;var r=Object(Z["b"])(t.tree,e.parentId);r.children.length<r.childrenLoaded?(t.addChildrenToTree({parent:r}),t.$eventBus.$emit(u["d"].UPDATE_FOLDER,{folderId:r.id,visible:"undefined"!==typeof r.ticked&&r.ticked}),t.askingForChildren=!1):t.askForChildren({parentId:e.parentId,offset:e.offset,visible:"undefined"!==typeof r.ticked&&r.ticked,total:r.childrenCount}).then(function(){t.askingForChildren=!1,console.debug("KlabTree -> Asked for them"),t.$eventBus.$emit(u["d"].UPDATE_FOLDER,{folderId:e.folderId,visible:"undefined"!==typeof r.ticked&&r.ticked})})}}})}),this.$eventBus.$on(u["d"].UPDATE_FOLDER,this.updateFolderListener),this.selected=this.treeSelected,this.ticked=this.treeTicked,this.expanded=this.treeExpanded},beforeDestroy:function(){var t=this;this.$eventBus.$off(u["d"].UPDATE_FOLDER,this.updateFolderListener),this.watchedObservation.length>0&&this.watchedObservation.forEach(function(e){t.sendStompMessage(d["a"].WATCH_REQUEST({active:!1,observationId:e.observationId,rootContextId:e.rootContextId},t.$store.state.data.session).body),console.info("Stop watching observation ".concat(e.observationId," with rootContextId ").concat(e.rootContextId))})}},Le=Ne,Re=(n("5b35"),Object(x["a"])(Le,se,ae,!1,null,null,null));Re.options.__file="KlabTree.vue";var De=Re.exports,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative-position klab-menu-component",attrs:{id:"oi-container"}},[n("div",{attrs:{id:"oi-controls"}},[n("div",{staticClass:"oi-control oi-text",attrs:{id:"oi-visualize"}},[n("q-checkbox",{attrs:{"keep-color":!0,color:"mc-yellow",readonly:1===t.observationInfo.valueCount||t.observationInfo.empty,disabled:1===t.observationInfo.valueCount||t.observationInfo.empty},nativeOn:{click:function(e){return t.showNode(e)}},model:{value:t.layerShow,callback:function(e){t.layerShow=e},expression:"layerShow"}})],1),n("div",{staticClass:"oi-control oi-text",attrs:{id:"oi-name"}},[n("span",[t._v(t._s(t.observationInfo.label))])]),t.hasSlider?n("div",{staticClass:"oi-control",attrs:{id:"oi-slider"}},[n("q-slider",{attrs:{min:0,max:1,step:.1,decimals:1,color:"mc-yellow",label:!1},model:{value:t.observationInfo.layerOpacity,callback:function(e){t.$set(t.observationInfo,"layerOpacity",e)},expression:"observationInfo.layerOpacity"}})],1):t._e()]),n("div",{class:t.getContainerClasses(),attrs:{id:"oi-metadata-map-wrapper"}},[n("div",{class:[this.exploreMode?"with-mapinfo":""],attrs:{id:"oi-scroll-container"}},[n("div",{attrs:{id:"oi-scroll-metadata-container"}},t._l(t.observationInfo.metadata,function(e,i){return n("div",{key:i,attrs:{id:"oi-metadata"}},[n("div",{staticClass:"oi-metadata-name oi-text"},[t._v(t._s(i))]),n("div",{staticClass:"oi-metadata-value",on:{dblclick:function(n){t.copyToClipboard(e)}}},[t._v(t._s(e))])])}))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasMapInfo,expression:"hasMapInfo"}],attrs:{id:"oi-mapinfo-container"},on:{mouseenter:function(e){t.infoShowed={index:0,categories:[],values:[t.mapSelection.value]}},mouseleave:t.resetInfoShowed}},[n("div",{attrs:{id:"oi-mapinfo-map"}}),n("div",{staticClass:"oi-pixel-indicator",attrs:{id:"oi-pixel-h"}}),n("div",{staticClass:"oi-pixel-indicator",attrs:{id:"oi-pixel-v"}})])]),null!==t.observationInfo.dataSummary?n("div",{style:{"min-width":Math.max(4*t.observationInfo.dataSummary.histogram.length,256)+"px"},attrs:{id:"oi-histogram-container"},on:{mouseleave:function(e){t.resetInfoShowed()}}},[t.hasHistogram?n("div",{class:[null!==this.observationInfo.colormap?"with-colormap":""],attrs:{id:"oi-histogram"}},t._l(t.observationInfo.dataSummary.histogram,function(e,i){return n("div",{key:i,staticClass:"oi-histogram-col",style:{width:t.histogramWidth+"%"},on:{mouseover:function(e){t.infoShowed={index:i,categories:t.observationInfo.dataSummary.categories,values:t.observationInfo.dataSummary.histogram}}}},[n("q-tooltip",{attrs:{offset:[0,10],delay:500}},[t._v(t._s(t.infoShowed.values[t.infoShowed.index]))]),n("div",{staticClass:"oi-histogram-val",style:{height:t.getHistogramDataHeight(e)+"%"}})],1)})):n("div",{attrs:{id:"oi-histogram-nodata"}},[t._v(t._s(t.$t("label.noHistogramData")))]),null!==t.observationInfo.colormap?n("div",{style:{"min-width":Math.min(t.observationInfo.colormap.colors.length,256)+"px"},attrs:{id:"oi-colormap"}},t._l(t.observationInfo.colormap.colors,function(e,i){return n("div",{key:i,staticClass:"oi-colormap-col",style:{width:t.colormapWidth+"%","background-color":e},on:{mouseover:function(e){t.infoShowed={index:i,categories:[],values:t.observationInfo.colormap.labels}}}})})):t._e(),n("div",{attrs:{id:"oi-data-details"}},[n("div",{staticClass:"oi-data-details",attrs:{id:"oi-histogram-min"},on:{mouseover:function(e){t.tooltipIt(e,"q-hmin-"+t.infoShowed.index)}}},[t._v(t._s(t.histogramMin)),n("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip("q-hmin-"+t.infoShowed.index),expression:"needTooltip(`q-hmin-${infoShowed.index}`)"}],staticClass:"oi-tooltip"},[t._v(t._s(t.histogramMin))])],1),-1===t.infoShowed.index?[n("div",{staticClass:"oi-data-details",attrs:{id:"oi-data-nodetail"}},[t._v(t._s(t.$t("label.noInfoValues")))])]:[n("div",{staticClass:"oi-data-details",attrs:{id:"oi-data-detail"},on:{mouseover:function(e){t.tooltipIt(e,"q-hdata-"+t.infoShowed.index)}}},[t._v("\n          "+t._s(t.infoShowedText)+"\n          "),n("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip("q-hdata-"+t.infoShowed.index),expression:"needTooltip(`q-hdata-${infoShowed.index}`)"}],staticClass:"oi-tooltip",attrs:{anchor:"center right",self:"center left",offset:[10,10]}},[t._v("\n            "+t._s(t.infoShowedText)+"\n          ")])],1)],n("div",{staticClass:"oi-data-details",attrs:{id:"oi-histogram-max"},on:{mouseover:function(e){t.tooltipIt(e,"q-hmax-"+t.infoShowed.index)}}},[t._v(t._s(t.histogramMax)),n("q-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.needTooltip("q-hmax-"+t.infoShowed.index),expression:"needTooltip(`q-hmax-${infoShowed.index}`)"}],staticClass:"oi-tooltip"},[t._v(t._s(t.histogramMax))])],1)],2)]):t._e()])},Be=[];je._withStripped=!0;n("cadf");var Fe=n("5eee"),ze=n("a2c7"),Ve={name:"ObservationInfo",mixins:[Rt],data:function(){return{scrollBar:void 0,layerShow:!1,infoShowed:{index:-1,categories:[],values:[]},infoMap:null}},computed:c()({},Object(l["c"])("view",["observationInfo","mapSelection","exploreMode","viewer"]),{hasSlider:function(){return this.observationInfo.visible&&null!==this.observationInfo.viewerIdx&&this.viewer(this.observationInfo.viewerIdx).type.component===u["z"].VIEW_MAP.component},hasHistogram:function(){return this.observationInfo.dataSummary.histogram.length>0},maxHistogramValue:function(){return Math.max.apply(null,this.observationInfo.dataSummary.histogram)},histogramWidth:function(){return 100/this.observationInfo.dataSummary.histogram.length},histogramMin:function(){return"NaN"===this.observationInfo.dataSummary.minValue?"":Math.round(100*this.observationInfo.dataSummary.minValue)/100},histogramMax:function(){return"NaN"===this.observationInfo.dataSummary.maxValue?"":Math.round(100*this.observationInfo.dataSummary.maxValue)/100},colormapWidth:function(){return 100/this.observationInfo.colormap.colors.length},hasMapInfo:function(){return this.exploreMode&&null!==this.mapSelection.pixelSelected&&this.mapSelection.layerSelected.get("id").startsWith("cl_".concat(this.observationInfo.id))},infoShowedText:function(){var t;return this.infoShowed.categories.length>0&&(t=this.infoShowed.categories[this.infoShowed.index],"undefined"!==typeof t&&null!==t&&""!==t)?t:this.infoShowed.values.length>0&&(t=this.infoShowed.values[this.infoShowed.index],"undefined"!==typeof t&&null!==t&&""!==t)?t:""}}),methods:{getHistogramDataHeight:function(t){return 100*t/this.maxHistogramValue},copyToClipboard:function(t){Object(X["b"])(t),this.$q.notify({message:this.$t("messages.copiedToClipboard"),type:"info",icon:"mdi-information",timeout:1e3})},getContainerClasses:function(){var t=[];return null!==this.observationInfo.dataSummary&&t.push("with-histogram"),t},resetInfoShowed:function(){this.infoShowed={index:-1,categories:[],values:[]}},showNode:function(){this.$emit(u["d"].SHOW_NODE,{nodeId:this.observationInfo.id,state:this.layerShow})},viewerClosedListener:function(t){var e=t.idx;e===this.observationInfo.viewerIdx&&(this.layerShow=!1)}},watch:{mapSelection:function(){var t=this;if(null!==this.mapSelection.layerSelected){var e=this.infoMap.getLayers().getArray();null!==this.mapSelection.pixelSelected?(e.length>1&&this.infoMap.removeLayer(e[1]),this.infoMap.addLayer(this.mapSelection.layerSelected),this.infoMap.getView().setCenter(this.mapSelection.pixelSelected),this.infoMap.getView().setZoom(14),this.$nextTick(function(){t.infoMap.updateSize()}),this.infoShowed={index:0,categories:[],values:[this.mapSelection.value]}):e.length>1&&this.infoMap.removeLayer(e[1])}}},mounted:function(){this.scrollBar=new be(document.getElementById("oi-scroll-container")),this.infoMap=new Fe["a"]({view:new ze["a"]({center:[0,0],zoom:12}),target:"oi-mapinfo-map",layers:[jt["c"].EMPTY_LAYER],controls:[],interactions:[]}),this.layerShow=this.observationInfo.visible,this.$eventBus.$on(u["d"].VIEWER_CLOSED,this.viewerClosedListener)},beforeDestroy:function(){this.$eventBus.$on(u["d"].VIEWER_CLOSED,this.viewerClosedListener)}},Ue=Ve,qe=(n("db0a"),Object(x["a"])(Ue,je,Be,!1,null,null,null));qe.options.__file="ObservationInfo.vue";var Ye=qe.exports,$e=y["b"].height,Ge={name:"klabTreeContainer",components:{KlabSplitter:re,KlabTree:De,ObservationInfo:Ye},data:function(){return{outContainerHeight:void 0,userTreeMaxHeight:void 0,userTreeHeight:void 0,treeHeight:void 0,detailsOpen:!1}},computed:c()({},Object(l["c"])("data",["tree","userTree","treeNode","hasTree","mainTreeHasNodes","hasContext"]),Object(l["c"])("stomp",["taskOfContextIsAlive"]),Object(l["c"])("view",["hasObservationInfo","isDocked"])),methods:c()({},Object(l["b"])("view",["setObservationInfo"]),{onCloseInfo:function(){this.setObservationInfo(null),this.$eventBus.$emit(u["d"].OBSERVATION_INFO_CLOSED)},informTree:function(t){var e=t.nodeId,n=t.state,i=this.treeNode(e);i&&(this.$refs["kt-tree"]&&this.$refs["kt-tree"].changeNodeState({nodeId:e,state:n}),i.userNode&&this.$refs["kt-user-tree"]&&this.$refs["kt-user-tree"].changeNodeState({nodeId:e,state:n}))},showNodeListener:function(t){this.informTree(t)},outContainerResized:function(){this.isDocked?this.outContainerHeight=$e(document.getElementById("dmc-tree"))+24:this.$refs["kt-out-container"]&&(this.outContainerHeight=Number.parseFloat(window.getComputedStyle(this.$refs["kt-out-container"],null).getPropertyValue("max-height"))),this.recalculateTreeHeight()},recalculateTreeHeight:function(){var t=this;this.$nextTick(function(){t.userTreeMaxHeight=t.mainTreeHasNodes()?t.outContainerHeight/2:t.outContainerHeight;var e=document.getElementById("kt-user-tree");e&&t.outContainerHeight&&(t.userTreeHeight=$e(e),t.treeHeight=t.outContainerHeight-t.userTreeHeight)})},initTree:function(){var t=this;this.hasTree&&this.$nextTick(function(){t.outContainerResized(),document.getElementById("kt-tree-details").addEventListener("toggle",function(e){t.detailsOpen=e.srcElement.open,t.recalculateTreeHeight()})})}}),watch:{userTree:function(){this.recalculateTreeHeight()},tree:function(){this.recalculateTreeHeight()},hasTree:function(){this.initTree()},taskOfContextIsAlive:function(){this.detailsOpen=this.taskOfContextIsAlive}},mounted:function(){this.$eventBus.$on(u["d"].SHOW_NODE,this.showNodeListener),window.addEventListener("resize",this.outContainerResized),this.initTree()},beforeDestroy:function(){this.$eventBus.$off(u["d"].SHOW_NODE,this.showNodeListener),window.removeEventListener("resize",this.outContainerResized)}},He=Ge,Ke=(n("a663"),Object(x["a"])(He,Qt,Jt,!1,null,null,null));Ke.options.__file="KlabTreePane.vue";var We=Ke.exports,Xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ot-wrapper",class:{"ot-no-timestamp":0===t.timeEvents.length||-1===t.timestamp}},[n("div",{staticClass:"ot-container",class:{"ot-active-timeline":t.visibleEvents.length>0,"ot-docked":t.isMainControlDocked}},[t.visibleEvents.length>0?n("div",{staticClass:"ot-player"},[n("q-icon",{class:{"cursor-pointer":t.timestamp<t.scaleReference.end},attrs:{name:null===t.playTimer?"mdi-play":"mdi-pause",color:t.timestamp<t.scaleReference.end?"mc-main":"grey-7",flat:""},nativeOn:{mousedown:function(e){return t.startPress(e)},mouseup:function(e){return t.stopPress(e)},touchstart:function(e){return t.startPress(e)},touchend:function(e){return t.stopPress(e)},touchcancel:function(e){return t.stopPress(e)}}}),n("q-tooltip",{staticClass:"ot-change-speed-tooltip",attrs:{offset:[0,8],self:"bottom middle",anchor:"top middle",delay:1e3},domProps:{innerHTML:t._s(t.$t("messages.pressToChangeSpeed",{multiplier:t.speedMultiplier}))}}),n("div",[n("q-popover",{staticClass:"ot-speed-container",model:{value:t.selectSpeed,callback:function(e){t.selectSpeed=e},expression:"selectSpeed"}},[n("q-list",{staticClass:"ot-speed-selector"},t._l([1,2,4,8],function(e){return n("q-item",{key:e,staticClass:"ot-speed",class:{"ot-speed-disabled":t.speedMultiplier===e},attrs:{disabled:t.speedMultiplier===e},nativeOn:{click:function(n){t.changeSpeed(e)}}},[t._v("x"+t._s(e))])}))],1)],1)],1):t._e(),n("div",{staticClass:"ot-time row",class:{"ot-time-full":0===t.visibleEvents.length}},[n("div",{staticClass:"ot-date-container"},[n("div",{staticClass:"ot-date ot-date-start col",class:{"ot-with-modifications":0!==t.timeEvents.length,"ot-date-loaded":t.engineTimestamp>0},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.onClick(e,function(){t.changeTimestamp(t.scaleReference.start)})},dblclick:function(e){t.onDblClick(e,function(){t.changeTimestamp(-1)})}}},[-1===t.timestamp?n("q-icon",{staticClass:"ot-time-origin",attrs:{name:"mdi-circle-medium",color:"mc-main"}}):t._e(),0!==t.timeEvents.length?n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"},domProps:{innerHTML:t._s(t.formatDate(t.scaleReference.start))}}):t._e()],1),n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.visibleEvents.length,expression:"visibleEvents.length === 0"}],staticClass:"ot-date-text"},[t._v(t._s(t.startDate))])]),n("div",{ref:"ot-timeline-container",staticClass:"ot-timeline-container col",class:{"ot-timeline-with-time":-1!==t.timestamp}},[n("div",{ref:"ot-timeline",staticClass:"ot-timeline",class:{"ot-with-modifications":0!==t.timeEvents.length},on:{mousemove:t.moveOnTimeline,mouseenter:function(e){t.timelineActivated=!0},mouseleave:function(e){t.timelineActivated=!1},click:function(e){t.changeTimestamp(t.getDateFromPosition(e))}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleEvents.length>0,expression:"visibleEvents.length > 0"}],staticClass:"ot-timeline-viewer"}),t._l(t.visibleEvents,function(e){return n("div",{key:e.id+"-"+e.timestamp,staticClass:"ot-modification-container",style:{left:"calc("+t.calculatePosition(e.timestamp)+"px - 1px)"}},[n("div",{staticClass:"ot-modification"})])}),n("div",{staticClass:"ot-loaded-time",style:{width:t.engineTimestamp>0?"calc("+t.calculatePosition(t.engineTimestamp)+"px + 4px)":0}}),-1!==t.timestamp?n("div",{staticClass:"ot-actual-time",style:{left:"calc("+t.calculatePosition(t.visibleTimestamp)+"px + "+(t.timestamp===t.scaleReference.end?"0":"1")+"px)"}}):t._e(),0!==t.timeEvents.length?n("q-tooltip",{staticClass:"ot-date-tooltip",attrs:{offset:[0,15],self:"top middle",anchor:"bottom middle",delay:300},domProps:{innerHTML:t._s(t.timelineDate)}}):t._e()],2)]),n("div",{staticClass:"ot-date-container"},[n("div",{staticClass:"ot-date ot-date-end col",class:{"ot-date-loaded":t.engineTimestamp===t.scaleReference.end},on:{click:function(e){if(e.target!==e.currentTarget)return null;t.changeTimestamp(t.scaleReference.end)}}},[0!==t.timeEvents.length?n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"},domProps:{innerHTML:t._s(t.formatDate(t.scaleReference.end))}}):t._e()],1),n("div",{directives:[{name:"show",rawName:"v-show",value:0===t.visibleEvents.length,expression:"visibleEvents.length === 0"}],staticClass:"ot-date-text"},[t._v(t._s(t.endDate))])])])]),t.isMainControlDocked?n("observation-time"):t._e()],1)},Ze=[];Xe._withStripped=!0;var Qe={data:function(){return{timer:null,prevent:!1,delay:200}},methods:{onClick:function(t,e){var n=this;this.timer=setTimeout(function(){n.prevent||e(t),n.prevent=!1},this.delay)},onDblClick:function(t,e){clearTimeout(this.timer),this.prevent=!0,e(t)}}},Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.timeEvents.length>0?n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"otv-now",class:{"otv-novisible":-1===t.timestamp,"otv-docked":t.isMainControlDocked,"otv-running":t.isTimeRunning},domProps:{innerHTML:t._s(t.formattedTimestamp)}})]):t._e()},tn=[];Je._withStripped=!0;var en={name:"ObservationTime",data:function(){return{formattedTimestamp:void 0}},computed:c()({},Object(l["c"])("data",["timestamp","timeEvents"]),Object(l["c"])("view",["isMainControlDocked","isTimeRunning"])),methods:{formatTimestamp:function(){if(-1===this.timestamp)this.formattedTimestamp=this.$t("label.noTimeSet");else{var t=It()(this.timestamp);this.formattedTimestamp="".concat(t.format("L")," ").concat(t.format("HH:mm:ss:SSS"))}}},watch:{timestamp:function(){this.formatTimestamp()}},created:function(){this.formatTimestamp()}},nn=en,on=(n("8622"),Object(x["a"])(nn,Je,tn,!1,null,null,null));on.options.__file="ObservationTime.vue";var rn=on.exports,sn={name:"ObservationsTimeline",components:{ObservationTime:rn},mixins:[Qe],data:function(){var t=this;return{timelineActivated:!1,moveOnTimelineFunction:Object(b["a"])(function(e){t.timelineActivated&&(t.timelineDate=t.formatDate(t.getDateFromPosition(e)))},300),timelineDate:null,timelineContainer:void 0,timelineLeft:void 0,visibleTimestamp:-1,playTimer:null,interval:void 0,speedMultiplier:1,selectSpeed:!1,pressTimer:null,longPress:!1}},computed:c()({},Object(l["c"])("data",["scaleReference","timeEvents","timestamp","modificationsTask","hasContext","visibleEvents","engineTimestamp"]),Object(l["c"])("stomp",["tasks"]),Object(l["c"])("view",["isMainControlDocked"]),{startDate:function(){return null!==this.scaleReference?this.formatDate(this.scaleReference.start,!0):""},endDate:function(){return null!==this.scaleReference?this.formatDate(this.scaleReference.end,!0):""}}),methods:c()({},Object(l["b"])("data",["setTimestamp","setModificationsTask"]),Object(l["b"])("view",["setTimeRunning"]),{formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===t)return"";var i=It()(t);return e?i.format("DD MMM YYYY"):'<div class="ot-date-tooltip-content">'.concat(i.format("L")).concat(n?" - ":"<br />").concat(i.format("HH:mm:ss:SSS"),"</div>")},calculatePosition:function(t){if(this.timelineContainer||(this.timelineContainer=this.$refs["ot-timeline-container"]),!this.timelineContainer)return 0;var e=Math.floor((t-this.scaleReference.start)*this.timelineContainer.clientWidth/(this.scaleReference.end-this.scaleReference.start));return e},moveOnTimeline:function(t){this.moveOnTimelineFunction(t)},getDateFromPosition:function(t){if(this.timelineContainer||(this.timelineContainer=this.$refs["ot-timeline-container"]),!this.timelineContainer)return 0;var e=this.timelineContainer.clientWidth,n=t.clientX-this.timelineContainer.getBoundingClientRect().left,i=this.scaleReference.start+n*(this.scaleReference.end-this.scaleReference.start)/e;return i>this.scaleReference.end?i=this.scaleReference.end:i<this.scaleReference.start&&(i=this.scaleReference.start),i},changeTimestamp:function(t){0!==this.timeEvents.length&&(-1===t&&this.stop(),t>this.scaleReference.end?(this.visibleTimestamp=this.scaleReference.end,this.setTimestamp(this.scaleReference.end)):(this.visibleTimestamp=t,this.setTimestamp(t)))},stop:function(){clearInterval(this.playTimer),this.playTimer=null},run:function(){var t=this;if(null!==this.playTimer)this.stop();else{this.interval||this.calculateInterval(),-1===this.timestamp&&this.changeTimestamp(this.scaleReference.start);var e={start:this.timestamp,stop:this.timestamp+this.interval.buffer};this.playTimer=setInterval(function(){t.changeTimestamp(Math.floor(t.timestamp+t.interval.step)),t.$nextTick(function(){t.timestamp>=t.scaleReference.end?t.stop():t.timestamp>e.stop-t.interval.step&&t.timestamp<=t.scaleReference.end&&(e={start:t.timestamp,stop:t.timestamp+t.interval.buffer},t.$eventBus.$emit(u["d"].NEED_LAYER_BUFFER,e))})},this.interval.interval),this.$eventBus.$emit(u["d"].NEED_LAYER_BUFFER,e)}},calculateInterval:function(){if(this.scaleReference&&this.scaleReference.schedulingResolution){var t=1,e=this.calculatePosition(this.scaleReference.start+this.scaleReference.schedulingResolution);e>1&&(t=e);var n=(this.scaleReference.schedulingResolution||u["x"].DEFAULT_STEP)/t,i=(this.scaleReference.end-this.scaleReference.start)/n,o=Math.max(document.body.clientHeight,document.body.clientWidth),r=(this.scaleReference.end-this.scaleReference.start)/4,s=o/t;s*i<u["x"].MIN_PLAY_TIME?s=u["x"].MIN_PLAY_TIME/i:s>u["x"].MAX_PLAY_TIME&&(s=u["x"].MAX_PLAY_TIME/i),s/=this.speedMultiplier,this.interval={step:n,steps:i,interval:s,buffer:r,multiplier:this.speedMultiplier},console.info("Step: ".concat(this.interval.step,"; Steps: ").concat(this.interval.steps,"; Interval: ").concat(this.interval.interval,"; Buffer: ").concat(this.interval.buffer))}},startPress:function(){var t=this;this.longPress=!1,this.pressTimer?(clearInterval(this.pressTimer),this.pressTimer=null):this.pressTimer=setTimeout(function(){t.selectSpeed=!0,t.longPress=!0},600)},stopPress:function(){clearInterval(this.pressTimer),this.pressTimer=null,!this.longPress&&this.timestamp<this.scaleReference.end&&this.run(),this.longPress=!1},changeSpeed:function(t){var e=this;this.speedMultiplier=t,this.selectSpeed=!1,this.interval&&this.$nextTick(function(){e.interval.interval=e.interval.interval*e.interval.multiplier/e.speedMultiplier,e.interval.multiplier=e.speedMultiplier,null!==e.playTimer&&(e.stop(),e.run())})}}),watch:{timeEvents:function(){this.interval||this.calculateInterval()},tasks:function(t){var e=this;if(t.length>0&&this.modificationsTask){var n=t.find(function(t){return t.id===e.modificationsTask.id});n&&!n.alive&&this.setModificationsTask(null)}},visibleEvents:function(){0===this.visibleEvents.length&&null!==this.playTimer&&this.stop()},timestamp:function(t,e){!this.isMainControlDocked||-1!==t&&-1!==e||(this.timelineContainer=void 0)},playTimer:function(){this.setTimeRunning(null!==this.playTimer)}},mounted:function(){this.timelineDate=this.startTime,this.visibleTimestamp=this.timestamp,It.a.locale(window.navigator.userLanguage||window.navigator.language),this.$eventBus.$on(u["d"].MAP_SIZE_CHANGED,this.calculateInterval)},beforeDestroy:function(){this.$eventBus.$off(u["d"].MAP_SIZE_CHANGED,this.calculateInterval)},destroyed:function(){this.stop()}},an=sn,cn=(n("31da"),Object(x["a"])(an,Xe,Ze,!1,null,null,null));cn.options.__file="ObservationsTimeline.vue";var ln,un=cn.exports,dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"klab-menu-component kp-container",attrs:{id:"klab-log-pane"}},[n("div",{staticClass:"klp-level-selector"},[n("ul",t._l(t.LOG_ICONS,function(e,i,o){return n("li",{key:o,class:{"klp-selected":t.hasLevel(i)}},[n("q-btn",{staticClass:"klp-chip",attrs:{dense:"",size:"sm",icon:e.icon,color:e.color},on:{click:function(e){t.toggleLevel(i)}}},[n("q-tooltip",{attrs:{delay:600,offset:[0,5]}},[t._v(t._s(t.$t(e.i18nlabel)))])],1)],1)}))]),n("q-list",{staticClass:"no-padding no-border",attrs:{dense:"",dark:"",id:"log-container"}},[0!==t.logs.length?t._l(t.logs,function(e,i){return n("q-item",{key:i,staticClass:"log-item q-pa-xs"},[t.isSeparator(e)?[n("q-item-main",{staticClass:"klp-separator"},[n("span",[t._v(t._s(t.$t("label.contextReset")))])])]:[n("q-item-side",[n("q-item-tile",{staticStyle:{"font-size":"18px"},attrs:{icon:t.logColorAndIcon(e).icon,color:t.logColorAndIcon(e).color}})],1),n("q-item-main",[n("q-item-tile",[t._v(t._s(t.logText(e)))])],1)]],2)}):[n("q-item",{staticClass:"log-item log-no-items q-pa-xs"},[n("q-item-side",[n("q-item-tile",{staticStyle:{"font-size":"18px"},attrs:{icon:0===t.levels.length?"mdi-alert-outline":"mdi-information-outline"}})],1),n("q-item-main",[n("q-item-tile",[t._v(t._s(0===t.levels.length?t.$t("messages.noLevelSelected"):t.$t("messages.noLogItems")))])],1)],1)]],2)],1)},hn=[];dn._withStripped=!0;var fn=(ln={},s()(ln,Pe["a"].TYPE_ERROR,{i18nlabel:"label.levelError",icon:"mdi-close-circle",color:"negative"}),s()(ln,Pe["a"].TYPE_WARNING,{i18nlabel:"label.levelWarning",icon:"mdi-alert",color:"warning"}),s()(ln,Pe["a"].TYPE_INFO,{i18nlabel:"label.levelInfo",icon:"mdi-information",color:"info"}),s()(ln,Pe["a"].TYPE_DEBUG,{i18nlabel:"label.levelDebug",icon:"mdi-console-line",color:"grey-6"}),s()(ln,Pe["a"].TYPE_ENGINEEVENT,{i18nlabel:"label.levelEngineEvent",icon:"mdi-settings-outline",color:"secondary"}),ln),pn={name:"KLabLogPane",data:function(){return{scrollBar:null,log:null,LOG_ICONS:fn}},computed:c()({},Object(l["c"])("view",["klabLogReversedAndFiltered","levels"]),{logs:function(){return 0===this.levels.length?[]:this.klabLogReversedAndFiltered(5===this.levels.length?[]:this.levels)}}),methods:c()({},Object(l["b"])("view",["setLevels","toggleLevel"]),{logText:function(t){if(t&&t.payload){if(t.type===Pe["a"].TYPE_ENGINEEVENT){var e=t.time;return t.payload.timestamp&&(e=It()(t.payload.timestamp)),"".concat(e.format("HH:mm:ss"),": ").concat(this.$t("engineEventLabels.evt".concat(t.payload.type))," ").concat(t.payload.started?"started":"stopped")}return"".concat(t.time?t.time.format("HH:mm:ss"):this.$t("messages.noTime"),": ").concat(t.payload)}return this.$t("label.klabNoMessage")},logColorAndIcon:function(t){var e=fn[t.type];return e?fn[t.type]:(console.warn("Log type: ".concat(t.type),t),fn.Error)},isSeparator:function(t){return t&&t.payload&&t.payload.separator},hasLevel:function(t){return-1!==this.levels.indexOf(t)}}),mounted:function(){this.scrollBar=new be(document.getElementById("klab-log-pane"))}},vn=pn,mn=(n("f58f"),Object(x["a"])(vn,dn,hn,!1,null,null,null));mn.options.__file="KlabLogPane.vue";var gn=mn.exports,yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sb-scales"},[t.hasNextScale()?n("div",{staticClass:"klab-button klab-action mdi-next-scale"},[n("q-icon",{attrs:{name:"mdi-refresh",color:"mc-yellow"},nativeOn:{click:function(e){return t.rescaleContext(e)}}},[n("q-tooltip",{attrs:{anchor:t.anchorType,self:t.selfType,offset:t.offsets}},[t._v(t._s(t.$t("tooltips.refreshScale")))])],1)],1):t._e(),n("div",{staticClass:"klab-button klab-action",class:[{active:t.showSpaceScalePopup}],on:{mouseover:function(e){t.toggleScalePopup("space",!0)},mouseleave:function(e){t.toggleScalePopup("space",!1)},click:function(e){t.scaleEditing={active:!0,type:t.SCALE_TYPE.ST_SPACE}}}},[n("q-icon",{class:{"mdi-next-scale":t.hasNextScale(t.SCALE_TYPE.ST_SPACE)},attrs:{name:"mdi-earth"}},[n("q-popover",{attrs:{"anchor-click":!1,anchor:t.anchorType,self:t.selfType,offset:t.offsets},model:{value:t.showSpaceScalePopup,callback:function(e){t.showSpaceScalePopup=e},expression:"showSpaceScalePopup"}},[n("div",{staticClass:"mc-scalereference",attrs:{id:"mc-spacereference"}},[n("scale-reference",{attrs:{width:t.spaceWidth?t.spaceWidth:t.scaleWidth,"scale-type":"space",light:!0,editable:!1}}),t.hasNextScale(t.SCALE_TYPE.ST_SPACE)?n("scale-reference",{staticClass:"sb-next-scale",attrs:{width:t.spaceWidth?t.spaceWidth:t.scaleWidth,"scale-type":"space","use-next":!0,light:!0,editable:!1}}):t._e(),n("div",{staticClass:"sb-tooltip"},[t._v(t._s(t.$t("tooltips.clickToEdit",{type:t.SCALE_TYPE.ST_SPACE})))])],1)])],1)],1),n("div",{staticClass:"klab-button klab-action",class:[{active:t.showTimeScalePopup}],on:{mouseover:function(e){t.toggleScalePopup("time",!0)},mouseleave:function(e){t.toggleScalePopup("time",!1)},click:function(e){t.scaleEditing={active:!0,type:t.SCALE_TYPE.ST_TIME}}}},[n("q-icon",{class:{"mdi-next-scale":t.hasNextScale(t.SCALE_TYPE.ST_TIME)},attrs:{name:"mdi-clock"}},[n("q-popover",{attrs:{"anchor-click":!1,anchor:t.anchorType,self:t.selfType,offset:t.offsets},model:{value:t.showTimeScalePopup,callback:function(e){t.showTimeScalePopup=e},expression:"showTimeScalePopup"}},[n("div",{staticClass:"mc-scalereference",attrs:{id:"mc-timereference"}},[n("scale-reference",{attrs:{width:t.timeWidth?t.timeWidth:t.scaleWidth,"scale-type":"time",light:!0,editable:!1}}),t.hasNextScale(t.SCALE_TYPE.ST_TIME)?n("scale-reference",{staticClass:"sb-next-scale",attrs:{width:"timeWidth ? timeWidth : scaleWidth","scale-type":"time",light:!0,editable:!1,"use-next":!0}}):t._e(),n("div",{staticClass:"sb-tooltip"},[t._v(t._s(t.$t("tooltips.clickToEdit",{type:t.SCALE_TYPE.ST_TIME})))])],1)])],1)],1)])},bn=[];yn._withStripped=!0;var _n={name:"ScaleButtons",components:{ScaleReference:Lt},props:{docked:{type:Boolean,required:!0},offset:{type:Number,default:8},scaleWidth:{type:String,default:"140px"},timeWidth:{type:String,default:void 0},spaceWidth:{type:String,default:void 0}},data:function(){return{showSpaceScalePopup:!1,showTimeScalePopup:!1,anchorType:this.docked?"center right":"bottom left",selfType:this.docked?"center left":"top left",offsets:this.docked?[this.offset,0]:[0,this.offset],SCALE_TYPE:u["q"]}},computed:c()({},Object(l["c"])("data",["nextScale","hasNextScale","scaleReference","contextId"]),{scaleEditing:{get:function(){return this.$store.getters["view/isScaleEditing"]},set:function(t){var e=t.active,n=t.type;this.$store.dispatch("view/setScaleEditing",{active:e,type:n})}}}),methods:{toggleScalePopup:function(t,e){"space"===t?(this.showSpaceScalePopup=e,this.showTimeScalePopup=!1):"time"===t&&(this.showSpaceScalePopup=!1,this.showTimeScalePopup=e)},rescaleContext:function(){this.hasNextScale()&&this.sendStompMessage(d["a"].SCALE_REFERENCE(c()({scaleReference:this.scaleReference,contextId:this.contextId},this.hasNextScale(u["q"].ST_SPACE)&&{spaceResolutionConverted:this.nextScale.spaceResolutionConverted,spaceUnit:this.nextScale.spaceUnit},this.hasNextScale(u["q"].ST_TIME)&&{timeResolutionMultiplier:this.nextScale.timeResolutionMultiplier,timeUnit:this.nextScale.timeUnit,start:this.nextScale.start,end:this.nextScale.end}),this.$store.state.data.session).body)},noTimeScaleChange:function(){this.$q.notify({message:this.$t("messages.availableInFuture"),type:"info",icon:"mdi-information",timeout:1e3})}}},wn=_n,Sn=(n("1817"),Object(x["a"])(wn,yn,bn,!1,null,null,null));Sn.options.__file="ScaleButtons.vue";var En=Sn.exports,xn=y["b"].width,Cn=y["b"].height,On={top:25,left:15},Tn={name:"klabMainControl",components:{KlabSpinner:z,KlabSearchBar:$t,KlabBreadcrumbs:Zt,KlabTreePane:We,KlabLogPane:gn,ScrollingText:St,ScaleButtons:En,MainActionsButtons:O,StopActionsButtons:N,ObservationsTimeline:un},directives:{Draggable:g},mixins:[dt],data:function(){var t=this;return{isHidden:!1,dragMCConfig:{handle:void 0,resetInitialPos:!1,onPositionChange:Object(b["a"])(function(e,n,i){t.onDebouncedPositionChanged(i)},100),onDragStart:function(){t.dragging=!0},onDragEnd:this.checkWhereWasDragged,fingers:2},correctedPosition:{top:0,left:0},dragging:!1,askForDocking:!1,leftMenuMaximized:"".concat(u["j"].LEFTMENU_MAXSIZE,"px"),boundingElement:void 0,selectedTab:"klab-tree-pane",draggableElement:void 0,draggableElementWidth:0,centeredLeft:this.defaultLeft,paletteOpen:!1}},computed:c()({},Object(l["c"])("data",["hasContext","contextHasTime"]),Object(l["c"])("stomp",["hasTasks"]),Object(l["c"])("view",["spinnerColor","searchIsFocused","isDrawMode","fuzzyMode","largeMode"]),{qCardStyle:function(){return{top:"".concat(this.defaultTop+this.correctedPosition.top,"px"),left:"".concat(this.centeredLeft+this.correctedPosition.left,"px"),"margin-top":"-".concat(this.correctedPosition.top,"px"),"margin-left":"-".concat(this.correctedPosition.left,"px")}}}),methods:c()({},Object(l["b"])("view",["setMainViewer","setLargeMode"]),{callStartType:function(t){this.searchIsFocused?t.evt.stopPropagation():this.$refs["klab-search-bar"].startType(t)},onDebouncedPositionChanged:function(t){this.askForDocking=!!(this.hasContext&&this.dragging&&t&&t.x<=30)},hide:function(){this.dragMCConfig.resetInitialPos=!1,this.isHidden=!0},show:function(){this.dragMCConfig.resetInitialPos=!1,this.isHidden=!1},getCenteredLeft:function(){var t;if("undefined"===typeof this.draggableElement||this.hasContext)t=this.defaultLeft;else{var e=this.draggableElementWidth,n=xn(this.boundingElement);t=(n-e)/2}return t+this.correctedPosition.left},changeDraggablePosition:function(t){this.draggableElement.style.left="".concat(t.left,"px"),this.draggableElement.style.top="".concat(t.top,"px");var e=JSON.parse(this.dragMCConfig.handle.getAttribute("draggable-state"));e.startDragPosition=t,e.currentDragPosition=t,document.getElementById("mc-q-card-title").setAttribute("draggable-state",JSON.stringify(e))},checkWhereWasDragged:function(){if(this.dragging=!1,this.askForDocking)return this.askForDocking=!1,void this.setMainViewer(u["y"].DOCKED_DATA_VIEWER);this.draggableElement.offsetTop<0&&this.changeDraggablePosition({top:0,left:Math.max(this.draggableElement.offsetLeft,0)}),this.draggableElement.offsetLeft+this.draggableElement.offsetWidth<=0&&this.changeDraggablePosition({top:Math.max(this.draggableElement.offsetTop,0),left:0}),this.draggableElement.offsetLeft>=xn(this.boundingElement)&&this.changeDraggablePosition({top:Math.max(this.draggableElement.offsetTop,0),left:Math.max(xn(this.boundingElement)-this.draggableElement.offsetWidth,0)}),this.draggableElement.offsetTop>=Cn(this.boundingElement)&&this.changeDraggablePosition({top:Math.max(Cn(this.boundingElement)-this.draggableElement.offsetHeight,0),left:Math.max(this.draggableElement.offsetLeft,0)})},getBGColor:function(t){return"rgba(".concat(this.spinnerColor.rgb.r,",").concat(this.spinnerColor.rgb.g,",").concat(this.spinnerColor.rgb.b,", ").concat(t,")")},mapSizeChangedListener:function(t){var e=this;if("changelayout"===t)return this.updateCorrectedPosition(),void this.$nextTick(function(){e.changeDraggablePosition({left:e.centeredLeft,top:e.defaultTop})});this.dragMCConfig.initialPosition={left:this.centeredLeft,top:this.defaultTop},this.checkWhereWasDragged()},spinnerDoubleClickListener:function(){this.hide()},updateCorrectedPosition:function(){var t=document.getElementById("klab-main-header"),e=document.querySelector("#klab-main-left-panel aside"),n=t?Cn(t):0,i=e?xn(e):0;this.correctedPosition={top:n,left:i},this.defaultTop=On.top+n,this.defaultleft=On.left+i,this.centeredLeft=this.getCenteredLeft()},updateDraggable:function(){this.updateCorrectedPosition(),this.draggableElement=document.getElementById("mc-q-card"),this.draggableElementWidth=xn(this.draggableElement),this.dragMCConfig.handle=document.getElementById("mc-q-card-title"),this.boundingElement=document.getElementById("kexplorer-container"),this.centeredLeft=this.getCenteredLeft(),this.dragMCConfig.initialPosition={left:this.centeredLeft,top:this.defaultTop}}}),watch:{hasContext:function(){var t=this;this.setLargeMode(0),this.$nextTick(function(){t.changeDraggablePosition({top:t.defaultTop,left:t.hasContext?t.defaultLeft:t.getCenteredLeft()})})},largeMode:function(){var t=this;this.hasContext||this.$nextTick(function(){var e=u["c"].SEARCHBAR_INCREMENT*t.largeMode/2;if(e>=0){var n=parseFloat(t.draggableElement.style.left),i=n-t.getCenteredLeft();i%(u["c"].SEARCHBAR_INCREMENT/2)===0&&t.changeDraggablePosition({top:parseFloat(t.draggableElement.style.top),left:t.getCenteredLeft()-e})}})}},created:function(){this.defaultTop=On.top,this.defaultLeft=On.left,this.VIEWERS=u["y"]},mounted:function(){this.updateDraggable(),this.$eventBus.$on(u["d"].SPINNER_DOUBLE_CLICK,this.spinnerDoubleClickListener),this.$eventBus.$on(u["d"].MAP_SIZE_CHANGED,this.mapSizeChangedListener)},beforeDestroy:function(){this.$eventBus.$off(u["d"].SPINNER_DOUBLE_CLICK,this.spinnerDoubleClickListener),this.$eventBus.$off(u["d"].MAP_SIZE_CHANGED,this.mapSizeChangedListener)}},In=Tn,Mn=(n("96fa"),Object(x["a"])(In,h,f,!1,null,null,null));Mn.options.__file="KlabMainControl.vue";var kn=Mn.exports,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"no-padding relative-position full-width"},t._l(t.dataViewers,function(e){return n("div",{key:e.idx,class:["no-padding",e.main?"absolute-top full-height full-width":"absolute thumb-view"],style:t.viewerStyle(e),attrs:{id:"dv-viewer-"+e.idx}},[e.main?t._e():n("div",{staticClass:"thumb-viewer-title absolute-top"},[n("div",{staticClass:"relative-position"},[n("div",{staticClass:"thumb-viewer-label float-left q-ma-sm",class:[e.type.hideable?"thumb-closable":""]},[t._v("\n          "+t._s(t.capitalize(e.label))+"\n        ")]),n("div",{staticClass:"float-right q-ma-xs thumb-viewer-button"},[n("q-btn",{staticClass:"shadow-1",attrs:{round:"",color:"mc-main",size:"xs",icon:"mdi-chevron-up"},on:{click:function(n){t.setMain(e.idx)}}}),e.type.hideable?n("q-btn",{staticClass:"shadow-1 thumb-close",attrs:{round:"",color:"black",size:"xs",icon:"mdi-close"},on:{click:function(n){t.closeViewer(e)}}}):t._e()],1)])]),n(e.type.component,{tag:"component",attrs:{idx:e.idx,viewer:e}})],1)}))},An=[];Pn._withStripped=!0;var Nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"upload-files",rawName:"v-upload-files",value:t.uploadConfig,expression:"uploadConfig"}],staticClass:"fit no-padding map-viewer"},[n("div",{ref:"map"+t.idx,staticClass:"fit",class:{"mv-exploring":t.exploreMode||null!==t.topLayer},attrs:{id:"map"+t.idx}}),n("q-icon",{staticClass:"map-selection-marker",attrs:{name:t.mapSelection.locked?"mdi-image-filter-center-focus":"mdi-crop-free",id:"msm-"+t.idx}}),n("q-resize-observable",{on:{resize:t.handleResize}}),t.isDrawMode?n("map-drawer",{attrs:{map:t.map},on:{drawend:t.sendSpatialLocation}}):t._e(),n("q-modal",{attrs:{"no-esc-dismiss":"","no-backdrop-dismiss":"","content-classes":["gl-msg-content"]},model:{value:t.waitingGeolocation,callback:function(e){t.waitingGeolocation=e},expression:"waitingGeolocation"}},[n("div",{staticClass:"bg-opaque-white"},[n("div",{staticClass:"q-pa-xs"},[n("h5",[t._v(t._s(t.$t("messages.geolocationWaitingTitle")))]),n("p",{domProps:{innerHTML:t._s(t.$t("messages.geolocationWaitingText"))}}),n("p",{directives:[{name:"show",rawName:"v-show",value:null!==t.geolocationIncidence,expression:"geolocationIncidence !== null"}],staticClass:"gl-incidence"},[t._v(t._s(t.geolocationIncidence))]),n("div",{staticClass:"gl-btn-container"},[n("q-btn",{directives:[{name:"show",rawName:"v-show",value:null!==t.geolocationIncidence,expression:"geolocationIncidence !== null"}],attrs:{label:t.$t("label.appRetry"),color:"primary"},on:{click:t.retryGeolocation}}),n("q-btn",{attrs:{label:t.$t("label.appCancel"),color:"mc-main"},on:{click:function(e){t.stopGeolocation(!0)}}})],1)])])]),n("q-modal",{attrs:{"no-route-dismiss":!0,"no-esc-dismiss":!0,"no-backdrop-dismiss":!0},model:{value:t.progressBarVisible,callback:function(e){t.progressBarVisible=e},expression:"progressBarVisible"}},[n("q-progress",{attrs:{percentage:t.uploadProgress,color:"mc-main",stripe:!0,animate:!0,height:"1em"}})],1),n("div",{ref:"mv-popup",staticClass:"ol-popup",attrs:{id:"mv-popup"}},[n("q-btn",{staticClass:"ol-popup-closer",attrs:{icon:"mdi-close",color:"grey-8",size:"xs",flat:"",round:""},on:{click:t.closePopup}}),n("div",{staticClass:"ol-popup-content",attrs:{id:"mv-popup-content"},domProps:{innerHTML:t._s(t.popupContent)}})],1),n("observation-context-menu",{attrs:{"observation-id":t.contextMenuObservationId},on:{hide:function(e){t.contextMenuObservationId=null}}})],1)},Ln=[];Nn._withStripped=!0;var Rn=n("be3b"),Dn="".concat("").concat(Pe["c"].REST_UPLOAD),jn="1024MB",Bn=jn.substr(jn.length-2),Fn="KB"===Bn?1:"MB"===Bn?2:"GB"===Bn?3:"PB"===Bn?4:0,zn=parseInt(jn.substring(0,jn.length-2),10)*Math.pow(1024,Fn);function Vn(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window}var Un=W["a"].directive("upload",{inserted:function(t,e){if(Vn()){var n=e.value&&e.value.onUploadProgress&&"function"===typeof e.value.onUploadProgress?e.value.onUploadProgress:function(){},i=e.value&&e.value.onUploadEnd&&"function"===typeof e.value.onUploadEnd?e.value.onUploadEnd:function(){console.debug("Upload complete")},o=e.value&&e.value.onUploadError&&"function"===typeof e.value.onUploadError?e.value.onUploadError:function(t){console.error(JSON.stringify(t,null,4))};["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){t.addEventListener(e,function(t){t.preventDefault(),t.stopPropagation()},!1)}),t.addEventListener("drop",function(t){var r=t.dataTransfer.files;if(null!==r&&0!==r.length){for(var s=new FormData,a=[],c=0;c<r.length;c++)r[c].size>zn?o("File is too large, max sixe is ".concat(jn)):(s.append("files[]",r[c]),a.push(r[c].name));"undefined"!==typeof e.value.refId&&null!==e.value.refId&&s.append("refId",e.value.refId||null),Rn["a"].post(Dn,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){n(parseInt(Math.round(100*t.loaded/t.total),10))}}).then(function(){i(null!==r&&a.length>0?a.join(", "):null)}).catch(function(t){o(t,null!==r&&a.length>0?a.join(", "):null)})}})}}}),qn=n("256f"),Yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"draggable",rawName:"v-draggable",value:t.dragDCConfig,expression:"dragDCConfig"}],staticClass:"md-draw-controls"},[n("div",{staticClass:"md-title"},[t._v("Draw mode")]),n("div",{staticClass:"md-controls"},[n("q-icon",{staticClass:"md-control md-ok",attrs:{name:"mdi-check-circle-outline"},nativeOn:{click:function(e){t.drawOk()}}}),n("q-icon",{staticClass:"md-control md-erase",class:[t.hasCustomContextFeatures?"":"disabled"],attrs:{name:"mdi-delete-variant"},nativeOn:{click:function(e){t.hasCustomContextFeatures&&t.drawErase()}}}),n("q-icon",{staticClass:"md-control md-cancel",attrs:{name:"mdi-close-circle-outline"},nativeOn:{click:function(e){t.drawCancel()}}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.selectors,expression:"selectors"}],staticClass:"md-selector"},[n("q-btn-toggle",{attrs:{"toggle-color":"mc-main",size:"md",options:[{tabindex:1,icon:"mdi-vector-point",value:"Point",disable:!0},{tabindex:2,icon:"mdi-vector-line",value:"LineString",disable:!0},{tabindex:3,icon:"mdi-vector-polygon",value:"Polygon"},{tabindex:4,icon:"mdi-vector-circle-variant",value:"Circle"}]},model:{value:t.drawType,callback:function(e){t.drawType=e},expression:"drawType"}})],1)])},$n=[];Yn._withStripped=!0;var Gn=n("a27f"),Hn=n("3e6b"),Kn=n("5831"),Wn=n("6c77"),Xn=n("83a6"),Zn=n("8682"),Qn=n("ce2c"),Jn=n("ac29"),ti=n("c807"),ei=n("4cdf"),ni=n("f822"),ii=n("5bc3"),oi={name:"MapDrawer",props:{map:{type:Object,required:!0},selectors:{type:Boolean,required:!1,default:!0},fillColor:{type:String,required:!1,default:"rgba(17, 170, 187, 0.3)"},strokeColor:{type:String,required:!1,default:"rgb(17, 170, 187)"},strokeWidth:{type:Number,required:!1,default:2},pointRadius:{type:Number,required:!1,default:5}},data:function(){return{drawerLayer:void 0,drawer:void 0,drawerModify:void 0,dragDCConfig:{resetInitialPos:!0},drawType:"Polygon"}},computed:{hasCustomContextFeatures:function(){return this.drawerLayer&&this.drawerLayer.getSource().getFeatures().length>0}},methods:c()({},Object(l["b"])("view",["setDrawMode"]),{drawOk:function(){var t=this.drawerLayer.getSource().getFeatures().filter(function(t){return null!==t.getGeometry()}),e=t.length,n=[];if(0!==e){for(var i=null,o=0;o<e;o+=1){var r=t[o].getGeometry();if(r instanceof ni["a"]||r instanceof ii["a"]){var s=Object(X["c"])(Object(X["i"])(r));i=null===i?s:i.union(s)}else n.push(t[o])}null!==i&&n.push(new ei["a"]({geometry:X["j"].write(i)})),this.$emit("drawend",n)}this.drawerLayer.getSource().clear(),this.setDrawMode(!1)},drawErase:function(){var t=this.drawerLayer.getSource().getFeatures().filter(function(t){return null!==t.getGeometry()});t.length>0&&t.pop(),this.drawerLayer.getSource().clear(!0),this.drawerLayer.getSource().addFeatures(t)},drawCancel:function(){this.$emit("drawcancel"),this.drawerLayer.getSource().clear(),this.setDrawMode(!1)},setDrawer:function(){var t=this;this.drawer=new Jn["a"]({source:this.drawerLayer.getSource(),type:this.drawType}),this.drawer.on("drawend",function(e){var n=Object(X["i"])(e.feature.getGeometry());n.isValid()||(t.$q.notify({message:t.$t("messages.invalidGeometry"),type:"negative",icon:"mdi-alert-circle",timeout:1e3}),e.feature.setGeometry(null))}),this.map.addInteraction(this.drawer)}}),watch:{drawType:function(){this.map.removeInteraction(this.drawer),this.setDrawer()}},directives:{Draggable:Gn["Draggable"]},mounted:function(){var t=new Kn["a"];this.drawerModify=new ti["a"]({source:t}),this.drawerLayer=new Hn["a"]({id:"DrawerLayer",source:t,visible:!0,style:new Wn["c"]({fill:new Xn["a"]({color:this.fillColor}),stroke:new Zn["a"]({color:this.strokeColor,width:this.strokeWidth}),image:new Qn["a"]({radius:this.pointRadius,fill:new Xn["a"]({color:this.strokeColor})})})}),this.dragDCConfig.boundingElement=document.getElementById(this.map.get("target")),this.map.addLayer(this.drawerLayer),this.map.addInteraction(this.drawerModify),this.setDrawer()},beforeDestroy:function(){this.map.removeInteraction(this.drawer),this.map.removeInteraction(this.drawerModify),this.drawerLayer.getSource().clear(!0)}},ri=oi,si=(n("37a9"),Object(x["a"])(ri,Yn,$n,!1,null,null,null));si.options.__file="MapDrawer.vue";var ai=si.exports,ci=n("e300"),li=n("9c78"),ui=n("c810"),di=n("592d"),hi=n("e269"),fi={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},pi=n("cd7e"),vi=n("0999"),mi=n("1e8d"),gi=n("0af5"),yi={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},bi=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+pi["d"],this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(mi["a"])(this,Object(hi["b"])(yi.ELEMENT),this.handleElementChanged,this),Object(mi["a"])(this,Object(hi["b"])(yi.MAP),this.handleMapChanged,this),Object(mi["a"])(this,Object(hi["b"])(yi.OFFSET),this.handleOffsetChanged,this),Object(mi["a"])(this,Object(hi["b"])(yi.POSITION),this.handlePositionChanged,this),Object(mi["a"])(this,Object(hi["b"])(yi.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:fi.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(yi.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(yi.MAP)},e.prototype.getOffset=function(){return this.get(yi.OFFSET)},e.prototype.getPosition=function(){return this.get(yi.POSITION)},e.prototype.getPositioning=function(){return this.get(yi.POSITIONING)},e.prototype.handleElementChanged=function(){Object(vi["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(vi["e"])(this.element),Object(mi["e"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(mi["a"])(t,di["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(yi.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(yi.ELEMENT,t)},e.prototype.setMap=function(t){this.set(yi.MAP,t)},e.prototype.setOffset=function(t){this.set(yi.OFFSET,t)},e.prototype.setPosition=function(t){this.set(yi.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),i=this.getRect(n,[Object(vi["c"])(n),Object(vi["b"])(n)]),o=this.autoPanMargin;if(!Object(gi["g"])(e,i)){var r=i[0]-e[0],s=e[2]-i[2],a=i[1]-e[1],c=e[3]-i[3],l=[0,0];if(r<0?l[0]=r-o:s<0&&(l[0]=Math.abs(s)+o),a<0?l[1]=a-o:c<0&&(l[1]=Math.abs(c)+o),0!==l[0]||0!==l[1]){var u=t.getView().getCenter(),d=t.getPixelFromCoordinate(u),h=[d[0]+l[0],d[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(h),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(yi.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=i[0],s=i[1];if(o==fi.BOTTOM_RIGHT||o==fi.CENTER_RIGHT||o==fi.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=n.left="");var a=Math.round(e[0]-t[0]-r)+"px";this.rendered.right_!=a&&(this.rendered.right_=n.right=a)}else{""!==this.rendered.right_&&(this.rendered.right_=n.right=""),o!=fi.BOTTOM_CENTER&&o!=fi.CENTER_CENTER&&o!=fi.TOP_CENTER||(r-=this.element.offsetWidth/2);var c=Math.round(t[0]+r)+"px";this.rendered.left_!=c&&(this.rendered.left_=n.left=c)}if(o==fi.BOTTOM_LEFT||o==fi.BOTTOM_CENTER||o==fi.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=n.top="");var l=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=n.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=n.bottom=""),o!=fi.CENTER_LEFT&&o!=fi.CENTER_CENTER&&o!=fi.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var u=Math.round(t[1]+s)+"px";this.rendered.top_!=u&&(this.rendered.top_=n.top=u)}},e.prototype.getOptions=function(){return this.options},e}(hi["a"]),_i=bi,wi=n("b2da"),Si=n.n(wi),Ei=n("64d9"),xi=n("f403"),Ci=(n("c58e"),{name:"MapViewer",components:{MapDrawer:ai,ObservationContextMenu:ke},props:{idx:{type:Number,required:!0}},directives:{UploadFiles:Un},data:function(){var t=this;return{center:this.$mapDefaults.center,zoom:this.$mapDefaults.zoom,map:null,view:null,movedWithContext:!1,layers:new ci["a"],zIndexCounter:0,baseLayers:null,layerSwitcher:null,visibleBaseLayer:null,mapSelectionMarker:void 0,wktInstance:new Ei["a"],geolocationId:null,geolocationIncidence:null,popupContent:"",popupOverlay:void 0,contextLayer:null,uploadConfig:{refId:null,onUploadProgress:function(e){t.uploadProgress=e},onUploadEnd:function(e){t.$q.notify({message:t.$t("messages.uploadComplete",{fileName:e}),type:"info",icon:"mdi-information",timeout:1e3}),t.uploadProgress=null},onUploadError:function(e,n){t.$q.notify({message:"".concat(t.$t("errors.uploadError",{fileName:n}),"\n").concat(e.response.data.message),type:"negative",icon:"mdi-alert-circle",timeout:1e3}),t.uploadProgress=null}},uploadProgress:null,storedZoom:null,clicksOnMap:0,bufferingLayers:!1,lastModificationLoaded:null,previousTopLayer:null,lockedObservations:[],contextMenuObservationId:null}},computed:c()({observations:function(){return this.$store.getters["data/observationsOfViewer"](this.idx)},lockedObservationsIds:function(){return this.lockedObservations.map(function(t){return t.id})}},Object(l["c"])("data",["hasContext","contextId","contextLabel","session","timestamp","scaleReference","timeEvents","timeEventsOfObservation"]),Object(l["c"])("view",["contextGeometry","observationInfo","exploreMode","mapSelection","isDrawMode","topLayer","mainViewer"]),Object(l["d"])("view",["saveLocation"]),{hasCustomContextFeatures:function(){return this.drawerLayer&&this.drawerLayer.getSource().getFeatures().length>0},progressBarVisible:function(){return null!==this.uploadProgress},waitingGeolocation:{get:function(){return this.$store.state.view.waitingGeolocation},set:function(t){this.$store.state.view.waitingGeolocation=t}}}),methods:c()({},Object(l["b"])("data",["setCrossingIDL","putObservationOnTop"]),Object(l["b"])("view",["addToKexplorerLog","setSpinner","setMapSelection","setDrawMode","setTopLayer"]),{handleResize:function(){null!==this.map&&(this.map.updateSize(),this.$eventBus.$emit(u["d"].MAP_SIZE_CHANGED))},onMoveEnd:function(){this.hasContext?this.movedWithContext=!0:this.isDrawMode||this.sendRegionOfInterest()},sendRegionOfInterest:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.waitingGeolocation){var t=null,e=Object(qn["j"])(this.view.getCenter(),jt["d"].PROJ_EPSG_3857,jt["d"].PROJ_EPSG_4326);Math.abs(e[0])>180&&(e[0]%=180,this.view.animate({center:Object(qn["j"])(e,jt["d"].PROJ_EPSG_4326,jt["d"].PROJ_EPSG_3857),duration:500}));try{var n=Object(qn["k"])(this.map.getView().calculateExtent(this.map.getSize()),"EPSG:3857","EPSG:4326");if(n[0]<-180||n[1]<-90||n[2]>180||n[3]>90)return void this.setCrossingIDL(!0);this.setCrossingIDL(!1),t=d["a"].REGION_OF_INTEREST(n,this.session)}catch(t){console.error(t),this.addToKexplorerLog({type:u["l"].TYPE_ERROR,payload:{message:t.message,attach:t}})}t&&t.body&&(this.sendStompMessage(t.body),this.saveLocation&&Dt["a"].set(u["A"].COOKIE_MAPDEFAULT,{center:this.view.getCenter(),zoom:this.view.getZoom()},{expires:30,path:"/"}))}},findExistingLayerById:function(t){if(this.layers&&null!==this.layers){var e=this.layers.getArray();return e.filter(function(e){return null===e.get("id")?null===t:e.get("id").startsWith(t)})}return[]},findModificationTimestamp:function(t,e){if(-1!==e){var n=null===t?this.timeEvents:this.timeEventsOfObservation(t);return n.length>0?n.reduce(function(t,n){var i=e-n.timestamp;return i<=0?t:-1===t||i<e-t?n.timestamp:t},this.scaleReference.start):-1}return-1},findLayerById:function(){var t=Ot()(regeneratorRuntime.mark(function t(e){var n,i,o,r,s,a,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.observation,i=e.timestamp,o=void 0===i?-1:i,r=this.findExistingLayerById(n.id),!(r.length>0)){t.next=7;break}if(s="".concat(n.id,"T").concat(o),a=r.find(function(t){return t.get("id")===s}),!a){t.next=7;break}return t.abrupt("return",{founds:r,layer:a});case 7:return t.prev=7,console.log("Creating layer: ".concat(n.label," with timestamp ").concat(o)),t.next=11,Object(Z["e"])(n,{projection:this.proj,timestamp:o});case 11:return c=t.sent,r&&r.length>0?c.setZIndex(n.zIndex):(this.zIndexCounter+=2,n.zIndex=this.zIndexCounter+n.zIndexOffset,c.setZIndex(n.zIndex)),this.layers.push(c),r.push(c),t.abrupt("return",{founds:r,layer:c});case 18:return t.prev=18,t.t0=t["catch"](7),console.error(t.t0.message),this.$q.notify({message:t.t0.message,type:"negative",icon:"mdi-alert-circle",timeout:3e3}),t.abrupt("return",null);case 23:case"end":return t.stop()}},t,this,[[7,18]])}));return function(e){return t.apply(this,arguments)}}(),bufferLayerImages:function(t){var e=this;console.debug("Ask preload from ".concat(t.start," to ").concat(t.stop));var n=this.timeEvents.filter(function(e){return e.timestamp>t.start&&e.timestamp<=t.stop}),i=n.length;if(i>0){var o=function t(o){var r=e.observations.find(function(t){return t.id===n[o].id});r&&e.findLayerById({observation:r,timestamp:n[o].timestamp}).then(function(e){var n=e.layer,r=n.getSource().image_;r&&0===r.state?(r.load(),n.getSource().on("imageloadend",function(e){e.image;++o<i&&t(o)})):++o<i&&t(o)})};o(0)}},drawContext:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==e&&(this.layers.clear(),this.lockedObservations=[],this.previousTopLayer=null,null!==this.contextLayer?(this.map.removeLayer(this.contextLayer),this.contextLayer=null):this.baseLayers.removeMask()),null===this.contextGeometry)return console.debug("No context, send region of interest"),void this.sendRegionOfInterest();this.contextGeometry instanceof Array?(this.contextLayer=new Hn["a"]({id:this.contextId,source:new Kn["a"]({features:[new ei["a"]({geometry:new xi["a"](this.contextGeometry),name:this.contextLabel,id:this.contextId})]}),style:Object(X["d"])(jt["e"].POINT_CONTEXT_SVG_PARAM,this.contextLabel)}),this.map.addLayer(this.contextLayer),this.view.setCenter(this.contextGeometry)):(this.baseLayers.setMask(this.contextGeometry),this.view.fit(this.contextGeometry,{padding:[10,10,10,10],constrainResolution:!1}))},drawObservations:function(){var t=Ot()(regeneratorRuntime.mark(function t(){var e,n,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.observations&&this.observations.length>0&&(this.lockedObservations=this.lockedObservations.filter(function(t){return t.visible}),e=this.observations.find(function(t){return t.top&&Object(Z["h"])(t)}),e&&(this.previousTopLayer&&this.previousTopLayer.visible?e.id!==this.previousTopLayer.id&&(this.lockedObservations=this.lockedObservations.filter(function(t){return t.id!==e.id}),this.lockedObservations.push(this.previousTopLayer),this.previousTopLayer=e):this.previousTopLayer=e),n="undefined"!==typeof this.observations.find(function(t){return t.visible&&!t.loaded}),this.observations.forEach(function(t){if(!t.isContainer){var e=i.findModificationTimestamp(t.id,i.timestamp);i.findLayerById({observation:t,timestamp:e}).then(function(o){if(null!==o){var r=o.founds,s=o.layer;s.setOpacity(t.layerOpacity);var a=t.zIndex;t.top?a=t.zIndexOffset+jt["d"].ZINDEX_TOP:i.lockedObservationsIds.length>0&&i.lockedObservationsIds.includes(t.id)&&(a=s.get("zIndex")-10),n||(s.setZIndex(a),t.visible&&t.top&&Object(Z["h"])(t)&&(null===i.topLayer||i.topLayer.id!=="".concat(t.id,"T").concat(e))?i.setTopLayer({id:"".concat(t.id,"T").concat(e),desc:t.label}):t.visible&&t.top||null===i.topLayer||i.topLayer.id!=="".concat(t.id,"T").concat(e)||i.setTopLayer(null)),r.length>0?t.visible?r.forEach(function(i){i.get("id")==="".concat(t.id,"T").concat(e)?(n||i.setZIndex(a+1),i.setVisible(!0)):-1===t.tsImages.indexOf("T".concat(e))||n||i.setZIndex(a)}):r.forEach(function(t){t.setVisible(!1)}):(console.debug("No multiple layer for observation ".concat(t.id,", refreshing")),s.setVisible(t.visible))}})}}),null===this.topLayer&&this.closePopup());case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),sendSpatialLocation:function(t){if(t){var e=this.wktInstance.writeFeaturesText(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this.sendStompMessage(d["a"].SPATIAL_LOCATION({wktShape:e},this.session).body),this.setCrossingIDL(!1)}},doGeolocation:function(){var t=this;null!==this.geolocationId&&navigator.geolocation.clearWatch(this.geolocationId),this.geolocationId=navigator.geolocation.watchPosition(function(e){t.center=Object(qn["j"])([e.coords.longitude,e.coords.latitude],jt["d"].PROJ_EPSG_4326,jt["d"].PROJ_EPSG_3857),t.stopGeolocation()},function(e){switch(e.code){case e.PERMISSION_DENIED:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break;case e.POSITION_UNAVAILABLE:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break;case e.TIMEOUT:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break;default:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break}},{enableHighAccuracy:!0,maximumAge:3e4,timeout:6e4})},retryGeolocation:function(){this.geolocationIncidence=null,this.doGeolocation()},stopGeolocation:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];navigator.geolocation.clearWatch(this.geolocationId),this.$nextTick(function(){t.waitingGeolocation=!1,e&&t.sendRegionOfInterest()})},closePopup:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!t&&this.mapSelection.locked||(this.setMapSelection(u["c"].EMPTY_MAP_SELECTION),this.popupOverlay.setPosition(void 0))},setMapInfoPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.event,n=void 0===e?null:e,i=t.locked,o=void 0!==i&&i,r=t.layer,s=void 0===r?null:r;if(this.exploreMode||null!==this.topLayer){var a,l;if(null!==n?(a=n.coordinate,o&&(n.preventDefault(),n.stopPropagation())):(o=this.mapSelection.locked,a=this.mapSelection.pixelSelected),null===s){l=this.exploreMode?"".concat(this.observationInfo.id,"T").concat(this.findModificationTimestamp(this.observationInfo.id,this.timestamp)):this.topLayer.id;var d=this.findExistingLayerById(l),h=K()(d,1);s=h[0]}else l=s.get("id");var f=new ui["a"]({id:"cl_".concat(l),source:s.getSource()});this.setMapSelection(c()({pixelSelected:a,timestamp:this.timestamp,layerSelected:f},!this.exploreMode&&{observationId:this.getObservationIdFromLayerId(l)},{locked:o}))}else this.$eventBus.$emit(u["d"].VIEWER_CLICK,n)},needFitMapListener:function(t){var e=this,n=t.mainIdx,i=void 0===n?null:n,o=t.geometry,r=void 0===o?null:o,s=t.withPadding,a=void 0===s||s;null===r&&this.mainViewer.name===u["y"].DATA_VIEWER.name&&this.contextGeometry&&null!==this.contextGeometry&&(r=this.contextGeometry),null!==r?(null!==i&&this.idx===i||(this.storedZoom=this.view.getZoom()),setTimeout(function(){r instanceof Array&&2===r.length?e.view.setCenter(r):e.view.fit(r,{padding:a?[10,10,10,10]:[0,0,0,0],constrainResolution:!1,callback:function(){e.movedWithContext=!1}})},200)):null!==this.storedZoom&&(this.view.setZoom(this.storedZoom),this.storedZoom=null)},observationInfoClosedListener:function(){this.mapSelection.locked||this.closePopup()},sendRegionOfInterestListener:function(){this.sendRegionOfInterest()},findTopLayerFromClick:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],i=[];return this.map.forEachLayerAtPixel(t.pixel,function(t){i[t.getType()]&&i[t.getType()]>t.get("zIndex")||(i[t.getType()]=t.get("zIndex"),n.push({layer:t,type:t.getType()}))},{layerFilter:function(t){return"TILE"!==t.getType()&&(!e||"VECTOR"!==t.getType())}}),n},getObservationIdFromLayerId:function(t){return t&&""!==t?t.substr(0,t.indexOf("T")):t}}),watch:{contextGeometry:function(t,e){this.drawContext(t,e),null!==t||this.movedWithContext||this.needFitMapListener({geometry:e,withPadding:!1}),this.movedWithContext=!1},observations:{handler:function(){var t=this;this.$nextTick(function(){return t.drawObservations()})},deep:!0},timestamp:function(t){var e=this.findModificationTimestamp(null,t);e!==this.lastModificationLoaded&&(this.lastModificationLoaded=e,this.drawObservations())},center:function(){this.view.setCenter(this.center)},mapSelection:function(t){if("undefined"!==typeof t&&null!==t&&null!==t.pixelSelected){if(this.mapSelectionMarker.setPosition(t.pixelSelected),null!==this.topLayer){var e=Object(qn["j"])(t.pixelSelected,"EPSG:3857","EPSG:4326");this.popupContent="<h3>".concat(this.topLayer.desc,'</h3>\n          <div class="mv-popup-separator"></div>\n          <p class="mv-popup-value">').concat(t.value,'</p>\n          <div class="mv-popup-separator"></div>\n          <p class="mv-popup-coord">').concat(e[1].toFixed(6),", ").concat(e[0].toFixed(6),"</p>"),this.popupOverlay.setPosition(t.pixelSelected)}}else this.closePopup(),this.mapSelectionMarker.setPosition(void 0)},hasContext:function(t){this.uploadConfig.refId=this.contextId,t?this.setDrawMode(!1):(this.sendRegionOfInterest(),this.popupOverlay.setPosition(void 0))},topLayer:function(t){null!==t&&this.mapSelection.locked?this.setMapInfoPoint():this.closePopup()}},created:function(){this.waitingGeolocation="geolocation"in navigator&&!Dt["a"].has(u["A"].COOKIE_MAPDEFAULT)},mounted:function(){var t=this;this.baseLayers=jt["a"],this.baseLayers.layers.forEach(function(e){e.get("name")===t.$baseLayer&&(e.setVisible(!0),t.visibleBaseLayer=e);var n=e;n.on("propertychange",function(e){t.visibleBaseLayer=n,"propertychange"===e.type&&"visible"===e.key&&e.target.get(e.key)&&Dt["a"].set(u["A"].COOKIE_BASELAYER,n.get("name"),{expires:30,path:"/"})})});var e=jt["c"].MAPBOX_GOT;e.setVisible(!0);var n=new li["a"]({title:"BaseLayers",layers:this.baseLayers.layers});this.map=new Fe["a"]({view:new ze["a"]({center:this.center,zoom:this.zoom}),layers:n,target:"map".concat(this.idx),loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0}),this.map.on("moveend",this.onMoveEnd),this.map.on("click",function(i){if(window.event.ctrlKey&&window.event.altKey&&window.event.shiftKey){var o=n.getLayersArray().slice(-1)[0];o&&"mapbox_got"===o.get("name")?(n.getLayers().pop(),t.baseLayers.layers.forEach(function(e){e.get("name")===t.$baseLayer&&(e.setVisible(!0),t.visibleBaseLayer=e)})):(n.getLayers().push(e),t.$q.notify({message:t.$t("messages.youHaveGOT"),type:"info",icon:"mdi-information",timeout:1500}))}t.clicksOnMap+=1,setTimeout(Ot()(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:1===t.clicksOnMap&&(n=t.findTopLayerFromClick(i,!1),n.length>0&&n.forEach(function(e){var o=e.layer.get("id");"VECTOR"===e.type?(t.putObservationOnTop(t.getObservationIdFromLayerId(o)),1===n.length&&t.closePopup()):t.topLayer&&o===t.topLayer.id?t.setMapInfoPoint({event:i}):(t.putObservationOnTop(t.getObservationIdFromLayerId(o)),t.setMapInfoPoint({event:i,layer:e.layer}))}),t.clicksOnMap=0);case 1:case"end":return e.stop()}},e)})),300)}),this.map.on("dblclick",function(e){var n=t.findTopLayerFromClick(e);if(1===n.length){var i=n[0].layer.get("id");t.topLayer&&i===t.topLayer.id?t.setMapInfoPoint({event:e,locked:!0}):(t.putObservationOnTop(t.getObservationIdFromLayerId(i)),t.setMapInfoPoint({event:e,locked:!0,layer:n[0].layer})),t.clicksOnMap=0}else console.warn("Multiple layer but must be one")}),this.map.on("contextmenu",function(e){var n=t.findTopLayerFromClick(e,!1);n.length>0&&(t.contextMenuObservationId=t.getObservationIdFromLayerId(n[0].layer.get("id")),e.preventDefault())}),this.view=this.map.getView(),this.proj=this.view.getProjection(),this.map.addLayer(new li["a"]({layers:this.layers})),this.layerSwitcher=new Si.a,this.map.addControl(this.layerSwitcher),this.mapSelectionMarker=new _i({element:document.getElementById("msm-".concat(this.idx)),positioning:"center-center"}),this.map.addOverlay(this.mapSelectionMarker),this.popupOverlay=new _i({element:document.getElementById("mv-popup"),autoPan:!0,autoPanAnimation:{duration:250}}),this.map.addOverlay(this.popupOverlay),this.drawContext(),this.drawObservations(),this.waitingGeolocation&&this.doGeolocation(),this.$eventBus.$on(u["d"].NEED_FIT_MAP,this.needFitMapListener),this.$eventBus.$on(u["d"].OBSERVATION_INFO_CLOSED,this.observationInfoClosedListener),this.$eventBus.$on(u["d"].SEND_REGION_OF_INTEREST,this.sendRegionOfInterestListener),this.$eventBus.$on(u["d"].NEED_LAYER_BUFFER,this.bufferLayerImages)},beforeDestroy:function(){this.$eventBus.$off(u["d"].NEED_FIT_MAP,this.needFitMapListener),this.$eventBus.$off(u["d"].OBSERVATION_INFO_CLOSED,this.observationInfoClosedListener),this.$eventBus.$off(u["d"].SEND_REGION_OF_INTEREST,this.sendRegionOfInterestListener),this.$eventBus.$off(u["d"].NEED_LAYER_BUFFER,this.bufferLayerImages)}}),Oi=Ci,Ti=(n("c612"),Object(x["a"])(Oi,Nn,Ln,!1,null,null,null));Ti.options.__file="MapViewer.vue";var Ii=Ti.exports,Mi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fit gv-container",on:{wheel:t.changeForce}},[0===t.nodes.length?n("q-spinner",{attrs:{color:"mc-main",size:40}}):t._e(),n("q-resize-observable",{on:{resize:t.resize}}),n("d3-network",{ref:"gv-graph-"+t.idx,attrs:{"net-nodes":t.nodes,"net-links":t.links,options:t.options}})],1)},ki=[];Mi._withStripped=!0;var Pi=n("a5b7"),Ai=n.n(Pi),Ni={name:"GraphViewer",components:{D3Network:Ai.a},props:{idx:{type:Number,required:!0}},data:function(){var t=Object.assign({},u["B"]);return t},computed:{observation:function(){var t=this.$store.getters["data/observationsOfViewer"](this.idx);return t.length>0?t[0]:null}},methods:{loadGraph:function(){var t=this,e="".concat("").concat(Pe["c"].REST_SESSION_VIEW,"data/").concat(this.observation.id);Object(Z["c"])("gr_".concat(this.observation.id),e,{params:{format:"NETWORK",outputFormat:"json"}},function(e,n){if(e&&"undefined"!==typeof e.data){var i=e.data,o=i.nodes,r=i.edges;t.nodes=o.map(function(t){return{id:t.id,name:t.label,nodeSym:"~assets/klab-spinner.svg"}}),t.links=r.map(function(t){return{id:t.id,name:t.label,sid:t.source,tid:t.target}}),t.resize()}n()})},resize:function(){var t={w:this.$el.clientWidth,h:this.$el.clientHeight};this.updateOptions("size",t)},changeForce:function(t){if(t.preventDefault(),t&&t.deltaY){var e=this.options.force;if(t.deltaY<0&&e<5e3)e+=50;else{if(!(t.deltaY>0&&e>50))return;e-=50}this.updateOptions("force",e)}},updateOptions:function(t,e){this.options=c()({},this.options,s()({},t,e))},reset:function(){this.selected={},this.linksSelected={},this.nodes=[],this.links=[],this.$set(this.$data,"options",u["B"].options)},viewerClosedListener:function(t){var e=t.idx;e===this.idx&&this.$eventBus.$emit(u["d"].SHOW_NODE,{nodeId:this.observation.id,state:!1})}},watch:{observation:function(t){null!==t&&0===this.nodes.length?this.loadGraph():null===t&&this.reset()}},mounted:function(){this.options.size.w=this.$el.clientWidth,this.options.size.h=this.$el.clientHeight,this.$eventBus.$on(u["d"].VIEWER_CLOSED,this.viewerClosedListener)},beforeDestroy:function(){this.$eventBus.$off(u["d"].VIEWER_CLOSED,this.viewerClosedListener)}},Li=Ni,Ri=(n("6420"),n("9198"),Object(x["a"])(Li,Mi,ki,!1,null,null,null));Ri.options.__file="GraphViewer.vue";var Di=Ri.exports,ji=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Bi=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fit uv-container"},[n("h4",[t._v("Under construction")])])}];ji._withStripped=!0;var Fi={name:"UnknownViewer",props:{idx:{type:Number,required:!0}}},zi=Fi,Vi=(n("1fac"),Object(x["a"])(zi,ji,Bi,!1,null,null,null));Vi.options.__file="UnknownViewer.vue";var Ui=Vi.exports,qi=[],Yi={components:{MapViewer:Ii,GraphViewer:Di,UnknownViewer:Ui},computed:c()({},Object(l["c"])("view",["dataViewers","mainDataViewerIdx","dataViewers"])),methods:c()({},Object(l["b"])("view",["setMainDataViewer"]),{setMain:function(t){this.setMainDataViewer({viewerIdx:t}),this.$eventBus.$emit(u["d"].VIEWER_SELECTED,{idx:t})},closeViewer:function(t){this.setMainDataViewer({viewerIdx:t.idx,viewerType:t.type,visible:!1}),this.$eventBus.$emit(u["d"].VIEWER_CLOSED,{idx:t.idx})},viewerStyle:function(t){return t.main?"":t.type.hideable&&!t.visible?"display: none":(qi.push(t),0===qi.length?"left: 0":"left: ".concat(200*(qi.length-1)+10*(qi.length-1),"px"))},capitalize:function(t){return Object(X["a"])(t)}}),watch:{mainDataViewerIdx:function(){qi=[]},dataViewers:{handler:function(t){var e=this,n=t.length>0?t.find(function(t){return t.main}):null;this.$nextTick(function(){e.$eventBus.$emit(u["d"].NEED_FIT_MAP,c()({},null!==n&&{idx:n.idx}))})},deep:!0}},beforeUpdate:function(){qi=[]},mounted:function(){qi=[]}},$i=Yi,Gi=(n("0bae"),Object(x["a"])($i,Pn,An,!1,null,"715ca161",null));Gi.options.__file="DataViewer.vue";var Hi=Gi.exports,Ki=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-width",attrs:{id:"mc-report-wrapper"}},[n("div",{attrs:{id:"mc-report-content"},domProps:{innerHTML:t._s(t.report)}})])},Wi=[];Ki._withStripped=!0;var Xi={name:"ReportViewer",data:function(){return{report:this.$t("messages.noLoadedReport"),scrollBar:void 0}},computed:c()({},Object(l["c"])("data",["hasContext","contextId","hasObservations"]),Object(l["d"])("view",["reloadReport"])),methods:c()({},Object(l["b"])("view",["setReloadReport"]),{loadReport:function(){var t=this;this.reloadReport&&this.hasContext&&this.hasObservations&&this.$axios.get("".concat("").concat(Pe["c"].REST_SESSION_OBSERVATION,"report/").concat(this.contextId),{}).then(function(e){var n=e.data;""===n&&(console.warn("Empty report"),n=t.$t("messages.emptyReport")),t.report=n,t.setReloadReport(!1)})}}),watch:{reloadReport:function(){this._inactive||this.loadReport()}},activated:function(){this.loadReport()}},Zi=Xi,Qi=(n("d5b4"),Object(x["a"])(Zi,Ki,Wi,!1,null,null,null));Qi.options.__file="ReportViewer.vue";var Ji=Qi.exports,to=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},eo=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fit no-padding with-background",attrs:{id:"dfv-container"}},[n("div",{attrs:{id:"sprotty"}})])}];to._withStripped=!0;n("98db");var no=n("970b"),io=n.n(no),oo=n("5bc30"),ro=n.n(oo),so=n("8449f"),ao=n("42d6"),co=n("e1c6"),lo=0,uo=200,ho=!1,fo=function(){function t(){io()(this,t)}return ro()(t,[{key:"handle",value:function(t){switch(t.kind){case ao["SelectCommand"].KIND:ho=!1,lo=setTimeout(function(){ho||so["b"].$emit(u["d"].GRAPH_NODE_SELECTED,t),ho=!1},uo);break;case ao["ViewportCommand"].KIND:clearTimeout(lo),ho=!0;break;default:console.warn("Unknow action: ".concat(t.kind));break}}},{key:"initialize",value:function(t){t.register(ao["SelectCommand"].KIND,this),t.register(ao["ViewportCommand"].KIND,this)}}]),t}();function po(t){return void 0!==t.source&&void 0!==t.target}function vo(t){return void 0!==t.sources&&void 0!==t.targets}co.decorate(co.injectable(),fo);var mo=function(){function t(){this.nodeIds=new Set,this.edgeIds=new Set,this.portIds=new Set,this.labelIds=new Set,this.sectionIds=new Set,this.isRestored=!1}return t.prototype.transform=function(t){var e,n,i=this,o={type:"graph",id:t.id||"root",children:[]};if(t.restored&&(this.isRestored=!0),t.children){var r=t.children.map(function(t){return i.transformElkNode(t)});(e=o.children).push.apply(e,r)}if(t.edges){var s=t.edges.map(function(t){return i.transformElkEdge(t)});(n=o.children).push.apply(n,s)}return o},t.prototype.transformElkNode=function(t){var e,n,i,o,r=this;this.checkAndRememberId(t,this.nodeIds);var s={type:"node",id:t.id,nodeType:t.id.split(".")[0],position:this.pos(t),size:this.size(t),status:this.isRestored?"processed":"waiting",children:[]};if(t.children){var a=t.children.map(function(t){return r.transformElkNode(t)});(e=s.children).push.apply(e,a)}if(t.ports){var c=t.ports.map(function(t){return r.transformElkPort(t)});(n=s.children).push.apply(n,c)}if(t.labels){var l=t.labels.map(function(t){return r.transformElkLabel(t)});(i=s.children).push.apply(i,l)}if(t.edges){var u=t.edges.map(function(t){return r.transformElkEdge(t)});(o=s.children).push.apply(o,u)}return s},t.prototype.transformElkPort=function(t){this.checkAndRememberId(t,this.portIds);var e={type:"port",id:t.id,position:this.pos(t),size:this.size(t),children:[]};return e},t.prototype.transformElkLabel=function(t){return this.checkAndRememberId(t,this.labelIds),{type:"label",id:t.id,text:t.text,position:this.pos(t),size:this.size(t)}},t.prototype.transformElkEdge=function(t){var e,n,i=this;this.checkAndRememberId(t,this.edgeIds);var o={type:"edge",id:t.id,sourceId:"",targetId:"",routingPoints:[],children:[]};if(po(t)?(o.sourceId=t.source,o.targetId=t.target,t.sourcePoint&&o.routingPoints.push(t.sourcePoint),t.bendPoints&&(e=o.routingPoints).push.apply(e,t.bendPoints),t.targetPoint&&o.routingPoints.push(t.targetPoint)):vo(t)&&(o.sourceId=t.sources[0],o.targetId=t.targets[0],t.sections&&t.sections.forEach(function(t){var e;i.checkAndRememberId(t,i.sectionIds),o.routingPoints.push(t.startPoint),t.bendPoints&&(e=o.routingPoints).push.apply(e,t.bendPoints),o.routingPoints.push(t.endPoint)})),t.junctionPoints&&t.junctionPoints.forEach(function(e,n){var i={type:"junction",id:t.id+"_j"+n,position:e};o.children.push(i)}),t.labels){var r=t.labels.map(function(t){return i.transformElkLabel(t)});(n=o.children).push.apply(n,r)}return o},t.prototype.pos=function(t){return{x:t.x||0,y:t.y||0}},t.prototype.size=function(t){return{width:t.width||0,height:t.height||0}},t.prototype.checkAndRememberId=function(t,e){if(void 0==t.id)throw Error("An element is missing an id.");if(e.has(t.id))throw Error("Duplicate id: "+t.id+".");e.add(t.id)},t}(),go=n("e1c6"),yo=n("393a"),bo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_o={createElement:yo["svg"]},wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bo(e,t),e.prototype.render=function(t,e){var n="elknode "+(t.hoverFeedback?"mouseover ":"")+(t.selected?"selected ":"")+t.status+" elk-"+t.nodeType;return _o.createElement("g",null,_o.createElement("rect",{classNames:n,x:"0",y:"0",width:t.bounds.width,height:t.bounds.height}),e.renderChildren(t))},e}(ao["RectangularNodeView"]),So=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bo(e,t),e.prototype.render=function(t,e){return _o.createElement("g",null,_o.createElement("rect",{"class-elkport":!0,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:t.bounds.width,height:t.bounds.height}),e.renderChildren(t))},e}(ao["RectangularNodeView"]),Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bo(e,t),e.prototype.renderLine=function(t,e,n){for(var i=e[0],o="M "+i.x+","+i.y,r=1;r<e.length;r++){var s=e[r];o+=" L "+s.x+","+s.y}return _o.createElement("path",{"class-elkedge":!0,d:o})},e.prototype.renderAdditionals=function(t,e,n){var i=e[e.length-2],o=e[e.length-1];return[_o.createElement("path",{"class-edge":!0,"class-arrow":!0,d:"M 0,0 L 8,-3 L 8,3 Z",transform:"rotate("+Object(ao["toDegrees"])(Object(ao["angleOfPoint"])({x:i.x-o.x,y:i.y-o.y}))+" "+o.x+" "+o.y+") translate("+o.x+" "+o.y+")"})]},e}(ao["PolylineEdgeView"]),xo=function(){function t(){}return t.prototype.render=function(t,e){return _o.createElement("text",{"class-elklabel":!0},t.text)},t}(),Co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bo(e,t),e.prototype.render=function(t,e){var n=this.getRadius(t);return _o.createElement("g",null,_o.createElement("circle",{"class-elkjunction":!0,r:n}))},e.prototype.getRadius=function(t){return 2},e}(ao["CircularNodeView"]),Oo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oo(e,t),e.prototype.hasFeature=function(e){return e!==ao["moveFeature"]&&t.prototype.hasFeature.call(this,e)},e}(ao["RectangularNode"]),Io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oo(e,t),e.prototype.hasFeature=function(e){return e!==ao["moveFeature"]&&t.prototype.hasFeature.call(this,e)},e}(ao["RectangularPort"]),Mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oo(e,t),e.prototype.hasFeature=function(e){return e!==ao["editFeature"]&&t.prototype.hasFeature.call(this,e)},e}(ao["SEdge"]),ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oo(e,t),e.prototype.hasFeature=function(e){return e!==ao["moveFeature"]&&e!==ao["selectFeature"]&&e!==ao["hoverFeedbackFeature"]&&t.prototype.hasFeature.call(this,e)},e}(ao["SNode"]),Po=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Po(e,t),e.prototype.isExported=function(t){return null!==t.href&&(t.href.endsWith("diagram.css")||t.href.endsWith("sprotty.css"))},e}(ao["SvgExporter"]);function No(t,e){var n=t.needsClientLayout,i=void 0!==n&&n,o=t.needsServerLayout,r=void 0===o?!i:o;void 0===e&&(e="warn");var s="debug"===e?ao["LogLevel"].log:"info"===e?ao["LogLevel"].info:"warn"===e?ao["LogLevel"].warn:"error"===e?ao["LogLevel"].error:ao["LogLevel"].none,a=new go["ContainerModule"](function(t,e,n,o){t(ao["TYPES"].ModelSource).to(ao["LocalModelSource"]).inSingletonScope(),o(ao["TYPES"].ILogger).to(ao["ConsoleLogger"]).inSingletonScope(),o(ao["TYPES"].LogLevel).toConstantValue(s),o(ao["TYPES"].IModelFactory).to(ao["SGraphFactory"]).inSingletonScope(),o(ao["TYPES"].SvgExporter).to(Ao).inSingletonScope();var a={bind:t,unbind:e,isBound:n,rebind:o};Object(ao["configureModelElement"])(a,"graph",ao["SGraph"],ao["SGraphView"]),Object(ao["configureModelElement"])(a,"node",To,wo),Object(ao["configureModelElement"])(a,"port",Io,So),Object(ao["configureModelElement"])(a,"edge",Mo,Eo),Object(ao["configureModelElement"])(a,"label",ao["SLabel"],xo),Object(ao["configureModelElement"])(a,"junction",ko,Co),Object(ao["configureViewerOptions"])(a,{needsClientLayout:i,needsServerLayout:r})}),c=new go["Container"];return c.load(ao["defaultModule"],ao["selectModule"],ao["boundsModule"],ao["moveModule"],ao["fadeModule"],ao["hoverModule"],ao["viewportModule"],ao["exportModule"],ao["edgeEditModule"],a),c}var Lo={name:"DataflowViewer",data:function(){return{graph:null,modelSource:null,actionDispatcher:null,interval:null,processing:!1,visible:!1,needsUpdate:!0}},computed:c()({},Object(l["c"])("data",["dataflow","dataflowStatuses","contextId","session","context"]),Object(l["c"])("view",["leftMenuState"]),{reloadDataflow:{get:function(){return this.$store.state.view.reloadDataflow},set:function(t){this.$store.state.view.reloadDataflow=t}}}),methods:c()({},Object(l["b"])("data",["addDataflow"]),{loadDataflow:function(){var t=this;console.info("Ask for dataflow"),this.$axios.get("".concat("").concat(Pe["c"].REST_SESSION_OBSERVATION,"dataflow/").concat(this.contextId),{}).then(function(e){var n=e.data;if("undefined"!==typeof n.jsonElkLayout&&null!==n.jsonElkLayout)try{var i=JSON.parse(n.jsonElkLayout);i.restored=t.context.restored,t.addDataflow(i)}catch(t){console.error("Error in dataflow layout for the context ".concat(n.taskId,": ").concat(t))}else console.error("Dataflow in task ".concat(n.taskId," has no layout"))})},doGraph:function(){if(null!==this.dataflow)if(this.processing)setTimeout(this.doGraph(),100);else if(this.visible){var t=JSON.parse(JSON.stringify(this.dataflow));this.processing=!0,this.graph=(new mo).transform(t),this.modelSource.setModel(this.graph),this.actionDispatcher.dispatch(new ao["FitToScreenAction"]([])),this.processing=!1,this.reloadDataflow=!1}else this.needsUpdate=!0},updateStatuses:function(){if(this.visible){if(0!==this.dataflowStatuses.length)for(var t=this.dataflowStatuses.length,e=0;e<t;e++){var n=this.dataflowStatuses[e],i=n.id,o=n.status,r=Object(Z["b"])(this.graph,i);null!==r&&(r.status=o,this.modelSource.updateModel())}}else this.needsUpdate=!0},graphNodeSelectedListener:function(t){if(null!==t&&t.selectedElementsIDs){for(var e=t.selectedElementsIDs.length,n=e-1;n>=0;n-=1)this.sendStompMessage(d["a"].DATAFLOW_NODE_DETAILS({nodeId:t.selectedElementsIDs[n],contextId:this.context.id},this.session).body);this.modelSource.updateModel()}}}),watch:{dataflow:function(){null!==this.dataflow&&this.doGraph()},dataflowStatuses:{handler:function(){null!==this.dataflow&&this.updateStatuses()},deep:!0}},mounted:function(){var t=No({needsClientLayout:!1,needsServerLayout:!0},"info");t.bind(ao["TYPES"].IActionHandlerInitializer).to(fo),this.modelSource=t.get(ao["TYPES"].ModelSource),this.actionDispatcher=t.get(ao["TYPES"].IActionDispatcher),this.$eventBus.$on(u["d"].GRAPH_NODE_SELECTED,this.graphNodeSelectedListener)},activated:function(){this.visible=!0,null===this.dataflow?this.loadDataflow():this.needsUpdate&&(this.doGraph(),this.updateStatuses(),this.needsUpdate=!1)},deactivated:function(){this.visible=!1},beforeDestroy:function(){this.$eventBus.$off(u["d"].GRAPH_NODE_SELECTED,this.graphNodeSelectedListener)}},Ro=Lo,Do=(n("7890"),Object(x["a"])(Ro,to,eo,!1,null,null,null));Do.options.__file="DataflowViewer.vue";var jo=Do.exports,Bo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-modal",{ref:"irm-modal-container",attrs:{"no-esc-dismiss":!0,"no-backdrop-dismiss":!0,"content-classes":["irm-container"]},on:{hide:t.cleanInputRequest},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[n("q-tabs",{class:{"irm-tabs-hidden":t.inputRequests.length<=1},attrs:{swipeable:"",animated:"",color:"white"},model:{value:t.selectedRequest,callback:function(e){t.selectedRequest=e},expression:"selectedRequest"}},[t._l(t.inputRequests,function(e){return n("q-tab",{key:e.messageId,class:{"irm-tabs-hidden":t.inputRequests.length<=1},attrs:{slot:"title",name:"request-"+e.messageId},slot:"title"})}),t._l(t.inputRequests,function(e){return n("q-tab-pane",{key:e.messageId,attrs:{name:"request-"+e.messageId}},[n("div",{staticClass:"irm-group"},[n("div",{staticClass:"irm-global-description"},[n("h4",[t._v(t._s(null!==e.sectionTitle?e.sectionTitle:t.$t("label.noInputSectionTitle")))]),n("p",[t._v(t._s(e.description))])]),n("div",{staticClass:"irm-fields-container",attrs:{"data-simplebar":""}},[n("div",{staticClass:"irm-fields-wrapper"},t._l(e.fields,function(i){return n("div",{key:t.getFieldId(i,e.messageId),staticClass:"irm-field"},[t.checkSectionTitle(i.sectionTitle)?n("div",{staticClass:"irm-section-description"},[n("h5",[t._v(t._s(i.sectionTitle))]),n("p",[t._v(t._s(i.sectionDescription))])]):t._e(),n("q-field",{attrs:{label:null!==i.label?i.label:i.id,helper:i.description}},[n(t.capitalizeFirstLetter(i.type)+"InputRequest",{tag:"component",attrs:{name:t.getFieldId(i,e.messageId),initialValue:i.initialValue,values:i.values,range:i.range,numericPrecision:i.numericPrecision,regexp:i.regexp},on:{change:function(n){t.updateForm(t.getFieldId(i,e.messageId),n)}}})],1)],1)}))]),n("div",{staticClass:"irm-buttons"},[n("q-btn",{attrs:{color:"primary",label:t.$t("label.cancelInputRequest")},on:{click:function(n){t.cancelRequest(e)}}}),n("q-btn",{attrs:{color:"mc-main",disable:t.formDataIsEmpty,label:t.$t("label.resetInputRequest")},on:{click:function(n){t.send(e.messageId,!0)}}}),n("q-btn",{attrs:{color:"mc-main",label:t.$t("label.submitInputRequest")},on:{click:function(n){t.send(e.messageId,!1)}}})],1)])])})],2)],1)},Fo=[];Bo._withStripped=!0;n("456d");var zo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-input",{attrs:{color:"mc-main",type:"text",placeholder:t.initialValue,name:t.name,error:t.hasError,clearable:!0,"clear-value":t.initialValue},on:{input:t.emitInput},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})},Vo=[];zo._withStripped=!0;var Uo={name:"TextField",props:{initialValue:{type:String,required:!0},name:{type:String,required:!0}},data:function(){return{value:""}},computed:{hasError:function(){return this.value,!1}},methods:{emitInput:function(t){this.$emit("change",t)}}},qo=Uo,Yo=(n("9d14"),Object(x["a"])(qo,zo,Vo,!1,null,null,null));Yo.options.__file="TextField.vue";var $o=Yo.exports,Go=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-input",{attrs:{color:"mc-main",type:"number",placeholder:t.initialValue,name:t.name,error:t.hasError,clearable:!0,"clear-value":t.initialValue},on:{input:t.emitInput},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})},Ho=[];Go._withStripped=!0;var Ko={name:"NumberField",props:{initialValue:{type:String,required:!0},name:{type:String,required:!0},numericPrecision:{type:Number,default:5},range:{type:String}},data:function(){return{value:""}},computed:{hasError:function(){return this.range,!1}},methods:{emitInput:function(t){var e=this;this.fitValue(),this.$nextTick(function(){e.$emit("change",t)})},fitValue:function(){0!==this.numericPrecision&&(this.value=this.value.toFixed(this.numericPrecision))}}},Wo=Ko,Xo=(n("d6e2"),Object(x["a"])(Wo,Go,Ho,!1,null,null,null));Xo.options.__file="NumberField.vue";var Zo=Xo.exports,Qo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-checkbox",{attrs:{color:"mc-main",name:t.name},on:{input:t.emitInput},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})},Jo=[];Qo._withStripped=!0;var tr={name:"BooleanField",props:{initialValue:{type:String,required:!0},name:{type:String,required:!0}},data:function(){return{checked:"true"===this.initialValue}},methods:{emitInput:function(t){var e=this;this.$nextTick(function(){e.$emit("change",t)})}}},er=tr,nr=(n("bb33"),Object(x["a"])(er,Qo,Jo,!1,null,null,null));nr.options.__file="BooleanField.vue";var ir=nr.exports,or={name:"InputRequestModal",components:{TextInputRequest:$o,NumberInputRequest:Zo,BooleanInputRequest:ir},sectionTitle:void 0,data:function(){return{formData:{},simpleBars:[],selectedRequest:null}},computed:c()({},Object(l["c"])("data",["session"]),Object(l["c"])("view",["hasInputRequests","inputRequests"]),{opened:{set:function(){},get:function(){return this.hasInputRequests}},formDataIsEmpty:function(){return 0===Object.keys(this.formData).length}}),methods:c()({},Object(l["b"])("view",["removeInputRequest"]),{send:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.inputRequests.find(function(e){return e.messageId===t});if("undefined"!==typeof i){var o=i.fields.reduce(function(t,o){if(n)t[e.getFieldId(o)]=o.initialValue;else{var r=e.formData[e.getFieldId(o,i.messageId)];t[e.getFieldId(o)]="undefined"===typeof r||null===r||""===r?o.initialValue:r.toString()}return t},{});this.sendStompMessage(d["a"].USER_INPUT_RESPONSE({messageId:i.messageId,requestId:i.requestId,values:o},this.session).body),this.removeInputRequest(i.messageId)}},cancelRequest:function(t){this.sendStompMessage(d["a"].USER_INPUT_RESPONSE({messageId:t.messageId,requestId:t.requestId,cancelRun:!0,values:{}},this.session).body),this.removeInputRequest(t.messageId)},updateForm:function(t,e){null===e?this.$delete(this.formData,t):this.$set(this.formData,t,e)},capitalizeFirstLetter:function(t){return Object(X["a"])(t)},getFieldId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===e?"".concat(t.functionId,"/").concat(t.id):"".concat(e,"-").concat(t.functionId,"/").concat(t.id)},checkSectionTitle:function(t){return this.$options.sectionTitle!==t&&(this.$options.sectionTitle=t,!0)},cleanInputRequest:function(){this.formData={},this.removeInputRequest(null)}}),watch:{inputRequests:function(){this.inputRequests.length>0&&(this.selectedRequest="request-".concat(this.inputRequests[0].messageId))}}},rr=or,sr=(n("2b54"),Object(x["a"])(rr,Bo,Fo,!1,null,null,null));sr.options.__file="InputRequestModal.vue";var ar=sr.exports,cr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!==t.scaleReference?n("q-dialog",{attrs:{title:t.$t("label.titleChangeScale",{type:t.scaleEditingType===t.SCALE_TYPE.ST_SPACE?t.$t("label.labelSpatial"):t.$t("label.labelTemporal")}),color:"info",cancel:!0,ok:!1},on:{show:t.initValues},scopedSlots:t._u([{key:"buttons",fn:function(e){return[n("q-btn",{attrs:{color:"mc-main",outline:"",label:t.$t("label.appCancel")},on:{click:e.cancel}}),n("q-btn",{attrs:{color:"mc-main",label:t.$t("label.appOK")},on:{click:function(n){t.choose(e.ok)}}})]}}]),model:{value:t.scaleEditing,callback:function(e){t.scaleEditing=e},expression:"scaleEditing"}},[n("div",{attrs:{slot:"body"},slot:"body"},[t.scaleEditingType===t.SCALE_TYPE.ST_SPACE?[n("q-input",{attrs:{type:"number",min:"0",color:"info",autofocus:"",after:[{icon:"warning",error:!0,condition:t.resolutionError}],"stack-label":t.resolutionError?t.$t("messages.changeScaleResolutionError"):t.$t("label.resolutionLabel")},model:{value:t.resolution,callback:function(e){t.resolution=e},expression:"resolution"}})]:t._e(),n("q-select",{attrs:{"float-label":t.$t("label.unitLabel"),color:"info",options:t.typedUnits(t.scaleEditingType)},on:{input:function(e){t.scaleEditingType===t.SCALE_TYPE.ST_TIME&&t.setStartDate()}},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}}),t.scaleEditingType===t.SCALE_TYPE.ST_TIME?[n("div",{staticClass:"row"},[t.unit===t.SCALE_VALUES.DECADE?n("q-input",{staticClass:"col col-4",attrs:{"float-label":t.$t("label.unitDecade"),type:"number",min:"0",max:"90",step:10,color:"mc-main",autofocus:""},on:{input:function(e){t.setStartDate()}},model:{value:t.unitInputs.decade,callback:function(e){t.$set(t.unitInputs,"decade",e)},expression:"unitInputs.decade"}}):t._e(),t.unit===t.SCALE_VALUES.CENTURY||t.unit===t.SCALE_VALUES.DECADE?n("q-input",{class:["col",t.unit===t.SCALE_VALUES.CENTURY?"col-8":"col-4"],attrs:{"float-label":t.$t("label.unitCentury"),type:"number",min:"1",step:1,color:"mc-main",autofocus:""},on:{input:function(e){t.setStartDate()}},model:{value:t.unitInputs.century,callback:function(e){t.$set(t.unitInputs,"century",e)},expression:"unitInputs.century"}}):t._e(),t.unit===t.SCALE_VALUES.MONTH?n("q-select",{staticClass:"col col-4",attrs:{"float-label":t.$t("label.unitMonth"),type:"number",min:"0",color:"mc-main",options:t.monthOptions,autofocus:""},on:{input:function(e){t.setStartDate()}},model:{value:t.unitInputs.month,callback:function(e){t.$set(t.unitInputs,"month",e)},expression:"unitInputs.month"}}):t._e(),t.unit===t.SCALE_VALUES.WEEK?n("q-input",{staticClass:"col col-4",attrs:{"float-label":t.$t("label.unitWeek"),type:"number",min:"1",max:"53",step:1,color:"mc-main",autofocus:""},on:{input:function(e){t.setStartDate(e)}},model:{value:t.unitInputs.week,callback:function(e){t.$set(t.unitInputs,"week",e)},expression:"unitInputs.week"}}):t._e(),t.unit===t.SCALE_VALUES.YEAR||t.unit===t.SCALE_VALUES.MONTH||t.unit===t.SCALE_VALUES.WEEK?n("q-input",{class:{col:t.unit===t.SCALE_VALUES.YEAR,"col-8":t.unit===t.SCALE_VALUES.YEAR,"col-4":t.unit===t.SCALE_VALUES.MONTH||t.unit===t.SCALE_VALUES.WEEK},attrs:{"float-label":t.$t("label.unitYear"),type:"number",min:"0",step:1,color:"mc-main",autofocus:""},on:{input:function(e){t.setStartDate()}},model:{value:t.unitInputs.year,callback:function(e){t.$set(t.unitInputs,"year",e)},expression:"unitInputs.year"}}):t._e(),t.unit===t.SCALE_VALUES.CENTURY||t.unit===t.SCALE_VALUES.DECADE||t.unit===t.SCALE_VALUES.YEAR||t.unit===t.SCALE_VALUES.MONTH||t.unit===t.SCALE_VALUES.WEEK?n("q-input",{staticClass:"col col-4",class:{"scd-inactive-multiplier":t.timeEndModified},attrs:{"float-label":t.$t("label.timeResolutionMultiplier"),type:"number",min:"1",step:1,color:"mc-main"},model:{value:t.timeResolutionMultiplier,callback:function(e){t.timeResolutionMultiplier=e},expression:"timeResolutionMultiplier"}},[t.timeEndModified?n("q-tooltip",{attrs:{offset:[0,15],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("messages.timeEndModified")))]):t._e()],1):t._e()],1),n("q-datetime",{attrs:{color:"mc-main","float-label":t.$t("label.labelTimeStart"),format:t.getFormat(),type:t.unit===t.SCALE_VALUES.HOUR||t.unit===t.SCALE_VALUES.MINUTE||t.unit===t.SCALE_VALUES.SECOND?"datetime":"date",minimal:"",format24h:"","default-view":t.unit===t.SCALE_VALUES.CENTURY||t.unit===t.SCALE_VALUES.DECADE||t.unit===t.SCALE_VALUES.YEAR?"year":"day"},on:{focus:function(e){t.manualInputChange=!0},blur:function(e){t.manualInputChange=!1},input:function(e){t.manualInputChange&&t.initUnitInputs()&&t.calculateEnd()}},model:{value:t.timeStart,callback:function(e){t.timeStart=e},expression:"timeStart"}}),n("q-datetime",{attrs:{color:"mc-main","float-label":t.$t("label.labelTimeEnd"),format:t.getFormat(),type:t.unit===t.SCALE_VALUES.HOUR||t.unit===t.SCALE_VALUES.MINUTE||t.unit===t.SCALE_VALUES.SECOND?"datetime":"date",minimal:"",format24h:"",after:[{icon:"warning",error:!0,condition:t.resolutionError}],"default-view":t.unit===t.SCALE_VALUES.CENTURY||t.unit===t.SCALE_VALUES.DECADE||t.unit===t.SCALE_VALUES.YEAR?"year":"day"},on:{input:t.checkEnd},model:{value:t.timeEnd,callback:function(e){t.timeEnd=e},expression:"timeEnd"}})]:t._e()],2)]):t._e()},lr=[];cr._withStripped=!0;var ur={name:"ScaleChangeDialog",data:function(){return{resolution:null,timeResolutionMultiplier:1,timeStart:null,timeEnd:null,timeEndMod:!1,unit:null,units:u["r"],resolutionError:!1,SCALE_TYPE:u["q"],SCALE_VALUES:u["s"],unitInputs:{century:null,year:null,month:null,week:null},monthOptions:[],timeEndModified:!1,manualInputChange:!1}},computed:c()({},Object(l["c"])("data",["scaleReference","nextScale","hasContext"]),Object(l["c"])("view",["scaleEditingType"]),{scaleEditing:{get:function(){return this.$store.getters["view/isScaleEditing"]},set:function(t){this.$store.dispatch("view/setScaleEditing",{active:t,type:this.scaleEditingType})}},typedUnits:function(){var t=this;return function(e){return t.units.filter(function(t){return t.type===e&&t.selectable}).map(function(e){return c()({},e,{label:t.$t("label.".concat(e.i18nlabel))})})}}}),methods:c()({},Object(l["b"])("data",["updateScaleReference","setNextScale"]),{choose:function(t){if(this.scaleEditingType===u["q"].ST_SPACE&&(""===this.resolution||this.resolution<=0))this.resolutionError=!0;else if(this.scaleEditingType!==u["q"].ST_TIME||this.checkEnd){if(t(),this.resolutionError=!1,this.scaleEditingType===u["q"].ST_SPACE&&(null===this.nextScale&&this.resolution===this.scaleReference.spaceResolutionConverted&&this.unit===this.scaleReference.spaceUnit||null!==this.nextScale&&this.resolution===this.nextScale.spaceResolutionConverted&&this.unit===this.nextScale.spaceUnit)||this.scaleEditingType===u["q"].ST_TIME&&(null===this.nextScale&&this.timeResolutionMultiplier===this.scaleReference.timeResolutionMultiplier&&this.unit===this.scaleReference.timeUnit&&this.timeStart===this.scaleReference.start&&this.timeEnd===this.scaleReference.end||null!==this.nextScale&&this.timeResolutionMultiplier===this.nextScale.timeResolutionMultiplier&&this.unit===this.nextScale.timeUnit&&this.timeStart===this.nextScale.start&&this.timeEnd===this.nextScale.end))return;this.hasContext||this.sendStompMessage(d["a"].SCALE_REFERENCE(c()({scaleReference:this.scaleReference},this.scaleEditingType===u["q"].ST_SPACE&&{spaceResolutionConverted:this.resolution,spaceUnit:this.unit},this.scaleEditingType===u["q"].ST_TIME&&{timeResolutionMultiplier:this.timeResolutionMultiplier,timeUnit:this.unit,start:this.timeStart.getTime(),end:this.timeEnd.getTime()}),this.$store.state.data.session).body),this.updateScaleReference(c()({type:this.scaleEditingType,unit:this.unit},this.scaleEditingType===u["q"].ST_SPACE&&{resolution:this.resolution},this.scaleEditingType===u["q"].ST_TIME&&{timeResolutionMultiplier:this.timeResolutionMultiplier,start:this.timeStart.getTime(),end:this.timeEnd.getTime()},{next:this.hasContext})),this.$q.notify({message:this.$t(this.hasContext?"messages.updateNextScale":"messages.updateScale",{type:this.scaleEditingType.charAt(0).toUpperCase()+this.scaleEditingType.slice(1)}),type:"info",icon:"mdi-information",timeout:2e3})}else this.resolutionError=!0},setStartDate:function(t){switch(this.unit){case u["s"].CENTURY:this.timeStart=new Date(0,0,1),this.timeStart.setFullYear(100*(this.unitInputs.century-1));break;case u["s"].DECADE:this.timeStart=new Date(0,0,1),this.timeStart.setFullYear(100*(this.unitInputs.century-1)+this.unitInputs.decade);break;case u["s"].YEAR:this.timeStart=new Date(0,0,1),this.timeStart.setFullYear(this.unitInputs.year);break;case u["s"].MONTH:this.timeStart=new Date(0,this.unitInputs.month,1),this.timeStart.setFullYear(this.unitInputs.year);break;case u["s"].WEEK:t>53?this.unitInputs.week=It()(this.timeStart).week():(this.timeStart=new Date(0,0,1+7*(this.unitInputs.week-1)),this.timeStart.setFullYear(this.unitInputs.year));break;default:break}this.initUnitInputs(),this.calculateEnd()},calculateEnd:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=u["r"].find(function(e){return e.value===t.unit});this.timeEnd=It()(this.timeStart).add(this.timeResolutionMultiplier*n.momentMultiplier-(1!==n.momentMultiplier?1:0),n.momentShorthand).toDate(),this.$nextTick(function(){t.timeEndModified=e})},checkEnd:function(){this.timeEnd<=this.timeStart?this.$q.notify({message:this.$t("messages.timeEndBeforeTimeStart"),type:"info",icon:"mdi-information",timeout:2e3}):this.calculateEnd(!0)},getFormat:function(){switch(this.unit){case u["s"].CENTURY:case u["s"].DECADE:case u["s"].YEAR:case u["s"].MONTH:case u["s"].WEEK:return"DD/MM/YYYY";case u["s"].DAY:case u["s"].HOUR:return"DD/MM/YYYY HH:mm";case u["s"].MINUTE:case u["s"].SECOND:return"DD/MM/YYYY HH:mm:ss";case u["s"].MILLISECOND:return"DD/MM/YYYY HH:mm:ss:SSS";default:return"DD/MM/YYYY HH:mm:ss"}},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dddd, MMMM Do YYYY, h:mm:ss a";return t&&null!==t?It()(t).format(e):""},initValues:function(){var t=null!==this.nextScale?this.nextScale:null!==this.scaleReference?this.scaleReference:null;null!==t&&(this.resolution=t.spaceResolutionConverted,this.unit=this.scaleEditingType===u["q"].ST_SPACE?t.spaceUnit:null!==t.timeUnit?t.timeUnit:u["s"].YEAR,this.timeResolutionMultiplier=0!==t.timeResolutionMultiplier?t.timeResolutionMultiplier:1,this.timeStart=0!==t.start?new Date(t.start):new Date,this.calculateEnd()),this.initUnitInputs()},initUnitInputs:function(){var t=this.timeStart?It()(this.timeStart):It()();this.unitInputs.century=Math.floor(t.year()/100)+1,this.unitInputs.decade=10*Math.floor(t.year()/10)-100*Math.floor(t.year()/100),this.unitInputs.year=t.year(),this.unitInputs.month=t.month(),this.unitInputs.week=t.week()}}),watch:{timeResolutionMultiplier:function(t,e){t<1?this.timeResolutionMultiplier=e:this.calculateEnd()}},created:function(){for(var t=0;t<12;t++)this.monthOptions.push({label:this.$t("label.months.m".concat(t)),value:t})}},dr=ur,hr=(n("c998"),Object(x["a"])(dr,cr,lr,!1,null,null,null));hr.options.__file="ScaleChangeDialog.vue";var fr=hr.exports,pr=n("b8ea"),vr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelp,expression:"showHelp"}],staticClass:"modal fullscreen",attrs:{id:"modal-show-help"}},[n("div",{staticClass:"modal-backdrop absolute-full"}),n("div",{ref:"kp-help-container",staticClass:"kp-help-container",style:{width:t.modalSize.width+"px",height:t.modalSize.height+"px",transform:"translate(-50%, -50%) scale("+t.scale+", "+t.scale+") !important"}},[n("div",{ref:"kp-help-inner",staticClass:"kp-help-inner"},[n("div",{staticClass:"kp-help-content full-height"},[n("div",{staticClass:"kp-help-titlebar"},t._l(t.presentations,function(e,i){return n("div",{key:"kp-pres-"+i,staticClass:"kp-link",class:{"kp-link-current":i===t.activeSectionIndex},attrs:{id:"kp-pres-"+i},on:{click:function(e){i!==t.activeSectionIndex&&t.loadPresentation(i)}}},[n("span",[t._v(t._s(e.linkTitle))])])})),t.presentationBlocked?t._e():n("q-carousel",{ref:"kp-carousel",staticClass:"kp-carousel full-height",attrs:{color:"white","no-swipe":""},on:{"slide-trigger":t.initStack}},t._l(t.activePresentation,function(e,i){return n("q-carousel-slide",{key:"kp-slide-"+i,staticClass:"kp-slide full-height"},[n("div",{staticClass:"kp-main-content"},[e.stack.layers&&e.stack.layers.length>0?n("klab-stack",{ref:"kp-stack",refInFor:!0,attrs:{presentation:t.presentations[t.activeSectionIndex],"owner-index":i,maxOwnerIndex:t.activePresentation.length,stack:e.stack,"on-top":t.currentSlide===i},on:{stackend:t.stackEnd}}):n("div",[t._v("No slides")]),e.title?n("div",{staticClass:"kp-main-title",domProps:{innerHTML:t._s(e.title)}}):t._e()],1)])}))],1),n("div",{staticClass:"kp-nav-tooltip",class:{visible:""!==t.tooltipTitle},domProps:{innerHTML:t._s(t.tooltipTitle)}}),n("div",{staticClass:"kp-navigation"},[n("div",{staticClass:"kp-nav-container"},t._l(t.activePresentation,function(e,i){return n("div",{key:"kp-nav-"+i,staticClass:"kp-navnumber-container",on:{click:function(e){t.goTo(i,0)},mouseover:function(n){t.showTitle(e.title)},mouseleave:function(e){t.showTitle("")}}},[n("div",{staticClass:"kp-nav-number",class:{"kp-nav-current":t.currentSlide===i}},[t._v(t._s(i+1))])])}))]),n("div",{staticClass:"kp-btn-container"},[n("q-checkbox",{staticClass:"kp-checkbox",attrs:{"keep-color":!0,color:"grey-8",label:t.$t("label.rememberDecision"),"left-label":!0},model:{value:t.remember,callback:function(e){t.remember=e},expression:"remember"}})],1),n("q-btn",{directives:[{name:"show",rawName:"v-show",value:1!==t.scale,expression:"scale !== 1"}],staticClass:"kp-icon-refresh-size",attrs:{icon:"mdi-refresh",color:"mc-main",size:"md",title:t.$t("label.refreshSize"),round:"",flat:""},on:{click:t.refreshSize}}),n("q-btn",{staticClass:"kp-icon-close-popover",attrs:{icon:"mdi-close-circle-outline",color:"grey-8",size:"md",title:t.$t("label.appClose"),round:"",flat:""},on:{click:t.hideHelp}})],1),t.waitForPresentation||t.presentationBlocked?n("div",{staticClass:"kp-help-inner",class:{"modal-backdrop":!t.presentationBlocked&&t.waitForPresentation}},[t.presentationBlocked?n("div",{staticClass:" kp-no-presentation"},[n("div",{staticClass:"fixed-center text-center"},[n("div",{staticClass:"kp-np-content",domProps:{innerHTML:t._s(t.$t("messages.presentationBlocked"))}}),n("q-btn",{attrs:{flat:"","no-caps":"",icon:"mdi-refresh",label:t.$t("label.appRetry")},on:{click:t.initPresentation}})],1)]):t.waitForPresentation?n("q-spinner",{staticClass:"fixed-center",attrs:{color:"mc-yellow",size:40}}):t._e()],1):t._e()])])},mr=[];vr._withStripped=!0;n("55dd"),n("28a5");var gr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.layers.length>0?n("div",{ref:"ks-stack-container",staticClass:"ks-stack-container"},[t._l(t.layers,function(e,i){return n("div",{key:"ks-layer-"+i,ref:"ks-layer",refInFor:!0,staticClass:"ks-layer",class:{"ks-top-layer":t.selectedLayer===i,"ks-hide-layer":t.selectedLayer!==i},style:{"z-index":t.selectedLayer===i?9999:t.layers.length-i},attrs:{id:"ks-layer-"+t.ownerIndex+"-"+i}},[e.image?n("div",{staticClass:"ks-layer-image",class:t.elementClasses(e.image),style:t.elementStyle(e.image)},[n("img",{style:{width:e.image.width||"auto",height:e.image.height||"auto","max-width":t.imgMaxSize.width,"max-height":t.imgMaxSize.height},attrs:{src:t.getImage(e),alt:e.image.alt||e.title||e.text,title:e.image.alt||e.title||e.text,id:"ks-image-"+t.ownerIndex+"-"+i}})]):t._e(),e.title||e.text?n("div",{staticClass:"ks-layer-caption",class:t.elementClasses(e.textDiv),style:t.elementStyle(e.textDiv)},[e.title?n("div",{staticClass:"ks-caption-title",domProps:{innerHTML:t._s(t.rewriteImageUrl(e.title))}}):t._e(),e.text?n("div",{staticClass:"ks-caption-text",style:{"text-align":e.textAlign||"left"},domProps:{innerHTML:t._s(t.rewriteImageUrl(e.text))}}):t._e()]):t._e()])}),n("div",{staticClass:"ks-navigation",class:{"ks-navigation-transparent":null!==t.animation}},[n("q-btn",{attrs:{id:"ks-prev",disable:!t.hasPrevious,"text-color":"grey-8",icon:"mdi-chevron-left",round:"",flat:"",dense:"",title:t.$t("label.appPrevious")},on:{click:t.previous}}),n("q-btn",{attrs:{id:"ks-play-stop",disable:!t.hasNext,"text-color":"grey-8",icon:null===t.animation?"mdi-play":"mdi-pause",round:"",flat:"",dense:"",title:null===t.animation?t.$t("label.appPlay"):t.$t("label.appPause")},on:{click:function(e){null===t.animation?t.playStack():t.stopStack()}}}),n("q-btn",{attrs:{id:"ks-replay",disable:!t.isGif,"text-color":"grey-8",icon:"mdi-reload",round:"",flat:"",dense:"",title:t.$t("label.appReplay")},on:{click:function(e){t.refreshLayer(t.layers[t.selectedLayer])}}}),n("q-btn",{attrs:{id:"ks-next",disable:!t.hasNext,"text-color":"grey-8",icon:"mdi-chevron-right",round:"",flat:"",dense:"",title:t.$t("label.appNext")},on:{click:t.next}})],1)],2):t._e()},yr=[];gr._withStripped=!0;n("aef6");var br={name:"KlabStack",props:{presentation:{type:Object,required:!0},ownerIndex:{type:Number,required:!0},maxOwnerIndex:{type:Number,required:!0},stack:{type:Object,required:!0},onTop:{type:Boolean,default:!1}},data:function(){return{selectedLayer:0,animation:null,layers:this.stack.layers,animated:"undefined"!==typeof this.stack.animated&&this.stack.animated,autostart:"undefined"!==typeof this.stack.autostart?this.stack.autostart:0===this.ownerIndex,duration:this.stack.duration||5e3,infinite:"undefined"!==typeof this.stack.infinite&&this.stack.infinite,initialSize:{},scale:1,imgMaxSize:{width:"auto",height:"auto"}}},computed:{hasPrevious:function(){return this.selectedLayer>0||this.ownerIndex>0||this.infinite},hasNext:function(){return this.selectedLayer<this.layers.length-1||this.ownerIndex<this.maxOwnerIndex-1||this.infinite},modalSize:function(){return this.$store.state.view.modalSize},isGif:function(){var t=this.layers[this.selectedLayer];return!!t&&t.image&&t.image.url.endsWith(".gif")},helpBaseUrl:function(){return this.$store.state.view.helpBaseUrl},baseUrl:function(){return"".concat(this.helpBaseUrl,"/").concat(this.presentation.baseFolder)}},methods:{initStack:function(){this.selectedLayer=0,this.stopStack(),this.animated="undefined"!==typeof this.stack.animated&&this.stack.animated,this.animated&&this.onTop&&this.playStack()},playStack:function(){var t=this.layers[this.selectedLayer];this.animated=!0,t.image&&-1!==t.image.url.indexOf(".gif")&&this.reloadGif(t),this.setAnimation(t.duration||this.duration)},stopStack:function(){null!==this.animation&&(clearTimeout(this.animation),this.animation=null,this.animated=!1)},refreshLayer:function(t){this.animated?(this.stopStack(),this.playStack()):this.reloadGif(t)},goTo:function(t){"last"===t&&(t=this.layers.length-1),this.selectedLayer=t,this.animated&&this.playStack()},next:function(){if(this.selectedLayer<this.layers.length-1)this.goTo(this.selectedLayer+1);else{if(!this.infinite)return this.$emit("stackend",{index:this.ownerIndex,direction:1}),!1;this.goTo(0),this.$emit("stackend",{index:this.ownerIndex,direction:1})}return!0},previous:function(){this.selectedLayer>0?this.goTo(this.selectedLayer-1):this.infinite?this.goTo(this.layers.length-1):this.$emit("stackend",{index:this.ownerIndex,direction:-1})},reloadGif:function(t){var e=document.getElementById("ks-image-".concat(this.ownerIndex,"-").concat(this.selectedLayer));e&&(e.src=this.getImage(t))},setAnimation:function(t){if(this.hasNext){var e=this;null!==this.animation&&(clearTimeout(this.animation),this.animation=null),this.animation=setTimeout(function(){e.next()},t)}},getImage:function(t){return t.image?"".concat(this.baseUrl,"/").concat(t.image.url,"?t=").concat(Math.random()):""},rewriteImageUrl:function(t){return t&&t.length>0&&-1!==t.indexOf("<img")?t.replace(/src="/g,'src="'.concat(this.baseUrl,"/")):t},elementStyle:function(t){if("undefined"===typeof t)return{};var e=c()({},t.position,t.style,t.width&&{width:t.width},t.height&&{height:t.height});return e},elementClasses:function(t){return"undefined"===typeof t?[]:t.position?[]:["ks-".concat(t.hAlign||"center"),"ks-".concat(t.vAlign||"middle")]}},watch:{presentation:function(){this.layers=this.stack.layers,this.animated="undefined"!==typeof this.stack.animated&&this.stack.animated,this.autostart="undefined"!==typeof this.stack.autostart?this.stack.autostart:0===this.ownerIndex,this.duration=this.stack.duration||5e3,this.infinite="undefined"!==typeof this.stack.infinite&&this.stack.infinite,this.initStack()},modalSize:function(){var t=this;this.$nextTick(function(){setTimeout(function(){var e=t.$refs["ks-layer"][0],n="".concat(e.clientWidth,"px"),i="".concat(e.clientHeight,"px");t.imgMaxSize={width:n,height:i}},200)})},onTop:function(t){t&&this.initStack()}},mounted:function(){this.autostart&&this.initStack()}},_r=br,wr=(n("9417"),Object(x["a"])(_r,gr,yr,!1,null,null,null));wr.options.__file="KlabStack.vue";var Sr=wr.exports,Er=n("f2e8"),xr=n.n(Er),Cr={name:"KlabPresentation",components:{KlabStack:Sr},data:function(){return{presentations:[],presentationsLoading:!1,activeSectionIndex:-1,needHelp:!1,remember:!1,topLayer:[],modal:!1,carouselEl:void 0,initialSize:void 0,scale:1,tooltipTitle:"",activePresentation:[],url:void 0,presentationBlocked:null}},computed:c()({},Object(l["c"])("stomp",["connectionUp"]),Object(l["c"])("view",["isInModalMode","modalSize"]),{waitForPresentation:function(){return"undefined"===typeof this.initialSize||-1===this.activeSectionIndex},helpBaseUrl:function(){return this.$store.state.view.helpBaseUrl},currentSlide:function(){return this.carouselEl?this.carouselEl.slide:-1},waitingGeolocation:function(){return this.$store.state.view.waitingGeolocation},showHelp:{get:function(){return this.connectionUp&&!this.waitingGeolocation&&this.needHelp&&!this.isInModalMode},set:function(t){this.needHelp=t}}}),methods:c()({},Object(l["b"])("view",["setModalSize"]),{hideHelp:function(){this.needHelp=!1},initStack:function(t,e){var n=this.$refs["kp-stack"][t];"undefined"!==typeof n&&n.stopStack();var i=this.$refs["kp-stack"][e];"undefined"!==typeof i&&i.initStack()},goTo:function(t,e){var n=this,i=this.$refs["kp-carousel"];"undefined"!==typeof i&&i.goToSlide(t),this.$nextTick(function(){var i=n.$refs["kp-stack"][t];"undefined"!==typeof i&&i.goTo(e)})},helpNeededEvent:function(){this.needHelp=!0},stackEnd:function(t){var e=t.index,n=t.direction;n>0?e<this.activePresentation.length-1?this.goTo(e+1,0):this.goTo(0,0):n<0&&e>0&&this.goTo(e-1,"last")},refreshSize:function(){this.initialSize=void 0,this.onResize()},onResize:function(){var t=this;setTimeout(function(){if("undefined"===typeof t.initialSize){var e=window.innerWidth,n=window.innerHeight;t.initialSize={width:e,height:n}}if(t.scale=Math.min(window.innerWidth/t.initialSize.width,window.innerHeight/t.initialSize.height),1===t.scale){var i=window.innerWidth*u["i"].DEFAULT_WIDTH_PERCENTAGE/100,o=i/u["i"].DEFAULT_PROPORTIONS.width*u["i"].DEFAULT_PROPORTIONS.height,r=window.innerHeight*u["i"].DEFAULT_HEIGHT_PERCENTAGE/100,s=r/u["i"].DEFAULT_PROPORTIONS.height*u["i"].DEFAULT_PROPORTIONS.width;i<s?t.setModalSize({width:i,height:o}):t.setModalSize({width:s,height:r})}},500)},showTitle:function(t){this.tooltipTitle=t},loadPresentation:function(t){var e=this;this.presentationBlocked||(this.presentations[t]&&(this.activePresentation=this.presentations[t].slides,this.activeSectionIndex=t),this.$nextTick(function(){e.carouselEl=e.$refs["kp-carousel"],e.carouselEl.goToSlide(0),e.$el.querySelectorAll(".internal-link").forEach(function(t){var n=t.getAttribute("rel").split("-"),i=K()(n,2),o=i[0],r=i[1];t.addEventListener("click",function(){e.goTo(parseInt(o,10),parseInt(r,10))})}),e.onResize()}))},initPresentation:function(){var t=this,e=this;this.presentationsLoading=!0;try{xr()("".concat(this.helpBaseUrl,"/index.php"),{param:"callback",timeout:5e3},function(n,i){if(n)console.error("Error loading presentation: ".concat(n.message)),t.presentationsLoading=!1,t.presentationBlocked=n;else{t.presentationBlocked=null;var o=i;if(o&&o.length>0){var r=0;o.forEach(function(n,i){r+=1,xr()("".concat(t.helpBaseUrl,"/index.php?sec=").concat(n.id),{param:"callback"},function(o,s){o?console.error(o.message):e.presentations.push({id:n.id,baseFolder:n.baseFolder,linkTitle:n.name,linkDescription:n.description,slides:s,index:i}),r-=1,0===r&&(t.presentationsLoading=!1,t.presentations.sort(function(t,e){return t.index-e.index}))})})}}})}catch(t){console.error("Error loading presentation: ".concat(t.message)),this.presentationsLoading=!1,this.presentationBlocked=t}}}),watch:{showHelp:function(t){this.$store.state.view.helpShown=t,t&&!this.presentationsLoading&&this.loadPresentation(0)},presentationsLoading:function(t){!t&&this.showHelp&&this.loadPresentation(0)},remember:function(t){t?Dt["a"].set(u["A"].COOKIE_HELP_ON_START,!1,{expires:30,path:"/"}):Dt["a"].remove(u["A"].COOKIE_HELP_ON_START)}},created:function(){this.initPresentation()},mounted:function(){this.needHelp=!Dt["a"].has(u["A"].COOKIE_HELP_ON_START),this.remember=!this.needHelp,this.$eventBus.$on(u["d"].NEED_HELP,this.helpNeededEvent),window.addEventListener("resize",this.onResize)},beforeDestroy:function(){this.$eventBus.$off(u["d"].NEED_HELP,this.helpNeededEvent),window.removeEventListener("resize",this.onResize)}},Or=Cr,Tr=(n("edad"),Object(x["a"])(Or,vr,mr,!1,null,null,null));Tr.options.__file="KlabPresentation.vue";var Ir=Tr.exports,Mr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-height",attrs:{id:"lm-container"}},[n("div",{staticClass:"full-height klab-lm-panel",style:{width:t.LEFTMENU_VISIBILITY.LEFTMENU_MINSIZE+"px"},attrs:{id:"lm-actions"}},[n("div",{attrs:{id:"spinner-leftmenu-container"}},[n("div",{style:{"border-color":t.hasTasks()?t.spinnerColor.color:"white"},attrs:{id:"spinner-leftmenu-div"}},[n("klab-spinner",{attrs:{id:"spinner-leftmenu","store-controlled":!0,size:40,ball:22,wrapperId:"spinner-leftmenu-div"},nativeOn:{touchstart:function(e){t.handleTouch(e,t.askForSuggestion)}}})],1)]),t.hasContext?[n("div",{staticClass:"lm-separator"}),n("main-actions-buttons",{attrs:{orientation:"vertical","separator-class":"lm-separator"}}),n("div",{staticClass:"lm-separator"})]:t._e(),n("div",{staticClass:"klab-button klab-action",class:[{active:t.logShowed}],on:{click:t.logAction}},[n("q-icon",{attrs:{name:"mdi-console"}},[n("q-tooltip",{attrs:{offset:[0,8],self:"top left",anchor:"bottom left"}},[t._v(t._s(t.logShowed?t.$t("tooltips.hideLogPane"):t.$t("tooltips.showLogPane")))])],1)],1),n("div",{staticClass:"lm-separator"}),n("div",{style:{width:t.LEFTMENU_VISIBILITY.LEFTMENU_MINSIZE+"px"},attrs:{id:"lm-bottom-menu"}},[n("div",{staticClass:"lm-separator"}),n("scale-buttons",{attrs:{docked:!0}}),n("div",{staticClass:"lm-separator"}),n("div",{attrs:{id:"lm-bottom-buttons"}},[n("stop-actions-buttons")],1)],1)],2),t.maximized?n("div",{staticClass:"full-height klab-lm-panel",style:{width:t.LEFTMENU_VISIBILITY.LEFTMENU_MAXSIZE-t.LEFTMENU_VISIBILITY.LEFTMENU_MINSIZE+"px"},attrs:{id:"lm-content"}},[n("div",{staticClass:"full-height",attrs:{id:"lm-content-container"}},[n("keep-alive",[n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[n(t.leftMenuContent,{tag:"component",staticClass:"lm-component"})],1)],1)],1)]):t._e()])},kr=[];Mr._withStripped=!0;var Pr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-height",class:{"dmc-dragging":t.dragging,"dmc-large-mode":t.searchIsFocused&&t.largeMode>0},attrs:{id:"dmc-container"}},[n("klab-breadcrumbs"),n("klab-search-bar",{directives:[{name:"draggable",rawName:"v-draggable",value:t.dragMCConfig,expression:"dragMCConfig"}],ref:"klab-search-bar-docked"}),n("div",{staticClass:"q-card-main full-height",class:{"dmc-dragging":t.dragging,"dmc-loading":t.taskOfContextIsAlive},attrs:{id:"dmc-tree"}},[n("klab-tree-pane")],1),t.contextHasTime?n("observations-timeline",{staticClass:"dmc-timeline"}):t._e()],1)},Ar=[];Pr._withStripped=!0;var Nr=y["b"].width,Lr={name:"KlabDockedMainControl",components:{KlabSearchBar:$t,KlabBreadcrumbs:Zt,ObservationsTimeline:un,KlabTreePane:We},directives:{Draggable:g},data:function(){var t=this;return{dragMCConfig:{onPositionChange:Object(b["a"])(function(e,n){t.onDebouncedPositionChanged(n)},100),onDragStart:function(){t.dragging=!0},onDragEnd:this.checkUndock,fingers:2,noMove:!0},askForUndocking:!1,draggableElementWidth:0,dragging:!1}},computed:c()({},Object(l["c"])("data",["contextHasTime"]),Object(l["c"])("view",["largeMode"]),Object(l["c"])("stomp",["taskOfContextIsAlive"])),methods:c()({},Object(l["b"])("view",["searchIsFocused","setMainViewer"]),{onDebouncedPositionChanged:function(t){this.dragging&&(t&&t.left>this.undockLimit?this.askForUndocking=!0:this.askForUndocking=!1,this.$eventBus.$emit(u["d"].ASK_FOR_UNDOCK,this.askForUndocking))},checkUndock:function(){var t=this;this.$nextTick(function(){t.askForUndocking&&(t.askForUndocking=!1,t.setMainViewer(u["y"].DATA_VIEWER)),t.$eventBus.$emit(u["d"].ASK_FOR_UNDOCK,!1),t.dragging=!1})}}),mounted:function(){this.undockLimit=Nr(document.getElementById("dmc-container"))/3}},Rr=Lr,Dr=(n("c7c3"),Object(x["a"])(Rr,Pr,Ar,!1,null,null,null));Dr.options.__file="KlabDockedMainControl.vue";var jr=Dr.exports,Br=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"klab-menu-component full-height dip-container"},[n("div",{staticClass:"dip-close"},[n("q-btn",{staticClass:"no-padding",attrs:{flat:"",round:"",size:"sm",icon:"mdi-close"},nativeOn:{click:function(e){return t.closePanel(e)}}})],1),null!==t.dataflowInfo?n("div",{attrs:{id:"dip-scroll-container"}},[n("div",{staticClass:"dip-content",domProps:{innerHTML:t._s(t.dataflowInfo.html)}})]):n("div",[t._v(t._s(t.$t("messages.noDataflowInfo")))]),null!==t.dataflowInfo&&t.dataflowInfo.rateable?n("div",[n("div",{staticClass:"dip-comment"},[n("q-icon",{attrs:{size:"1.2em",name:"mdi-comment",color:"grey-8"},nativeOn:{click:function(e){return t.activateComment(e)}}},[n("q-tooltip",{attrs:{offset:[0,8],self:"top left",anchor:"bottom left"}},[t._v(t._s(t.$t("tooltips.commentIt")))])],1)],1),n("div",{staticClass:"dip-rating"},[n("klab-q-rating",{attrs:{max:5,color:"white",customIcon:"klab-font klab-im-logo",size:"18px"},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}}),n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.rateIt")))])],1)]):t._e(),n("q-dialog",{attrs:{color:"info"},on:{ok:t.commentOk,show:function(e){t.$refs["dpi-comment-input"].focus()}},scopedSlots:t._u([{key:"buttons",fn:function(e){return[n("q-btn",{attrs:{color:"info",outline:"",label:t.$t("label.appCancel")},on:{click:e.cancel}}),n("q-btn",{attrs:{color:"info",label:t.$t("label.sendComment")},on:{click:e.ok}})]}}]),model:{value:t.commentOpen,callback:function(e){t.commentOpen=e},expression:"commentOpen"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("label.titleCommentResource")))]),n("div",{attrs:{slot:"body"},slot:"body"},[n("q-input",{ref:"dpi-comment-input",attrs:{type:"textarea",color:"info"},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}})],1)])],1)},Fr=[];Br._withStripped=!0;var zr=n("b18c"),Vr=n("177b"),Ur={name:"KlabQIcon",extends:ot["a"],props:{customIcon:{type:String,default:""}},render:function(t){return t("i",{staticClass:"q-icon",class:this.customIcon.concat(this.classes),style:this.style,attrs:{"aria-hidden":!0}},[this.content,this.$slots.default])}},qr={name:"KlabQRating",props:{value:Number,max:{type:Number,default:5},icon:String,customIcon:{type:String,default:""},color:String,size:String,readonly:Boolean,disable:Boolean},data:function(){return{mouseModel:0}},computed:{model:{get:function(){return this.value},set:function(t){var e=this;this.$emit("input",t),this.$nextTick(function(){JSON.stringify(t)!==JSON.stringify(e.value)&&e.$emit("change",t)})}},editable:function(){return!this.readonly&&!this.disable},classes:function(){var t=[];return this.disable&&t.push("disabled"),this.editable&&t.push("editable"),this.color&&t.push("text-".concat(this.color)),t}},methods:{set:function(t){if(this.editable){var e=Object(Vr["a"])(parseInt(t,10),1,this.max);this.model=this.model===e?0:e,this.mouseModel=0}},__setHoverValue:function(t){this.editable&&(this.mouseModel=t)}},render:function(t){for(var e=this,n=[],i=this.editable?0:-1,o=function(o){n.push(t("span",{key:o,ref:"rt".concat(o),attrs:{tabindex:i},on:{keydown:function(t){switch(Object(zr["a"])(t)){case 13:case 32:return e.set(o),Object(zr["g"])(t);case 37:case 40:return e.$refs["rt".concat(o-1)]&&e.$refs["rt".concat(o-1)].focus(),Object(zr["g"])(t);case 39:case 38:return e.$refs["rt".concat(o+1)]&&e.$refs["rt".concat(o+1)].focus(),Object(zr["g"])(t);default:return null}}}},[t(Ur,{props:{name:e.icon||null!==e.customClasses?"":e.$q.icon.rating.icon,customIcon:e.customIcon},class:{active:!e.mouseModel&&e.model>=o||e.mouseModel&&e.mouseModel>=o,exselected:e.mouseModel&&e.model>=o&&e.mouseModel<o,hovered:e.mouseModel===o},attrs:{tabindex:-1},nativeOn:{click:function(){return e.set(o)},mouseover:function(){return e.__setHoverValue(o)},mouseout:function(){e.mouseModel=0},focus:function(){return e.__setHoverValue(o)},blur:function(){e.mouseModel=0}}})]))},r=1;r<=this.max;r++)o(r);return t("div",{staticClass:"q-rating row inline items-center",class:this.classes,style:this.size?"font-size: ".concat(this.size):""},n)}},Yr={name:"DataflowInfoPane",components:{KlabQRating:qr},data:function(){return{commentOpen:!1,commentContent:""}},computed:c()({},Object(l["c"])("data",["dataflowInfo","contextId"]),Object(l["c"])("view",["mainViewer"]),{rating:{set:function(t){this.$store.commit("data/SET_DATAFLOW_INFO",c()({},this.dataflowInfo,{rating:t})),this.changeDataflowRating()},get:function(){return null!==this.dataflowInfo?this.dataflowInfo.rating:-1}}}),methods:c()({},Object(l["b"])("view",["setLeftMenuState","setLeftMenuContent","setModalMode"]),{activateComment:function(){this.commentContent="",this.commentOpen=!0},changeDataflowRating:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.sendStompMessage(d["a"].DATAFLOW_NODE_RATING({nodeId:this.dataflowInfo.elementId,contextId:this.contextId,rating:this.dataflowInfo.rating,comment:t},this.session).body)},commentOk:function(){this.changeDataflowRating(this.commentContent),this.$q.notify({message:this.$t("messages.thankComment"),type:"info",icon:"mdi-information",timeout:1e3})},closePanel:function(){this.setLeftMenuContent(this.mainViewer.leftMenuContent),this.setLeftMenuState(this.mainViewer.leftMenuState)}}),watch:{commentOpen:function(t){this.setModalMode(t)}},mounted:function(){document.getElementById("dip-scroll-container")&&(this.scrollBar=new be(document.getElementById("dip-scroll-container")))}},$r=Yr,Gr=(n("75c1"),Object(x["a"])($r,Br,Fr,!1,null,null,null));Gr.options.__file="DataflowInfoPane.vue";var Hr=Gr.exports,Kr={name:"KlabLeftMenu",components:{KlabSpinner:z,MainActionsButtons:O,StopActionsButtons:N,DockedMainControl:jr,KlabLogPane:gn,DataflowInfo:Hr,ScaleButtons:En},mixins:[dt],data:function(){return{}},computed:c()({},Object(l["c"])("data",["hasContext","dataflowInfo"]),Object(l["c"])("stomp",["hasTasks"]),Object(l["c"])("view",["spinnerColor","mainViewer","leftMenuContent","leftMenuState"]),{logShowed:function(){return this.leftMenuContent===u["j"].LOG_COMPONENT},maximized:function(){return this.leftMenuState===u["j"].LEFTMENU_MAXIMIZED&&this.leftMenuContent}}),methods:c()({},Object(l["b"])("view",["setLeftMenuState","setLeftMenuContent"]),{logAction:function(){this.logShowed?(this.setLeftMenuContent(this.mainViewer.leftMenuContent),this.setLeftMenuState(this.mainViewer.leftMenuState)):(this.setLeftMenuContent(u["j"].LOG_COMPONENT),this.setLeftMenuState(u["j"].LEFTMENU_MAXIMIZED))},askForSuggestion:function(t){this.$eventBus.$emit(u["d"].ASK_FOR_SUGGESTIONS,t)}}),watch:{dataflowInfo:function(){null!==this.dataflowInfo?(this.setLeftMenuContent(u["j"].DATAFLOW_INFO_COMPONENT),this.setLeftMenuState(u["j"].LEFTMENU_MAXIMIZED)):(this.setLeftMenuContent(this.mainViewer.leftMenuContent),this.setLeftMenuState(this.mainViewer.leftMenuState))}},created:function(){this.LEFTMENU_VISIBILITY=u["j"]}},Wr=Kr,Xr=(n("6283"),Object(x["a"])(Wr,Mr,kr,!1,null,null,null));Xr.options.__file="KlabLeftMenu.vue";var Zr=Xr.exports,Qr=(n("5bc0"),n("8195"),{name:"KExplorer",components:{KlabMainControl:kn,DataViewer:Hi,ReportViewer:Ji,DataflowViewer:jo,KlabSpinner:z,InputRequestModal:ar,ScaleChangeDialog:fr,KlabPresentation:Ir,ObservationTime:rn,LayoutViewer:pr["a"],KlabLeftMenu:Zr},props:{mainPanelStyle:{type:Object,default:function(){return{}}}},data:function(){return{askForUndocking:!1,LEFTMENU_CONSTANTS:u["j"]}},computed:c()({},Object(l["c"])("data",["session"]),Object(l["c"])("stomp",["connectionState"]),Object(l["c"])("view",["searchIsActive","searchIsFocused","mainViewerName","mainViewer","isInModalMode","spinnerErrorMessage","isMainControlDocked","admitSearch","isHelpShown","mainViewer","leftMenuState","largeMode"]),{waitingGeolocation:{get:function(){return this.$store.state.view.waitingGeolocation},set:function(t){this.$store.state.view.waitingGeolocation=t}},logVisible:function(){return this.$logVisibility===u["A"].PARAMS_LOG_VISIBLE},modalVisible:{get:function(){return this.connectionState!==u["b"].CONNECTION_UP},set:function(t){console.warn("Try to set modalVisible as ".concat(t))}},leftMenuVisible:{get:function(){return this.leftMenuState!==u["j"].LEFTMENU_HIDDEN},set:function(t){this.setLeftMenuState(t)}},modalText:function(){var t;return(t={},s()(t,u["b"].CONNECTION_UNKNOWN,this.$t("messages.connectionClosed")),s()(t,u["b"].CONNECTION_DOWN,this.$t("messages.connectionClosed")),s()(t,u["b"].CONNECTION_WORKING,this.$t("messages.connectionWorking")),s()(t,u["b"].CONNECTION_ERROR,this.$t("errors.connectionError")),t)[this.connectionState]},modalColor:function(){var t;return(t={},s()(t,u["b"].CONNECTION_UNKNOWN,D["a"].getBrand("warning")),s()(t,u["b"].CONNECTION_DOWN,D["a"].getBrand("warning")),s()(t,u["b"].CONNECTION_WORKING,D["a"].getBrand("info")),s()(t,u["b"].CONNECTION_ERROR,D["a"].getBrand("negative")),t)[this.connectionState]},modalAnimated:function(){var t;return(t={},s()(t,u["b"].CONNECTION_UNKNOWN,!1),s()(t,u["b"].CONNECTION_DOWN,!1),s()(t,u["b"].CONNECTION_WORKING,!0),s()(t,u["b"].CONNECTION_ERROR,!1),t)[this.connectionState]}}),methods:c()({},Object(l["b"])("view",["searchStart","searchStop","searchFocus","setMainViewer","setLeftMenuState"]),{setChildrenToAskFor:function(){var t=Math.floor(window.innerHeight*parseInt(getComputedStyle(document.documentElement).getPropertyValue("--main-control-max-height"),10)/100),e=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--q-tree-no-child-min-height"),10),n=Math.floor(t/e);console.info("Set max children to ".concat(n)),this.$store.state.data.childrenToAskFor=n},askForUndockListener:function(t){this.askForUndocking=t}}),watch:{spinnerErrorMessage:function(t,e){null!==t&&t!==e&&(console.error(this.spinnerErrorMessage),this.$q.notify({message:this.spinnerErrorMessage,type:"negative",icon:"mdi-alert-circle",timeout:1e3}))},leftMenuVisible:function(){var t=this;this.$nextTick(function(){t.$eventBus.$emit(u["d"].NEED_FIT_MAP,{})})}},created:function(){"undefined"===typeof this.mainViewer&&this.setMainViewer(u["y"].DATA_VIEWER)},mounted:function(){var t=this;window.addEventListener("keydown",function(e){if(!t.modalVisible&&!t.isInModalMode&&t.admitSearch&&!t.isHelpShown)return 27===e.keyCode&&t.searchIsActive?(t.searchStop(),void e.preventDefault()):void((38===e.keyCode||40===e.keyCode||32===e.keyCode||t.isAcceptedKey(e.key))&&(t.searchIsActive?t.searchIsFocused||(t.searchFocus({char:e.key,focused:!0}),e.preventDefault()):(t.searchStart(e.key),e.preventDefault())))}),this.setChildrenToAskFor(),this.$eventBus.$on(u["d"].ASK_FOR_UNDOCK,this.askForUndockListener),this.sendStompMessage(d["a"].SETTING_CHANGE_REQUEST({setting:u["v"].INTERACTIVE_MODE,value:!1},this.session).body),this.sendStompMessage(d["a"].SETTING_CHANGE_REQUEST({setting:u["v"].LOCK_SPACE,value:!1},this.session).body),this.sendStompMessage(d["a"].SETTING_CHANGE_REQUEST({setting:u["v"].LOCK_TIME,value:!1},this.session).body)},beforeDestroy:function(){this.$eventBus.$off(u["d"].ASK_FOR_UNDOCK,this.askForUndockListener)}}),Jr=Qr,ts=(n("40a1"),n("1f6f"),Object(x["a"])(Jr,i,o,!1,null,"64c7d770",null));ts.options.__file="KExplorer.vue";e["a"]=ts.exports},e34e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("cf81"),o=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new i.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=o},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e445:function(t,e,n){},e45b:function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function o(t,e,n){u(t)[e]=n}function r(t,e,n){h(t)[e]=n}function s(t,e){var n=h(t);for(var i in n)n.hasOwnProperty(i)&&r(e,i,!0)}function a(t,e){for(var n=t.classList,i=0;i<n.length;i++){var o=n.item(i);o&&r(e,o,!0)}}function c(t,e){d(t).style=i({},d(t).style||{},e)}function l(t,e,n,i){var o=f(t);if(o[e])throw new Error("EventListener for "+e+" already registered on VNode");o[e]=[n,i]}function u(t){var e=d(t);return e.attrs||(e.attrs={}),e.attrs}function d(t){return t.data||(t.data={}),t.data}function h(t){var e=d(t);return e.class||(e.class={}),e.class}function f(t){var e=d(t);return e.on||(e.on={}),e.on}Object.defineProperty(e,"__esModule",{value:!0}),e.setAttr=o,e.setClass=r,e.copyClassesFromVNode=s,e.copyClassesFromElement=a,e.mergeStyle=c,e.on=l,e.getAttrs=u},e4f0:function(t,e,n){"use strict";function i(t){return t.hasFeature(e.hoverFeedbackFeature)}function o(t){return t.hasFeature(e.popupFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.hoverFeedbackFeature=Symbol("hoverFeedbackFeature"),e.isHoverable=i,e.popupFeature=Symbol("popupFeature"),e.hasPopupFeature=o},e5a7:function(t,e,n){},e629:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.startFn=t,this.nextFn=e}return t.prototype[Symbol.iterator]=function(){var t,e=this,n=(t={state:this.startFn(),next:function(){return e.nextFn(n.state)}},t[Symbol.iterator]=function(){return n},t);return n},t.prototype.filter=function(t){return r(this,t)},t.prototype.map=function(t){return s(this,t)},t.prototype.forEach=function(t){var e,n=this[Symbol.iterator](),i=0;do{e=n.next(),void 0!==e.value&&t(e.value,i),i++}while(!e.done)},t}();function o(t){if(t.constructor===Array)return t;var e=[];return t.forEach(function(t){return e.push(t)}),e}function r(t,e){return new i(function(){return a(t)},function(t){var n;do{n=t.next()}while(!n.done&&!e(n.value));return n})}function s(t,n){return new i(function(){return a(t)},function(t){var i=t.next(),o=i.done,r=i.value;return o?e.DONE_RESULT:{done:!1,value:n(r)}})}function a(t){var n=t[Symbol.iterator];if("function"===typeof n)return n.call(t);var i=t.length;return"number"===typeof i&&i>=0?new c(t):{next:function(){return e.DONE_RESULT}}}e.FluentIterableImpl=i,e.toArray=o,e.DONE_RESULT=Object.freeze({done:!0,value:void 0}),e.filterIterable=r,e.mapIterable=s;var c=function(){function t(t){this.array=t,this.index=0}return t.prototype.next=function(){return this.index<this.array.length?{done:!1,value:this.array[this.index++]}:e.DONE_RESULT},t.prototype[Symbol.iterator]=function(){return this},t}()},e7ed:function(t,e,n){},e7fa:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),s=n("c146"),a=n("3a92"),c=n("e45b"),l=n("7d36"),u=function(t){function e(e,n,i,o){void 0===o&&(o=!1);var r=t.call(this,i)||this;return r.model=e,r.elementFades=n,r.removeAfterFadeOut=o,r}return i(e,t),e.prototype.tween=function(t,e){for(var n=0,i=this.elementFades;n<i.length;n++){var o=i[n],r=o.element;"in"===o.type?r.opacity=t:"out"===o.type&&(r.opacity=1-t,1===t&&this.removeAfterFadeOut&&r instanceof a.SChildElement&&r.parent.remove(r))}return this.model},e}(s.Animation);e.FadeAnimation=u;var d=function(){function t(){}return t.prototype.decorate=function(t,e){return l.isFadeable(e)&&c.setAttr(t,"opacity",e.opacity),t},t.prototype.postUpdate=function(){},t=o([r.injectable()],t),t}();e.ElementFader=d},e801:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("155f"),o=n("2cac"),r=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new o.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new o.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=r},eb61:function(t,e,n){},ed4f:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd02"),r=n("b669"),s=n("3a92"),a=n("9757"),c=n("1417"),l=n("66f9"),u=n("4c18"),d=n("c444"),h=n("5eb6"),f=function(){function t(t,e){void 0===e&&(e=!0),this.elementIds=t,this.animate=e,this.kind=m.KIND}return t}();e.CenterAction=f;var p=function(){function t(t,e,n,i){void 0===i&&(i=!0),this.elementIds=t,this.padding=e,this.maxZoom=n,this.animate=i,this.kind=g.KIND}return t}();e.FitToScreenAction=p;var v=function(t){function e(e){var n=t.call(this)||this;return n.animate=e,n}return i(e,t),e.prototype.initialize=function(t){var e=this;if(h.isViewport(t)){this.oldViewport={scroll:t.scroll,zoom:t.zoom};var n=[];if(this.getElementIds().forEach(function(i){var o=t.index.getById(i);o&&l.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))}),0===n.length&&t.index.all().forEach(function(i){u.isSelectable(i)&&i.selected&&l.isBoundsAware(i)&&n.push(e.boundsInViewport(i,i.bounds,t))}),0===n.length&&t.index.all().forEach(function(i){l.isBoundsAware(i)&&n.push(e.boundsInViewport(i,i.bounds,t))}),0!==n.length){var i=n.reduce(function(t,e){return o.combine(t,e)});o.isValidDimension(i)&&(this.newViewport=this.getNewViewport(i,t))}}},e.prototype.boundsInViewport=function(t,e,n){return t instanceof s.SChildElement&&t.parent!==n?this.boundsInViewport(t.parent,t.parent.localToParent(e),n):e},e.prototype.execute=function(t){return this.initialize(t.root),this.redo(t)},e.prototype.undo=function(t){var e=t.root;if(h.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new d.ViewportAnimation(e,this.newViewport,this.oldViewport,t).start();e.scroll=this.oldViewport.scroll,e.zoom=this.oldViewport.zoom}return e},e.prototype.redo=function(t){var e=t.root;if(h.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new d.ViewportAnimation(e,this.oldViewport,this.newViewport,t).start();e.scroll=this.newViewport.scroll,e.zoom=this.newViewport.zoom}return e},e.prototype.equal=function(t,e){return t.zoom===e.zoom&&t.scroll.x===e.scroll.x&&t.scroll.y===e.scroll.y},e}(a.Command);e.BoundsAwareViewportCommand=v;var m=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return i(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(o.isValidDimension(e.canvasBounds)){var n=o.center(t);return{scroll:{x:n.x-.5*e.canvasBounds.width,y:n.y-.5*e.canvasBounds.height},zoom:1}}},e.KIND="center",e}(v);e.CenterCommand=m;var g=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return i(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(o.isValidDimension(e.canvasBounds)){var n=o.center(t),i=void 0===this.action.padding?0:2*this.action.padding,r=Math.min(e.canvasBounds.width/(t.width+i),e.canvasBounds.height/t.height+i);return void 0!==this.action.maxZoom&&(r=Math.min(r,this.action.maxZoom)),{scroll:{x:n.x-.5*e.canvasBounds.width/r,y:n.y-.5*e.canvasBounds.height/r},zoom:r}}},e.KIND="fit",e}(v);e.FitToScreenCommand=g;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return r.matchesKeystroke(e,"KeyC","ctrlCmd","shift")?[new f([])]:r.matchesKeystroke(e,"KeyF","ctrlCmd","shift")?[new p([])]:[]},e}(c.KeyListener);e.CenterKeyboardListener=y},ed79:function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},o=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),a=n("6923"),c=n("0d7a"),l=n("e45b"),u=function(){function t(t,e){this.logger=t,this.domHelper=e}return t.prototype.decorate=function(t,e){var n=l.getAttrs(t);return void 0!==n.id&&this.logger.warn(t,"Overriding id of vnode ("+n.id+"). Make sure not to set it manually in view."),n.id=this.domHelper.createUniqueDOMElementId(e),t.key||(t.key=e.id),t},t.prototype.postUpdate=function(){},t=i([s.injectable(),r(0,s.inject(a.TYPES.ILogger)),r(1,s.inject(a.TYPES.DOMHelper)),o("design:paramtypes",[Object,c.DOMHelper])],t),t}();e.IdDecorator=u},edad:function(t,e,n){"use strict";var i=n("c51d"),o=n.n(i);o.a},ee16:function(t,e,n){t.exports=n("bafd")},efc5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach(function(n){return t.bind(n).toService(e)})}}}},f1ae:function(t,e,n){"use strict";var i=n("86cc"),o=n("4630");t.exports=function(t,e,n){e in t?i.f(t,e,o(0,n)):t[e]=n}},f215:function(t,e,n){},f2e8:function(t,e,n){var i=n("34eb")("jsonp");t.exports=s;var o=0;function r(){}function s(t,e,n){"function"==typeof e&&(n=e,e={}),e||(e={});var s,a,c=e.prefix||"__jp",l=e.name||c+o++,u=e.param||"callback",d=null!=e.timeout?e.timeout:6e4,h=encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;function p(){s.parentNode&&s.parentNode.removeChild(s),window[l]=r,a&&clearTimeout(a)}function v(){window[l]&&p()}return d&&(a=setTimeout(function(){p(),n&&n(new Error("Timeout"))},d)),window[l]=function(t){i("jsonp got",t),p(),n&&n(null,t)},t+=(~t.indexOf("?")?"&":"?")+u+"="+h(l),t=t.replace("?&","?"),i('jsonp req "%s"',t),s=document.createElement("script"),s.src=t,f.parentNode.insertBefore(s,f),v}},f457:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(o,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i["throw"](t))}catch(t){r(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var r=n("2e0b"),s=n("30e3"),a=n("155f"),c=n("c5f4"),l=n("c278"),u=n("87b3"),d=n("68f1"),h=n("8336"),f=n("77d3"),p=n("ba33"),v=n("1e94"),m=n("0300"),g=function(){function t(t){var e=t||{};if("object"!==typeof e)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=a.BindingScopeEnum.Transient;else if(e.defaultScope!==a.BindingScopeEnum.Singleton&&e.defaultScope!==a.BindingScopeEnum.Transient&&e.defaultScope!==a.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!==typeof e.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!==typeof e.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new m.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return t.merge=function(e,n){var i=new t,o=u.getBindingDictionary(i),r=u.getBindingDictionary(e),s=u.getBindingDictionary(n);function a(t,e){t.traverse(function(t,n){n.forEach(function(t){e.add(t.serviceIdentifier,t.clone())})})}return a(r,o),a(s,o),i},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,o=t;i<o.length;i++){var r=o[i],s=n(r.id);r.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(this,void 0,void 0,function(){var e,n,i,r,s;return o(this,function(o){switch(o.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,o.label=1;case 1:return n<i.length?(r=i[n],s=e(r.id),[4,r.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(t){return function(e){return e.moduleId===t}};e.forEach(function(e){var n=i(e.id);t._bindingDictionary.removeByCondition(n)})},t.prototype.bind=function(t){var e=this.options.defaultScope||a.BindingScopeEnum.Transient,n=new r.Binding(t,e);return this._bindingDictionary.add(t,n),new h.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(s.CANNOT_UNBIND+" "+p.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new m.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),r=u.createMockRequest(this,t,e,n);i=o.some(function(t){return t.constraint(r)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},t.prototype.snapshot=function(){this._snapshots.push(v.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,a.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,a.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,a.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,a.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(i){var o=t.bind.bind(t),r=o(i);return e(r,n),r}},i=function(e){return function(e){var n=t.unbind.bind(t);n(e)}},o=function(e){return function(e){var n=t.isBound.bind(t);return n(e)}},r=function(n){return function(i){var o=t.rebind.bind(t),r=o(i);return e(r,n),r}};return function(t){return{bindFunction:n(t),isboundFunction:o(t),rebindFunction:r(t),unbindFunction:i(t)}}},t.prototype._get=function(t,e,n,i,o,r){var a=null,c={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:o,serviceIdentifier:i,targetType:n,value:r};if(this._middleware){if(a=this._middleware(c),void 0===a||null===a)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(c);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=u.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);n=e.contextInterceptor(n);var i=d.resolve(n);return i}},t}();e.Container=g},f4cb:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),c=n("b669"),l=n("dd02"),u=n("6923"),d=n("3a92"),h=n("3b4c"),f=n("9757"),p=n("302f"),v=n("1417"),m=n("3623"),g=n("66f9"),y=n("e4f0"),b=function(){function t(t,e){this.mouseoverElement=t,this.mouseIsOver=e,this.kind=_.KIND}return t}();e.HoverFeedbackAction=b;var _=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){var e=t.root,n=e.index.getById(this.action.mouseoverElement);return n&&y.isHoverable(n)&&(n.hoverFeedback=this.action.mouseIsOver),this.redo(t)},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND="hoverFeedback",e}(f.Command);e.HoverFeedbackCommand=_;var w=function(){function t(e,n){this.elementId=e,this.bounds=n,this.kind=t.KIND}return t.KIND="requestPopupModel",t}();e.RequestPopupModelAction=w;var S=function(){function t(t){this.newRoot=t,this.kind=E.KIND}return t}();e.SetPopupModelAction=S;var E=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.oldRoot=t.root,this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},e.KIND="setPopupModel",e}(f.PopupCommand);e.SetPopupModelCommand=E;var x=function(t){function e(e,n){var i=t.call(this)||this;return i.options=e,i.state=n,i}return i(e,t),e.prototype.stopMouseOutTimer=function(){void 0!==this.state.mouseOutTimer&&(window.clearTimeout(this.state.mouseOutTimer),this.state.mouseOutTimer=void 0)},e.prototype.startMouseOutTimer=function(){var t=this;return this.stopMouseOutTimer(),new Promise(function(e){t.state.mouseOutTimer=window.setTimeout(function(){t.state.popupOpen=!1,t.state.previousPopupElement=void 0,e(new S({type:p.EMPTY_ROOT.type,id:p.EMPTY_ROOT.id}))},t.options.popupCloseDelay)})},e.prototype.stopMouseOverTimer=function(){void 0!==this.state.mouseOverTimer&&(window.clearTimeout(this.state.mouseOverTimer),this.state.mouseOverTimer=void 0)},e=o([s(0,a.inject(u.TYPES.ViewerOptions)),s(1,a.inject(u.TYPES.HoverState)),r("design:paramtypes",[Object,Object])],e),e}(h.MouseListener);e.AbstractHoverMouseListener=x;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.computePopupBounds=function(t,e){var n={x:-5,y:20},i=g.getAbsoluteBounds(t),o=t.root.canvasBounds,r=l.translate(i,o),s=r.x+r.width-e.x,a=r.y+r.height-e.y;a<=s&&this.allowSidePosition(t,"below",a)?n={x:-5,y:Math.round(a+5)}:s<=a&&this.allowSidePosition(t,"right",s)&&(n={x:Math.round(s+5),y:-5});var c=e.x+n.x,u=o.x+o.width;c>u&&(c=u);var d=e.y+n.y,h=o.y+o.height;return d>h&&(d=h),{x:c,y:d,width:-1,height:-1}},e.prototype.allowSidePosition=function(t,e,n){return!(t instanceof d.SModelRoot)&&n<=150},e.prototype.startMouseOverTimer=function(t,e){var n=this;return this.stopMouseOverTimer(),new Promise(function(i){n.state.mouseOverTimer=window.setTimeout(function(){var o=n.computePopupBounds(t,{x:e.pageX,y:e.pageY});i(new w(t.id,o)),n.state.popupOpen=!0,n.state.previousPopupElement=t},n.options.popupOpenDelay)})},e.prototype.mouseOver=function(t,e){var n=[],i=m.findParent(t,y.hasPopupFeature);this.state.popupOpen&&(void 0===i||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id!==i.id)?n.push(this.startMouseOutTimer()):(this.stopMouseOverTimer(),this.stopMouseOutTimer()),void 0===i||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===i.id||n.push(this.startMouseOverTimer(i,e));var o=m.findParentByFeature(t,y.isHoverable);return void 0!==o&&n.push(new b(o.id,!0)),n},e.prototype.mouseOut=function(t,e){var n=[];if(this.state.popupOpen){var i=m.findParent(t,y.hasPopupFeature);void 0!==this.state.previousPopupElement&&void 0!==i&&this.state.previousPopupElement.id===i.id&&n.push(this.startMouseOutTimer())}this.stopMouseOverTimer();var o=m.findParentByFeature(t,y.isHoverable);return void 0!==o&&n.push(new b(o.id,!1)),n},e.prototype.mouseMove=function(t,e){var n=[];void 0!==this.state.previousPopupElement&&this.closeOnMouseMove(this.state.previousPopupElement,e)&&n.push(this.startMouseOutTimer());var i=m.findParent(t,y.hasPopupFeature);return void 0===i||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===i.id||n.push(this.startMouseOverTimer(i,e)),n},e.prototype.closeOnMouseMove=function(t,e){return t instanceof d.SModelRoot},e=o([a.injectable()],e),e}(x);e.HoverMouseListener=C;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.mouseOut=function(t,e){return[this.startMouseOutTimer()]},e.prototype.mouseOver=function(t,e){return this.stopMouseOutTimer(),this.stopMouseOverTimer(),[]},e=o([a.injectable()],e),e}(x);e.PopupHoverMouseListener=O;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return c.matchesKeystroke(e,"Escape")?[new S({type:p.EMPTY_ROOT.type,id:p.EMPTY_ROOT.id})]:[]},e}(v.KeyListener);e.HoverKeyListener=T},f58f:function(t,e,n){"use strict";var i=n("15f6"),o=n.n(i);o.a},f923:function(t,e,n){"use strict";function i(t,e){var n,i,o=e.elm,r=t.data.class,s=e.data.class;if((r||s)&&r!==s){for(i in r=r||{},s=s||{},r)s[i]||o.classList.remove(i);for(i in s)n=s[i],n!==r[i]&&o.classList[n?"add":"remove"](i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:i,update:i},e.default=e.classModule},fba3:function(t,e,n){"use strict";function i(t){return o()?t.metaKey:t.ctrlKey}function o(){return-1!==window.navigator.userAgent.indexOf("Mac")}function r(t){if(t&&"undefined"!==typeof window&&window.location){var e="";return window.location.protocol&&(e+=window.location.protocol+"//"),window.location.host&&(e+=window.location.host),e.length>0&&!t.startsWith(e)}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isCtrlOrCmd=i,e.isMac=o,e.isCrossSite=r},fd04:function(t,e,n){"use strict";n("ac6a");var i,o,r=n("3156"),s=n.n(r),a=(n("7f7f"),n("6762"),n("2fdb"),n("7514"),n("cadf"),n("2b0e")),c=n("0388"),l=(n("c5f6"),n("506f")),u=n("7d43"),d=n("9541"),h=n("768b"),f=n("bffd"),p=n("fb40"),v=n("bd60"),m=n("b18c"),g="q:collapsible:close",y={name:"QCollapsible",mixins:[p["a"],v["a"],{props:v["b"]}],modelToggle:{history:!1},props:{disable:Boolean,popup:Boolean,indent:Boolean,group:String,iconToggle:Boolean,collapseIcon:String,opened:Boolean,duration:Number,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},computed:{classes:function(){return{"q-collapsible-opened":this.showing,"q-collapsible-closed":!this.showing,"q-collapsible-popup-opened":this.popup&&this.showing,"q-collapsible-popup-closed":this.popup&&!this.showing,"q-collapsible-cursor-pointer":!this.separateToggle,"q-item-dark":this.dark,"q-item-separator":this.separator,"q-item-inset-separator":this.insetSeparator,disabled:this.disable}},separateToggle:function(){return this.iconToggle||void 0!==this.to}},watch:{showing:function(t){t&&this.group&&this.$root.$emit(g,this)}},methods:{__toggleItem:function(){this.separateToggle||this.toggle()},__toggleIcon:function(t){this.separateToggle&&(t&&Object(m["g"])(t),this.toggle())},__eventHandler:function(t){this.group&&this!==t&&t.group===this.group&&this.hide()},__getToggleSide:function(t,e){return[t(d["a"],{slot:e?"right":void 0,staticClass:"cursor-pointer transition-generic relative-position q-collapsible-toggle-icon",class:{"rotate-180":this.showing,invisible:this.disable},nativeOn:{click:this.__toggleIcon},props:{icon:this.collapseIcon||this.$q.icon.collapsible.icon}})]},__getItemProps:function(t){return{props:t?{cfg:this.$props}:this.$props,style:this.headerStyle,class:this.headerClass,nativeOn:{click:this.__toggleItem}}}},created:function(){this.$root.$on(g,this.__eventHandler),(this.opened||this.value)&&this.show()},beforeDestroy:function(){this.$root.$off(g,this.__eventHandler)},render:function(t){return t(this.tag,{staticClass:"q-collapsible q-item-division relative-position",class:this.classes},[t("div",{staticClass:"q-collapsible-inner"},[this.$slots.header?t(l["a"],this.__getItemProps(),[this.$slots.header,t(u["a"],{props:{right:!0},staticClass:"relative-position"},this.__getToggleSide(t))]):t(h["a"],this.__getItemProps(!0),this.__getToggleSide(t,!0)),t(f["a"],{props:{duration:this.duration}},[t("div",{directives:[{name:"show",value:this.showing}]},[t("div",{staticClass:"q-collapsible-sub-item relative-position",class:{indent:this.indent}},this.$slots.default)])])])])}},b=n("e4f9"),_=n("dd1f"),w=n("b12a"),S=n("7cca"),E={ALERT:{component:c["a"]},MAIN:function(t){return a["a"].component("KAppMain",{render:function(e){return e("div",s()({staticClass:"kcv-main-container",class:"kcv-dir-".concat(t.direction),attrs:{id:"".concat(t.applicationId,"-").concat(t.id)},style:s()({},t.style&&s()({},t.style),t.mainPanelStyle)},t.name&&{ref:t.name}),this.$slots.default)}})},GROUP:function(t){return a["a"].component("KAppGroup",{data:function(){return{}},render:function(e){return e("div",{staticClass:"kcv-group",attrs:{id:"".concat(t.applicationId,"-").concat(t.id)}},t.attributes.shelf||t.groupId?this.$slots.default:[e("div",{staticClass:"kvc-group-container"},[e("div",{staticClass:"kvc-group-legend"},t.name),e("div",{staticClass:"kvc-group-content"},this.$slots.default)])])}})},SHELF:function(t,e){return a["a"].component("KAppShelf",{render:function(n){return n(y,{staticClass:"kvc-collapsible",props:{staticClass:"no-padding",headerClass:"kvc-collapsible-header",group:e,label:t}},this.$slots.default)}})},TREE:function(t){var e=[];if(t.tree){var n=t.tree,i=function i(o){var r=n.values[o],s=Object(w["b"])(e,"".concat(t.id,"-").concat(r.id,"-").concat(o));if(!s){s={id:"".concat(t.id,"-").concat(r.id,"-").concat(o),label:r.label,type:r.type,observable:r.id,children:[]};var a=n.links.find(function(t){return t.first===o}).second;if(a===n.rootId)e.push(s);else{var c=i(a);c.children.push(s)}}return s};n.links.forEach(function(t){i(t.first)})}return a["a"].component("KAppTree",{data:function(){return{ticked:[],expanded:[],selected:{}}},render:function(n){var i=this;return n("div",{staticClass:"kvc-tree-container"},[n("div",{staticClass:"kvc-tree-legend"},t.name),n(b["a"],{staticClass:"kvc-tree",props:{nodes:e,nodeKey:"id",tickStrategy:"leaf",ticked:this.ticked,selected:this.selected,expanded:this.expanded,color:"app-container"},on:{"update:ticked":function(e){i.ticked=e,i.$eventBus.$emit(S["d"].COMPONENT_CLICKED,{type:"update:ticked",id:t.id,value:e})},"update:selected":function(e){i.selected=e,i.$eventBus.$emit(S["d"].COMPONENT_CLICKED,{type:"update:selected",id:t.id,value:e})},"update:expanded":function(e){i.expanded=e,i.$eventBus.$emit(S["d"].COMPONENT_CLICKED,{type:"update:expanded",id:t.id,value:e})}}})])}})},CHECK_BUTTON:function(t){return a["a"].component("KAppCheckButton",{data:function(){return{selected:!1}},render:function(e){var n=this;return e("div",{staticClass:"kvc-checkbutton"},[e(_["a"],{props:{value:this.selected,color:"app-container",label:t.name},on:{input:function(e){n.selected=e,n.$eventBus.$emit(S["d"].COMPONENT_CLICKED,{type:"input",id:t.id,value:e})}}})])}})},TEXT:function(t){var e={};return t.style&&(e=s()({},t.style)),t.attributes&&(t.attributes.height&&(e["min-height"]="".concat(t.attributes.height,"px")),t.attributes.width&&(e.width="".concat(t.attributes.width,"px"))),a["a"].component("KAppText",{render:function(n){return n("div",{staticClass:"kvc-text",class:{"kvc-collapsible":t.attributes.collapse},attrs:{id:t.id},style:e},[n("div",{staticClass:"kvc-internal-text",domProps:{innerHTML:t.content}})])}})},UNKNOWN:function(t){return a["a"].component("KAppUnknown",{render:function(e){return e("p",{attrs:{id:t.id}},t.type)}})}},x={name:"KlabComponentsViewer",props:{component:{type:Object,required:!0},props:{type:Object,default:null},direction:{type:String,validator:function(t){return["horizontal","vertical"].includes(t)},default:"vertical"},mainPanelStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{},methods:{createComponent:function(t,e){var n=this;if(!t)return[];var i,o=null;switch(t.groupId&&t.shelf&&(o=E.SHELF(t.name,t.groupId)),t.type){case null:i=E.MAIN(s()({},t,{mainPanelStyle:this.mainPanelStyle,direction:this.direction}));break;case"CheckButton":i=E.CHECK_BUTTON(t,e,this);break;case"Tree":i=E.TREE(t,e,this);break;case"Group":i=E.GROUP(t,e),t.components&&t.components.length>0&&t.components.forEach(function(e){e.groupId=t.id,e.shelf=t.attributes.shelf});break;case"Text":i=E.TEXT(t,e);break;default:i=E.UNKNOWN(t)}var r=[];return t.components&&t.components.length>0&&t.components.forEach(function(t){r.push(n.createComponent(t,e))}),e(i,{},o?[e(o,{},r)]:r)},componentClickedListener:function(t){console.info(JSON.stringify(t,null,4))},createAlert:function(t,e){return t(E.ALERT.component,{props:{value:!0,title:e.title,message:e.content},class:{"kcv-alert":!0}})}},mounted:function(){this.$eventBus.$on(S["d"].COMPONENT_CLICKED,this.componentClickedListener)},beforeDestroy:function(){this.$eventBus.$off(S["d"].COMPONENT_CLICKED,this.viewerClosedListener)},render:function(t){var e=this.createComponent(this.component,t);return e}},C=x,O=(n("a263"),n("2877")),T=Object(O["a"])(C,i,o,!1,null,null,null);T.options.__file="KlabComponentsViewer.vue";e["a"]=T.exports},fd0f:function(t,e,n){},fe37:function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n("3b4c"),r=n("3623"),s=n("c444"),a=n("5eb6");function c(t){return"zoom"in t}e.isZoomable=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.wheel=function(t,e){var n=r.findParentByFeature(t,a.isViewport);if(n){var i=Math.exp(.005*-e.deltaY),o=1/(i*n.zoom)-1/n.zoom,c={scroll:{x:-(o*e.offsetX-n.scroll.x),y:-(o*e.offsetY-n.scroll.y)},zoom:n.zoom*i};return[new s.ViewportAction(n.id,c,!1)]}return[]},e}(o.MouseListener);e.ZoomMouseListener=l},ff70:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="http://www.w3.org/1999/xlink",o="http://www.w3.org/XML/1998/namespace",r=58,s=120;function a(t,e){var n,a=e.elm,c=t.data.attrs,l=e.data.attrs;if((c||l)&&c!==l){for(n in c=c||{},l=l||{},l){var u=l[n],d=c[n];d!==u&&(!0===u?a.setAttribute(n,""):!1===u?a.removeAttribute(n):n.charCodeAt(0)!==s?a.setAttribute(n,u):n.charCodeAt(3)===r?a.setAttributeNS(o,n,u):n.charCodeAt(5)===r?a.setAttributeNS(i,n,u):a.setAttribute(n,u))}for(n in c)n in l||a.removeAttribute(n)}}e.attributesModule={create:a,update:a},e.default=e.attributesModule}}]);
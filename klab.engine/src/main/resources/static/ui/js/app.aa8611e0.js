(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("2f39")},"034f":function(e,t,n){"use strict";var o=n("fb1c"),a=n.n(o);a.a},1442:function(e,t,n){"use strict";n.d(t,"d",function(){return m}),n.d(t,"f",function(){return _}),n.d(t,"e",function(){return I}),n.d(t,"c",function(){return h}),n.d(t,"b",function(){return R}),n.d(t,"a",function(){return A});n("ac6a"),n("7514"),n("48c0"),n("6c7b");var o=n("480c"),a=n("d0e9"),i=n("273e"),r=n("2ef1"),s=n("a226"),c=n("6c77"),l=n("83a6"),u=n("8682"),d=n("8295"),f=n("6cbf"),E=n("4cdf"),p=n("ddaa"),T=n("8f3a"),S=n("256f"),b="pk.eyJ1Ijoiay1sYWIiLCJhIjoiY2prd2d2dWNxMHlvcDNxcDVsY3FncDBydiJ9.zMQE3gu-0qPpkLapVfVhnA",O='© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>',m={BING_KEY:"",COORD_BC3:[-2.968226,43.332125],PROJ_EPSG_4326:Object(S["g"])("EPSG:4326"),PROJ_EPSG_3857:Object(S["g"])("EPSG:3857"),ZINDEX_OFFSET:1e4,ZINDEX_MULTIPLIER_RASTER:0,ZINDEX_MULTIPLIER_POLYGONS:1,ZINDEX_MULTIPLIER_LINES:2,ZINDEX_MULTIPLIER_POINTS:3,DEFAULT_BASELAYER:"osm_layer"},v={MARKER_SVG:function(e){var t=e.fill,n=void 0===t?"yellow":t,o=e.stroke,a=void 0===o?"black":o,i=e.strokeWidth,r=void 0===i?"5":i;return'<svg width="80" height="80" version="1.1" xmlns="http://www.w3.org/2000/svg"\n  viewBox="0 -'.concat(r," 80 ").concat(2*r+80,'">\n  <path fill="').concat(n,'" stroke="').concat(a,'" stroke-width="').concat(r,'" d="M40,0C26.191,0,15,11.194,15,25c0,23.87,25,55,25,55s25-31.13,25-55C65,11.194,53.807,0,40,0z\n  M40,38.8c-7.457,0-13.5-6.044-13.5-13.5S32.543,11.8,40,11.8c7.455,0,13.5,6.044,13.5,13.5S47.455,38.8,40,38.8z"/></svg>')}},_={POINT_OBSERVATION_ICON:new f["a"]({anchor:[.5,1],src:"statics/maps/marker.png",opacity:.8,scale:.6}),POINT_OBSERVATION_SVG_ICON:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return new f["a"]({opacity:1,src:"data:image/svg+xml;utf8,".concat(v.MARKER_SVG(e)),scale:t})},POINT_OBSERVATION_TEXT:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offsetY,n=void 0===t?25:t,o=e.bold,a=void 0!==o&&o,i=e.size,r=void 0===i?"10px":i;return new d["a"]({textAlign:"center",textBaseline:"bottom",offsetY:n,font:"".concat(a?"bold":"normal"," ").concat(r," Roboto, sans-serif")})}},I={POLYGON_CONTEXT_STYLE:new c["c"]({fill:new l["a"]({color:"rgba(38, 166, 154, 0.2)"})}),POLYGON_OBSERVATION_STYLE:new c["c"]({fill:new l["a"]({color:"rgba(255, 102, 0, 0.4)"})}),LNE_OBSERVATION_STYLE:new c["c"]({stroke:new u["a"]({color:"rgb(255, 102, 0)",width:2})}),POINT_OBSERVATION_SVG_PARAM:{fill:"rgb(238,238,238)",stroke:"rgb(51,51,51)",strokeWidth:"4",scale:.3},POINT_CONTEXT_SVG_PARAM:{fill:"rgb(17, 170, 187)",stroke:"rgb(51,51,51)",strokeWidth:"5",scale:.5,offsetY:35,bold:!0,size:"14px"}},h={OSM_LAYER:new o["a"]({name:"osm_layer",title:"Open Street Map",type:"base",source:new a["b"],visible:!1}),STAMEN_WATER_COLOR_LAYER:new o["a"]({name:"stamen_water_color_layer",title:"Stamen Watercolor",type:"base",source:new i["a"]({layer:"watercolor"}),visible:!1}),GOOGLE_HYBRID:new o["a"]({name:"google_hybrid",title:"Google Hybrid",type:"base",source:new r["a"]({crossOrigin:"anonymous",url:"http://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}&s=Ga",attribution:"© 2018 Google, Inc"}),visible:!1}),GOOGLE_STREET:new o["a"]({name:"google_street",title:"Google Street",type:"base",source:new r["a"]({crossOrigin:"anonymous",url:"http://mt{0-3}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:"© 2018 Google, Inc"}),visible:!1}),GOOGLE_TERRAIN:new o["a"]({name:"google_terrain",title:"Google Terrain",type:"base",source:new r["a"]({crossOrigin:"anonymous",url:"https://mt1.google.com/vt/lyrs=t&x={x}&y={y}&z={z}",attribution:"© 2018 Google, Inc"}),visible:!1}),MAPBOX_CALI_TERRAIN:new o["a"]({name:"mapbox_cali_terrain",title:"k.LAB Mapbox Cali terrain",type:"base",source:new r["a"]({crossOrigin:"anonymous",url:"https://api.mapbox.com/styles/v1/k-lab/cjkwh1z9z06ok2rrn9unfpn2n/tiles/256/{z}/{x}/{y}?access_token=".concat(b),attribution:O}),visible:!1}),MAPBOX_MINIMO:new o["a"]({name:"mapbox_minimo",title:"k.LAB Mapbox Minimo",type:"base",source:new r["a"]({crossOrigin:"anonymous",url:"https://api.mapbox.com/styles/v1/k-lab/cjm0l6i4g7ffj2sqk7xy5dv1m/tiles/256/{z}/{x}/{y}?access_token=".concat(b),attribution:O}),visible:!1}),MAPBOX_GOT:new o["a"]({name:"mapbox_got",title:"k.LAB Mapbox GOT",type:"base",source:new r["a"]({crossOrigin:"anonymous",url:"https://api.mapbox.com/styles/v1/k-lab/cjuihteg13toh1fmovvd6r80y/tiles/256/{z}/{x}/{y}?access_token=".concat(b),attribution:O}),visible:!1}),EMPTY_LAYER:new o["a"]({name:"empty_layer",title:"No background",type:"base",visible:!1}),BING_IMAGINERY:new o["a"]({name:"bing_imaginery",title:"Bing Imagery",type:"base",source:new s["a"]({crossOrigin:"anonymous",maxZoom:19,key:m.BING_KEY,imagerySet:"AerialWithLabels",attribution:"© 2017 Bing, Inc"}),visible:!1})},R={controls:T["a"]({attribution:!1}).extend([]),target:"map",projection:m.PROJ_EPSG_4326,center:Object(S["k"])(m.COORD_BC3,m.PROJ_EPSG_4326,m.PROJ_EPSG_3857),zoom:13},A={layers:[h.EMPTY_LAYER,h.STAMEN_WATER_COLOR_LAYER,h.OSM_LAYER,h.GOOGLE_STREET,h.GOOGLE_HYBRID,h.GOOGLE_TERRAIN,h.MAPBOX_MINIMO,h.MAPBOX_CALI_TERRAIN],mask:null,hasMask:function(){return null!==this.mask},getBaseLayer:function(){return this.layers.find(function(e){return"base"===e.get("type")&&e.getVisible()})},setMask:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[38,38,38,.4];null!==this.mask&&this.removeMask(),this.mask=new p["a"]({feature:new E["a"]({geometry:e,name:"Context"}),inner:!1,active:!0,fill:new l["a"]({color:n})}),this.layers.forEach(function(e){e.addFilter(t.mask)})},removeMask:function(){var e=this;null!==this.mask&&this.layers.forEach(function(t){t.removeFilter(e.mask)}),this.mask=null}}},"17dc":function(e,t,n){"use strict";n.d(t,"a",function(){return E});n("ac6a"),n("cadf"),n("6b54"),n("c5f6");var o=n("3156"),a=n.n(o),i=n("278c"),r=n.n(i),s=n("2369"),c=n("c1df"),l=n.n(c),u=n("d247");function d(e,t,n,o,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=n!==u["b"].PAYLOAD_CLASS_EMPTY?s["b"].validateJsonSchema(o,n):o;return{validated:r,body:{messageClass:e,type:t,payloadClass:n,payload:o,identity:a,timestamp:l()().valueOf(),inResponseTo:i}}}var f={SPATIAL_EXTENT:function(e){var t=r()(e,4),n=t[0],o=t[1],a=t[2],i=t[3];return{south:o,west:n,north:i,east:a}}},E={REGION_OF_INTEREST:function(e,t){return d(u["b"].CLASS_USERCONTEXTCHANGE,u["b"].TYPE_REGIONOFINTEREST,u["b"].PAYLOAD_CLASS_SPATIALEXTENT,f.SPATIAL_EXTENT(e),t)},SEARCH_REQUEST:function(e,t){var n=e.queryString,o=e.searchMode,i=e.requestId,r=e.contextId,s=void 0===r?null:r,c=e.matchTypes,l=void 0===c?null:c,f=e.cancelSearch,E=void 0!==f&&f,p=e.defaultResults,T=void 0!==p&&p,S=e.maxResults;return d(u["b"].CLASS_SEARCH,u["b"].TYPE_SUBMITSEARCH,u["b"].PAYLOAD_CLASS_SEARCHREQUEST,a()({},null!==s&&{contextId:s},null!==l&&{matchTypes:l},{queryString:n,searchMode:o,requestId:i,cancelSearch:E,defaultResults:T,maxResults:S}),t)},SEARCH_MATCH:function(e,t){var n=e.contextId,o=e.matchId,a=e.matchIndex,i=e.added;return d(u["b"].CLASS_SEARCH,u["b"].TYPE_MATCHACTION,u["b"].PAYLOAD_CLASS_SEARCHMATCHACTION,{contextId:n,matchId:o,matchIndex:a,added:i},t)},OBSERVATION_REQUEST:function(e,t){var n=e.urn,o=e.contextId,i=e.searchContextId,r=void 0===i?null:i;return d(u["b"].CLASS_OBSERVATIONLIFECYCLE,u["b"].TYPE_REQUESTOBSERVATION,u["b"].PAYLOAD_CLASS_OBSERVATIONREQUEST,a()({urn:n},null!==o&&{contextId:o},null!==r&&{searchContextId:r}),t)},RESET_CONTEXT:function(e){return d(u["b"].CLASS_USERCONTEXTCHANGE,u["b"].TYPE_RESETCONTEXT,u["b"].PAYLOAD_CLASS_EMPTY,"",e)},CONTEXTUALIZATION_REQUEST:function(e,t){var n=e.contextUrn,o=e.contextId,i=e.parentContext,r=e.contextQuery;return d(u["b"].CLASS_OBSERVATIONLIFECYCLE,u["b"].TYPE_RECONTEXTUALIZE,u["b"].PAYLOAD_CLASS_CONTEXTUALIZATIONREQUEST,a()({},"undefined"!==typeof n&&{contextUrn:n},"undefined"!==typeof o&&{contextId:o},"undefined"!==typeof i&&{parentContext:i},"undefined"!==typeof r&&{contextQuery:r}),t)},TASK_INTERRUPTED:function(e,t){var n=e.taskId,o=e.forceInterruption,a=void 0===o||o;return d(u["b"].CLASS_TASKLIFECYCLE,u["b"].TYPE_TASKINTERRUPTED,u["b"].PAYLOAD_CLASS_INTERRUPTTASK,{taskId:n,forceInterruption:a},t)},SCALE_REFERENCE:function(e,t){var n=e.scaleReference,o=e.spaceResolutionConverted,i=e.spaceUnit,r=e.timeResolutionDescription,s=void 0===r?"":r,c=e.timeUnit,l=void 0===c?"":c;return d(u["b"].CLASS_USERCONTEXTDEFINITION,u["b"].TYPE_SCALEDEFINED,u["b"].PAYLOAD_CLASS_SCALEREFERENCE,a()({},n,"undefined"!==typeof o&&{spaceResolutionConverted:o},"undefined"!==typeof i&&{spaceUnit:i},"undefined"!==typeof s&&{timeResolutionDescription:s},"undefined"!==typeof l&&{timeUnit:l}),t)},SPATIAL_LOCATION:function(e,t){var n=e.wktShape,o=e.contextId,i=void 0===o?null:o;return d(u["b"].CLASS_USERCONTEXTCHANGE,u["b"].TYPE_FEATUREADDED,u["b"].PAYLOAD_CLASS_SPATIALLOCATION,a()({easting:Number.MIN_VALUE,northing:Number.MIN_VALUE,wktShape:n},null!==i&&{contextId:i}),t)},DATAFLOW_NODE_DETAILS:function(e,t){var n=e.nodeId,o=e.contextId;return d(u["b"].CLASS_TASKLIFECYCLE,u["b"].TYPE_DATAFLOWNODEDETAIL,u["b"].PAYLOAD_CLASS_DATAFLOWSTATE,{nodeId:n,monitorable:!1,progress:0,contextId:o},t)},SETTING_CHANGE_REQUEST:function(e,t){var n=e.setting,o=e.value;return d(u["b"].CLASS_USERINTERFACE,u["b"].TYPE_CHANGESETTING,u["b"].PAYLOAD_CLASS_SETTINGCHANGEREQUEST,{setting:n,previousValue:(!o).toString(),newValue:o.toString()},t)},USER_INPUT_RESPONSE:function(e,t){var n=e.messageId,o=e.requestId,a=e.cancelRun,i=void 0!==a&&a,r=e.values,s=void 0===r?{}:r;return d(u["b"].CLASS_USERINTERFACE,u["b"].TYPE_USERINPUTPROVIDED,u["b"].PAYLOAD_CLASS_USERINPUTRESPONSE,{requestId:o,cancelRun:i,values:s},t,n)}}},"1e5d":function(e,t,n){},2369:function(e,t,n){"use strict";var o=n("278c"),a=n.n(o),i=(n("ffc1"),n("ac6a"),n("cadf"),n("456d"),n("7037")),r=n.n(i),s=n("970b"),c=n.n(s),l=n("5bc30"),u=n.n(l),d=n("bc3a"),f=n.n(d),E=n("3b1b6"),p=n.n(E),T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{draft:"draft-04"};if(c()(this,e),void 0===t||""===t)throw Error("URL is mandatory");this.djvEnv=new p.a({version:n.draft}),this.initialized=!1,this.url=t,this.initTimeout=null,this.axios=f.a.create(),console.debug("Load schema(s) on creation"),this.initTimeout=setTimeout(this.init(t),2e3)}return u()(e,[{key:"validateJsonSchema",value:function(e,t){if(!this.initialized)return console.info("djvEnv not read"),!1;if(this.djvEnv.resolve(t)){var n=this.djvEnv.validate(t,e);if("undefined"===typeof n)return console.debug("Validation of schema ".concat(t," ok")),!0;throw Error(n)}throw Error("Schema not found: ".concat(t))}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;this.initialized||this.axios.get(t,{transformRequest:[function(e,t){return delete t.common.Authorization,e}]}).then(function(n){var o=n.data;if("object"!==r()(o))throw Error("Error asking for JsonSchema(s): no data");if(0===Object.keys(o).length)throw Error("Schema on url ".concat(t," is empty, check it"));for(var i=Object.entries(o),s=0;s<i.length;s++){var c=a()(i[s],2),l=c[0],u=c[1];e.djvEnv.addSchema(l,u),console.info("Added schema ".concat(l))}e.initialized=!0}).catch(function(t){console.warn(t),clearTimeout(e.initTimeout),e.initTimeout=setTimeout(function(){e.init(),console.info("Trying to connect to donwload schema(s)")},6e4)})}}]),e}();n.d(t,"b",function(){return S});var S=new T("".concat("").concat("/modeler","/schema"));t["a"]=function(e){var t=e.Vue;t.prototype.$djvEnv=S}},"2f39":function(e,t,n){"use strict";n.r(t);n("ac6a"),n("4a91"),n("a114"),n("113c"),n("3d49"),n("58a5"),n("bda0"),n("2289"),n("085e"),n("8014"),n("ab98"),n("aab2"),n("15f1"),n("b968"),n("3391"),n("ed5b"),n("0a58"),n("a4a9"),n("5965"),n("da80"),n("b60e"),n("1070"),n("1625"),n("9338"),n("0c2e"),n("f357"),n("ef8f"),n("747a"),n("e7fb"),n("b8af"),n("58b8"),n("5902"),n("eb7d"),n("dc73"),n("487d"),n("bf6b"),n("7b96"),n("89f8"),n("cb8c"),n("79ea"),n("a963"),n("3b76"),n("21e3"),n("38f3d"),n("2577"),n("1992"),n("ef68"),n("97a1"),n("f39d"),n("a9b5"),n("06dd"),n("66bc"),n("908f"),n("25cd"),n("93ea"),n("c888"),n("5f1d"),n("a555"),n("8934"),n("9438"),n("351b"),n("23a5"),n("72c5"),n("b8ad"),n("d043"),n("592c"),n("de65"),n("8134"),n("1ea7"),n("63d1"),n("fcc3"),n("abed"),n("f857"),n("0a43"),n("5706"),n("cc15"),n("2ac6"),n("1fd4"),n("fa2f"),n("91e5"),n("1e5d"),n("7e6d");var o=n("2b0e"),a=n("9ff4"),i=n("e84f"),r=n("52b5"),s=n("4bf4"),c=n("03d8"),l=n("482e"),u=n("09fa6"),d=n("93f5"),f=n("5d8b"),E=n("5931"),p=n("94e3"),T=n("e4f9"),S=n("1180"),b=n("1e55"),O=n("506f"),m=n("b8d9"),v=n("7d43"),_=n("9541"),I=n("91c8"),h=n("7646"),R=n("6580"),A=n("3a08"),N=n("dc23"),g=n("3054"),C=n("6ddb"),L=n("6186"),P=n("7ea0"),w=n("7051"),y=n("2040"),x=n("cf12"),D=n("4487"),k=n("32a1"),M=n("46a9"),j=n("f30c"),U=n("ce67"),Y=n("0952"),V=n("b5b8"),F=n("0388"),G=n("ce1c"),z=n("363b"),W=n("bc9b"),B=n("525b"),H=n("d3e7"),K=n("79e9"),Q=n("c563"),q=n("db7b"),X=n("c081"),J=n("b70a"),Z=n("1526"),$=n("b032"),ee=n("133b"),te=n("741d"),ne=n("6780");o["a"].use(i["a"],{config:{},i18n:a["a"],components:{QIcon:r["a"],QChip:s["a"],QTooltip:c["a"],QBtn:l["a"],QBtnToggle:u["a"],QScrollArea:d["a"],QInput:f["a"],QSelect:E["a"],QSlider:p["a"],QTree:T["a"],QList:S["a"],QListHeader:b["a"],QItem:O["a"],QItemMain:m["a"],QItemSide:v["a"],QItemTile:_["a"],QItemSeparator:I["a"],QCard:h["a"],QCardTitle:R["a"],QCardMain:A["a"],QCardMedia:N["a"],QCardSeparator:g["a"],QCardActions:C["a"],QSearch:L["a"],QAutocomplete:P["a"],QLayout:w["a"],QLayoutHeader:y["a"],QLayoutDrawer:x["a"],QLayoutFooter:D["a"],QPage:k["a"],QPageContainer:M["a"],QToolbar:j["a"],QToolbarTitle:U["a"],QModal:Y["a"],QPopover:V["a"],QDialog:F["a"],QContextMenu:G["a"],QResizeObservable:z["a"],QToggle:W["a"],QCheckbox:B["a"],QProgress:H["a"],QField:K["a"],QTabs:Q["a"],QTab:q["a"],QTabPane:X["a"],QSpinner:J["a"]},directives:{Ripple:Z["a"],TouchHold:$["a"]},plugins:{Notify:ee["a"],Cookies:te["a"],Dialog:ne["a"]}});var oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"q-app"}},[n("router-view")],1)},ae=[];oe._withStripped=!0;n("7514");var ie=n("3156"),re=n.n(ie),se=n("2f62"),ce=n("d247"),le=n("17dc"),ue=n("7cca"),de={name:"App",computed:re()({},Object(se["d"])("stomp",["subscriptions"]),Object(se["c"])("data",["session"]),Object(se["c"])("stomp",["queuedMessage"]),Object(se["c"])("view",["lastKexplorerLog","kexplorerLog"])),methods:re()({sendQueue:function(){if(this.queuedMessage){var e=this.queuedMessage,t=e.message,n=e.headers;this.sendStompMessage(t,n)}}},Object(se["b"])("data",["getSessionContexts"]),Object(se["b"])("stomp",{stompCleanQueue:"stomp_cleanqueue"})),sockets:{onconnect:function(e){var t=this;console.info("Connected to websocket"),console.debug("Connect frame:\n".concat(JSON.stringify(e,null,4)));var n=this.subscriptions.find(function(e){return e.id===t.session});"undefined"!==typeof n&&(console.warn("Invalidate session ".concat(this.session)),n.subscription.unsubscribe()),this.getSessionContexts().then(function(e){console.info("Retrieved ".concat(e," previous contexts"));var n=t.subscribe(t.session);t.subscriptions.push({id:t.session,subscription:n}),console.info("Session ".concat(t.session," subscribed with subscriptionid ").concat(n.id)),t.sendQueue()}).catch(function(e){console.warn("Problems with session restauration: ".concat(e)),t.disconnect()})},onmessage:function(e){var t=e.body,n=JSON.parse(t),o=n.type,a=n.payload;if(o===ce["a"].TYPE_TASKSTARTED){var i=this.subscribe(a.id);this.subscriptions.push({id:a.id,subscription:i}),console.debug("Task ".concat(a.id," subscribed with subscriptionid ").concat(i.id))}else if(o===ce["a"].TYPE_TASKABORTED||o===ce["a"].TYPE_TASKFINISHED){var r=this.subscriptions.find(function(e){return e.id===a.id});"undefined"!==typeof r&&r.subscription.unsubscribe()}},onsend:function(e){var t=e.headers,n=e.message;this.queuedMessage&&n===this.queuedMessage.message&&(this.stompCleanQueue(),console.debug("Send a queued message: ".concat(JSON.stringify(n)," with this headers: ").concat(JSON.stringify(t))))}},watch:{kexplorerLog:function(){var e=this.lastKexplorerLog();null===e||e.type!==ue["i"].TYPE_ERROR&&e.type!==ue["i"].TYPE_WARNING&&!e.important||(this.$q.notify({message:e.payload.message,type:e.type===ue["i"].TYPE_ERROR?"negative":e.type===ue["i"].TYPE_WARNING?"warning":"info",icon:e.type===ue["i"].TYPE_ERROR?"mdi-alert-circel":e.type===ue["i"].TYPE_WARNING?"mdi-alert":"mdi-information",timeout:1500}),e.type===ue["i"].TYPE_WARNING?console.warn(e.payload.message):e.type===ue["i"].TYPE_ERROR&&console.error(e.payload.message))}},beforeMount:function(){this.$store.dispatch("data/addObservation",{observation:ue["k"],main:!0},{root:!0})},mounted:function(){o["a"].config.warnHandler=function(e,t,n){-1===e.indexOf('"letter"')&&console.warn("[Intercepted Vue warn]: ".concat(e).concat(n))}},beforeDestroy:function(){var e=this,t=this.subscriptions.find(function(t){return t.id===e.session});"undefined"!==typeof t&&"function"===typeof t.unsubscribe&&t.unsubscribe(),this.sendStompMessage(le["a"].RESET_CONTEXT(this.$store.state.data.session).body)}},fe=de,Ee=(n("034f"),n("2877")),pe=Object(Ee["a"])(fe,oe,ae,!1,null,null,null);pe.options.__file="App.vue";var Te=pe.exports,Se=n("4360"),be=n("8c4f"),Oe=[{path:"/",component:function(){return Promise.all([n.e("a30fc80a"),n.e("72947692")]).then(n.bind(null,"7b3d"))},children:[{path:"/viewer",component:function(){return Promise.all([n.e("a30fc80a"),n.e("6f0c10e4")]).then(n.bind(null,"9261"))}}]},{path:"*",component:function(){return n.e("4b4818b8").then(n.bind(null,"ee5d"))}}];o["a"].use(be["a"]);var me=new be["a"]({mode:"history",base:"/modeler/ui/",scrollBehavior:function(e){return e.hash?{selector:"[id='".concat(e.hash.slice(1),"']")}:{x:0,y:0}},routes:Oe}),ve=me,_e=function(){var e="function"===typeof Se["a"]?Object(Se["a"])():Se["a"],t="function"===typeof ve?ve({store:e}):ve;e.$router=t;var n={el:"#q-app",router:t,store:e,render:function(e){return e(Te)}};return{app:n,store:e,router:t}},Ie=n("8449f"),he=n("be3b"),Re=n("a925"),Ae={label:{appTitle:"k.LAB Explorer EN",appRunning:"Running on Quasar v{version}",appClose:"Close",appOK:"Ok",appCancel:"Cancel",appRetry:"Retry",klabNoMessage:"No message",klabUnknownError:"Unknown error",klabNoDate:"No date",klabMessagesToSend:"There are one message in queue",modalNoConnection:"No connection, please wait",appFooter:"k.LAB Explorer - 2018",treeTitle:"Observation",reconnect:"Reconnect",unknownLabel:"Unknown",context:"context",noContext:"",contextShape:"context shape",noObservation:"No observations available",searchPlaceholder:"Search in k.LAB",fuzzySearchPlaceholder:"Search all",askForObservation:"Observing {urn}",noTokenDescription:"No description available",btnContextReset:"Reset context",contextReset:"Context reset",itemCounter:"{loaded} of {total}",logTab:"Log",treeTab:"Tree",noHistogramData:"No data",noInfoValues:"",noScaleReference:"",mcMenuScale:"Space & time:",mcMenuContext:"Context",mcMenuOption:"Options",titleOutputFormat:"Download observation",askForOuputFormat:"Select format",titleChangeScale:"Change {type} scale",askForNewScale:"Select new scale",resolutionLabel:"Resolution value",unitLabel:"Unit value",clickToEditScale:"Click to edit",clickToLock:"Click to lock scale",clickToUnlock:"Click to unlock scale",scaleLocked:"{type} scale locked",spaceScale:"Space",timeScale:"Time",labelCm:"Centimeters",labelM:"Meters",labelKm:"Kilometers",labelSpatial:"spatial",labelTemporal:"temporal",newContext:"New context",previousContexts:"Previous contexts",drawCustomContext:"Draw context",eraseCustomContext:"Erase custom context",addToCustomContext:"Add shape",drawPoint:"Point",drawLineString:"Line",drawPolygon:"Polygon",drawCircle:"Circle",optionShowAll:"Show all",optionSaveLocation:"Remember location",noNodes:"No observations",loadShowData:"Load and show data",interactiveMode:"Interactive mode",noInputSectionTitle:"No section title",cancelInputRequest:"Cancel run",resetInputRequest:"Use defaults",submitInputRequest:"Submit",IDLAlertTitle:"Warning!",recontextualization:"Set as context"},messages:{connectionClosed:"Connection closed",connectionWorking:"Trying to reconnect",connectionUnknown:"Starting...",noSpaceAllowedInSearch:"Spaces cannot be used in the search box",noSearchResults:"No search results",noActionForObservation:"No actions available",noTime:"no time",emptyReport:'<div id="mc-empty-report" class="print-hide">Empty report</div>',noLoadedReport:"No report loaded",copiedToClipboard:"Copied to clipboard",customCopyToClipboard:"{what} copied to clipboard",changeScaleResolutionError:"Resolution must be positive",updateScale:"Updated {type} scale, new value: {resolution} {unit}",invalidGeometry:"Polygon is not valid",spatialLocationSent:"Spatial location sent",geolocationWaitingTitle:"Enable geolocation?",geolocationWaitingText:"<em>k.Explorer</em> can detect your current location to initialize the geographical viewer.<br />In order to do so, <em>you need to authorize geolocation</em>.<br />This is merely for your convenience and <em>does not affect operation</em>.<br />Your choice will be remembered and can be changed at any time.",geolocationErrorPermissionDenied:"Geolocation has not been authorized",geolocationErrorPositionUnavailable:"Location information is unavailable",geolocationErrorTimeout:"A request to get the user location timed out",geolocationErrorUnknown:"An unknown error occurred",unknownSearchObservation:"Previous observations results",noLogItems:"Empty log",uploadComplete:"Upload of file {fileName} complete",IDLAlertText:"Actual view crossing the International Date Line. A drawn context is needed",lastTermAlertText:"No more terms allowed",parenthesisAlertText:"You have open parenthesis",emptyFreeTextSearch:"Empty search is not allowed",fuzzyModeOff:"Free search off",fuzzyModeOn:"Free search on",youHaveGOT:"Winter is coming"},tooltips:{treePane:"View tree",logPane:"View log",resetContext:"Reset context",interruptTask:"Interrupt task {taskDescription}",dataViewer:"View data",reportViewer:"View report",noReportTask:"Cannot view report,\nwait for task end",noReportObservation:"Report not available,\nno observations",noDataflow:"Dataflow not availble",dataflowViewer:"View data flow",provenanceViewer:"View provenance (will be...)",undock:"Undock",copyEncodedShapeToClipboard:"Copy context shape to clipboard",cancelInputRequest:"Cancel run",resetInputRequest:"Use default values",submitInputRequest:"Submit values"},errors:{connectionError:"Connection error",searchTimeout:"Search timeout",uploadError:"Upload error for the file {fileName}"},langName:"English"},Ne={label:{appTitle:"k.LAB Explorer ES",appRunning:"Ejecutándose sobre Quasar v{version}",appClose:"Cerrar",appOK:"Ok",appCancel:"Cancelar",appRetry:"Reintentar",klabNoMessage:"No hay ningún mensaje",klabUnknownError:"Error desconocido",klabNoDate:"No hay fecha",klabMessagesToSend:"Hay un mensaje en la cola",modalNoConnection:"No hay conexi&oacute;n, esperar",appFooter:"k.LAB Explorer - 2018",treeTitle:"Observaciones",reconnect:"Reconectar",unknownLabel:"Desconocido",context:"contesto",noContext:"",contextShape:"context shape",noObservation:"No hay observaciones",searchPlaceholder:"Buscar in k.LAB",fuzzySearchPlaceholder:"Buscar",askForObservation:"Pidiendo {urn}",noTokenDescription:"No hay descripción",btnContextReset:"Resetear contexto",contextReset:"Contexto reseteado",itemCounter:"{loaded} de {total}",logTab:"Log",treeTab:"Árbol",noHistogramData:"No data",noInfoValues:"",noScaleReference:"",mcMenuScale:"Espacio y tiempo:",mcMenuContext:"Contexto",mcMenuOption:"Optciones",titleOutputFormat:"Download observación",askForOuputFormat:"Seleccionar un formato",titleChangeScale:"Cambiar escala",askForNewScale:"Seleccionar nueva escala",resolutionLabel:"Valor de la escala",unitLabel:"Unidad de la escala",clickToEditScale:"Click para modificar",clickToLock:"Click para bloquear la escala",clickToUnlock:"Click para desbloquear la escala",scaleLocked:"{type} escala bloqueada",spaceScale:"Espacio",timeScale:"Tiempo",labelCm:"Centimetros",labelM:"Metros",labelKm:"Kilometros",labelSpatial:"espacial",labelTemporal:"temporal",newContext:"Nuevo contexto",previousContexts:"Contextos prévios",drawCustomContext:"Dibujar contexto",eraseCustomContext:"Borrar contexto",addToCustomContext:"Añadir shape",drawPoint:"Punto",drawLineString:"Línea",drawPolygon:"Polígono",drawCircle:"Circulo",optionShowAll:"Ver todas",optionSaveLocation:"Recordar posición",noNodes:"No results: is waiting?",loadShowData:"Cargar y visualizar datos",interactiveMode:"Modo interactivo",noInputSectionTitle:"No section title",cancelInputRequest:"Cancelar ejecución",resetInputRequest:"Utilizar defaults",submitInputRequest:"Enviar",IDLAlertTitle:"Cuidado!",recontextualization:"Fijar como contexto"},messages:{connectionClosed:"Conexión cerrada",connectionWorking:"Intentando reconectar",connectionUnknown:"Inicializando...",noSpaceAllowedInSearch:"No está permitido utilizar espacios en la búsqueda",noSearchResults:"No hay resultados",noActionForObservation:"No hay acciones disponibles",noTime:"sin información",emptyReport:'<div id="mc-empty-report" class="print-hide">Report vacío</div>',noLoadedReport:"No se ha cargado ningun report",copiedToClipboard:"Copiado",customCopyToClipboard:"{what} copiado",changeScaleResolutionError:"La resolución tiene que ser positiva",updateScale:"Actualizada  la escala {type}, nuevo valor {resolution} {unit}",invalidGeometry:"Polígono no válido",spatialLocationSent:"Spatial location enviada",geolocationWaitingTitle:"¿Habilitar la geolocalización?",geolocationWaitingText:"<em>k.Explorer</em> puede detectar tu posición actual para inicializar la vista geográfica.<br />Para hacer eso, <em>hay que autorizar la geolocalización</em>.<br />Esto es solamente por comodidad y<em>no afecta a la operatividad</em>.<br />Your choice will be remembered and can be changed at any time.",geolocationErrorPermissionDenied:"No se ha autorizado la geolocalización",geolocationErrorPositionUnavailable:"No hay información de posicionamiento",geolocationErrorTimeout:"Se ha superado el tiempo de espera para la geolocalización",geolocationErrorUnknown:"Ha habido un error desconocido",unknownSearchObservation:"Resultado de observaciones previas",noLogItems:"No hay elementos en el log",uploadComplete:"Upload del file {fileName} completado",IDLAlertText:"La selección actual cruza la IDL. Sólo está permitido en caso de dibujar un contexto",lastTermAlertText:"No están permitidos mas tokens",parenthesisAlertText:"Parentesis no balanceadas",emptyFreeTextSearch:"Búsqueda vacía",fuzzyModeOff:"Búsqueda libre desactivada",fuzzyModeOn:"Búsqueda libre activada",youHaveGOT:"Winter is coming"},tooltips:{treePane:"Ver árbol",logPane:"Ver log",resetContext:"Reset context",interruptTask:"Interrumpir proceso {taskDescription}",dataViewer:"Ver datos",reportViewer:"Ver report",noReportTask:"Cannot view report,\nwait for task end",noReportObservation:"Report no disponibile,\nno hay observaciones",noDataflow:"Dataflow no disponible",dataflowViewer:"Ver data flow",provenanceViewer:"Ver provenance (will be...)",undock:"Desacoplar",copyEncodedShapeToClipboard:"Copiar el contexto en el portapapeles",cancelInputRequest:"Cancelar ejecución",resetInputRequest:"Utilizar default",submitInputRequest:"Enviar"},errors:{connectionError:"Error de conexión",searchTimeout:"Tiempo de busqueda terminado",uploadError:"Error durante el upload del file {fileName}"},langName:"Español"},ge={label:{appTitle:"k.LAB Explorer IT",appRunning:"Esecutandosi con Quasar v{version}",appClose:"Chiudi",appOK:"Ok",appCancel:"Cancellare",appRetry:"Riprovare",klabNoMessage:"Nessun messaggio",klabUnknownError:"Errore sconosciuto",klabNoDate:"Nessuna data",klabMessagesToSend:"C'è un messaggio in coda",modalNoConnection:"Non c'è connessione",appFooter:"k.LAB Explorer - 2018",treeTitle:"Osservazioni",reconnect:"Riconnettere",unknownLabel:"Sconosciuto",context:"contesto",noContext:"",contextShape:"context shape",noObservation:"Nessuna osservazione disponibile",searchPlaceholder:"Cerca in k.LAB",fuzzySearchPlaceholder:"Cerca",askForObservation:"Chiedendo {urn}",noTokenDescription:"Descrizione non disponibile",btnContextReset:"Resettare il contesto",contextReset:"Contesto resettato",itemCounter:"{loaded} di {total}",logTab:"Log",treeTab:"Albero",noHistogramData:"No data",noInfoValues:"",noScaleReference:"",mcMenuScale:"Spazio e tempo",mcMenuContext:"Contesto",mcMenuOption:"Optziono",titleOutputFormat:"Download osservazione",askForOuputFormat:"Selezionare un formato",titleChangeScale:"Cambiare scala",askForNewScale:"Seleccionar la nueva escala",resolutionLabel:"Valore della scala",unitLabel:"Unità della scala",clickToEditScale:"Click per modificare",clickToLock:"Click per bloccare la scala",clickToUnlock:"Click per sbloccare la scala",scaleLocked:"{type} scala bloccata",spaceScale:"Spacio",timeScale:"Tempo",labelCm:"Centimetri",labelM:"Metri",labelKm:"Kilometri",labelSpatial:"spaziale",labelTemporal:"temporale",newContext:"Constesto nuovo",previousContexts:"Contesti precedenti",drawCustomContext:"Disegnare contesto",eraseCustomContext:"Eliminare contesto",addToCustomContext:"Aggiungere shape",drawPoint:"Punto",drawLineString:"Linea",drawPolygon:"Poligono",drawCircle:"Cerchio",optionShowAll:"Vedere tutte",optionSaveLocation:"Ricordare posizione",noNodes:"No results: is waiting?",loadShowData:"Caricare e visualizzare dati",interactiveMode:"Modo interattivo",noInputSectionTitle:"Sezione senza titolo",cancelInputRequest:"Cancellare esecuzion",resetInputRequest:"Utilizzare defaults",submitInputRequest:"Inviare",IDLAlertTitle:"Attenzione!",recontextualization:"Settare come contesto"},messages:{connectionClosed:"Connessione chiusa",connectionWorking:"Cercando di riconnettere",connectionUnknown:"Inizializzando...",noSpaceAllowedInSearch:"Non è permesso utilizare spazi nella ricerca",noSearchResults:"Non esistono risultati",noActionForObservation:"Nessuna azione disponibile",noTime:"senza informazione di ora",emptyReport:'<div id="mc-empty-report" class="print-hide">Report vuoto</div>',noLoadedReport:"Non si è caricato nessun report",copiedToClipboard:"Copiato",customCopyToClipboard:"{what} copiato",changeScaleResolutionError:"La risoluzione deve essere positiva",updateScale:"Attualizata  la scala {type}, nuovo valore {resolution} {unit}",invalidGeometry:"Poligono non valido",spatialLocationSent:"Spatial location inviata",geolocationWaitingTitle:"Attivare la geolocalizzazione?",geolocationWaitingText:"<em>k.Explorer</em> può detettare la posizione per inizializzare la vista geografica.<br />Perché questo sia possibile, <em>è necessario autorizzare la geolocalizzazione</em>.<br />Quest'ultimo è esclusivamente per comodità e <em>non influenza l'operatività</em>.<br />Your choice will be remembered and can be changed at any time.",geolocationErrorPermissionDenied:"Non si ha autorizzato la geolocalizzazione",geolocationErrorPositionUnavailable:"Posizione non disponibile",geolocationErrorTimeout:"Terminato il tempo di attesa per la geolocalizzazione",geolocationErrorUnknown:"Errore imprevisto",unknownSearchObservation:"Risultato di osservazioni previe",noLogItems:"Il log è vuoto",uploadComplete:"Upload del file {fileName} completato",IDLAlertText:"La selezione attuale incrocia la IDL. per poterlo fare è necessario disegnare un contesto",lastTermAlertText:"Non sono permessi altri token",parenthesisAlertText:"Paretesi sbilanciate",emptyFreeTextSearch:"Ricerca vuota",fuzzyModeOff:"Ricerca libers disattivata",fuzzyModeOn:"Ricerca libera attivata",youHaveGOT:"Winter is coming"},tooltips:{treePane:"Albero",logPane:"Log",resetContext:"Reset context",interruptTask:"Interrompere processo {taskDescription}",dataViewer:"Vedere dati",reportViewer:"Vedere report",noReportTask:"Report non disponibile,\naspettare",noReportObservation:"Report non disponibile,\nnon ci sono osservazioni",noDataflow:"Dataflow non disponible",dataflowViewer:"Vedere data flow (will be...)",provenanceViewer:"Vedere provenance (will be...)",undock:"Sganciare",copyEncodedShapeToClipboard:"Copia il contesto negli appunti",cancelInputRequest:"Cancellare esecuzion",resetInputRequest:"Utilizzare default",submitInputRequest:"Inviare"},errors:{connectionError:"Errore di connessione",searchTimeout:"Tempo di ricerca terminato",uploadError:"Errore durante l'upload del file {fileName}"},langName:"Italiano"},Ce={en:Ae,es:Ne,it:ge},Le=function(e){var t=e.app,n=e.Vue;n.use(Re["a"]);var o="en";te["a"].has(ue["s"].COOKIE_LANG)?(o=te["a"].get(ue["s"].COOKIE_LANG),console.debug("Locale setted from cookie to ".concat(o))):(te["a"].set(ue["s"].COOKIE_LANG,o,{expires:30,path:"/"}),console.debug("Lang cookie setted to ".concat(o))),t.i18n=new Re["a"]({locale:o,fallbackLocale:"en",messages:Ce})},Pe=n("2369"),we=(n("cadf"),n("456d"),n("f559"),n("970b")),ye=n.n(we),xe=n("5bc30"),De=n.n(xe),ke=n("cc7d"),Me=n.n(ke),je=n("c6e1"),Ue=n.n(je),Ye=(n("f400"),function(){function e(){ye()(this,e),this.listeners=new Map}return De()(e,[{key:"addListener",value:function(e,t,n){return"function"===typeof t&&(this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push({callback:t,vm:n}),!0)}},{key:"removeListener",value:function(e,t,n){var o,a=this.listeners.get(e);return!!(a&&a.length&&(o=a.reduce(function(e,o,a){return"function"===typeof o.callback&&o.callback===t&&o.vm===n&&(e=a),e},-1),o>-1))&&(a.splice(o,1),this.listeners.set(e,a),!0)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a=this.listeners.get(e);return!(!a||!a.length)&&(a.forEach(function(e){var t;(t=e.callback).call.apply(t,[e.vm].concat(n))}),!0)}}]),e}()),Ve=new Ye,Fe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(ye()(this,e),!t)throw new Error("Connection url is needed");this.connectionUrl=t,this.connectionHeaders=n;var a=o.stompOptions,i=void 0===a?{debug:!1}:a,r=o.sockJSOptions,s=void 0===r?{}:r,c=o.reconnection,l=void 0!==c&&c,u=o.reconnectionAttempts,d=void 0===u?1/0:u,f=o.reconnectionDelay,E=void 0===f?2e3:f,p=o.debug,T=void 0!==p&&p,S=o.store,b=void 0===S?null:S,O=o.storeNS,m=void 0===O?"":O;this.reconnection=l,this.reconnectionAttempts=d,this.reconnectionDelay=E,this.hasDebug=T,this.reconnectTimeoutId=-1,this.reconnectionCount=0,"undefined"!==typeof b&&null!==b&&(this.store=b,this.storeNS=m),this.stompOptions=i,this.sockJSOptions=s,this.connect()}return De()(e,[{key:"debug",value:function(){var e;this.hasDebug&&(e=console).debug.apply(e,arguments)}},{key:"connect",value:function(){var e=this,t=Me()(this.connectionUrl,{},this.sockJSOptions);t.protocol=this.stompOptions.protocol||"",this.StompClient=Ue.a.over(t,this.stompOptions),this.StompClient.connect(this.connectionHeaders,function(t){e.doOnEvent("onconnect",t)},function(t){return setTimeout(function(){e.doOnEvent("onerror",t)},1e3)})}},{key:"isConnected",value:function(){return this.StompClient&&this.StompClient.connected}},{key:"reconnect",value:function(){var e=this;this.reconnectionCount<=this.reconnectionAttempts?(this.reconnectionCount+=1,clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=setTimeout(function(){e.doOnEvent("reconnect",e.reconnectionCount),e.connect()},this.reconnectionDelay)):this.store&&this.passToStore("stomp_onerror","Reconnection error")}},{key:"subscribe",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){t.doOnEvent("onmessage",e)};if(e){var a=this.StompClient.subscribe(e,o,n);if(a)return this.doOnEvent("onsubscribe",a),a}return null}},{key:"unsubscribe",value:function(e,t){this.StompClient.unsubscribe(e,t)}},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.isConnected()?(this.StompClient.send(e,JSON.stringify(t),n),this.doOnEvent("onsend",{headers:n,message:t}),!0):(this.doOnEvent("onerrorsend",{headers:n,message:t}),!1)}},{key:"doOnEvent",value:function(e,t){Ve.emit(e,t)||this.debug("No listener for ".concat(e)),this.store&&this.passToStore("stomp_".concat(e),t),this.reconnection&&"onoconnect"===e&&(this.reconnectionCount=0),this.reconnection&&"onerror"===e&&this.reconnect()}},{key:"passToStore",value:function(e,t){if(e.startsWith("stomp_")){var n="dispatch",o=[this.storeNS||"",e.toLowerCase()].filter(function(e){return!!e}).join("/"),a=t||null;t&&t.data&&(a=JSON.parse(t.data),a.mutation?o=[a.namespace||"",a.mutation].filter(function(e){return!!e}).join("/"):a.action&&(n="dispatch",o=[a.namespace||"",a.action].filter(function(e){return!!e}).join("/"))),this.store[n](o,a)}}},{key:"close",value:function(){this.StompClient&&(this.StompClient.disconnect(),this.doOnEvent("onclose")),this.reconnectTimeoutId&&clearTimeout(this.reconnectTimeoutId)}}]),e}(),Ge={install:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t)throw new Error("[vue-stomp-client] cannot locate connection");var a=null;o.connectManually?(e.prototype.$connect=function(){a=new Fe(t,n,o),e.prototype.$stompClient=a.StompClient},e.prototype.$disconnect=function(){a&&a.reconnection&&(a.reconnection=!1),e.prototype.$stompClient&&(a.close(),delete e.prototype.$stompClient)}):(a=new Fe(t,n,o),e.prototype.$stompClient=a.StompClient),e.mixin({methods:{sendStompMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.defaultMessageDestination;a.send(n,e,t),console.debug("Message sent: ".concat(JSON.stringify(e,null,4)))},subscribe:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.defaultSubscribeDestination;return a.subscribe("".concat(i,"/").concat(e),t,n)},unsubscribe:function(e){a.unsubscribe(e),console.debug("Unsubscribe the subscription with id ".concat(e))},reconnect:function(){a.StompClient&&!a.StompClient.connected&&(console.debug("Try to reconnect..."),a.reconnect())},disconnect:function(){a&&a.reconnection&&(a.reconnection=!1),a.close()}},created:function(){var e=this;if(this.$options.sockets){var t=this,n=this.$options.sockets;this.$options.sockets=new Proxy({},{set:function(e,n,o){return Ve.addListener(n,o,t),e[n]=o,!0},deleteProperty:function(e,n){return Ve.removeListener(n,t.$options.sockets[n],t),delete e.key,!0}}),n&&Object.keys(n).forEach(function(t){e.$options.sockets[t]=n[t]})}},beforeDestroy:function(){var e=this;if(this.$options.sockets){var t=this.$options.sockets;t&&Object.keys(t).forEach(function(t){console.debug("Remove listener ".concat(t)),Ve.removeListener(t,e.$options.sockets[t],e),delete e.$options.sockets[t]})}}})}},ze=function(e){var t=e.Vue,n=e.store;t.use(Ge,"/modeler/message",{},{stompOptions:{debug:!1,protocol:"v12.stomp"},store:n,storeNS:"stomp",reconnection:!1,debug:!1,defaultMessageDestination:"/klab/message",defaultSubscribeDestination:"/message"})},We=_e(),Be=We.app,He=We.store,Ke=We.router;[Ie["a"],he["b"],Le,Pe["a"],ze].forEach(function(e){e({app:Be,router:Ke,store:He,Vue:o["a"],ssrContext:null})}),new o["a"](Be)},4360:function(e,t,n){"use strict";var o,a=n("2b0e"),i=n("2f62"),r=n("7cca"),s={kexplorerLog:[],statusTexts:[],klabLog:[],dataViewers:[],mainDataViewerIdx:0,lastViewerId:0,mainViewer:void 0,leftMenuContent:null,leftMenuState:r["g"].LEFTMENU_HIDDEN,mainControlDocked:!1,contextGeometry:null,spinner:r["p"].SPINNER_STOPPED,spinnerOwners:[],searchActive:!1,searchFocus:!1,searchLostChar:"",searchHistory:[],reloadReport:!1,reloadDataflow:!1,observationInfo:null,mapSelection:r["b"].EMPTY_MAP_SELECTION,exploreMapMode:!1,treeSelected:null,treeTicked:[],treeExpanded:[],topLayer:null,scaleEditing:{active:!1,type:null},drawMode:!1,customContext:!1,saveLocation:!0,modalMode:!1,inputRequests:[]},c=(n("7f7f"),n("7514"),n("448a")),l=n.n(c),u=n("b12a"),d=n("b0b2"),f={kexplorerLog:function(e){return e.kexplorerLog},lastKexplorerLog:function(e){return function(t){return Object(u["g"])(e.kexplorerLog,t)}},klabLog:function(e){return e.klabLog},lastKlabLog:function(e){return function(t){return Object(u["g"])(e.klabLog,t)}},klabLogReversedAndFiltered:function(e){return function(t){if(0===e.klabLog.length)return[];var n=l()(e.klabLog).reverse();return void 0===t?n:n.find(function(e){return e.type===t})}},statusTexts:function(e){return e.statusTexts},statusTextsLength:function(e){return e.statusTexts.length},statusTextsString:function(e){return e.statusTexts.length>0?e.statusTexts.map(function(e){return e.text}).join(" - "):""},mainViewer:function(e){return e.mainViewer},mainViewerName:function(e){return e.mainViewer?e.mainViewer.name:null},leftMenuContent:function(e){return e.leftMenuContent},leftMenuState:function(e){return e.leftMenuState},hasMainControl:function(e){return e.mainViewer&&e.mainViewer.mainControl},isMainControlDocked:function(e){return e.mainControlDocked},contextGeometry:function(e){return e.contextGeometry},dataViewers:function(e){return e.dataViewers},mainDataViewer:function(e){return e.dataViewers.find(function(e){return e.main})},mainDataViewerIdx:function(e){return e.mainDataViewerIdx},lastViewerId:function(e){return e.lastViewerId},viewer:function(e){return function(t){return e.dataViewers.length>0?e.dataViewers.find(function(e){return e.idx===t}):null}},spinnerIsAnimated:function(e){return e.spinner.animated},spinner:function(e){return e.spinner},spinnerOwners:function(e){return e.spinnerOwners},spinnerColor:function(e){return"undefined"!==e.spinner&&null!==e.spinner?Object(d["e"])(e.spinner.color):null},spinnerErrorMessage:function(e){return"undefined"!==e.spinner&&null!==e.spinner?e.spinner.errorMessage:null},searchIsActive:function(e){return e.searchActive},searchIsFocused:function(e){return e.searchFocus},searchLostChar:function(e){return e.searchLostChar},searchHistory:function(e){return e.searchHistory},observationInfo:function(e){return e.observationInfo},mapSelection:function(e){return e.mapSelection},hasObservationInfo:function(e){return null!==e.observationInfo},exploreMode:function(e){return!!(null!==e.observationInfo&&Object(u["f"])(e.observationInfo)&&e.observationInfo.dataSummary.histogram.length>0&&e.observationInfo.visible&&e.observationInfo.top)},isScaleEditing:function(e){return e.scaleEditing.active},scaleEditingType:function(e){return e.scaleEditing.type},isDrawMode:function(e){return e.drawMode},hasCustomContext:function(e){return e.customContext},topLayer:function(e){return e.topLayer},topLayerId:function(e){return null!==e.topLayer?e.topLayer.id:null},inputRequests:function(e){return e.inputRequests},hasInputRequests:function(e){return 0!==e.inputRequests.length},isInModalMode:function(e){return e.modalMode}},E=n("3156"),p=n.n(E),T=(n("ac6a"),n("20d6"),{ADD_TO_KEXPLORER_LOG:function(e,t){Object(u["h"])(e.kexplorerLog,t),console.debug("".concat(t.type,": ").concat(JSON.stringify(t.payload,null,4)))},ADD_TO_KLAB_LOG:function(e,t){Object(u["h"])(e.klabLog,t)},ADD_TO_STATUS_TEXTS:function(e,t){var n=t.id,o=t.text;e.statusTexts.push({id:n,text:o})},REMOVE_FROM_STATUS_TEXTS:function(e,t){var n=e.statusTexts.findIndex(function(e){return e.id===t});-1!==n&&e.statusTexts.splice(n,1)},SET_CONTEXT_LAYER:function(e,t){e.dataViewers.splice(0,e.dataViewers.length),e.lastViewerId=0,e.contextGeometry=t,e.treeExpanded=[],e.treeTicked=[],e.treeSelected=null,e.topLayer=null},SET_MAIN_VIEWER:function(e,t){e.mainViewer=t},SET_LEFTMENU_CONTENT:function(e,t){e.leftMenuContent=t},SET_LEFTMENU_STATE:function(e,t){e.leftMenuState=t},SET_MAIN_DATA_VIEWER:function(e,t){var n=t.viewerIdx,o=t.visible;if(o)e.dataViewers.forEach(function(t){t.idx===n?(t.main=!0,e.mainDataViewerIdx=n):t.main=!1,t.visible=!t.type.hideable||t.idx===n||t.visible});else{var a=!1;e.dataViewers.forEach(function(t){a||t.type.hideable&&!t.visible?(t.main=!1,t.type.hideable&&t.idx===n&&(t.visible=!1)):(t.main=!0,e.mainDataViewerIdx=t.idx,a=!0)})}},RESET_MAIN_DATA_VIEWER:function(e){e.dataViewer=[],e.mainDataViewerIdx=0},SET_MAIN_CONTROL_DOCKED:function(e,t){e.mainControlDocked=t},ADD_VIEWER_ELEMENT:function(e,t){var n=t.main,o=t.type,a=t.label,i=t.visible,r=t.callback;0===e.lastViewerId?n=!0:!0===n&&e.dataViewers.forEach(function(e){e.main=!1}),e.lastViewerId+=1,e.dataViewers.push({idx:e.lastViewerId,main:n,type:o,label:a,visible:i,observations:[]}),"function"===typeof r&&r(e.lastViewerId)},SET_SPINNER_ANIMATED:function(e,t){e.spinner.animated=t},SET_SPINNER_COLOR:function(e,t){e.spinner.color=t},SET_SPINNER:function(e,t){var n=t.animated,o=t.color,a=t.errorMessage,i=void 0===a?null:a;e.spinner={animated:n,color:o,errorMessage:i}},ADD_TO_SPINNER_OWNERS:function(e,t){var n=e.spinnerOwners.indexOf(t);-1===n&&e.spinnerOwners.push(t)},REMOVE_FROM_SPINNER_OWNERS:function(e,t){var n=e.spinnerOwners.indexOf(t);-1!==n&&e.spinnerOwners.splice(n,1)},SEARCH_ACTIVE:function(e,t){var n=t.active,o=t.char,a=void 0===o?"":o;e.searchActive!==n&&(e.searchLostChar=a,e.searchActive=n)},SEARCH_FOCUS:function(e,t){var n=t.focused,o=t.char,a=void 0===o?"":o;e.searchFocus!==n&&(e.searchLostChar=a,e.searchFocus=n)},RESET_SEARCH_LOST_CHAR:function(e){e.searchLostChar=""},RESET_SEARCH:function(e){e.searchActive=!1,e.searchFocus=!1,e.searchLostChar=""},STORE_SEARCH:function(e,t){e.searchHistory.unshift(t)},SET_RELOAD_REPORT:function(e,t){e.reloadReport=t},SET_RELOAD_DATAFLOW:function(e,t){e.reloadDataflow=t},SET_OBSERVATION_INFO:function(e,t){null===t?(e.treeSelected=null,e.mapSelection.locked||(e.mapSelection=r["b"].EMPTY_MAP_SELECTION),e.observationInfo=null):null!==e.observationInfo&&t.id===e.observationInfo.id||(e.observationInfo=t,e.mapSelection.locked||(e.mapSelection=r["b"].EMPTY_MAP_SELECTION),e.treeSelected=t.id)},SET_MAP_SELECTION:function(e,t){var n=t.pixelSelected,o=t.layerSelected,a=t.value,i=void 0===a?null:a,s=t.locked,c=void 0!==s&&s;e.mapSelection=null===t||null===n?r["b"].EMPTY_MAP_SELECTION:{pixelSelected:n,layerSelected:o,value:i,locked:c}},SET_SCALE_EDITING:function(e,t){var n=t.active,o=t.type;e.scaleEditing={active:n,type:o}},SET_DRAW_MODE:function(e,t){e.drawMode=t},SET_CUSTOM_CONTEXT:function(e,t){e.customContext=t},SET_SAVE_LOCATION:function(e,t){e.saveLocation=t},SET_TOP_LAYER:function(e,t){e.topLayer=t},SET_MODAL_MODE:function(e,t){e.modalMode=t},SET_INPUT_REQUEST:function(e,t){var n=t.payload,o=t.id;e.inputRequests.push(p()({messageId:o},n))},REMOVE_INPUT_REQUEST:function(e,t){if(e.inputRequests.length>0)if(null===t)e.inputRequests.splice(0,e.inputRequests.length);else{var n=e.inputRequests.findIndex(function(e){return e.messageId===t});-1!==n&&e.inputRequests.splice(n,1)}}}),S=(n("551c"),n("c1df")),b=n.n(S),O=n("256f"),m={addToKexplorerLog:function(e,t){var n=e.commit,o=t.type,a=t.payload,i=t.important,r=void 0!==i&&i;n("ADD_TO_KEXPLORER_LOG",{type:o,payload:a,important:r,time:b()()})},addToKlabLog:function(e,t){var n=e.commit,o=t.type,a=t.id,i=t.payload,r=t.timestamp;n("ADD_TO_KLAB_LOG",{type:o,id:a,payload:i,time:b()(r)})},addToStatusTexts:function(e,t){var n=e.commit,o=t.id,a=t.text;n("ADD_TO_STATUS_TEXTS",{id:o,text:a})},removeFromStatusTexts:function(e,t){var n=e.commit;n("REMOVE_FROM_STATUS_TEXTS",t)},setContextLayer:function(e,t){var n=e.commit,o=e.dispatch;Object(u["c"])(t).then(function(e){n("SET_CONTEXT_LAYER",e),n("RESET_SEARCH"),o("assignViewer",{observation:t,main:!0})})},resetContext:function(e){var t=e.commit;t("SET_CONTEXT_LAYER",null),t("RESET_SEARCH"),t("SET_OBSERVATION_INFO",null);var n=r["q"].DATA_VIEWER;t("SET_LEFTMENU_CONTENT",n.leftMenuContent),t("SET_LEFTMENU_STATE",n.leftMenuState),t("SET_MAIN_VIEWER",n),t("RESET_MAIN_DATA_VIEWER",null)},setMainViewer:function(e,t){var n=e.state,o=e.commit,a=e.dispatch;t&&"undefined"!==typeof n.mainViewer&&(n.mainViewer.leftMenuContent===r["g"].DOCKED_DATA_VIEWER_COMPONENT?o("SET_MAIN_CONTROL_DOCKED",!0):n.mainViewer.leftMenuContent===r["g"].DATA_VIEWER_COMPONENT&&o("SET_MAIN_CONTROL_DOCKED",!1)),o("SET_MAIN_VIEWER",t),t&&(a("setLeftMenuState",t.leftMenuState),a("setLeftMenuContent",t.leftMenuContent))},setLeftMenuContent:function(e,t){var n=e.commit;n("SET_LEFTMENU_CONTENT",t)},setLeftMenuState:function(e,t){var n=e.commit;n("SET_LEFTMENU_STATE",t)},setMainDataViewer:function(e,t){var n=e.commit,o=e.getters,a=t.viewerIdx,i=t.viewerType,r=void 0===i?null:i,s=t.visible,c=void 0===s||s;(c&&a!==o.mainDataViewerIdx||!c&&null!==r&&r.hideable)&&n("SET_MAIN_DATA_VIEWER",{viewerIdx:a,visible:c})},assignViewer:function(e,t){var n=e.commit,o=e.getters,a=e.dispatch,i=e.rootGetters,s=t.observation,c=t.main,l=void 0!==c&&c;return new Promise(function(e,t){var c,d=null,f=null;if(s.observationType)switch(s.observationType){case r["j"].TYPE_GROUP:d=null;break;case r["j"].TYPE_STATE:if(1===s.valueCount)d=null;else{d=r["r"].VIEW_MAP;var E=null;if(E=s.parentId===i["data/contextId"]?i["data/context"]:Object(u["a"])(i["data/tree"],s.parentId),null!==E){s.encodedShape=E.encodedShape;var p=E;f=p.label}else console.warn("Need parent of ".concat(s.id," but doesn't find it. Parent id is ").concat(s.parentId))}break;case r["j"].TYPE_INITIAL:case r["j"].TYPE_SUBJECT:case r["j"].TYPE_RELATIONSHIP:d=r["r"].VIEW_MAP;var T=null;if(null!==s.parentId&&(T=Object(u["a"])(i["data/tree"],s.rootContextId),"undefined"===typeof T&&(console.warn("Observation with id ".concat(s.id," has an invalid rootContextId: ").concat(s.rootContextId)),T=null)),null!==T){var S=T;f=S.label}else f=s.label;break;case r["j"].TYPE_CONFIGURATION:d=r["r"].VIEW_GRAPH,f=s.label;break;case r["j"].TYPE_EVENT:case r["j"].TYPE_PROCESS:d=r["r"].VIEW_UNKNOWN;break;default:t(new Error("Unknown observation type in observation labeled ".concat(s.label,": ").concat(s.observationType)));break}null!==d?(console.debug("Need a viewer of type ".concat(d.component)),d.forceNew||(c=o.dataViewers.find(function(e){return e.type.component===d.component})),"undefined"===typeof c?(console.info("Create new viewer of type ".concat(d.component)),n("ADD_VIEWER_ELEMENT",{main:l,type:d,label:f&&null!==f?f:d.label,visible:!d.hideable,callback:function(t){e(t)}})):(l&&a("setMainDataViewer",{viewerIdx:c.idx}),e(c.idx))):e(null)})},setSpinner:function(e,t){var n=e.commit,o=e.getters,a=e.dispatch,i=t.animated,s=t.color,c=t.time,l=void 0===c?null:c,u=t.then,d=void 0===u?null:u,f=t.errorMessage,E=void 0===f?null:f,T=t.owner;return new Promise(function(e){if(!T||null===T)throw new Error("No spinner owner!");i?n("ADD_TO_SPINNER_OWNERS",T):(n("REMOVE_FROM_SPINNER_OWNERS",T),0!==o.spinnerOwners.length&&(i=!0,s!==r["p"].SPINNER_ERROR.color&&(s=r["p"].SPINNER_LOADING.color))),n("SET_SPINNER",{animated:i,color:s,errorMessage:E}),null!==l&&null!==d&&setTimeout(function(){a("setSpinner",p()({},d,{owner:T}))},1e3*l),e()})},searchStart:function(e){var t=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t("SEARCH_ACTIVE",{active:!0,char:n})},searchStop:function(e){var t=e.commit;t("SEARCH_ACTIVE",{active:!1})},searchFocus:function(e,t){var n=e.commit,o=t.focused,a=t.char,i=void 0===a?null:a;n("SEARCH_FOCUS",{focused:o,char:i})},resetSearchLostChar:function(e){var t=e.commit;t("RESET_SEARCH_LOST_CHAR")},storePreviousSearch:function(e,t){var n=e.commit;n("STORE_SEARCH",t)},setReloadReport:function(e,t){var n=e.commit;n("SET_RELOAD_REPORT",t)},setObservationInfo:function(e,t){var n=e.commit;n("SET_OBSERVATION_INFO",t)},setMapSelection:function(e,t){var n=e.commit,o=e.state,a=t.pixelSelected,i=t.layerSelected,s=void 0===i?null:i,c=t.observationId,l=void 0===c?null:c,d=t.locked,f=void 0!==d&&d;if(null!==a){null===l&&(l=o.observationInfo.id);var E="".concat("").concat("/modeler/engine/session/view/","data/").concat(l),p=Object(O["k"])(a,"EPSG:3857","EPSG:4326");Object(u["b"])("pv_".concat(l),E,{params:{format:"SCALAR",locator:"S0(1){latlon=[".concat(p[0]," ").concat(p[1],"]}")}},function(e,t){var o="No value";e&&"undefined"!==typeof e.data&&(o=e.data),n("SET_MAP_SELECTION",{pixelSelected:a,layerSelected:s,value:o,locked:f}),t()})}else n("SET_MAP_SELECTION",r["b"].EMPTY_MAP_SELECTION)},setScaleEditing:function(e,t){var n=e.commit,o=t.active,a=t.type;n("SET_SCALE_EDITING",{active:o,type:a}),n("SET_MODAL_MODE",o)},setDrawMode:function(e,t){var n=e.commit;n("SET_DRAW_MODE",t),n("SET_MODAL_MODE",t)},setCustomContext:function(e,t){var n=e.commit;n("SET_CUSTOM_CONTEXT",t)},setTopLayer:function(e,t){var n=e.commit;n("SET_TOP_LAYER",t)},inputRequest:function(e,t){var n=e.commit;n("SET_INPUT_REQUEST",t),n("SET_MODAL_MODE",!0)},removeInputRequest:function(e,t){var n=e.commit,o=e.getters;n("REMOVE_INPUT_REQUEST",t),o.hasInputRequests||n("SET_MODAL_MODE",!1)},setModalMode:function(e,t){var n=e.commit;n("SET_MODAL_MODE",t)}},v={namespaced:!0,state:s,getters:f,mutations:T,actions:m},_=n("970b"),I=n.n(_),h=n("5bc30"),R=n.n(h),A=function(){function e(){I()(this,e),this.items=[]}return R()(e,[{key:"push",value:function(e){this.items.push(e)}},{key:"pop",value:function(e){if("undefined"!==typeof e&&e>0){if(e>this.size()-1)throw Error("Stack overflow");return this.items.splice(e+1),this.items.peek()}return this.items.pop()}},{key:"peek",value:function(){return 0===this.items.length?null:this.items[this.items.length-1]}},{key:"previous",value:function(){return this.items.length<=1?null:this.items[this.items.length-2]}},{key:"size",value:function(){return this.items.length}},{key:"findIndex",value:function(e){return this.items.findIndex(e)}},{key:"map",value:function(e){return this.items.map(e)}},{key:"empty",value:function(){this.items.splice(0)}},{key:"isEmpty",value:function(){return 0===this.items.length}},{key:"toArray",value:function(){return this.items}}]),e}(),N={tree:[],lasts:[],contexts:new A,scaleReference:null,scaleLocked:{space:!1,time:!1},observations:[],dataflow:null,dataflowStatuses:[],dataflowInfo:null,session:null,contextsHistory:[],waitingForReset:null,orphans:[],searchResult:null,childrenToAskFor:r["b"].CHILDREN_TO_ASK_FOR,interactiveMode:!1,crossingIDL:!1},g=(n("55dd"),{tree:function(e){return e.tree},visibleTree:function(e){return function(t){if(t){var n=function e(t){return t.filter(function(e){return e.notified}).map(function(t){return p()({},t,{children:t.children&&e(t.children)})})};return n(e.tree)}return e.tree}},treeNode:function(e){return function(t){return Object(u["a"])(e.tree,t)}},lasts:function(e){return e.lasts},hasTree:function(e){return e.tree.length>0},observations:function(e){return e.observations},observationsOfViewer:function(e){return function(t){return e.observations.filter(function(e){return e.viewerIdx===t})}},hasObservations:function(e){return 0!==e.observations.length},dataflow:function(e){return e.dataflow},hasDataflow:function(e){return null!==e.dataflow},dataflowStatuses:function(e){return e.dataflowStatuses},dataflowInfo:function(e){return e.dataflowInfo},contextsId:function(e){return e.contexts.map(function(e){return e.id})},context:function(e){return e.contexts.peek()},contextsCount:function(e){return e.contexts.size()},previousContext:function(e){return e.contexts.previous()},contextById:function(e){return function(t){return e.contexts.find(function(e){return e.id===t})}},hasContext:function(e,t){return null!==t.context},contextLabel:function(e,t){return null!==t.context?t.context.label:null},contextsLabels:function(e,t){return null!==t.context?e.contexts.map(function(e){return{label:e.label,contextId:e.id}}):[]},contextId:function(e,t){return null!==t.context?t.context.id:null},contextEncodedShape:function(e,t){return null!==t.context?"".concat(t.context.spatialProjection," ").concat(t.context.encodedShape):""},contextsHistory:function(e){return e.contextsHistory.length>0&&e.contextsHistory.sort(function(e,t){return e.creationTime===t.creationTime?0:e.creationTime>t.creationTime?-1:1}),e.contextsHistory},contextReloaded:function(e,t){return null!==t.context&&"undefined"!==typeof t.context.restored&&t.context.restored},session:function(e){return e.session},scaleReference:function(e,t){return null!==t.context?t.context.scaleReference:e.scaleReference},isScaleLocked:function(e){return e.scaleLocked},searchResult:function(e){return e.searchResult},interactiveMode:function(e){return e.interactiveMode},isCrossingIDL:function(e){return e.crossingIDL}}),C=n("9523"),L=n.n(C),P=(n("6762"),n("f559"),{SET_CONTEXT:function(e,t){var n=t.context,o=void 0===n?null:n,a=t.isRecontext,i=void 0!==a&&a;if(null===o)e.contexts.empty();else if(i){var r=e.contexts.peek();o.scaleReference=r.scaleReference,e.contexts.push(o)}else{var s=e.contexts.findIndex(function(e){return e.id===o.id});-1===s?e.contexts.push(o):e.contexts.pop(s)}e.tree=[],e.lasts=[],e.observations=[],e.dataflow=null,e.dataflowStatuses=[],e.dataflowInfo=null,e.nodeSelected=null,e.crossingIDL=!1,null===o?e.contextsHistory=[]:"undefined"===typeof o.restored&&(o.restored=!1)},WAITING_FOR_RESET:function(e,t){e.waitingForReset=t},STORE_CONTEXT:function(e,t){var n=e.contextsHistory.find(function(e){return e.id===t.id});"undefined"===typeof n?(console.log("Added new context in store with id ".concat(t.id)),e.contextsHistory.push(t)):console.log("Context with id ".concat(t.id," yet exists in contextHistory"))},ADD_DATAFLOW:function(e,t){e.dataflow=t},SET_DATAFLOW_STATUS:function(e,t){var n=t.id,o=t.status,a=e.dataflowStatuses.find(function(e){return e.id===n});"undefined"!==typeof a?a.status=o:e.dataflowStatuses.push({id:n,status:o})},SET_DATAFLOW_INFO:function(e,t){e.dataflowInfo=t},ADD_OBSERVATION:function(e,t){var n=t.observation;e.observations.push(n),console.info("Added observation: ".concat(n.label)),console.debug("Observation content: ".concat(JSON.stringify(n,null,2)))},ADD_NODE:function(e,t){var n=t.node,o=t.parentId;if(null===e.contexts.peek())return console.info("Context is null, is it just resetted or is a new observation of previous search for this session, so added to orphans. ID: ".concat(n.id)),void e.orphans.push(n);if(e.contexts.peek().id!==n.id)if(e.contexts.peek().id===o)e.tree.push(n);else if(n.rootContextId===e.contexts.peek().id){var a=Object(u["a"])(e.tree,o);null!==a?(a.children.push(p()({},n,{idx:a.children.length,siblingsCount:a.childrenCount})),a.disabled=!1):(console.warn("Orphan founded with id ".concat(n.id)),e.orphans.push(n))}else console.warn("Try to add to tree an observation of other context. Actual: ".concat(e.contexts.peek().id," / Node: ").concat(n.rootContextId));else console.error("Try to add context to tree, check it!")},RECALCULATE_TREE:function(e,t){var n=t.taskId,o=t.fromTask,a=e.contexts.peek();if(null!==a){var i=e.observations.filter(function(e){return e.taskId.startsWith(n)}),r="undefined"!==typeof a.restored&&a.restored;if(0!==i.length)if(1!==i.length){var s=[],c=[],l=null,d=[];if(i.forEach(function(t,n){t.main?(o&&n===i.length-1||r&&0===n?l=Object(u["a"])(e.tree,t.id):c.push(Object(u["a"])(e.tree,t.id)),s.push(t.id)):null===t.folderId&&(d.push(Object(u["a"])(e.tree,t.id)),s.push(t.id))}),null!==l){var f,E=i[0],p=null,T=-1;if(E.parentId===e.contexts.peek().id)p=e.tree,T=e.tree.findIndex(function(e){return e.id===E.id});else{var S=Object(u["a"])(e.tree,E.folderId||E.parentId);if(null===S)throw new Error("Element is not first level but cannot find parent: folderId: ".concat(E.folderId,", parentId: ").concat(E.parentId));p=S.children,T=p.findIndex(function(e){return e.id===E.id})}if(d.length>0)d.forEach(function(e,t){e.folderId=l.id,e.idx=t,e.siblingsCount=d.length}),(f=l.children).push.apply(f,d),l.disabled=!1;else console.info("No children found");if(null!==p&&-1!==T){var b,O=p.length;while(O--)s.includes(p[O].id)&&p.splice(O,1);if(p.splice(T,0,l),c.length>0)(b=p).splice.apply(b,[T+1,0].concat(c))}}else r?console.info("No main observation found"):console.warn("No main observation found, stopped?")}else console.info("No recalculation needed, only one observation");else console.info("No recalculation needed, no observation for this task")}},SET_FOLDER_VISIBLE:function(e,t){var n=t.nodeId,o=t.visible,a=t.zIndexOffset;if(null!==a){e.observations.forEach(function(e){e.folderId===n?(e.visible=o,e.top=o):o&&e.zIndexOffset===a&&(e.top=!1)});var i=e.observations.find(function(e){return e.id===n});"undefined"!==typeof i&&(i.visible=o)}else console.warn("Folder with id ".concat(n," has no elements"));var r=Object(u["a"])(e.tree,n);"undefined"!==typeof r&&null!==r&&r.children.length>0&&(r.children.forEach(function(e){e.parentArtifactId===r.id&&(e.ticked=o)}),r.ticked=o)},SET_VISIBLE:function(e,t){var n=t.nodeId,o=t.visible,a=e.observations.findIndex(function(e){return e.id===n}),i=e.observations[a];if("undefined"!==typeof i){var r=i.zIndexOffset;i.visible=o,i.top=o,o&&e.observations.forEach(function(e){e.id!==n&&e.zIndexOffset===r&&(e.top=!1)});var s=Object(u["a"])(e.tree,n);s&&(s.ticked=o),e.observations.splice(a,1,i)}else console.warn("Try to change visibility to no existing observations with id ".concat(n))},STORE_RAW_SEARCH_RESULT:function(e,t){e.searchResult=t},ADD_LAST:function(e,t){var n=t.folderId,o=t.observationId,a=t.offsetToAdd,i=t.total,r=e.lasts.findIndex(function(e){return n===e.folderId});if(-1!==r){var s=e.lasts[r];s.offset+a+1>=s.total?(e.lasts.splice(r,1),console.info("Delete folder ".concat(n))):(s.observationId=o,s.offset+=a,console.info("Change folder ".concat(n,". Now offset is ").concat(s.offset," ")))}else{if(a+1===i)return void console.info("Nothing to do in folder ".concat(n,". Offset is ").concat(a," and total is ").concat(i," "));e.lasts.push({folderId:n,observationId:o,offset:a,total:i}),console.debug("Added folder ".concat(n,". Offset is ").concat(a," "))}},REMOVE_LAST:function(e,t){var n=e.lasts.findIndex(function(e){return e.folderId===t});-1!==n&&e.lasts.splice(n,1)},SET_SCALE_REFERENCE:function(e,t){e.scaleReference=t},UPDATE_SCALE_REFERENCE:function(e,t){var n,o=t.type,a=t.resolution,i=t.unit;e.scaleReference=p()({},e.scaleReference,(n={},L()(n,"".concat(o,"Resolution"),a),L()(n,"".concat(o,"Unit"),i),L()(n,"".concat(o,"ResolutionDescription"),(0===a?"":"".concat(a," "))+i),n))},SET_SCALE_LOCKED:function(e,t){var n=t.scaleType,o=t.scaleLocked;"all"===n?(e.scaleLocked.space=o,e.scaleLocked.time=o):Object.prototype.hasOwnProperty.call(e.scaleLocked,n)?(console.info("Set ".concat(o," to ").concat(n," scale type")),e.scaleLocked[n]=o):console.error("Try to set locked to unknow scale type: ".concat(n))},SET_INTERACTIVE_MODE:function(e,t){e.interactiveMode=t},SET_CROSSING_IDL:function(e,t){e.crossingIDL=t}}),w=(n("28a5"),n("278c")),y=n.n(w),x=(n("ffc1"),n("456d"),n("cadf"),n("96cf"),n("c973")),D=n.n(x),k=n("be3b"),M={setContext:function(e,t){var n=e.commit,o=e.getters,a=e.dispatch,i=t.context,r=t.isRecontext;null!==o.context&&o.context.id===i.id||(n("SET_CONTEXT",{context:i,isRecontext:r}),r&&a("view/resetContext",null,{root:!0}),a("view/setContextLayer",i,{root:!0}))},resetContext:function(e){var t=e.commit,n=e.dispatch,o=e.state,a=e.getters;null!==a.context?(t("SET_CONTEXT",{}),n("getSessionContexts"),n("view/resetContext",null,{root:!0}),null!==o.waitingForReset?(n("loadContext",o.waitingForReset),o.waitingForReset=null):n("addObservation",{observation:r["k"],main:!0}),console.log("ADDED SEPARATOR"),n("view/addToKlabLog",{type:r["i"].TYPE_INFO,payload:{message:"Context reset",separator:!0}},{root:!0})):console.warn("Try to reset null context")},setWaitinForReset:function(e){var t=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t("WAITING_FOR_RESET",n)},loadContext:function(e,t){var n=e.commit,o=e.dispatch;console.info("Ask for context to restore ".concat(t)),k["a"].get("".concat("").concat("/modeler/engine/session/view/","describe/").concat(t),{params:{childLevel:1}}).then(function(){var e=D()(regeneratorRuntime.mark(function e(a){var i,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=a.data,i.restored=!0,e.next=4,o("setContext",{context:p()({},i,{children:[]})});case 4:if(n("view/SET_RELOAD_DATAFLOW",!0,{root:!0}),console.debug("Context received: \n".concat(JSON.stringify(i,null,2))),!(i.children.length>0)){e.next=13;break}return s=[],c=i.children,c.forEach(function(e){null!==e.taskId&&(-1===s.indexOf(e.taskId)&&s.push(e.taskId),o("addObservation",{observation:e,restored:!0}))}),e.next=12,Promise.all(s);case 12:null!==s&&s.forEach(function(e){o("recalculateTree",{taskId:e,fromTask:!1})});case 13:o("view/setSpinner",p()({},r["p"].SPINNER_STOPPED,{owner:t}),{root:!0});case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){throw o("view/setSpinner",p()({},r["p"].SPINNER_ERROR,{owner:t,errorMessage:e}),{root:!0}),e})},getSessionContexts:function(e){var t=e.getters,n=e.commit;return new Promise(function(e,o){if(null!==t.session){var a="".concat("").concat("/modeler/engine/status");Object(u["b"])(t.session,a,{transformRequest:[function(e,t){return delete t.common.Authorization,e}]},function(a,i){var r=a.data;if(console.debug("Contexts history:\n".concat(JSON.stringify(r,null,4))),r&&r.sessions&&r.sessions.length>0){var s=r.sessions.find(function(e){return e.id===t.session});if("undefined"!==typeof s){var c=s.rootObservations;if(null===c||0===Object.keys(c).length&&c.constructor===Object)console.debug("No root observation founded"),e(0);else{console.debug("Find ".concat(Object.keys(c).length," root observations for this session"));var l=0;Object.entries(c).forEach(function(e){var t=y()(e,2),o=t[0],a=t[1];n("STORE_CONTEXT",a),console.debug("Stored context with id ".concat(o)),l+=1}),e(l)}}else console.warn("No information for session ".concat(t.session,", isn't valid session?")),o(new Error("No information for session ".concat(t.session,", disconnect")))}i()})}else o(new Error("No session established, no useful engine available, disconnect"))})},addObservation:function(e,t){var n=e.commit,o=e.state,a=e.dispatch,i=t.observation,s=t.folderId,c=void 0===s?null:s,l=t.main,d=void 0!==l&&l,f=t.toTree,E=void 0===f||f,T=t.visible,S=void 0!==T&&T,b=t.restored,O=void 0!==b&&b;return new Promise(function(e,t){var s=o.observations.find(function(e){return e.id===i.id});return"undefined"!==typeof s?(a("view/addToKexplorerLog",{type:r["i"].TYPE_WARNING,payload:{message:"Existing observation received: ".concat(s.label)},important:!0},{root:!0}),t(new Error("Existing observation received: ".concat(s.label)))):(a("view/assignViewer",{observation:i,main:d},{root:!0}).then(function(t){return i.viewerIdx=t,i.visible=S,i.top=!1,i.zIndex=0,i.layerOpacity=i.layerOpacity||1,i.colormap=i.colormap||null,i.folderId=c,n("ADD_OBSERVATION",{observation:p()({},i,{children:[]}),restored:O}),i.observationType===r["j"].TYPE_INITIAL?e():(i.children.length>0?(i.disabled=!1,i.children.forEach(function(e){a("addObservation",{observation:e})})):i.childrenCount>0&&a("askForChildren",{folderId:i.id,offset:0,count:o.childrenToAskFor,total:i.childrenCount}),E&&n("ADD_NODE",Object(u["e"])(i)),a("view/setReloadReport",!0,{root:!0}),e())}),null)})},recalculateTree:function(e,t){var n=e.commit,o=t.taskId,a=t.fromTask;if("undefined"===typeof o||null===o)throw new Error("Try to recalculate tree with a not existing task id: ".concat(o));return new Promise(function(e){n("RECALCULATE_TREE",{taskId:o,fromTask:a}),e()})},askForChildren:function(e,t){var n=e.commit,o=e.dispatch,a=e.state,i=t.folderId,s=t.total,c=t.offset,l=void 0===c?0:c,d=t.count,f=void 0===d?a.childrenToAskFor:d,E=t.toTree,T=void 0===E||E,S=t.visible,b=void 0!==S&&S,O=t.notified,m=void 0===O||O;return new Promise(function(e){console.debug("Ask for children of node ".concat(i,": count:").concat(f," / offset ").concat(l)),k["a"].get("".concat("").concat("/modeler/engine/session/view/","children/").concat(i),{params:{count:f,offset:l}}).then(function(t){var c=t.data;c&&c.length>0&&o("view/setSpinner",p()({},r["p"].SPINNER_LOADING,{owner:i}),{root:!0}).then(function(){c.forEach(function(t,a,l){t.notified=m,t.siblingsCount=s,o("addObservation",{observation:t,folderId:i,toTree:T,visible:b}).then(function(){a===l.length-1&&(T&&n("ADD_LAST",{folderId:i,observationId:t.id,offsetToAdd:c.length,total:s}),o("view/setSpinner",p()({},r["p"].SPINNER_STOPPED,{owner:i}),{root:!0}),e())})});var t=Object(u["a"])(a.tree,i);null!==t&&(t.childrenLoaded+=c.length)}),e()})})},addChildrenToTree:function(e,t){var n=e.commit,o=e.state,a=t.folder,i=t.count,r=void 0===i?o.childrenToAskFor:i;if(a&&null!==a)for(var s=o.observations.filter(function(e){return e.folderId===a.id}),c=s.length,l=a.children.length,d=l,f=0;d<c&&f<r;d++,f++){var E=s[d];n("ADD_NODE",Object(u["e"])(E)),f!==r-1&&d!==c-1||n("ADD_LAST",{folderId:a.id,observationId:E.id,offsetToAdd:f+1,total:a.childrenLoaded})}},setVisibility:function(e,t){var n=e.commit,o=e.dispatch,a=e.state,i=t.node,s=t.visible;if(i.observationType===r["j"].TYPE_GROUP){if(0!==i.childrenCount&&null===i.viewerIdx){var c=a.observations.find(function(e){return e.folderId===i.id});if("undefined"!==typeof c){var l=c.viewerIdx,u=c.viewerType,d=c.zIndexOffset;i.viewerIdx=l,i.viewerType=u,i.zIndexOffset=d}else i.zIndexOffset=null}null!==i.viewerIdx&&o("view/setMainDataViewer",{viewerIdx:i.viewerIdx,visible:s},{root:!0}),n("SET_FOLDER_VISIBLE",{nodeId:i.id,visible:s,zIndexOffset:i.zIndexOffset})}else o("view/setMainDataViewer",{viewerIdx:i.viewerIdx,visible:s},{root:!0}),n("SET_VISIBLE",{nodeId:i.id,visible:s})},selectNode:function(e,t){var n=e.dispatch,o=e.state;if(null===t)n("view/setObservationInfo",null,{root:!0});else{var a=o.observations.find(function(e){return e.id===t});a&&(a.visible&&!a.top&&n("setVisibility",{node:a,visible:!0}),n("view/setObservationInfo",a,{root:!0}))}},addDataflow:function(e,t){var n=e.commit;"undefined"===typeof t||null===t?console.warn("Try to layout an empty ELK dataflow"):(n("ADD_DATAFLOW",t),n("view/SET_RELOAD_DATAFLOW",!0,{root:!0}))},setDataflowStatus:function(e,t){var n=e.commit,o=t.id,a=t.status;n("SET_DATAFLOW_STATUS",{id:o,status:a})},setDataflowInfo:function(e,t){var n=e.commit,o=t.id,a=t.html;if(null!==o&&""!==o){var i=o.split("."),r=i[i.length-1],s=i.slice(0,i.length-1);n("SET_DATAFLOW_INFO",{elementId:r,elementTypes:s,html:a})}},storeSearchResult:function(e,t){var n=e.commit;n("STORE_RAW_SEARCH_RESULT",t)},setScaleReference:function(e,t){var n=e.commit;console.debug("Set scale reference: ".concat(JSON.stringify(t,null,2))),n("SET_SCALE_REFERENCE",t)},updateScaleReference:function(e,t){var n=e.commit,o=t.type,a=t.resolution,i=t.unit;console.debug("Update scale reference: ".concat(o,": ").concat(a," ").concat(i)),n("UPDATE_SCALE_REFERENCE",{type:o,resolution:a,unit:i})},setScaleLocked:function(e,t){var n=e.commit,o=t.scaleType,a=t.scaleLocked;n("SET_SCALE_LOCKED",{scaleType:o,scaleLocked:a})},setInteractiveMode:function(e,t){var n=e.commit;n("SET_INTERACTIVE_MODE",t)},setCrossingIDL:function(e,t){var n=e.commit;n("SET_CROSSING_IDL",t)}},j={namespaced:!0,state:N,getters:g,mutations:P,actions:M},U={stompClient:null,connectionState:r["a"].CONNECTION_UNKNOWN,reconnectionsAttempt:0,subscriber:null,sentMessages:[],receivedMessages:[],queuedMessage:null,tasks:[],subscriptions:[]},Y={lastError:function(e){var t=e.receivedMessages.filter(function(e){return e.type===r["i"].TYPE_ERROR}).slice(-1);return 1===t.length?t[0]:null},lastMessage:function(e){var t=e.receivedMessages.filter(function(e){return e.type===r["i"].TYPE_MESSAGE}).slice(-1);return 1===t.length?t[0]:null},lastReceivedMessage:function(e){return e.receivedMessages.length>0?e.receivedMessages.slice(-1)[0]:null},lastSendedMessage:function(e){return e.sentMessages.length>0?e.sentMessages.slice(-1)[0]:null},subscriberId:function(e){return null!==e.subscriber?e.subscriber.id:null},queuedMessage:function(e){return e.queuedMessage},connectionState:function(e){return e.connectionState},tasks:function(e){return e.tasks},taskIsAlive:function(e){return function(t){return"undefined"!==typeof e.tasks.find(function(e){return e.id===t&&e.alive})}},contextTaskIsAlive:function(e){return function(t){return"undefined"!==typeof e.tasks.find(function(e){return e.contextId===t&&e.alive})}},hasTasks:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return-1!==e.tasks.findIndex(function(e){return e.alive&&(null===t||e.contextId===t)})}},lastActiveTask:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=e.tasks.filter(function(e){return e.alive&&(null===t||e.contextId===t)});return n.length>0?n.pop():null}}},V={STOMP_CONNECTION_STATE:function(e,t){e.connectionState=t},STOMP_ERROR:function(e,t){Object(u["h"])(e.receivedMessages,{date:b()().format("HH:mm:ss"),type:r["i"].TYPE_ERROR,message:t})},STOMP_MESSAGE:function(e,t){Object(u["h"])(e.receivedMessages,{date:b()().format("HH:mm:ss"),type:r["i"].TYPE_MESSAGE,message:t})},STOMP_SEND_MESSAGE:function(e,t){Object(u["h"])(e.sentMessages,p()({date:b()().format("HH:mm:ss")},t))},STOMP_SUBSCRIBED:function(e,t){e.subscriber=t},STOMP_RECONNECTIONS_ATTEMPT:function(e,t){e.reconnectionsAttempt=t},STOMP_RECONNECTIONS_ATTEMPT_RESET:function(e){e.reconnectionsAttempt=0},STOMP_QUEUE_MESSAGE:function(e,t){e.queuedMessage=t},STOMP_CLEAN_QUEUE:function(e){e.queuedMessage=null},TASK_START:function(e,t){var n=t.id,o=t.contextId,a=t.description;e.tasks.push({id:n,contextId:o,description:a,alive:!0})},TASK_END:function(e,t){var n=t.id,o=e.tasks.findIndex(function(e){return e.id===n});if(-1!==o){var a=e.tasks[o];a.alive=!1,e.tasks.splice(o,1,a)}else console.debug("Task with id = ".concat(n," not founded or is not alive"))}},F=n("d247");function G(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e("view/addToKexplorerLog",{type:t,payload:{message:n,attach:o},important:a},{root:!0})}var z=(o={},L()(o,F["a"].TYPE_TASKSTARTED,function(e,t){var n=e.payload,o=t.dispatch;o("stomp/taskStart",n,{root:!0}),G(o,r["i"].TYPE_DEBUG,"Started task with id ".concat(n.id)),o("view/addToStatusTexts",{id:n.id,text:n.description},{root:!0})}),L()(o,F["a"].TYPE_TASKABORTED,function(e,t){var n=e.payload,o=t.dispatch;o("stomp/taskAbort",n,{root:!0}),G(o,r["i"].TYPE_ERROR,"Aborted task with id ".concat(n.id)),o("view/removeFromStatusTexts",n.id,{root:!0})}),L()(o,F["a"].TYPE_TASKFINISHED,function(e,t){var n=e.payload,o=t.dispatch;o("stomp/taskEnd",n,{root:!0}),o("data/recalculateTree",{taskId:n.id,fromTask:!0},{root:!0}),G(o,r["i"].TYPE_DEBUG,"Ended task with id ".concat(n.id)),o("view/removeFromStatusTexts",n.id,{root:!0})}),L()(o,F["a"].TYPE_DATAFLOWCOMPILED,function(e,t){var n=e.payload,o=t.dispatch;if("undefined"!==typeof n.jsonElkLayout&&null!==n.jsonElkLayout)try{var a=JSON.parse(n.jsonElkLayout);G(o,r["i"].TYPE_DEBUG,"Dataflow compiled in task ".concat(n.taskId)),o("data/addDataflow",a,{root:!0})}catch(e){G(o,r["i"].TYPE_ERROR,"Error in dataflos layout in task ".concat(n.taskId,": ").concat(e))}else G(o,r["i"].TYPE_WARN,"Dataflow in task ".concat(n.taskId," has no layout"))}),L()(o,F["a"].TYPE_DATAFLOWSTATECHANGED,function(e,t){var n,o=e.payload,a=t.dispatch;n="STARTED"===o.status?r["d"].PROCESSING:"FINISHED"===o.status?r["d"].PROCESSED:"ABORTED"===o.status?r["d"].ABORTED:r["d"].WAITING,a("data/setDataflowStatus",{id:o.nodeId,status:n},{root:!0})}),L()(o,F["a"].TYPE_DATAFLOWDOCUMENTATION,function(e,t){var n=e.payload,o=t.dispatch;n&&null!==n&&n.dataflowId&&n.htmlDescription?(G(o,r["i"].TYPE_DEBUG,"Dataflow element info received",JSON.stringify(n,null,4)),o("data/setDataflowInfo",{id:n.dataflowId,html:n.htmlDescription},{root:!0})):G(o,r["i"].TYPE_WARNING,"Strange payload of dataflow element info received: ".concat(JSON.stringify(n,null,4)))}),L()(o,F["a"].TYPE_NEWOBSERVATION,function(e,t){var n=e.payload,o=t.rootState,a=t.rootGetters,i=t.dispatch;-1===o.stomp.tasks.findIndex(function(e){return e.id===n.taskId})&&-1!==o.data.contextsHistory.findIndex(function(e){return e.id===n.rootContextId})&&(i("stomp/taskStart",{id:n.taskId,description:r["e"].UNKNOWN_SEARCH_OBSERVATION,contextId:n.rootContextId},{root:!0}),i("view/addToStatusTexts",{id:n.taskId,text:r["e"].UNKNOWN_SEARCH_OBSERVATION},{root:!0}),G(i,r["i"].TYPE_INFO,"Received an observation of previous context with no task associated. Session was been reloaded?",JSON.stringify(n,null,4))),null===n.parentId?null===a["data/context"]?(G(i,r["i"].TYPE_DEBUG,"New context received with id ".concat(n.id),JSON.stringify(n,null,4)),i("data/setContext",{context:n},{root:!0}),"undefined"!==typeof n.scaleReference&&null!==n.scaleReference&&i("data/setScaleReference",n.scaleReference,{root:!0})):G(i,r["i"].TYPE_ERROR,"Strange behaviour: observation with no parent in existing context: ".concat(n.id," - ").concat(n.label)):null!==a["data/context"]&&a["data/context"].id===n.rootContextId?(G(i,r["i"].TYPE_INFO,"New observation received with id ".concat(n.id," and rootContextId ").concat(n.rootContextId),JSON.stringify(n,null,4)),n.notified=!0,i("data/addObservation",{observation:n},{root:!0})):G(i,r["i"].TYPE_INFO,"Received an observation of different context",JSON.stringify(n,null,4))}),L()(o,F["a"].TYPE_QUERYRESULT,function(e,t){var n=e.payload,o=t.dispatch;G(o,r["i"].TYPE_INFO,"Received search results",JSON.stringify(n)),o("data/storeSearchResult",n,{root:!0})}),L()(o,F["a"].TYPE_RESETCONTEXT,function(e,t){var n=t.dispatch;G(n,r["i"].TYPE_INFO,"Received context reset"),n("data/resetContext",null,{root:!0})}),L()(o,F["a"].TYPE_SCALEDEFINED,function(e,t){var n=e.payload,o=t.dispatch;G(o,r["i"].TYPE_INFO,"Received scale reference",JSON.stringify(n)),o("data/setScaleReference",n,{root:!0})}),L()(o,F["a"].TYPE_USERINPUTREQUESTED,function(e,t){var n=t.dispatch;G(n,r["i"].TYPE_INFO,"Received input request",e.payload),n("view/inputRequest",e,{root:!0})}),L()(o,F["a"].TYPE_DEBUG,function(e,t){var n=e.payload,o=t.dispatch;G(o,r["i"].TYPE_DEBUG,n)}),L()(o,F["a"].TYPE_INFO,function(e,t){var n=e.payload,o=t.dispatch;G(o,r["i"].TYPE_INFO,n)}),L()(o,F["a"].TYPE_WARNING,function(e,t){var n=e.payload,o=t.dispatch;G(o,r["i"].TYPE_WARNING,n)}),L()(o,F["a"].TYPE_ERROR,function(e,t){var n=e.payload,o=t.dispatch;G(o,r["i"].TYPE_ERROR,n)}),o),W=function(e){var t=e.body,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=JSON.parse(t),a=n.dispatch;return o.messageClass===F["a"].CLASS_NOTIFICATION&&a("view/addToKlabLog",o,{root:!0}),Object.prototype.hasOwnProperty.call(z,o.type)?z[o.type](o,n):(console.log("Unknown parser ".concat(o.type)),!1)},B={stomp_onconnect:function(e,t){var n=e.commit;n("STOMP_CONNECTION_STATE",r["a"].CONNECTION_UP),n("STOMP_RECONNECTIONS_ATTEMPT_RESET"),n("STOMP_MESSAGE",t)},stomp_onclose:function(e){var t=e.commit;t("STOMP_CONNECTION_STATE",r["a"].CONNECTION_DOWN)},stomp_onerror:function(e,t){var n=e.commit;n("STOMP_CONNECTION_STATE",r["a"].CONNECTION_ERROR),n("STOMP_ERROR",t)},stomp_onmessage:function(e,t){var n=e.commit;n("STOMP_MESSAGE",t),W(t,e)},stomp_onsubscribe:function(e,t){var n=e.commit;n("STOMP_SUBSCRIBED",t)},stomp_reconnect:function(e,t){var n=e.commit;n("STOMP_RECONNECTIONS_ATTEMPT",t),n("STOMP_CONNECTION_STATE",r["a"].CONNECTION_WORKING)},stomp_onsend:function(e,t){var n=e.commit,o=t.message;n("STOMP_SEND_MESSAGE",o)},stomp_onerrorsend:function(e,t){var n=e.commit;n("STOMP_QUEUE_MESSAGE",t)},stomp_cleanqueue:function(e){var t=e.commit;t("STOMP_CLEAN_QUEUE")},taskStart:function(e,t){var n=e.commit,o=e.dispatch;o("view/setSpinner",p()({},r["p"].SPINNER_LOADING,{owner:t.id}),{root:!0}),n("TASK_START",t)},taskAbort:function(e,t){var n=e.commit,o=e.dispatch;n("TASK_END",t),o("view/setSpinner",p()({},r["p"].SPINNER_STOPPED,{owner:t.id}),{root:!0})},taskEnd:function(e,t){var n=e.commit,o=e.dispatch;n("TASK_END",t),o("view/setSpinner",p()({},r["p"].SPINNER_STOPPED,{owner:t.id}),{root:!0})}},H={namespaced:!0,state:U,getters:Y,mutations:V,actions:B};a["a"].use(i["a"]);var K=new i["a"].Store({modules:{view:v,data:j,stomp:H}});t["a"]=K},4678:function(e,t,n){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d833","./ar-tn.js":"6d833","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=i(e);return n(t)}function i(e){var t=o[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(o)},a.resolve=i,e.exports=a,a.id="4678"},"7cca":function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"g",function(){return a}),n.d(t,"q",function(){return i}),n.d(t,"r",function(){return r}),n.d(t,"h",function(){return s}),n.d(t,"n",function(){return c}),n.d(t,"t",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"i",function(){return d}),n.d(t,"j",function(){return f}),n.d(t,"k",function(){return E}),n.d(t,"f",function(){return p}),n.d(t,"s",function(){return T}),n.d(t,"p",function(){return b}),n.d(t,"e",function(){return O}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return v}),n.d(t,"l",function(){return _}),n.d(t,"m",function(){return I}),n.d(t,"o",function(){return h});var o={EMPTY_MAP_SELECTION:{pixelSelected:null,layerSelected:null,value:null,locked:!1},HIST_MAX_LENGTH:50,CHILDREN_TO_ASK_FOR:25},a={LEFTMENU_MAXSIZE:512,LEFTMENU_MINSIZE:80,LEFTMENU_MAXIMIZED:"max",LEFTMENU_MINIMIZED:"min",LEFTMENU_HIDDEN:"hidden",DATA_VIEWER_COMPONENT:"klab-main-control",DOCKED_DATA_VIEWER_COMPONENT:"docked-main-control",REPORT_VIEWER_COMPONENT:"reports-details",DATAFLOW_VIEWER_COMPONENT:"dataflow-details",DATAFLOW_INFO_COMPONENT:"dataflow-info",PROVENANCE_VIEWER_COMPONENT:"provenance-details",LOG_COMPONENT:"klab-log-pane"},i={DATA_VIEWER:{name:"DataViewer",leftMenuState:a.LEFTMENU_HIDDEN,leftMenuContent:a.DATA_VIEWER_COMPONENT,mainControl:!0},DOCKED_DATA_VIEWER:{name:"DataViewer",leftMenuState:a.LEFTMENU_MAXIMIZED,leftMenuContent:a.DOCKED_DATA_VIEWER_COMPONENT,mainControl:!1},REPORT_VIEWER:{name:"ReportViewer",leftMenuState:a.LEFTMENU_MINIMIZED,leftMenuContent:a.REPORT_VIEWER_COMPONENT,mainControl:!1},DATAFLOW_VIEWER:{name:"DataflowViewer",leftMenuState:a.LEFTMENU_MINIMIZED,leftMenuContent:a.DATAFLOW_VIEWER_COMPONENT,mainControl:!1},PROVENANCE_VIEWER:{name:"ProvenanceViewer",leftMenuState:a.LEFTMENU_MINIMIZED,leftMenuContent:a.PROVENANCE_VIEWER_COMPONENT,mainControl:!1}},r={VIEW_MAP:{component:"MapViewer",label:"Maps",hideable:!1,forceNew:!1},VIEW_CHART:{component:"ChartViewer",label:"Chart",hideable:!0,forceNew:!0},VIEW_GRAPH:{component:"GraphViewer",label:"Graph",hideable:!0,forceNew:!0},VIEW_BLOB:{component:"BlobViewer",label:"Blob",hideable:!1,forceNew:!1},VIEW_UNKNOWN:{component:"UnknownViewer",label:"Unknown",hideable:!1,forceNew:!1}},s={CONCEPT:{label:"Concept",symbol:"C",color:"sem-types",rgb:"rgb(38, 50, 56)"},PREFIX_OPERATOR:{label:"Prefix operator",symbol:"O",color:"sem-types",rgb:"rgb(38, 50, 56)"},INFIX_OPERATOR:{label:"Infix operator",symbol:"O",color:"sem-types",rgb:"rgb(38, 50, 56)"},OBSERVATION:{label:"Observation",symbol:"O",color:"sem-types",rgb:"rgb(38, 50, 56)"},MODEL:{label:"Model",symbol:"M",color:"sem-types",rgb:"rgb(38, 50, 56)"},MODIFIER:{label:"Modifier",symbol:"O",color:"sem-types",rgb:"rgb(38, 50, 56)"},PRESET_OBSERVABLE:{label:"Preset observable",symbol:"O",color:"sem-preset-observable",rgb:"rgb(240, 240, 240)"},SEPARATOR:{label:"Separator",symbol:"S",color:"sem-separator",rgb:"rgb(10, 10, 10)"},NEXT_TOKENS:{TOKEN:"TOKEN",TEXT:"TEXT",INTEGER:"INTEGER",DOUBLE:"DOUBLE",BOOLEAN:"BOOLEAN",UNIT:"UNIT",CURRENCY:"CURRENCY"}},c={QUALITY:{label:"Quality",symbol:"Q",color:"sem-quality",rgb:"rgb(0, 153, 0)"},SUBJECT:{label:"Subject",symbol:"S",color:"sem-subject",rgb:"rgb(153, 76, 0)"},IDENTITY:{label:"identity",symbol:"Id",color:"sem-identity",rgb:"rgb(0, 102, 204)"},ATTRIBUTE:{label:"Attribute",symbol:"A",color:"sem-attribute",rgb:"rgb(0, 102, 204)"},REALM:{label:"Realm",symbol:"R",color:"sem-realm",rgb:"rgb(0, 102, 204)"},TRAIT:{label:"Trait",symbol:"T",color:"sem-trait",rgb:"rgb(0, 102, 204)"},EVENT:{label:"Event",symbol:"E",color:"sem-event",rgb:"rgb(53, 153, 0)"},RELATIONSHIP:{label:"Relationship",symbol:"R",color:"sem-relationship",rgb:"rgb(210, 170, 0)"},PROCESS:{label:"Process",symbol:"P",color:"sem-process",rgb:"rgb(204, 0, 0)"},ROLE:{label:"Role",symbol:"R",color:"sem-role",rgb:"rgb(0, 86, 163)"},CONFIGURATION:{label:"Configuration",symbol:"C",color:"sem-configuration",rgb:"rgb(98, 98, 98)"},DOMAIN:{label:"Domain",symbol:"D",color:"sem-domain",rgb:"rgb(240, 240, 240)"}},l={nodes:[],links:[],showMenu:!1,selected:{},showSelection:!1,linksSelected:{},options:{canvas:!1,size:{w:500,h:500},force:350,offset:{x:0,y:0},nodeSize:20,linkWidth:1,nodeLabels:!0,linkLabels:!1,strLinks:!0}},u={CONNECTION_UNKNOWN:"UNKNOWN",CONNECTION_UP:"UP",CONNECTION_DOWN:"DOWN",CONNECTION_WORKING:"WORKING",CONNECTION_ERROR:"ERROR"},d={TYPE_DEBUG:"debug",TYPE_WARNING:"warning",TYPE_ERROR:"error",TYPE_INFO:"info",TYPE_MESSAGE:"MSG",TYPE_ALL:"ALL"},f={TYPE_PROCESS:"PROCESS",TYPE_STATE:"STATE",TYPE_SUBJECT:"SUBJECT",TYPE_CONFIGURATION:"CONFIGURATION",TYPE_EVENT:"EVENT",TYPE_RELATIONSHIP:"RELATIONSHIP",TYPE_GROUP:"GROUP",TYPE_INITIAL:"INITIAL"},E={shapeType:"POINT",encodedShape:"POINT (40.299841 9.343971)",id:null,label:"DEFAULT",parentId:-1,visible:!0,spatialProjection:"EPSG:4326",observationType:f.TYPE_INITIAL},p={TYPE_RASTER:"RASTER",TYPE_SHAPE:"SHAPE",TYPE_SCALAR:"SCALAR",TYPE_TIMESERIES:"TIMESERIES",TYPE_NETWORK:"NETWORK",TYPE_PROPORTIONS:"PROPORTIONS",SHAPE_POLYGON:"POLYGON",SHAPE_POINT:"POINT",PARAM_VIEWPORT_SIZE:800,PARAM_VIEWPORT_MAX_SIZE:7680,PARAM_VIEWPORT_MULTIPLIER:2},T={PARAMS_MODE:"mode",PARAMS_MODE_IDE:"ide",PARAMS_MODE_STANDALONE:"standalone",PARAMS_SESSION:"session",PARAMS_LOG:"log",PARAMS_LOG_HIDDEN:"hidden",PARAMS_LOG_VISIBLE:"visible",COOKIE_LANG:"klab_exp_lang",COOKIE_SESSION:"klab_session",COOKIE_MODE:"klab_mode",COOKIE_LOG:"klab_log",COOKIE_BASELAYER:"klab_baselayer",COOKIE_MAPDEFAULT:"klab_mapdefault",COOKIE_SAVELOCATION:"klab_saveLocation"},S={SPINNER_STOPPED_COLOR:"rgb(17, 170, 187)",SPINNER_LOADING_COLOR:"rgb(255, 195, 0)",SPINNER_MC_RED:"rgb(255, 100, 100)",SPINNER_ERROR_COLOR:"negative"},b={SPINNER_LOADING:{color:S.SPINNER_LOADING_COLOR,animated:!0},SPINNER_STOPPED:{color:S.SPINNER_STOPPED_COLOR,animated:!1},SPINNER_ERROR:{color:S.SPINNER_ERROR_COLOR,animated:!1,time:2,then:{color:S.SPINNER_STOPPED_COLOR,animated:!1}}},O={UNKNOWN_SEARCH_OBSERVATION:"$$UNKNOWN_SEARCH_OBSERVATION$$"},m={WAITING:"waiting",PROCESSING:"processing",PROCESSED:"processed",ABORTED:"aborted"},v={MAP_SIZE_CHANGED:"mapsizechanged",UPDATE_FOLDER:"updatefolder",GRAPH_NODE_SELECTED:"graphnodeselected",SPINNER_DOUBLE_CLICK:"spinnerdoubleclick",SHOW_NODE:"shownode",ASK_FOR_UNDOCK:"askforundock",ASK_FOR_SUGGESTIONS:"askforsuggestions",NEED_FIT_MAP:"needfitmap",VIEWER_CLICK:"viewerclick",VIEWER_SELECTED:"viewerselected",VIEWER_CLOSED:"viewerclosed",OBSERVATION_INFO_CLOSED:"observationinfoclosed",SEND_REGION_OF_INTEREST:"sendregionofinterest"},_={ST_SPACE:"space",ST_TIME:"time"},I={SEMANTIC:"SEMANTIC",FREETEXT:"FREETEXT"},h={INTERACTIVE_MODE:"InteractiveMode",LOCK_SPACE:"LockSpace",LOCK_TIME:"LockTime"}},"7e6d":function(e,t,n){},"8449f":function(e,t,n){"use strict";n.d(t,"b",function(){return c});n("386d");var o=n("7cca"),a=n("1442"),i=n("741d"),r=n("fb82"),s=n("2b0e"),c=new s["a"];t["a"]=function(e){var t=e.store,n=new URLSearchParams(window.location.search),l=n.get(o["s"].PARAMS_SESSION)||i["a"].get(o["s"].COOKIE_SESSION),u=n.get(o["s"].PARAMS_MODE)||i["a"].get(o["s"].COOKIE_MODE)||o["s"].PARAMS_MODE_IDE,d=n.get(o["s"].PARAMS_LOG)||i["a"].get(o["s"].COOKIE_LOG)||o["s"].PARAMS_LOG_HIDDEN,f=i["a"].get(o["s"].COOKIE_BASELAYER)||a["d"].DEFAULT_BASELAYER,E=i["a"].get(o["s"].COOKIE_MAPDEFAULT)||{center:a["b"].center,zoom:a["b"].zoom},p=!i["a"].has(o["s"].COOKIE_SAVELOCATION)||i["a"].get(o["s"].COOKIE_SAVELOCATION);s["a"].mixin({methods:{hexToRgbValues:function(e){if("undefined"!==typeof e){var t=r["a"].hexToRgb(e);return"".concat(t.r,", ").concat(t.g,", ").concat(t.b)}return"black"},isAcceptedKey:function(e){var t="abcdefghijklmnopqrstuvwxyz0123456789.<>=!()+-*/^";return e=e.toLowerCase(),-1!==t.indexOf(e)}}}),s["a"].prototype.$eventBus=c,t.state.data.session=l,s["a"].prototype.$mode=u,i["a"].set(o["s"].COOKIE_MODE,u,{expires:30,path:"/"}),s["a"].prototype.$logVisibility=d,i["a"].set(o["s"].COOKIE_LOG,d,{expires:30,path:"/"}),s["a"].prototype.$baseLayer=f,i["a"].set(o["s"].COOKIE_BASELAYER,f,{expires:30,path:"/"}),s["a"].prototype.$mapDefaults=E,t.state.view.saveLocation=p,i["a"].set(o["s"].COOKIE_SAVELOCATION,p,{expires:30,path:"/"}),console.info("Session: ".concat(l," / mode: ").concat(u))}},b0b2:function(e,t,n){"use strict";n.d(t,"a",function(){return N}),n.d(t,"e",function(){return C}),n.d(t,"f",function(){return L}),n.d(t,"g",function(){return P}),n.d(t,"b",function(){return w}),n.d(t,"i",function(){return y}),n.d(t,"h",function(){return x}),n.d(t,"c",function(){return k}),n.d(t,"d",function(){return M});n("48c0"),n("6c7b"),n("ac6a");var o=n("278c"),a=n.n(o),i=(n("c5f6"),n("fb82")),r=n("8e19"),s=n("256f"),c=n("5bc3"),l=n("6c77"),u=n("1442"),d=n("f403"),f=n("7a09"),E=n("9a44"),p=n("47e4"),T=n("88da"),S=n("f822"),b=n("049d"),O=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/,m=i["a"].hexToRgb,v=i["a"].getBrand,_=i["a"].rgbToHex,I={topLeft:Object(s["k"])([-180,90],u["d"].PROJ_EPSG_4326,u["d"].PROJ_EPSG_3857),bottomLeft:Object(s["k"])([-180,-90],u["d"].PROJ_EPSG_4326,u["d"].PROJ_EPSG_3857),topRight:Object(s["k"])([180,90],u["d"].PROJ_EPSG_4326,u["d"].PROJ_EPSG_3857),bottomRight:Object(s["k"])([180,-90],u["d"].PROJ_EPSG_4326,u["d"].PROJ_EPSG_3857)},h=new r["geom"].GeometryFactory,R={left:h.createLineString([new r["geom"].Coordinate(I.topLeft[0],I.topLeft[1]),new r["geom"].Coordinate(I.bottomLeft[0],I.bottomLeft[1])]),right:h.createLineString([new r["geom"].Coordinate(I.topRight[0],I.topRight[1]),new r["geom"].Coordinate(I.bottomRight[0],I.bottomRight[1])])},A=h.createPolygon([new r["geom"].Coordinate(I.topLeft[0],I.topLeft[1]),new r["geom"].Coordinate(I.topRight[0],I.topRight[1]),new r["geom"].Coordinate(I.bottomRight[0],I.bottomRight[1]),new r["geom"].Coordinate(I.bottomLeft[0],I.bottomLeft[1]),new r["geom"].Coordinate(I.topLeft[0],I.topLeft[1])]);function N(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function g(e){if("string"!==typeof e)throw new TypeError("Expected a string");var t=O.exec(e);if(t){var n={r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)};return t[4]&&(n.a=parseFloat(t[4])),n}return m(e)}function C(e){var t,n;return 0===e.indexOf("#")?(n=e,t=m(e)):-1!==e.indexOf(",")?(t=g(e),n=_(t)):(n=v(e),t=m(n)),{rgb:t,hex:n,color:e}}function L(e,t,n){(null===e||null===t||n<1)&&console.warn("Bad colors: ".concat(e,", ").concat(t));for(var o,a,i,r=C(e).rgb,s=C(t).rgb,c=1/(n-1),l=[],u=0;u<n;u++)o=r.r+Math.round(c*u*(s.r-r.r)),a=r.g+Math.round(c*u*(s.g-r.g)),i=r.b+Math.round(c*u*(s.b-r.b)),l.push("rgb(".concat(o,",").concat(a,",").concat(i,")"));return l}function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=function(e,t,n){return e+(t-e)*n},i=[],r=Number((e.length-1)/(t-1)),s=a()(e,1);i[0]=s[0];for(var c=1;c<t-1;c++){var l=c*r,u=Number(Math.floor(l)).toFixed(),d=Number(Math.ceil(l)).toFixed(),f=l-u,E=o(e[u],e[d],f);i[c]=null!==n?E.toFixed(n):E}return i[t-1]=e[e.length-1],i}function w(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}var y=new r["io"].OL3Parser;y.inject(d["a"],f["a"],b["a"],c["a"],E["a"],p["a"],T["a"]);var x=function(e){return e instanceof S["a"]&&(e=Object(c["b"])(e)),y.read(e)};function D(e){var t=[];return e.crosses(R.left)&&t.push(R.left),e.crosses(R.right)&&t.push(R.right),t}function k(e){var t=D(e);if(0===t.length)return e;var n=e.getExteriorRing();t.forEach(function(e){n=n.union(e)});var o=new r["operation"].polygonize.Polygonizer;o.add(n);for(var a=o.getPolygons(),i=null,s=a.iterator();s.hasNext();){var c=s.next();if(!A.contains(c)){for(var l=[],u=c.getCoordinates(),d=u.length,f=0;f<d;f++){var E=u[f],p=2*Math.round(Math.abs(E.x/(2*I.topRight[0]))),T=E.x+(E.x<0?I.topRight[0]:I.topLeft[0])*p;l.push(new r["geom"].Coordinate(T,E.y))}c=h.createPolygon(l)}i=null===i?c:i.union(c)}return i}function M(e,t){var n=e.fill,o=e.stroke,a=e.strokeWidth,i=e.scale,r=e.offsetY,s=e.bold,c=e.size,d=u["f"].POINT_OBSERVATION_SVG_ICON({fill:n,stroke:o,strokeWidth:a},i).clone(),f=u["f"].POINT_OBSERVATION_TEXT({offsetY:r,bold:s,size:c}).clone();return f.setText(t),new l["c"]({image:d,text:f})}},b12a:function(e,t,n){"use strict";n.d(t,"f",function(){return A}),n.d(t,"h",function(){return N}),n.d(t,"g",function(){return g}),n.d(t,"a",function(){return C}),n.d(t,"e",function(){return L}),n.d(t,"c",function(){return w}),n.d(t,"b",function(){return x}),n.d(t,"d",function(){return D});n("a481"),n("96cf");var o=n("c973"),a=n.n(o),i=(n("551c"),n("3156")),r=n.n(i),s=n("448a"),c=n.n(s),l=(n("7514"),n("7cca")),u=n("4360"),d=n("1442"),f=n("b0b2"),E=n("5831"),p=n("3e6b"),T=n("64d9"),S=n("4cdf"),b=n("c810"),O=n("e7df"),m=n("0af5"),v=n("256f"),_=n("bc81"),I=n("a79f"),h=n("be3b"),R=new T["a"],A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return!1;var t=e.geometryTypes;return t&&"undefined"!==typeof t.find(function(e){return e===l["f"].TYPE_RASTER})},N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l["b"].HIST_MAX_LENGTH;e.push(t),e.length>n&&e.shift()},g=function(e,t){if(0===e.length)return null;if(void 0===t)return e[e.length-1];var n=c()(e).reverse().find(function(e){return e.type===t});return"undefined"!==typeof n?n:null},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&null!==t){var n=[].reduce,o=function e(o,a){return o||!a?o:Array.isArray(a)?n.call(Object(a),e,o):a.id===t?a:a.children&&a.children.length>0?e(null,a.children):null};return o(null,e)}return null},L=function(e){return{node:r()({id:e.id,label:e.literalValue||e.label,observable:e.observable,type:e.shapeType,viewerIdx:e.viewerIdx,viewerType:null!==e.viewerIdx?u["a"].getters["view/viewer"](e.viewerIdx).type:null,children:[],childrenCount:e.childrenCount,siblingsCount:e.siblingsCount,parentArtifactId:e.parentArtifactId,tickable:null!==e.viewerIdx&&!e.empty||e.observationType===l["j"].TYPE_GROUP||e.childrenCount>0,disabled:e.empty&&(e.observationType!==l["j"].TYPE_GROUP||0===e.childrenCount),empty:e.empty,actions:e.actions,header:e.observationType===l["j"].TYPE_GROUP?"folder":"default",folderId:e.folderId,main:e.main,exportFormats:e.exportFormats,rootContextId:e.rootContextId,observationType:e.observationType},e.observationType===l["j"].TYPE_GROUP&&{childrenLoaded:0},e.siblingsCount&&{siblingsCount:e.siblingsCount}),parentId:null===e.folderId?e.parentId:e.folderId}},P=function(e){return new Promise(function(t,n){var o=e.substring(5);fetch("https://epsg.io/?format=json&q=".concat(o)).then(function(o){return o.json().then(function(o){var a=o.results;if(a&&a.length>0)for(var i=0,r=a.length;i<r;i+=1){var s=a[i];if(s){var c=s.code,l=s.proj4,u=s.bbox;if(c&&c.length>0&&l&&l.length>0&&u&&4===u.length){var f="EPSG:".concat(c);I["a"].defs(f,l),Object(_["a"])(I["a"]);var E=Object(v["g"])(f),p=Object(v["i"])(d["d"].PROJ_EPSG_4326,E),T=Object(m["a"])([u[1],u[2],u[3],u[0]],p);E.setExtent(T),console.info("New projection registered: ".concat(f)),t(E)}else n(new Error("Some error in projection search result: ".concat(JSON.stringify(s))))}else n(new Error("Some error in projection search result: no results"))}else n(new Error("Unknown projection: ".concat(e)))})})})};function w(e){return y.apply(this,arguments)}function y(){return y=a()(regeneratorRuntime.mark(function e(t){var n,o,a,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.spatialProjection,null===o){e.next=9;break}if(n=Object(v["g"])(o),null!==n){e.next=7;break}return e.next=6,P(o);case 6:n=e.sent;case 7:e.next=10;break;case 9:n=d["d"].PROJ_EPSG_4326;case 10:return a=t.encodedShape,0===a.indexOf("LINEARRING")&&(a=a.replace("LINEARRING","LINESTRING")),i=null,-1!==a.indexOf("POINT")?(r=R.readFeature(a,{dataProjection:n,featureProjection:d["d"].PROJ_EPSG_3857}),null!==r&&null!==r.getGeometry()&&(i=r.getGeometry().getFirstCoordinate())):i=R.readGeometry(a,{dataProjection:n,featureProjection:d["d"].PROJ_EPSG_3857}),t.zIndexOffset=0,e.abrupt("return",i);case 16:case"end":return e.stop()}},e)})),y.apply(this,arguments)}var x=function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;u["a"].dispatch("view/setSpinner",r()({},l["p"].SPINNER_LOADING,{owner:e}),{root:!0}),h["a"].get(t,n).then(function(t){t&&o(t,function(){u["a"].dispatch("view/setSpinner",r()({},l["p"].SPINNER_STOPPED,{owner:e}),{root:!0})})}).catch(function(t){if(u["a"].dispatch("view/setSpinner",r()({},l["p"].SPINNER_ERROR,{owner:e,errorMessage:t}),{root:!0}),null===a)throw t;a(t)})};function D(e,t){return k.apply(this,arguments)}function k(){return k=a()(regeneratorRuntime.mark(function e(t,n){var o,a,i,s,m,_,I,R,N,g,L,w,y,D;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.viewport,a=void 0===o?null:o,i=A(t),i?t.parentId===u["a"].getters["data/context"].id?s=u["a"].getters["data/context"].spatialProjection:(m=C(u["a"].state.data.tree,t.parentId),null!==m&&m.spatialProjection?s=m.spatialProjection:console.debug("Unknown parent with id ".concat(t.parentId))):s=t.spatialProjection,null===s){e.next=11;break}if(_=Object(v["g"])(s),null!==_){e.next=9;break}return e.next=8,P(s);case 8:_=e.sent;case 9:e.next=12;break;case 11:_=d["d"].PROJ_EPSG_4326;case 12:if(I=t.encodedShape,0===I.indexOf("LINEARRING")&&(I=I.replace("LINEARRING","LINESTRING")),R=(new T["a"]).readGeometry(I,{dataProjection:_,featureProjection:i?_:d["d"].PROJ_EPSG_3857}),!i){e.next=22;break}return t.zIndexOffset=d["d"].ZINDEX_OFFSET*d["d"].ZINDEX_MULTIPLIER_RASTER,null===a?a=Math.max(document.body.clientHeight,document.body.clientWidth)*l["f"].PARAM_VIEWPORT_MULTIPLIER:a>l["f"].PARAM_VIEWPORT_MAX_SIZE&&(a=l["f"].PARAM_VIEWPORT_MAX_SIZE),N=R.getExtent(),g="".concat("").concat("/modeler/engine/session/view/","data/").concat(t.id),L=new O["a"]({projection:_,imageExtent:N,url:g,style:d["e"].POLYGON_OBSERVATION_STYLE,imageLoadFunction:function(e,n){u["a"].dispatch("view/setSpinner",r()({},l["p"].SPINNER_LOADING,{owner:n}),{root:!0}),h["a"].get(n,{params:{format:l["f"].TYPE_RASTER,viewport:a},responseType:"blob"}).then(function(o){if(o){var a=new FileReader;a.readAsDataURL(o.data),a.onload=function(){var o=e.getImage();o.src=a.result,u["a"].dispatch("view/setSpinner",r()({},l["p"].SPINNER_STOPPED,{owner:n}),{root:!0}),x("cm_".concat(t.id),g,{params:{format:"COLORMAP"}},function(e,n){if(e&&e.data){var o=e.data;if("RAMP"===o.type&&o.colors.length>1&&o.colors.length<256){for(var a=[],i=[],r=o.colors.length,s=Math.floor(256/r),l=s+(256-r*s),u=0;u<r-1;u++){var d=Object(f["f"])(o.colors[u],o.colors[u+1],u===r-2?l:s),E=Object(f["g"])([parseFloat(o.labels[u]),parseFloat(o.labels[u+1])],u===r-2?l:s,4);a.push.apply(a,c()(d)),i.push.apply(i,c()(E))}t.colormap={colors:a,labels:i,type:"MODRAMP"}}else t.colormap=o}n()})},a.onerror=function(e){u["a"].dispatch("view/setSpinner",r()({},l["p"].SPINNER_ERROR,{owner:n,errorMessage:e}),{root:!0})}}}).catch(function(e){throw u["a"].dispatch("view/setSpinner",r()({},l["p"].SPINNER_ERROR,{owner:n,errorMessage:e}),{root:!0}),e})}}),e.abrupt("return",new b["a"]({id:t.id,source:L}));case 22:return 0===I.indexOf("LINESTRING")||0===I.indexOf("MULTILINESTRING")?(w=d["e"].LNE_OBSERVATION_STYLE,t.zIndexOffset=d["d"].ZINDEX_OFFSET*d["d"].ZINDEX_MULTIPLIER_LINES):0===I.indexOf("POINT")||0===I.indexOf("MULTIPOINT")?(w=Object(f["d"])(d["e"].POINT_OBSERVATION_SVG_PARAM,t.label),t.zIndexOffset=d["d"].ZINDEX_OFFSET*d["d"].ZINDEX_MULTIPLIER_POINTS):(w=d["e"].POLYGON_OBSERVATION_STYLE,t.zIndexOffset=d["d"].ZINDEX_OFFSET*d["d"].ZINDEX_MULTIPLIER_POLYGONS),y=new S["a"]({geometry:R,name:t.label,id:t.id}),D=new p["a"]({id:t.id,source:new E["a"]({features:[y]}),style:w}),e.abrupt("return",D);case 26:case"end":return e.stop()}},e)})),k.apply(this,arguments)}},be3b:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("bc3a"),a=n.n(o),i=a.a.create();t["b"]=function(e){var t=e.Vue,n=e.store;n.state.data.session?i.defaults.headers.common.Authorization=n.state.data.session:console.warn("No session established en axios header, check it"),t.prototype.$axios=i}},d247:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});n("0d6d"),Object.freeze({SEARCH_TYPES:[{enumId:"CONCEPT",name:"CONCEPT",color:"#ff0000"},{enumId:"OPERATOR",name:"OPERATOR",color:"#ffff00"},{enumId:"OBSERVATION",name:"OBSERVATION",color:"#ff00ff"},{enumId:"MODEL",name:"MODEL",color:"#0000ff"}]});var o=Object.freeze({CLASS_USERCONTEXTCHANGE:"UserContextChange",CLASS_SEARCH:"Search",CLASS_OBSERVATIONLIFECYCLE:"ObservationLifecycle",CLASS_TASKLIFECYCLE:"TaskLifecycle",CLASS_USERCONTEXTDEFINITION:"UserContextDefinition",CLASS_USERINTERFACE:"UserInterface",TYPE_REGIONOFINTEREST:"RegionOfInterest",TYPE_FEATUREADDED:"FeatureAdded",TYPE_PERIODOFINTEREST:"PeriodOfInterest",TYPE_SUBMITSEARCH:"SubmitSearch",TYPE_MATCHACTION:"MatchAction",TYPE_REQUESTOBSERVATION:"RequestObservation",TYPE_RESETCONTEXT:"ResetContext",TYPE_RECONTEXTUALIZE:"Recontextualize",TYPE_TASKINTERRUPTED:"TaskInterrupted",TYPE_SCALEDEFINED:"ScaleDefined",TYPE_DATAFLOWNODEDETAIL:"DataflowNodeDetail",TYPE_CHANGESETTING:"ChangeSetting",TYPE_USERINPUTPROVIDED:"UserInputProvided",PAYLOAD_CLASS_SPATIALEXTENT:"SpatialExtent",PAYLOAD_CLASS_SPATIALLOCATION:"SpatialLocation",PAYLOAD_CLASS_TEMPORALEXTENT:"TemporalExtent",PAYLOAD_CLASS_SEARCHREQUEST:"SearchRequest",PAYLOAD_CLASS_SEARCHMATCHACTION:"SearchMatchAction",PAYLOAD_CLASS_OBSERVATIONREQUEST:"ObservationRequest",PAYLOAD_CLASS_INTERRUPTTASK:"InterruptTask",PAYLOAD_CLASS_SCALEREFERENCE:"ScaleReference",PAYLOAD_CLASS_DATAFLOWSTATE:"DataflowState",PAYLOAD_CLASS_CONTEXTUALIZATIONREQUEST:"ContextualizationRequest",PAYLOAD_CLASS_SETTINGCHANGEREQUEST:"SettingChangeRequest",PAYLOAD_CLASS_USERINPUTRESPONSE:"UserInputResponse",PAYLOAD_CLASS_EMPTY:"String"}),a=Object.freeze({CLASS_TASKLIFECYCLE:"TaskLifecycle",CLASS_OBSERVATIONLIFECYCLE:"ObservationLifecycle",CLASS_QUERY:"Query",CLASS_USERCONTEXTCHANGE:"UserContextChange",CLASS_NOTIFICATION:"Notification",CLASS_USERCONTEXTDEFINITION:"UserContextDefinition",CLASS_USERINTERFACE:"UserInterface",TYPE_DATAFLOWCOMPILED:"DataflowCompiled",TYPE_DATAFLOWSTATECHANGED:"DataflowStateChanged",TYPE_DATAFLOWDOCUMENTATION:"DataflowDocumentation",TYPE_NEWOBSERVATION:"NewObservation",TYPE_MODIFIEDOBSERVATION:"ModifiedObservation",TYPE_QUERYRESULT:"QueryResult",TYPE_RESETCONTEXT:"ResetContext",TYPE_SCALEDEFINED:"ScaleDefined",TYPE_USERINPUTREQUESTED:"UserInputRequested",TYPE_TASKSTARTED:"TaskStarted",TYPE_TASKFINISHED:"TaskFinished",TYPE_TASKABORTED:"TaskAborted",TYPE_DEBUG:"Debug",TYPE_INFO:"Info",TYPE_WARNING:"Warning",TYPE_ERROR:"Error",PAYLOAD_CLASS_TASKREFERENCE:"TaskReference",PAYLOAD_CLASS_DATAFLOWREFERENCE:"DataflowReference",PAYLOAD_CLASS_DATAFLOWSTATE:"DataflowState",PAYLOAD_CLASS_OBSERVATIONREFERENCE:"ObservationReference",PAYLOAD_CLASS_SEARCHRESPONSE:"SearchResponse",PAYLOAD_CLASS_SCALEREFERENCE:"ScaleReference",PAYLOAD_CLASS_USERINPUTREQUEST:"UserInputRequest",PAYLOAD_CLASS_EMPTY:"String"})},fb1c:function(e,t,n){}},[[0,"runtime","vendor"]]]);
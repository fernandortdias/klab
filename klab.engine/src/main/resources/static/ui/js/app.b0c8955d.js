(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"0kf8":function(e,n,t){"use strict";t.d(n,"c",function(){return o}),t.d(n,"b",function(){return s}),t.d(n,"a",function(){return i});t("DW2E");var o=Object.freeze({TYPE_DEBUG:"Debug",TYPE_INFO:"Info",TYPE_WARNING:"Warning",TYPE_ERROR:"Error"}),s=Object.freeze({CLASS_USERCONTEXTCHANGE:"UserContextChange",PAYLOAD_CLASS_SPATIALEXTENT:"SpatialExtent",PAYLOAD_CLASS_TEMPORALEXTENT:"TemporalExtent",TYPE_REGIONOFINTEREST:"RegionOfInterest",TYPE_PERIODOFINTEREST:"PeriodOfInterest"}),i=Object.freeze({CLASS_TASKLIFECYCLE:"TaskLifecycle",CLASS_OBSERVATIONLIFECYCLE:"ObservationLifecycle",PAYLOAD_CLASS_TASKREFERENCE:"TaskReference",PAYLOAD_CLASS_DATAFLOWREFERENCE:"DataflowReference",PAYLOAD_CLASS_OBSERVATIONREFERENCE:"ObservationReference",TYPE_TASKSTARTED:"TaskStarted",TYPE_TASKFINISHED:"TaskFinished",TYPE_TASKABORTED:"TaskAborted",TYPE_INFO:"Info",TYPE_DATAFLOWCOMPILED:"DataflowCompiled",TYPE_NEWOBSERVATION:"NewObservation",TYPE_MODIFIEDOBSERVATION:"ModifiedObservation"})},83:function(e,n,t){e.exports=t("JJXq")},Hl11:function(e,n,t){},I2m6:function(e,n,t){"use strict";var o=t("J4zp"),s=t.n(o),i=(t("rGqo"),t("yt8O"),t("/8Fb"),t("cDf5")),r=t.n(i),a=t("lwsE"),c=t.n(a),l=t("W8MJ"),u=t.n(l),d=t("vDqi"),f=t.n(d),E=t("3dTw"),h=t.n(E),O=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{draft:"draft-04"};if(c()(this,e),void 0===n||""===n)throw Error("URL is mandatory");this.djvEnv=new h.a({version:t.draft}),this.initialized=!1,this.url=n,this.initTimeout=null,this.axios=f.a.create(),console.debug("Load schema(s) on creation"),this.initTimeout=setTimeout(this.init(n),2e3)}return u()(e,[{key:"validateJsonSchema",value:function(e,n){if(!this.initialized)return console.info("djvEnv not read"),!1;if(this.djvEnv.resolve(n)){var t=this.djvEnv.validate(n,e);if("undefined"===typeof t)return console.debug("Validation ok"),!0;throw Error(t)}throw Error("Schema not found: ".concat(n))}},{key:"init",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;this.initialized||this.axios.get(n,{transformRequest:[function(e,n){return delete n.common["WWW-Authenticate"],e}]}).then(function(n){var t=n.data;if("object"!==r()(t))throw Error("Error asking for JsonSchema(s): no data");for(var o=Object.entries(t),i=0;i<o.length;i++){var a=s()(o[i],2),c=a[0],l=a[1];e.djvEnv.addSchema(c,l),console.info("Added schema ".concat(c))}e.initialized=!0}).catch(function(n){console.log(n),clearTimeout(e.initTimeout),e.initTimeout=setTimeout(function(){e.init(),console.info("Trying to connect to donwload schema(s)")},5e3)})}}]),e}();t.d(n,"b",function(){return p});var p=new O("".concat("").concat("/modeler","/schema"));n["a"]=function(e){var n=e.Vue;n.prototype.$djvEnv=p}},JJXq:function(e,n,t){"use strict";t.r(n);var o=t("MVZn"),s=t.n(o),i=(t("SpHO"),t("n/R6")),r=t("Kw5r"),a=t("4IOb");r["a"].use(a["G"],{cfg:{},i18n:i["a"],components:{QLayout:a["n"],QLayoutHeader:a["q"],QLayoutDrawer:a["o"],QLayoutFooter:a["p"],QPageContainer:a["v"],QPage:a["u"],QToolbar:a["B"],QToolbarTitle:a["C"],QBtn:a["c"],QIcon:a["j"],QList:a["r"],QListHeader:a["s"],QItem:a["k"],QItemMain:a["l"],QItemSide:a["m"],QTree:a["D"],QResizeObservable:a["x"],QModal:a["t"],QSpinnerRadio:a["A"],QSpinnerBall:a["z"],QPageSticky:a["w"],QCard:a["d"],QCardTitle:a["i"],QCardMain:a["f"],QCardMedia:a["g"],QCardSeparator:a["h"],QCardActions:a["e"]},directives:{Ripple:a["E"]},plugins:{Notify:a["b"],Cookies:a["a"]}});t("QBu7"),t("flf9"),t("QQ0w"),t("KCao"),t("Hl11"),t("fm0S");var c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"q-app"}},[t("router-view")],1)},l=[];c._withStripped=!0;var u=t("L2JU"),d=[{id:1,label:"Italia",lat:42.350593,lng:13.079787,zoom:6,children:[{id:110,label:"Veneto",lat:45.6702891,lng:12.2000621,zoom:8,children:[{id:111,label:"Volpago",lat:45.7756238,lng:12.1095737,zoom:15},{id:120,label:"Verona",lat:45.4263052,lng:10.957512,zoom:13}]},{id:130,label:"Cremona",lat:45.141861,lng:10.021912,zoom:14}]},{id:2,label:"Spain",lat:40.172147,lng:-3.082058,zoom:6,children:[{id:200,label:"Murcia",lat:37.9805949,lng:-1.1621947,zoom:13}]},{id:3,label:"Ethiopia",lat:9.381763,lng:39.635625,zoom:6,children:[{id:300,label:"Melka Sede",lat:9.343971,lng:40.299841,zoom:13}]}],f=t("sSqL"),E={name:"App",computed:s()({},Object(u["c"])("stomp",["queuedMessage"])),sockets:{onconnect:function(e){console.log("On connect app: ".concat(JSON.stringify(e,null,4))),this.sendQueue()},onerror:function(e){console.log("Error: ".concat(JSON.stringify(e)))},onerrorsend:function(e){console.log("Error on send: ".concat(JSON.stringify(e)))},onmessage:function(e){console.log("Received frame:\n".concat(JSON.stringify(e,null,4)))},onsubscribe:function(e){console.log("Subscribe with subscribe id: ".concat(JSON.stringify(e,null,4)))},onclose:function(){console.log("Disconnected")},onsend:function(e){var n=e.headers,t=e.message;this.queuedMessage&&t===this.queuedMessage.message&&this.stompCleanQueue(),console.log("Send a message: ".concat(t," with this headers: ").concat(n))}},methods:s()({sendQueue:function(){if(this.queuedMessage){var e=this.queuedMessage,n=e.message,t=e.headers;this.sendStompMessage(n,t)}}},Object(u["b"])("stomp",{stompCleanQueue:"stomp_cleanqueue"})),beforeMount:function(){var e=this.$urlParams.get("test_tree")||!1;e?this.loadTree(d):this.$store.dispatch("data/addObservation",{observation:f["b"].OBSERVATION_DEFAULT,main:!0,noTree:!0},{root:!0})}},h=E,O=(t("ZL7j"),t("KHd+")),p=Object(O["a"])(h,c,l,!1,null,null,null),m=p.exports,T=t("jE9Z"),v=[{path:"/",component:function(){return t.e(4).then(t.bind(null,"ez0Y"))},children:[{path:"/explorer",component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"kmF/"))}},{path:"/viewer",component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"kmF/"))}},{path:"/",redirect:"/viewer"},{name:"icons",path:"icons",component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"0s7m"))}}]},{path:"*",component:function(){return t.e(2).then(t.bind(null,"7l0S"))}}];r["a"].use(T["a"]);var S,g=new T["a"]({mode:"history",base:"/modeler/ui/",scrollBehavior:function(){return{y:0}},routes:v}),b=g,I={mainWin:{paletteVisible:!0},logActions:[],viewers:[],lastViewerId:0,contextLayer:null},N=t("RIqP"),_=t.n(N),A=(t("dRSK"),t("fMpr")),R={hasPalette:function(e){return e.mainWin.paletteVisible},lastLogAction:function(e){return function(n){return void 0===n&&(n=A["a"].TYPE_ALL),e.logActions.length>0?n===A["a"].TYPE_ALL?e.logActions[e.logActions.length-1]:_()(e.logActions).reverse().find(function(e){return e.type===n}):null}},contextLayer:function(e){return e.contextLayer},viewers:function(e){return e.viewers},mainViewer:function(e){return e.viewers.find(function(e){return e.main})},lastViewerId:function(e){return e.lastViewerId},viewer:function(e){return function(n){return e.viewers.length>0?e.viewers.find(function(e){return e.idx===n}):null}}},j=(t("rGqo"),{PUSH_LOG_ACTION:function(e,n){f["b"].pushElementInFixedQueue(e.logActions,n)},SET_CONTEXT_LAYER:function(e,n){e.viewers.splice(0,e.viewers.length),e.lastViewerId=0,e.contextLayer=n},SET_MAIN_VIEWER:function(e,n){e.viewers.forEach(function(e){e.main=e.idx===n})},ADD_VIEWER_ELEMENT:function(e,n){var t=n.main,o=n.type,s=n.callback;0===e.lastViewerId?t=!0:!0===t&&e.viewers.forEach(function(e){e.main=!1}),e.lastViewerId+=1,e.viewers.push({idx:e.lastViewerId,main:t,type:o,observations:[]}),"function"===typeof s&&s(e.lastViewerId)},SET_VISIBLE:function(){}}),P=(t("VRzm"),t("wd/R")),k=t.n(P),w={pushLogAction:function(e,n){var t=e.commit,o=n.type,s=n.payload;t("PUSH_LOG_ACTION",{type:o,payload:s,time:k()()})},setContextLayer:function(e,n){var t=e.commit;t("SET_CONTEXT_LAYER",f["b"].getLayerObject(n,!0))},setMainViewer:function(e,n){var t=e.commit;t("SET_MAIN_VIEWER",n)},assignViewer:function(e,n){var t=e.commit,o=e.getters,s=e.dispatch,i=n.observation,r=n.main,a=void 0!==r&&r;return new Promise(function(e,n){if(i&&i.shapeType){var r=o.viewers.find(function(e){return e.type===f["a"].VIEW_MAP});"undefined"===typeof r?t("ADD_VIEWER_ELEMENT",{main:a,type:f["a"].VIEW_MAP,callback:function(n){e(n)}}):(a&&s("setMainViewer",r.idx),e(r.idx))}else n(new Error("Unknown observation type ".concat(JSON.stringify(i))))})}},y={namespaced:!0,state:I,getters:R,mutations:j,actions:w},C={tree:[],context:null,nodeSelected:null,observations:[],session:null,history:[],orphans:[]},L={tree:function(e){return e.tree},nodeSelected:function(e){return e.nodeSelected},observations:function(e){return function(n){var t=e.observations.filter(function(e){return e.viewerIdx===n});return t}},hasContext:function(e){return null!==e.context},contextLabel:function(e){return null!==e.context?e.context.label:null},fullContext:function(e){return e.context},session:function(e){return e.session}},M={SET_CONTEXT:function(e,n){null!==e.context&&e.history.push({time:k()(),context:e.context,tree:e.tree,observations:e.observations}),e.context=n,e.tree=[],e.observations=[],e.nodeSelected=null},ADD_OBSERVATION:function(e,n){console.log("Added observation:\n".concat(JSON.stringify(n,null,2))),e.observations.push(n)},ADD_NODE:function(e,n){var t=n.node,o=n.parentId;if(e.context.id!==t.id)if(e.context.id===o)e.tree.push(t);else{var s=f["b"].findParent(e.tree,o);null!==s?s.children.push(t):e.orphans.push(t)}else console.error("Try to add context to tree, check it!")},SET_NODE_SELECTED:function(e,n){e.nodeSelected=n},SET_VISIBLE:function(e,n){var t=n.id,o=n.visible,s=n.callback,i=void 0===s?null:s;e.observations.forEach(function(e){e.id===t&&(e.visible=o,null!==i&&i(e))})}},D=t("vjsO"),x={setContext:function(e,n){var t=e.commit,o=e.dispatch;t("SET_CONTEXT",n),o("view/setContextLayer",n,{root:!0})},addObservation:function(e,n){var t=e.commit,o=e.dispatch,s=n.observation,i=n.folderId,r=void 0===i?null:i,a=n.noTree,c=void 0!==a&&a,l=n.main,u=void 0!==l&&l;o("view/assignViewer",{observation:s,main:u},{root:!0}).then(function(e){if(s.viewerIdx=e,s.visible=!1,t("ADD_OBSERVATION",s),!c){var n=!1;s.siblingCount>1&&null===r&&(r=Math.floor(Date.now()/1e3),t("ADD_NODE",{node:{id:r,label:"".concat(s.observable," folder"),type:A["a"].GEOMTYP_FOLDER,children:[],noTick:!0},parentId:s.parentId}),n=!0),t("ADD_NODE",{node:{id:s.id,label:s.literalValue||s.label,type:s.shapeType,viewerIdx:s.viewerIdx,children:[],noTick:null!==s.literalValue},parentId:null===r?s.parentId:r}),s.children.length>0&&s.children.forEach(function(e){o("addObservation",{observation:e})}),n&&o("askForSiblings",{node:s,folderId:r})}})},addToTree:function(e,n){var t=e.commit,o=n.node,s=n.parentId;t("ADD_NODE",{node:{id:o.id,label:o.label,type:o.shapeType||o.type,children:[],viewerIdx:o.viewerIdx},parentId:s})},askForSiblings:function(e,n){var t=e.dispatch,o=n.node,s=n.folderId;D["a"].get("".concat("").concat("/modeler/engine/session/view/","siblings/").concat(o.id),{params:{count:-1,offset:0,childLevel:-1}}).then(function(e){var n=e.data;n&&n.siblingCount>1&&n.siblings&&n.siblings.forEach(function(e){t("addObservation",{observation:e,folderId:s})})})},updateNodes:function(e,n){var t=e.commit,o=e.dispatch,s=n.newValues,i=n.oldValues;if(i.length>s.length){var r=i.filter(function(e){return s.indexOf(e)<0});1===r.length?t("SET_VISIBLE",{id:r[0],visible:!1}):console.error("Length of removed is strange: ".concat(r.length))}else{var a=s[s.length-1];t("SET_VISIBLE",{id:a,visible:!0,callback:function(e){o("view/setMainViewer",e.viewerIdx,{root:!0})}})}}},Y={namespaced:!0,state:C,getters:L,mutations:M,actions:x},U={connectionState:A["a"].CONNECTION_UNKNOWN,reconnectionsAttempt:0,subscriber:null,sendedMessages:[],receivedMessages:[],queuedMessage:null,tasks:[]},V={lastError:function(e){var n=e.receivedMessages.filter(function(e){return e.type===A["a"].TYPE_ERROR}).slice(-1);return 1===n.length?n[0]:null},lastMessage:function(e){var n=e.receivedMessages.filter(function(e){return e.type===A["a"].TYPE_MESSAGE}).slice(-1);return 1===n.length?n[0]:null},lastReceivedMessage:function(e){return e.receivedMessages.length>0?e.receivedMessages.slice(-1)[0]:null},lastSendedMessage:function(e){return e.sendedMessages.length>0?e.sendedMessages.slice(-1)[0]:null},subscriberId:function(e){return null!==e.subscriber?e.subscriber.id:null},queuedMessage:function(e){return e.queuedMessage},connectionState:function(e){return e.connectionState},taskIsAlive:function(e){return function(n){e.tasks.has(n)}},hasTasks:function(e){return 0!==e.tasks.length}},B=(t("INYr"),{STOMP_CONNECTION_STATE:function(e,n){e.connectionState=n},STOMP_ERROR:function(e,n){f["b"].pushElementInFixedQueue(e.receivedMessages,{date:k()().format("HH:mm:ss"),type:f["a"].TYPE_ERROR,message:n})},STOMP_MESSAGE:function(e,n){f["b"].pushElementInFixedQueue(e.receivedMessages,{date:k()().format("HH:mm:ss"),type:f["a"].TYPE_MESSAGE,message:n})},STOMP_SEND_MESSAGE:function(e,n){f["b"].pushElementInFixedQueue(e.sendedMessages,s()({date:k()().format("HH:mm:ss")},n))},STOMP_SUBSCRIBED:function(e,n){e.subscriber=n},STOMP_RECONNECTIONS_ATTEMPT:function(e,n){e.reconnectionsAttempt=n},STOMP_RECONNECTIONS_ATTEMPT_RESET:function(e){e.reconnectionsAttempt=0},STOMP_QUEUE_MESSAGE:function(e,n){e.queuedMessage=n},STOMP_CLEAN_QUEUE:function(e){e.queuedMessage=null},TASK_START:function(e,n){e.tasks.push({id:n.id,task:n})},TASK_END:function(e,n){var t=n.id,o=e.tasks.findIndex(function(e){return e.id===t});"undefined"!==typeof o?e.tasks.splice(o,1):console.debug("Task with id = ".concat(t," not founded"))}}),z=t("lSNA"),G=t.n(z),W=t("0kf8");function F(e,n,t){e("view/pushLogAction",{type:n,payload:t},{root:!0})}var Q=(S={},G()(S,W["a"].TYPE_TASKSTARTED,function(e,n){n("stomp/startTask",e,{root:!0}),F(n,W["c"].TYPE_DEBUG,"Started task with id ".concat(e.id))}),G()(S,W["a"].TYPE_TASKABORTED,function(e,n){F(n,W["c"].TYPE_ERROR,"Aborted task with id ".concat(e.id))}),G()(S,W["a"].TYPE_TASKFINISHED,function(e,n){n("stomp/endTask",e,{root:!0}),F(n,W["c"].TYPE_DEBUG,"Ended task with id ".concat(e.id))}),G()(S,W["a"].TYPE_DATAFLOWCOMPILED,function(e,n){F(n,W["c"].TYPE_DEBUG,"Dataflow compiled in task ".concat(e.taskId))}),G()(S,W["a"].TYPE_NEWOBSERVATION,function(e,n){F(n,W["c"].TYPE_DEBUG,"New observation received: ".concat(JSON.stringify(e,null,4))),console.log("Observation:\n".concat(JSON.stringify(e,null,4))),null===e.parentId||e.parentId===e.id?n("data/setContext",e,{root:!0}):n("data/addObservation",{observation:e},{root:!0})}),G()(S,W["a"].TYPE_INFO,function(e,n){F(n,W["c"].TYPE_INFO,"Received an info: ".concat(JSON.stringify(e)))}),S),J=function(e,n){var t=e.body,o=JSON.parse(t);return Object.prototype.hasOwnProperty.call(Q,o.type)?Q[o.type](o.payload,n):(console.warn("Unknown task ".concat(o.type)),!1)},H={stomp_onconnect:function(e,n){var t=e.commit;t("STOMP_CONNECTION_STATE",A["a"].CONNECTION_UP),t("STOMP_RECONNECTIONS_ATTEMPT_RESET"),t("STOMP_MESSAGE",n)},stomp_onclose:function(e){var n=e.commit;n("STOMP_CONNECTION_STATE",A["a"].CONNECTION_DOWN)},stomp_onerror:function(e,n){var t=e.commit;t("STOMP_CONNECTION_STATE",A["a"].CONNECTION_ERROR),t("STOMP_ERROR",n)},stomp_onmessage:function(e,n){var t=e.commit,o=e.dispatch;t("STOMP_MESSAGE",n),J(n,o)},stomp_onsubscribe:function(e,n){var t=e.commit;t("STOMP_SUBSCRIBED",n)},stomp_reconnect:function(e,n){var t=e.commit;t("STOMP_RECONNECTIONS_ATTEMPT",n),t("STOMP_CONNECTION_STATE",A["a"].CONNECTION_WORKING)},stomp_onsend:function(e,n){var t=e.commit,o=n.message;t("STOMP_SEND_MESSAGE",o)},stomp_onerrorsend:function(e,n){var t=e.commit;t("STOMP_QUEUE_MESSAGE",n)},stomp_cleanqueue:function(e){var n=e.commit;n("STOMP_CLEAN_QUEUE")},startTask:function(e,n){var t=e.commit;t("TASK_START",n)},endTask:function(e,n){var t=e.commit;t("TASK_END",n)}},K={namespaced:!0,state:U,getters:V,mutations:B,actions:H};r["a"].use(u["a"]);var q=new u["a"].Store({modules:{view:y,data:Y,stomp:K}}),X=q,Z=(t("OG14"),function(e){var n=e.Vue,t=e.store,o=new URLSearchParams(window.location.search);n.prototype.$urlParams=o,n.prototype.$constants=f["a"],n.prototype.$helpers=f["b"];var s=o.get(f["a"].PARAMS_SESSION)||a["a"].get(f["a"].PARAMS_SESSION),i=o.get(f["a"].PARAMS_MODE)||a["a"].get(f["a"].PARAMS_MODE);n.mixin({methods:{hexToRgb:function(e){if("undefined"!==typeof e){var n=a["F"].hexToRgb(e);return"".concat(n.r,", ").concat(n.g,", ").concat(n.b)}return"black"}}}),t.state.data.session=s,n.prototype.$mode=i,console.log("Session: ".concat(s," / mode: ").concat(i))}),$=t("qSUR"),ee={label:{appTitle:"k.LAB Explorer EN",running:"Running on Quasar v{version}",klabNoMessage:"No message",klabUnknownError:"Unknown error",klabNoDate:"No date",klabMessagesToSend:"There are one message in queue",modalNoConnection:"No connection, please wait",footer:"k.LAB Explorer - 2018",treeTitle:"Observation",reconnect:"Reconnect",unknownLabel:"Unknown"},messages:{connectionClosed:"Connection closed",connectionWorking:"Try to reconnect",connectionUnknown:"Starting..."},errors:{connectionError:"Connection error"},langName:"English"},ne={label:{appTitle:"k.LAB Explorer ES",running:"Corriendo sobre Quasar v{version}",klabNoMessage:"No hay ningún mensaje",klabUnknownError:"Error desconocido",klabNoDate:"No hay fecha",klabMessagesToSend:"Hay un mensaje en la cola",modalNoConnection:"No hay conexi&oacute;n, esperar",footer:"k.LAB Explorer - 2018",treeTitle:"Observaciones",reconnect:"Reconectar",unknownLabel:"Desconocido"},messages:{connectionClosed:"Conexión cerrada",connectionWorking:"Probando a reconectar",connectionUnknown:"Inicializando..."},errors:{connectionError:"Error de conexión"},langName:"Español"},te={label:{appTitle:"k.LAB Explorer IT",running:"Funzionando  con Quasar v{version}",klabNoMessage:"Nessun messaggio",klabUnknownError:"Errore sconosciuto",klabNoDate:"Nessuna data",klabMessagesToSend:"C'è un messaggio in coda",modalNoConnection:"Non c'è connessione",footer:"k.LAB Explorer - 2018",treeTitle:"Osservazioni",reconnect:"Riconnettere",unknownLabel:"Sconosciuto"},messages:{connectionClosed:"Connessione chiusa",connectionWorking:"Provando a riconnettere",connectionUnknown:"Inizializzando..."},errors:{connectionError:"Errore di connessione"},langName:"Italiano"},oe={en:ee,es:ne,it:te},se=function(e){var n=e.app,t=e.Vue;t.use($["a"]),n.i18n=new $["a"]({locale:"en",fallbackLocale:"en",messages:oe})},ie=function(e){var n=e.app,t=e.Vue;t.use($["a"]);var o="en";a["a"].has("klab_exp_lang")?(o=a["a"].get("klab_exp_lang"),console.log("Locale setted from cookie to ".concat(o))):(a["a"].set("klab_exp_lang",o,{expires:30,path:"/"}),console.log("Lang cookie setted to ".concat(o))),n.i18n=new $["a"]({locale:o,fallbackLocale:"en",messages:oe})},re=t("I2m6"),ae=(t("yt8O"),t("RW0V"),t("9VmF"),t("lwsE")),ce=t.n(ae),le=t("W8MJ"),ue=t.n(le),de=(t("9AAn"),function(){function e(){ce()(this,e),this.listeners=new Map}return ue()(e,[{key:"addListener",value:function(e,n,t){return"function"===typeof n&&(this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push({callback:n,vm:t}),!0)}},{key:"removeListener",value:function(e,n,t){var o,s=this.listeners.get(e);return!!(s&&s.length&&(o=s.reduce(function(e,o,s){return"function"===typeof o.callback&&o.callback===n&&o.vm===t&&(e=s),e},-1),o>-1))&&(s.splice(o,1),this.listeners.set(e,s),!0)}},{key:"emit",value:function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];var s=this.listeners.get(e);return!(!s||!s.length)&&(s.forEach(function(e){var n;(n=e.callback).call.apply(n,[e.vm].concat(t))}),!0)}}]),e}()),fe=new de,Ee=t("zH15"),he=t.n(Ee),Oe=t("xuFv"),pe=t.n(Oe),me=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ce()(this,e),!n)throw new Error("Connection url is needed");this.connectionUrl=n;var o=t.stompOptions,s=t.reconnection,i=void 0!==s&&s,r=t.reconnectionAttempts,a=void 0===r?1/0:r,c=t.reconnectionDelay,l=void 0===c?2e3:c,u=t.debug,d=void 0===u||u,f=t.store,E=t.storeNS,h=void 0===E?"":E,O=t.defaultMessageDestination;this.reconnection=i,this.reconnectionAttempts=a,this.reconnectionDelay=l,this.hasDebug=d,this.reconnectTimeoutId=-1,this.reconnectionCount=0,this.subscribeId=null,this.defaultMessageDestination=O,f&&(this.store=f,this.storeNS=h),this.stompOptions=o,this.connect(n,o)}return ue()(e,[{key:"debug",value:function(){var e;this.hasDebug&&(e=console).log.apply(e,arguments)}},{key:"connect",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.headers,s=void 0===o?{}:o,i=t.subscribeUrl,r=he()(e);return this.StompClient=pe.a.over(r,t),this.StompClient.connect(s,function(e){n.doOnEvent("onconnect",e),n.subscribe(i)},function(e){return n.doOnEvent("onerror",e)}),this.StompClient}},{key:"subscribe",value:function(e){var n=this;e&&(this.subscribeId=this.StompClient.subscribe(e,function(e){n.doOnEvent("onmessage",e)}),this.subscribeId&&this.doOnEvent("onsubscribe",this.subscribeId))}},{key:"isConnected",value:function(){return this.StompClient&&this.StompClient.connected}},{key:"reconnect",value:function(){var e=this;this.reconnectionCount<=this.reconnectionAttempts?(this.reconnectionCount+=1,clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=setTimeout(function(){e.doOnEvent("reconnect",e.reconnectionCount),e.connect(e.connectionUrl,e.stompOptions)},this.reconnectionDelay)):this.store&&this.passToStore("stomp_onerror","Reconnection error")}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultMessageDestination,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.headers,t=arguments.length>2?arguments[2]:void 0;return this.isConnected()?(this.StompClient.send(e,JSON.stringify(t),n),this.doOnEvent("onsend",{headers:n,message:t}),!0):(this.doOnEvent("onerrorsend",{headers:n,message:t}),!1)}},{key:"doOnEvent",value:function(e,n){fe.emit(e,n)||this.debug("No listener for ".concat(e)),this.store&&this.passToStore("stomp_".concat(e),n),this.reconnection&&"onoconnect"===e&&(this.reconnectionCount=0),this.reconnection&&"onerror"===e&&this.reconnect()}},{key:"passToStore",value:function(e,n){if(e.startsWith("stomp_")){var t="dispatch",o=[this.storeNS||"",e.toLowerCase()].filter(function(e){return!!e}).join("/"),s=n||null;n&&n.data&&(s=JSON.parse(n.data),s.mutation?o=[s.namespace||"",s.mutation].filter(function(e){return!!e}).join("/"):s.action&&(t="dispatch",o=[s.namespace||"",s.action].filter(function(e){return!!e}).join("/"))),this.store[t](o,s)}}},{key:"close",value:function(){this.StompClient&&(this.StompClient.disconnect(),this.doOnEvent("onclose")),this.reconnectTimeoutId&&clearTimeout(this.reconnectTimeoutId)}}]),e}(),Te={install:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!n)throw new Error("[vue-stomp-client] cannot locate connection");var o=null;t.connectManually?(e.prototype.$connect=function(){o=new me(n,t),e.prototype.$stompClient=o.StompClient},e.prototype.$disconnect=function(){o&&o.reconnection&&(o.reconnection=!1),e.prototype.$stompClient&&(o.close(),delete e.prototype.$stompClient)}):(o=new me(n,t),e.prototype.$stompClient=o.StompClient),e.mixin({methods:{sendStompMessage:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/klab/message";o.send(t,n,e)},reconnect:function(){o.StompClient&&!o.StompClient.connected&&o.reconnect()}},created:function(){var e=this;if(this.$options.sockets){var n=this,t=this.$options.sockets;this.$options.sockets=new Proxy({},{set:function(e,t,o){return fe.addListener(t,o,n),e[t]=o,!0},deleteProperty:function(e,t){return fe.removeListener(t,n.$options.sockets[t],n),delete e.key,!0}}),t&&Object.keys(t).forEach(function(n){e.$options.sockets[n]=t[n]})}},beforeDestroy:function(){var e=this;if(this.$options.sockets){var n=this.$options.sockets;n&&Object.keys(n).forEach(function(n){console.log("Remove listener ".concat(n)),fe.removeListener(n,e.$options.sockets[n],e),delete e.$options.sockets[n]})}}})}},ve=function(e){var n=e.Vue,t=e.store,o="".concat("/message","/").concat(t.getters["data/session"]);console.log("SubscribeURL: ".concat(o)),n.use(Te,"/modeler/message",{stompOptions:{subscribeUrl:o,debug:!1,reconnection:!0},defaultMessageDestination:"/klab/message",store:t,storeNS:"stomp",reconnection:!0})};r["a"].config.productionTip=!0;var Se=s()({el:"#q-app",router:b,store:X},m),ge=[];ge.push(Z),ge.push(se),ge.push(D["b"]),ge.push(ie),ge.push(re["a"]),ge.push(ve),ge.forEach(function(e){return e({app:Se,router:b,store:X,Vue:r["a"]})}),new r["a"](Se)},RnhZ:function(e,n,t){var o={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function s(e){var n=i(e),o=t(n);return o}function i(e){var n=o[e];if(!(n+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n}s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id="RnhZ"},ZL7j:function(e,n,t){"use strict";var o=t("usnz"),s=t.n(o);s.a},fMpr:function(e,n,t){"use strict";var o=t("bHcU"),s=t("g6Z0"),i=t("hoJM");n["a"]={HIST_MAX_LENGTH:50,CONNECTION_UNKNOWN:"UNKNOWN",CONNECTION_UP:"UP",CONNECTION_DOWN:"DOWN",CONNECTION_WORKING:"WORKING",CONNECTION_ERROR:"ERROR",TYPE_LOG:"LOG",TYPE_WARN:"WARN",TYPE_ERROR:"ERROR",TYPE_INFO:"INFO",TYPE_MESSAGE:"MSG",TYPE_ALL:"ALL",OBSTYP_PROCESS:"PROCESS",OBSTYP_STATE:"STATE",OBSTYP_SUBJECT:"SUBJECT",OBSTYP_CONFIGURATION:"CONFIGURATION",OBSTYP_EVENT:"EVENT",OBSTYP_RELATIONSHIP:"RELATIONSHIP",VALTYP_VOID:"VOID",VALTYP_NUMBER:"NUMBER",VALTYP_BOOLEAN:"BOOLEAN",VALTYP_CATEGORY:"CATEGORY",VALTYP_DISTRIBUTION:"DISTRIBUTION",GEOMTYP_RASTER:"RASTER",GEOMTYP_SHAPE:"SHAPE",GEOMTYP_SCALAR:"SCALAR",GEOMTYP_TIMESERIES:"TIMESERIES",GEOMTYP_NETWORK:"NETWORK",GEOMTYP_PROPORTIONS:"PROPORTIONS",GEOMTYP_FOLDER:"FOLDER",PARAMS_MODE:"mode",PARAMS_SESSION:"session",PARAMS_MODE_IDE:"ide",VIEW_MAP:"MapViewer",VIEW_CHART:"ChartViewer",VIEW_BLOB:"BlobViewer",SHAPE_POLYGON:"POLYGON",SHAPE_POINT:"POINT",BING_KEY:"",COORD_BC3:[-2.968226,43.332125],PROJ_EPSG_4326:"EPSG:4326",PROJ_EPSG_3857:"EPSG:3857",POLYGON_CONTEXT_STYLE:new o["c"]({stroke:new i["a"]({color:"rgb(38, 166, 154)",width:6}),fill:new s["a"]({color:"rgba(38, 166, 154, 0.1)"})}),POLYGON_OBSERVATION_STYLE:new o["c"]({stroke:new i["a"]({color:"rgb(255, 102, 0)",width:1}),fill:new s["a"]({color:"rgba(255, 102, 0, 0.1)"})})}},fm0S:function(e,n,t){},l8ur:function(e,n,t){var o={"./bounce.css":"PUmY","./bounceIn.css":"CliU","./bounceInDown.css":"pKm8","./bounceInLeft.css":"WWXe","./bounceInRight.css":"2oCq","./bounceInUp.css":"tg5a","./bounceOut.css":"853k","./bounceOutDown.css":"qbXy","./bounceOutLeft.css":"Bt10","./bounceOutRight.css":"Zrw1","./bounceOutUp.css":"kI+G","./fadeIn.css":"EHBt","./fadeInDown.css":"FiUO","./fadeInDownBig.css":"kzg4","./fadeInLeft.css":"DC5c","./fadeInLeftBig.css":"81dB","./fadeInRight.css":"74+S","./fadeInRightBig.css":"dHoL","./fadeInUp.css":"5/vb","./fadeInUpBig.css":"uK9C","./fadeOut.css":"Jc2o","./fadeOutDown.css":"k+pq","./fadeOutDownBig.css":"yIhU","./fadeOutLeft.css":"Xx1C","./fadeOutLeftBig.css":"pVV8","./fadeOutRight.css":"iTTW","./fadeOutRightBig.css":"lDgw","./fadeOutUp.css":"NRvT","./fadeOutUpBig.css":"I6Vv","./flash.css":"WKVH","./flip.css":"vaAy","./flipInX.css":"WLhn","./flipInY.css":"WQIU","./flipOutX.css":"csU/","./flipOutY.css":"uK2o","./headShake.css":"Iomn","./hinge.css":"CF6H","./jello.css":"gBTy","./lightSpeedIn.css":"632X","./lightSpeedOut.css":"0EOz","./pulse.css":"q5hK","./rollIn.css":"3HPs","./rollOut.css":"WSzb","./rotateIn.css":"SH0w","./rotateInDownLeft.css":"v2tj","./rotateInDownRight.css":"e5Zg","./rotateInUpLeft.css":"ifhg","./rotateInUpRight.css":"y4yY","./rotateOut.css":"3mUJ","./rotateOutDownLeft.css":"gTSn","./rotateOutDownRight.css":"Hqc8","./rotateOutUpLeft.css":"Y9Ea","./rotateOutUpRight.css":"/MMa","./rubberBand.css":"qrIa","./shake.css":"FfHN","./slideInDown.css":"eeoa","./slideInLeft.css":"qWPx","./slideInRight.css":"O3aI","./slideInUp.css":"IeMT","./slideOutDown.css":"q+3l","./slideOutLeft.css":"+FdI","./slideOutRight.css":"CkM9","./slideOutUp.css":"VwYb","./swing.css":"uWio","./tada.css":"M5GN","./wobble.css":"7VtN","./zoomIn.css":"OPPa","./zoomInDown.css":"JXdd","./zoomInLeft.css":"GZIC","./zoomInRight.css":"72gz","./zoomInUp.css":"l6Fa","./zoomOut.css":"zBUS","./zoomOutDown.css":"KsZc","./zoomOutLeft.css":"H9SI","./zoomOutRight.css":"+i/6","./zoomOutUp.css":"keWq"};function s(e){var n=i(e),o=t(n);return o}function i(e){var n=o[e];if(!(n+1)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n}s.keys=function(){return Object.keys(o)},s.resolve=i,e.exports=s,s.id="l8ur"},sSqL:function(e,n,t){"use strict";t.d(n,"b",function(){return d});t("dRSK");var o=t("WDFe"),s=t("Pmt0"),i=t("ZNkr"),r=t("TN97"),a=t("yBBP"),c=t("599d"),l=t("vjsO"),u=t("fMpr");t.d(n,"a",function(){return u["a"]});var d={capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},pushElementInFixedQueue:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u["a"].HIST_MAX_LENGTH;e.push(n),e.length>t&&e.shift()},formatExtent:function(e){return e?[e.south.toFixed(2),e.west.toFixed(2),e.north.toFixed(2),e.east.toFixed(2)]:null},findParent:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&null!==n){var t=[].reduce,o=function e(o,s){return o||!s?o:Array.isArray(s)?t.call(Object(s),e,o):s.id===n?s:s.children&&s.children.length>0?e(null,s.children):void 0};return o(null,e)}},getLayerObject:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e.geometryTypes,d=e.encodedShape,f=/(EPSG:\d{4})?\s?(.*)/g,E=f.exec(d),h=E[1]||u["a"].PROJ_EPSG_4326,O=(new i["a"]).readGeometry(E[2],{dataProjection:h,featureProjection:u["a"].PROJ_EPSG_3857});if(t&&"undefined"!==typeof t.find(function(e){return e===u["a"].GEOMTYP_RASTER})){var p=O.getExtent(),m="".concat("").concat("/modeler/engine/session/view/","data/").concat(e.id),T=new c["a"]({imageExtent:p,url:m,imageLoadFunction:function(e,n){l["a"].get(n,{params:{format:u["a"].GEOMTYP_RASTER},responseType:"blob"}).then(function(n){if(n){var t=new FileReader;t.readAsDataURL(n.data),t.onload=function(){e.getImage().src=t.result},t.onerror=function(e){console.log("Error: ",e)}}})}});return new a["a"]({id:e.id,source:T})}var v=new r["a"]({geometry:O,name:e.label,id:e.id});return new s["a"]({id:e.id,source:new o["b"]({features:[v]}),style:n?u["a"].POLYGON_CONTEXT_STYLE:u["a"].POLYGON_OBSERVATION_STYLE})},OBSERVATION_DEFAULT:{shapeType:"POINT",encodedShape:"EPSG:4326 POINT (40.299841 9.343971)",id:null,label:"DEFAULT",parentId:-1,visible:!0}}},usnz:function(e,n,t){},vjsO:function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t("vDqi"),s=t.n(o),i=s.a.create();n["b"]=function(e){var n=e.Vue,t=e.store;t.state.data.session?i.defaults.headers.common["WWW-Authenticate"]=t.state.data.session:console.warn("No session established en axios header, check what it means"),n.prototype.$axios=i}}},[[83,5,0]]]);
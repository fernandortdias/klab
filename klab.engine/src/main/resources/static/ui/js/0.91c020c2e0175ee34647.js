webpackJsonp([0],{"+3eL":function(t,e,i){"use strict";var o,r=i("WhVc");function n(){try{return o.apply(this,arguments)}catch(t){return r.errorObject.e=t,r.errorObject}}e.tryCatch=function(t){return o=t,n}},"+MLA":function(t,e,i){var o=i("EqjI"),r=i("06OY").onFreeze;i("uqUo")("freeze",function(t){return function(e){return t&&o(e)?t(r(e)):e}})},"//Fk":function(t,e,i){t.exports={default:i("U5ju"),__esModule:!0}},"/5HI":function(t,e,i){"use strict";t.exports=r;var o=i("ujcs");function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;function n(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,i){var o=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(o);for(var r=i.pos-1;r>=t;r--)i.buf[r+o]=i.buf[r]}function h(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function l(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function m(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var o=this.readVarint(),r=o>>3,n=this.pos;this.type=7&o,t(r,e,this),this.pos===n&&this.skip(o)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*_(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=o.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=o.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,o=this.buf;return e=127&(i=o[this.pos++]),i<128?e:(e|=(127&(i=o[this.pos++]))<<7,i<128?e:(e|=(127&(i=o[this.pos++]))<<14,i<128?e:(e|=(127&(i=o[this.pos++]))<<21,i<128?e:function(t,e,i){var o,r,n=i.buf;if(r=n[i.pos++],o=(112&r)>>4,r<128)return s(t,o,e);if(r=n[i.pos++],o|=(127&r)<<3,r<128)return s(t,o,e);if(r=n[i.pos++],o|=(127&r)<<10,r<128)return s(t,o,e);if(r=n[i.pos++],o|=(127&r)<<17,r<128)return s(t,o,e);if(r=n[i.pos++],o|=(127&r)<<24,r<128)return s(t,o,e);if(r=n[i.pos++],o|=(1&r)<<31,r<128)return s(t,o,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=o[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){var o="",r=e;for(;r<i;){var n,s,a,h=t[r],l=null,p=h>239?4:h>223?3:h>191?2:1;if(r+p>i)break;1===p?h<128&&(l=h):2===p?128==(192&(n=t[r+1]))&&(l=(31&h)<<6|63&n)<=127&&(l=null):3===p?(n=t[r+1],s=t[r+2],128==(192&n)&&128==(192&s)&&((l=(15&h)<<12|(63&n)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===p&&(n=t[r+1],s=t[r+2],a=t[r+3],128==(192&n)&&128==(192&s)&&128==(192&a)&&((l=(15&h)<<18|(63&n)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,p=1):l>65535&&(l-=65536,o+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),o+=String.fromCharCode(l),r+=p}return o}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=n(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=n(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,o;t>=0?(i=t%4294967296|0,o=t/4294967296|0):(o=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,o=o+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(o,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var o,r,n=0;n<e.length;n++){if((o=e.charCodeAt(n))>55295&&o<57344){if(!r){o>56319||n+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=o;continue}if(o<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=o;continue}o=r-55296<<10|o-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);o<128?t[i++]=o:(o<2048?t[i++]=o>>6|192:(o<65536?t[i++]=o>>12|224:(t[i++]=o>>18|240,t[i++]=o>>12&63|128),t[i++]=o>>6&63|128),t[i++]=63&o|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&a(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),o.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),o.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var o=this.pos-i;o>=128&&a(i,o,this),this.pos=i-1,this.writeVarint(o),this.pos+=o},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){this.writeMessage(t,c,e)},writePackedFloat:function(t,e){this.writeMessage(t,p,e)},writePackedDouble:function(t,e){this.writeMessage(t,u,e)},writePackedFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,d,e)},writePackedFixed64:function(t,e){this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,g,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},"/n6Q":function(t,e,i){i("zQR9"),i("+tPU"),t.exports=i("Kh4W").f("iterator")},"27If":function(t,e,i){var o=i("aeHf");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("rjj0").default)("57acba21",o,!1,{})},"2NXm":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={};i.d(o,"createPointGeom",function(){return Rn}),i.d(o,"createLineGeom",function(){return Pn}),i.d(o,"createPolygonGeom",function(){return In}),i.d(o,"createMultiPointGeom",function(){return Mn}),i.d(o,"createMultiLineGeom",function(){return Ln}),i.d(o,"createMultiPolygonGeom",function(){return An}),i.d(o,"createGeomCollection",function(){return On}),i.d(o,"createCircularPolygon",function(){return Fn}),i.d(o,"isMultiGeom",function(){return Nn}),i.d(o,"toSimpleGeom",function(){return Dn}),i.d(o,"findPointOnSurface",function(){return jn});var r=i("Dd8w"),n=i.n(r),s=i("NYxO"),a={name:"klabTree",data:function(){return{selected:null}},computed:n()({},Object(s.c)("data",["tree"])),methods:n()({},Object(s.b)("data",["setSelected"])),watch:{selected:function(){this.setSelected(this.$refs.klabTree.getNodeByKey(this.selected))}}},h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"no-padding"},[i("q-tree",{ref:"klabTree",attrs:{nodes:t.tree,"node-key":"label","default-expand-all":"",selected:t.selected},on:{"update:selected":function(e){t.selected=e}}})],1)},l=[];h._withStripped=!0;var p=i("XyMi"),u=!1;var c=function(t){u||i("mybr")},f=Object(p.a)(a,h,l,!1,c,null,null);f.options.__file="src\\components\\KlabTree.vue";var d=f.exports,y={name:"KLabLog",computed:n()({},Object(s.d)("stomp",["connectionState"]),Object(s.c)("stomp",["lastSendedMessage","lastReceivedMessage","queuedMessage"]),{iconName:function(){return this.connectionState===this.$constants.CONNECTION_WORKING?"sync":this.connectionState===this.$constants.CONNECTION_DOWN?"sync_disabled":"sync"},iconColor:function(){return this.connectionState===this.$constants.CONNECTION_WORKING?"warning":this.connectionState===this.$constants.CONNECTION_DOWN?"negative":"positive"},hasError:function(){return this.lastReceivedMessage&&this.lastReceivedMessage.type===this.$constants.TYPE_ERROR},receivedMessage:function(){return this.lastReceivedMessage?this.lastReceivedMessage.type===this.$constants.TYPE_ERROR?""===this.lastReceivedMessage.message.reason?this.$t("label.klabUnknownError"):this.lastReceivedMessage.message.reason:this.lastReceivedMessage.message.command+" - "+this.lastReceivedMessage.date:this.$t("label.klabNoMessage")},sendedMessage:function(){return this.queuedMessage?this.$t("label.klabMessagesToSend"):this.lastSendedMessage?this.lastSendedMessage.date+" ["+this.$helpers.formatExtent(this.lastSendedMessage.payload)+"]"||this.$t("label.klabNoDate"):this.$t("label.klabNoMessage")}})},g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row full-width"},[i("div",{staticClass:"col-1 no-padding stomp-status"},[i("q-icon",{attrs:{name:t.iconName,color:t.iconColor}})],1),t._v(" "),i("div",{staticClass:"col-6 message-log q-pt-xs stomp-message"},[i("q-icon",{attrs:{name:"call_received",color:t.hasError?"negative":"positive"}}),t._v(" "),i("span",{class:"text-"+(t.hasError?"negative":"positive")},[t._v(t._s(t.receivedMessage))])],1),t._v(" "),i("div",{staticClass:"col-5 message-log q-pt-xs stomp-message"},[i("q-icon",{attrs:{name:"call_made"}}),t._v(" "),i("span",[t._v(t._s(t.sendedMessage))])],1)])},v=[];g._withStripped=!0;var m=!1;var _=function(t){m||i("wtjU")},b=Object(p.a)(y,g,v,!1,_,null,null);b.options.__file="src\\components\\KlabLog.vue";var x=b.exports,E=i("/5sW"),S=i("GRLA"),T=i.n(S),w={ASSUME_TOUCH:!1,DEFAULT_MAX_ZOOM:42,DEFAULT_MIN_ZOOM:0,DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD:.5,DEFAULT_TILE_SIZE:256,DEFAULT_WMS_VERSION:"1.3.0",ENABLE_CANVAS:!0,ENABLE_PROJ4JS:!0,ENABLE_RASTER_REPROJECTION:!0,ENABLE_WEBGL:!0,DEBUG_WEBGL:!0,INITIAL_ATLAS_SIZE:256,MAX_ATLAS_SIZE:-1,MOUSEWHEELZOOM_MAXDELTA:1,OVERVIEWMAP_MAX_RATIO:.75,OVERVIEWMAP_MIN_RATIO:.1,RASTER_REPROJECTION_MAX_SOURCE_TILES:100,RASTER_REPROJECTION_MAX_SUBDIVISION:10,RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH:.25,SIMPLIFY_TOLERANCE:.5,WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK:1024,VERSION:"v4.6.5"};w.WEBGL_MAX_TEXTURE_SIZE,w.WEBGL_EXTENSIONS,w.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},w.nullFunction=function(){},w.getUid=function(t){return t.ol_uid||(t.ol_uid=++w.uidCounter_)},w.uidCounter_=0;var C=w,R=function(t){var e=C.VERSION?C.VERSION.split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+e+"/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"};C.inherits(R,Error);var P=R,I={assert:function(t,e){if(!t)throw new P(e)}},M=I,L={clamp:function(t,e,i){return Math.min(Math.max(t,e),i)}};L.cosh="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},L.roundUpToPowerOfTwo=function(t){return M.assert(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},L.squaredSegmentDistance=function(t,e,i,o,r,n){var s=r-i,a=n-o;if(0!==s||0!==a){var h=((t-i)*s+(e-o)*a)/(s*s+a*a);h>1?(i=r,o=n):h>0&&(i+=s*h,o+=a*h)}return L.squaredDistance(t,e,i,o)},L.squaredDistance=function(t,e,i,o){var r=i-t,n=o-e;return r*r+n*n},L.solveLinearSystem=function(t){for(var e=t.length,i=0;i<e;i++){for(var o=i,r=Math.abs(t[i][i]),n=i+1;n<e;n++){var s=Math.abs(t[n][i]);s>r&&(r=s,o=n)}if(0===r)return null;var a=t[o];t[o]=t[i],t[i]=a;for(var h=i+1;h<e;h++)for(var l=-t[h][i]/t[i][i],p=i;p<e+1;p++)i==p?t[h][p]=0:t[h][p]+=l*t[i][p]}for(var u=new Array(e),c=e-1;c>=0;c--){u[c]=t[c][e]/t[c][c];for(var f=c-1;f>=0;f--)t[f][e]-=t[f][c]*u[c]}return u},L.toDegrees=function(t){return 180*t/Math.PI},L.toRadians=function(t){return t*Math.PI/180},L.modulo=function(t,e){var i=t%e;return i*e<0?i+e:i},L.lerp=function(t,e,i){return t+i*(e-t)};var A=L,O={createOrUpdate:function(t,e,i,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=i,o):[t,e,i]},getKeyZXY:function(t,e,i){return t+"/"+e+"/"+i},getKey:function(t){return O.getKeyZXY(t[0],t[1],t[2])},fromKey:function(t){return t.split("/").map(Number)},hash:function(t){return(t[1]<<t[0])+t[2]},quadKey:function(t){var e,i,o=t[0],r=new Array(o),n=1<<o-1;for(e=0;e<o;++e)i=48,t[1]&n&&(i+=1),t[2]&n&&(i+=2),r[e]=String.fromCharCode(i),n>>=1;return r.join("")},withinExtentAndZ:function(t,e){var i=t[0],o=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var n,s=e.getExtent();return!(n=s?e.getTileRangeForExtentAndZ(s,i):e.getFullTileRange(i))||n.containsXY(o,r)}},F=O,N={createFromTemplate:function(t,e){var i=/\{z\}/g,o=/\{x\}/g,r=/\{y\}/g,n=/\{-y\}/g;return function(s,a,h){return s?t.replace(i,s[0].toString()).replace(o,s[1].toString()).replace(r,function(){return(-s[2]-1).toString()}).replace(n,function(){var t=s[0],i=e.getFullTileRange(t);return M.assert(i,55),(i.getHeight()+s[2]).toString()}):void 0}},createFromTemplates:function(t,e){for(var i=t.length,o=new Array(i),r=0;r<i;++r)o[r]=N.createFromTemplate(t[r],e);return N.createFromTileUrlFunctions(o)},createFromTileUrlFunctions:function(t){return 1===t.length?t[0]:function(e,i,o){if(e){var r=F.hash(e),n=A.modulo(r,t.length);return t[n](e,i,o)}}},nullTileUrlFunction:function(t,e,i){},expandUrl:function(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var o,r=i[1].charCodeAt(0),n=i[2].charCodeAt(0);for(o=r;o<=n;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}},D=N,j={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},k={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16},G={boundingExtent:function(t){for(var e=G.createEmpty(),i=0,o=t.length;i<o;++i)G.extendCoordinate(e,t[i]);return e},boundingExtentXYs_:function(t,e,i){var o=Math.min.apply(null,t),r=Math.min.apply(null,e),n=Math.max.apply(null,t),s=Math.max.apply(null,e);return G.createOrUpdate(o,r,n,s,i)},buffer:function(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]},clone:function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()},closestSquaredDistanceXY:function(t,e,i){var o,r;return(o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*o+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r},containsCoordinate:function(t,e){return G.containsXY(t,e[0],e[1])},containsExtent:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},containsXY:function(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]},coordinateRelationship:function(t,e){var i=t[0],o=t[1],r=t[2],n=t[3],s=e[0],a=e[1],h=k.UNKNOWN;return s<i?h|=k.LEFT:s>r&&(h|=k.RIGHT),a<o?h|=k.BELOW:a>n&&(h|=k.ABOVE),h===k.UNKNOWN&&(h=k.INTERSECTING),h},createEmpty:function(){return[1/0,1/0,-1/0,-1/0]},createOrUpdate:function(t,e,i,o,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=o,r):[t,e,i,o]},createOrUpdateEmpty:function(t){return G.createOrUpdate(1/0,1/0,-1/0,-1/0,t)},createOrUpdateFromCoordinate:function(t,e){var i=t[0],o=t[1];return G.createOrUpdate(i,o,i,o,e)},createOrUpdateFromCoordinates:function(t,e){var i=G.createOrUpdateEmpty(e);return G.extendCoordinates(i,t)},createOrUpdateFromFlatCoordinates:function(t,e,i,o,r){var n=G.createOrUpdateEmpty(r);return G.extendFlatCoordinates(n,t,e,i,o)},createOrUpdateFromRings:function(t,e){var i=G.createOrUpdateEmpty(e);return G.extendRings(i,t)},equals:function(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]},extend:function(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t},extendCoordinate:function(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])},extendCoordinates:function(t,e){var i,o;for(i=0,o=e.length;i<o;++i)G.extendCoordinate(t,e[i]);return t},extendFlatCoordinates:function(t,e,i,o,r){for(;i<o;i+=r)G.extendXY(t,e[i],e[i+1]);return t},extendRings:function(t,e){var i,o;for(i=0,o=e.length;i<o;++i)G.extendCoordinates(t,e[i]);return t},extendXY:function(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)},forEachCorner:function(t,e,i){var o;return(o=e.call(i,G.getBottomLeft(t)))?o:(o=e.call(i,G.getBottomRight(t)))?o:(o=e.call(i,G.getTopRight(t)))?o:(o=e.call(i,G.getTopLeft(t)))||!1},getArea:function(t){var e=0;return G.isEmpty(t)||(e=G.getWidth(t)*G.getHeight(t)),e},getBottomLeft:function(t){return[t[0],t[1]]},getBottomRight:function(t){return[t[2],t[1]]},getCenter:function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},getCorner:function(t,e){var i;return e===j.BOTTOM_LEFT?i=G.getBottomLeft(t):e===j.BOTTOM_RIGHT?i=G.getBottomRight(t):e===j.TOP_LEFT?i=G.getTopLeft(t):e===j.TOP_RIGHT?i=G.getTopRight(t):M.assert(!1,13),i},getEnlargedArea:function(t,e){var i=Math.min(t[0],e[0]),o=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-i)*(Math.max(t[3],e[3])-o)},getForViewAndSize:function(t,e,i,o,r){var n=e*o[0]/2,s=e*o[1]/2,a=Math.cos(i),h=Math.sin(i),l=n*a,p=n*h,u=s*a,c=s*h,f=t[0],d=t[1],y=f-l+c,g=f-l-c,v=f+l-c,m=f+l+c,_=d-p-u,b=d-p+u,x=d+p+u,E=d+p-u;return G.createOrUpdate(Math.min(y,g,v,m),Math.min(_,b,x,E),Math.max(y,g,v,m),Math.max(_,b,x,E),r)},getHeight:function(t){return t[3]-t[1]},getIntersectionArea:function(t,e){var i=G.getIntersection(t,e);return G.getArea(i)},getIntersection:function(t,e,i){var o=i||G.createEmpty();return G.intersects(t,e)&&(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]),o},getMargin:function(t){return G.getWidth(t)+G.getHeight(t)},getSize:function(t){return[t[2]-t[0],t[3]-t[1]]},getTopLeft:function(t){return[t[0],t[3]]},getTopRight:function(t){return[t[2],t[3]]},getWidth:function(t){return t[2]-t[0]},intersects:function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]},isEmpty:function(t){return t[2]<t[0]||t[3]<t[1]},returnOrUpdate:function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t},scaleFromCenter:function(t,e){var i=(t[2]-t[0])/2*(e-1),o=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=o,t[3]+=o},intersectsSegment:function(t,e,i){var o=!1,r=G.coordinateRelationship(t,e),n=G.coordinateRelationship(t,i);if(r===k.INTERSECTING||n===k.INTERSECTING)o=!0;else{var s,a,h=t[0],l=t[1],p=t[2],u=t[3],c=e[0],f=e[1],d=i[0],y=i[1],g=(y-f)/(d-c);n&k.ABOVE&&!(r&k.ABOVE)&&(o=(s=d-(y-u)/g)>=h&&s<=p),o||!(n&k.RIGHT)||r&k.RIGHT||(o=(a=y-(d-p)*g)>=l&&a<=u),o||!(n&k.BELOW)||r&k.BELOW||(o=(s=d-(y-l)/g)>=h&&s<=p),o||!(n&k.LEFT)||r&k.LEFT||(o=(a=y-(d-h)*g)>=l&&a<=u)}return o},applyTransform:function(t,e,i){var o=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];e(o,o,2);var r=[o[0],o[2],o[4],o[6]],n=[o[1],o[3],o[5],o[7]];return G.boundingExtentXYs_(r,n,i)}},U=G,B={jsonp:function(t,e,i,o){var r=document.createElement("script"),n="olc_"+C.getUid(e);function s(){delete window[n],r.parentNode.removeChild(r)}r.async=!0,r.src=t+(-1==t.indexOf("?")?"?":"&")+(o||"callback")+"="+n;var a=setTimeout(function(){s(),i&&i()},1e4);window[n]=function(t){clearTimeout(a),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(r)}},V=B,W={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},X=function(t){this.radius=t};X.prototype.geodesicArea=function(t){return X.getArea_(t,this.radius)},X.prototype.haversineDistance=function(t,e){return X.getDistance_(t,e,this.radius)},X.prototype.offset=function(t,e,i){var o=A.toRadians(t[1]),r=A.toRadians(t[0]),n=e/this.radius,s=Math.asin(Math.sin(o)*Math.cos(n)+Math.cos(o)*Math.sin(n)*Math.cos(i)),a=r+Math.atan2(Math.sin(i)*Math.sin(n)*Math.cos(o),Math.cos(n)-Math.sin(o)*Math.sin(s));return[A.toDegrees(a),A.toDegrees(s)]},X.DEFAULT_RADIUS=6371008.8,X.getLength=function(t,e){var i,o,r,n,s,a,h=e||{},l=h.radius||X.DEFAULT_RADIUS,p=h.projection||"EPSG:3857",u=(t=t.clone().transform(p,"EPSG:4326")).getType(),c=0;switch(u){case W.POINT:case W.MULTI_POINT:break;case W.LINE_STRING:case W.LINEAR_RING:i=t.getCoordinates(),c=X.getLength_(i,l);break;case W.MULTI_LINE_STRING:case W.POLYGON:for(r=0,n=(i=t.getCoordinates()).length;r<n;++r)c+=X.getLength_(i[r],l);break;case W.MULTI_POLYGON:for(r=0,n=(i=t.getCoordinates()).length;r<n;++r)for(s=0,a=(o=i[r]).length;s<a;++s)c+=X.getLength_(o[s],l);break;case W.GEOMETRY_COLLECTION:var f=t.getGeometries();for(r=0,n=f.length;r<n;++r)c+=X.getLength(f[r],e);break;default:throw new Error("Unsupported geometry type: "+u)}return c},X.getLength_=function(t,e){for(var i=0,o=0,r=t.length;o<r-1;++o)i+=X.getDistance_(t[o],t[o+1],e);return i},X.getDistance_=function(t,e,i){var o=A.toRadians(t[1]),r=A.toRadians(e[1]),n=(r-o)/2,s=A.toRadians(e[0]-t[0])/2,a=Math.sin(n)*Math.sin(n)+Math.sin(s)*Math.sin(s)*Math.cos(o)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},X.getArea=function(t,e){var i,o,r,n,s,a,h=e||{},l=h.radius||X.DEFAULT_RADIUS,p=h.projection||"EPSG:3857",u=(t=t.clone().transform(p,"EPSG:4326")).getType(),c=0;switch(u){case W.POINT:case W.MULTI_POINT:case W.LINE_STRING:case W.MULTI_LINE_STRING:case W.LINEAR_RING:break;case W.POLYGON:for(i=t.getCoordinates(),c=Math.abs(X.getArea_(i[0],l)),r=1,n=i.length;r<n;++r)c-=Math.abs(X.getArea_(i[r],l));break;case W.MULTI_POLYGON:for(r=0,n=(i=t.getCoordinates()).length;r<n;++r)for(o=i[r],c+=Math.abs(X.getArea_(o[0],l)),s=1,a=o.length;s<a;++s)c-=Math.abs(X.getArea_(o[s],l));break;case W.GEOMETRY_COLLECTION:var f=t.getGeometries();for(r=0,n=f.length;r<n;++r)c+=X.getArea(f[r],e);break;default:throw new Error("Unsupported geometry type: "+u)}return c},X.getArea_=function(t,e){for(var i=0,o=t.length,r=t[o-1][0],n=t[o-1][1],s=0;s<o;s++){var a=t[s][0],h=t[s][1];i+=A.toRadians(a-r)*(2+Math.sin(A.toRadians(n))+Math.sin(A.toRadians(h))),r=a,n=h}return i*e*e/2};var Y=X,z={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft",METERS_PER_UNIT:{}};z.METERS_PER_UNIT[z.DEGREES]=2*Math.PI*6370997/360,z.METERS_PER_UNIT[z.FEET]=.3048,z.METERS_PER_UNIT[z.METERS]=1,z.METERS_PER_UNIT[z.USFEET]=1200/3937;var K=z,H={cache_:null,set:function(t){H.cache_=t},get:function(){return H.cache_||window.proj4}},$=H,q=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit;var e=t.code;if(C.ENABLE_PROJ4JS){var i=$.get();if("function"==typeof i){var o=i.defs(e);void 0!==o&&(void 0!==o.axis&&void 0===t.axisOrientation&&(this.axisOrientation_=o.axis),void 0===t.metersPerUnit&&(this.metersPerUnit_=o.to_meter),void 0===t.units&&(this.units_=o.units))}}};q.prototype.canWrapX=function(){return this.canWrapX_},q.prototype.getCode=function(){return this.code_},q.prototype.getExtent=function(){return this.extent_},q.prototype.getUnits=function(){return this.units_},q.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||K.METERS_PER_UNIT[this.units_]},q.prototype.getWorldExtent=function(){return this.worldExtent_},q.prototype.getAxisOrientation=function(){return this.axisOrientation_},q.prototype.isGlobal=function(){return this.global_},q.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},q.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},q.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},q.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},q.prototype.setWorldExtent=function(t){this.worldExtent_=t},q.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},q.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var Z=q,J={Projection_:function(t){Z.call(this,{code:t,units:K.METERS,extent:J.EXTENT,global:!0,worldExtent:J.WORLD_EXTENT,getPointResolution:function(t,e){return t/A.cosh(e[1]/J.RADIUS)}})}};C.inherits(J.Projection_,Z),J.RADIUS=6378137,J.HALF_SIZE=Math.PI*J.RADIUS,J.EXTENT=[-J.HALF_SIZE,-J.HALF_SIZE,J.HALF_SIZE,J.HALF_SIZE],J.WORLD_EXTENT=[-180,-85,180,85],J.PROJECTIONS=[new J.Projection_("EPSG:3857"),new J.Projection_("EPSG:102100"),new J.Projection_("EPSG:102113"),new J.Projection_("EPSG:900913"),new J.Projection_("urn:ogc:def:crs:EPSG:6.18:3:3857"),new J.Projection_("urn:ogc:def:crs:EPSG::3857"),new J.Projection_("http://www.opengis.net/gml/srs/epsg.xml#3857")],J.fromEPSG4326=function(t,e,i){var o=t.length,r=i>1?i:2,n=e;void 0===n&&(n=r>2?t.slice():new Array(o));for(var s=J.HALF_SIZE,a=0;a<o;a+=r){n[a]=s*t[a]/180;var h=J.RADIUS*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));h>s?h=s:h<-s&&(h=-s),n[a+1]=h}return n},J.toEPSG4326=function(t,e,i){var o=t.length,r=i>1?i:2,n=e;void 0===n&&(n=r>2?t.slice():new Array(o));for(var s=0;s<o;s+=r)n[s]=180*t[s]/J.HALF_SIZE,n[s+1]=360*Math.atan(Math.exp(t[s+1]/J.RADIUS))/Math.PI-90;return n};var Q=J,tt={Projection_:function(t,e){Z.call(this,{code:t,units:K.DEGREES,extent:tt.EXTENT,axisOrientation:e,global:!0,metersPerUnit:tt.METERS_PER_UNIT,worldExtent:tt.EXTENT})}};C.inherits(tt.Projection_,Z),tt.RADIUS=6378137,tt.EXTENT=[-180,-90,180,90],tt.METERS_PER_UNIT=Math.PI*tt.RADIUS/180,tt.PROJECTIONS=[new tt.Projection_("CRS:84"),new tt.Projection_("EPSG:4326","neu"),new tt.Projection_("urn:ogc:def:crs:EPSG::4326","neu"),new tt.Projection_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new tt.Projection_("urn:ogc:def:crs:OGC:1.3:CRS84"),new tt.Projection_("urn:ogc:def:crs:OGC:2:84"),new tt.Projection_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new tt.Projection_("urn:x-ogc:def:crs:EPSG:4326","neu")];var et=tt,it={cache_:{},clear:function(){it.cache_={}},get:function(t){return it.cache_[t]||null},add:function(t,e){it.cache_[t]=e}},ot=it,rt={};rt.assign="function"==typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),o=1,r=arguments.length;o<r;++o){var n=arguments[o];if(void 0!==n&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])}return i},rt.clear=function(t){for(var e in t)delete t[e]},rt.getValues=function(t){var e=[];for(var i in t)e.push(t[i]);return e},rt.isEmpty=function(t){var e;for(e in t)return!1;return!e};var nt=rt,st={cache_:{},clear:function(){st.cache_={}},add:function(t,e,i){var o=t.getCode(),r=e.getCode(),n=st.cache_;o in n||(n[o]={}),n[o][r]=i},remove:function(t,e){var i=t.getCode(),o=e.getCode(),r=st.cache_,n=r[i][o];return delete r[i][o],nt.isEmpty(r[i])&&delete r[i],n},get:function(t,e){var i,o=st.cache_;return t in o&&e in o[t]&&(i=o[t][e]),i}},at=st,ht={};ht.METERS_PER_UNIT=K.METERS_PER_UNIT,ht.SPHERE_=new Y(Y.DEFAULT_RADIUS),C.ENABLE_PROJ4JS&&(ht.setProj4=function(t){$.set(t)}),ht.getPointResolution=function(t,e,i,o){var r,n=(t=ht.get(t)).getPointResolutionFunc();if(n)r=n(e,i);else if(t.getUnits()==K.DEGREES&&!o||o==K.DEGREES)r=e;else{var s=ht.getTransformFromProjections(t,ht.get("EPSG:4326")),a=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];a=s(a,a,2),r=(ht.SPHERE_.haversineDistance(a.slice(0,2),a.slice(2,4))+ht.SPHERE_.haversineDistance(a.slice(4,6),a.slice(6,8)))/2;var h=o?K.METERS_PER_UNIT[o]:t.getMetersPerUnit();void 0!==h&&(r/=h)}return r},ht.addEquivalentProjections=function(t){ht.addProjections(t),t.forEach(function(e){t.forEach(function(t){e!==t&&at.add(e,t,ht.cloneTransform)})})},ht.addEquivalentTransforms=function(t,e,i,o){t.forEach(function(t){e.forEach(function(e){at.add(t,e,i),at.add(e,t,o)})})},ht.addProjection=function(t){ot.add(t.getCode(),t),at.add(t,t,ht.cloneTransform)},ht.addProjections=function(t){t.forEach(ht.addProjection)},ht.clearAllProjections=function(){ot.clear(),at.clear()},ht.createProjection=function(t,e){return t?"string"==typeof t?ht.get(t):t:ht.get(e)},ht.addCoordinateTransforms=function(t,e,i,o){var r=ht.get(t),n=ht.get(e);at.add(r,n,ht.createTransformFromCoordinateTransform(i)),at.add(n,r,ht.createTransformFromCoordinateTransform(o))},ht.createTransformFromCoordinateTransform=function(t){return function(e,i,o){var r,n,s,a=e.length,h=void 0!==o?o:2,l=void 0!==i?i:new Array(a);for(n=0;n<a;n+=h)for(r=t([e[n],e[n+1]]),l[n]=r[0],l[n+1]=r[1],s=h-1;s>=2;--s)l[n+s]=e[n+s];return l}},ht.fromLonLat=function(t,e){return ht.transform(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},ht.toLonLat=function(t,e){var i=ht.transform(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),o=i[0];return(o<-180||o>180)&&(i[0]=A.modulo(o+180,360)-180),i},ht.get=function(t){var e=null;if(t instanceof Z)e=t;else if("string"==typeof t){var i=t;if(e=ot.get(i),C.ENABLE_PROJ4JS&&!e){var o=$.get();"function"==typeof o&&void 0!==o.defs(i)&&(e=new Z({code:i}),ht.addProjection(e))}}return e},ht.equivalent=function(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:ht.getTransformFromProjections(t,e)===ht.cloneTransform&&i},ht.getTransform=function(t,e){var i=ht.get(t),o=ht.get(e);return ht.getTransformFromProjections(i,o)},ht.getTransformFromProjections=function(t,e){var i=t.getCode(),o=e.getCode(),r=at.get(i,o);if(C.ENABLE_PROJ4JS&&!r){var n=$.get();if("function"==typeof n){var s=n.defs(i),a=n.defs(o);if(void 0!==s&&void 0!==a){if(s===a)ht.addEquivalentProjections([e,t]);else{var h=n(o,i);ht.addCoordinateTransforms(e,t,h.forward,h.inverse)}r=at.get(i,o)}}}return r||(r=ht.identityTransform),r},ht.identityTransform=function(t,e,i){if(void 0!==e&&t!==e){for(var o=0,r=t.length;o<r;++o)e[o]=t[o];t=e}return t},ht.cloneTransform=function(t,e,i){var o;if(void 0!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];o=e}else o=t.slice();return o},ht.transform=function(t,e,i){return ht.getTransform(e,i)(t,void 0,t.length)},ht.transformExtent=function(t,e,i){var o=ht.getTransform(e,i);return U.applyTransform(t,o)},ht.transformWithProjections=function(t,e,i){return ht.getTransformFromProjections(e,i)(t)},ht.addCommon=function(){ht.addEquivalentProjections(Q.PROJECTIONS),ht.addEquivalentProjections(et.PROJECTIONS),ht.addEquivalentTransforms(et.PROJECTIONS,Q.PROJECTIONS,Q.fromEPSG4326,Q.toEPSG4326)},ht.addCommon();var lt=ht,pt={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},ut={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5},ct={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return 1-ct.easeIn(1-t)},inAndOut:function(t){return 3*t*t-2*t*t*t},linear:function(t){return t},upAndDown:function(t){return t<.5?ct.inAndOut(2*t):1-ct.inAndOut(2*(t-.5))}},ft=ct,dt=function(){};dt.prototype.disposed_=!1,dt.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},dt.prototype.disposeInternal=C.nullFunction;var yt=dt,gt={bindListener_:function(t){var e=function(e){var i=t.listener,o=t.bindTo||t.target;return t.callOnce&&gt.unlistenByKey(t),i.call(o,e)};return t.boundListener=e,e},findListener_:function(t,e,i,o){for(var r,n=0,s=t.length;n<s;++n)if((r=t[n]).listener===e&&r.bindTo===i)return o&&(r.deleteIndex=n),r},getListeners:function(t,e){var i=t.ol_lm;return i?i[e]:void 0},getListenerMap_:function(t){var e=t.ol_lm;return e||(e=t.ol_lm={}),e},removeListeners_:function(t,e){var i=gt.getListeners(t,e);if(i){for(var o=0,r=i.length;o<r;++o)t.removeEventListener(e,i[o].boundListener),nt.clear(i[o]);i.length=0;var n=t.ol_lm;n&&(delete n[e],0===Object.keys(n).length&&delete t.ol_lm)}},listen:function(t,e,i,o,r){var n=gt.getListenerMap_(t),s=n[e];s||(s=n[e]=[]);var a=gt.findListener_(s,i,o,!1);return a?r||(a.callOnce=!1):(a={bindTo:o,callOnce:!!r,listener:i,target:t,type:e},t.addEventListener(e,gt.bindListener_(a)),s.push(a)),a},listenOnce:function(t,e,i,o){return gt.listen(t,e,i,o,!0)},unlisten:function(t,e,i,o){var r=gt.getListeners(t,e);if(r){var n=gt.findListener_(r,i,o,!0);n&&gt.unlistenByKey(n)}},unlistenByKey:function(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=gt.getListeners(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&gt.removeListeners_(t.target,t.type)}nt.clear(t)}},unlistenAll:function(t){var e=gt.getListenerMap_(t);for(var i in e)gt.removeListeners_(t,i)}},vt=gt,mt=function(t){this.propagationStopped,this.type=t,this.target=null};mt.prototype.preventDefault=mt.prototype.stopPropagation=function(){this.propagationStopped=!0},mt.stopPropagation=function(t){t.stopPropagation()},mt.preventDefault=function(t){t.preventDefault()};var _t=mt,bt=function(){yt.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}};C.inherits(bt,yt),bt.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},bt.prototype.dispatchEvent=function(t){var e="string"==typeof t?new _t(t):t,i=e.type;e.target=this;var o,r=this.listeners_[i];if(r){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var n=0,s=r.length;n<s;++n)if(!1===r[n].call(this,e)||e.propagationStopped){o=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var a=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];a--;)this.removeEventListener(i,C.nullFunction);delete this.dispatching_[i]}return o}},bt.prototype.disposeInternal=function(){vt.unlistenAll(this)},bt.prototype.getListeners=function(t){return this.listeners_[t]},bt.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},bt.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var o=i.indexOf(e);t in this.pendingRemovals_?(i[o]=C.nullFunction,++this.pendingRemovals_[t]):(i.splice(o,1),0===i.length&&delete this.listeners_[t])}};var xt=bt,Et={CHANGE:"change",CLEAR:"clear",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"},St=function(t,e,i){xt.call(this);var o=i||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===o.transition?250:o.transition,this.transitionStarts_={}};C.inherits(St,xt),St.prototype.changed=function(){this.dispatchEvent(Et.CHANGE)},St.prototype.getKey=function(){return this.key+"/"+this.tileCoord},St.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==ut.LOADED)return t;t=t.interimTile}while(t);return this},St.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==ut.LOADED){t.interimTile=null;break}t.getState()==ut.LOADING?e=t:t.getState()==ut.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},St.prototype.getTileCoord=function(){return this.tileCoord},St.prototype.getState=function(){return this.state},St.prototype.setState=function(t){this.state=t,this.changed()},St.prototype.load=function(){},St.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var o=e-i+1e3/60;return o>=this.transition_?1:ft.easeIn(o/this.transition_)},St.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},St.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)};var Tt=St,wt={createCanvasContext2D:function(t,e){var i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")},outerWidth:function(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)},outerHeight:function(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)},replaceNode:function(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)},removeNode:function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},removeChildren:function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}},Ct=wt,Rt=function(t,e,i,o,r,n){Tt.call(this,t,e,n),this.crossOrigin_=o,this.src_=i,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.tileLoadFunction_=r};C.inherits(Rt,Tt),Rt.prototype.disposeInternal=function(){this.state==ut.LOADING&&(this.unlistenImage_(),this.image_=Rt.getBlankImage()),this.interimTile&&this.interimTile.dispose(),this.state=ut.ABORT,this.changed(),Tt.prototype.disposeInternal.call(this)},Rt.prototype.getImage=function(){return this.image_},Rt.prototype.getKey=function(){return this.src_},Rt.prototype.handleImageError_=function(){this.state=ut.ERROR,this.unlistenImage_(),this.image_=Rt.getBlankImage(),this.changed()},Rt.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=ut.LOADED:this.state=ut.EMPTY,this.unlistenImage_(),this.changed()},Rt.prototype.load=function(){this.state==ut.ERROR&&(this.state=ut.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ut.IDLE&&(this.state=ut.LOADING,this.changed(),this.imageListenerKeys_=[vt.listenOnce(this.image_,Et.ERROR,this.handleImageError_,this),vt.listenOnce(this.image_,Et.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},Rt.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(vt.unlistenByKey),this.imageListenerKeys_=null},Rt.getBlankImage=function(){var t=Ct.createCanvasContext2D(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas};var Pt=Rt,It=function(t){xt.call(this),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null};C.inherits(It,xt),It.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},It.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(Et.CLEAR)},It.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},It.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},It.prototype.get=function(t){var e=this.entries_[t];return M.assert(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},It.prototype.remove=function(t){var e=this.entries_[t];return M.assert(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},It.prototype.getCount=function(){return this.count_},It.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},It.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},It.prototype.peekLast=function(){return this.oldest_.value_},It.prototype.peekLastKey=function(){return this.oldest_.key_},It.prototype.peekFirstKey=function(){return this.newest_.key_},It.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},It.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},It.prototype.set=function(t,e){M.assert(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},It.prototype.prune=function(){for(;this.canExpireCache();)this.pop()};var Mt=It,Lt=function(t){Mt.call(this,t)};C.inherits(Lt,Mt),Lt.prototype.expireCache=function(t){for(var e,i;this.canExpireCache()&&!((i=(e=this.peekLast()).tileCoord[0].toString())in t&&t[i].contains(e.tileCoord));)this.pop().dispose()},Lt.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=F.fromKey(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(F.getKey(t.tileCoord)),t.dispose())},this)}};var At=Lt,Ot={calculateSourceResolution:function(t,e,i,o){var r=lt.transform(i,e,t),n=lt.getPointResolution(e,o,i),s=e.getMetersPerUnit();void 0!==s&&(n*=s);var a=t.getMetersPerUnit();void 0!==a&&(n/=a);var h=t.getExtent();if(!h||U.containsCoordinate(h,r)){var l=lt.getPointResolution(t,n,r)/n;isFinite(l)&&l>0&&(n/=l)}return n},enlargeClipPoint_:function(t,e,i,o){var r=i-t,n=o-e,s=Math.sqrt(r*r+n*n);return[Math.round(i+r/s),Math.round(o+n/s)]},render:function(t,e,i,o,r,n,s,a,h,l,p){var u=Ct.createCanvasContext2D(Math.round(i*t),Math.round(i*e));if(0===h.length)return u.canvas;u.scale(i,i);var c=U.createEmpty();h.forEach(function(t,e,i){U.extend(c,t.extent)});var f=U.getWidth(c),d=U.getHeight(c),y=Ct.createCanvasContext2D(Math.round(i*f/o),Math.round(i*d/o)),g=i/o;h.forEach(function(t,e,i){var o=t.extent[0]-c[0],r=-(t.extent[3]-c[3]),n=U.getWidth(t.extent),s=U.getHeight(t.extent);y.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,o*g,r*g,n*g,s*g)});var v=U.getTopLeft(s);return a.getTriangles().forEach(function(t,e,r){var s=t.source,a=t.target,h=s[0][0],l=s[0][1],p=s[1][0],f=s[1][1],d=s[2][0],g=s[2][1],m=(a[0][0]-v[0])/n,_=-(a[0][1]-v[1])/n,b=(a[1][0]-v[0])/n,x=-(a[1][1]-v[1])/n,E=(a[2][0]-v[0])/n,S=-(a[2][1]-v[1])/n,T=h,w=l;h=0,l=0;var C=[[p-=T,f-=w,0,0,b-m],[d-=T,g-=w,0,0,E-m],[0,0,p,f,x-_],[0,0,d,g,S-_]],R=A.solveLinearSystem(C);if(R){u.save(),u.beginPath();var P=(m+b+E)/3,I=(_+x+S)/3,M=Ot.enlargeClipPoint_(P,I,m,_),L=Ot.enlargeClipPoint_(P,I,b,x),O=Ot.enlargeClipPoint_(P,I,E,S);u.moveTo(L[0],L[1]),u.lineTo(M[0],M[1]),u.lineTo(O[0],O[1]),u.clip(),u.transform(R[0],R[2],R[1],R[3],m,_),u.translate(c[0]-T,c[3]-w),u.scale(o/i,-o/i),u.drawImage(y.canvas,0,0),u.restore()}}),p&&(u.save(),u.strokeStyle="black",u.lineWidth=1,a.getTriangles().forEach(function(t,e,i){var o=t.target,r=(o[0][0]-v[0])/n,s=-(o[0][1]-v[1])/n,a=(o[1][0]-v[0])/n,h=-(o[1][1]-v[1])/n,l=(o[2][0]-v[0])/n,p=-(o[2][1]-v[1])/n;u.beginPath(),u.moveTo(a,h),u.lineTo(r,s),u.lineTo(l,p),u.closePath(),u.stroke()}),u.restore()),u.canvas}},Ft=Ot,Nt=function(t,e,i,o,r){this.sourceProj_=t,this.targetProj_=e;var n={},s=lt.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return n[e]||(n[e]=s(t)),n[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&U.getWidth(o)==U.getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?U.getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?U.getWidth(this.targetProj_.getExtent()):null;var a=U.getTopLeft(i),h=U.getTopRight(i),l=U.getBottomRight(i),p=U.getBottomLeft(i),u=this.transformInv_(a),c=this.transformInv_(h),f=this.transformInv_(l),d=this.transformInv_(p);if(this.addQuad_(a,h,l,p,u,c,f,d,C.RASTER_REPROJECTION_MAX_SUBDIVISION),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach(function(t,e,i){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-y>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-y>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-y>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}},this)}n={}};Nt.prototype.addTriangle_=function(t,e,i,o,r,n){this.triangles_.push({source:[o,r,n],target:[t,e,i]})},Nt.prototype.addQuad_=function(t,e,i,o,r,n,s,a,h){var l=U.boundingExtent([r,n,s,a]),p=this.sourceWorldWidth_?U.getWidth(l)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,c=this.sourceProj_.canWrapX()&&p>.5&&p<1,f=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var d=U.boundingExtent([t,e,i,o]);f|=U.getWidth(d)/this.targetWorldWidth_>C.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}!c&&this.sourceProj_.isGlobal()&&p&&(f|=p>C.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH)}if(f||!this.maxSourceExtent_||U.intersects(l,this.maxSourceExtent_)){if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(h>0))return;f=!0}if(h>0){if(!f){var y,g=[(t[0]+i[0])/2,(t[1]+i[1])/2],v=this.transformInv_(g);if(c)y=(A.modulo(r[0],u)+A.modulo(s[0],u))/2-A.modulo(v[0],u);else y=(r[0]+s[0])/2-v[0];var m=(r[1]+s[1])/2-v[1];f=y*y+m*m>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var _=[(e[0]+i[0])/2,(e[1]+i[1])/2],b=this.transformInv_(_),x=[(o[0]+t[0])/2,(o[1]+t[1])/2],E=this.transformInv_(x);this.addQuad_(t,e,_,x,r,n,b,E,h-1),this.addQuad_(x,_,i,o,E,b,s,a,h-1)}else{var S=[(t[0]+e[0])/2,(t[1]+e[1])/2],T=this.transformInv_(S),w=[(i[0]+o[0])/2,(i[1]+o[1])/2],R=this.transformInv_(w);this.addQuad_(t,S,w,o,r,T,R,a,h-1),this.addQuad_(S,e,i,w,T,n,s,R,h-1)}return}}if(c){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,o,r,s,a),this.addTriangle_(t,e,i,r,n,s)}},Nt.prototype.calculateSourceExtent=function(){var t=U.createEmpty();return this.triangles_.forEach(function(e,i,o){var r=e.source;U.extendCoordinate(t,r[0]),U.extendCoordinate(t,r[1]),U.extendCoordinate(t,r[2])}),t},Nt.prototype.getTriangles=function(){return this.triangles_};var Dt=Nt,jt=function(t,e,i,o,r,n,s,a,h,l,p){Tt.call(this,r,ut.IDLE),this.renderEdges_=void 0!==p&&p,this.pixelRatio_=s,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=o,this.wrappedTileCoord_=n||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var u=o.getTileCoordExtent(this.wrappedTileCoord_),c=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),d=c?U.getIntersection(u,c):u;if(0!==U.getArea(d)){var y=t.getExtent();y&&(f=f?U.getIntersection(f,y):y);var g=o.getResolution(this.wrappedTileCoord_[0]),v=U.getCenter(d),m=Ft.calculateSourceResolution(t,i,v,g);if(!isFinite(m)||m<=0)this.state=ut.EMPTY;else{var _=void 0!==l?l:C.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;if(this.triangulation_=new Dt(t,i,d,f,m*_),0!==this.triangulation_.getTriangles().length){this.sourceZ_=e.getZForResolution(m);var b=this.triangulation_.calculateSourceExtent();if(f&&(t.canWrapX()?(b[1]=A.clamp(b[1],f[1],f[3]),b[3]=A.clamp(b[3],f[1],f[3])):b=U.getIntersection(b,f)),U.getArea(b)){for(var x=e.getTileRangeForExtentAndZ(b,this.sourceZ_),E=x.minX;E<=x.maxX;E++)for(var S=x.minY;S<=x.maxY;S++){var T=h(this.sourceZ_,E,S,s);T&&this.sourceTiles_.push(T)}0===this.sourceTiles_.length&&(this.state=ut.EMPTY)}else this.state=ut.EMPTY}else this.state=ut.EMPTY}}else this.state=ut.EMPTY};C.inherits(jt,Tt),jt.prototype.disposeInternal=function(){this.state==ut.LOADING&&this.unlistenSources_(),Tt.prototype.disposeInternal.call(this)},jt.prototype.getImage=function(){return this.canvas_},jt.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,o){e&&e.getState()==ut.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})},this),this.sourceTiles_.length=0,0===t.length)this.state=ut.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),o="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],n=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Ft.render(o,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),n,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=ut.LOADED}this.changed()},jt.prototype.load=function(){if(this.state==ut.IDLE){this.state=ut.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,o){var r,n=e.getState();n!=ut.IDLE&&n!=ut.LOADING||(t++,r=vt.listen(e,Et.CHANGE,function(i){var o=e.getState();o!=ut.LOADED&&o!=ut.ERROR&&o!=ut.EMPTY||(vt.unlistenByKey(r),0===--t&&(this.unlistenSources_(),this.reproject_()))},this),this.sourcesListenerKeys_.push(r))},this),this.sourceTiles_.forEach(function(t,e,i){t.getState()==ut.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},jt.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(vt.unlistenByKey),this.sourcesListenerKeys_=null};var kt=jt,Gt={buffer:function(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i},hasArea:function(t){return t[0]>0&&t[1]>0},scale:function(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i},toSize:function(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}},Ut=Gt,Bt=function(t,e,i,o){this.minX=t,this.maxX=e,this.minY=i,this.maxY=o};Bt.createOrUpdate=function(t,e,i,o,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=i,r.maxY=o,r):new Bt(t,e,i,o)},Bt.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Bt.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Bt.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Bt.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Bt.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Bt.prototype.getHeight=function(){return this.maxY-this.minY+1},Bt.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Bt.prototype.getWidth=function(){return this.maxX-this.minX+1},Bt.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var Vt=Bt,Wt={binarySearch:function(t,e,i){for(var o,r,n=i||Wt.numberSafeCompareFunction,s=0,a=t.length,h=!1;s<a;)(r=+n(t[o=s+(a-s>>1)],e))<0?s=o+1:(a=o,h=!r);return h?s:~s},numberSafeCompareFunction:function(t,e){return t>e?1:t<e?-1:0},includes:function(t,e){return t.indexOf(e)>=0},linearFindNearest:function(t,e,i){var o,r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;if(i>0){for(o=1;o<r;++o)if(t[o]<e)return o-1}else if(i<0){for(o=1;o<r;++o)if(t[o]<=e)return o}else for(o=1;o<r;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return r-1},reverseSubArray:function(t,e,i){for(;e<i;){var o=t[e];t[e]=t[i],t[i]=o,++e,--i}},extend:function(t,e){var i,o=Array.isArray(e)?e:[e],r=o.length;for(i=0;i<r;i++)t[t.length]=o[i]},remove:function(t,e){var i=t.indexOf(e),o=i>-1;return o&&t.splice(i,1),o},find:function(t,e){for(var i,o=t.length>>>0,r=0;r<o;r++)if(e(i=t[r],r,t))return i;return null},equals:function(t,e){var i=t.length;if(i!==e.length)return!1;for(var o=0;o<i;o++)if(t[o]!==e[o])return!1;return!0},stableSort:function(t,e){var i,o=t.length,r=Array(t.length);for(i=0;i<o;i++)r[i]={index:i,value:t[i]};for(r.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=r[i].value},findIndex:function(t,e){var i;return!t.every(function(o,r){return i=r,!e(o,r,t)})?i:-1},isSorted:function(t,e,i){var o=e||Wt.numberSafeCompareFunction;return t.every(function(e,r){if(0===r)return!0;var n=o(t[r-1],e);return!(n>0||i&&0===n)})}},Xt=Wt,Yt=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,M.assert(Xt.isSorted(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var i=0,o=this.resolutions_.length-1;i<o;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,M.assert(this.origins_.length==this.resolutions_.length,20));var r=t.extent;void 0===r||this.origin_||this.origins_||(this.origin_=U.getTopLeft(r)),M.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,M.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:C.DEFAULT_TILE_SIZE,M.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==r?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Vt(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):r&&this.calculateTileRanges_(r)};Yt.tmpTileCoord_=[0,0,0],Yt.prototype.forEachTileCoord=function(t,e,i){for(var o=this.getTileRangeForExtentAndZ(t,e),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,a=o.maxY;s<=a;++s)i([e,r,s])},Yt.prototype.forEachTileCoordParentTileRange=function(t,e,i,o,r){var n,s,a,h=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):h=this.getTileCoordExtent(t,r);l>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),a=Math.floor(a/2),n=Vt.createOrUpdate(s,s,a,a,o)):n=this.getTileRangeForExtentAndZ(h,l,o),e.call(i,l,n))return!0;--l}return!1},Yt.prototype.getExtent=function(){return this.extent_},Yt.prototype.getMaxZoom=function(){return this.maxZoom},Yt.prototype.getMinZoom=function(){return this.minZoom},Yt.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},Yt.prototype.getResolution=function(t){return this.resolutions_[t]},Yt.prototype.getResolutions=function(){return this.resolutions_},Yt.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],r=2*t[2];return Vt.createOrUpdate(o,o+1,r,r+1,e)}var n=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null},Yt.prototype.getTileRangeExtent=function(t,e,i){var o=this.getOrigin(t),r=this.getResolution(t),n=Ut.toSize(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*n[0]*r,a=o[0]+(e.maxX+1)*n[0]*r,h=o[1]+e.minY*n[1]*r,l=o[1]+(e.maxY+1)*n[1]*r;return U.createOrUpdate(s,h,a,l,i)},Yt.prototype.getTileRangeForExtentAndZ=function(t,e,i){var o=Yt.tmpTileCoord_;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,o);var r=o[1],n=o[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,o),Vt.createOrUpdate(r,o[1],n,o[2],i)},Yt.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),o=Ut.toSize(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*i,e[1]+(t[2]+.5)*o[1]*i]},Yt.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),o=this.getResolution(t[0]),r=Ut.toSize(this.getTileSize(t[0]),this.tmpSize_),n=i[0]+t[1]*r[0]*o,s=i[1]+t[2]*r[1]*o,a=n+r[0]*o,h=s+r[1]*o;return U.createOrUpdate(n,s,a,h,e)},Yt.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},Yt.prototype.getTileCoordForXYAndResolution_=function(t,e,i,o,r){var n=this.getZForResolution(i),s=i/this.getResolution(n),a=this.getOrigin(n),h=Ut.toSize(this.getTileSize(n),this.tmpSize_),l=o?.5:0,p=o?0:.5,u=Math.floor((t-a[0])/i+l),c=Math.floor((e-a[1])/i+p),f=s*u/h[0],d=s*c/h[1];return o?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),F.createOrUpdate(n,f,d,r)},Yt.prototype.getTileCoordForXYAndZ_=function(t,e,i,o,r){var n=this.getOrigin(i),s=this.getResolution(i),a=Ut.toSize(this.getTileSize(i),this.tmpSize_),h=o?.5:0,l=o?0:.5,p=Math.floor((t-n[0])/s+h),u=Math.floor((e-n[1])/s+l),c=p/a[0],f=u/a[1];return o?(c=Math.ceil(c)-1,f=Math.ceil(f)-1):(c=Math.floor(c),f=Math.floor(f)),F.createOrUpdate(i,c,f,r)},Yt.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},Yt.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},Yt.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},Yt.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},Yt.prototype.getZForResolution=function(t,e){var i=Xt.linearFindNearest(this.resolutions_,t,e||0);return A.clamp(i,this.minZoom,this.maxZoom)},Yt.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),o=this.minZoom;o<e;++o)i[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=i};var zt=Yt,Kt={getForProjection:function(t){var e=t.getDefaultTileGrid();return e||(e=Kt.createForProjection(t),t.setDefaultTileGrid(e)),e},wrapX:function(t,e,i){var o=e[0],r=t.getTileCoordCenter(e),n=Kt.extentFromProjection(i);if(U.containsCoordinate(n,r))return e;var s=U.getWidth(n),a=Math.ceil((n[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,o)},createForExtent:function(t,e,i,o){var r=void 0!==o?o:j.TOP_LEFT,n=Kt.resolutionsFromExtent(t,e,i);return new zt({extent:t,origin:U.getCorner(t,r),resolutions:n,tileSize:i})},createXYZ:function(t){var e={};return nt.assign(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=lt.get("EPSG:3857").getExtent()),e.resolutions=Kt.resolutionsFromExtent(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new zt(e)},resolutionsFromExtent:function(t,e,i){for(var o=void 0!==e?e:C.DEFAULT_MAX_ZOOM,r=U.getHeight(t),n=U.getWidth(t),s=Ut.toSize(void 0!==i?i:C.DEFAULT_TILE_SIZE),a=Math.max(n/s[0],r/s[1]),h=o+1,l=new Array(h),p=0;p<h;++p)l[p]=a/Math.pow(2,p);return l},createForProjection:function(t,e,i,o){var r=Kt.extentFromProjection(t);return Kt.createForExtent(r,e,i,o)},extentFromProjection:function(t){var e=(t=lt.get(t)).getExtent();if(!e){var i=180*lt.METERS_PER_UNIT[K.DEGREES]/t.getMetersPerUnit();e=U.createOrUpdate(-i,-i,i,i)}return e}},Ht=Kt,$t=function(t){this.html_=t.html,this.tileRanges_=t.tileRanges?t.tileRanges:null};$t.prototype.getHTML=function(){return this.html_},$t.prototype.intersectsAnyTileRange=function(t,e,i){if(!this.tileRanges_)return!0;var o,r,n,s;for(s in t){var a;if(s in this.tileRanges_)for(n=t[s],o=0,r=this.tileRanges_[s].length;o<r;++o){if((a=this.tileRanges_[s][o]).intersects(n))return!0;var h=e.getTileRangeForExtentAndZ(Ht.extentFromProjection(i),parseInt(s,10)),l=h.getWidth();if(n.minX<h.minX||n.maxX>h.maxX){if(a.intersects(new Vt(A.modulo(n.minX,l),A.modulo(n.maxX,l),n.minY,n.maxY)))return!0;if(n.getWidth()>l&&a.intersects(h))return!0}}}return!1};var qt=$t,Zt={PROPERTYCHANGE:"propertychange"},Jt=function(){xt.call(this),this.revision_=0};C.inherits(Jt,xt),Jt.unByKey=function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)vt.unlistenByKey(t[e]);else vt.unlistenByKey(t)},Jt.prototype.changed=function(){++this.revision_,this.dispatchEvent(Et.CHANGE)},Jt.prototype.dispatchEvent,Jt.prototype.getRevision=function(){return this.revision_},Jt.prototype.on=function(t,e,i){if(Array.isArray(t)){for(var o=t.length,r=new Array(o),n=0;n<o;++n)r[n]=vt.listen(this,t[n],e,i);return r}return vt.listen(this,t,e,i)},Jt.prototype.once=function(t,e,i){if(Array.isArray(t)){for(var o=t.length,r=new Array(o),n=0;n<o;++n)r[n]=vt.listenOnce(this,t[n],e,i);return r}return vt.listenOnce(this,t,e,i)},Jt.prototype.un=function(t,e,i){if(Array.isArray(t))for(var o=0,r=t.length;o<r;++o)vt.unlisten(this,t[o],e,i);else vt.unlisten(this,t,e,i)};var Qt=Jt,te=function(t){Qt.call(this),C.getUid(this),this.values_={},void 0!==t&&this.setProperties(t)};C.inherits(te,Qt),te.changeEventTypeCache_={},te.getChangeEventType=function(t){return te.changeEventTypeCache_.hasOwnProperty(t)?te.changeEventTypeCache_[t]:te.changeEventTypeCache_[t]="change:"+t},te.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},te.prototype.getKeys=function(){return Object.keys(this.values_)},te.prototype.getProperties=function(){return nt.assign({},this.values_)},te.prototype.notify=function(t,e){var i;i=te.getChangeEventType(t),this.dispatchEvent(new te.Event(i,t,e)),i=Zt.PROPERTYCHANGE,this.dispatchEvent(new te.Event(i,t,e))},te.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var o=this.values_[t];this.values_[t]=e,o!==e&&this.notify(t,o)}},te.prototype.setProperties=function(t,e){var i;for(i in t)this.set(i,t[i],e)},te.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},te.Event=function(t,e,i){_t.call(this,t),this.key=e,this.oldValue=i},C.inherits(te.Event,_t);var ee=te,ie=function(t){ee.call(this),this.projection_=lt.get(t.projection),this.attributions_=null,this.attributions2_=this.adaptAttributions_(t.attributions),this.logo_=t.logo,this.state_=void 0!==t.state?t.state:pt.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX};C.inherits(ie,ee),ie.prototype.adaptAttributions_=function(t){if(!t)return null;if(t instanceof qt)return this.attributions_=[t],function(e){return[t.getHTML()]};if(Array.isArray(t)){if(t[0]instanceof qt){this.attributions_=t;var e=t.map(function(t){return t.getHTML()});return function(t){return e}}return this.attributions_=t.map(function(t){return new qt({html:t})}),function(e){return t}}return"function"==typeof t?t:(this.attributions_=[new qt({html:t})],function(e){return[t]})},ie.prototype.forEachFeatureAtCoordinate=C.nullFunction,ie.prototype.getAttributions=function(){return this.attributions_},ie.prototype.getAttributions2=function(){return this.attributions2_},ie.prototype.getLogo=function(){return this.logo_},ie.prototype.getProjection=function(){return this.projection_},ie.prototype.getResolutions=function(){},ie.prototype.getState=function(){return this.state_},ie.prototype.getWrapX=function(){return this.wrapX_},ie.prototype.refresh=function(){this.changed()},ie.prototype.setAttributions=function(t){this.attributions2_=this.adaptAttributions_(t),this.changed()},ie.prototype.setLogo=function(t){this.logo_=t},ie.prototype.setState=function(t){this.state_=t,this.changed()};var oe=ie,re=function(t){oe.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new At(t.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:t.transition}};C.inherits(re,oe),re.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},re.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},re.prototype.forEachLoadedTile=function(t,e,i,o){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var n,s,a,h=!0,l=i.minX;l<=i.maxX;++l)for(var p=i.minY;p<=i.maxY;++p)s=F.getKeyZXY(e,l,p),a=!1,r.containsKey(s)&&(a=(n=r.get(s)).getState()===ut.LOADED)&&(a=!1!==o(n)),a||(h=!1);return h},re.prototype.getGutter=function(t){return 0},re.prototype.getKey=function(){return this.key_},re.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},re.prototype.getOpaque=function(t){return this.opaque_},re.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},re.prototype.getTile=function(t,e,i,o,r){},re.prototype.getTileGrid=function(){return this.tileGrid},re.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ht.getForProjection(t)},re.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!lt.equivalent(e,t)?null:this.tileCache},re.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},re.prototype.getTilePixelSize=function(t,e,i){var o=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),n=Ut.toSize(o.getTileSize(t),this.tmpSize);return 1==r?n:Ut.scale(n,r,this.tmpSize)},re.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Ht.wrapX(o,t,i)),F.withinExtentAndZ(t,o)?t:null},re.prototype.refresh=function(){this.tileCache.clear(),this.changed()},re.prototype.useTile=C.nullFunction,re.Event=function(t,e){_t.call(this,t),this.tile=e},C.inherits(re.Event,_t);var ne=re,se={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},ae=function(t){ne.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):D.nullTileUrlFunction,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}};C.inherits(ae,ne),ae.prototype.fixedTileUrlFunction,ae.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},ae.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},ae.prototype.getUrls=function(){return this.urls},ae.prototype.handleTileChange=function(t){var e,i=t.target,o=C.getUid(i),r=i.getState();r==ut.LOADING?(this.tileLoadingKeys_[o]=!0,e=se.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=r==ut.ERROR?se.TILELOADERROR:r==ut.LOADED||r==ut.ABORT?se.TILELOADEND:void 0),void 0!=e&&this.dispatchEvent(new ne.Event(e,i))},ae.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},ae.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},ae.prototype.setUrl=function(t){var e=this.urls=D.expandUrl(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):D.createFromTemplates(e,this.tileGrid),t)},ae.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):D.createFromTemplates(t,this.tileGrid),e)},ae.prototype.useTile=function(t,e,i){var o=F.getKeyZXY(t,e,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)};var he=ae,le=function(t){he.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:le.defaultTileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Pt,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};C.inherits(le,he),le.prototype.canExpireCache=function(){if(!C.ENABLE_RASTER_REPROJECTION)return he.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},le.prototype.expireCache=function(t,e){if(C.ENABLE_RASTER_REPROJECTION){var i=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[o];r.expireCache(r==i?e:{})}}else he.prototype.expireCache.call(this,t,e)},le.prototype.getGutter=function(t){return C.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!lt.equivalent(this.getProjection(),t)?0:this.getGutterInternal()},le.prototype.getGutterInternal=function(){return 0},le.prototype.getOpaque=function(t){return!(C.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!lt.equivalent(this.getProjection(),t))&&he.prototype.getOpaque.call(this,t)},le.prototype.getTileGridForProjection=function(t){if(!C.ENABLE_RASTER_REPROJECTION)return he.prototype.getTileGridForProjection.call(this,t);var e=this.getProjection();if(!this.tileGrid||e&&!lt.equivalent(e,t)){var i=C.getUid(t).toString();return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Ht.getForProjection(t)),this.tileGridForProjection[i]}return this.tileGrid},le.prototype.getTileCacheForProjection=function(t){if(!C.ENABLE_RASTER_REPROJECTION)return he.prototype.getTileCacheForProjection.call(this,t);var e=this.getProjection();if(!e||lt.equivalent(e,t))return this.tileCache;var i=C.getUid(t).toString();return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new At(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},le.prototype.createTile_=function(t,e,i,o,r,n){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,r),h=a?this.tileUrlFunction(a,o,r):void 0,l=new this.tileClass(s,void 0!==h?ut.IDLE:ut.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=n,vt.listen(l,Et.CHANGE,this.handleTileChange,this),l},le.prototype.getTile=function(t,e,i,o,r){var n=this.getProjection();if(C.ENABLE_RASTER_REPROJECTION&&n&&r&&!lt.equivalent(n,r)){var s,a=this.getTileCacheForProjection(r),h=[t,e,i],l=F.getKey(h);a.containsKey(l)&&(s=a.get(l));var p=this.getKey();if(s&&s.key==p)return s;var u=this.getTileGridForProjection(n),c=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(h,r),d=new kt(n,u,r,c,h,f,this.getTilePixelRatio(o),this.getGutterInternal(),function(t,e,i,o){return this.getTileInternal(t,e,i,o,n)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=p,s?(d.interimTile=s,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,i,o,n||r)},le.prototype.getTileInternal=function(t,e,i,o,r){var n=null,s=F.getKeyZXY(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((n=this.tileCache.get(s)).key!=a){var h=n;n=this.createTile_(t,e,i,o,r,a),h.getState()==ut.IDLE?n.interimTile=h.interimTile:n.interimTile=h,n.refreshInterimChain(),this.tileCache.replace(s,n)}}else n=this.createTile_(t,e,i,o,r,a),this.tileCache.set(s,n);return n},le.prototype.setRenderReprojectionEdges=function(t){if(C.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},le.prototype.setTileGridForProjection=function(t,e){if(C.ENABLE_RASTER_REPROJECTION){var i=lt.get(t);if(i){var o=C.getUid(i).toString();o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}},le.defaultTileLoadFunction=function(t,e){t.getImage().src=e};var pe=le,ue=function(t){this.hidpi_=void 0!==t.hidpi&&t.hidpi,pe.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:lt.get("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:pt.LOADING,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:this.hidpi_?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet;var e="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;V.jsonp(e,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")};C.inherits(ue,pe),ue.TOS_ATTRIBUTION='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>',ue.prototype.getApiKey=function(){return this.apiKey_},ue.prototype.getImagerySet=function(){return this.imagerySet_},ue.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.brandLogoUri;-1==e.indexOf("https")&&(e=e.replace("http","https"));var i=t.resourceSets[0].resources[0],o=-1==this.maxZoom_?i.zoomMax:this.maxZoom_,r=this.getProjection(),n=Ht.extentFromProjection(r),s=i.imageWidth==i.imageHeight?i.imageWidth:[i.imageWidth,i.imageHeight],a=Ht.createXYZ({extent:n,minZoom:i.zoomMin,maxZoom:o,tileSize:s/(this.hidpi_?2:1)});this.tileGrid=a;var h=this.culture_,l=this.hidpi_;if(this.tileUrlFunction=D.createFromTileUrlFunctions(i.imageUrlSubdomains.map(function(t){var e=[0,0,0],o=i.imageUrl.replace("{subdomain}",t).replace("{culture}",h);return function(t,i,r){if(t){F.createOrUpdate(t[0],t[1],-t[2]-1,e);var n=o;return l&&(n+="&dpi=d1&device=mobile"),n.replace("{quadkey}",F.quadKey(e))}}})),i.imageryProviders){var p=lt.getTransformFromProjections(lt.get("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var e=[],o=t.viewState.zoom;return i.imageryProviders.map(function(i){for(var r=!1,n=i.coverageAreas,s=0,a=n.length;s<a;++s){var h=n[s];if(o>=h.zoomMin&&o<=h.zoomMax){var l=h.bbox,u=[l[1],l[0],l[3],l[2]],c=U.applyTransform(u,p);if(U.intersects(c,t.extent)){r=!0;break}}}r&&e.push(i.attribution)}),e.push(ue.TOS_ATTRIBUTION),e})}this.setLogo(e),this.setState(pt.READY)}else this.setState(pt.ERROR)};var ce=ue;
/*!
OpenLayers tile url function to load tile seeded with TileCache url scheme

@package ol-tilecache
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 2.1.1
@licence MIT
@copyright (c) 2016-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
/**
 * This file is part of ol-tilecache package.
 * @module ol-tilecache
 * @license MIT
 * @author Vladimir Vershinin
 */function fe(t,e){var i=e-t.toString().length+1;return(new Array(parseInt(i>0&&i,10)).join("0")+t).toString().slice(-e)}var de=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],o=!0,r=!1,n=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);o=!0);}catch(t){r=!0,n=t}finally{try{!o&&a.return&&a.return()}finally{if(r)throw n}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();
/**
 * This file is part of ol-tilecache package.
 * @module ol-tilecache
 * @license MIT
 * @author Vladimir Vershinin
 */function ye(t,e,i,o,r){var n,s=t.getZForResolution(o),a=o/t.getResolution(s),h=t.getOrigin(s),l=t.getTileSize(s);n=l,"[object Array]"!==Object.prototype.toString.call(n)&&(l=[l,l]);var p=r?.5:0,u=r?0:.5,c=Math.floor((e-h[0])/o+p),f=Math.floor((i-h[1])/o+u),d=a*c/l[0],y=a*f/l[1];return r?(d=Math.ceil(d)-1,y=Math.ceil(y)-1):(d=Math.floor(d),y=Math.floor(y)),[d,y]}
/**
 * This file is part of ol-tilecache package.
 * @module ol-tilecache
 * @license MIT
 * @author Vladimir Vershinin
 */
var ge=/\{z\}/g,ve=/\{0z\}/g,me=/\{x\d?\}/g,_e=/\{y\d?\}/g,be=/\{-y\d?\}/g,xe=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244];function Ee(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ht.createXYZ(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xe;return Te(function(t){var e=[],i=/\{(\d)-(\d)\}/.exec(t)||/\{([a-z])-([a-z])\}/.exec(t);if(i)for(var o=i[1].charCodeAt(0),r=i[2].charCodeAt(0),n=o;n<=r;++n)e.push(t.replace(i[0],String.fromCharCode(n)));else e.push(t);return e}(t),e,i)}function Se(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ht.createXYZ(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xe;return function(o){if(null!=o)return t.replace(ge,we(o[0])).replace(ve,we(o[0],!0)).replace(me,Ce(o[1])).replace(_e,function(t){return Ce(-o[2]-1)(t)}).replace(be,function(t){var r,n=o[0],s=function(t,e,i){var o=t.getResolution(i),r=ye(t,e[0],e[1],o,!1),n=de(r,2),s=n[0],a=n[1],h=ye(t,e[2],e[3],o,!0),l=de(h,2);return{minX:s,minY:a,maxX:l[0],maxY:l[1]}}(e,i,n);return Ce((r=s).maxY-r.minY+1+o[2])(t)})}}function Te(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ht.createXYZ(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xe;return function(t){if(1===t.length)return t[0];return function(e,i,o){if(null!=e){var r=(e[1]<<e[0])+e[2],n=(s=r,a=t.length,(h=s%a)*a<0?h+a:h);return t[n](e,i,o)}var s,a,h}}
/**
 * This file is part of ol-tilecache package.
 * @module ol-tilecache
 * @license MIT
 * @author Vladimir Vershinin
 */(t.map(function(t){return Se(t,e,i)}))}function we(t,e){return function(){return e?fe(t,2):t.toString()}}function Ce(t){return function(e){var i=e.match(/\d/);return i?fe(t,9).slice(3*(i[0]-1),3*i[0]):t.toString()}}"undefined"!=typeof window&&window.ol&&(window.ol.tileCacheUrlFn={createTileUrlFunction:Ee,createTileUrlFunctionFromTemplate:Se,createTileUrlFunctionFromTemplates:Te});
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var Re="EPSG:4326",Pe="EPSG:3857",Ie=28,Me=256,Le=new Y(6378137),Ae="canvas",Oe="webgl",Fe={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ne={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},De={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},je=(U.getCenter,U.getWidth),ke=U.getHeight,Ge=U.boundingExtent;function Ue(t){var e=(t=lt.get(t)).getExtent();if(!e){var i=180*lt.METERS_PER_UNIT[Ne.DEGREES]/t.getMetersPerUnit();e=function(t,e,i,o,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=o,r):[t,e,i,o]}(-i,-i,i,i)}return e}
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var Be=Ht.createXYZ;function Ve(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Me;i=Ut.toSize(i);for(var o=ke(t),r=je(t),n=Math.max(r/i[0],o/i[1]),s=e+1,a=new Array(s),h=0;h<s;++h)a[h]=n/Math.pow(2,h);return a}var We=i("Zx67"),Xe=i.n(We),Ye=i("Zrlr"),ze=i.n(Ye),Ke=i("zwoO"),He=i.n(Ke),$e=i("Pf15"),qe=i.n($e),Ze=i("hNlV"),Je=function(t){function e(t){ze()(this,e);var i=He()(this,(e.__proto__||Xe()(e)).call(this,t));return i.name=i.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(i,i.constructor):i.stack=new Error(t).stack,i}return qe()(e,t),e}(Error);function Qe(t,e){if(!t)throw new Je(e||"Assertion failed")}function ti(t,e){Qe(t instanceof e,"value is an instance of "+e.name)}function ei(t){Qe(t.$map,'component has "$map" property')}function ii(t){Qe(t.$view,'component has "$view" property')}function oi(t){Qe(t.$geolocation,'component has "$geolocation" property')}function ri(t){Qe(t.$source,'component has "$source" property')}function ni(t){Qe(t.$geometry,'component has "$geometry" property')}function si(t){Qe(t.$interaction,'component has "$interaction" property')}function ai(t){Qe(t.$overlay,'component has "$overlay" property')}var hi=i("HSQo"),li=i.n(hi),pi=i("//Fk"),ui=i.n(pi),ci=i("pFYg"),fi=i.n(ci),di=i("E47E"),yi=i.n(di);var gi=
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
function(){for(var t=void 0,e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return"object"!==fi()(i[i.length-1])&&(t=i.pop()),i.slice(1).reduce(function(e,i,o){return yi()(e,i,t)},i[0])},vi=i("Xxa5"),mi=i.n(vi),_i=i("exGp"),bi=i.n(_i),xi=i("bbL7");function Ei(t){return"function"==typeof t}const Si=Array.isArray||(t=>t&&"number"==typeof t.length);function Ti(t){return null!=t&&"object"==typeof t}const wi={e:{}};let Ci;function Ri(){try{return Ci.apply(this,arguments)}catch(t){return wi.e=t,wi}}function Pi(t){return Ci=t,Ri}class Ii extends Error{constructor(t){super(),this.errors=t;const e=Error.call(this,t?`${t.length} errors occurred during unsubscription:\n  ${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"");this.name=e.name="UnsubscriptionError",this.stack=e.stack,this.message=e.message}}class Mi{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:i,_parents:o,_unsubscribe:r,_subscriptions:n}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let s=-1,a=o?o.length:0;for(;i;)i.remove(this),i=++s<a&&o[s]||null;if(Ei(r)){Pi(r).call(this)===wi&&(e=!0,t=t||(wi.e instanceof Ii?Ai(wi.e.errors):[wi.e]))}if(Si(n))for(s=-1,a=n.length;++s<a;){const i=n[s];if(Ti(i)){if(Pi(i.unsubscribe).call(i)===wi){e=!0,t=t||[];let i=wi.e;i instanceof Ii?t=t.concat(Ai(i.errors)):t.push(i)}}}if(e)throw new Ii(t)}add(t){if(!t||t===Mi.EMPTY)return Mi.EMPTY;if(t===this)return this;let e=t;switch(typeof t){case"function":e=new Mi(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){const t=e;(e=new Mi)._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e}remove(t){const e=this._subscriptions;if(e){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}}_addParent(t){let{_parent:e,_parents:i}=this;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t}}var Li;function Ai(t){return t.reduce((t,e)=>t.concat(e instanceof Ii?e.errors:e),[])}Mi.EMPTY=((Li=new Mi).closed=!0,Li);const Oi={closed:!0,next(t){},error(t){throw t},complete(){}},Fi=xi.a.Symbol,Ni="function"==typeof Fi&&"function"==typeof Fi.for?Fi.for("rxSubscriber"):"@@rxSubscriber";class Di extends Mi{constructor(t,e,i){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Oi;break;case 1:if(!t){this.destination=Oi;break}if("object"==typeof t){if((o=t)instanceof Di||"syncErrorThrowable"in o&&o[Ni]){const e=t[Ni]();this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)}else this.syncErrorThrowable=!0,this.destination=new ji(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new ji(this,t,e,i)}var o}[Ni](){return this}static create(t,e,i){const o=new Di(t,e,i);return o.syncErrorThrowable=!1,o}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}class ji extends Di{constructor(t,e,i,o){let r;super(),this._parentSubscriber=t;let n=this;Ei(e)?r=e:e&&(r=e.next,i=e.error,o=e.complete,e!==Oi&&(Ei((n=Object.create(e)).unsubscribe)&&this.add(n.unsubscribe.bind(n)),n.unsubscribe=this.unsubscribe.bind(this))),this._context=n,this._next=r,this._error=i,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}}__tryOrSetError(t,e,i){try{e.call(this._context,i)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const ki=function(t){let e,i=t.Symbol;return"function"==typeof i?i.observable?e=i.observable:(e=i("observable"),i.observable=e):e="@@observable",e}(xi.a);function Gi(){}function Ui(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:Gi}class Bi{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(t){const e=new Bi;return e.source=this,e.operator=t,e}subscribe(t,e,i){const{operator:o}=this,r=function(t,e,i){if(t){if(t instanceof Di)return t;if(t[Ni])return t[Ni]()}return t||e||i?new Di(t,e,i):new Di(Oi)}(t,e,i);if(o?o.call(r,this.source):r.add(this.source||!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){t.syncErrorThrown=!0,t.syncErrorValue=e,t.error(e)}}forEach(t,e){if(e||(xi.a.Rx&&xi.a.Rx.config&&xi.a.Rx.config.Promise?e=xi.a.Rx.config.Promise:xi.a.Promise&&(e=xi.a.Promise)),!e)throw new Error("no Promise impl found");return new e((e,i)=>{let o;o=this.subscribe(e=>{if(o)try{t(e)}catch(t){i(t),o.unsubscribe()}else t(e)},i,e)})}_subscribe(t){return this.source.subscribe(t)}[ki](){return this}pipe(...t){return 0===t.length?this:Ui(t)(this)}toPromise(t){if(t||(xi.a.Rx&&xi.a.Rx.config&&xi.a.Rx.config.Promise?t=xi.a.Rx.config.Promise:xi.a.Promise&&(t=xi.a.Promise)),!t)throw new Error("no Promise impl found");return new t((t,e)=>{let i;this.subscribe(t=>i=t,t=>e(t),()=>t(i))})}}Bi.create=(t=>new Bi(t));class Vi extends Mi{constructor(t,e){super()}schedule(t,e=0){return this}}class Wi{constructor(t,e=Wi.now){this.SchedulerAction=t,this.now=e}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}Wi.now=Date.now?Date.now:()=>+new Date;const Xi=new class extends Wi{constructor(){super(...arguments),this.actions=[],this.active=!1,this.scheduled=void 0}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}(class extends Vi{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t,this.pending=!0;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,e)),this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,i=0){return xi.a.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;xi.a.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,o=void 0;try{this.work(t)}catch(t){i=!0,o=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),o}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&i.splice(o,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}});class Yi extends Bi{constructor(t=0,e=Xi){var i;super(),this.period=t,this.scheduler=e,(Si(i=t)||!(i-parseFloat(i)+1>=0)||t<0)&&(this.period=0),e&&"function"==typeof e.schedule||(this.scheduler=Xi)}static create(t=0,e=Xi){return new Yi(t,e)}static dispatch(t){const{index:e,subscriber:i,period:o}=t;i.next(e),i.closed||(t.index+=1,this.schedule(t,o))}_subscribe(t){const e=this.period,i=this.scheduler;t.add(i.schedule(Yi.dispatch,e,{index:0,subscriber:t,period:e}))}}const zi=Yi.create;class Ki extends Error{constructor(){const t=super("no elements in sequence");this.name=t.name="EmptyError",this.stack=t.stack,this.message=t.message}}class Hi{constructor(t,e,i,o){this.predicate=t,this.resultSelector=e,this.defaultValue=i,this.source=o}call(t,e){return e.subscribe(new $i(t,this.predicate,this.resultSelector,this.defaultValue,this.source))}}class $i extends Di{constructor(t,e,i,o,r){super(t),this.predicate=e,this.resultSelector=i,this.defaultValue=o,this.source=r,this.index=0,this.hasCompleted=!1,this._emitted=!1}_next(t){const e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)}_tryPredicate(t,e){let i;try{i=this.predicate(t,e,this.source)}catch(t){return void this.destination.error(t)}i&&this._emit(t,e)}_emit(t,e){this.resultSelector?this._tryResultSelector(t,e):this._emitFinal(t)}_tryResultSelector(t,e){let i;try{i=this.resultSelector(t,e)}catch(t){return void this.destination.error(t)}this._emitFinal(i)}_emitFinal(t){const e=this.destination;this._emitted||(this._emitted=!0,e.next(t),e.complete(),this.hasCompleted=!0)}_complete(){const t=this.destination;this.hasCompleted||void 0===this.defaultValue?this.hasCompleted||t.error(new Ki):(t.next(this.defaultValue),t.complete())}}function qi(t,e,i){return function(t,e,i){return o=>o.lift(new Hi(t,e,i,o))}(t,e,i)(this)}class Zi{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new Ji(t,this.project,this.thisArg))}}class Ji extends Di{constructor(t,e,i){super(t),this.project=e,this.count=0,this.thisArg=i||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)}}function Qi(t,e){return function(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Zi(t,e))}}(t,e)(this)}class to{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new eo(t,this.predicate))}}class eo extends Di{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}}}function io(t){return function(t){return e=>e.lift(new to(t))}(t)(this)}const oo=Bi.prototype.toPromise;var ro=i("Gu7T"),no=i.n(ro),so=i("5QVw"),ao=i.n(so),ho=i("fZjL"),lo=i.n(ho),po=i("OvRC"),uo=i.n(po),co=i("wxAW"),fo=i.n(co),yo=function(){function t(){ze()(this,t),this.pools=uo()(null)}return fo()(t,[{key:"_preparePool",value:function(t){this.pools[t]||(this.pools[t]=uo()(null))}},{key:"set",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";null!=e&&(this._preparePool(i),this.pools[i][t]={value:e,refs:1})}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this._preparePool(e);var i=this.pools[e][t];if(i&&null!=i.value)return i.refs++,this.pools[e][t]=i,i.value}},{key:"unset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";this._preparePool(e);var i=this.pools[e][t];i&&null!=i.value&&(i.refs--,0===i.refs?delete this.pools[e][t]:this.pools[e][t]=i)}},{key:"has",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this._preparePool(e),!!this.pools[e][t]}},{key:"ids",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this._preparePool(t),lo()(this.pools[t])}},{key:"refs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this._preparePool(e),this.has(t,e)?this.pools[e][t].refs:void 0}}]),t}(),go=ao()("identityMap");var vo={IDENTITY_MAP_PROP:go,props:{ident:[String,Number]},methods:{makeSelfIdent:function(){if(this.ident){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.makeIdent.apply(this,[this.ident].concat(no()(e)))}},makeIdent:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.filter(Ze.g).join(".")}},created:function(){(function(){var t=this;this[go]||(E.a[go]=E.a.prototype[go]=new yo);li()(this,{$identityMap:{enumerable:!0,get:function(){return t[go]}}})}).call(this)}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
var mo=function(){},_o={methods:{subscribeAll:function(){},unsubscribeAll:function(){this._rxSubs.forEach(function(t){return t.unsubscribe()}),this._rxSubs=[]},subscribeTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mo,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mo;i=function(t){i(t)};var r=t.subscribe(e,i,o);return this._rxSubs.push(r),r}},beforeCreate:function(){this._rxSubs=[]},destroyed:function(){this.unsubscribeAll()}},bo=i("bOdI"),xo=i.n(bo),Eo=ao()("services"),So={inject:{$services:Eo},provide:function(){return xo()({},Eo,this.getServices())},methods:{getServices:function(){return gi({},this.$services||{})}},beforeCreate:function(){for(var t=this.$parent;t&&!(t._provided&&Eo in t._provided);)t=t.$parent;t&&Eo in t._provided||delete this.$options.inject.$services}},To={VM_PROP:"vm",INSTANCE_PROMISE_POOL:"instance_promise",mixins:[vo,_o,So],props:{},methods:{beforeInit:function(){},init:function(){var t=this;return bi()(mi.a.mark(function e(){var i,o;return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0,(o=t.makeSelfIdent())&&t.$identityMap.has(o,"instance_promise")?i=t.$identityMap.get(o,"instance_promise"):(i=ui.a.resolve(t.createOlObject()),o&&t.$identityMap.set(o,i,"instance_promise")),e.next=5,i;case 5:t._olObject=e.sent,t._olObject.vm||(t._olObject.vm=[]),t._olObject.vm.includes(t)||t._olObject.vm.push(t),++t.rev;case 9:case"end":return e.stop()}},e,t)}))()},createOlObject:function(){throw new Error("Not implemented method")},deinit:function(){var t=this,e=this.makeSelfIdent();e&&this.$identityMap.unset(e,"instance_promise"),this._olObject&&(this._olObject.vm=this._olObject.vm.filter(function(e){return e!==t}),this._olObject=void 0)},getServices:function(){return So.methods.getServices.call(this)},mount:function(){throw new Error("Not implemented method")},unmount:function(){throw new Error("Not implemented method")},refresh:function(){var t=this;return new ui.a(function(e){var i=function(){++t.rev,e()};t.$olObject&&Object(Ze.k)(t.$olObject.changed)?(t.$olObject.once("change",i),t.$olObject.changed()):i()})},remount:function(){var t=this;return bi()(mi.a.mark(function e(){return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unmount();case 2:return e.next=4,t.mount();case 4:case"end":return e.stop()}},e,t)}))()},recreate:function(){var t=this;return bi()(mi.a.mark(function e(){return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.unmount();case 2:return e.next=4,t.init();case 4:return e.next=6,t.mount();case 6:case"end":return e.stop()}},e,t)}))()}},data:function(){return{rev:0}},created:function(){var t,e=this;this._olObject=void 0,this._createPromise=ui.a.resolve(this.beforeInit()).then(this.init).then(function(){return e.$emit("created"),e}),this._mountPromise=(t=(t=(t=(t=zi.call(Bi,100),io).call(t,function(){return!e._mounted}),qi).call(t),Qi).call(t,function(){return e}),oo).call(t,ui.a),li()(this,{$olObject:{enumerable:!0,get:function(){return e._olObject}},$createPromise:{enumerable:!0,get:function(){return e._createPromise}},$mountPromise:{enumerable:!0,get:function(){return e._mountPromise}}})},mounted:function(){var t=this;this.$createPromise.then(this.mount).then(function(){t._mounted=!0,t.$emit("mounted")})},destroyed:function(){var t=this;this.$mountPromise.then(this.unmount).then(this.deinit).then(function(){t.$emit("destroyed")})}};var wo={mixins:[{render:function(t){var e=this.$options.stubVNode||{};if(e.empty){var i=t();return"string"==typeof e.empty?i.text=e.empty:"function"==typeof e.empty&&(i.text=e.empty.call(this)),i}var o=void 0;o=!1===e.slots?void 0:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return lo()(t).reduce(function(i,o){return e.length&&!e.includes(o)||(i=i.concat(t[o])),i},[])}(this.$slots,e.slots);var r={attrs:"function"==typeof e.attrs?e.attrs.call(this):e.attrs,style:{display:"none !important"}};return t(e.tag||"i",r,o)}},To],methods:{init:function(){return To.methods.init.call(this)},deinit:function(){return To.methods.deinit.call(this)},createOlObject:function(){throw new Error("Not implemented method")},getServices:function(){return To.methods.getServices.call(this)},refresh:function(){return To.methods.refresh.call(this)}}},Co={methods:{beforeInit:function(){var t,e=this;return(t=(t=(t=(t=zi.call(Bi,100),io).call(t,function(){return!e.$map}),qi).call(t),Qi).call(t,function(){return e}),oo).call(t,ui.a)}}},Ro={attributions:[String,Array],logo:String,projection:String,wrapX:{type:Boolean,default:!0}},Po={mixins:[wo,Co],props:Ro,methods:{createOlObject:function(){return this.createSource()},createSource:function(){throw new Error("Not implemented method")},init:function(){return wo.methods.init.call(this)},deinit:function(){return wo.methods.deinit.call(this)},getServices:function(){var t=this;return gi(wo.methods.getServices.call(this),{get source(){return t.$source}})},mount:function(){this.$sourceContainer&&this.$sourceContainer.setSource(this),this.subscribeAll()},unmount:function(){this.unsubscribeAll(),this.$sourceContainer&&this.$sourceContainer.setSource(void 0)},refresh:function(){var t=this;return this.$source&&!Object(Ze.k)(this.$source.clear)?wo.methods.refresh.call(this):new ui.a(function(e){var i=function(){++t.rev,e()};t.$source?(t.$source.once("change",i),t.$source.clear()):i()})}},watch:{attributions:function(t){this.$source&&this.$source.setAttributions(t)}},stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;li()(this,{$source:{enumerable:!0,get:function(){return t.$olObject}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}},$sourceContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.sourceContainer}}})}},Io={props:{url:{type:String}},computed:{urlTmpl:function(){return Object(Ze.x)(this.url,Object(Ze.t)(this,this.urlTokens))},urlTokens:function(){return[]}}},Mo={cacheSize:{type:Number,default:2048},crossOrigin:String,maxZoom:{type:Number,default:Ie},minZoom:{type:Number,default:0},opaque:Boolean,projection:{type:String,default:Pe},reprojectionErrorThreshold:{type:Number,default:.5},tilePixelRatio:{type:Number,default:1},tileSize:{type:Array,default:function(){return[Me,Me]},validator:function(t){return 2===t.length}},tileLoadFunction:Function,url:{type:[String,Function],required:!0},transition:Number},Lo={mixins:[Po,Io],props:Mo,computed:{urlTmpl:function(){return Object(Ze.o)(this.url)?Object(Ze.x)(this.url,Object(Ze.t)(this,this.urlTokens)):""}},methods:{createTileGrid:function(){return ii(this),Be({extent:Ue(this.$view.getProjection()),maxZoom:this.maxZoom,minZoom:this.minZoom,tileSize:this.tileSize})},createUrlFunc:function(){return Object(Ze.k)(this.url)?this.url:(ii(this),Ee(this.urlTmpl,this._tileGrid,Ue(this.$view.getProjection())))},init:function(){return this._tileGrid=this.createTileGrid(),Po.methods.init.call(this)},deinit:function(){return this._tileGrid=void 0,Po.methods.deinit.call(this)},mount:function(){Po.methods.mount.call(this)},unmount:function(){Po.methods.mount.call(this)}},watch:{url:function(){this.$source&&(this.$source.setTileUrlFunction(this.createUrlFunc()),this.refresh())}}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
function Ao(t,e){return t.reduce(function(t,i){return t[i]=e,t},{})}var Oo=i("woOf"),Fo=i.n(Oo),No={name:"vl-source-bing-maps",mixins:[Lo],props:{hidpi:{type:Boolean,default:!1},culture:{type:String,default:"en-us"},apiKey:{type:String,required:!0},imagerySet:{type:String,required:!0},maxZoom:{type:Number,default:21},url:String},methods:{createSource:function(){return new ce({cacheSize:this.cacheSize,hidpi:this.hidpi,culture:this.culture,key:this.apiKey,imagerySet:this.imagerySet,maxZoom:this.maxZoom,reprojectionErrorThreshold:this.reprojectionErrorThreshold,wrapX:this.wrapX,transition:this.transition,tileLoadFunction:this.tileLoadFunction})}},watch:Ao(["apiKey","imagerySet"],function(){this.recreate()})},Do={Source:No,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(No,e),t.component(No.name,No)}},jo={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},ko={TRUE:function(){return!0},FALSE:function(){return!1}},Go=ko,Uo={transform2D:function(t,e,i,o,r,n){var s,a=n||[],h=0;for(s=e;s<i;s+=o){var l=t[s],p=t[s+1];a[h++]=r[0]*l+r[2]*p+r[4],a[h++]=r[1]*l+r[3]*p+r[5]}return n&&a.length!=h&&(a.length=h),a},rotate:function(t,e,i,o,r,n,s){for(var a=s||[],h=Math.cos(r),l=Math.sin(r),p=n[0],u=n[1],c=0,f=e;f<i;f+=o){var d=t[f]-p,y=t[f+1]-u;a[c++]=p+d*h-y*l,a[c++]=u+d*l+y*h;for(var g=f+2;g<f+o;++g)a[c++]=t[g]}return s&&a.length!=c&&(a.length=c),a},scale:function(t,e,i,o,r,n,s,a){for(var h=a||[],l=s[0],p=s[1],u=0,c=e;c<i;c+=o){var f=t[c]-l,d=t[c+1]-p;h[u++]=l+r*f,h[u++]=p+n*d;for(var y=c+2;y<c+o;++y)h[u++]=t[y]}return a&&h.length!=u&&(h.length=u),h},translate:function(t,e,i,o,r,n,s){var a,h,l=s||[],p=0;for(a=e;a<i;a+=o)for(l[p++]=t[a]+r,l[p++]=t[a+1]+n,h=a+2;h<a+o;++h)l[p++]=t[h];return s&&l.length!=p&&(l.length=p),l}},Bo=Uo,Vo={};Vo.tmp_=new Array(6),Vo.create=function(){return[1,0,0,1,0,0]},Vo.reset=function(t){return Vo.set(t,1,0,0,1,0,0)},Vo.multiply=function(t,e){var i=t[0],o=t[1],r=t[2],n=t[3],s=t[4],a=t[5],h=e[0],l=e[1],p=e[2],u=e[3],c=e[4],f=e[5];return t[0]=i*h+r*l,t[1]=o*h+n*l,t[2]=i*p+r*u,t[3]=o*p+n*u,t[4]=i*c+r*f+s,t[5]=o*c+n*f+a,t},Vo.set=function(t,e,i,o,r,n,s){return t[0]=e,t[1]=i,t[2]=o,t[3]=r,t[4]=n,t[5]=s,t},Vo.setFromArray=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},Vo.apply=function(t,e){var i=e[0],o=e[1];return e[0]=t[0]*i+t[2]*o+t[4],e[1]=t[1]*i+t[3]*o+t[5],e},Vo.rotate=function(t,e){var i=Math.cos(e),o=Math.sin(e);return Vo.multiply(t,Vo.set(Vo.tmp_,i,o,-o,i,0,0))},Vo.scale=function(t,e,i){return Vo.multiply(t,Vo.set(Vo.tmp_,e,0,0,i,0,0))},Vo.translate=function(t,e,i){return Vo.multiply(t,Vo.set(Vo.tmp_,1,0,0,1,e,i))},Vo.compose=function(t,e,i,o,r,n,s,a){var h=Math.sin(n),l=Math.cos(n);return t[0]=o*l,t[1]=r*h,t[2]=-o*h,t[3]=r*l,t[4]=s*o*l-a*o*h+e,t[5]=s*r*h+a*r*l+i,t},Vo.invert=function(t){var e=Vo.determinant(t);M.assert(0!==e,32);var i=t[0],o=t[1],r=t[2],n=t[3],s=t[4],a=t[5];return t[0]=n/e,t[1]=-o/e,t[2]=-r/e,t[3]=i/e,t[4]=(r*a-n*s)/e,t[5]=-(i*a-o*s)/e,t},Vo.determinant=function(t){return t[0]*t[3]-t[1]*t[2]};var Wo=Vo,Xo=function(){ee.call(this),this.extent_=U.createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.tmpTransform_=Wo.create()};C.inherits(Xo,ee),Xo.prototype.clone=function(){},Xo.prototype.closestPointXY=function(t,e,i,o){},Xo.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},Xo.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},Xo.prototype.computeExtent=function(t){},Xo.prototype.containsXY=Go.FALSE,Xo.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),U.returnOrUpdate(this.extent_,t)},Xo.prototype.rotate=function(t,e){},Xo.prototype.scale=function(t,e,i){},Xo.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},Xo.prototype.getSimplifiedGeometry=function(t){},Xo.prototype.getType=function(){},Xo.prototype.applyTransform=function(t){},Xo.prototype.intersectsExtent=function(t){},Xo.prototype.translate=function(t,e){},Xo.prototype.transform=function(t,e){var i=this.tmpTransform_,o=(t=lt.get(t)).getUnits()==K.TILE_PIXELS?function(o,r,n){var s=t.getExtent(),a=t.getWorldExtent(),h=U.getHeight(a)/U.getHeight(s);return Wo.compose(i,a[0],a[3],h,-h,0,0,0),Bo.transform2D(o,0,o.length,n,i,r),lt.getTransform(t,e)(o,r,n)}:lt.getTransform(t,e);return this.applyTransform(o),this};var Yo=Xo,zo=function(){Yo.call(this),this.layout=jo.XY,this.stride=2,this.flatCoordinates=null};C.inherits(zo,Yo),zo.getLayoutForStride_=function(t){var e;return 2==t?e=jo.XY:3==t?e=jo.XYZ:4==t&&(e=jo.XYZM),e},zo.getStrideForLayout=function(t){var e;return t==jo.XY?e=2:t==jo.XYZ||t==jo.XYM?e=3:t==jo.XYZM&&(e=4),e},zo.prototype.containsXY=Go.FALSE,zo.prototype.computeExtent=function(t){return U.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},zo.prototype.getCoordinates=function(){},zo.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},zo.prototype.getFlatCoordinates=function(){return this.flatCoordinates},zo.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},zo.prototype.getLayout=function(){return this.layout},zo.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(nt.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},zo.prototype.getSimplifiedGeometryInternal=function(t){return this},zo.prototype.getStride=function(){return this.stride},zo.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=zo.getStrideForLayout(t),this.layout=t,this.flatCoordinates=e},zo.prototype.setCoordinates=function(t,e){},zo.prototype.setLayout=function(t,e,i){var o;if(t)o=zo.getStrideForLayout(t);else{var r;for(r=0;r<i;++r){if(0===e.length)return this.layout=jo.XY,void(this.stride=2);e=e[0]}o=e.length,t=zo.getLayoutForStride_(o)}this.layout=t,this.stride=o},zo.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},zo.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();Bo.rotate(i,0,i.length,o,t,e,i),this.changed()}},zo.prototype.scale=function(t,e,i){var o=e;void 0===o&&(o=t);var r=i;r||(r=U.getCenter(this.getExtent()));var n=this.getFlatCoordinates();if(n){var s=this.getStride();Bo.scale(n,0,n.length,s,t,o,r,n),this.changed()}},zo.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var o=this.getStride();Bo.translate(i,0,i.length,o,t,e,i),this.changed()}},zo.transform2D=function(t,e,i){var o=t.getFlatCoordinates();if(o){var r=t.getStride();return Bo.transform2D(o,0,o.length,r,e,i)}return null};var Ko=zo,Ho={coordinate:function(t,e,i,o){var r,n;for(r=0,n=i.length;r<n;++r)t[e++]=i[r];return e},coordinates:function(t,e,i,o){var r,n;for(r=0,n=i.length;r<n;++r){var s,a=i[r];for(s=0;s<o;++s)t[e++]=a[s]}return e},coordinatess:function(t,e,i,o,r){var n,s,a=r||[],h=0;for(n=0,s=i.length;n<s;++n){var l=Ho.coordinates(t,e,i[n],o);a[h++]=l,e=l}return a.length=h,a},coordinatesss:function(t,e,i,o,r){var n,s,a=r||[],h=0;for(n=0,s=i.length;n<s;++n){var l=Ho.coordinatess(t,e,i[n],o,a[h]);a[h++]=l,e=l[l.length-1]}return a.length=h,a}},$o=Ho,qo=function(t,e,i){Ko.call(this);var o=e||0;this.setCenterAndRadius(t,o,i)};C.inherits(qo,Ko),qo.prototype.clone=function(){var t=new qo(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},qo.prototype.closestPointXY=function(t,e,i,o){var r=this.flatCoordinates,n=t-r[0],s=e-r[1],a=n*n+s*s;if(a<o){var h;if(0===a)for(h=0;h<this.stride;++h)i[h]=r[h];else{var l=this.getRadius()/Math.sqrt(a);for(i[0]=r[0]+l*n,i[1]=r[1]+l*s,h=2;h<this.stride;++h)i[h]=r[h]}return i.length=this.stride,a}return o},qo.prototype.containsXY=function(t,e){var i=this.flatCoordinates,o=t-i[0],r=e-i[1];return o*o+r*r<=this.getRadiusSquared_()},qo.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},qo.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return U.createOrUpdate(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},qo.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},qo.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},qo.prototype.getType=function(){return W.CIRCLE},qo.prototype.intersectsExtent=function(t){var e=this.getExtent();if(U.intersects(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||U.forEachCorner(t,this.intersectsCoordinate,this))}return!1},qo.prototype.setCenter=function(t){var e,i=this.stride,o=this.flatCoordinates[i]-this.flatCoordinates[0],r=t.slice();for(r[i]=r[0]+o,e=1;e<i;++e)r[i+e]=t[e];this.setFlatCoordinates(this.layout,r)},qo.prototype.setCenterAndRadius=function(t,e,i){if(t){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o,r,n=this.flatCoordinates,s=$o.coordinate(n,0,t,this.stride);for(n[s++]=n[0]+e,o=1,r=this.stride;o<r;++o)n[s++]=n[o];n.length=s,this.changed()}else this.setFlatCoordinates(jo.XY,null)},qo.prototype.getCoordinates=function(){},qo.prototype.setCoordinates=function(t,e){},qo.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},qo.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},qo.prototype.transform;var Zo=qo;function Jo(t,e){return i=>i.lift(new Qo(t,e))}class Qo{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new tr(t,this.compare,this.keySelector))}}class tr extends Di{constructor(t,e,i){super(t),this.keySelector=i,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e=t;if(this.keySelector&&(e=Pi(this.keySelector)(t))===wi)return this.destination.error(wi.e);let i=!1;if(this.hasKey){if((i=Pi(this.compare)(this.key,e))===wi)return this.destination.error(wi.e)}else this.hasKey=!0;!1===Boolean(i)&&(this.key=e,this.destination.next(t))}}function er(t,e){return Jo(t,e)(this)}class ir extends Di{notifyNext(t,e,i,o,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}const or=t=>t&&"number"==typeof t.length;const rr=function(t){const e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;{const{Set:e}=t;if(e&&"function"==typeof(new e)["@@iterator"])return"@@iterator";const{Map:i}=t;if(i){let t=Object.getOwnPropertyNames(i.prototype);for(let e=0;e<t.length;++e){let o=t[e];if("entries"!==o&&"size"!==o&&i.prototype[o]===i.prototype.entries)return o}}return"@@iterator"}}(xi.a);class nr extends Di{constructor(t,e,i){super(),this.parent=t,this.outerValue=e,this.outerIndex=i,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function sr(t,e,i,o){let r=new nr(t,i,o);if(r.closed)return null;if(e instanceof Bi)return e._isScalar?(r.next(e.value),r.complete(),null):(r.syncErrorThrowable=!0,e.subscribe(r));if(or(e)){for(let t=0,i=e.length;t<i&&!r.closed;t++)r.next(e[t]);r.closed||r.complete()}else{if((n=e)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return e.then(t=>{r.closed||(r.next(t),r.complete())},t=>r.error(t)).then(null,t=>{xi.a.setTimeout(()=>{throw t})}),r;if(e&&"function"==typeof e[rr]){const t=e[rr]();for(;;){let e=t.next();if(e.done){r.complete();break}if(r.next(e.value),r.closed)break}}else if(e&&"function"==typeof e[ki]){const n=e[ki]();if("function"==typeof n.subscribe)return n.subscribe(new nr(t,i,o));r.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{const t=`You provided ${Ti(e)?"an invalid object":`'${e}'`} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.";r.error(new TypeError(t))}}var n;return null}const ar={leading:!0,trailing:!1};class hr{constructor(t,e,i,o){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=o}call(t,e){return e.subscribe(new lr(t,this.duration,this.scheduler,this.leading,this.trailing))}}class lr extends Di{constructor(t,e,i,o,r){super(t),this.duration=e,this.scheduler=i,this.leading=o,this.trailing=r,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(pr,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function pr(t){const{subscriber:e}=t;e.clearThrottle()}function ur(t,e=Xi,i=ar){return function(t,e=Xi,i=ar){return o=>o.lift(new hr(t,e,i.leading,i.trailing))}(t,e,i)(this)}var cr={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function fr(t,e,i){if(!_r(i=i||{}))throw new Error("options is invalid");var o=i.bbox,r=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");o&&br(o),r&&xr(r);var n={type:"Feature"};return r&&(n.id=r),o&&(n.bbox=o),n.properties=e||{},n.geometry=t,n}function dr(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mr(t[0])||!mr(t[1]))throw new Error("coordinates must contain numbers");return fr({type:"Point",coordinates:t},e,i)}function yr(t,e){if(!_r(e=e||{}))throw new Error("options is invalid");var i=e.bbox,o=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&br(i),o&&xr(o);var r={type:"FeatureCollection"};return o&&(r.id=o),i&&(r.bbox=i),r.features=t,r}function gr(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=cr[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t*i}function vr(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180}function mr(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function _r(t){return!!t&&t.constructor===Object}function br(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!mr(t))throw new Error("bbox must only contain numbers")})}function xr(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Er(t,e,i){if(null!==t)for(var o,r,n,s,a,h,l,p,u=0,c=0,f=t.type,d="FeatureCollection"===f,y="Feature"===f,g=d?t.features.length:1,v=0;v<g;v++){a=(p=!!(l=d?t.features[v].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=p?l.geometries[m]:l)){h=s.coordinates;var x=s.type;switch(u=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(h,c,v,_,b))return!1;c++,_++;break;case"LineString":case"MultiPoint":for(o=0;o<h.length;o++){if(!1===e(h[o],c,v,_,b))return!1;c++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(o=0;o<h.length;o++){for(r=0;r<h[o].length-u;r++){if(!1===e(h[o][r],c,v,_,b))return!1;c++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(o=0;o<h.length;o++){for("MultiPolygon"===x&&(b=0),r=0;r<h[o].length;r++){for(n=0;n<h[o][r].length-u;n++){if(!1===e(h[o][r][n],c,v,_,b))return!1;c++}b++}_++}break;case"GeometryCollection":for(o=0;o<s.geometries.length;o++)if(!1===Er(s.geometries[o],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Sr(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}var Tr=function(t){var e=[];return"FeatureCollection"===t.type?Sr(t,function(t){Er(t,function(i){e.push(dr(i,t.properties))})}):Er(t,function(i){e.push(dr(i,t.properties))}),yr(e)};var wr=function(t){var e=[1/0,1/0,-1/0,-1/0];return Er(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e};var Cr=function(t,e){if(!_r(e=e||{}))throw new Error("options is invalid");var i=e.properties;if(!t)throw new Error("geojson is required");var o=wr(t);return dr([(o[0]+o[2])/2,(o[1]+o[3])/2],i)};function Rr(t){var e={type:"Feature"};return Object.keys(t).forEach(function(i){switch(i){case"type":case"properties":case"geometry":return;default:e[i]=t[i]}}),e.properties=function t(e){var i={};if(!e)return i;Object.keys(e).forEach(function(o){var r=e[o];"object"==typeof r?null===r?i[o]=null:r.length?i[o]=r.map(function(t){return t}):i[o]=t(r):i[o]=r});return i}(t.properties),e.geometry=Pr(t.geometry),e}function Pr(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Pr(t)}),e):(e.coordinates=function t(e){if("object"!=typeof e[0])return e.slice();return e.map(function(e){return t(e)})}(t.coordinates),e)}var Ir=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Rr(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(i){switch(i){case"type":case"features":return;default:e[i]=t[i]}}),e.features=t.features.map(function(t){return Rr(t)}),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Pr(t);default:throw new Error("unknown GeoJSON type")}};function Mr(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var Lr=function(t,e,i){if(!_r(i=i||{}))throw new Error("options is invalid");var o=i.units,r=Mr(t),n=Mr(e),s=vr(n[1]-r[1]),a=vr(n[0]-r[0]),h=vr(r[1]),l=vr(n[1]),p=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(h)*Math.cos(l);return gr(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),o)};var Ar=function(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var i,o=1/0;return Sr(e,function(e,r){var n=Lr(t,e);n<o&&((i=Ir(e)).properties.featureIndex=r,i.properties.distanceToPoint=n,o=n)}),i};function Or(t,e,i){var o=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,n=e.length-1;r<e.length;n=r++){var s=e[r][0],a=e[r][1],h=e[n][0],l=e[n][1];if(t[1]*(s-h)+a*(h-t[0])+l*(t[0]-s)==0&&(s-t[0])*(h-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!i;a>t[1]!=l>t[1]&&t[0]<(h-s)*(t[1]-a)/(l-a)+s&&(o=!o)}return o}var Fr=function(t,e,i){if("object"!=typeof(i=i||{}))throw new Error("options is invalid");var o=i.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Mr(t),n=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===s&&(n=[n]);for(var h=0,l=!1;h<n.length&&!l;h++)if(Or(r,n[h][0],o)){for(var p=!1,u=1;u<n[h].length&&!p;)Or(r,n[h][u],!o)&&(p=!0),u++;p||(l=!0)}return l};function Nr(t,e,i,o,r,n){return Math.sqrt((r-i)*(r-i)+(n-o)*(n-o))===Math.sqrt((t-i)*(t-i)+(e-o)*(e-o))+Math.sqrt((r-t)*(r-t)+(n-e)*(n-e))}var Dr=function(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?yr([fr(t)]):yr([t]):t}(t),i=Cr(e),o=!1,r=0;!o&&r<e.features.length;){var n,s=e.features[r].geometry,a=!1;if("Point"===s.type)i.geometry.coordinates[0]===s.coordinates[0]&&i.geometry.coordinates[1]===s.coordinates[1]&&(o=!0);else if("MultiPoint"===s.type){var h=!1;for(n=0;!h&&n<s.coordinates.length;)i.geometry.coordinates[0]===s.coordinates[n][0]&&i.geometry.coordinates[1]===s.coordinates[n][1]&&(o=!0,h=!0),n++}else if("LineString"===s.type)for(n=0;!a&&n<s.coordinates.length-1;)Nr(i.geometry.coordinates[0],i.geometry.coordinates[1],s.coordinates[n][0],s.coordinates[n][1],s.coordinates[n+1][0],s.coordinates[n+1][1])&&(a=!0,o=!0),n++;else if("MultiLineString"===s.type)for(var l=0;l<s.coordinates.length;){a=!1,n=0;for(var p=s.coordinates[l];!a&&n<p.length-1;)Nr(i.geometry.coordinates[0],i.geometry.coordinates[1],p[n][0],p[n][1],p[n+1][0],p[n+1][1])&&(a=!0,o=!0),n++;l++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||Fr(i,s)&&(o=!0);r++}if(o)return i;var u=yr([]);for(r=0;r<e.features.length;r++)u.features=u.features.concat(Tr(e.features[r]).features);return dr(Ar(i,u).geometry.coordinates)},jr=function(t){Yo.call(this),this.geometries_=t||null,this.listenGeometriesChange_()};C.inherits(jr,Yo),jr.cloneGeometries_=function(t){var e,i,o=[];for(e=0,i=t.length;e<i;++e)o.push(t[e].clone());return o},jr.prototype.unlistenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)vt.unlisten(this.geometries_[t],Et.CHANGE,this.changed,this)},jr.prototype.listenGeometriesChange_=function(){var t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)vt.listen(this.geometries_[t],Et.CHANGE,this.changed,this)},jr.prototype.clone=function(){var t=new jr(null);return t.setGeometries(this.geometries_),t},jr.prototype.closestPointXY=function(t,e,i,o){if(o<U.closestSquaredDistanceXY(this.getExtent(),t,e))return o;var r,n,s=this.geometries_;for(r=0,n=s.length;r<n;++r)o=s[r].closestPointXY(t,e,i,o);return o},jr.prototype.containsXY=function(t,e){var i,o,r=this.geometries_;for(i=0,o=r.length;i<o;++i)if(r[i].containsXY(t,e))return!0;return!1},jr.prototype.computeExtent=function(t){U.createOrUpdateEmpty(t);for(var e=this.geometries_,i=0,o=e.length;i<o;++i)U.extend(t,e[i].getExtent());return t},jr.prototype.getGeometries=function(){return jr.cloneGeometries_(this.geometries_)},jr.prototype.getGeometriesArray=function(){return this.geometries_},jr.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(nt.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i,o,r=[],n=this.geometries_,s=!1;for(i=0,o=n.length;i<o;++i){var a=n[i],h=a.getSimplifiedGeometry(t);r.push(h),h!==a&&(s=!0)}if(s){var l=new jr(null);return l.setGeometriesArray(r),this.simplifiedGeometryCache[e]=l,l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},jr.prototype.getType=function(){return W.GEOMETRY_COLLECTION},jr.prototype.intersectsExtent=function(t){var e,i,o=this.geometries_;for(e=0,i=o.length;e<i;++e)if(o[e].intersectsExtent(t))return!0;return!1},jr.prototype.isEmpty=function(){return 0===this.geometries_.length},jr.prototype.rotate=function(t,e){for(var i=this.geometries_,o=0,r=i.length;o<r;++o)i[o].rotate(t,e);this.changed()},jr.prototype.scale=function(t,e,i){var o=i;o||(o=U.getCenter(this.getExtent()));for(var r=this.geometries_,n=0,s=r.length;n<s;++n)r[n].scale(t,e,o);this.changed()},jr.prototype.setGeometries=function(t){this.setGeometriesArray(jr.cloneGeometries_(t))},jr.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},jr.prototype.applyTransform=function(t){var e,i,o=this.geometries_;for(e=0,i=o.length;e<i;++e)o[e].applyTransform(t);this.changed()},jr.prototype.translate=function(t,e){var i,o,r=this.geometries_;for(i=0,o=r.length;i<o;++i)r[i].translate(t,e);this.changed()},jr.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),Yo.prototype.disposeInternal.call(this)};var kr=jr,Gr={point:function(t,e,i,o,r,n,s){var a,h,l=t[e],p=t[e+1],u=t[i]-l,c=t[i+1]-p;if(0===u&&0===c)h=e;else{var f=((r-l)*u+(n-p)*c)/(u*u+c*c);if(f>1)h=i;else{if(f>0){for(a=0;a<o;++a)s[a]=A.lerp(t[e+a],t[i+a],f);return void(s.length=o)}h=e}}for(a=0;a<o;++a)s[a]=t[h+a];s.length=o},getMaxSquaredDelta:function(t,e,i,o,r){var n=t[e],s=t[e+1];for(e+=o;e<i;e+=o){var a=t[e],h=t[e+1],l=A.squaredDistance(n,s,a,h);l>r&&(r=l),n=a,s=h}return r},getsMaxSquaredDelta:function(t,e,i,o,r){var n,s;for(n=0,s=i.length;n<s;++n){var a=i[n];r=Gr.getMaxSquaredDelta(t,e,a,o,r),e=a}return r},getssMaxSquaredDelta:function(t,e,i,o,r){var n,s;for(n=0,s=i.length;n<s;++n){var a=i[n];r=Gr.getsMaxSquaredDelta(t,e,a,o,r),e=a[a.length-1]}return r},getClosestPoint:function(t,e,i,o,r,n,s,a,h,l,p){if(e==i)return l;var u,c;if(0===r){if((c=A.squaredDistance(s,a,t[e],t[e+1]))<l){for(u=0;u<o;++u)h[u]=t[e+u];return h.length=o,c}return l}for(var f=p||[NaN,NaN],d=e+o;d<i;)if(Gr.point(t,d-o,d,o,s,a,f),(c=A.squaredDistance(s,a,f[0],f[1]))<l){for(l=c,u=0;u<o;++u)h[u]=f[u];h.length=o,d+=o}else d+=o*Math.max((Math.sqrt(c)-Math.sqrt(l))/r|0,1);if(n&&(Gr.point(t,i-o,e,o,s,a,f),(c=A.squaredDistance(s,a,f[0],f[1]))<l)){for(l=c,u=0;u<o;++u)h[u]=f[u];h.length=o}return l},getsClosestPoint:function(t,e,i,o,r,n,s,a,h,l,p){var u,c,f=p||[NaN,NaN];for(u=0,c=i.length;u<c;++u){var d=i[u];l=Gr.getClosestPoint(t,e,d,o,r,n,s,a,h,l,f),e=d}return l},getssClosestPoint:function(t,e,i,o,r,n,s,a,h,l,p){var u,c,f=p||[NaN,NaN];for(u=0,c=i.length;u<c;++u){var d=i[u];l=Gr.getsClosestPoint(t,e,d,o,r,n,s,a,h,l,f),e=d[d.length-1]}return l}},Ur=Gr,Br={coordinates:function(t,e,i,o,r){var n,s=void 0!==r?r:[],a=0;for(n=e;n<i;n+=o)s[a++]=t.slice(n,n+o);return s.length=a,s},coordinatess:function(t,e,i,o,r){var n,s,a=void 0!==r?r:[],h=0;for(n=0,s=i.length;n<s;++n){var l=i[n];a[h++]=Br.coordinates(t,e,l,o,a[h]),e=l}return a.length=h,a},coordinatesss:function(t,e,i,o,r){var n,s,a=void 0!==r?r:[],h=0;for(n=0,s=i.length;n<s;++n){var l=i[n];a[h++]=Br.coordinatess(t,e,l,o,a[h]),e=l[l.length-1]}return a.length=h,a}},Vr=Br,Wr={lineString:function(t,e,i,o,r,n){var s=NaN,a=NaN,h=(i-e)/o;if(1===h)s=t[e],a=t[e+1];else if(2==h)s=(1-r)*t[e]+r*t[e+o],a=(1-r)*t[e+1]+r*t[e+o+1];else if(0!==h){var l,p=t[e],u=t[e+1],c=0,f=[0];for(l=e+o;l<i;l+=o){var d=t[l],y=t[l+1];c+=Math.sqrt((d-p)*(d-p)+(y-u)*(y-u)),f.push(c),p=d,u=y}var g=r*c,v=Xt.binarySearch(f,g);if(v<0){var m=(g-f[-v-2])/(f[-v-1]-f[-v-2]),_=e+(-v-2)*o;s=A.lerp(t[_],t[_+o],m),a=A.lerp(t[_+1],t[_+o+1],m)}else s=t[e+v*o],a=t[e+v*o+1]}return n?(n[0]=s,n[1]=a,n):[s,a]},lineStringCoordinateAtM:function(t,e,i,o,r,n){if(i==e)return null;var s;if(r<t[e+o-1])return n?((s=t.slice(e,e+o))[o-1]=r,s):null;if(t[i-1]<r)return n?((s=t.slice(i-o,i))[o-1]=r,s):null;if(r==t[e+o-1])return t.slice(e,e+o);for(var a=e/o,h=i/o;a<h;){var l=a+h>>1;r<t[(l+1)*o-1]?h=l:a=l+1}var p=t[a*o-1];if(r==p)return t.slice((a-1)*o,(a-1)*o+o);var u,c=(r-p)/(t[(a+1)*o-1]-p);for(s=[],u=0;u<o-1;++u)s.push(A.lerp(t[(a-1)*o+u],t[a*o+u],c));return s.push(r),s},lineStringsCoordinateAtM:function(t,e,i,o,r,n,s){if(s)return Wr.lineStringCoordinateAtM(t,e,i[i.length-1],o,r,n);var a,h,l;if(r<t[o-1])return n?((a=t.slice(0,o))[o-1]=r,a):null;if(t[t.length-1]<r)return n?((a=t.slice(t.length-o))[o-1]=r,a):null;for(h=0,l=i.length;h<l;++h){var p=i[h];if(e!=p){if(r<t[e+o-1])return null;if(r<=t[p-1])return Wr.lineStringCoordinateAtM(t,e,p,o,r,!1);e=p}}return null}},Xr=Wr,Yr={linearRingContainsExtent:function(t,e,i,o,r){return!U.forEachCorner(r,function(r){return!Yr.linearRingContainsXY(t,e,i,o,r[0],r[1])})},linearRingContainsXY:function(t,e,i,o,r,n){for(var s=0,a=t[i-o],h=t[i-o+1];e<i;e+=o){var l=t[e],p=t[e+1];h<=n?p>n&&(l-a)*(n-h)-(r-a)*(p-h)>0&&s++:p<=n&&(l-a)*(n-h)-(r-a)*(p-h)<0&&s--,a=l,h=p}return 0!==s},linearRingsContainsXY:function(t,e,i,o,r,n){if(0===i.length)return!1;if(!Yr.linearRingContainsXY(t,e,i[0],o,r,n))return!1;var s,a;for(s=1,a=i.length;s<a;++s)if(Yr.linearRingContainsXY(t,i[s-1],i[s],o,r,n))return!1;return!0},linearRingssContainsXY:function(t,e,i,o,r,n){if(0===i.length)return!1;var s,a;for(s=0,a=i.length;s<a;++s){var h=i[s];if(Yr.linearRingsContainsXY(t,e,h,o,r,n))return!0;e=h[h.length-1]}return!1}},zr=Yr,Kr={forEach:function(t,e,i,o,r,n){for(var s,a=[t[e],t[e+1]],h=[];e+o<i;e+=o){if(h[0]=t[e+o],h[1]=t[e+o+1],s=r.call(n,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}},Hr=Kr,$r={lineString:function(t,e,i,o,r){var n=U.extendFlatCoordinates(U.createEmpty(),t,e,i,o);return!!U.intersects(r,n)&&(!!U.containsExtent(r,n)||(n[0]>=r[0]&&n[2]<=r[2]||(n[1]>=r[1]&&n[3]<=r[3]||Hr.forEach(t,e,i,o,function(t,e){return U.intersectsSegment(r,t,e)}))))},lineStrings:function(t,e,i,o,r){var n,s;for(n=0,s=i.length;n<s;++n){if($r.lineString(t,e,i[n],o,r))return!0;e=i[n]}return!1},linearRing:function(t,e,i,o,r){return!!$r.lineString(t,e,i,o,r)||(!!zr.linearRingContainsXY(t,e,i,o,r[0],r[1])||(!!zr.linearRingContainsXY(t,e,i,o,r[0],r[3])||(!!zr.linearRingContainsXY(t,e,i,o,r[2],r[1])||!!zr.linearRingContainsXY(t,e,i,o,r[2],r[3]))))},linearRings:function(t,e,i,o,r){if(!$r.linearRing(t,e,i[0],o,r))return!1;if(1===i.length)return!0;var n,s;for(n=1,s=i.length;n<s;++n)if(zr.linearRingContainsExtent(t,i[n-1],i[n],o,r))return!1;return!0},linearRingss:function(t,e,i,o,r){var n,s;for(n=0,s=i.length;n<s;++n){var a=i[n];if($r.linearRings(t,e,a,o,r))return!0;e=a[a.length-1]}return!1}},qr=$r,Zr={lineString:function(t,e,i,o){var r,n=t[e],s=t[e+1],a=0;for(r=e+o;r<i;r+=o){var h=t[r],l=t[r+1];a+=Math.sqrt((h-n)*(h-n)+(l-s)*(l-s)),n=h,s=l}return a},linearRing:function(t,e,i,o){var r=Zr.lineString(t,e,i,o),n=t[i-o]-t[e],s=t[i-o+1]-t[e+1];return r+=Math.sqrt(n*n+s*s)}},Jr=Zr,Qr={lineString:function(t,e,i,o,r,n,s){var a=void 0!==s?s:[];return n||(i=Qr.radialDistance(t,e,i,o,r,a,0),t=a,e=0,o=2),a.length=Qr.douglasPeucker(t,e,i,o,r,a,0),a},douglasPeucker:function(t,e,i,o,r,n,s){var a=(i-e)/o;if(a<3){for(;e<i;e+=o)n[s++]=t[e],n[s++]=t[e+1];return s}var h=new Array(a);h[0]=1,h[a-1]=1;for(var l,p=[e,i-o],u=0;p.length>0;){var c=p.pop(),f=p.pop(),d=0,y=t[f],g=t[f+1],v=t[c],m=t[c+1];for(l=f+o;l<c;l+=o){var _=t[l],b=t[l+1],x=A.squaredSegmentDistance(_,b,y,g,v,m);x>d&&(u=l,d=x)}d>r&&(h[(u-e)/o]=1,f+o<u&&p.push(f,u),u+o<c&&p.push(u,c))}for(l=0;l<a;++l)h[l]&&(n[s++]=t[e+l*o],n[s++]=t[e+l*o+1]);return s},douglasPeuckers:function(t,e,i,o,r,n,s,a){var h,l;for(h=0,l=i.length;h<l;++h){var p=i[h];s=Qr.douglasPeucker(t,e,p,o,r,n,s),a.push(s),e=p}return s},douglasPeuckerss:function(t,e,i,o,r,n,s,a){var h,l;for(h=0,l=i.length;h<l;++h){var p=i[h],u=[];s=Qr.douglasPeuckers(t,e,p,o,r,n,s,u),a.push(u),e=p[p.length-1]}return s},radialDistance:function(t,e,i,o,r,n,s){if(i<=e+o){for(;e<i;e+=o)n[s++]=t[e],n[s++]=t[e+1];return s}var a=t[e],h=t[e+1];n[s++]=a,n[s++]=h;var l=a,p=h;for(e+=o;e<i;e+=o)l=t[e],p=t[e+1],A.squaredDistance(a,h,l,p)>r&&(n[s++]=l,n[s++]=p,a=l,h=p);return l==a&&p==h||(n[s++]=l,n[s++]=p),s},snap:function(t,e){return e*Math.round(t/e)},quantize:function(t,e,i,o,r,n,s){if(e==i)return s;var a,h,l=Qr.snap(t[e],r),p=Qr.snap(t[e+1],r);e+=o,n[s++]=l,n[s++]=p;do{if(a=Qr.snap(t[e],r),h=Qr.snap(t[e+1],r),(e+=o)==i)return n[s++]=a,n[s++]=h,s}while(a==l&&h==p);for(;e<i;){var u,c;if(u=Qr.snap(t[e],r),c=Qr.snap(t[e+1],r),e+=o,u!=a||c!=h){var f=a-l,d=h-p,y=u-l,g=c-p;f*g==d*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(d<0&&g<d||d==g||d>0&&g>d)?(a=u,h=c):(n[s++]=a,n[s++]=h,l=a,p=h,a=u,h=c)}}return n[s++]=a,n[s++]=h,s},quantizes:function(t,e,i,o,r,n,s,a){var h,l;for(h=0,l=i.length;h<l;++h){var p=i[h];s=Qr.quantize(t,e,p,o,r,n,s),a.push(s),e=p}return s},quantizess:function(t,e,i,o,r,n,s,a){var h,l;for(h=0,l=i.length;h<l;++h){var p=i[h],u=[];s=Qr.quantizes(t,e,p,o,r,n,s,u),a.push(u),e=p[p.length-1]}return s}},tn=Qr,en=function(t,e){Ko.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};C.inherits(en,Ko),en.prototype.appendCoordinate=function(t){this.flatCoordinates?Xt.extend(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},en.prototype.clone=function(){var t=new en(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},en.prototype.closestPointXY=function(t,e,i,o){return o<U.closestSquaredDistanceXY(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ur.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ur.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,o))},en.prototype.forEachSegment=function(t,e){return Hr.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},en.prototype.getCoordinateAtM=function(t,e){if(this.layout!=jo.XYM&&this.layout!=jo.XYZM)return null;var i=void 0!==e&&e;return Xr.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},en.prototype.getCoordinates=function(){return Vr.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},en.prototype.getCoordinateAt=function(t,e){return Xr.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},en.prototype.getLength=function(){return Jr.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},en.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},en.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=tn.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var i=new en(null);return i.setFlatCoordinates(jo.XY,e),i},en.prototype.getType=function(){return W.LINE_STRING},en.prototype.intersectsExtent=function(t){return qr.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},en.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$o.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(jo.XY,null)},en.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var on=en,rn=function(t,e){Ko.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};C.inherits(rn,Ko),rn.prototype.appendLineString=function(t){this.flatCoordinates?Xt.extend(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},rn.prototype.clone=function(){var t=new rn(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},rn.prototype.closestPointXY=function(t,e,i,o){return o<U.closestSquaredDistanceXY(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ur.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ur.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,o))},rn.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=jo.XYM&&this.layout!=jo.XYZM||0===this.flatCoordinates.length)return null;var o=void 0!==e&&e,r=void 0!==i&&i;return Xr.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,t,o,r)},rn.prototype.getCoordinates=function(){return Vr.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},rn.prototype.getEnds=function(){return this.ends_},rn.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;var e=new on(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},rn.prototype.getLineStrings=function(){var t,e,i=this.flatCoordinates,o=this.ends_,r=this.layout,n=[],s=0;for(t=0,e=o.length;t<e;++t){var a=o[t],h=new on(null);h.setFlatCoordinates(r,i.slice(s,a)),n.push(h),s=a}return n},rn.prototype.getFlatMidpoints=function(){var t,e,i=[],o=this.flatCoordinates,r=0,n=this.ends_,s=this.stride;for(t=0,e=n.length;t<e;++t){var a=n[t],h=Xr.lineString(o,r,a,s,.5);Xt.extend(i,h),r=a}return i},rn.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=tn.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i);var o=new rn(null);return o.setFlatCoordinates(jo.XY,e,i),o},rn.prototype.getType=function(){return W.MULTI_LINE_STRING},rn.prototype.intersectsExtent=function(t){return qr.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,t)},rn.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=$o.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(jo.XY,null,this.ends_)},rn.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},rn.prototype.setLineStrings=function(t){var e,i,o=this.getLayout(),r=[],n=[];for(e=0,i=t.length;e<i;++e){var s=t[e];0===e&&(o=s.getLayout()),Xt.extend(r,s.getFlatCoordinates()),n.push(r.length)}this.setFlatCoordinates(o,r,n)};var nn=rn,sn=function(t,e){Ko.call(this),this.setCoordinates(t,e)};C.inherits(sn,Ko),sn.prototype.clone=function(){var t=new sn(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},sn.prototype.closestPointXY=function(t,e,i,o){var r=this.flatCoordinates,n=A.squaredDistance(t,e,r[0],r[1]);if(n<o){var s,a=this.stride;for(s=0;s<a;++s)i[s]=r[s];return i.length=a,n}return o},sn.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},sn.prototype.computeExtent=function(t){return U.createOrUpdateFromCoordinate(this.flatCoordinates,t)},sn.prototype.getType=function(){return W.POINT},sn.prototype.intersectsExtent=function(t){return U.containsXY(t,this.flatCoordinates[0],this.flatCoordinates[1])},sn.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$o.coordinate(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(jo.XY,null)},sn.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var an=sn,hn=function(t,e){Ko.call(this),this.setCoordinates(t,e)};C.inherits(hn,Ko),hn.prototype.appendPoint=function(t){this.flatCoordinates?Xt.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},hn.prototype.clone=function(){var t=new hn(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},hn.prototype.closestPointXY=function(t,e,i,o){if(o<U.closestSquaredDistanceXY(this.getExtent(),t,e))return o;var r,n,s,a=this.flatCoordinates,h=this.stride;for(r=0,n=a.length;r<n;r+=h){var l=A.squaredDistance(t,e,a[r],a[r+1]);if(l<o){for(o=l,s=0;s<h;++s)i[s]=a[r+s];i.length=h}}return o},hn.prototype.getCoordinates=function(){return Vr.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},hn.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(t<0||e<=t)return null;var i=new an(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),i},hn.prototype.getPoints=function(){var t,e,i=this.flatCoordinates,o=this.layout,r=this.stride,n=[];for(t=0,e=i.length;t<e;t+=r){var s=new an(null);s.setFlatCoordinates(o,i.slice(t,t+r)),n.push(s)}return n},hn.prototype.getType=function(){return W.MULTI_POINT},hn.prototype.intersectsExtent=function(t){var e,i,o,r,n=this.flatCoordinates,s=this.stride;for(e=0,i=n.length;e<i;e+=s)if(o=n[e],r=n[e+1],U.containsXY(t,o,r))return!0;return!1},hn.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$o.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(jo.XY,null)},hn.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var ln=hn,pn={linearRing:function(t,e,i,o){for(var r=0,n=t[i-o],s=t[i-o+1];e<i;e+=o){var a=t[e],h=t[e+1];r+=s*a-n*h,n=a,s=h}return r/2},linearRings:function(t,e,i,o){var r,n,s=0;for(r=0,n=i.length;r<n;++r){var a=i[r];s+=pn.linearRing(t,e,a,o),e=a}return s},linearRingss:function(t,e,i,o){var r,n,s=0;for(r=0,n=i.length;r<n;++r){var a=i[r];s+=pn.linearRings(t,e,a,o),e=a[a.length-1]}return s}},un=pn,cn=function(t,e){Ko.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};C.inherits(cn,Ko),cn.prototype.clone=function(){var t=new cn(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},cn.prototype.closestPointXY=function(t,e,i,o){return o<U.closestSquaredDistanceXY(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ur.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ur.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,o))},cn.prototype.getArea=function(){return un.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},cn.prototype.getCoordinates=function(){return Vr.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},cn.prototype.getSimplifiedGeometryInternal=function(t){var e=[];e.length=tn.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);var i=new cn(null);return i.setFlatCoordinates(jo.XY,e),i},cn.prototype.getType=function(){return W.LINEAR_RING},cn.prototype.intersectsExtent=function(t){},cn.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=$o.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(jo.XY,null)},cn.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()};var fn=cn,dn={linearRings:function(t,e,i,o,r,n,s){for(var a,h,l,p,u,c,f,d=r[n+1],y=[],g=0,v=i.length;g<v;++g){var m=i[g];for(p=t[m-o],c=t[m-o+1],a=e;a<m;a+=o)u=t[a],f=t[a+1],(d<=c&&f<=d||c<=d&&d<=f)&&(l=(d-c)/(f-c)*(u-p)+p,y.push(l)),p=u,c=f}var _=NaN,b=-1/0;for(y.sort(Xt.numberSafeCompareFunction),p=y[0],a=1,h=y.length;a<h;++a){u=y[a];var x=Math.abs(u-p);x>b&&(l=(p+u)/2,zr.linearRingsContainsXY(t,e,i,o,l,d)&&(_=l,b=x)),p=u}return isNaN(_)&&(_=r[n]),s?(s.push(_,d,b),s):[_,d,b]},linearRingss:function(t,e,i,o,r){var n,s,a=[];for(n=0,s=i.length;n<s;++n){var h=i[n];a=dn.linearRings(t,e,h,o,r,2*n,a),e=h[h.length-1]}return a}},yn=dn,gn={coordinates:function(t,e,i,o){for(;e<i-o;){var r;for(r=0;r<o;++r){var n=t[e+r];t[e+r]=t[i-o+r],t[i-o+r]=n}e+=o,i-=o}}},vn=gn,mn={linearRingIsClockwise:function(t,e,i,o){for(var r=0,n=t[i-o],s=t[i-o+1];e<i;e+=o){var a=t[e],h=t[e+1];r+=(a-n)*(h+s),n=a,s=h}return r>0},linearRingsAreOriented:function(t,e,i,o,r){var n,s,a=void 0!==r&&r;for(n=0,s=i.length;n<s;++n){var h=i[n],l=mn.linearRingIsClockwise(t,e,h,o);if(0===n){if(a&&l||!a&&!l)return!1}else if(a&&!l||!a&&l)return!1;e=h}return!0},linearRingssAreOriented:function(t,e,i,o,r){var n,s;for(n=0,s=i.length;n<s;++n)if(!mn.linearRingsAreOriented(t,e,i[n],o,r))return!1;return!0},orientLinearRings:function(t,e,i,o,r){var n,s,a=void 0!==r&&r;for(n=0,s=i.length;n<s;++n){var h=i[n],l=mn.linearRingIsClockwise(t,e,h,o);(0===n?a&&l||!a&&!l:a&&!l||!a&&l)&&vn.coordinates(t,e,h,o),e=h}return e},orientLinearRingss:function(t,e,i,o,r){var n,s;for(n=0,s=i.length;n<s;++n)e=mn.orientLinearRings(t,e,i[n],o,r);return e}},_n=mn,bn=function(t,e){Ko.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};C.inherits(bn,Ko),bn.prototype.appendLinearRing=function(t){this.flatCoordinates?Xt.extend(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},bn.prototype.clone=function(){var t=new bn(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},bn.prototype.closestPointXY=function(t,e,i,o){return o<U.closestSquaredDistanceXY(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ur.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ur.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,o))},bn.prototype.containsXY=function(t,e){return zr.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},bn.prototype.getArea=function(){return un.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},bn.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),_n.orientLinearRings(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Vr.coordinatess(e,0,this.ends_,this.stride)},bn.prototype.getEnds=function(){return this.ends_},bn.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=U.getCenter(this.getExtent());this.flatInteriorPoint_=yn.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},bn.prototype.getInteriorPoint=function(){return new an(this.getFlatInteriorPoint(),jo.XYM)},bn.prototype.getLinearRingCount=function(){return this.ends_.length},bn.prototype.getLinearRing=function(t){if(t<0||this.ends_.length<=t)return null;var e=new fn(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},bn.prototype.getLinearRings=function(){var t,e,i=this.layout,o=this.flatCoordinates,r=this.ends_,n=[],s=0;for(t=0,e=r.length;t<e;++t){var a=r[t],h=new fn(null);h.setFlatCoordinates(i,o.slice(s,a)),n.push(h),s=a}return n},bn.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;_n.linearRingsAreOriented(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=_n.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},bn.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=tn.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i);var o=new bn(null);return o.setFlatCoordinates(jo.XY,e,i),o},bn.prototype.getType=function(){return W.POLYGON},bn.prototype.intersectsExtent=function(t){return qr.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},bn.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=$o.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(jo.XY,null,this.ends_)},bn.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},bn.circular=function(t,e,i,o){var r,n=o||32,s=[];for(r=0;r<n;++r)Xt.extend(s,t.offset(e,i,2*Math.PI*r/n));s.push(s[0],s[1]);var a=new bn(null);return a.setFlatCoordinates(jo.XY,s,[s.length]),a},bn.fromExtent=function(t){var e=t[0],i=t[1],o=t[2],r=t[3],n=[e,i,e,r,o,r,o,i,e,i],s=new bn(null);return s.setFlatCoordinates(jo.XY,n,[n.length]),s},bn.fromCircle=function(t,e,i){for(var o=e||32,r=t.getStride(),n=t.getLayout(),s=new bn(null,n),a=r*(o+1),h=new Array(a),l=0;l<a;l++)h[l]=0;var p=[h.length];return s.setFlatCoordinates(n,h,p),bn.makeRegular(s,t.getCenter(),t.getRadius(),i),s},bn.makeRegular=function(t,e,i,o){for(var r,n,s=t.getFlatCoordinates(),a=t.getLayout(),h=t.getStride(),l=t.getEnds(),p=s.length/h-1,u=o||0,c=0;c<=p;++c)n=c*h,r=u+2*A.modulo(c,p)*Math.PI/p,s[n]=e[0]+i*Math.cos(r),s[n+1]=e[1]+i*Math.sin(r);t.setFlatCoordinates(a,s,l)};var xn=bn,En={linearRingss:function(t,e,i,o){var r,n,s=[],a=U.createEmpty();for(r=0,n=i.length;r<n;++r){var h=i[r];a=U.createOrUpdateFromFlatCoordinates(t,e,h[0],o),s.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=h[h.length-1]}return s}},Sn=En,Tn=function(t,e){Ko.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};C.inherits(Tn,Ko),Tn.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i,o,r=this.flatCoordinates.length;for(Xt.extend(this.flatCoordinates,t.getFlatCoordinates()),i=0,o=(e=t.getEnds().slice()).length;i<o;++i)e[i]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},Tn.prototype.clone=function(){for(var t=new Tn(null),e=this.endss_.length,i=new Array(e),o=0;o<e;++o)i[o]=this.endss_[o].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),t},Tn.prototype.closestPointXY=function(t,e,i,o){return o<U.closestSquaredDistanceXY(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ur.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ur.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,o))},Tn.prototype.containsXY=function(t,e){return zr.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},Tn.prototype.getArea=function(){return un.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},Tn.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),_n.orientLinearRingss(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Vr.coordinatesss(e,0,this.endss_,this.stride)},Tn.prototype.getEndss=function(){return this.endss_},Tn.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Sn.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=yn.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},Tn.prototype.getInteriorPoints=function(){var t=new ln(null);return t.setFlatCoordinates(jo.XYM,this.getFlatInteriorPoints().slice()),t},Tn.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;_n.linearRingssAreOriented(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=_n.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},Tn.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=tn.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i);var o=new Tn(null);return o.setFlatCoordinates(jo.XY,e,i),o},Tn.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var o,r,n=this.endss_[t].slice(),s=n[n.length-1];if(0!==e)for(o=0,r=n.length;o<r;++o)n[o]-=e;var a=new xn(null);return a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,s),n),a},Tn.prototype.getPolygons=function(){var t,e,i,o,r=this.layout,n=this.flatCoordinates,s=this.endss_,a=[],h=0;for(t=0,e=s.length;t<e;++t){var l=s[t].slice(),p=l[l.length-1];if(0!==h)for(i=0,o=l.length;i<o;++i)l[i]-=h;var u=new xn(null);u.setFlatCoordinates(r,n.slice(h,p),l),a.push(u),h=p}return a},Tn.prototype.getType=function(){return W.MULTI_POLYGON},Tn.prototype.intersectsExtent=function(t){return qr.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},Tn.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=$o.coordinatesss(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=0===o.length?0:o[o.length-1]}this.changed()}else this.setFlatCoordinates(jo.XY,null,this.endss_)},Tn.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.endss_=i,this.changed()},Tn.prototype.setPolygons=function(t){var e,i,o,r=this.getLayout(),n=[],s=[];for(e=0,i=t.length;e<i;++e){var a=t[e];0===e&&(r=a.getLayout());var h,l,p=n.length;for(h=0,l=(o=a.getEnds()).length;h<l;++h)o[h]+=p;Xt.extend(n,a.getFlatCoordinates()),s.push(o)}this.setFlatCoordinates(r,n,s)};var wn,Cn=Tn;
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/function Rn(t,e){var i=Array.isArray(t)?t:[t,e];return new an(i)}function Pn(t){return new on(t)}function In(t){return new xn(t)}function Mn(t){return new ln(t)}function Ln(t){return new nn(t)}function An(t){return new Cn(t)}function On(t){return new kr(t)}function Fn(t,e){return xn.circular(Le,t,e)}function Nn(t){return[Fe.MULTI_POINT,Fe.MULTI_LINE_STRING,Fe.MULTI_POLYGON,Fe.GEOMETRY_COLLECTION].includes(t.type||t.getType())}function Dn(t){t instanceof Zo&&(t=Rn(t.getCenter()));var e=t.type||t.getType();return!1===[Fe.GEOMETRY_COLLECTION].includes(e)?t:(t.geometries||t.getGeometries())[0]}function jn(t){var e=Dn(t),i=Dr({type:e.type||e.getType(),coordinates:e.coordinates||e.getCoordinates()});if(i&&i.geometry)return i.geometry.coordinates}
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var kn=lt.transform,Gn=lt.transformExtent;lt.get,lt.addProjection;function Un(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return lt.toLonLat(t,e)}function Bn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return lt.fromLonLat(t,e)}function Vn(t,e,i){return kn(t,e,i)}function Wn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Un(t,e)})}function Xn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Bn(t,e)})}function Yn(t,e,i){return t.map(function(t){return kn(t,e,i)})}function zn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Wn(t,e)})}function Kn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Xn(t,e)})}function Hn(t,e,i){return t.map(function(t){return Yn(t,e,i)})}function $n(t,e,i){return t.map(function(t){return Vn(t,e,i)})}function qn(t,e,i){return t.map(function(t){return Yn(t,e,i)})}function Zn(t,e,i){return t.map(function(t){return Hn(t,e,i)})}var Jn=(wn={},xo()(wn,Fe.POINT,{toLonLat:Un,fromLonLat:Bn,transform:Vn}),xo()(wn,Fe.LINE_STRING,{toLonLat:Wn,fromLonLat:Xn,transform:Yn}),xo()(wn,Fe.POLYGON,{toLonLat:zn,fromLonLat:Kn,transform:Hn}),xo()(wn,Fe.MULTI_POINT,{toLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Un(t,e)})},fromLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Bn(t,e)})},transform:$n}),xo()(wn,Fe.MULTI_LINE_STRING,{toLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Wn(t,e)})},fromLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Xn(t,e)})},transform:qn}),xo()(wn,Fe.MULTI_POLYGON,{toLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return zn(t,e)})},fromLonLat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe;return t.map(function(t){return Kn(t,e)})},transform:Zn}),wn);class Qn extends Bi{constructor(t,e,i){super(),this.addHandler=t,this.removeHandler=e,this.selector=i}static create(t,e,i){return new Qn(t,e,i)}_subscribe(t){const e=this.removeHandler,i=this.selector?(...e)=>{this._callSelector(t,e)}:function(e){t.next(e)},o=this._callAddHandler(i,t);Ei(e)&&t.add(new Mi(()=>{e(i,o)}))}_callSelector(t,e){try{const i=this.selector(...e);t.next(i)}catch(e){t.error(e)}}_callAddHandler(t,e){try{return this.addHandler(t)||null}catch(t){e.error(t)}}}const ts=Qn.create;class es extends Bi{constructor(t,e){super(),this.value=t,this.scheduler=e,this._isScalar=!0,e&&(this._isScalar=!1)}static create(t,e){return new es(t,e)}static dispatch(t){const{done:e,value:i,subscriber:o}=t;e?o.complete():(o.next(i),o.closed||(t.done=!0,this.schedule(t)))}_subscribe(t){const e=this.value,i=this.scheduler;if(i)return i.schedule(es.dispatch,0,{done:!1,value:e,subscriber:t});t.next(e),t.closed||t.complete()}}class is extends Bi{constructor(t){super(),this.scheduler=t}static create(t){return new is(t)}static dispatch(t){const{subscriber:e}=t;e.complete()}_subscribe(t){const e=this.scheduler;if(e)return e.schedule(is.dispatch,0,{subscriber:t});t.complete()}}function os(t){return t&&"function"==typeof t.schedule}class rs extends Bi{constructor(t,e){super(),this.array=t,this.scheduler=e,e||1!==t.length||(this._isScalar=!0,this.value=t[0])}static create(t,e){return new rs(t,e)}static of(...t){let e=t[t.length-1];os(e)?t.pop():e=null;const i=t.length;return i>1?new rs(t,e):1===i?new es(t[0],e):new is(e)}static dispatch(t){const{array:e,index:i,count:o,subscriber:r}=t;i>=o?r.complete():(r.next(e[i]),r.closed||(t.index=i+1,this.schedule(t)))}_subscribe(t){const e=this.array,i=e.length,o=this.scheduler;if(o)return o.schedule(rs.dispatch,0,{array:e,index:0,count:i,subscriber:t});for(let o=0;o<i&&!t.closed;o++)t.next(e[o]);t.complete()}}class ns{constructor(t,e,i=Number.POSITIVE_INFINITY){this.project=t,this.resultSelector=e,this.concurrent=i}call(t,e){return e.subscribe(new ss(t,this.project,this.resultSelector,this.concurrent))}}class ss extends ir{constructor(t,e,i,o=Number.POSITIVE_INFINITY){super(t),this.project=e,this.resultSelector=i,this.concurrent=o,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,i)}_innerSub(t,e,i){this.add(sr(this,t,e,i))}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()}notifyNext(t,e,i,o,r){this.resultSelector?this._notifyResultSelector(t,e,i,o):this.destination.next(e)}_notifyResultSelector(t,e,i,o){let r;try{r=this.resultSelector(t,e,i,o)}catch(t){return void this.destination.error(t)}this.destination.next(r)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function as(t){return t}function hs(t=Number.POSITIVE_INFINITY){return function(t,e,i=Number.POSITIVE_INFINITY){return function(o){return"number"==typeof e&&(i=e,e=null),o.lift(new ns(t,e,i))}}(as,null,t)}function ls(...t){let e=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return os(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof o&&(e=t.pop()),null===i&&1===t.length&&t[0]instanceof Bi?t[0]:hs(e)(new rs(t,i))}
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var ps,us,cs=function t(e,i,o){return Array.isArray(i)?ls.call.apply(ls,[Bi].concat(no()(i.map(function(i){var o=void 0,r=void 0;return"object"===(void 0===i?"undefined":fi()(i))?(o=i.event,r=i.selector):o=i,t(e,o,r)})))):ts.call(Bi,function(t){return e.on(i,t)},function(t){return e.un(i,t)},o)},fs={};fs.HEX_COLOR_RE_=/^#(?:[0-9a-f]{3,4}){1,2}$/i,fs.NAMED_COLOR_RE_=/^([a-z]*)$/i,fs.asArray=function(t){return Array.isArray(t)?t:fs.fromString(t)},fs.asString=function(t){return"string"==typeof t?t:fs.toString(t)},fs.fromNamed=function(t){var e=document.createElement("div");e.style.color=t,document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i},fs.fromString=(ps={},us=0,function(t){var e;if(ps.hasOwnProperty(t))e=ps[t];else{if(us>=1024){var i,o=0;for(i in ps)0==(3&o++)&&(delete ps[i],--us)}e=fs.fromStringInternal_(t),ps[t]=e,++us}return e}),fs.fromStringInternal_=function(t){var e,i,o,r,n,s;if(fs.NAMED_COLOR_RE_.exec(t)&&(t=fs.fromNamed(t)),fs.HEX_COLOR_RE_.exec(t)){var a,h=t.length-1;a=h<=4?1:2;var l=4===h||8===h;e=parseInt(t.substr(1+0*a,a),16),i=parseInt(t.substr(1+1*a,a),16),o=parseInt(t.substr(1+2*a,a),16),r=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,i=(i<<4)+i,o=(o<<4)+o,l&&(r=(r<<4)+r)),n=[e,i,o,r/255]}else 0==t.indexOf("rgba(")?(s=t.slice(5,-1).split(",").map(Number),n=fs.normalize(s)):0==t.indexOf("rgb(")?((s=t.slice(4,-1).split(",").map(Number)).push(1),n=fs.normalize(s)):M.assert(!1,14);return n},fs.normalize=function(t,e){var i=e||[];return i[0]=A.clamp(t[0]+.5|0,0,255),i[1]=A.clamp(t[1]+.5|0,0,255),i[2]=A.clamp(t[2]+.5|0,0,255),i[3]=A.clamp(t[3],0,1),i},fs.toString=function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+e+","+i+","+o+","+(void 0===t[3]?1:t[3])+")"};var ds=fs,ys={asColorLike:function(t){return ys.isColorLike(t)?t:ds.asString(t)},isColorLike:function(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}},gs=ys,vs={ONE:1,SRC_ALPHA:770,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,TRIANGLES:4,TRIANGLE_STRIP:5,ONE_MINUS_SRC_ALPHA:771,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,CULL_FACE:2884,BLEND:3042,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126,RGBA:6408,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,LINK_STATUS:35714,LINEAR:9729,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE0:33984,CLAMP_TO_EDGE:33071,COMPILE_STATUS:35713,FRAMEBUFFER:36160,CONTEXT_IDS_:["experimental-webgl","webgl","webkit-3d","moz-webgl"],getContext:function(t,e){var i,o,r=vs.CONTEXT_IDS_.length;for(o=0;o<r;++o)try{if(i=t.getContext(vs.CONTEXT_IDS_[o],e))return i}catch(t){}return null}},ms=vs,_s={},bs="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";_s.FIREFOX=-1!==bs.indexOf("firefox"),_s.SAFARI=-1!==bs.indexOf("safari")&&-1==bs.indexOf("chrom"),_s.WEBKIT=-1!==bs.indexOf("webkit")&&-1==bs.indexOf("edge"),_s.MAC=-1!==bs.indexOf("macintosh"),_s.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,_s.CANVAS_LINE_DASH=!1,_s.CANVAS=C.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d");return!!t&&(void 0!==t.setLineDash&&(_s.CANVAS_LINE_DASH=!0),!0)}catch(t){return!1}}(),_s.DEVICE_ORIENTATION="DeviceOrientationEvent"in window,_s.GEOLOCATION="geolocation"in navigator,_s.TOUCH=C.ASSUME_TOUCH||"ontouchstart"in window,_s.POINTER="PointerEvent"in window,_s.MSPOINTER=!!navigator.msPointerEnabled,_s.WEBGL,function(){if(C.ENABLE_WEBGL){var t,e=!1,i=[];if("WebGLRenderingContext"in window)try{var o=document.createElement("CANVAS"),r=ms.getContext(o,{failIfMajorPerformanceCaveat:!0});r&&(e=!0,t=r.getParameter(r.MAX_TEXTURE_SIZE),i=r.getSupportedExtensions())}catch(t){}_s.WEBGL=e,C.WEBGL_EXTENSIONS=i,C.WEBGL_MAX_TEXTURE_SIZE=t}}();var xs=_s,Es={IDLE:0,LOADING:1,LOADED:2,ERROR:3},Ss={CLASS_HIDDEN:"ol-hidden",CLASS_SELECTABLE:"ol-selectable",CLASS_UNSELECTABLE:"ol-unselectable",CLASS_UNSUPPORTED:"ol-unsupported",CLASS_CONTROL:"ol-control"};Ss.getFontFamilies=function(){var t,e={};return function(i){if(t||(t=document.createElement("div").style),!(i in e)){t.font=i;var o=t.fontFamily;if(t.font="",!o)return null;e[i]=o.split(/,\s?/)}return e[i]}}();var Ts,ws,Cs=Ss,Rs={};Rs.defaultFont="10px sans-serif",Rs.defaultFillStyle=[0,0,0,1],Rs.defaultLineCap="round",Rs.defaultLineDash=[],Rs.defaultLineDashOffset=0,Rs.defaultLineJoin="round",Rs.defaultMiterLimit=10,Rs.defaultStrokeStyle=[0,0,0,1],Rs.defaultTextAlign="center",Rs.defaultTextBaseline="middle",Rs.defaultPadding=[0,0,0,0],Rs.defaultLineWidth=1,Rs.labelCache=new Mt,Rs.checkedFonts_={},Rs.measureContext_=null,Rs.textHeights_={},Rs.checkFont=function(){var t,e,i=60,o=Rs.checkedFonts_,r=Rs.labelCache,n="32px monospace",s="wmytzilWMYTZIL@#/&?$%10";function a(t){var i=Rs.getMeasureContext();i.font=n,e=i.measureText(s).width;var o=!0;"monospace"!=t&&(i.font="32px "+t+",monospace",o=i.measureText(s).width!=e);return o}function h(){var e=!0;for(var n in o)o[n]<i&&(a(n)?(o[n]=i,nt.clear(Rs.textHeights_),Rs.measureContext_=null,r.clear()):(++o[n],e=!1));e&&(window.clearInterval(t),t=void 0)}return function(e){var r=Cs.getFontFamilies(e);if(r)for(var n=0,s=r.length;n<s;++n){var l=r[n];l in o||(o[l]=i,a(l)||(o[l]=0,void 0===t&&(t=window.setInterval(h,32))))}}}(),Rs.getMeasureContext=function(){var t=Rs.measureContext_;return t||(t=Rs.measureContext_=Ct.createCanvasContext2D(1,1)),t},Rs.measureTextHeight=(ws=Rs.textHeights_,function(t){var e=ws[t];return void 0==e&&(Ts||((Ts=document.createElement("span")).textContent="M",Ts.style.margin=Ts.style.padding="0 !important",Ts.style.position="absolute !important",Ts.style.left="-99999px !important"),Ts.style.font=t,document.body.appendChild(Ts),e=ws[t]=Ts.offsetHeight,document.body.removeChild(Ts)),e}),Rs.measureTextWidth=function(t,e){var i=Rs.getMeasureContext();return t!=i.font&&(i.font=t),i.measureText(e).width},Rs.rotateAtOffset=function(t,e,i,o){0!==e&&(t.translate(i,o),t.rotate(e),t.translate(-i,-o))},Rs.resetTransform_=Wo.create(),Rs.drawImage=function(t,e,i,o,r,n,s,a,h,l,p){var u;1!=i&&(u=t.globalAlpha,t.globalAlpha=u*i),e&&t.setTransform.apply(t,e),t.drawImage(o,r,n,s,a,h,l,s*p,a*p),u&&(t.globalAlpha=u),e&&t.setTransform.apply(t,Rs.resetTransform_)};var Ps=Rs,Is=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};Is.prototype.getOpacity=function(){return this.opacity_},Is.prototype.getRotateWithView=function(){return this.rotateWithView_},Is.prototype.getRotation=function(){return this.rotation_},Is.prototype.getScale=function(){return this.scale_},Is.prototype.getSnapToPixel=function(){return this.snapToPixel_},Is.prototype.getAnchor=function(){},Is.prototype.getImage=function(t){},Is.prototype.getHitDetectionImage=function(t){},Is.prototype.getImageState=function(){},Is.prototype.getImageSize=function(){},Is.prototype.getHitDetectionImageSize=function(){},Is.prototype.getOrigin=function(){},Is.prototype.getSize=function(){},Is.prototype.setOpacity=function(t){this.opacity_=t},Is.prototype.setRotateWithView=function(t){this.rotateWithView_=t},Is.prototype.setRotation=function(t){this.rotation_=t},Is.prototype.setScale=function(t){this.scale_=t},Is.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},Is.prototype.listenImageChange=function(t,e){},Is.prototype.load=function(){},Is.prototype.unlistenImageChange=function(t,e){};var Ms=Is,Ls=function(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_);var e=void 0===t.snapToPixel||t.snapToPixel,i=void 0!==t.rotateWithView&&t.rotateWithView;Ms.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:e})};C.inherits(Ls,Ms),Ls.prototype.clone=function(){var t=new Ls({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},Ls.prototype.getAnchor=function(){return this.anchor_},Ls.prototype.getAngle=function(){return this.angle_},Ls.prototype.getFill=function(){return this.fill_},Ls.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},Ls.prototype.getImage=function(t){return this.canvas_},Ls.prototype.getImageSize=function(){return this.imageSize_},Ls.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},Ls.prototype.getImageState=function(){return Es.LOADED},Ls.prototype.getOrigin=function(){return this.origin_},Ls.prototype.getPoints=function(){return this.points_},Ls.prototype.getRadius=function(){return this.radius_},Ls.prototype.getRadius2=function(){return this.radius2_},Ls.prototype.getSize=function(){return this.size_},Ls.prototype.getStroke=function(){return this.stroke_},Ls.prototype.listenImageChange=function(t,e){},Ls.prototype.load=function(){},Ls.prototype.unlistenImageChange=function(t,e){},Ls.prototype.render_=function(t){var e,i,o="",r="",n=0,s=null,a=0,h=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=Ps.defaultStrokeStyle),i=gs.asColorLike(i),void 0===(h=this.stroke_.getWidth())&&(h=Ps.defaultLineWidth),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),xs.CANVAS_LINE_DASH||(s=null,a=0),void 0===(r=this.stroke_.getLineJoin())&&(r=Ps.defaultLineJoin),void 0===(o=this.stroke_.getLineCap())&&(o=Ps.defaultLineCap),void 0===(n=this.stroke_.getMiterLimit())&&(n=Ps.defaultMiterLimit));var l=2*(this.radius_+h)+1,p={strokeStyle:i,strokeWidth:h,size:l,lineCap:o,lineDash:s,lineDashOffset:a,lineJoin:r,miterLimit:n};if(void 0===t){var u=Ct.createCanvasContext2D(l,l);this.canvas_=u.canvas,e=l=this.canvas_.width,this.draw_(p,u,0,0),this.createHitDetectionCanvas_(p)}else{l=Math.round(l);var c,f=!this.fill_;f&&(c=this.drawHitDetectionCanvas_.bind(this,p));var d=this.getChecksum(),y=t.add(d,l,l,this.draw_.bind(this,p),c);this.canvas_=y.image,this.origin_=[y.offsetX,y.offsetY],e=y.image.width,f?(this.hitDetectionCanvas_=y.hitImage,this.hitDetectionImageSize_=[y.hitImage.width,y.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[l/2,l/2],this.size_=[l,l],this.imageSize_=[e,e]},Ls.prototype.draw_=function(t,e,i,o){var r,n,s;e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(a*=2),r=0;r<=a;r++)n=2*r*Math.PI/a-Math.PI/2+this.angle_,s=r%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(n),t.size/2+s*Math.sin(n))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l=Ps.defaultFillStyle),e.fillStyle=gs.asColorLike(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},Ls.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Ct.createCanvasContext2D(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},Ls.prototype.drawHitDetectionCanvas_=function(t,e,i,o){e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath();var r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var n,s,a,h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(r*=2),n=0;n<=r;n++)a=2*n*Math.PI/r-Math.PI/2+this.angle_,s=n%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=Ps.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},Ls.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]};var As=Ls,Os=function(t){var e=t||{};As.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})};C.inherits(Os,As),Os.prototype.clone=function(){var t=new Os({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},Os.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)};var Fs=Os,Ns=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};Ns.prototype.clone=function(){var t=this.getColor();return new Ns({color:t&&t.slice?t.slice():t||void 0})},Ns.prototype.getColor=function(){return this.color_},Ns.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Ns.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=C.getUid(this.color_).toString():this.checksum_="f"+(this.color_?ds.asString(this.color_):"-")),this.checksum_};var Ds=Ns,js=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};js.prototype.clone=function(){var t=this.getColor();return new js({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},js.prototype.getColor=function(){return this.color_},js.prototype.getLineCap=function(){return this.lineCap_},js.prototype.getLineDash=function(){return this.lineDash_},js.prototype.getLineDashOffset=function(){return this.lineDashOffset_},js.prototype.getLineJoin=function(){return this.lineJoin_},js.prototype.getMiterLimit=function(){return this.miterLimit_},js.prototype.getWidth=function(){return this.width_},js.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},js.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},js.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},js.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},js.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},js.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},js.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},js.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=C.getUid(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var ks=js,Gs=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Gs.defaultGeometryFunction,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};Gs.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new Gs({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},Gs.prototype.getRenderer=function(){return this.renderer_},Gs.prototype.setRenderer=function(t){this.renderer_=t},Gs.prototype.getGeometry=function(){return this.geometry_},Gs.prototype.getGeometryFunction=function(){return this.geometryFunction_},Gs.prototype.getFill=function(){return this.fill_},Gs.prototype.setFill=function(t){this.fill_=t},Gs.prototype.getImage=function(){return this.image_},Gs.prototype.setImage=function(t){this.image_=t},Gs.prototype.getStroke=function(){return this.stroke_},Gs.prototype.setStroke=function(t){this.stroke_=t},Gs.prototype.getText=function(){return this.text_},Gs.prototype.setText=function(t){this.text_=t},Gs.prototype.getZIndex=function(){return this.zIndex_},Gs.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Gs.defaultGeometryFunction,this.geometry_=t},Gs.prototype.setZIndex=function(t){this.zIndex_=t},Gs.createFunction=function(t){var e,i;"function"==typeof t?e=t:(Array.isArray(t)?i=t:(M.assert(t instanceof Gs,41),i=[t]),e=function(){return i});return e},Gs.default_=null,Gs.defaultFunction=function(t,e){if(!Gs.default_){var i=new Ds({color:"rgba(255,255,255,0.4)"}),o=new ks({color:"#3399CC",width:1.25});Gs.default_=[new Gs({image:new Fs({fill:i,stroke:o,radius:5}),fill:i,stroke:o})]}return Gs.default_},Gs.createDefaultEditing=function(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[W.POLYGON]=[new Gs({fill:new Ds({color:[255,255,255,.5]})})],t[W.MULTI_POLYGON]=t[W.POLYGON],t[W.LINE_STRING]=[new Gs({stroke:new ks({color:e,width:5})}),new Gs({stroke:new ks({color:i,width:3})})],t[W.MULTI_LINE_STRING]=t[W.LINE_STRING],t[W.CIRCLE]=t[W.POLYGON].concat(t[W.LINE_STRING]),t[W.POINT]=[new Gs({image:new Fs({radius:6,fill:new Ds({color:i}),stroke:new ks({color:e,width:1.5})}),zIndex:1/0})],t[W.MULTI_POINT]=t[W.POINT],t[W.GEOMETRY_COLLECTION]=t[W.POLYGON].concat(t[W.LINE_STRING],t[W.POINT]),t},Gs.defaultGeometryFunction=function(t){return t.getGeometry()};var Us=Gs,Bs=function(t){if(ee.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,vt.listen(this,ee.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t)if(t instanceof Yo||!t){var e=t;this.setGeometry(e)}else{var i=t;this.setProperties(i)}};C.inherits(Bs,ee),Bs.prototype.clone=function(){var t=new Bs(this.getProperties());t.setGeometryName(this.getGeometryName());var e=this.getGeometry();e&&t.setGeometry(e.clone());var i=this.getStyle();return i&&t.setStyle(i),t},Bs.prototype.getGeometry=function(){return this.get(this.geometryName_)},Bs.prototype.getId=function(){return this.id_},Bs.prototype.getGeometryName=function(){return this.geometryName_},Bs.prototype.getStyle=function(){return this.style_},Bs.prototype.getStyleFunction=function(){return this.styleFunction_},Bs.prototype.handleGeometryChange_=function(){this.changed()},Bs.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(vt.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=vt.listen(t,Et.CHANGE,this.handleGeometryChange_,this)),this.changed()},Bs.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},Bs.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?Bs.createStyleFunction(t):void 0,this.changed()},Bs.prototype.setId=function(t){this.id_=t,this.changed()},Bs.prototype.setGeometryName=function(t){vt.unlisten(this,ee.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,vt.listen(this,ee.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},Bs.createStyleFunction=function(t){var e,i;"function"==typeof t?e=2==t.length?function(e){return t(this,e)}:t:(Array.isArray(t)?i=t:(M.assert(t instanceof Us,41),i=[t]),e=function(){return i});return e};var Vs=Bs,Ws=i("yEsh"),Xs=i.n(Ws),Ys=function(){this.defaultDataProjection=null,this.defaultFeatureProjection=null};Ys.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},Ys.prototype.adaptOptions=function(t){return nt.assign({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},t)},Ys.prototype.getLastExtent=function(){return null},Ys.prototype.getType=function(){},Ys.prototype.readFeature=function(t,e){},Ys.prototype.readFeatures=function(t,e){},Ys.prototype.readGeometry=function(t,e){},Ys.prototype.readProjection=function(t){},Ys.prototype.writeFeature=function(t,e){},Ys.prototype.writeFeatures=function(t,e){},Ys.prototype.writeGeometry=function(t,e){},Ys.transformWithOptions=function(t,e,i){var o,r=i?lt.get(i.featureProjection):null,n=i?lt.get(i.dataProjection):null;if(o=r&&n&&!lt.equivalent(r,n)?t instanceof Yo?(e?t.clone():t).transform(e?r:n,e?n:r):lt.transformExtent(t,n,r):t,e&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);o===t&&(o=o.clone()),o.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t})}return o};var zs=Ys,Ks={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},Hs=function(){zs.call(this)};C.inherits(Hs,zs),Hs.prototype.getObject_=function(t){if("string"==typeof t){var e=JSON.parse(t);return e||null}return null!==t?t:null},Hs.prototype.getType=function(){return Ks.JSON},Hs.prototype.readFeature=function(t,e){return this.readFeatureFromObject(this.getObject_(t),this.getReadOptions(t,e))},Hs.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(this.getObject_(t),this.getReadOptions(t,e))},Hs.prototype.readFeatureFromObject=function(t,e){},Hs.prototype.readFeaturesFromObject=function(t,e){},Hs.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(this.getObject_(t),this.getReadOptions(t,e))},Hs.prototype.readGeometryFromObject=function(t,e){},Hs.prototype.readProjection=function(t){return this.readProjectionFromObject(this.getObject_(t))},Hs.prototype.readProjectionFromObject=function(t){},Hs.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},Hs.prototype.writeFeatureObject=function(t,e){},Hs.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},Hs.prototype.writeFeaturesObject=function(t,e){},Hs.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},Hs.prototype.writeGeometryObject=function(t,e){};var $s=Hs,qs=function(t){var e=t||{};$s.call(this),this.defaultDataProjection=lt.get(e.defaultDataProjection?e.defaultDataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=lt.get(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName};C.inherits(qs,$s),qs.readGeometry_=function(t,e){if(!t)return null;var i=qs.GEOMETRY_READERS_[t.type];return zs.transformWithOptions(i(t),!1,e)},qs.readGeometryCollectionGeometry_=function(t,e){var i=t.geometries.map(function(t){return qs.readGeometry_(t,e)});return new kr(i)},qs.readPointGeometry_=function(t){return new an(t.coordinates)},qs.readLineStringGeometry_=function(t){return new on(t.coordinates)},qs.readMultiLineStringGeometry_=function(t){return new nn(t.coordinates)},qs.readMultiPointGeometry_=function(t){return new ln(t.coordinates)},qs.readMultiPolygonGeometry_=function(t){return new Cn(t.coordinates)},qs.readPolygonGeometry_=function(t){return new xn(t.coordinates)},qs.writeGeometry_=function(t,e){return(0,qs.GEOMETRY_WRITERS_[t.getType()])(zs.transformWithOptions(t,!0,e),e)},qs.writeEmptyGeometryCollectionGeometry_=function(t){return{type:"GeometryCollection",geometries:[]}},qs.writeGeometryCollectionGeometry_=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=nt.assign({},e);return delete i.featureProjection,qs.writeGeometry_(t,i)})}},qs.writeLineStringGeometry_=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}},qs.writeMultiLineStringGeometry_=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}},qs.writeMultiPointGeometry_=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}},qs.writeMultiPolygonGeometry_=function(t,e){var i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}},qs.writePointGeometry_=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}},qs.writePolygonGeometry_=function(t,e){var i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}},qs.GEOMETRY_READERS_={Point:qs.readPointGeometry_,LineString:qs.readLineStringGeometry_,Polygon:qs.readPolygonGeometry_,MultiPoint:qs.readMultiPointGeometry_,MultiLineString:qs.readMultiLineStringGeometry_,MultiPolygon:qs.readMultiPolygonGeometry_,GeometryCollection:qs.readGeometryCollectionGeometry_},qs.GEOMETRY_WRITERS_={Point:qs.writePointGeometry_,LineString:qs.writeLineStringGeometry_,Polygon:qs.writePolygonGeometry_,MultiPoint:qs.writeMultiPointGeometry_,MultiLineString:qs.writeMultiLineStringGeometry_,MultiPolygon:qs.writeMultiPolygonGeometry_,GeometryCollection:qs.writeGeometryCollectionGeometry_,Circle:qs.writeEmptyGeometryCollectionGeometry_},qs.prototype.readFeature,qs.prototype.readFeatures,qs.prototype.readFeatureFromObject=function(t,e){var i=null;i="Feature"===t.type?t:{type:"Feature",geometry:t};var o=qs.readGeometry_(i.geometry,e),r=new Vs;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==i.geometry_name&&r.setGeometryName(i.geometry_name),r.setGeometry(o),void 0!==i.id&&r.setId(i.id),i.properties&&r.setProperties(i.properties),r},qs.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];var o,r,n=t.features;for(o=0,r=n.length;o<r;++o)i.push(this.readFeatureFromObject(n[o],e))}else i=[this.readFeatureFromObject(t,e)];return i},qs.prototype.readGeometry,qs.prototype.readGeometryFromObject=function(t,e){return qs.readGeometry_(t,e)},qs.prototype.readProjection,qs.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=lt.get(i.properties.name):M.assert(!1,36):e=this.defaultDataProjection,e},qs.prototype.writeFeature,qs.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature"},o=t.getId();void 0!==o&&(i.id=o);var r=t.getGeometry();i.geometry=r?qs.writeGeometry_(r,e):null;var n=t.getProperties();return delete n[t.getGeometryName()],nt.isEmpty(n)?i.properties=null:i.properties=n,i},qs.prototype.writeFeatures,qs.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);var i,o,r=[];for(i=0,o=t.length;i<o;++i)r.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:r}},qs.prototype.writeGeometry,qs.prototype.writeGeometryObject=function(t,e){return qs.writeGeometry_(t,this.adaptOptions(e))};var Zs=qs,Js=function(t){var e=t||{};$s.call(this),this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.defaultDataProjection=lt.get(e.defaultDataProjection?e.defaultDataProjection:"EPSG:4326")};C.inherits(Js,$s),Js.concatenateArcs_=function(t,e){var i,o,r,n,s,a,h=[];for(r=0,n=t.length;r<n;++r)i=t[r],r>0&&h.pop(),o=i>=0?e[i]:e[~i].slice().reverse(),h.push.apply(h,o);for(s=0,a=h.length;s<a;++s)h[s]=h[s].slice();return h},Js.readPointGeometry_=function(t,e,i){var o=t.coordinates;return e&&i&&Js.transformVertex_(o,e,i),new an(o)},Js.readMultiPointGeometry_=function(t,e,i){var o,r,n=t.coordinates;if(e&&i)for(o=0,r=n.length;o<r;++o)Js.transformVertex_(n[o],e,i);return new ln(n)},Js.readLineStringGeometry_=function(t,e){var i=Js.concatenateArcs_(t.arcs,e);return new on(i)},Js.readMultiLineStringGeometry_=function(t,e){var i,o,r=[];for(i=0,o=t.arcs.length;i<o;++i)r[i]=Js.concatenateArcs_(t.arcs[i],e);return new nn(r)},Js.readPolygonGeometry_=function(t,e){var i,o,r=[];for(i=0,o=t.arcs.length;i<o;++i)r[i]=Js.concatenateArcs_(t.arcs[i],e);return new xn(r)},Js.readMultiPolygonGeometry_=function(t,e){var i,o,r,n,s,a,h=[];for(s=0,a=t.arcs.length;s<a;++s){for(o=[],r=0,n=(i=t.arcs[s]).length;r<n;++r)o[r]=Js.concatenateArcs_(i[r],e);h[s]=o}return new Cn(h)},Js.readFeaturesFromGeometryCollection_=function(t,e,i,o,r,n,s){var a,h,l=t.geometries,p=[];for(a=0,h=l.length;a<h;++a)p[a]=Js.readFeatureFromGeometry_(l[a],e,i,o,r,n,s);return p},Js.readFeatureFromGeometry_=function(t,e,i,o,r,n,s){var a,h=t.type,l=Js.GEOMETRY_READERS_[h];a="Point"===h||"MultiPoint"===h?l(t,i,o):l(t,e);var p=new Vs;p.setGeometry(zs.transformWithOptions(a,!1,s)),void 0!==t.id&&p.setId(t.id);var u=t.properties;return r&&(u||(u={}),u[r]=n),u&&p.setProperties(u),p},Js.prototype.readFeatures,Js.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i,o=t,r=null,n=null;o.transform&&(r=(i=o.transform).scale,n=i.translate);var s=o.arcs;i&&Js.transformArcs_(s,r,n);var a,h,l=[],p=o.objects,u=this.layerName_;for(a in p)this.layers_&&-1==this.layers_.indexOf(a)||("GeometryCollection"===p[a].type?(h=p[a],l.push.apply(l,Js.readFeaturesFromGeometryCollection_(h,s,r,n,u,a,e))):(h=p[a],l.push(Js.readFeatureFromGeometry_(h,s,r,n,u,a,e))));return l}return[]},Js.transformArcs_=function(t,e,i){var o,r;for(o=0,r=t.length;o<r;++o)Js.transformArc_(t[o],e,i)},Js.transformArc_=function(t,e,i){var o,r,n,s=0,a=0;for(r=0,n=t.length;r<n;++r)s+=(o=t[r])[0],a+=o[1],o[0]=s,o[1]=a,Js.transformVertex_(o,e,i)},Js.transformVertex_=function(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]},Js.prototype.readProjection,Js.prototype.readProjectionFromObject=function(t){return this.defaultDataProjection},Js.GEOMETRY_READERS_={Point:Js.readPointGeometry_,LineString:Js.readLineStringGeometry_,Polygon:Js.readPolygonGeometry_,MultiPoint:Js.readMultiPointGeometry_,MultiLineString:Js.readMultiLineStringGeometry_,MultiPolygon:Js.readMultiPolygonGeometry_},Js.prototype.writeFeatureObject=function(t,e){},Js.prototype.writeFeaturesObject=function(t,e){},Js.prototype.writeGeometryObject=function(t,e){},Js.prototype.readGeometryFromObject=function(){},Js.prototype.readFeatureFromObject=function(){};var Qs=i("/5HI"),ta=i.n(Qs),ea=function(t,e,i,o,r){this.extent_,this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=o,this.tmpTransform_=Wo.create()};ea.prototype.get=function(t){return this.properties_[t]},ea.prototype.getEnds=ea.prototype.getEndss=function(){return this.ends_},ea.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===W.POINT?U.createOrUpdateFromCoordinate(this.flatCoordinates_):U.createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},ea.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=U.getCenter(this.getExtent());this.flatInteriorPoints_=yn.linearRings(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},ea.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Sn.linearRingss(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=yn.linearRingss(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},ea.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Xr.lineString(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},ea.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,o=0,r=i.length;o<r;++o){var n=i[o],s=Xr.lineString(t,e,n,2,.5);Xt.extend(this.flatMidpoints_,s),e=n}}return this.flatMidpoints_},ea.prototype.getId=function(){return this.id_},ea.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},ea.prototype.getFlatCoordinates=ea.prototype.getOrientedFlatCoordinates,ea.prototype.getGeometry=function(){return this},ea.prototype.getProperties=function(){return this.properties_},ea.prototype.getSimplifiedGeometry=ea.prototype.getGeometry,ea.prototype.getStride=function(){return 2},ea.prototype.getStyleFunction=C.nullFunction,ea.prototype.getType=function(){return this.type_},ea.prototype.transform=function(t,e){var i=t.getExtent(),o=t.getWorldExtent(),r=U.getHeight(o)/U.getHeight(i),n=this.tmpTransform_;Wo.compose(n,o[0],o[3],r,-r,0,0,0),Bo.transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,n,this.flatCoordinates_)};var ia=ea,oa=function(t){zs.call(this);var e=t||{};this.defaultDataProjection=new Z({code:"EPSG:3857",units:K.TILE_PIXELS}),this.featureClass_=e.featureClass?e.featureClass:ia,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.extent_=null};C.inherits(oa,zs),oa.pbfReaders_={layers:function(t,e,i){if(3===t){var o={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(oa.pbfReaders_.layer,o,r),o.length=o.features.length,o.length&&(e[o.name]=o)}},layer:function(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var o=null,r=i.readVarint()+i.pos;i.pos<r;)o=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(o)}},feature:function(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var o=i.readVarint()+i.pos;i.pos<o;){var r=e.layer.keys[i.readVarint()],n=e.layer.values[i.readVarint()];e.properties[r]=n}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}},oa.readRawFeature_=function(t,e,i){t.pos=e.features[i];var o=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(oa.pbfReaders_.feature,r,o),r},oa.readRawGeometry_=function(t,e,i,o){t.pos=e.geometry;for(var r=t.readVarint()+t.pos,n=1,s=0,a=0,h=0,l=0,p=0;t.pos<r;){if(!s){var u=t.readVarint();n=7&u,s=u>>3}s--,1===n||2===n?(a+=t.readSVarint(),h+=t.readSVarint(),1===n&&l>p&&(o.push(l),p=l),i.push(a,h),l+=2):7===n?l>p&&(i.push(i[p],i[p+1]),l+=2):M.assert(!1,59)}l>p&&(o.push(l),p=l)},oa.getGeometryType_=function(t,e){var i;return 1===t?i=1===e?W.POINT:W.MULTI_POINT:2===t?i=1===e?W.LINE_STRING:W.MULTI_LINE_STRING:3===t&&(i=W.POLYGON),i},oa.prototype.createFeature_=function(t,e,i){var o,r=e.type;if(0===r)return null;var n=e.id,s=e.properties;s[this.layerName_]=e.layer.name;var a=[],h=[];oa.readRawGeometry_(t,e,a,h);var l=oa.getGeometryType_(r,h.length);if(this.featureClass_===ia)o=new this.featureClass_(l,a,h,s,n);else{var p;if(l==W.POLYGON){for(var u=[],c=0,f=0,d=0,y=h.length;d<y;++d){var g=h[d];_n.linearRingIsClockwise(a,c,g,2)||(u.push(h.slice(f,d)),f=d),c=g}u.length>1?(h=u,p=new Cn(null)):p=new xn(null)}else p=l===W.POINT?new an(null):l===W.LINE_STRING?new on(null):l===W.POLYGON?new xn(null):l===W.MULTI_POINT?new ln(null):l===W.MULTI_LINE_STRING?new nn(null):null;p.setFlatCoordinates(jo.XY,a,h),o=new this.featureClass_,this.geometryName_&&o.setGeometryName(this.geometryName_);var v=zs.transformWithOptions(p,!1,this.adaptOptions(i));o.setGeometry(v),o.setId(n),o.setProperties(s)}return o},oa.prototype.getLastExtent=function(){return this.extent_},oa.prototype.getType=function(){return Ks.ARRAY_BUFFER},oa.prototype.readFeatures=function(t,e){var i,o=this.layers_,r=new ta.a(t),n=r.readFields(oa.pbfReaders_.layers,{}),s=[];for(var a in n)if(!o||-1!=o.indexOf(a)){for(var h,l=0,p=(i=n[a]).length;l<p;++l)h=oa.readRawFeature_(r,i,l),s.push(this.createFeature_(r,h));this.extent_=i?[0,0,i.extent,i.extent]:null}return s},oa.prototype.readProjection=function(t){return this.defaultDataProjection},oa.prototype.setLayers=function(t){this.layers_=t},oa.prototype.readFeature=function(){},oa.prototype.readGeometry=function(){},oa.prototype.writeFeature=function(){},oa.prototype.writeGeometry=function(){},oa.prototype.writeFeatures=function(){};var ra=oa;
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/function na(t){return t&&Object(Ze.k)(t.getArray)}function sa(t){return t&&Object(Ze.k)(t.getAttributions)&&Object(Ze.k)(t.getFeatureById)}
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
function aa(t){return new ha(t)}var ha=function(t){function e(){return ze()(this,e),He()(this,(e.__proto__||Xe()(e)).apply(this,arguments))}return qe()(e,t),fo()(e,[{key:"writeGeometryObject",value:function(t,i){var o;return o=t,Object(Ze.k)(o.getCenter)&&Object(Ze.k)(o.getRadius)&&(t=Fn(Vn(t.getCenter(),i.featureProjection||this.defaultFeatureProjection,Re),t.getRadius()),i.featureProjection=Re),Xs()(e.prototype.__proto__||Xe()(e.prototype),"writeGeometryObject",this).call(this,t,i)}},{key:"writeFeatureObject",value:function(t,e){var i={type:"Feature"},o=t.getId();void 0!==o&&(i.id=o);var r=t.getGeometry();i.geometry=r?this.writeGeometryObject(r,e):null;var n=t.getProperties();return delete n[t.getGeometryName()],Object(Ze.h)(n)?i.properties=null:i.properties=n,i}}]),e}(Zs),la=aa();
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/function pa(t,e,i){var o=la.writeFeatureObject(t,{featureProjection:e,dataProjection:i});return Array.isArray(Object(Ze.f)(o,"properties.features"))&&(o.properties.features=o.properties.features.map(function(t){return t instanceof Vs?pa(t,e,i):t})),o}function ua(t,e,i){return la.writeGeometryObject(t,{featureProjection:e,dataProjection:i})}function ca(t,e,i){var o,r;
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/return o=t,r=i,i=la.readProjection(o)||r,la.readGeometry(t,{featureProjection:e,dataProjection:i})}var fa={computed:{viewProjection:function(){return this.rev&&this.$view?this.$view.getProjection().getCode():Pe},resolvedDataProjection:function(){return Object(Ze.b)(this.dataProjection,this.projection,this.$map&&this.$map.get("dataProjection"),this.$options.dataProjection,this.viewProjection)}},methods:{pointToViewProj:function(t){return Vn(t,this.resolvedDataProjection,this.viewProjection)},pointToDataProj:function(t){return Vn(t,this.viewProjection,this.resolvedDataProjection)},lineToViewProj:function(t){return Yn(t,this.resolvedDataProjection,this.viewProjection)},lineToDataProj:function(t){return Yn(t,this.viewProjection,this.resolvedDataProjection)},polygonToViewProj:function(t){return Hn(t,this.resolvedDataProjection,this.viewProjection)},polygonToDataProj:function(t){return Hn(t,this.viewProjection,this.resolvedDataProjection)},multiPointToViewProj:function(t){return $n(t,this.resolvedDataProjection,this.viewProjection)},multiPointToDataProj:function(t){return $n(t,this.viewProjection,this.resolvedDataProjection)},multiLineToViewProj:function(t){return qn(t,this.resolvedDataProjection,this.viewProjection)},multiLineToDataProj:function(t){return qn(t,this.viewProjection,this.resolvedDataProjection)},multiPolygonToViewProj:function(t){return Zn(t,this.resolvedDataProjection,this.viewProjection)},multiPolygonToDataProj:function(t){return Zn(t,this.viewProjection,this.resolvedDataProjection)},extentToViewProj:function(t){return Gn(t,this.resolvedDataProjection,this.viewProjection)},extentToDataProj:function(t){return Gn(t,this.viewProjection,this.resolvedDataProjection)},writeGeometryInDataProj:function(t){return ua(t,this.viewProjection,this.resolvedDataProjection)},writeGeometryInViewProj:function(t){return ua(t)},readGeometryInDataProj:function(t){return ca(t,this.viewProjection,this.resolvedDataProjection)},writeFeatureInDataProj:function(t){return pa(t,this.viewProjection,this.resolvedDataProjection)},writeFeatureInViewProj:function(t){return pa(t)},readFeatureInDataProj:function(t){return function t(e,i,o){var r=la.readFeature(e,{featureProjection:i,dataProjection:o});return Array.isArray(r.get("features"))&&r.set("features",r.get("features").map(function(e){return Object(Ze.n)(e)?t(e,i,o):e})),r}(t,this.viewProjection,this.resolvedDataProjection)}}},da={coordinates:{type:Array,required:!0,validator:function(t){return t.length}}};function ya(t,e){return!!Object(Ze.i)(t.extent,e.extent)&&Object(Ze.i)(t.coordinates,e.coordinates)}var ga={mixins:[wo,Co,fa],props:da,computed:{type:function(){throw new Error("Not implemented computed property")},extent:function(){if(this.extentViewProj&&this.resolvedDataProjection)return this.extentToDataProj(this.extentViewProj)},extentViewProj:function(){if(this.rev&&this.$geometry)return this.$geometry.getExtent()},point:function(){if(this.pointViewProj&&this.resolvedDataProjection)return this.pointToDataProj(this.pointViewProj)},pointViewProj:function(){if(this.rev&&this.$geometry)return jn(this.$geometry)},coordinatesViewProj:function(){if(this.rev&&this.$geometry)return this.$geometry.getCoordinates()}},watch:{coordinates:function(t){this.$geometry&&this.$view&&(ya({coordinates:t,extent:Ge(t)},{coordinates:this.getCoordinates(),extent:this.extent})||this.setCoordinates(t))},resolvedDataProjection:function(){this.$geometry&&(this.setupTransformFunctions(),this.setCoordinates(this.coordinates))}},methods:{createOlObject:function(){return this.createGeometry()},createGeometry:function(){throw new Error("Not implemented method")},getCoordinates:function(){return ni(this),this.toDataProj(this.$geometry.getCoordinates())},setCoordinates:function(t){ni(this),this.$geometry.setCoordinates(this.toViewProj(t))},init:function(){return this.setupTransformFunctions(),wo.methods.init.call(this)},setupTransformFunctions:function(){var t=this,e=Jn[this.type].transform;this.toDataProj=function(i){return e(i,t.viewProjection,t.resolvedDataProjection)},this.toViewProj=function(i){return e(i,t.resolvedDataProjection,t.viewProjection)}},deinit:function(){return wo.methods.deinit.call(this)},refresh:function(){return wo.methods.refresh.call(this)},getServices:function(){var t=this;return gi(wo.methods.getServices.call(this),{get geometry(){return t.$geometry}})},mount:function(){this.$geometryContainer&&this.$geometryContainer.setGeometry(this),this.subscribeAll()},unmount:function(){this.unsubscribeAll(),this.$geometryContainer&&this.$geometryContainer.setGeometry(void 0)},subscribeAll:function(){(function(){var t,e=this;ni(this);var i=(t=(t=(t=cs(this.$geometry,"change",function(){return{coordinates:e.getCoordinates(),extent:e.extent}}),ur).call(t,100),er).call(t,ya),Qi).call(t,function(t){var e=t.coordinates;return{prop:"coordinates",value:e}});this.subscribeTo(i,function(t){var i=t.prop,o=t.value;++e.rev,e.$emit("update:"+i,o)})}).call(this)}},stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;li()(this,{$geometry:{enumerable:!0,get:function(){return t.$olObject}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}},$geometryContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.geometryContainer}}})}},va={name:"vl-geom-circle",mixins:[ga],props:{coordinates:{type:Array,required:!0,validator:function(t){return 2===t.length}},radius:{type:Number,default:0}},computed:{type:Object(Ze.c)(Fe.POINT),coordinatesViewProj:function(){if(this.rev&&this.$geometry)return this.$geometry.getCenter()}},methods:{createGeometry:function(){return new Zo(this.toViewProj(this.coordinates),this.radius)},getCoordinates:function(){return ni(this),this.toDataProj(this.$geometry.getCenter())},setCoordinates:function(t){ni(this),this.$geometry.setCenter(this.toViewProj(t))}},watch:{radius:function(t){this.$geometry&&t!==this.$geometry.getRadius()&&this.$geometry.setRadius(t)}}},ma={Geom:va,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(va,e),t.component(va.name,va)}},_a={mixins:[wo,Co],methods:{createOlObject:function(){return this.createStyle()},createStyle:function(){throw new Error("Not implemented method")},init:function(){return wo.methods.init.call(this)},deinit:function(){return wo.methods.deinit.call(this)},getServices:function(){var t=this;return gi(wo.methods.getServices.call(this),{get style(){return t.$style}})},refresh:function(){return this.remount()}},stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;li()(this,{$style:{enumerable:!0,get:function(){return t.$olObject}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}},$stylesContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.stylesContainer}}})}},ba={snapToPixel:{type:Boolean,default:!0}},xa={mixins:[_a],props:ba,methods:{init:function(){return _a.methods.init.call(this)},deinit:function(){return _a.methods.deinit.call(this)},mount:function(){this.$stylesContainer&&this.$stylesContainer.setImage(this)},unmount:function(){this.$stylesContainer&&this.$stylesContainer.setImage(void 0)},getServices:function(){return _a.methods.getServices.call(this)},refresh:function(){return this.recreate()}},watch:{snapToPixel:function(){this.refresh()}},stubVNode:{empty:!1,attrs:function(){return{class:this.$options.name}}}},Ea={methods:{setFill:function(t){(t=t instanceof E.a?t.$style:t)!==this._fill&&(this._fill=t),this.$style&&t!==this.$style.getFill()&&(this.$style.setFill(t),this.refresh())},setStroke:function(t){(t=t instanceof E.a?t.$style:t)!==this._stroke&&(this._stroke=t),this.$style&&t!==this.$style.getStroke()&&(this.$style.setStroke(t),this.refresh())}},stubVNode:{empty:!1,attrs:function(){return{class:this.$options.name}}},created:function(){this._fill=void 0,this._stroke=void 0}},Sa={radius:{type:Number,default:5}},Ta={name:"vl-style-circle",mixins:[xa,Ea],props:Sa,methods:{createStyle:function(){return new Fs({radius:this.radius,snapToPixel:this.snapToPixel,fill:this._fill,stroke:this._stroke})},getServices:function(){var t=this;return gi(xa.methods.getServices.call(this),{get stylesContainer(){return t}})},setFill:function(t){(t=t instanceof E.a?t.$style:t)!==this._fill&&(this._fill=t,this.refresh())},setStroke:function(t){(t=t instanceof E.a?t.$style:t)!==this._stroke&&(this._stroke=t,this.refresh())}},watch:{radius:function(){this.refresh()}}},wa={Style:Ta,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Ta,e),t.component(Ta.name,Ta)}},Ca={padNumber:function(t,e,i){var o=void 0!==i?t.toFixed(i):""+t,r=o.indexOf(".");return(r=-1===r?o.length:r)>e?o:new Array(1+e-r).join("0")+o},compareVersions:function(t,e){for(var i=(""+t).split("."),o=(""+e).split("."),r=0;r<Math.max(i.length,o.length);r++){var n=parseInt(i[r]||"0",10),s=parseInt(o[r]||"0",10);if(n>s)return 1;if(s>n)return-1}return 0}},Ra=Ca,Pa={add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t},closestOnCircle:function(t,e){var i=e.getRadius(),o=e.getCenter(),r=o[0],n=o[1],s=t[0]-r,a=t[1]-n;0===s&&0===a&&(s=1);var h=Math.sqrt(s*s+a*a);return[r+i*s/h,n+i*a/h]},closestOnSegment:function(t,e){var i,o,r=t[0],n=t[1],s=e[0],a=e[1],h=s[0],l=s[1],p=a[0],u=a[1],c=p-h,f=u-l,d=0===c&&0===f?0:(c*(r-h)+f*(n-l))/(c*c+f*f||0);return d<=0?(i=h,o=l):d>=1?(i=p,o=u):(i=h+d*c,o=l+d*f),[i,o]},createStringXY:function(t){return function(e){return Pa.toStringXY(e,t)}},degreesToStringHDMS:function(t,e,i){var o=A.modulo(e+180,360)-180,r=Math.abs(3600*o),n=i||0,s=Math.pow(10,n),a=Math.floor(r/3600),h=Math.floor((r-3600*a)/60),l=r-3600*a-60*h;return(l=Math.ceil(l*s)/s)>=60&&(l=0,h+=1),h>=60&&(h=0,a+=1),a+"° "+Ra.padNumber(h,2)+"′ "+Ra.padNumber(l,2,n)+"″"+(0==o?"":" "+t.charAt(o<0?1:0))},format:function(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""},equals:function(t,e){for(var i=!0,o=t.length-1;o>=0;--o)if(t[o]!=e[o]){i=!1;break}return i},rotate:function(t,e){var i=Math.cos(e),o=Math.sin(e),r=t[0]*i-t[1]*o,n=t[1]*i+t[0]*o;return t[0]=r,t[1]=n,t},scale:function(t,e){return t[0]*=e,t[1]*=e,t},sub:function(t,e){return t[0]-=e[0],t[1]-=e[1],t},squaredDistance:function(t,e){var i=t[0]-e[0],o=t[1]-e[1];return i*i+o*o},distance:function(t,e){return Math.sqrt(Pa.squaredDistance(t,e))},squaredDistanceToSegment:function(t,e){return Pa.squaredDistance(t,Pa.closestOnSegment(t,e))},toStringHDMS:function(t,e){return t?Pa.degreesToStringHDMS("NS",t[1],e)+" "+Pa.degreesToStringHDMS("EW",t[0],e):""},toStringXY:function(t,e){return Pa.format(t,"{x}, {y}",e)}},Ia=Pa,Ma={ADD:"add",REMOVE:"remove"},La=function(t,e){ee.call(this);var i=e||{};if(this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(var o=0,r=this.array_.length;o<r;++o)this.assertUnique_(this.array_[o],o);this.updateLength_()};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/C.inherits(La,ee),La.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},La.prototype.extend=function(t){var e,i;for(e=0,i=t.length;e<i;++e)this.push(t[e]);return this},La.prototype.forEach=function(t,e){for(var i=e?t.bind(e):t,o=this.array_,r=0,n=o.length;r<n;++r)i(o[r],r,o)},La.prototype.getArray=function(){return this.array_},La.prototype.item=function(t){return this.array_[t]},La.prototype.getLength=function(){return this.get(La.Property_.LENGTH)},La.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new La.Event(Ma.ADD,e))},La.prototype.pop=function(){return this.removeAt(this.getLength()-1)},La.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},La.prototype.remove=function(t){var e,i,o=this.array_;for(e=0,i=o.length;e<i;++e)if(o[e]===t)return this.removeAt(e)},La.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new La.Event(Ma.REMOVE,e)),e},La.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new La.Event(Ma.REMOVE,o)),this.dispatchEvent(new La.Event(Ma.ADD,e))}else{var r;for(r=i;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},La.prototype.updateLength_=function(){this.set(La.Property_.LENGTH,this.array_.length)},La.prototype.assertUnique_=function(t,e){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==e)throw new P(58)},La.Property_={LENGTH:"length"},La.Event=function(t,e){_t.call(this,t),this.element=e},C.inherits(La.Event,_t);var Aa=La,Oa={};Oa.DOCUMENT=document.implementation.createDocument("","",null),Oa.createElementNS=function(t,e){return Oa.DOCUMENT.createElementNS(t,e)},Oa.getAllTextContent=function(t,e){return Oa.getAllTextContent_(t,e,[]).join("")},Oa.getAllTextContent_=function(t,e,i){var o;if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else for(o=t.firstChild;o;o=o.nextSibling)Oa.getAllTextContent_(o,e,i);return i},Oa.isDocument=function(t){return t instanceof Document},Oa.isNode=function(t){return t instanceof Node},Oa.getAttributeNS=function(t,e,i){return t.getAttributeNS(e,i)||""},Oa.setAttributeNS=function(t,e,i,o){t.setAttributeNS(e,i,o)},Oa.parse=function(t){return(new DOMParser).parseFromString(t,"application/xml")},Oa.makeArrayExtender=function(t,e){return function(i,o){var r=t.call(e,i,o);if(void 0!==r){var n=o[o.length-1];Xt.extend(n,r)}}},Oa.makeArrayPusher=function(t,e){return function(i,o){var r=t.call(void 0!==e?e:this,i,o);void 0!==r&&o[o.length-1].push(r)}},Oa.makeReplacer=function(t,e){return function(i,o){var r=t.call(void 0!==e?e:this,i,o);void 0!==r&&(o[o.length-1]=r)}},Oa.makeObjectPropertyPusher=function(t,e,i){return function(o,r){var n=t.call(void 0!==i?i:this,o,r);if(void 0!==n){var s=r[r.length-1],a=void 0!==e?e:o.localName;(a in s?s[a]:s[a]=[]).push(n)}}},Oa.makeObjectPropertySetter=function(t,e,i){return function(o,r){var n=t.call(void 0!==i?i:this,o,r);void 0!==n&&(r[r.length-1][void 0!==e?e:o.localName]=n)}},Oa.makeChildAppender=function(t,e){return function(i,o,r){t.call(void 0!==e?e:this,i,o,r),r[r.length-1].node.appendChild(i)}},Oa.makeArraySerializer=function(t,e){var i,o;return function(e,r,n){if(void 0===i){i={};var s={};s[e.localName]=t,i[e.namespaceURI]=s,o=Oa.makeSimpleNodeFactory(e.localName)}Oa.serialize(i,o,r,n)}},Oa.makeSimpleNodeFactory=function(t,e){var i=t;return function(t,o,r){var n=o[o.length-1].node,s=i;void 0===s&&(s=r);var a=e;return void 0===e&&(a=n.namespaceURI),Oa.createElementNS(a,s)}},Oa.OBJECT_PROPERTY_NODE_FACTORY=Oa.makeSimpleNodeFactory(),Oa.makeSequence=function(t,e){for(var i=e.length,o=new Array(i),r=0;r<i;++r)o[r]=t[e[r]];return o},Oa.makeStructureNS=function(t,e,i){var o,r,n=void 0!==i?i:{};for(o=0,r=t.length;o<r;++o)n[t[o]]=e;return n},Oa.parseNode=function(t,e,i,o){var r;for(r=e.firstElementChild;r;r=r.nextElementSibling){var n=t[r.namespaceURI];if(void 0!==n){var s=n[r.localName];void 0!==s&&s.call(o,r,i)}}},Oa.pushParseAndPop=function(t,e,i,o,r){return o.push(t),Oa.parseNode(e,i,o,r),o.pop()},Oa.serialize=function(t,e,i,o,r,n){for(var s,a,h=(void 0!==r?r:i).length,l=0;l<h;++l)void 0!==(s=i[l])&&void 0!==(a=e.call(n,s,o,void 0!==r?r[l]:void 0))&&t[a.namespaceURI][a.localName].call(n,a,s,o)},Oa.pushSerializeAndPop=function(t,e,i,o,r,n,s){return r.push(t),Oa.serialize(e,i,o,r,n,s),r.pop()};var Fa=Oa,Na={loadFeaturesXhr:function(t,e,i,o){return function(r,n,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(r,n,s):t,!0),e.getType()==Ks.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var r,n=e.getType();n==Ks.JSON||n==Ks.TEXT?r=a.responseText:n==Ks.XML?(r=a.responseXML)||(r=Fa.parse(a.responseText)):n==Ks.ARRAY_BUFFER&&(r=a.response),r?i.call(this,e.readFeatures(r,{featureProjection:s}),e.readProjection(r),e.getLastExtent()):o.call(this)}else o.call(this)}.bind(this),a.onerror=function(){o.call(this)}.bind(this),a.send()}},xhr:function(t,e){return Na.loadFeaturesXhr(t,e,function(t,e){this.addFeatures(t)},C.nullFunction)}},Da=Na,ja={all:function(t,e){return[[-1/0,-1/0,1/0,1/0]]},bbox:function(t,e){return[t]},tile:function(t){return function(e,i){var o=t.getZForResolution(i),r=t.getTileRangeForExtentAndZ(e,o),n=[],s=[o,0,0];for(s[1]=r.minX;s[1]<=r.maxX;++s[1])for(s[2]=r.minY;s[2]<=r.maxY;++s[2])n.push(t.getTileCoordExtent(s));return n}}},ka=ja,Ga={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},Ua=i("emf4"),Ba=i.n(Ua),Va=function(t){this.rbush_=Ba()(t),this.items_={}};Va.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[C.getUid(e)]=i},Va.prototype.load=function(t,e){for(var i=new Array(e.length),o=0,r=e.length;o<r;o++){var n=t[o],s=e[o],a={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:s};i[o]=a,this.items_[C.getUid(s)]=a}this.rbush_.load(i)},Va.prototype.remove=function(t){var e=C.getUid(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},Va.prototype.update=function(t,e){var i=this.items_[C.getUid(e)],o=[i.minX,i.minY,i.maxX,i.maxY];U.equals(o,t)||(this.remove(e),this.insert(t,e))},Va.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},Va.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},Va.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},Va.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},Va.prototype.forEach_=function(t,e,i){for(var o,r=0,n=t.length;r<n;r++)if(o=e.call(i,t[r]))return o;return o},Va.prototype.isEmpty=function(){return nt.isEmpty(this.items_)},Va.prototype.clear=function(){this.rbush_.clear(),this.items_={}},Va.prototype.getExtent=function(t){var e=this.rbush_.data;return U.createOrUpdate(e.minX,e.minY,e.maxX,e.maxY,t)},Va.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[0|e]=t.items_[0|e]};var Wa=Va,Xa=function(t){var e=t||{};oe.call(this,{attributions:e.attributions,logo:e.logo,projection:void 0,state:pt.READY,wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=C.nullFunction,this.format_=e.format,this.overlaps_=void 0==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(M.assert(this.format_,7),this.loader_=Da.xhr(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:ka.all;var i,o,r=void 0===e.useSpatialIndex||e.useSpatialIndex;this.featuresRtree_=r?new Wa:null,this.loadedExtentsRtree_=new Wa,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,e.features instanceof Aa?o=(i=e.features).getArray():Array.isArray(e.features)&&(o=e.features),r||void 0!==i||(i=new Aa(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==i&&this.bindFeaturesCollection_(i)};C.inherits(Xa,oe),Xa.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},Xa.prototype.addFeatureInternal=function(t){var e=C.getUid(t).toString();if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Xa.Event(Ga.ADDFEATURE,t))}},Xa.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[vt.listen(e,Et.CHANGE,this.handleFeatureChange_,this),vt.listen(e,Zt.PROPERTYCHANGE,this.handleFeatureChange_,this)]},Xa.prototype.addToIndex_=function(t,e){var i=!0,o=e.getId();return void 0!==o?o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=e:(M.assert(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},Xa.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},Xa.prototype.addFeaturesInternal=function(t){var e,i,o,r,n=[],s=[],a=[];for(i=0,o=t.length;i<o;i++)r=t[i],e=C.getUid(r).toString(),this.addToIndex_(e,r)&&s.push(r);for(i=0,o=s.length;i<o;i++){r=s[i],e=C.getUid(r).toString(),this.setupChangeEvents_(e,r);var h=r.getGeometry();if(h){var l=h.getExtent();n.push(l),a.push(r)}else this.nullGeometryFeatures_[e]=r}for(this.featuresRtree_&&this.featuresRtree_.load(n,a),i=0,o=s.length;i<o;i++)this.dispatchEvent(new Xa.Event(Ga.ADDFEATURE,s[i]))},Xa.prototype.bindFeaturesCollection_=function(t){var e=!1;vt.listen(this,Ga.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),vt.listen(this,Ga.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),vt.listen(t,Ma.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),vt.listen(t,Ma.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},Xa.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(vt.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var o=new Xa.Event(Ga.CLEAR);this.dispatchEvent(o),this.changed()},Xa.prototype.forEachFeature=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEach(t,e):this.featuresCollection_?this.featuresCollection_.forEach(t,e):void 0},Xa.prototype.forEachFeatureAtCoordinateDirect=function(t,e,i){var o=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(o,function(o){return o.getGeometry().intersectsCoordinate(t)?e.call(i,o):void 0})},Xa.prototype.forEachFeatureInExtent=function(t,e,i){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e,i):this.featuresCollection_?this.featuresCollection_.forEach(e,i):void 0},Xa.prototype.forEachFeatureIntersectingExtent=function(t,e,i){return this.forEachFeatureInExtent(t,function(o){if(o.getGeometry().intersectsExtent(t)){var r=e.call(i,o);if(r)return r}})},Xa.prototype.getFeaturesCollection=function(){return this.featuresCollection_},Xa.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),nt.isEmpty(this.nullGeometryFeatures_)||Xt.extend(t,nt.getValues(this.nullGeometryFeatures_))),t},Xa.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},Xa.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},Xa.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],o=t[1],r=null,n=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||Go.TRUE;return this.featuresRtree_.forEachInExtent(a,function(t){if(h(t)){var e=t.getGeometry(),l=s;if((s=e.closestPointXY(i,o,n,s))<l){r=t;var p=Math.sqrt(s);a[0]=i-p,a[1]=o-p,a[2]=i+p,a[3]=o+p}}}),r},Xa.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},Xa.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},Xa.prototype.getFormat=function(){return this.format_},Xa.prototype.getOverlaps=function(){return this.overlaps_},Xa.prototype.getResolutions=function(){},Xa.prototype.getUrl=function(){return this.url_},Xa.prototype.handleFeatureChange_=function(t){var e=t.target,i=C.getUid(e).toString(),o=e.getGeometry();if(o){var r=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,e)):this.featuresRtree_&&this.featuresRtree_.update(r,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var n=e.getId();if(void 0!==n){var s=n.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new Xa.Event(Ga.CHANGEFEATURE,e))},Xa.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&nt.isEmpty(this.nullGeometryFeatures_)},Xa.prototype.loadFeatures=function(t,e,i){var o,r,n=this.loadedExtentsRtree_,s=this.strategy_(t,e);for(o=0,r=s.length;o<r;++o){var a=s[o];n.forEachInExtent(a,function(t){return U.containsExtent(t.extent,a)})||(this.loader_.call(this,a,e,i),n.insert(a,{extent:a.slice()}))}},Xa.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(U.equals(i.extent,t))return e=i,!0}),e&&i.remove(e)},Xa.prototype.removeFeature=function(t){var e=C.getUid(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},Xa.prototype.removeFeatureInternal=function(t){var e=C.getUid(t).toString();this.featureChangeKeys_[e].forEach(vt.unlistenByKey),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new Xa.Event(Ga.REMOVEFEATURE,t))},Xa.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},Xa.prototype.setLoader=function(t){this.loader_=t},Xa.Event=function(t,e){_t.call(this,t),this.feature=e},C.inherits(Xa.Event,_t);var Ya=Xa,za=function(t){Ya.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.features=[],this.geometryFunction=t.geometryFunction||function(t){var e=t.getGeometry();return M.assert(e instanceof an,10),e},this.source=t.source,this.source.on(Et.CHANGE,za.prototype.refresh,this)};C.inherits(za,Ya),za.prototype.getDistance=function(){return this.distance},za.prototype.getSource=function(){return this.source},za.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},za.prototype.setDistance=function(t){this.distance=t,this.refresh()},za.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),Ya.prototype.refresh.call(this)},za.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=U.createEmpty(),e=this.distance*this.resolution,i=this.source.getFeatures(),o={},r=0,n=i.length;r<n;r++){var s=i[r];if(!(C.getUid(s).toString()in o)){var a=this.geometryFunction(s);if(a){var h=a.getCoordinates();U.createOrUpdateFromCoordinate(h,t),U.buffer(t,e,t);var l=this.source.getFeaturesInExtent(t);l=l.filter(function(t){var e=C.getUid(t).toString();return!(e in o)&&(o[e]=!0,!0)}),this.features.push(this.createCluster(l))}}}}},za.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var o=this.geometryFunction(t[i]);o?Ia.add(e,o.getCoordinates()):t.splice(i,1)}Ia.scale(e,1/t.length);var r=new Vs(new an(e));return r.set("features",t),r};var Ka=za,Ha=i("u2KI"),$a=i.n(Ha);class qa{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Za(t,this.dueTime,this.scheduler))}}class Za extends Di{constructor(t,e,i){super(t),this.dueTime=e,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ja,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Ja(t){t.debouncedNext()}function Qa(t,e=Xi){return function(t,e=Xi){return i=>i.lift(new qa(t,e))}(t,e)(this)}var th=i("Rewd"),eh=function(){function t(e,i){var o=this;ze()(this,t),this._adaptee=e,this._getElementKey=i,this._index=uo()(null),this._adaptee.forEach(function(t){return o._addToIndex(o._getElementKey(t),t)})}return fo()(t,[{key:"forEach",value:function(t){Object(Ze.e)(this.elements,t)}},{key:"add",value:function(t){var e=this._getElementKey(t);null!=e&&(this._adaptee.push(t),this._index[e]=t)}},{key:"remove",value:function(t){this._adaptee.remove(t)&&this._removeFromIndex(this._getElementKey(t))}},{key:"has",value:function(t){return!!this.findByKey(this._getElementKey(t))}},{key:"clear",value:function(){this._adaptee.clear(),this._resetIndex()}},{key:"findByKey",value:function(t){return t&&this._index[t]}},{key:"sort",value:function(t){this.elements.sort(t)}},{key:"_resetIndex",value:function(){this._index=uo()(null)}},{key:"_addToIndex",value:function(t,e){return null!=t&&(this._index[t]=e,e.on("propertychange",this._handleElementChange,this),!0)}},{key:"_removeFromIndex",value:function(t){var e=this.findByKey(t);return e&&(e.un("propertychange",this._handleElementChange,this),delete this._index[t]),!!e}},{key:"_handleElementChange",value:function(t){var e=t.target,i=this._getElementKey(e);if(this.findByKey(i)!==e)for(var o in this._index)if(this._index[o]===e){this._removeFromIndex(o);break}this._addToIndex(i,e)}},{key:"adaptee",get:function(){return this._adaptee}},{key:"elements",get:function(){return this._adaptee.getArray()}}]),t}(),ih=function(){function t(e){ze()(this,t),this._adaptee=e}return fo()(t,[{key:"forEach",value:function(t){this.elements.forEach(t)}},{key:"add",value:function(t){this._adaptee.addFeature(t)}},{key:"remove",value:function(t){this._adaptee.removeFeature(t)}},{key:"has",value:function(t){return!!this.findByKey(t.getId())}},{key:"clear",value:function(){this._adaptee.clear()}},{key:"findByKey",value:function(t){return this._adaptee.getFeatureById(t)}},{key:"sort",value:function(t){throw new Error("Not supported")}},{key:"adaptee",get:function(){return this._adaptee}},{key:"elements",get:function(){return this._adaptee.getFeatures()}}]),t}(),oh=i("DtRx"),rh=i.n(oh);
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
function nh(t){return null==t.getId()&&t.setId(rh()()),t}function sh(t){var e=void 0;if(Object(Ze.n)(t)||t instanceof E.a)e=t.id;else if(t instanceof Vs)e=t.getId();else{if(!Object(Ze.o)(t)&&!Object(Ze.l)(t))throw new Error("Illegal feature format");e=t}return e}
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var ah={mixins:[fa],methods:{getFeaturesTarget:function(){throw new Error("Not implemented method")},addFeatures:function(t){t.forEach(this.addFeature.bind(this))},addFeature:function(t){t instanceof E.a?t=t.$feature:Object(Ze.n)(t)&&(t=this.readFeatureInDataProj(t)),ti(t,Vs),this.prepareFeature(t),this.getFeaturesTarget().has(t)||this.getFeaturesTarget().add(t)},removeFeatures:function(t){t.forEach(this.removeFeature.bind(this))},removeFeature:function(t){t instanceof E.a?t=t.$feature:Object(Ze.n)(t)&&(t=this.getFeatureById(t.id)),t&&this.getFeaturesTarget().has(t)&&this.getFeaturesTarget().remove(t)},clearFeatures:function(){this.getFeaturesTarget().clear()},getFeatureById:function(t){return this.getFeaturesTarget().findByKey(t)},getFeatures:function(){return this.getFeaturesTarget().elements},getServices:function(){var t=this;return{get featuresContainer(){return t}}},prepareFeature:function(t){return nh(t)}},destroyed:function(){this.clearFeatures()}},hh={useSpatialIndex:{type:Boolean,default:!0}};var lh={mixins:[Po,ah,fa],props:hh,computed:{featuresViewProj:function(){return this.rev&&this.resolvedDataProjection&&this.$source?this.getFeatures().map(this.writeFeatureInViewProj.bind(this)):[]}},methods:{clear:function(){ah.methods.clearFeatures.call(this)},getFeaturesTarget:function(){return null==this._featuresTarget&&(this._featuresTarget=new ih(this.$source)),this._featuresTarget},getServices:function(){return gi(Po.methods.getServices.call(this),ah.methods.getServices.call(this))},init:function(){return Po.methods.init.call(this)},deinit:function(){return Po.methods.deinit.call(this)},mount:function(){Po.methods.mount.call(this)},unmount:function(){Po.methods.unmount.call(this)},subscribeAll:function(){(function(){var t,e=this;ri(this);var i=(t=cs(this.$source,"addfeature"),th._do).call(t,function(t){var i=t.feature;e.addFeature(i)}),o=(t=cs(this.$source,"removefeature"),th._do).call(t,function(t){var i=t.feature;e.removeFeature(i)}),r=ls.call(Bi,i,o);this.subscribeTo(r,function(t){++e.rev,e.$emit(t.type,t)}),this.subscribeTo(Qa.call(r,100),function(){e.$emit("update:features",e.getFeatures().map(e.writeFeatureInDataProj.bind(e)))})}).call(this)},writeFeatureInDataProj:function(t){return $a()(fa.methods.writeFeatureInDataProj.call(this,t))},writeGeometryInViewProj:function(t){return $a()(fa.methods.writeFeatureInViewProj.call(this,t))}},stubVNode:{empty:!1,attrs:function(){return{class:this.$options.name}}}},ph={methods:{getSourceTarget:function(){throw new Error("Not implemented method")},getSource:function(){return this._source},getServices:function(){var t=this;return{get sourceContainer(){return t}}},setSource:function(t){(t=t instanceof E.a?t.$source:t)!==this._source&&(this._source=t);var e=this.getSourceTarget();e&&t!==e.getSource()&&e.setSource(t)}},created:function(){this._source=void 0}},uh=function(){function t(){ze()(this,t)}return fo()(t,[{key:"getSource",value:function(){return this.source}},{key:"setSource",value:function(t){return this.source=t,this}},{key:"setAttributions",value:function(t){return this.attributions=t,this}},{key:"setDistance",value:function(t){return this.distance=t,this}},{key:"setGeometryFunction",value:function(t){return this.geometryFunction=t,this}},{key:"setLogo",value:function(t){return this.logo=t,this}},{key:"setProjection",value:function(t){return this.projection=t,this}},{key:"setWrapX",value:function(t){return this.wrapX=t,this}},{key:"set",value:function(t,e){this.values||(this.values={}),this.values[t]=e}},{key:"build",value:function(){Qe(this.source,"source is provided");var t=new Ka({attributions:this.attributions,distance:this.distance,geometryFunction:this.geometryFunction,logo:this.logo,projection:this.projection,source:this.source,wrapX:this.wrapX});return t.setProperties(this.values),t}},{key:"promise",value:function(){var t,e=this;return(t=(t=(t=(t=zi.call(Bi,100),io).call(t,function(){return!e.source}),qi).call(t),Qi).call(t,this.build.bind(this)),oo).call(t,ui.a)}}]),t}(),ch={distance:{type:Number,default:20},geomFuncFactory:{type:Function,default:function(){return function(t){var e=t.getGeometry();if(e){var i=jn(e);return i?Rn(i):void 0}}}}},fh={name:"vl-source-cluster",mixins:[lh,ph],props:ch,computed:{geomFunc:function(){return this.geomFuncFactory()}},methods:{createSource:function(){return this._sourceBuilder=(new uh).setAttributions(this.attributions).setDistance(this.distance).setGeometryFunction(this.geomFunc).setLogo(this.logo).setProjection(this.projection).setWrapX(this.wrapX),this._sourceBuilder.promise()},getServices:function(){return gi(lh.methods.getServices.call(this),ph.methods.getServices.call(this))},getSourceTarget:function(){return this._sourceBuilder}},watch:{distance:function(t){this.$source&&t!==this.$source.getDistance()&&this.$source.setDistance(t)}}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var dh={Source:fh,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(fh,e),t.component(fh.name,fh)}},yh=i("gRE1"),gh=i.n(yh),vh={SINGLECLICK:"singleclick",CLICK:Et.CLICK,DBLCLICK:Et.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},mh={altKeyOnly:function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly:function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey}};mh.always=Go.TRUE,mh.click=function(t){return t.type==vh.CLICK},mh.mouseActionButton=function(t){var e=t.originalEvent;return 0==e.button&&!(xs.WEBKIT&&xs.MAC&&e.ctrlKey)},mh.never=Go.FALSE,mh.pointerMove=function(t){return"pointermove"==t.type},mh.singleClick=function(t){return t.type==vh.SINGLECLICK},mh.doubleClick=function(t){return t.type==vh.DBLCLICK},mh.noModifierKeys=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},mh.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(xs.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},mh.shiftKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},mh.targetNotEditable=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},mh.mouseOnly=function(t){return M.assert(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},mh.primaryAction=function(t){var e=t.pointerEvent;return e.isPrimary&&0===e.button};var _h=mh,bh={DRAWSTART:"drawstart",DRAWEND:"drawend"},xh=function(t,e,i){_t.call(this,t),this.map=e,this.frameState=void 0!==i?i:null};C.inherits(xh,_t);var Eh=xh,Sh=function(t,e,i,o,r){Eh.call(this,t,e,r),this.originalEvent=i,this.pixel=e.getEventPixel(i),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==o&&o};C.inherits(Sh,Eh),Sh.prototype.preventDefault=function(){Eh.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},Sh.prototype.stopPropagation=function(){Eh.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var Th=Sh,wh=function(t,e,i,o,r){Th.call(this,t,e,i.originalEvent,o,r),this.pointerEvent=i};C.inherits(wh,Th);var Ch=wh,Rh={ACTIVE:"active"},Ph=function(t){ee.call(this),this.map_=null,this.setActive(!0),this.handleEvent=t.handleEvent};C.inherits(Ph,ee),Ph.prototype.getActive=function(){return this.get(Rh.ACTIVE)},Ph.prototype.getMap=function(){return this.map_},Ph.prototype.setActive=function(t){this.set(Rh.ACTIVE,t)},Ph.prototype.setMap=function(t){this.map_=t},Ph.pan=function(t,e,i){var o=t.getCenter();if(o){var r=t.constrainCenter([o[0]+e[0],o[1]+e[1]]);i?t.animate({duration:i,easing:ft.linear,center:r}):t.setCenter(r)}},Ph.rotate=function(t,e,i,o){e=t.constrainRotation(e,0),Ph.rotateWithoutConstraints(t,e,i,o)},Ph.rotateWithoutConstraints=function(t,e,i,o){if(void 0!==e){var r=t.getRotation(),n=t.getCenter();void 0!==r&&n&&o>0?t.animate({rotation:e,anchor:i,duration:o,easing:ft.easeOut}):t.rotate(e,i)}},Ph.zoom=function(t,e,i,o,r){e=t.constrainResolution(e,0,r),Ph.zoomWithoutConstraints(t,e,i,o)},Ph.zoomByDelta=function(t,e,i,o){var r=t.getResolution(),n=t.constrainResolution(r,e,0);if(void 0!==n){var s=t.getResolutions();n=A.clamp(n,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==n&&n!==r){var a=t.getCenter(),h=t.calculateCenterZoom(n,i);h=t.constrainCenter(h),i=[(n*a[0]-r*h[0])/(n-r),(n*a[1]-r*h[1])/(n-r)]}Ph.zoomWithoutConstraints(t,n,i,o)},Ph.zoomWithoutConstraints=function(t,e,i,o){if(e){var r=t.getResolution(),n=t.getCenter();if(void 0!==r&&n&&e!==r&&o)t.animate({resolution:e,anchor:i,duration:o,easing:ft.easeOut});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}};var Ih=Ph,Mh=function(t){var e=t||{},i=e.handleEvent?e.handleEvent:Mh.handleEvent;Ih.call(this,{handleEvent:i}),this.handleDownEvent_=e.handleDownEvent?e.handleDownEvent:Mh.handleDownEvent,this.handleDragEvent_=e.handleDragEvent?e.handleDragEvent:Mh.handleDragEvent,this.handleMoveEvent_=e.handleMoveEvent?e.handleMoveEvent:Mh.handleMoveEvent,this.handleUpEvent_=e.handleUpEvent?e.handleUpEvent:Mh.handleUpEvent,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};C.inherits(Mh,Ih),Mh.centroid=function(t){for(var e=t.length,i=0,o=0,r=0;r<e;r++)i+=t[r].clientX,o+=t[r].clientY;return[i/e,o/e]},Mh.prototype.isPointerDraggingEvent_=function(t){var e=t.type;return e===vh.POINTERDOWN||e===vh.POINTERDRAG||e===vh.POINTERUP},Mh.prototype.updateTrackedPointers_=function(t){if(this.isPointerDraggingEvent_(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==vh.POINTERUP?delete this.trackedPointers_[i]:t.type==vh.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=nt.getValues(this.trackedPointers_)}},Mh.handleDragEvent=C.nullFunction,Mh.handleUpEvent=Go.FALSE,Mh.handleDownEvent=Go.FALSE,Mh.handleMoveEvent=C.nullFunction,Mh.handleEvent=function(t){if(!(t instanceof Ch))return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==vh.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==vh.POINTERUP){var i=this.handleUpEvent_(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==vh.POINTERDOWN){var o=this.handleDownEvent_(t);this.handlingDownUpSequence=o,e=this.shouldStopEvent(o)}else t.type==vh.POINTERMOVE&&this.handleMoveEvent_(t);return!e},Mh.prototype.shouldStopEvent=function(t){return t};var Lh=Mh,Ah={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},Oh={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},Fh=function(t){ee.call(this);var e=nt.assign({},t);e[Oh.OPACITY]=void 0!==t.opacity?t.opacity:1,e[Oh.VISIBLE]=void 0===t.visible||t.visible,e[Oh.Z_INDEX]=void 0!==t.zIndex?t.zIndex:0,e[Oh.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[Oh.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_={layer:this,managed:!0},this.type};C.inherits(Fh,ee),Fh.prototype.getType=function(){return this.type},Fh.prototype.getLayerState=function(){return this.state_.opacity=A.clamp(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},Fh.prototype.getLayersArray=function(t){},Fh.prototype.getLayerStatesArray=function(t){},Fh.prototype.getExtent=function(){return this.get(Oh.EXTENT)},Fh.prototype.getMaxResolution=function(){return this.get(Oh.MAX_RESOLUTION)},Fh.prototype.getMinResolution=function(){return this.get(Oh.MIN_RESOLUTION)},Fh.prototype.getOpacity=function(){return this.get(Oh.OPACITY)},Fh.prototype.getSourceState=function(){},Fh.prototype.getVisible=function(){return this.get(Oh.VISIBLE)},Fh.prototype.getZIndex=function(){return this.get(Oh.Z_INDEX)},Fh.prototype.setExtent=function(t){this.set(Oh.EXTENT,t)},Fh.prototype.setMaxResolution=function(t){this.set(Oh.MAX_RESOLUTION,t)},Fh.prototype.setMinResolution=function(t){this.set(Oh.MIN_RESOLUTION,t)},Fh.prototype.setOpacity=function(t){this.set(Oh.OPACITY,t)},Fh.prototype.setVisible=function(t){this.set(Oh.VISIBLE,t)},Fh.prototype.setZIndex=function(t){this.set(Oh.Z_INDEX,t)};var Nh=Fh,Dh={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"},jh=function(t){var e=nt.assign({},t);delete e.source,Nh.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),vt.listen(this,ee.getChangeEventType(Oh.SOURCE),this.handleSourcePropertyChange_,this);var i=t.source?t.source:null;this.setSource(i)};C.inherits(jh,Nh),jh.visibleAtResolution=function(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution},jh.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},jh.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},jh.prototype.getSource=function(){return this.get(Oh.SOURCE)||null},jh.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():pt.UNDEFINED},jh.prototype.handleSourceChange_=function(){this.changed()},jh.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(vt.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=vt.listen(t,Et.CHANGE,this.handleSourceChange_,this)),this.changed()},jh.prototype.setMap=function(t){this.mapPrecomposeKey_&&(vt.unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(vt.unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=vt.listen(t,Dh.PRECOMPOSE,function(t){var e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[C.getUid(this)]=e},this),this.mapRenderKey_=vt.listen(this,Et.CHANGE,t.render,t),this.changed())},jh.prototype.setSource=function(t){this.set(Oh.SOURCE,t)};var kh=jh,Gh={IMAGE:"image",VECTOR:"vector"},Uh=function(t){var e=t||{},i=nt.assign({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,kh.call(this,i),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||Gh.VECTOR,this.type=Ah.VECTOR};C.inherits(Uh,kh),Uh.prototype.getDeclutter=function(){return this.declutter_},Uh.prototype.setDeclutter=function(t){this.declutter_=t},Uh.prototype.getRenderBuffer=function(){return this.renderBuffer_},Uh.prototype.getRenderOrder=function(){return this.get(Uh.Property_.RENDER_ORDER)},Uh.prototype.getSource,Uh.prototype.getStyle=function(){return this.style_},Uh.prototype.getStyleFunction=function(){return this.styleFunction_},Uh.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},Uh.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},Uh.prototype.setRenderOrder=function(t){this.set(Uh.Property_.RENDER_ORDER,t)},Uh.prototype.setStyle=function(t){this.style_=void 0!==t?t:Us.defaultFunction,this.styleFunction_=null===t?void 0:Us.createFunction(this.style_),this.changed()},Uh.prototype.getRenderMode=function(){return this.renderMode_},Uh.Property_={RENDER_ORDER:"renderOrder"};var Bh=Uh,Vh=function(t){Lh.call(this,{handleDownEvent:Vh.handleDownEvent_,handleEvent:Vh.handleEvent,handleUpEvent:Vh.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=Vh.getMode_(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===Vh.Mode_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:Go.TRUE;var e=t.geometryFunction;if(!e)if(this.type_===W.CIRCLE)e=function(t,e){var i=e||new Zo([NaN,NaN]),o=Ia.squaredDistance(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(o)),i};else{var i,o=this.mode_;o===Vh.Mode_.POINT?i=an:o===Vh.Mode_.LINE_STRING?i=on:o===Vh.Mode_.POLYGON&&(i=xn),e=function(t,e){var r=e;return r?o===Vh.Mode_.POLYGON?t[0].length?r.setCoordinates([t[0].concat([t[0][0]])]):r.setCoordinates([]):r.setCoordinates(t):r=new i(t),r}}this.geometryFunction_=e,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new Bh({source:new Ya({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:Vh.getDefaultStyleFunction()}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:_h.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=_h.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:_h.shiftKeyOnly,vt.listen(this,ee.getChangeEventType(Rh.ACTIVE),this.updateState_,this)};C.inherits(Vh,Lh),Vh.getDefaultStyleFunction=function(){var t=Us.createDefaultEditing();return function(e,i){return t[e.getGeometry().getType()]}},Vh.prototype.setMap=function(t){Lh.prototype.setMap.call(this,t),this.updateState_()},Vh.handleEvent=function(t){this.freehand_=this.mode_!==Vh.Mode_.POINT&&this.freehandCondition_(t);var e=!0;return this.freehand_&&t.type===vh.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),e=!1):this.freehand_&&t.type===vh.POINTERDOWN?e=!1:t.type===vh.POINTERMOVE?e=this.handlePointerMove_(t):t.type===vh.DBLCLICK&&(e=!1),Lh.handleEvent.call(this,t)&&e},Vh.handleDownEvent_=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.downPx_=t.pixel,!0)},Vh.handleUpEvent_=function(t){var e=!0;this.handlePointerMove_(t);var i=this.mode_===Vh.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===Vh.Mode_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},Vh.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,o=e[0]-i[0],r=e[1]-i[1],n=o*o+r*r;this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},Vh.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_];if(this.mode_===Vh.Mode_.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===Vh.Mode_.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,o=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var r=t.map,n=0,s=o.length;n<s;n++){var a=o[n],h=r.getPixelFromCoordinate(a),l=t.pixel,p=l[0]-h[0],u=l[1]-h[1],c=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(p*p+u*u)<=c){this.finishCoordinate_=a;break}}}return e},Vh.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Vs(new an(e)),this.updateSketchFeatures_())},Vh.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===Vh.Mode_.POINT?this.sketchCoords_=e.slice():this.mode_===Vh.Mode_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[e.slice(),e.slice()],this.mode_===Vh.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new Vs(new on(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new Vs,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Vh.Event(bh.DRAWSTART,this.sketchFeature_))},Vh.prototype.modifyDrawing_=function(t){var e,i,o=t.coordinate,r=this.sketchFeature_.getGeometry();(this.mode_===Vh.Mode_.POINT?i=this.sketchCoords_:this.mode_===Vh.Mode_.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=o[0],i[1]=o[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(r instanceof xn&&this.mode_!==Vh.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new Vs(new on(null)));var n=r.getLinearRing(0);this.sketchLine_.getGeometry().setFlatCoordinates(n.getLayout(),n.getFlatCoordinates())}else this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},Vh.prototype.addToDrawing_=function(t){var e,i,o=t.coordinate,r=this.sketchFeature_.getGeometry();this.mode_===Vh.Mode_.LINE_STRING?(this.finishCoordinate_=o.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(o.slice()),this.geometryFunction_(i,r)):this.mode_===Vh.Mode_.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(o.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,r)),this.updateSketchFeatures_(),e&&this.finishDrawing()},Vh.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===Vh.Mode_.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===Vh.Mode_.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},Vh.prototype.finishDrawing=function(){var t=this.abortDrawing_(),e=this.sketchCoords_,i=t.getGeometry();this.mode_===Vh.Mode_.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===Vh.Mode_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===W.MULTI_POINT?t.setGeometry(new ln([e])):this.type_===W.MULTI_LINE_STRING?t.setGeometry(new nn([e])):this.type_===W.MULTI_POLYGON&&t.setGeometry(new Cn([e])),this.dispatchEvent(new Vh.Event(bh.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},Vh.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},Vh.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Vh.Event(bh.DRAWSTART,this.sketchFeature_))},Vh.prototype.shouldStopEvent=Go.FALSE,Vh.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},Vh.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},Vh.createRegularPolygon=function(t,e){return function(i,o){var r=i[0],n=i[1],s=Math.sqrt(Ia.squaredDistance(r,n)),a=o||xn.fromCircle(new Zo(r),t),h=e||Math.atan((n[1]-r[1])/(n[0]-r[0]));return xn.makeRegular(a,r,s,h),a}},Vh.createBox=function(){return function(t,e){var i=U.boundingExtent(t),o=e||new xn(null);return o.setCoordinates([[U.getBottomLeft(i),U.getBottomRight(i),U.getTopRight(i),U.getTopLeft(i),U.getBottomLeft(i)]]),o}},Vh.getMode_=function(t){var e;return t===W.POINT||t===W.MULTI_POINT?e=Vh.Mode_.POINT:t===W.LINE_STRING||t===W.MULTI_LINE_STRING?e=Vh.Mode_.LINE_STRING:t===W.POLYGON||t===W.MULTI_POLYGON?e=Vh.Mode_.POLYGON:t===W.CIRCLE&&(e=Vh.Mode_.CIRCLE),e},Vh.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},Vh.Event=function(t,e){_t.call(this,t),this.feature=e},C.inherits(Vh.Event,_t);var Wh=Vh,Xh={id:{type:[String,Number],default:function(){return rh()()}},active:{type:Boolean,default:!0},priority:{type:Number,default:0}},Yh={mixins:[wo,Co],props:Xh,methods:{createOlObject:function(){var t=this;return bi()(mi.a.mark(function e(){var i;return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createInteraction();case 2:return(i=e.sent).setActive(t.active),i.setProperties({id:t.id,priority:t.priority}),e.abrupt("return",i);case 6:case"end":return e.stop()}},e,t)}))()},createInteraction:function(){throw new Error("Not implemented method")},getServices:function(){var t=this;return gi(wo.methods.getServices.call(this),{get interaction(){return t.$interaction}})},init:function(){return wo.methods.init.call(this)},deinit:function(){return wo.methods.deinit.call(this)},mount:function(){this.$interactionsContainer&&this.$interactionsContainer.addInteraction(this),this.subscribeAll()},unmount:function(){this.unsubscribeAll(),this.$interactionsContainer&&this.$interactionsContainer.removeInteraction(this)},refresh:function(){return wo.methods.refresh.call(this)}},watch:{active:function(t){this.$interaction&&t!==this.$interaction.getActive()&&this.$interaction.setActive(t)},priority:function(t){this.$interactionsContainer&&(this.$interaction.set("priority",t),this.$interactionsContainer.sortInteractions())}},stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;li()(this,{$interaction:{enumerable:!0,get:function(){return t.$olObject}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}},$interactionsContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.interactionsContainer}}})}},zh={created:function(){this._styles=void 0},methods:{getDefaultStyles:function(){},getServices:function(){var t=this;return{get stylesContainer(){return t}}},getStyles:function(){return this._styles},addStyle:function(t){var e=this.getStyles(),i=t instanceof E.a?t.$style:t;Object(Ze.k)(i)?e=t:(Array.isArray(e)||(e=[]),t=t instanceof E.a?t:{$style:t,condition:!0},e.includes(t)||e.push(t)),this.setStyle(e)},setStyle:function(t){if(t!==this._styles){this._styles=t;var e=this.getStyleTarget();e&&(null===this._styles||this._styles?e.setStyle(this.createStyleFunc()):e.setStyle(void 0))}},removeStyle:function(t){var e=this.getStyles();e===t?e=void 0:Array.isArray(e)&&((e=e.filter(function(e){return t instanceof E.a?e!==t:e.$style!==t})).length||(e=void 0)),this.setStyle(e)},getStyleTarget:function(){throw new Error("Not implemented method")},createStyleFunc:function(){var t=this,e=this.getDefaultStyles();return function(i,o){if(i.getGeometry()){var r=t.getStyles();if(r&&(Object(Ze.k)(r)||Object(Ze.k)(r.$style)))r=(Object(Ze.k)(r)?r:r.$style)(i,o);else Array.isArray(r)&&(r=Object(Ze.w)(r,function(t,e){var r=e.$style,n=e.condition;return(null==n||!0===n||Object(Ze.k)(n)&&n(i,o))&&t.push(r),t},[]));return null===r||Array.isArray(r)&&r.length?r:(r=e)?Object(Ze.k)(r)?r(i,o):r:void 0}}}}},Kh={FRACTION:"fraction",PIXELS:"pixels"},Hh=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/Hh.getKey=function(t,e,i){return e+":"+t+":"+(i?ds.asString(i):"null")},Hh.prototype.clear=function(){this.cache_={},this.cacheSize_=0},Hh.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t,e,i=0;for(t in this.cache_)e=this.cache_[t],0!=(3&i++)||e.hasListener()||(delete this.cache_[t],--this.cacheSize_)}},Hh.prototype.get=function(t,e,i){var o=Hh.getKey(t,e,i);return o in this.cache_?this.cache_[o]:null},Hh.prototype.set=function(t,e,i,o){var r=Hh.getKey(t,e,i);this.cache_[r]=o,++this.cacheSize_},Hh.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var $h=Hh,qh={};qh.iconImageCache=new $h;var Zh=qh,Jh=function(t,e,i,o,r,n){xt.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==o&&(this.image_.crossOrigin=o),this.canvas_=n?document.createElement("CANVAS"):null,this.color_=n,this.imageListenerKeys_=null,this.imageState_=r,this.size_=i,this.src_=e,this.tainting_=!1,this.imageState_==Es.LOADED&&this.determineTainting_()};C.inherits(Jh,xt),Jh.get=function(t,e,i,o,r,n){var s=Zh.iconImageCache,a=s.get(e,o,n);return a||(a=new Jh(t,e,i,o,r,n),s.set(e,o,n,a)),a},Jh.prototype.determineTainting_=function(){var t=Ct.createCanvasContext2D(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},Jh.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Et.CHANGE)},Jh.prototype.handleImageError_=function(){this.imageState_=Es.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},Jh.prototype.handleImageLoad_=function(){this.imageState_=Es.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},Jh.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},Jh.prototype.getImageState=function(){return this.imageState_},Jh.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){var e=this.size_[0],i=this.size_[1],o=Ct.createCanvasContext2D(e,i);o.fillRect(0,0,e,i),this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},Jh.prototype.getSize=function(){return this.size_},Jh.prototype.getSrc=function(){return this.src_},Jh.prototype.load=function(){if(this.imageState_==Es.IDLE){this.imageState_=Es.LOADING,this.imageListenerKeys_=[vt.listenOnce(this.image_,Et.ERROR,this.handleImageError_,this),vt.listenOnce(this.image_,Et.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},Jh.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,o=this.color_[0]/255,r=this.color_[1]/255,n=this.color_[2]/255,s=0,a=i.length;s<a;s+=4)i[s]*=o,i[s+1]*=r,i[s+2]*=n;t.putImageData(e,0,0)}},Jh.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(vt.unlistenByKey),this.imageListenerKeys_=null};var Qh=Jh,tl={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},el=function(t){var e=t||{};this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:tl.TOP_LEFT,this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:Kh.FRACTION,this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:Kh.FRACTION,this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var i=void 0!==e.img?e.img:null,o=void 0!==e.imgSize?e.imgSize:null,r=e.src;M.assert(!(void 0!==r&&i),4),M.assert(!i||i&&o,5),void 0!==r&&0!==r.length||!i||(r=i.src||C.getUid(i).toString()),M.assert(void 0!==r&&r.length>0,6);var n=void 0!==e.src?Es.IDLE:Es.LOADED;this.color_=void 0!==e.color?ds.asArray(e.color):null,this.iconImage_=Qh.get(i,r,o,this.crossOrigin_,n,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:tl.TOP_LEFT,this.origin_=null,this.size_=void 0!==e.size?e.size:null;var s=void 0!==e.opacity?e.opacity:1,a=void 0!==e.rotateWithView&&e.rotateWithView,h=void 0!==e.rotation?e.rotation:0,l=void 0!==e.scale?e.scale:1,p=void 0===e.snapToPixel||e.snapToPixel;Ms.call(this,{opacity:s,rotation:h,scale:l,snapToPixel:p,rotateWithView:a})};C.inherits(el,Ms),el.prototype.clone=function(){return new el({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},el.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Kh.FRACTION||this.anchorYUnits_==Kh.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Kh.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==Kh.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=tl.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=tl.TOP_RIGHT&&this.anchorOrigin_!=tl.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=tl.BOTTOM_LEFT&&this.anchorOrigin_!=tl.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},el.prototype.getColor=function(){return this.color_},el.prototype.getImage=function(t){return this.iconImage_.getImage(t)},el.prototype.getImageSize=function(){return this.iconImage_.getSize()},el.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},el.prototype.getImageState=function(){return this.iconImage_.getImageState()},el.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},el.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=tl.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=tl.TOP_RIGHT&&this.offsetOrigin_!=tl.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=tl.BOTTOM_LEFT&&this.offsetOrigin_!=tl.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},el.prototype.getSrc=function(){return this.iconImage_.getSrc()},el.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},el.prototype.listenImageChange=function(t,e){return vt.listen(this.iconImage_,Et.CHANGE,t,e)},el.prototype.load=function(){this.iconImage_.load()},el.prototype.unlistenImageChange=function(t,e){vt.unlisten(this.iconImage_,Et.CHANGE,t,e)};var il=el,ol={POINT:"point",LINE:"line"},rl=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Ds({color:rl.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:ol.POINT;var i=void 0===e.overflow?e.exceedLength:e.overflow;this.overflow_=void 0!==i&&i,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};rl.DEFAULT_FILL_COLOR_="#333",rl.prototype.clone=function(){return new rl({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY()})},rl.prototype.getOverflow=function(){return this.overflow_},rl.prototype.getFont=function(){return this.font_},rl.prototype.getMaxAngle=function(){return this.maxAngle_},rl.prototype.getPlacement=function(){return this.placement_},rl.prototype.getOffsetX=function(){return this.offsetX_},rl.prototype.getOffsetY=function(){return this.offsetY_},rl.prototype.getFill=function(){return this.fill_},rl.prototype.getRotateWithView=function(){return this.rotateWithView_},rl.prototype.getRotation=function(){return this.rotation_},rl.prototype.getScale=function(){return this.scale_},rl.prototype.getStroke=function(){return this.stroke_},rl.prototype.getText=function(){return this.text_},rl.prototype.getTextAlign=function(){return this.textAlign_},rl.prototype.getTextBaseline=function(){return this.textBaseline_},rl.prototype.getBackgroundFill=function(){return this.backgroundFill_},rl.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},rl.prototype.getPadding=function(){return this.padding_},rl.prototype.setOverflow=function(t){this.overflow_=t},rl.prototype.setFont=function(t){this.font_=t},rl.prototype.setMaxAngle=function(t){this.maxAngle_=t},rl.prototype.setOffsetX=function(t){this.offsetX_=t},rl.prototype.setOffsetY=function(t){this.offsetY_=t},rl.prototype.setPlacement=function(t){this.placement_=t},rl.prototype.setFill=function(t){this.fill_=t},rl.prototype.setRotation=function(t){this.rotation_=t},rl.prototype.setScale=function(t){this.scale_=t},rl.prototype.setStroke=function(t){this.stroke_=t},rl.prototype.setText=function(t){this.text_=t},rl.prototype.setTextAlign=function(t){this.textAlign_=t},rl.prototype.setTextBaseline=function(t){this.textBaseline_=t},rl.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},rl.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},rl.prototype.setPadding=function(t){this.padding_=t};var nl=rl,sl=i("rZKj"),al=i.n(sl);function hl(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[Fe.LINE_STRING]=[{strokeColor:e,strokeWidth:5},{strokeColor:i,strokeWidth:3}],t[Fe.MULTI_LINE_STRING]=t[Fe.LINE_STRING],t[Fe.POLYGON]=[{fillColor:[255,255,255,.5]}].concat(t[Fe.LINE_STRING]),t[Fe.MULTI_POLYGON]=t[Fe.POLYGON],t[Fe.CIRCLE]=t[Fe.POLYGON].concat(t[Fe.LINE_STRING]),t[Fe.POINT]=[{imageRadius:6,fillColor:i,strokeColor:e,strokeWidth:1.5,zIndex:1/0}],t[Fe.MULTI_POINT]=t[Fe.POINT],t[Fe.GEOMETRY_COLLECTION]=t[Fe.POLYGON].concat(t[Fe.LINE_STRING],t[Fe.POINT]),t}var ll=function(t){return null==t||"number"!=typeof t&&(("string"==typeof t||Array.isArray(t))&&!t.length||!lo()(t).length)};function pl(t){if(!ll(t)){var e={text:function(t){if(null==t.text)return;if(t.text instanceof nl)return t.text;var e={text:t.text},i=["normal",t.textFontSize?t.textFontSize+"px":void 0,t.textFont].filter(function(t){return!!t}).join(" ");if(Fo()(e,Object(Ze.t)(["textScale","textRotation","textOffsetX","textOffsetY","textAlign"],t),{font:i,fill:fl(t,"text")||fl(t),stroke:dl(t,"text")||dl(t)}),!ll(e))return new nl(e)}(t),fill:fl(t),stroke:dl(t),image:function(t){if(ll(t.imageSrc)&&ll(t.image)&&ll(t.imagePoints)&&!Object(Ze.m)(t.imageRadius))return;if(t.image instanceof Ms)return t.image;var e=void 0,i=void 0;ll(t.imageSrc)&&ll(t.image)?null!=t.imagePoints?(i=As,e=n()({},t,{points:t.imagePoints,radius:t.imageRadius,radius1:t.imageRadius1,radius2:t.imageRadius2,angle:t.imageAngle,rotation:t.imageRotation})):(i=Fs,e=n()({},t,{radius:t.imageRadius})):(i=il,e=n()({},t,{anchor:t.imageAnchor,anchorOrigin:t.imageAnchorOrigin,color:t.imageColor,offset:t.imageOffset,offsetOrigin:t.imageOffsetOrigin,opacity:t.imageOpacity,scale:t.imageScale,rotation:t.imageRotation,size:t.imageSize,img:t.image,imgSize:t.imageImgSize,src:t.imageSrc,crossOrigin:t.imageCrossOrigin}));if(e=n()({},e,{fill:fl(t,"image")||fl(t),stroke:dl(t,"image")||dl(t),snapToPixel:!0}),!ll(e))return new i(e)}(t),geometry:function(t){if(Object(Ze.k)(t.geom))return function(e){return t.geom(e,o)};return t.geom}
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/(t),zIndex:t.zIndex};return ll(e)?void 0:new Us(e)}}var ul=function(t){return function(e){return t+(t?Object(Ze.z)(e):e)}};function cl(t){var e=t;return"string"==typeof t&&(e=al()(t).rgba),e}function fl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=ul(e),o=["fillColor"].map(i),r=i("fill");if(t[r]instanceof Ds)return t[r];var n=Object(Ze.w)(t,function(t,e,r){return!1===o.includes(r)?t:("color"===(r=Object(Ze.p)(r.replace(new RegExp(i("fill")),"")))&&(e=cl(e)),t[r]=e,t)},{});return ll(n)?void 0:new Ds(n)}function dl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=ul(e),o=["strokeColor","strokeWidth","strokeDash","strokeCap","strokeJoin"].map(i),r=i("stroke");if(t[r]instanceof ks)return t[r];var n=Object(Ze.w)(t,function(t,e,r){if(!1===o.includes(r))return t;switch(r){case i("strokeColor"):case i("strokeWidth"):r=Object(Ze.p)(r.replace(new RegExp(i("stroke")),""));break;case i("strokeDash"):case i("strokeCap"):case i("strokeJoin"):r="line"+r.replace(new RegExp(i("stroke")),"")}return"color"===r&&(e=cl(e)),t[r]=e,t},{});return ll(n)?void 0:new ks(n)}var yl=function(t){return Object(Ze.z)(Object(Ze.a)(t))},gl={source:{type:String,required:!0},clickTolerance:{type:Number,default:6},snapTolerance:{type:Number,default:12},type:{type:String,required:!0,validator:function(t){return gh()(Fe).includes(yl(t))}},stopClick:{type:Boolean,default:!1},maxPoints:Number,minPoints:Number,finishCondition:Function,geometryFunction:Function,geometryName:{type:String,default:"geometry"},condition:{type:Function,default:_h.noModifierKeys},freehand:{type:Boolean,default:!1},freehandCondition:{type:Function,default:_h.shiftKeyOnly},wrapX:{type:Boolean,default:!1}},vl={createInteraction:function(){var t=this;return bi()(mi.a.mark(function e(){var i,o,r;return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.makeIdent(t.source),e.next=3,t.$identityMap.get(i,t.$options.INSTANCE_PROMISE_POOL);case 3:return o=e.sent,Object(Ze.k)(o.getFeatures)&&na(r=o.getFeatures())&&(o=r),e.abrupt("return",new Wh({source:sa(o)?o:void 0,features:na(o)?o:void 0,clickTolerance:t.clickTolerance,snapTolerance:t.snapTolerance,type:yl(t.type),stopClick:t.stopClick,maxPoints:t.maxPoints,minPoints:t.minPoints,finishCondition:t.finishCondition,style:t.createStyleFunc(),geometryFunction:t.geometryFunction,geometryName:t.geometryName,condition:t.condition,freehand:t.freehand,freehandCondition:t.freehandCondition,wrapX:t.wrapX}));case 6:case"end":return e.stop()}},e,t)}))()},getDefaultStyles:function(){var t=Object(Ze.q)(hl(),function(t){return t.map(pl)});return function(e){if(e.getGeometry())return t[e.getGeometry().getType()]}},getServices:function(){return gi(Yh.methods.getServices.call(this),zh.methods.getServices.call(this))},getStyleTarget:function(){return this.$interaction},mount:function(){Yh.methods.mount.call(this)},unmount:function(){Yh.methods.unmount.call(this)},setStyle:function(t){t!==this._styles&&(this._styles=t,this.refresh())},subscribeAll:function(){(function(){var t,e=this;si(this);var i=ls.call(Bi,(t=cs(this.$interaction,"drawstart"),Qi).call(t,function(t){return nh(t.feature),t}),cs(this.$interaction,"drawend"));this.subscribeTo(i,function(t){++e.rev,e.$emit(t.type,t)})}).call(this)}},ml=Ao(["source","type"],function(){this.recreate()}),_l={name:"vl-interaction-draw",mixins:[Yh,zh],props:gl,methods:vl,watch:ml,stubVNode:{empty:!1,attrs:function(){return{class:this.$options.name}}}};var bl={Interaction:_l,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(_l,e),t.component(_l.name,_l)}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/
var xl={mixins:[fa],methods:{getGeometryTarget:function(){throw new Error("Not implemented method")},getGeometry:function(){return this._geometry},getServices:function(){var t=this;return{get geometryContainer(){return t}}},setGeometry:function(t){t instanceof E.a?t=t.$geometry:Object(Ze.n)(t)&&(t=this.readGeometryInDataProj(t)),t!==this._geometry&&(this._geometry=t);var e=this.getGeometryTarget();e&&t!==e.getGeometry()&&e.setGeometry(t)}},created:function(){this._geometry=void 0,li()(this,{$geometry:{enumerable:!0,get:this.getGeometry}})}},El={id:{type:[String,Number],default:function(){return rh()()}},properties:{type:Object,default:function(){return uo()(null)}}},Sl={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:[t.$options.name],staticStyle:{display:"none !important"},attrs:{id:[t.$options.name,t.id].join("-")}},[t._t("default",null,{id:t.id,properties:t.properties,geometry:t.geometry,point:t.point})],2)},staticRenderFns:[],name:"vl-feature",mixins:[To,Co,xl,zh,fa],props:El,computed:{geometry:function(){if(this.rev&&this.resolvedDataProjection&&this.$geometry)return this.writeGeometryInDataProj(this.$geometry)},point:function(){if(this.pointViewProj&&this.resolvedDataProjection)return this.pointToDataProj(this.pointViewProj)},geometryViewProj:function(){if(this.rev&&this.resolvedDataProjection&&this.$geometry)return this.writeGeometryInViewProj(this.$geometry)},pointViewProj:function(){if(this.rev&&this.$geometry)return jn(this.$geometry)}},methods:{createOlObject:function(){var t=new Vs(this.properties);return t.setId(this.id),t.setGeometry(this.$geometry),t},getGeometryTarget:function(){return this.$feature},getServices:function(){var t=this;return gi(To.methods.getServices.call(this),xl.methods.getServices.call(this),zh.methods.getServices.call(this),{get feature(){return t.$feature}})},getStyleTarget:function(){return this.$feature},isAtPixel:function(t){var e=this;return ei(this),this.$map.forEachFeatureAtPixel(t,function(t){return t===e.$feature},{layerFilter:function(t){return t===e.$layer}})},mount:function(){this.$featuresContainer&&this.$featuresContainer.addFeature(this),this.subscribeAll()},unmount:function(){this.unsubscribeAll(),this.$featuresContainer&&this.$featuresContainer.removeFeature(this)},subscribeAll:function(){(function(){var t,e=this;i=this,Qe(i.$feature,'component has "$feature" property');var i;var o=(t=(t=cs(this.$feature,"propertychange",function(t){var i,o=t.key;return{prop:o,value:(i=o,e.$feature.get(i))}}),ur).call(t,100),er).call(t,Ze.i),r=(t=(t=(t=(t=cs(this.$feature,"change"),Qi).call(t,function(){return Bi.create(function(t){e.$feature.getId()!==e.id&&t.next({prop:"id",value:e.$feature.getId()})})}),function(t=Number.POSITIVE_INFINITY){return hs(t)(this)}).call(t),ur).call(t,100),er).call(t,Ze.i),n=ls.call(Bi,o,r);this.subscribeTo(n,function(t){var i=t.prop,o=t.value;++e.rev,"id"===i?e.$emit("update:"+i,o):i!==e.$feature.getGeometryName()&&e.$emit("update:properties",Fo()({},e.properties,xo()({},i,o)))})}).call(this)}},watch:{id:function(t){this.$feature&&t!==this.$feature.getId()&&this.$feature.setId(t)},properties:function(t){t=Object(Ze.u)(t),this.$feature&&!Object(Ze.i)(t,Object(Ze.u)(this.$feature.getProperties()))&&this.$feature.setProperties(Object(Ze.u)(t))}},created:function(){var t=this;li()(this,{$feature:{enumerable:!0,get:function(){return t.$olObject}},$layer:{enumerable:!0,get:function(){return t.$services&&t.$services.layer}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}},$featuresContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.featuresContainer}}})}};var Tl={Feature:Sl,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Sl,e),t.component(Sl.name,Sl)}},wl={color:[String,Array]},Cl={name:"vl-style-fill",mixins:[_a],props:wl,methods:{createStyle:function(){return new Ds({color:this.color})},mount:function(){this.$stylesContainer&&this.$stylesContainer.setFill(this)},unmount:function(){this.$stylesContainer&&this.$stylesContainer.setFill(void 0)}},watch:{color:function(t){this.$style&&(this.$style.setColor(t),this.refresh())}}},Rl={Style:Cl,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Cl,e),t.component(Cl.name,Cl)}},Pl={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Il=function(t){ee.call(this);var e=t||{};this.position_=null,this.transform_=lt.identityTransform,this.sphere_=new Y(et.RADIUS),this.watchId_=void 0,vt.listen(this,ee.getChangeEventType(Pl.PROJECTION),this.handleProjectionChanged_,this),vt.listen(this,ee.getChangeEventType(Pl.TRACKING),this.handleTrackingChanged_,this),void 0!==e.projection&&this.setProjection(e.projection),void 0!==e.trackingOptions&&this.setTrackingOptions(e.trackingOptions),this.setTracking(void 0!==e.tracking&&e.tracking)};C.inherits(Il,ee),Il.prototype.disposeInternal=function(){this.setTracking(!1),ee.prototype.disposeInternal.call(this)},Il.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=lt.getTransformFromProjections(lt.get("EPSG:4326"),t),this.position_&&this.set(Pl.POSITION,this.transform_(this.position_)))},Il.prototype.handleTrackingChanged_=function(){if(xs.GEOLOCATION){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},Il.prototype.positionChange_=function(t){var e=t.coords;this.set(Pl.ACCURACY,e.accuracy),this.set(Pl.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(Pl.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Pl.HEADING,null===e.heading?void 0:A.toRadians(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(Pl.POSITION,i),this.set(Pl.SPEED,null===e.speed?void 0:e.speed);var o=xn.circular(this.sphere_,this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(Pl.ACCURACY_GEOMETRY,o),this.changed()},Il.prototype.positionError_=function(t){t.type=Et.ERROR,this.setTracking(!1),this.dispatchEvent(t)},Il.prototype.getAccuracy=function(){return this.get(Pl.ACCURACY)},Il.prototype.getAccuracyGeometry=function(){return this.get(Pl.ACCURACY_GEOMETRY)||null},Il.prototype.getAltitude=function(){return this.get(Pl.ALTITUDE)},Il.prototype.getAltitudeAccuracy=function(){return this.get(Pl.ALTITUDE_ACCURACY)},Il.prototype.getHeading=function(){return this.get(Pl.HEADING)},Il.prototype.getPosition=function(){return this.get(Pl.POSITION)},Il.prototype.getProjection=function(){return this.get(Pl.PROJECTION)},Il.prototype.getSpeed=function(){return this.get(Pl.SPEED)},Il.prototype.getTracking=function(){return this.get(Pl.TRACKING)},Il.prototype.getTrackingOptions=function(){return this.get(Pl.TRACKING_OPTIONS)},Il.prototype.setProjection=function(t){this.set(Pl.PROJECTION,lt.get(t))},Il.prototype.setTracking=function(t){this.set(Pl.TRACKING,t)},Il.prototype.setTrackingOptions=function(t){this.set(Pl.TRACKING_OPTIONS,t)};var Ml=Il;
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var Ll=function t(e,i,o,r,n){var s;if(Array.isArray(i))return ls.call.apply(ls,[Bi].concat(no()(i.map(function(i){return t(e,i)}))));n=n||function(t,e){return t.get(e)};var a,h,l=cs(e,"change:"+i,function(){return n(e,i)});null!=r&&(l=(a=l,ur).call(a,r));o&&(Object(Ze.k)(o)||(o=Ze.i),l=(h=l,er).call(h,o));return(s=l,Qi).call(s,function(t){return{prop:i,value:t}})},Al={tracking:{type:Boolean,default:!0},trackingOptions:Object,projection:String},Ol={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:[t.$options.name],staticStyle:{display:"none !important"}},[t._t("default",null,{accuracy:t.accuracy,altitude:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,position:t.position,speed:t.speed})],2)},staticRenderFns:[],name:"vl-geoloc",mixins:[To,Co,fa],props:Al,computed:{accuracy:function(){if(this.rev&&this.$geolocation)return this.$geolocation.getAccuracy()},altitude:function(){if(this.rev&&this.$geolocation)return this.$geolocation.getAltitude()},altitudeAccuracy:function(){if(this.rev&&this.$geolocation)return this.$geolocation.getAltitudeAccuracy()},heading:function(){if(this.rev&&this.$geolocation)return this.$geolocation.getHeading()},speed:function(){if(this.rev&&this.$geolocation)return this.$geolocation.getSpeed()},position:function(){if(this.rev&&this.$geolocation)return this.$geolocation.getPosition()},positionViewProj:function(){if(this.position&&this.resolvedDataProjection)return this.pointToViewProj(this.position)}},methods:{createOlObject:function(){return new Ml({tracking:this.tracking,trackingOptions:this.trackingOptions,projection:this.resolvedDataProjection})},mount:function(){this.subscribeAll()},unmount:function(){oi(this),this.unsubscribeAll(),this.$geolocation.setTracking(!1)},subscribeAll:function(){(function(){var t=this;oi(this);var e=ls.call(Bi,Ll(this.$geolocation,["accuracy","altitude","altitudeaccuracy","heading","speed"],!0,100),Ll(this.$geolocation,"position",!0,100,function(){return t.position}));this.subscribeTo(e,function(e){var i=e.prop,o=e.value;++t.rev,t.$emit("update:"+i,o)})}).call(this)}},watch:{tracking:function(t){this.$geolocation&&t!==this.$geolocation.getTracking()&&this.$geolocation.setTracking(t)},tracingOptions:function(t){this.$geolocation&&this.$geolocation.setTrackingOptions(t)},resolvedDataProjection:function(t){this.$geolocation&&this.$geolocation.setProjection(t)}},stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;li()(this,{$geolocation:{enumerable:!0,get:function(){return t.$olObject}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}}})}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var Fl={Geoloc:Ol,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Ol,e),t.component(Ol.name,Ol)}},Nl={src:{type:String,required:!0},size:{type:Array,validator:function(t){return 2===t.length}},anchor:{type:Array,default:function(){return[.5,.5]},validator:function(t){return 2===t.length}},anchorOrigin:{type:String,default:"top-left"},anchorXUnits:{type:String,default:"fraction"},anchorYUnits:{type:String,default:"fraction"},color:[Array,String],crossOrigin:String,offset:{type:Array,default:function(){return[0,0]},validator:function(t){return 2===t.length}},offsetOrigin:{type:String,default:"top-left"},opacity:{type:Number,default:1},scale:{type:Number,default:1},rotateWithView:{type:Boolean,default:!1},rotation:{type:Number,default:0}},Dl={createStyle:function(){return new il({anchor:this.anchor,anchorOrigin:this.anchorOrigin,anchorXUnits:this.anchorXUnits,anchorYUnits:this.anchorYUnits,color:this.color,crossOrigin:this.crossOrigin,offset:this.offset,offsetOrigin:this.offsetOrigin,opacity:this.opacity,scale:this.scale,snapToPixel:this.snapToPixel,rotateWithView:this.rotateWithView,rotation:this.rotation,size:this.size,src:this.src})}},jl=Ao(["src","size","anchor","scale"],function(){this.refresh()}),kl={name:"vl-style-icon",mixins:[xa],props:Nl,methods:Dl,watch:jl},Gl={Style:kl,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(kl,e),t.component(kl.name,kl)}},Ul=function(t){var e=t||{};kh.call(this,e),this.type=Ah.IMAGE};C.inherits(Ul,kh),Ul.prototype.getSource;var Bl=Ul,Vl={id:{type:[String,Number],default:function(){return rh()()}},extent:{type:Array,validator:function(t){return 4===t.length}},minResolution:Number,maxResolution:Number,opacity:{type:Number,default:1},overlay:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},zIndex:Number},Wl={mixins:[wo,Co,ph],props:Vl,methods:{createOlObject:function(){var t=this;return bi()(mi.a.mark(function e(){var i;return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createLayer();case 2:return(i=e.sent).set("id",t.id),e.abrupt("return",i);case 5:case"end":return e.stop()}},e,t)}))()},createLayer:function(){throw new Error("Not implemented method")},init:function(){return wo.methods.init.call(this)},deinit:function(){return wo.methods.deinit.call(this)},isAtPixel:function(t){var e=this;return ei(this),this.$map.forEachLayerAtPixel(t,function(t){return t===e.$layer})},getServices:function(){var t=this;return gi(wo.methods.getServices.call(this),ph.methods.getServices.call(this),{get layer(){return t.$layer}})},getSourceTarget:function(){return this.$layer},mount:function(){this.overlay&&this.$map?this.setMap(this.$map):this.$layersContainer&&this.$layersContainer.addLayer(this),this.subscribeAll()},unmount:function(){this.unsubscribeAll(),this.overlay?this.setMap(void 0):this.$layersContainer&&this.$layersContainer.removeLayer(this)},refresh:function(){return wo.methods.refresh.call(this)},setMap:function(t){Qe(this.$layer,'component has "$layer" property'),t=t instanceof E.a?t.$map:t,this.$layer.setMap(t)}},watch:{id:function(t){this.$layer&&t!==this.$layer.get("id")&&this.$layer.set("id",t)},maxResolution:function(t){this.$layer&&t!==this.$layer.getMaxResolution()&&this.$layer.setMaxResolution(t)},minResolution:function(t){this.$layer&&t!==this.$layer.getMinResolution()&&this.$layer.setMinResolution(t)},opacity:function(t){this.$layer&&t!==this.$layer.getOpacity()&&this.$layer.setOpacity(t)},visible:function(t){this.$layer&&t!==this.$layer.getVisible()&&this.$layer.setVisible(t)},zIndex:function(t){this.$layer&&t!==this.$layer.getZIndex()&&this.$layer.setZIndex(t)}},stubVNode:{attrs:function(){return{id:[this.$options.name,this.id].join("-"),class:this.$options.name}}},created:function(){var t=this;li()(this,{$layer:{enumerable:!0,get:function(){return t.$olObject}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}},$layersContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.layersContainer}}})}},Xl={name:"vl-layer-image",mixins:[Wl],props:{},methods:{createLayer:function(){return new Bl({id:this.id,minResolution:this.minResolution,maxResolution:this.maxResolution,opacity:this.opacity,visible:this.visible,extent:this.extent,zIndex:this.zIndex,source:this._source})}}},Yl={Layer:Xl,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Xl,e),t.component(Xl.name,Xl)}},zl=function(t,e,i,o){xt.call(this),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=o};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/C.inherits(zl,xt),zl.prototype.changed=function(){this.dispatchEvent(Et.CHANGE)},zl.prototype.getExtent=function(){return this.extent},zl.prototype.getImage=function(){},zl.prototype.getPixelRatio=function(){return this.pixelRatio_},zl.prototype.getResolution=function(){return this.resolution},zl.prototype.getState=function(){return this.state},zl.prototype.load=function(){};var Kl=zl,Hl=function(t,e,i,o,r,n){Kl.call(this,t,e,i,Es.IDLE),this.src_=o,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.state=Es.IDLE,this.imageLoadFunction_=n};C.inherits(Hl,Kl),Hl.prototype.getImage=function(){return this.image_},Hl.prototype.handleImageError_=function(){this.state=Es.ERROR,this.unlistenImage_(),this.changed()},Hl.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=U.getHeight(this.extent)/this.image_.height),this.state=Es.LOADED,this.unlistenImage_(),this.changed()},Hl.prototype.load=function(){this.state!=Es.IDLE&&this.state!=Es.ERROR||(this.state=Es.LOADING,this.changed(),this.imageListenerKeys_=[vt.listenOnce(this.image_,Et.ERROR,this.handleImageError_,this),vt.listenOnce(this.image_,Et.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},Hl.prototype.setImage=function(t){this.image_=t},Hl.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(vt.unlistenByKey),this.imageListenerKeys_=null};var $l=Hl,ql=function(t,e,i,o,r,n){this.targetProj_=e,this.maxSourceExtent_=t.getExtent();var s=e.getExtent(),a=s?U.getIntersection(i,s):i,h=U.getCenter(a),l=Ft.calculateSourceResolution(t,e,h,o),p=C.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new Dt(t,e,a,this.maxSourceExtent_,l*p),this.targetResolution_=o,this.targetExtent_=i;var u=this.triangulation_.calculateSourceExtent();this.sourceImage_=n(u,l,r),this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1,this.canvas_=null,this.sourceListenerKey_=null;var c=Es.LOADED;this.sourceImage_&&(c=Es.IDLE),Kl.call(this,i,o,this.sourcePixelRatio_,c)};C.inherits(ql,Kl),ql.prototype.disposeInternal=function(){this.state==Es.LOADING&&this.unlistenSource_(),Kl.prototype.disposeInternal.call(this)},ql.prototype.getImage=function(){return this.canvas_},ql.prototype.getProjection=function(){return this.targetProj_},ql.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==Es.LOADED){var e=U.getWidth(this.targetExtent_)/this.targetResolution_,i=U.getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=Ft.render(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},ql.prototype.load=function(){if(this.state==Es.IDLE){this.state=Es.LOADING,this.changed();var t=this.sourceImage_.getState();t==Es.LOADED||t==Es.ERROR?this.reproject_():(this.sourceListenerKey_=vt.listen(this.sourceImage_,Et.CHANGE,function(t){var e=this.sourceImage_.getState();e!=Es.LOADED&&e!=Es.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},ql.prototype.unlistenSource_=function(){vt.unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null};var Zl=ql,Jl=function(t){oe.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state}),this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0};C.inherits(Jl,oe),Jl.prototype.getResolutions=function(){return this.resolutions_},Jl.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Xt.linearFindNearest(this.resolutions_,t,0);t=this.resolutions_[e]}return t},Jl.prototype.getImage=function(t,e,i,o){var r=this.getProjection();if(C.ENABLE_RASTER_REPROJECTION&&r&&o&&!lt.equivalent(r,o)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&lt.equivalent(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==e&&U.equals(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Zl(r,o,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,r)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return r&&(o=r),this.getImageInternal(t,e,i,o)},Jl.prototype.getImageInternal=function(t,e,i,o){},Jl.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case Es.LOADING:this.dispatchEvent(new Jl.Event(Jl.EventType_.IMAGELOADSTART,e));break;case Es.LOADED:this.dispatchEvent(new Jl.Event(Jl.EventType_.IMAGELOADEND,e));break;case Es.ERROR:this.dispatchEvent(new Jl.Event(Jl.EventType_.IMAGELOADERROR,e))}},Jl.defaultImageLoadFunction=function(t,e){t.getImage().src=e},Jl.Event=function(t,e){_t.call(this,t),this.image=e},C.inherits(Jl.Event,_t),Jl.EventType_={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};var Ql=Jl,tp=function(t){var e=t.imageExtent,i=void 0!==t.crossOrigin?t.crossOrigin:null,o=void 0!==t.imageLoadFunction?t.imageLoadFunction:Ql.defaultImageLoadFunction;Ql.call(this,{attributions:t.attributions,logo:t.logo,projection:lt.get(t.projection)}),this.image_=new $l(e,void 0,1,t.url,i,o),this.imageSize_=t.imageSize?t.imageSize:null,vt.listen(this.image_,Et.CHANGE,this.handleImageChange,this)};C.inherits(tp,Ql),tp.prototype.getImageInternal=function(t,e,i,o){return U.intersects(t,this.image_.getExtent())?this.image_:null},tp.prototype.handleImageChange=function(t){if(this.image_.getState()==Es.LOADED){var e,i,o=this.image_.getExtent(),r=this.image_.getImage();this.imageSize_?(e=this.imageSize_[0],i=this.imageSize_[1]):(e=r.width,i=r.height);var n=U.getHeight(o)/i,s=Math.ceil(U.getWidth(o)/n);if(s!=e){var a=Ct.createCanvasContext2D(s,i),h=a.canvas;a.drawImage(r,0,0,e,i,0,0,h.width,h.height),this.image_.setImage(h)}}Ql.prototype.handleImageChange.call(this,t)};var ep=tp,ip={crossOrigin:String,projection:{type:String,default:Pe}},op={extent:{type:Array,required:!0,validator:function(t){return 4===t.length}},loadFunc:Function,size:{type:Array,validator:function(t){return 2===t.length}},url:{type:String,required:!0,validator:function(t){return!!t.length}}},rp={name:"vl-source-image-static",mixins:[{mixins:[Po],props:ip,methods:{init:function(){return Po.methods.init.call(this)},deinit:function(){return Po.methods.deinit.call(this)},mount:function(){Po.methods.mount.call(this)},unmount:function(){Po.methods.unmount.call(this)}}},Io],props:op,methods:{createSource:function(){return new ep({attributions:this.attributions,crossOrigin:this.crossOrigin,imageExtent:this.extent,imageLoadFunction:this.loadFunc,logo:this.logo,projection:this.projection,imageSize:this.size,url:this.urlTmpl})}},watch:Ao(lo()(op),function(){this.recreate()})},np={Source:rp,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(rp,e),t.component(rp.name,rp)}},sp={name:"vl-geom-line-string",mixins:[ga],props:{},computed:{type:Object(Ze.c)(Fe.LINE_STRING)},methods:{createGeometry:function(){return new on(this.toViewProj(this.coordinates))}}},ap={Geom:sp,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(sp,e),t.component(sp.name,sp)}},hp={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},lp=function(t){ee.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:C.nullFunction,t.target&&this.setTarget(t.target)};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/C.inherits(lp,ee),lp.prototype.disposeInternal=function(){Ct.removeNode(this.element),ee.prototype.disposeInternal.call(this)},lp.prototype.getMap=function(){return this.map_},lp.prototype.setMap=function(t){this.map_&&Ct.removeNode(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)vt.unlistenByKey(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==C.nullFunction&&this.listenerKeys.push(vt.listen(t,hp.POSTRENDER,this.render,this)),t.render())},lp.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t};var pp=lp,up=function(t){var e=t||{};this.ulElement_=document.createElement("UL"),this.logoLi_=document.createElement("LI"),this.ulElement_.appendChild(this.logoLi_),this.logoLi_.style.display="none",this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);var i=void 0!==e.className?e.className:"ol-attribution",o=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.collapseLabel?e.collapseLabel:"»";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;var n=void 0!==e.label?e.label:"i";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;var s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=o,a.appendChild(s),vt.listen(a,Et.CLICK,this.handleClick_,this);var h=i+" "+Cs.CLASS_UNSELECTABLE+" "+Cs.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),l=document.createElement("div");l.className=h,l.appendChild(this.ulElement_),l.appendChild(a);var p=e.render?e.render:up.render;pp.call(this,{element:l,render:p,target:e.target}),this.renderedAttributions_=[],this.renderedVisible_=!0,this.logoElements_={}};C.inherits(up,pp),up.prototype.getSourceAttributions_=function(t){for(var e={},i=[],o=t.layerStatesArray,r=t.viewState.resolution,n=0,s=o.length;n<s;++n){var a=o[n];if(kh.visibleAtResolution(a,r)){var h=a.layer.getSource();if(h){var l=h.getAttributions2();if(l){var p=l(t);if(p)if(Array.isArray(p))for(var u=0,c=p.length;u<c;++u)p[u]in e||(i.push(p[u]),e[p[u]]=!0);else p in e||(i.push(p),e[p]=!0)}}}}return i},up.render=function(t){this.updateElement_(t.frameState)},up.prototype.updateElement_=function(t){if(t){var e=this.getSourceAttributions_(t);if(!Xt.equals(e,this.renderedAttributions_)){for(;this.ulElement_.lastChild!==this.logoLi_;)this.ulElement_.removeChild(this.ulElement_.lastChild);for(var i=0,o=e.length;i<o;++i){var r=document.createElement("LI");r.innerHTML=e[i],this.ulElement_.appendChild(r)}0===e.length&&this.renderedAttributions_.length>0?this.element.classList.add("ol-logo-only"):0===this.renderedAttributions_.length&&e.length>0&&this.element.classList.remove("ol-logo-only");var n=e.length>0||!nt.isEmpty(t.logos);this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),this.renderedAttributions_=e,this.insertLogos_(t)}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},up.prototype.insertLogos_=function(t){var e,i,o,r,n=t.logos,s=this.logoElements_;for(e in s)e in n||(Ct.removeNode(s[e]),delete s[e]);for(r in n){var a=n[r];a instanceof HTMLElement&&(this.logoLi_.appendChild(a),s[r]=a),r in s||((i=new Image).src=r,""===a?o=i:((o=document.createElement("a")).href=a,o.appendChild(i)),this.logoLi_.appendChild(o),s[r]=o)}this.logoLi_.style.display=nt.isEmpty(n)?"none":""},up.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},up.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Ct.replaceNode(this.collapseLabel_,this.label_):Ct.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},up.prototype.getCollapsible=function(){return this.collapsible_},up.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},up.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},up.prototype.getCollapsed=function(){return this.collapsed_};var cp=up,fp=function(t){var e=t||{},i=void 0!==e.className?e.className:"ol-rotate",o=void 0!==e.label?e.label:"⇧";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));var r=e.tipLabel?e.tipLabel:"Reset rotation",n=document.createElement("button");n.className=i+"-reset",n.setAttribute("type","button"),n.title=r,n.appendChild(this.label_),vt.listen(n,Et.CLICK,fp.prototype.handleClick_,this);var s=i+" "+Cs.CLASS_UNSELECTABLE+" "+Cs.CLASS_CONTROL,a=document.createElement("div");a.className=s,a.appendChild(n);var h=e.render?e.render:fp.render;this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,pp.call(this,{element:a,render:h,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Cs.CLASS_HIDDEN)};C.inherits(fp,pp),fp.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},fp.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:ft.easeOut}):t.setRotation(0))},fp.render=function(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var r=this.element.classList.contains(Cs.CLASS_HIDDEN);r||0!==i?r&&0!==i&&this.element.classList.remove(Cs.CLASS_HIDDEN):this.element.classList.add(Cs.CLASS_HIDDEN)}this.label_.style.msTransform=o,this.label_.style.webkitTransform=o,this.label_.style.transform=o}this.rotation_=i}};var dp=fp,yp=function(t){var e=t||{},i=void 0!==e.className?e.className:"ol-zoom",o=void 0!==e.delta?e.delta:1,r=void 0!==e.zoomInLabel?e.zoomInLabel:"+",n=void 0!==e.zoomOutLabel?e.zoomOutLabel:"−",s=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",a=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i+"-in",h.setAttribute("type","button"),h.title=s,h.appendChild("string"==typeof r?document.createTextNode(r):r),vt.listen(h,Et.CLICK,yp.prototype.handleClick_.bind(this,o));var l=document.createElement("button");l.className=i+"-out",l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof n?document.createTextNode(n):n),vt.listen(l,Et.CLICK,yp.prototype.handleClick_.bind(this,-o));var p=i+" "+Cs.CLASS_UNSELECTABLE+" "+Cs.CLASS_CONTROL,u=document.createElement("div");u.className=p,u.appendChild(h),u.appendChild(l),pp.call(this,{element:u,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250};C.inherits(yp,pp),yp.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},yp.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var o=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:o,duration:this.duration_,easing:ft.easeOut})):e.setResolution(o)}}};var gp=yp,vp={defaults:function(t){var e=t||{},i=new Aa;return(void 0===e.zoom||e.zoom)&&i.push(new gp(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new dp(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new cp(e.attributionOptions)),i}},mp=vp,_p={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},bp=function(t,e){this.dispatcher=t,this.mapping_=e};bp.prototype.getEvents=function(){return Object.keys(this.mapping_)},bp.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var xp=bp,Ep=function(t){var e={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};xp.call(this,t,e),this.pointerMap=t.pointerMap,this.lastTouches=[]};C.inherits(Ep,xp),Ep.POINTER_ID=1,Ep.POINTER_TYPE="mouse",Ep.DEDUP_DIST=25,Ep.prototype.isEventSimulatedFromTouch_=function(t){for(var e,i=this.lastTouches,o=t.clientX,r=t.clientY,n=0,s=i.length;n<s&&(e=i[n]);n++){var a=Math.abs(o-e[0]),h=Math.abs(r-e[1]);if(a<=Ep.DEDUP_DIST&&h<=Ep.DEDUP_DIST)return!0}return!1},Ep.prepareEvent=function(t,e){var i=e.cloneEvent(t,t),o=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),o()},i.pointerId=Ep.POINTER_ID,i.isPrimary=!0,i.pointerType=Ep.POINTER_TYPE,i},Ep.prototype.mousedown=function(t){if(!this.isEventSimulatedFromTouch_(t)){Ep.POINTER_ID.toString()in this.pointerMap&&this.cancel(t);var e=Ep.prepareEvent(t,this.dispatcher);this.pointerMap[Ep.POINTER_ID.toString()]=t,this.dispatcher.down(e,t)}},Ep.prototype.mousemove=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Ep.prepareEvent(t,this.dispatcher);this.dispatcher.move(e,t)}},Ep.prototype.mouseup=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[Ep.POINTER_ID.toString()];if(e&&e.button===t.button){var i=Ep.prepareEvent(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}},Ep.prototype.mouseover=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Ep.prepareEvent(t,this.dispatcher);this.dispatcher.enterOver(e,t)}},Ep.prototype.mouseout=function(t){if(!this.isEventSimulatedFromTouch_(t)){var e=Ep.prepareEvent(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}},Ep.prototype.cancel=function(t){var e=Ep.prepareEvent(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},Ep.prototype.cleanupMouse=function(){delete this.pointerMap[Ep.POINTER_ID.toString()]};var Sp=Ep,Tp=function(t){var e={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};xp.call(this,t,e),this.pointerMap=t.pointerMap,this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]};C.inherits(Tp,xp),Tp.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},Tp.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},Tp.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)},Tp.prototype.msPointerMove=function(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)},Tp.prototype.msPointerUp=function(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)},Tp.prototype.msPointerOut=function(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)},Tp.prototype.msPointerOver=function(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)},Tp.prototype.msPointerCancel=function(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)},Tp.prototype.msLostPointerCapture=function(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)},Tp.prototype.msGotPointerCapture=function(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)};var wp=Tp,Cp=function(t){var e={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};xp.call(this,t,e)};C.inherits(Cp,xp),Cp.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)},Cp.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)},Cp.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)},Cp.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)},Cp.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)},Cp.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)},Cp.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},Cp.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)};var Rp=Cp,Pp=function(t,e,i){_t.call(this,t),this.originalEvent=e;var o=i||{};this.buttons=this.getButtons_(o),this.pressure=this.getPressure_(o,this.buttons),this.bubbles="bubbles"in o&&o.bubbles,this.cancelable="cancelable"in o&&o.cancelable,this.view="view"in o?o.view:null,this.detail="detail"in o?o.detail:null,this.screenX="screenX"in o?o.screenX:0,this.screenY="screenY"in o?o.screenY:0,this.clientX="clientX"in o?o.clientX:0,this.clientY="clientY"in o?o.clientY:0,this.ctrlKey="ctrlKey"in o&&o.ctrlKey,this.altKey="altKey"in o&&o.altKey,this.shiftKey="shiftKey"in o&&o.shiftKey,this.metaKey="metaKey"in o&&o.metaKey,this.button="button"in o?o.button:0,this.relatedTarget="relatedTarget"in o?o.relatedTarget:null,this.pointerId="pointerId"in o?o.pointerId:0,this.width="width"in o?o.width:0,this.height="height"in o?o.height:0,this.tiltX="tiltX"in o?o.tiltX:0,this.tiltY="tiltY"in o?o.tiltY:0,this.pointerType="pointerType"in o?o.pointerType:"",this.hwTimestamp="hwTimestamp"in o?o.hwTimestamp:0,this.isPrimary="isPrimary"in o&&o.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})};C.inherits(Pp,_t),Pp.prototype.getButtons_=function(t){var e;if(t.buttons||Pp.HAS_BUTTONS)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},Pp.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},Pp.HAS_BUTTONS=!1,function(){try{var t=new MouseEvent("click",{buttons:1});Pp.HAS_BUTTONS=1===t.buttons}catch(t){}}();var Ip=Pp,Mp=function(t,e){var i={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};xp.call(this,t,i),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0};C.inherits(Mp,xp),Mp.DEDUP_TIMEOUT=2500,Mp.CLICK_COUNT_TIMEOUT=200,Mp.POINTER_TYPE="touch",Mp.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},Mp.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&Sp.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},Mp.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},Mp.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),Mp.CLICK_COUNT_TIMEOUT)},Mp.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},Mp.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},Mp.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType=Mp.POINTER_TYPE,i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},Mp.prototype.processTouches_=function(t,e){var i,o,r=Array.prototype.slice.call(t.changedTouches),n=r.length;function s(){t.preventDefault()}for(i=0;i<n;++i)(o=this.touchToPointer_(t,r[i])).preventDefault=s,e.call(this,t,o)},Mp.prototype.findTouch_=function(t,e){for(var i=t.length,o=0;o<i;o++)if(t[o].identifier===e)return!0;return!1},Mp.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),o=i.length;if(o>=e.length){var r,n,s,a=[];for(r=0;r<o;++r)n=i[r],s=this.pointerMap[n],n==Sp.POINTER_ID||this.findTouch_(e,n-2)||a.push(s.out);for(r=0;r<a.length;++r)this.cancelOut_(t,a[r])}},Mp.prototype.touchstart=function(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)},Mp.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},Mp.prototype.touchmove=function(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)},Mp.prototype.moveOverOut_=function(t,e){var i=e,o=this.pointerMap[i.pointerId];if(o){var r=o.out,n=o.outTarget;this.dispatcher.move(i,t),r&&n!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=n,r.target=n,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=n,i.relatedTarget=null,this.cancelOut_(t,i))),o.out=i,o.outTarget=i.target}},Mp.prototype.touchend=function(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)},Mp.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},Mp.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)},Mp.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},Mp.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},Mp.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var o=[i.clientX,i.clientY];e.push(o),setTimeout(function(){Xt.remove(e,o)},Mp.DEDUP_TIMEOUT)}};var Lp=Mp,Ap=function(t){xt.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()};C.inherits(Ap,xt),Ap.prototype.registerSources=function(){if(xs.POINTER)this.registerSource("native",new Rp(this));else if(xs.MSPOINTER)this.registerSource("ms",new wp(this));else{var t=new Sp(this);this.registerSource("mouse",t),xs.TOUCH&&this.registerSource("touch",new Lp(this,t))}this.register_()},Ap.prototype.registerSource=function(t,e){var i=e,o=i.getEvents();o&&(o.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))},this),this.eventSourceList_.push(i))},Ap.prototype.register_=function(){for(var t,e=this.eventSourceList_.length,i=0;i<e;i++)t=this.eventSourceList_[i],this.addEvents_(t.getEvents())},Ap.prototype.unregister_=function(){for(var t,e=this.eventSourceList_.length,i=0;i<e;i++)t=this.eventSourceList_[i],this.removeEvents_(t.getEvents())},Ap.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},Ap.prototype.addEvents_=function(t){t.forEach(function(t){vt.listen(this.element_,t,this.eventHandler_,this)},this)},Ap.prototype.removeEvents_=function(t){t.forEach(function(t){vt.unlisten(this.element_,t,this.eventHandler_,this)},this)},Ap.prototype.cloneEvent=function(t,e){for(var i,o={},r=0,n=Ap.CLONE_PROPS.length;r<n;r++)o[i=Ap.CLONE_PROPS[r][0]]=t[i]||e[i]||Ap.CLONE_PROPS[r][1];return o},Ap.prototype.down=function(t,e){this.fireEvent(_p.POINTERDOWN,t,e)},Ap.prototype.move=function(t,e){this.fireEvent(_p.POINTERMOVE,t,e)},Ap.prototype.up=function(t,e){this.fireEvent(_p.POINTERUP,t,e)},Ap.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(_p.POINTERENTER,t,e)},Ap.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(_p.POINTERLEAVE,t,e)},Ap.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(_p.POINTEROVER,t,e)},Ap.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(_p.POINTEROUT,t,e)},Ap.prototype.cancel=function(t,e){this.fireEvent(_p.POINTERCANCEL,t,e)},Ap.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},Ap.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},Ap.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},Ap.prototype.makeEvent=function(t,e,i){return new Ip(t,i,e)},Ap.prototype.fireEvent=function(t,e,i){var o=this.makeEvent(t,e,i);this.dispatchEvent(o)},Ap.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},Ap.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Sp.prepareEvent(e,this),e)},Ap.prototype.disposeInternal=function(){this.unregister_(),xt.prototype.disposeInternal.call(this)},Ap.CLONE_PROPS=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];var Op=Ap,Fp=function(t,e){xt.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*xs.DEVICE_PIXEL_RATIO:xs.DEVICE_PIXEL_RATIO,this.down_=null;var i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Op(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=vt.listen(this.pointerEventHandler_,_p.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=vt.listen(this.pointerEventHandler_,_p.POINTERMOVE,this.relayEvent_,this)};C.inherits(Fp,xt),Fp.prototype.emulateClick_=function(t){var e=new Ch(vh.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new Ch(vh.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new Ch(vh.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},Fp.prototype.updateActivePointers_=function(t){var e=t;e.type==vh.POINTERUP||e.type==vh.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==vh.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},Fp.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Ch(vh.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(vt.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},Fp.prototype.isMouseActionButton_=function(t){return 0===t.button},Fp.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Ch(vh.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Op(document),this.dragListenerKeys_.push(vt.listen(this.documentPointerEventHandler_,vh.POINTERMOVE,this.handlePointerMove_,this),vt.listen(this.documentPointerEventHandler_,vh.POINTERUP,this.handlePointerUp_,this),vt.listen(this.pointerEventHandler_,vh.POINTERCANCEL,this.handlePointerUp_,this)))},Fp.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Ch(vh.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},Fp.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Ch(t.type,this.map_,t,e))},Fp.prototype.isMoving_=function(t){return Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},Fp.prototype.disposeInternal=function(){this.relayedListenerKey_&&(vt.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(vt.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(vt.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),xt.prototype.disposeInternal.call(this)};var Np=Fp,Dp={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},jp=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};jp.DROP=1/0,jp.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,nt.clear(this.queuedElements_)},jp.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(i);return delete this.queuedElements_[o],i},jp.prototype.enqueue=function(t){M.assert(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=jp.DROP&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},jp.prototype.getCount=function(){return this.elements_.length},jp.prototype.getLeftChildIndex_=function(t){return 2*t+1},jp.prototype.getRightChildIndex_=function(t){return 2*t+2},jp.prototype.getParentIndex_=function(t){return t-1>>1},jp.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},jp.prototype.isEmpty=function(){return 0===this.elements_.length},jp.prototype.isKeyQueued=function(t){return t in this.queuedElements_},jp.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},jp.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,o=e.length,r=e[t],n=i[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),l=h<o&&i[h]<i[a]?h:a;e[t]=e[l],i[t]=i[l],t=l}e[t]=r,i[t]=n,this.siftDown_(s,t)},jp.prototype.siftDown_=function(t,e){for(var i=this.elements_,o=this.priorities_,r=i[e],n=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>n))break;i[e]=i[s],o[e]=o[s],e=s}i[e]=r,o[e]=n},jp.prototype.reprioritize=function(){var t,e,i,o=this.priorityFunction_,r=this.elements_,n=this.priorities_,s=0,a=r.length;for(e=0;e<a;++e)(i=o(t=r[e]))==jp.DROP?delete this.queuedElements_[this.keyFunction_(t)]:(n[s]=i,r[s++]=t);r.length=s,n.length=s,this.heapify_()};var kp=jp,Gp=function(t,e){kp.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}};C.inherits(Gp,kp),Gp.prototype.enqueue=function(t){var e=kp.prototype.enqueue.call(this,t);if(e){var i=t[0];vt.listen(i,Et.CHANGE,this.handleTileChange,this)}return e},Gp.prototype.getTilesLoading=function(){return this.tilesLoading_},Gp.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===ut.LOADED||i===ut.ERROR||i===ut.EMPTY||i===ut.ABORT){vt.unlisten(e,Et.CHANGE,this.handleTileChange,this);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},Gp.prototype.loadMoreTiles=function(t,e){for(var i,o,r,n=0,s=!1;this.tilesLoading_<t&&n<e&&this.getCount()>0;)r=(o=this.dequeue()[0]).getKey(),(i=o.getState())===ut.ABORT?s=!0:i!==ut.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,o.load());0===n&&s&&this.tileChangeCallback_()};var Up=Gp,Bp={createExtent:function(t){return function(e){return e?[A.clamp(e[0],t[0],t[2]),A.clamp(e[1],t[1],t[3])]:void 0}},none:function(t){return t}},Vp=Bp,Wp={createSnapToResolutions:function(t){return function(e,i,o){if(void 0!==e){var r=Xt.linearFindNearest(t,e,o);r=A.clamp(r+i,0,t.length-1);var n=Math.floor(r);if(r!=n&&n<t.length-1){var s=t[n]/t[n+1];return t[n]/Math.pow(s,r-n)}return t[n]}}},createSnapToPower:function(t,e,i){return function(o,r,n){if(void 0!==o){var s=-n/2+.5,a=Math.floor(Math.log(e/o)/Math.log(t)+s),h=Math.max(a+r,0);return void 0!==i&&(h=Math.min(h,i)),e/Math.pow(t,h)}}}},Xp=Wp,Yp={disable:function(t,e){return void 0!==t?0:void 0},none:function(t,e){return void 0!==t?t+e:void 0},createSnapToN:function(t){var e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}},createSnapToZero:function(t){var e=t||A.toRadians(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}}},zp=Yp,Kp={ANIMATING:0,INTERACTING:1},Hp={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},$p=function(t){ee.call(this);var e=nt.assign({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=lt.createProjection(e.projection,"EPSG:3857"),this.applyOptions_(e)};C.inherits($p,ee),$p.prototype.applyOptions_=function(t){var e={};e[Hp.CENTER]=void 0!==t.center?t.center:null;var i=$p.createResolutionConstraint_(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var o=$p.createCenterConstraint_(t),r=i.constraint,n=$p.createRotationConstraint_(t);this.constraints_={center:o,resolution:r,rotation:n},void 0!==t.resolution?e[Hp.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[Hp.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[Hp.RESOLUTION]=A.clamp(Number(this.getResolution()||e[Hp.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[Hp.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},$p.prototype.getUpdatedOptions_=function(t){var e=nt.assign({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),nt.assign({},e,t)},$p.prototype.animate=function(t){var e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){var o=arguments[i-1];return o.center&&this.setCenter(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&e(!0))}for(var r=Date.now(),n=this.getCenter().slice(),s=this.getResolution(),a=this.getRotation(),h=[],l=0;l<i;++l){var p=arguments[l],u={start:r,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||ft.inAndOut};if(p.center&&(u.sourceCenter=n,u.targetCenter=p.center,n=u.targetCenter),void 0!==p.zoom?(u.sourceResolution=s,u.targetResolution=this.constrainResolution(this.maxResolution_,p.zoom-this.minZoom_,0),s=u.targetResolution):p.resolution&&(u.sourceResolution=s,u.targetResolution=p.resolution,s=u.targetResolution),void 0!==p.rotation){u.sourceRotation=a;var c=A.modulo(p.rotation-a+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=a+c,a=u.targetRotation}u.callback=e,$p.isNoopAnimation(u)?u.complete=!0:r+=u.duration,h.push(u)}this.animations_.push(h),this.setHint(Kp.ANIMATING,1),this.updateAnimations_()},$p.prototype.getAnimating=function(){return this.hints_[Kp.ANIMATING]>0},$p.prototype.getInteracting=function(){return this.hints_[Kp.INTERACTING]>0},$p.prototype.cancelAnimations=function(){this.setHint(Kp.ANIMATING,-this.hints_[Kp.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&i[0].callback(!1)}this.animations_.length=0},$p.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],r=!0,n=0,s=o.length;n<s;++n){var a=o[n];if(!a.complete){var h=t-a.start,l=a.duration>0?h/a.duration:1;l>=1?(a.complete=!0,l=1):r=!1;var p=a.easing(l);if(a.sourceCenter){var u=a.sourceCenter[0],c=a.sourceCenter[1],f=u+p*(a.targetCenter[0]-u),d=c+p*(a.targetCenter[1]-c);this.set(Hp.CENTER,[f,d])}if(a.sourceResolution&&a.targetResolution){var y=1===p?a.targetResolution:a.sourceResolution+p*(a.targetResolution-a.sourceResolution);a.anchor&&this.set(Hp.CENTER,this.calculateCenterZoom(y,a.anchor)),this.set(Hp.RESOLUTION,y)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var g=1===p?A.modulo(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+p*(a.targetRotation-a.sourceRotation);a.anchor&&this.set(Hp.CENTER,this.calculateCenterRotate(g,a.anchor)),this.set(Hp.ROTATION,g)}if(e=!0,!a.complete)break}}if(r){this.animations_[i]=null,this.setHint(Kp.ANIMATING,-1);var v=o[0].callback;v&&v(!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},$p.prototype.calculateCenterRotate=function(t,e){var i,o=this.getCenter();return void 0!==o&&(i=[o[0]-e[0],o[1]-e[1]],Ia.rotate(i,t-this.getRotation()),Ia.add(i,e)),i},$p.prototype.calculateCenterZoom=function(t,e){var i,o=this.getCenter(),r=this.getResolution();void 0!==o&&void 0!==r&&(i=[e[0]-t*(e[0]-o[0])/r,e[1]-t*(e[1]-o[1])/r]);return i},$p.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+C.getUid(this)+'"]',i=document.querySelector(e);if(i){var o=getComputedStyle(i);t[0]=parseInt(o.width,10),t[1]=parseInt(o.height,10)}return t},$p.prototype.constrainCenter=function(t){return this.constraints_.center(t)},$p.prototype.constrainResolution=function(t,e,i){var o=e||0,r=i||0;return this.constraints_.resolution(t,o,r)},$p.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},$p.prototype.getCenter=function(){return this.get(Hp.CENTER)},$p.prototype.getConstraints=function(){return this.constraints_},$p.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},$p.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();M.assert(i,1);var o=this.getResolution();M.assert(void 0!==o,2);var r=this.getRotation();return M.assert(void 0!==r,3),U.getForViewAndSize(i,o,r,e)},$p.prototype.getMaxResolution=function(){return this.maxResolution_},$p.prototype.getMinResolution=function(){return this.minResolution_},$p.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},$p.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},$p.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},$p.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},$p.prototype.getProjection=function(){return this.projection_},$p.prototype.getResolution=function(){return this.get(Hp.RESOLUTION)},$p.prototype.getResolutions=function(){return this.resolutions_},$p.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),o=U.getWidth(t)/i[0],r=U.getHeight(t)/i[1];return Math.max(o,r)},$p.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,o=this.minResolution_,r=Math.log(i/o)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},$p.prototype.getRotation=function(){return this.get(Hp.ROTATION)},$p.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,o=this.minResolution_,r=Math.log(i/o)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/r}},$p.prototype.getState=function(){var t=this.getCenter(),e=this.getProjection(),i=this.getResolution(),o=this.getRotation();return{center:t.slice(),projection:void 0!==e?e:null,resolution:i,rotation:o,zoom:this.getZoom()}},$p.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},$p.prototype.getZoomForResolution=function(t){var e,i,o=this.minZoom_||0;if(this.resolutions_){var r=Xt.linearFindNearest(this.resolutions_,t,1);o=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return o+Math.log(e/t)/Math.log(i)},$p.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},$p.prototype.fit=function(t,e){var i,o=e||{},r=o.size;r||(r=this.getSizeFromViewport_()),t instanceof Ko?t.getType()===W.CIRCLE?(t=t.getExtent(),(i=xn.fromExtent(t)).rotate(this.getRotation(),U.getCenter(t))):i=t:(M.assert(Array.isArray(t),24),M.assert(!U.isEmpty(t),25),i=xn.fromExtent(t));var n,s=void 0!==o.padding?o.padding:[0,0,0,0],a=void 0===o.constrainResolution||o.constrainResolution,h=void 0!==o.nearest&&o.nearest;n=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.constrainResolution(this.maxResolution_,o.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),p=this.getRotation(),u=Math.cos(-p),c=Math.sin(-p),f=1/0,d=1/0,y=-1/0,g=-1/0,v=i.getStride(),m=0,_=l.length;m<_;m+=v){var b=l[m]*u-l[m+1]*c,x=l[m]*c+l[m+1]*u;f=Math.min(f,b),d=Math.min(d,x),y=Math.max(y,b),g=Math.max(g,x)}var E=this.getResolutionForExtent([f,d,y,g],[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);if(E=isNaN(E)?n:Math.max(E,n),a){var S=this.constrainResolution(E,0,0);!h&&S<E&&(S=this.constrainResolution(S,-1,0)),E=S}c=-c;var T=(f+y)/2,w=(d+g)/2,R=[(T+=(s[1]-s[3])/2*E)*u-(w+=(s[0]-s[2])/2*E)*c,w*u+T*c],P=o.callback?o.callback:C.nullFunction;void 0!==o.duration?this.animate({resolution:E,center:R,duration:o.duration,easing:o.easing},P):(this.setResolution(E),this.setCenter(R),setTimeout(P.bind(void 0,!0),0))},$p.prototype.centerOn=function(t,e,i){var o=this.getRotation(),r=Math.cos(-o),n=Math.sin(-o),s=t[0]*r-t[1]*n,a=t[1]*r+t[0]*n,h=this.getResolution(),l=(s+=(e[0]/2-i[0])*h)*r-(a+=(i[1]-e[1]/2)*h)*(n=-n),p=a*r+s*n;this.setCenter([l,p])},$p.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},$p.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},$p.prototype.setCenter=function(t){this.set(Hp.CENTER,t),this.getAnimating()&&this.cancelAnimations()},$p.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},$p.prototype.setResolution=function(t){this.set(Hp.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},$p.prototype.setRotation=function(t){this.set(Hp.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},$p.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},$p.createCenterConstraint_=function(t){return void 0!==t.extent?Vp.createExtent(t.extent):Vp.none},$p.createResolutionConstraint_=function(t){var e,i,o,r=void 0!==t.minZoom?t.minZoom:C.DEFAULT_MIN_ZOOM,n=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var a=t.resolutions;i=a[r],o=void 0!==a[n]?a[n]:a[a.length-1],e=Xp.createSnapToResolutions(a)}else{var h=lt.createProjection(t.projection,"EPSG:3857"),l=h.getExtent(),p=(l?Math.max(U.getWidth(l),U.getHeight(l)):360*lt.METERS_PER_UNIT[K.DEGREES]/h.getMetersPerUnit())/C.DEFAULT_TILE_SIZE/Math.pow(2,C.DEFAULT_MIN_ZOOM),u=p/Math.pow(2,28-C.DEFAULT_MIN_ZOOM);void 0!==(i=t.maxResolution)?r=0:i=p/Math.pow(s,r),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(s,n):p/Math.pow(s,n):u),n=r+Math.floor(Math.log(i/o)/Math.log(s)),o=i/Math.pow(s,n-r),e=Xp.createSnapToPower(s,i,n-r)}return{constraint:e,maxResolution:i,minResolution:o,minZoom:r,zoomFactor:s}},$p.createRotationConstraint_=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?zp.createSnapToZero():!1===e?zp.none:"number"==typeof e?zp.createSnapToN(e):zp.none}return zp.disable},$p.isNoopAnimation=function(t){return!(t.sourceCenter&&t.targetCenter&&!Ia.equals(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)};var qp=$p,Zp=function(t){var e=t||{},i=nt.assign({},e);delete i.layers;var o=e.layers;Nh.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},vt.listen(this,ee.getChangeEventType(Zp.Property_.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new Aa(o.slice(),{unique:!0}):(M.assert(o instanceof Aa,43),o=o):o=new Aa(void 0,{unique:!0}),this.setLayers(o)};C.inherits(Zp,Nh),Zp.prototype.handleLayerChange_=function(){this.changed()},Zp.prototype.handleLayersChanged_=function(t){this.layersListenerKeys_.forEach(vt.unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var i in this.layersListenerKeys_.push(vt.listen(e,Ma.ADD,this.handleLayersAdd_,this),vt.listen(e,Ma.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[i].forEach(vt.unlistenByKey);nt.clear(this.listenerKeys_);var o,r,n,s=e.getArray();for(o=0,r=s.length;o<r;o++)n=s[o],this.listenerKeys_[C.getUid(n).toString()]=[vt.listen(n,Zt.PROPERTYCHANGE,this.handleLayerChange_,this),vt.listen(n,Et.CHANGE,this.handleLayerChange_,this)];this.changed()},Zp.prototype.handleLayersAdd_=function(t){var e=t.element,i=C.getUid(e).toString();this.listenerKeys_[i]=[vt.listen(e,Zt.PROPERTYCHANGE,this.handleLayerChange_,this),vt.listen(e,Et.CHANGE,this.handleLayerChange_,this)],this.changed()},Zp.prototype.handleLayersRemove_=function(t){var e=t.element,i=C.getUid(e).toString();this.listenerKeys_[i].forEach(vt.unlistenByKey),delete this.listenerKeys_[i],this.changed()},Zp.prototype.getLayers=function(){return this.get(Zp.Property_.LAYERS)},Zp.prototype.setLayers=function(t){this.set(Zp.Property_.LAYERS,t)},Zp.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},Zp.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});var o,r,n,s=this.getLayerState();for(o=i,r=e.length;o<r;o++)(n=e[o]).opacity*=s.opacity,n.visible=n.visible&&s.visible,n.maxResolution=Math.min(n.maxResolution,s.maxResolution),n.minResolution=Math.max(n.minResolution,s.minResolution),void 0!==s.extent&&(void 0!==n.extent?n.extent=U.getIntersection(n.extent,s.extent):n.extent=s.extent);return e},Zp.prototype.getSourceState=function(){return pt.READY},Zp.Property_={LAYERS:"layers"};var Jp=Zp,Qp={MAP_RENDERER:"MAP_RENDERER",LAYER_RENDERER:"LAYER_RENDERER"},tu={mapRendererPlugins_:[],getMapRendererPlugins:function(){return tu.mapRendererPlugins_},layerRendererPlugins_:[],getLayerRendererPlugins:function(){return tu.layerRendererPlugins_},register:function(t,e){switch(t){case Qp.MAP_RENDERER:tu.mapRendererPlugins_.push(e);break;case Qp.LAYER_RENDERER:tu.layerRendererPlugins_.push(e);break;default:throw new Error("Unsupported plugin type: "+t)}},registerMultiple:function(t,e){for(var i=0,o=e.length;i<o;++i)tu.register(t,e[i])}},eu=tu,iu={CANVAS:"canvas",WEBGL:"webgl"},ou=function(t){ee.call(this);var e=ou.createOptionsInternal(t);this.loadTilesWhileAnimating_=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:xs.DEVICE_PIXEL_RATIO,this.logos_=e.logos,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Wo.create(),this.pixelToCoordinateTransform_=Wo.create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(xs.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var i=[Et.CLICK,Et.DBLCLICK,Et.MOUSEDOWN,Et.TOUCHSTART,Et.MSPOINTERDOWN,vh.POINTERDOWN,Et.MOUSEWHEEL,Et.WHEEL],o=0,r=i.length;o<r;++o)vt.listen(this.overlayContainerStopEvent_,i[o],_t.stopPropagation);for(var n in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Np(this,t.moveTolerance),vh)vt.listen(this.mapBrowserEventHandler_,vh[n],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,vt.listen(this.viewport_,Et.WHEEL,this.handleBrowserEvent,this),vt.listen(this.viewport_,Et.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new Aa,this.interactions=e.interactions||new Aa,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=e.mapRendererPlugin.create(this.viewport_,this),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new Up(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},vt.listen(this,ee.getChangeEventType(Dp.LAYERGROUP),this.handleLayerGroupChanged_,this),vt.listen(this,ee.getChangeEventType(Dp.VIEW),this.handleViewChanged_,this),vt.listen(this,ee.getChangeEventType(Dp.SIZE),this.handleSizeChanged_,this),vt.listen(this,ee.getChangeEventType(Dp.TARGET),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach(function(t){t.setMap(this)},this),vt.listen(this.controls,Ma.ADD,function(t){t.element.setMap(this)},this),vt.listen(this.controls,Ma.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)},this),vt.listen(this.interactions,Ma.ADD,function(t){t.element.setMap(this)},this),vt.listen(this.interactions,Ma.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_,this),vt.listen(this.overlays_,Ma.ADD,function(t){this.addOverlayInternal_(t.element)},this),vt.listen(this.overlays_,Ma.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)};C.inherits(ou,ee),ou.prototype.addControl=function(t){this.getControls().push(t)},ou.prototype.addInteraction=function(t){this.getInteractions().push(t)},ou.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},ou.prototype.addOverlay=function(t){this.getOverlays().push(t)},ou.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},ou.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),vt.unlisten(this.viewport_,Et.WHEEL,this.handleBrowserEvent,this),vt.unlisten(this.viewport_,Et.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(window.removeEventListener(Et.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),ee.prototype.disposeInternal.call(this)},ou.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var o=this.getCoordinateFromPixel(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,n=void 0!==i.layerFilter?i.layerFilter:Go.TRUE;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,r,e,null,n,null)}},ou.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},ou.prototype.forEachLayerAtPixel=function(t,e,i,o,r){if(this.frameState_){var n=void 0!==i?i:null,s=void 0!==o?o:Go.TRUE,a=void 0!==r?r:null;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,e,n,s,a)}},ou.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Go.TRUE,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,null)},ou.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},ou.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i=t.changedTouches?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},ou.prototype.getTarget=function(){return this.get(Dp.TARGET)},ou.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},ou.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Wo.apply(e.pixelToCoordinateTransform,t.slice()):null},ou.prototype.getControls=function(){return this.controls},ou.prototype.getOverlays=function(){return this.overlays_},ou.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},ou.prototype.getInteractions=function(){return this.interactions},ou.prototype.getLayerGroup=function(){return this.get(Dp.LAYERGROUP)},ou.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},ou.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Wo.apply(e.coordinateToPixelTransform,t.slice(0,2)):null},ou.prototype.getRenderer=function(){return this.renderer_},ou.prototype.getSize=function(){return this.get(Dp.SIZE)},ou.prototype.getView=function(){return this.get(Dp.VIEW)},ou.prototype.getViewport=function(){return this.viewport_},ou.prototype.getOverlayContainer=function(){return this.overlayContainer_},ou.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},ou.prototype.getTilePriority=function(t,e,i,o){var r=this.frameState_;if(!(r&&e in r.wantedTiles))return kp.DROP;if(!r.wantedTiles[e][t.getKey()])return kp.DROP;var n=i[0]-r.focus[0],s=i[1]-r.focus[1];return 65536*Math.log(o)+Math.sqrt(n*n+s*s)/o},ou.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,o=new Th(i,this,t);this.handleMapBrowserEvent(o)},ou.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e,i=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(e=i.length-1;e>=0;e--){var o=i[e];if(o.getActive())if(!o.handleEvent(t))break}}},ou.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=16,o=i;if(t){var r=t.viewHints;r[Kp.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,o=2),r[Kp.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,o=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,o))}var n,s,a=this.postRenderFunctions_;for(n=0,s=a.length;n<s;++n)a[n](this,t);a.length=0},ou.prototype.handleSizeChanged_=function(){this.render()},ou.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)vt.unlistenByKey(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var o=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[vt.listen(o,Et.KEYDOWN,this.handleBrowserEvent,this),vt.listen(o,Et.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Et.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Ct.removeNode(this.viewport_),void 0!==this.handleResize_&&(window.removeEventListener(Et.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},ou.prototype.handleTileChange_=function(){this.render()},ou.prototype.handleViewPropertyChanged_=function(){this.render()},ou.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(vt.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(vt.unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",C.getUid(t)),this.viewPropertyListenerKey_=vt.listen(t,Zt.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=vt.listen(t,Et.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},ou.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(vt.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[vt.listen(t,Zt.PROPERTYCHANGE,this.render,this),vt.listen(t,Et.CHANGE,this.render,this)]),this.render()},ou.prototype.isRendered=function(){return!!this.frameState_},ou.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},ou.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},ou.prototype.removeControl=function(t){return this.getControls().remove(t)},ou.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},ou.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},ou.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},ou.prototype.renderFrame_=function(t){var e,i,o,r=this.getSize(),n=this.getView(),s=U.createEmpty(),a=this.frameState_,h=null;if(void 0!==r&&Ut.hasArea(r)&&n&&n.isDef()){var l=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),p=this.getLayerGroup().getLayerStatesArray(),u={};for(e=0,i=p.length;e<i;++e)u[C.getUid(p[e].layer)]=p[e];var c=(o=n.getState()).center,f=o.resolution/this.pixelRatio_;c[0]=Math.round(c[0]/f)*f,c[1]=Math.round(c[1]/f)*f,h={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:s,focus:this.focus_?this.focus_:c,index:this.frameIndex_++,layerStates:u,layerStatesArray:p,logos:nt.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:l,wantedTiles:{}}}if(h&&(h.extent=U.getForViewAndSize(o.center,o.resolution,o.rotation,h.size,s)),this.frameState_=h,this.renderer_.renderFrame(h),h){if(h.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,h.postRenderFunctions),a)(!this.previousExtent_||!U.isEmpty(this.previousExtent_)&&!U.equals(h.extent,this.previousExtent_))&&(this.dispatchEvent(new Eh(hp.MOVESTART,this,a)),this.previousExtent_=U.createOrUpdateEmpty(this.previousExtent_));this.previousExtent_&&!h.viewHints[Kp.ANIMATING]&&!h.viewHints[Kp.INTERACTING]&&!U.equals(h.extent,this.previousExtent_)&&(this.dispatchEvent(new Eh(hp.MOVEEND,this,h)),U.clone(h.extent,this.previousExtent_))}this.dispatchEvent(new Eh(hp.POSTRENDER,this,h)),setTimeout(this.handlePostRender.bind(this),0)},ou.prototype.setLayerGroup=function(t){this.set(Dp.LAYERGROUP,t)},ou.prototype.setSize=function(t){this.set(Dp.SIZE,t)},ou.prototype.setTarget=function(t){this.set(Dp.TARGET,t)},ou.prototype.setView=function(t){this.set(Dp.VIEW,t)},ou.prototype.skipFeature=function(t){var e=C.getUid(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},ou.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},ou.prototype.unskipFeature=function(t){var e=C.getUid(t).toString();delete this.skippedFeatureUids_[e],this.render()},ou.DEFAULT_RENDERER_TYPES=[iu.CANVAS,iu.WEBGL],ou.LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC",ou.createOptionsInternal=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i={},o={};if(void 0===t.logo||"boolean"==typeof t.logo&&t.logo)o[ou.LOGO_URL]="https://openlayers.org/";else{var r=t.logo;"string"==typeof r?o[r]="":r instanceof HTMLElement?o[C.getUid(r).toString()]=r:r&&(M.assert("string"==typeof r.href,44),M.assert("string"==typeof r.src,45),o[r.src]=r.href)}var n,s,a=t.layers instanceof Jp?t.layers:new Jp({layers:t.layers});i[Dp.LAYERGROUP]=a,i[Dp.TARGET]=t.target,i[Dp.VIEW]=void 0!==t.view?t.view:new qp,void 0!==t.renderer?(Array.isArray(t.renderer)?n=t.renderer:"string"==typeof t.renderer?n=[t.renderer]:M.assert(!1,46),n.indexOf("dom")>=0&&(n=n.concat(ou.DEFAULT_RENDERER_TYPES))):n=ou.DEFAULT_RENDERER_TYPES;var h,l,p,u=eu.getMapRendererPlugins();t:for(var c=0,f=n.length;c<f;++c)for(var d=n[c],y=0,g=u.length;y<g;++y){var v=u[y];if(v.handles(d)){s=v;break t}}if(!s)throw new Error("Unable to create a map renderer for types: "+n.join(", "));return void 0!==t.controls&&(Array.isArray(t.controls)?h=new Aa(t.controls.slice()):(M.assert(t.controls instanceof Aa,47),h=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?l=new Aa(t.interactions.slice()):(M.assert(t.interactions instanceof Aa,48),l=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?p=new Aa(t.overlays.slice()):(M.assert(t.overlays instanceof Aa,49),p=t.overlays):p=new Aa,{controls:h,interactions:l,keyboardEventTarget:e,logos:o,overlays:p,mapRendererPlugin:s,values:i}};var ru=ou,nu=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};nu.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},nu.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},nu.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var o=this.points_[e+2]-this.points_[i+2];if(o<1e3/60)return!1;var r=this.points_[e]-this.points_[i],n=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(n,r),this.initialVelocity_=Math.sqrt(r*r+n*n)/o,this.initialVelocity_>this.minVelocity_},nu.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},nu.prototype.getAngle=function(){return this.angle_};var su=nu,au=function(t){var e=t||{};this.delta_=e.delta?e.delta:1,Ih.call(this,{handleEvent:au.handleEvent}),this.duration_=void 0!==e.duration?e.duration:250};C.inherits(au,Ih),au.handleEvent=function(t){var e=!1,i=t.originalEvent;if(t.type==vh.DBLCLICK){var o=t.map,r=t.coordinate,n=i.shiftKey?-this.delta_:this.delta_,s=o.getView();Ih.zoomByDelta(s,n,r,this.duration_),t.preventDefault(),e=!0}return!e};var hu=au,lu=function(t){Lh.call(this,{handleDownEvent:lu.handleDownEvent_,handleDragEvent:lu.handleDragEvent_,handleUpEvent:lu.handleUpEvent_});var e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=e.condition?e.condition:_h.noModifierKeys,this.noKinetic_=!1};C.inherits(lu,Lh),lu.handleDragEvent_=function(t){var e=this.targetPointers,i=Lh.centroid(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=this.lastCentroid[0]-i[0],r=i[1]-this.lastCentroid[1],n=t.map.getView(),s=n.getState(),a=[o,r];Ia.scale(a,s.resolution),Ia.rotate(a,s.rotation),Ia.add(a,s.center),a=n.constrainCenter(a),n.setCenter(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},lu.handleUpEvent_=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),n=i.getCenter(),s=e.getPixelFromCoordinate(n),a=e.getCoordinateFromPixel([s[0]-o*Math.cos(r),s[1]-o*Math.sin(r)]);i.animate({center:i.constrainCenter(a),duration:500,easing:ft.easeOut})}return i.setHint(Kp.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},lu.handleDownEvent_=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||e.setHint(Kp.INTERACTING,1),e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},lu.prototype.shouldStopEvent=Go.FALSE;var pu=lu,uu=function(t){var e=t||{};Lh.call(this,{handleDownEvent:uu.handleDownEvent_,handleDragEvent:uu.handleDragEvent_,handleUpEvent:uu.handleUpEvent_}),this.condition_=e.condition?e.condition:_h.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250};C.inherits(uu,Lh),uu.handleDragEvent_=function(t){if(_h.mouseOnly(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==zp.disable){var o=e.getSize(),r=t.pixel,n=Math.atan2(o[1]/2-r[1],r[0]-o[0]/2);if(void 0!==this.lastAngle_){var s=n-this.lastAngle_,a=i.getRotation();Ih.rotateWithoutConstraints(i,a-s)}this.lastAngle_=n}}},uu.handleUpEvent_=function(t){if(!_h.mouseOnly(t))return!0;var e=t.map.getView();e.setHint(Kp.INTERACTING,-1);var i=e.getRotation();return Ih.rotate(e,i,void 0,this.duration_),!1},uu.handleDownEvent_=function(t){return!!_h.mouseOnly(t)&&(!(!_h.mouseActionButton(t)||!this.condition_(t))&&(t.map.getView().setHint(Kp.INTERACTING,1),this.lastAngle_=void 0,!0))},uu.prototype.shouldStopEvent=Go.FALSE;var cu=uu,fu=function(t){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null};C.inherits(fu,yt),fu.prototype.disposeInternal=function(){this.setMap(null)},fu.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},fu.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},fu.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},fu.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new xn([i])},fu.prototype.getGeometry=function(){return this.geometry_};var du=fu,yu=function(t){Lh.call(this,{handleDownEvent:yu.handleDownEvent_,handleDragEvent:yu.handleDragEvent_,handleUpEvent:yu.handleUpEvent_});var e=t||{};this.box_=new du(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.startPixel_=null,this.condition_=e.condition?e.condition:_h.always,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:yu.defaultBoxEndCondition};C.inherits(yu,Lh),yu.defaultBoxEndCondition=function(t,e,i){var o=i[0]-e[0],r=i[1]-e[1];return o*o+r*r>=this.minArea_},yu.handleDragEvent_=function(t){_h.mouseOnly(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new yu.Event(yu.EventType_.BOXDRAG,t.coordinate,t)))},yu.prototype.getGeometry=function(){return this.box_.getGeometry()},yu.prototype.onBoxEnd=C.nullFunction,yu.handleUpEvent_=function(t){return!_h.mouseOnly(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new yu.Event(yu.EventType_.BOXEND,t.coordinate,t))),!1)},yu.handleDownEvent_=function(t){return!!_h.mouseOnly(t)&&(!(!_h.mouseActionButton(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new yu.Event(yu.EventType_.BOXSTART,t.coordinate,t)),!0))},yu.EventType_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},yu.Event=function(t,e,i){_t.call(this,t),this.coordinate=e,this.mapBrowserEvent=i},C.inherits(yu.Event,_t);var gu=yu,vu=function(t){var e=t||{},i=e.condition?e.condition:_h.shiftKeyOnly;this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out,gu.call(this,{condition:i,className:e.className||"ol-dragzoom"})};C.inherits(vu,gu),vu.prototype.onBoxEnd=function(){var t=this.getMap(),e=t.getView(),i=t.getSize(),o=this.getGeometry().getExtent();if(this.out_){var r=e.calculateExtent(i),n=U.createOrUpdateFromCoordinates([t.getPixelFromCoordinate(U.getBottomLeft(o)),t.getPixelFromCoordinate(U.getTopRight(o))]),s=e.getResolutionForExtent(n,i);U.scaleFromCenter(r,1/s),o=r}var a=e.constrainResolution(e.getResolutionForExtent(o,i)),h=U.getCenter(o);h=e.constrainCenter(h),e.animate({resolution:a,center:h,duration:this.duration_,easing:ft.easeOut})};var mu=vu,_u={LEFT:37,UP:38,RIGHT:39,DOWN:40},bu=function(t){Ih.call(this,{handleEvent:bu.handleEvent});var e=t||{};this.defaultCondition_=function(t){return _h.noModifierKeys(t)&&_h.targetNotEditable(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128};C.inherits(bu,Ih),bu.handleEvent=function(t){var e=!1;if(t.type==Et.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==_u.DOWN||i==_u.LEFT||i==_u.RIGHT||i==_u.UP)){var o=t.map.getView(),r=o.getResolution()*this.pixelDelta_,n=0,s=0;i==_u.DOWN?s=-r:i==_u.LEFT?n=-r:i==_u.RIGHT?n=r:s=r;var a=[n,s];Ia.rotate(a,o.getRotation()),Ih.pan(o,a,this.duration_),t.preventDefault(),e=!0}}return!e};var xu=bu,Eu=function(t){Ih.call(this,{handleEvent:Eu.handleEvent});var e=t||{};this.condition_=e.condition?e.condition:_h.targetNotEditable,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100};C.inherits(Eu,Ih),Eu.handleEvent=function(t){var e=!1;if(t.type==Et.KEYDOWN||t.type==Et.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var o=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_,n=o.getView();Ih.zoomByDelta(n,r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e};var Su=Eu,Tu=function(t){Ih.call(this,{handleEvent:Tu.handleEvent});var e=t||{};this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};C.inherits(Tu,Ih),Tu.handleEvent=function(t){var e=t.type;if(e!==Et.WHEEL&&e!==Et.MOUSEWHEEL)return!0;t.preventDefault();var i,o=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Et.WHEEL?(i=r.deltaY,xs.FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=xs.DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==Et.MOUSEWHEEL&&(i=-r.wheelDeltaY,xs.SAFARI&&(i/=3)),0===i)return!1;var n=Date.now();if(void 0===this.startTime_&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?Tu.Mode_.TRACKPAD:Tu.Mode_.WHEEL),this.mode_===Tu.Mode_.TRACKPAD){var s=o.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(Kp.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),l=s.getMaxResolution(),p=0;if(a<h?(a=Math.max(a,h/this.trackpadZoomBuffer_),p=1):a>l&&(a=Math.min(a,l*this.trackpadZoomBuffer_),p=-1),this.lastAnchor_){var u=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(u))}return s.setResolution(a),0===p&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,i>0?-1:1),easing:ft.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),p>0?s.animate({resolution:h,easing:ft.easeOut,anchor:this.lastAnchor_,duration:500}):p<0&&s.animate({resolution:l,easing:ft.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=n,!1}this.delta_+=i;var c=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),c),!1},Tu.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(Kp.INTERACTING,-1)},Tu.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=C.MOUSEWHEELZOOM_MAXDELTA,o=A.clamp(this.delta_,-i,i);Ih.zoomByDelta(e,-o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},Tu.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},Tu.Mode_={TRACKPAD:"trackpad",WHEEL:"wheel"};var wu=Tu,Cu=function(t){Lh.call(this,{handleDownEvent:Cu.handleDownEvent_,handleDragEvent:Cu.handleDragEvent_,handleUpEvent:Cu.handleUpEvent_});var e=t||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250};C.inherits(Cu,Lh),Cu.handleDragEvent_=function(t){var e=0,i=this.targetPointers[0],o=this.targetPointers[1],r=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(void 0!==this.lastAngle_){var n=r-this.lastAngle_;this.rotationDelta_+=n,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=n}this.lastAngle_=r;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==zp.disable){var h=s.getViewport().getBoundingClientRect(),l=Lh.centroid(this.targetPointers);if(l[0]-=h.left,l[1]-=h.top,this.anchor_=s.getCoordinateFromPixel(l),this.rotating_){var p=a.getRotation();s.render(),Ih.rotateWithoutConstraints(a,p+e,this.anchor_)}}},Cu.handleUpEvent_=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(Kp.INTERACTING,-1),this.rotating_){var i=e.getRotation();Ih.rotate(e,i,this.anchor_,this.duration_)}return!1}return!0},Cu.handleDownEvent_=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(Kp.INTERACTING,1),!0}return!1},Cu.prototype.shouldStopEvent=Go.FALSE;var Ru=Cu,Pu=function(t){Lh.call(this,{handleDownEvent:Pu.handleDownEvent_,handleDragEvent:Pu.handleDragEvent_,handleUpEvent:Pu.handleUpEvent_});var e=t||{};this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1};C.inherits(Pu,Lh),Pu.handleDragEvent_=function(t){var e=1,i=this.targetPointers[0],o=this.targetPointers[1],r=i.clientX-o.clientX,n=i.clientY-o.clientY,s=Math.sqrt(r*r+n*n);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,h=a.getView(),l=h.getResolution(),p=h.getMaxResolution(),u=h.getMinResolution(),c=l*e;c>p?(e=p/l,c=p):c<u&&(e=u/l,c=u),1!=e&&(this.lastScaleDelta_=e);var f=a.getViewport().getBoundingClientRect(),d=Lh.centroid(this.targetPointers);d[0]-=f.left,d[1]-=f.top,this.anchor_=a.getCoordinateFromPixel(d),a.render(),Ih.zoomWithoutConstraints(h,c,this.anchor_)},Pu.handleUpEvent_=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(Kp.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var o=this.lastScaleDelta_-1;Ih.zoom(e,i,this.anchor_,this.duration_,o)}return!1}return!0},Pu.handleDownEvent_=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(Kp.INTERACTING,1),!0}return!1},Pu.prototype.shouldStopEvent=Go.FALSE;var Iu=Pu,Mu={defaults:function(t){var e=t||{},i=new Aa,o=new su(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new cu),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new hu({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new pu({kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Ru),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new Iu({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new xu),i.push(new Su({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new wu({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new mu({duration:e.zoomDuration})),i}},Lu=Mu,Au=function(t,e,i,o,r){this.loader_=void 0!==r?r:null;var n=void 0!==r?Es.IDLE:Es.LOADED;Kl.call(this,t,e,i,n),this.canvas_=o,this.error_=null};C.inherits(Au,Kl),Au.prototype.getError=function(){return this.error_},Au.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=Es.ERROR):this.state=Es.LOADED,this.changed()},Au.prototype.load=function(){this.state==Es.IDLE&&(this.state=Es.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},Au.prototype.getImage=function(){return this.canvas_};var Ou=Au,Fu=function(t,e,i,o,r){_t.call(this,t),this.vectorContext=e,this.frameState=i,this.context=o,this.glContext=r};C.inherits(Fu,_t);var Nu=Fu,Du=function(){};Du.prototype.drawCustom=function(t,e,i){},Du.prototype.drawGeometry=function(t){},Du.prototype.setStyle=function(t){},Du.prototype.drawCircle=function(t,e){},Du.prototype.drawFeature=function(t,e){},Du.prototype.drawGeometryCollection=function(t,e){},Du.prototype.drawLineString=function(t,e){},Du.prototype.drawMultiLineString=function(t,e){},Du.prototype.drawMultiPoint=function(t,e){},Du.prototype.drawMultiPolygon=function(t,e){},Du.prototype.drawPoint=function(t,e){},Du.prototype.drawPolygon=function(t,e){},Du.prototype.drawText=function(t,e){},Du.prototype.setFillStrokeStyle=function(t,e){},Du.prototype.setImageStyle=function(t,e){},Du.prototype.setTextStyle=function(t,e){};var ju=Du,ku=function(t,e,i,o,r){ju.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=o,this.viewRotation_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Wo.create()};C.inherits(ku,ju),ku.prototype.drawImages_=function(t,e,i,o){if(this.image_){var r=Bo.transform2D(t,e,i,2,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.tmpLocalTransform_,a=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=a*this.imageOpacity_);var h,l,p=this.imageRotation_;for(this.imageRotateWithView_&&(p+=this.viewRotation_),h=0,l=r.length;h<l;h+=2){var u=r[h]-this.imageAnchorX_,c=r[h+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(u=Math.round(u),c=Math.round(c)),0!==p||1!=this.imageScale_){var f=u+this.imageAnchorX_,d=c+this.imageAnchorY_;Wo.compose(s,f,d,this.imageScale_,this.imageScale_,p,-f,-d),n.setTransform.apply(n,s)}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,c,this.imageWidth_,this.imageHeight_)}0===p&&1==this.imageScale_||n.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(n.globalAlpha=a)}},ku.prototype.drawText_=function(t,e,i,o){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=Bo.transform2D(t,e,i,o,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=o){var a=r[e]+this.textOffsetX_,h=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){var l=Wo.compose(this.tmpLocalTransform_,a,h,this.textScale_,this.textScale_,s,-a,-h);n.setTransform.apply(n,l)}this.textStrokeState_&&n.strokeText(this.text_,a,h),this.textFillState_&&n.fillText(this.text_,a,h)}0===s&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}},ku.prototype.moveToLineTo_=function(t,e,i,o,r){var n=this.context_,s=Bo.transform2D(t,e,i,o,this.transform_,this.pixelCoordinates_);n.moveTo(s[0],s[1]);var a=s.length;r&&(a-=2);for(var h=2;h<a;h+=2)n.lineTo(s[h],s[h+1]);return r&&n.closePath(),i},ku.prototype.drawRings_=function(t,e,i,o){var r,n;for(r=0,n=i.length;r<n;++r)e=this.moveToLineTo_(t,e,i[r],o,!0);return e},ku.prototype.drawCircle=function(t){if(U.intersects(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Ko.transform2D(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],o=e[3]-e[1],r=Math.sqrt(i*i+o*o),n=this.context_;n.beginPath(),n.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},ku.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},ku.prototype.drawGeometry=function(t){switch(t.getType()){case W.POINT:this.drawPoint(t);break;case W.LINE_STRING:this.drawLineString(t);break;case W.POLYGON:this.drawPolygon(t);break;case W.MULTI_POINT:this.drawMultiPoint(t);break;case W.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case W.MULTI_POLYGON:this.drawMultiPolygon(t);break;case W.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case W.CIRCLE:this.drawCircle(t)}},ku.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&U.intersects(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},ku.prototype.drawGeometryCollection=function(t){var e,i,o=t.getGeometriesArray();for(e=0,i=o.length;e<i;++e)this.drawGeometry(o[e])},ku.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},ku.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},ku.prototype.drawLineString=function(t){if(U.intersects(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},ku.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(U.intersects(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i,o,r=this.context_,n=t.getFlatCoordinates(),s=0,a=t.getEnds(),h=t.getStride();for(r.beginPath(),i=0,o=a.length;i<o;++i)s=this.moveToLineTo_(n,s,a[i],h,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},ku.prototype.drawPolygon=function(t){if(U.intersects(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},ku.prototype.drawMultiPolygon=function(t){if(U.intersects(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e,i,o=this.context_,r=t.getOrientedFlatCoordinates(),n=0,s=t.getEndss(),a=t.getStride();for(o.beginPath(),e=0,i=s.length;e<i;++e){var h=s[e];n=this.drawRings_(r,n,h,a)}this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},ku.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},ku.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),xs.CANVAS_LINE_DASH&&(Xt.equals(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,xs.CANVAS_LINE_DASH&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},ku.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:Ps.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=o&&(i.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=o,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},ku.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:gs.asColorLike(i||Ps.defaultFillStyle)}}else this.fillState_=null;if(e){var o=e.getColor(),r=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:Ps.defaultLineCap,lineDash:n||Ps.defaultLineDash,lineDashOffset:s||Ps.defaultLineDashOffset,lineJoin:void 0!==a?a:Ps.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==h?h:Ps.defaultLineWidth),miterLimit:void 0!==l?l:Ps.defaultMiterLimit,strokeStyle:gs.asColorLike(o||Ps.defaultStrokeStyle)}}else this.strokeState_=null},ku.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),o=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=r[0]}else this.image_=null},ku.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:gs.asColorLike(i||Ps.defaultFillStyle)}}else this.textFillState_=null;var o=t.getStroke();if(o){var r=o.getColor(),n=o.getLineCap(),s=o.getLineDash(),a=o.getLineDashOffset(),h=o.getLineJoin(),l=o.getWidth(),p=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==n?n:Ps.defaultLineCap,lineDash:s||Ps.defaultLineDash,lineDashOffset:a||Ps.defaultLineDashOffset,lineJoin:void 0!==h?h:Ps.defaultLineJoin,lineWidth:void 0!==l?l:Ps.defaultLineWidth,miterLimit:void 0!==p?p:Ps.defaultMiterLimit,strokeStyle:gs.asColorLike(r||Ps.defaultStrokeStyle)}}else this.textStrokeState_=null;var u=t.getFont(),c=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),y=t.getRotation(),g=t.getScale(),v=t.getText(),m=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==u?u:Ps.defaultFont,textAlign:void 0!==m?m:Ps.defaultTextAlign,textBaseline:void 0!==_?_:Ps.defaultTextBaseline},this.text_=void 0!==v?v:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==y?y:0,this.textScale_=this.pixelRatio_*(void 0!==g?g:1)}else this.text_=""};var Gu=ku,Uu=function(t){Qt.call(this),this.layer_=t};C.inherits(Uu,Qt),Uu.prototype.forEachFeatureAtCoordinate=C.nullFunction,Uu.prototype.hasFeatureAtCoordinate=Go.FALSE,Uu.prototype.createLoadedTileFinder=function(t,e,i){return function(o,r){return t.forEachLoadedTile(e,o,r,function(t){i[o]||(i[o]={}),i[o][t.tileCoord.toString()]=t})}},Uu.prototype.getLayer=function(){return this.layer_},Uu.prototype.handleImageChange_=function(t){t.target.getState()===Es.LOADED&&this.renderIfReadyAndVisible()},Uu.prototype.loadImage=function(t){var e=t.getState();return e!=Es.LOADED&&e!=Es.ERROR&&vt.listen(t,Et.CHANGE,this.handleImageChange_,this),e==Es.IDLE&&(t.load(),e=t.getState()),e==Es.LOADED},Uu.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==pt.READY&&this.changed()},Uu.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var o=C.getUid(t).toString();o in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(i)}},Uu.prototype.updateLogos=function(t,e){var i=e.getLogo();void 0!==i&&("string"==typeof i?t.logos[i]="":i&&(M.assert("string"==typeof i.href,44),M.assert("string"==typeof i.src,45),t.logos[i.src]=i.href))},Uu.prototype.updateUsedTiles=function(t,e,i,o){var r=C.getUid(e).toString(),n=i.toString();r in t?n in t[r]?t[r][n].extend(o):t[r][n]=o:(t[r]={},t[r][n]=o)},Uu.prototype.manageTilePyramid=function(t,e,i,o,r,n,s,a,h,l){var p=C.getUid(e).toString();p in t.wantedTiles||(t.wantedTiles[p]={});var u,c,f,d,y,g,v=t.wantedTiles[p],m=t.tileQueue;for(g=i.getMinZoom();g<=s;++g)for(c=i.getTileRangeForExtentAndZ(n,g,c),f=i.getResolution(g),d=c.minX;d<=c.maxX;++d)for(y=c.minY;y<=c.maxY;++y)s-g<=a?((u=e.getTile(g,d,y,o,r)).getState()==ut.IDLE&&(v[u.getKey()]=!0,m.isKeyQueued(u.getKey())||m.enqueue([u,p,i.getTileCoordCenter(u.tileCoord),f])),void 0!==h&&h.call(l,u)):e.useTile(g,d,y,r)};var Bu=Uu,Vu=function(t){Bu.call(this,t),this.renderedResolution,this.transform_=Wo.create()};C.inherits(Vu,Bu),Vu.prototype.clip=function(t,e,i){var o=e.pixelRatio,r=e.size[0]*o,n=e.size[1]*o,s=e.viewState.rotation,a=U.getTopLeft(i),h=U.getTopRight(i),l=U.getBottomRight(i),p=U.getBottomLeft(i);Wo.apply(e.coordinateToPixelTransform,a),Wo.apply(e.coordinateToPixelTransform,h),Wo.apply(e.coordinateToPixelTransform,l),Wo.apply(e.coordinateToPixelTransform,p),t.save(),Ps.rotateAtOffset(t,-s,r/2,n/2),t.beginPath(),t.moveTo(a[0]*o,a[1]*o),t.lineTo(h[0]*o,h[1]*o),t.lineTo(l[0]*o,l[1]*o),t.lineTo(p[0]*o,p[1]*o),t.clip(),Ps.rotateAtOffset(t,s,r/2,n/2)},Vu.prototype.dispatchComposeEvent_=function(t,e,i,o){var r=this.getLayer();if(r.hasListener(t)){var n=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,a=i.viewState.rotation;Ps.rotateAtOffset(e,-a,n/2,s/2);var h=void 0!==o?o:this.getTransform(i,0),l=new Gu(e,i.pixelRatio,i.extent,h,i.viewState.rotation),p=new Nu(t,l,i,e,null);r.dispatchEvent(p),Ps.rotateAtOffset(e,a,n/2,s/2)}},Vu.prototype.forEachLayerAtCoordinate=function(t,e,i,o){return this.forEachFeatureAtCoordinate(t,e,0,Go.TRUE,this)?i.call(o,this.getLayer(),null):void 0},Vu.prototype.postCompose=function(t,e,i,o){this.dispatchComposeEvent_(Dh.POSTCOMPOSE,t,e,o)},Vu.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(Dh.PRECOMPOSE,t,e,i)},Vu.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(Dh.RENDER,t,e,i)},Vu.prototype.getTransform=function(t,e){var i=t.viewState,o=t.pixelRatio,r=o*t.size[0]/2,n=o*t.size[1]/2,s=o/i.resolution,a=-s,h=-i.rotation,l=-i.center[0]+e,p=-i.center[1];return Wo.compose(this.transform_,r,n,s,a,h,l,p)},Vu.prototype.composeFrame=function(t,e,i){},Vu.prototype.prepareFrame=function(t,e){};var Wu=Vu,Xu=function(t){Wu.call(this,t),this.coordinateToCanvasPixelTransform=Wo.create(),this.hitCanvasContext_=null};C.inherits(Xu,Wu),Xu.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var o=this.getImage();if(o){var r=e.extent,n=void 0!==r&&!U.containsExtent(r,t.extent)&&U.intersects(r,t.extent);n&&this.clip(i,t,r);var s=this.getImageTransform(),a=i.globalAlpha;i.globalAlpha=e.opacity;var h=s[4],l=s[5],p=o.width*s[0],u=o.height*s[3];i.drawImage(o,0,0,+o.width,+o.height,Math.round(h),Math.round(l),Math.round(p),Math.round(u)),i.globalAlpha=a,n&&i.restore()}this.postCompose(i,t,e)},Xu.prototype.getImage=function(){},Xu.prototype.getImageTransform=function(){},Xu.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r){var n=this.getLayer(),s=n.getSource(),a=e.viewState.resolution,h=e.viewState.rotation,l=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,h,i,l,function(t){return o.call(r,t,n)})},Xu.prototype.forEachLayerAtCoordinate=function(t,e,i,o){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==C.nullFunction)return Wu.prototype.forEachLayerAtCoordinate.apply(this,arguments);var r=Wo.apply(this.coordinateToCanvasPixelTransform,t.slice());Ia.scale(r,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Ct.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),r[0],r[1],1,1,0,0,1,1);var n=this.hitCanvasContext_.getImageData(0,0,1,1).data;return n[3]>0?i.call(o,this.getLayer(),n):void 0}};var Yu=Xu,zu=function(t){Yu.call(this,t),this.image_=null,this.imageTransform_=Wo.create(),this.skippedFeatures_=[],this.vectorRenderer_=null};C.inherits(zu,Yu),zu.handles=function(t,e){return t===iu.CANVAS&&(e.getType()===Ah.IMAGE||e.getType()===Ah.VECTOR&&e.getRenderMode()===Gh.IMAGE)},zu.create=function(t,e){var i=new zu(e);if(e.getType()===Ah.VECTOR)for(var o=eu.getLayerRendererPlugins(),r=0,n=o.length;r<n;++r){var s=o[r];s!==zu&&s.handles(iu.CANVAS,e)&&i.setVectorRenderer(s.create(t,e))}return i},zu.prototype.getImage=function(){return this.image_?this.image_.getImage():null},zu.prototype.getImageTransform=function(){return this.imageTransform_},zu.prototype.prepareFrame=function(t,e){var i,o=t.pixelRatio,r=t.size,n=t.viewState,s=n.center,a=n.resolution,h=this.getLayer().getSource(),l=t.viewHints,p=t.extent;if(void 0!==e.extent&&(p=U.getIntersection(p,e.extent)),!l[Kp.ANIMATING]&&!l[Kp.INTERACTING]&&!U.isEmpty(p)){var u=n.projection;if(!C.ENABLE_RASTER_REPROJECTION){var c=h.getProjection();c&&(u=c)}var f=this.vectorRenderer_;if(f){var d=f.context,y=nt.assign({},t,{size:[U.getWidth(p)/a,U.getHeight(p)/a],viewState:nt.assign({},t.viewState,{rotation:0})}),g=Object.keys(y.skippedFeatureUids).sort();!f.prepareFrame(y,e)||!f.replayGroupChanged&&Xt.equals(g,this.skippedFeatures_)||(d.canvas.width=y.size[0]*o,d.canvas.height=y.size[1]*o,f.composeFrame(y,e,d),this.image_=new Ou(p,a,o,d.canvas),this.skippedFeatures_=g)}else{if(i=h.getImage(p,a,o,u))this.loadImage(i)&&(this.image_=i)}}if(this.image_){var v=(i=this.image_).getExtent(),m=i.getResolution(),_=i.getPixelRatio(),b=o*m/(a*_),x=Wo.compose(this.imageTransform_,o*r[0]/2,o*r[1]/2,b,b,0,_*(v[0]-s[0])/m,_*(s[1]-v[3])/m);Wo.compose(this.coordinateToCanvasPixelTransform,o*r[0]/2-x[4],o*r[1]/2-x[5],o/a,-o/a,0,-s[0],-s[1]),this.updateLogos(t,h),this.renderedResolution=m*o/_}return!!this.image_},zu.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,o,r):Yu.prototype.forEachFeatureAtCoordinate.call(this,t,e,i,o,r)},zu.prototype.setVectorRenderer=function(t){this.vectorRenderer_=t};var Ku=zu,Hu=function(t,e){yt.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={}};C.inherits(Hu,yt),Hu.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Wo.compose(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Wo.invert(Wo.setFromArray(o,i))},Hu.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},Hu.expireIconCache_=function(t,e){Zh.iconImageCache.expire()},Hu.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r,n,s){var a,h=e.viewState,l=h.resolution;function p(t,i){var n=C.getUid(t).toString(),s=e.layerStates[C.getUid(i)].managed;if(!(n in e.skippedFeatureUids)||s)return o.call(r,t,s?i:null)}var u=h.projection,c=t;if(u.canWrapX()){var f=u.getExtent(),d=U.getWidth(f),y=t[0];if(y<f[0]||y>f[2])c=[y+d*Math.ceil((f[0]-y)/d),t[1]]}var g,v=e.layerStatesArray;for(g=v.length-1;g>=0;--g){var m=v[g],_=m.layer;if(kh.visibleAtResolution(m,l)&&n.call(s,_)){var b=this.getLayerRenderer(_);if(_.getSource()&&(a=b.forEachFeatureAtCoordinate(_.getSource().getWrapX()?c:t,e,i,p,r)),a)return a}}},Hu.prototype.forEachLayerAtPixel=function(t,e,i,o,r,n){},Hu.prototype.hasFeatureAtCoordinate=function(t,e,i,o,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,Go.TRUE,this,o,r)},Hu.prototype.getLayerRenderer=function(t){var e=C.getUid(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,o=eu.getLayerRendererPlugins(),r=this.getType(),n=0,s=o.length;n<s;++n){var a=o[n];if(a.handles(r,t)){i=a.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=vt.listen(i,Et.CHANGE,this.handleLayerRendererChange_,this),i},Hu.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},Hu.prototype.getLayerRenderers=function(){return this.layerRenderers_},Hu.prototype.getMap=function(){return this.map_},Hu.prototype.getType=function(){},Hu.prototype.handleLayerRendererChange_=function(){this.map_.render()},Hu.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],vt.unlistenByKey(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},Hu.prototype.renderFrame=C.nullFunction,Hu.prototype.removeUnusedLayerRenderers_=function(t,e){var i;for(i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},Hu.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(Hu.expireIconCache_)},Hu.prototype.scheduleRemoveUnusedLayerRenderers=function(t){var e;for(e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},Hu.sortByZIndex=function(t,e){return t.zIndex-e.zIndex};var $u=Hu,qu=function(t,e){$u.call(this,t,e),this.context_=Ct.createCanvasContext2D(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=Cs.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Wo.create()};C.inherits(qu,$u),qu.handles=function(t){return t===iu.CANVAS},qu.create=function(t,e){return new qu(t,e)},qu.prototype.dispatchComposeEvent_=function(t,e){var i=this.getMap(),o=this.context_;if(i.hasListener(t)){var r=e.extent,n=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),h=new Gu(o,n,r,a,s),l=new Nu(t,h,e,o,null);i.dispatchEvent(l)}},qu.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,o=this.canvas_.height/2,r=t.pixelRatio/e.resolution,n=-r,s=-e.rotation,a=-e.center[0],h=-e.center[1];return Wo.compose(this.transform_,i,o,r,n,s,a,h)},qu.prototype.getType=function(){return iu.CANVAS},qu.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,o=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=o||this.canvas_.height!=r?(this.canvas_.width=o,this.canvas_.height=r):e.clearRect(0,0,o,r);var n=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_(Dh.PRECOMPOSE,t);var s=t.layerStatesArray;Xt.stableSort(s,$u.sortByZIndex),n&&(e.save(),Ps.rotateAtOffset(e,n,o/2,r/2));var a,h,l,p,u,c=t.viewState.resolution;for(a=0,h=s.length;a<h;++a)l=(u=s[a]).layer,p=this.getLayerRenderer(l),kh.visibleAtResolution(u,c)&&u.sourceState==pt.READY&&p.prepareFrame(t,u)&&p.composeFrame(t,u,e);n&&e.restore(),this.dispatchComposeEvent_(Dh.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},qu.prototype.forEachLayerAtPixel=function(t,e,i,o,r,n){var s,a,h=e.viewState.resolution,l=e.layerStatesArray,p=l.length,u=Wo.apply(e.pixelToCoordinateTransform,t.slice());for(a=p-1;a>=0;--a){var c=l[a],f=c.layer;if(kh.visibleAtResolution(c,h)&&r.call(n,f))if(s=this.getLayerRenderer(f).forEachLayerAtCoordinate(u,e,i,o))return s}};var Zu=qu,Ju=function(t){Yu.call(this,t),this.context=null===this.context?null:Ct.createCanvasContext2D(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.tmpExtent=U.createEmpty(),this.tmpTileRange_=new Vt(0,0,0,0),this.imageTransform_=Wo.create(),this.zDirection=0};C.inherits(Ju,Yu),Ju.handles=function(t,e){return t===iu.CANVAS&&e.getType()===Ah.TILE},Ju.create=function(t,e){return new Ju(e)},Ju.prototype.isDrawableTile_=function(t){var e=t.getState(),i=this.getLayer().getUseInterimTilesOnError();return e==ut.LOADED||e==ut.EMPTY||e==ut.ERROR&&!i},Ju.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,o=t.size,r=t.viewState,n=r.projection,s=r.resolution,a=r.center,h=this.getLayer(),l=h.getSource(),p=l.getRevision(),u=l.getTileGridForProjection(n),c=u.getZForResolution(s,this.zDirection),f=u.getResolution(c),d=Math.round(s/f)||1,y=t.extent;if(void 0!==e.extent&&(y=U.getIntersection(y,e.extent)),U.isEmpty(y))return!1;var g=u.getTileRangeForExtentAndZ(y,c),v=u.getTileRangeExtent(c,g),m=l.getTilePixelRatio(i),_={};_[c]={};var b,x,E,S=this.createLoadedTileFinder(l,n,_),T=this.tmpExtent,w=this.tmpTileRange_,R=!1;for(x=g.minX;x<=g.maxX;++x)for(E=g.minY;E<=g.maxY;++E){if((b=l.getTile(c,x,E,i,n)).getState()==ut.ERROR&&(h.getUseInterimTilesOnError()?h.getPreload()>0&&(R=!0):b.setState(ut.LOADED)),this.isDrawableTile_(b)||(b=b.getInterimTile()),this.isDrawableTile_(b)){var P=C.getUid(this);if(b.getState()==ut.LOADED){_[c][b.tileCoord.toString()]=b;var I=b.inTransition(P);R||!I&&-1!==this.renderedTiles.indexOf(b)||(R=!0)}if(1===b.getAlpha(P,t.time))continue}var M=u.getTileCoordChildTileRange(b.tileCoord,w,T),L=!1;M&&(L=S(c+1,M)),L||u.forEachTileCoordParentTileRange(b.tileCoord,S,null,w,T)}var A=f*i/m*d,O=t.viewHints,F=O[Kp.ANIMATING]||O[Kp.INTERACTING];if(!(this.renderedResolution&&Date.now()-t.time>16&&F)&&(R||!this.renderedExtent_||!U.containsExtent(this.renderedExtent_,y)||this.renderedRevision!=p||d!=this.oversampling_||!F&&A!=this.renderedResolution)){var N=this.context;if(N){var D=l.getTilePixelSize(c,i,n),j=Math.round(g.getWidth()*D[0]/d),k=Math.round(g.getHeight()*D[1]/d),G=N.canvas;G.width!=j||G.height!=k?(this.oversampling_=d,G.width=j,G.height=k):(this.renderedExtent_&&!U.equals(v,this.renderedExtent_)&&N.clearRect(0,0,j,k),d=this.oversampling_)}this.renderedTiles.length=0;var B,V,W,X,Y,z,K,H,$,q,Z=Object.keys(_).map(Number);for(Z.sort(function(t,e){return t===c?1:e===c?-1:t>e?1:t<e?-1:0}),X=0,Y=Z.length;X<Y;++X)for(var J in W=Z[X],V=l.getTilePixelSize(W,i,n),B=u.getResolution(W)/f,K=m*l.getGutter(n),H=_[W])b=H[J],x=((z=u.getTileCoordExtent(b.getTileCoord(),T))[0]-v[0])/f*m/d,E=(v[3]-z[3])/f*m/d,$=V[0]*B/d,q=V[1]*B/d,this.drawTileImage(b,t,e,x,E,$,q,K,c===W),this.renderedTiles.push(b);this.renderedRevision=p,this.renderedResolution=f*i/m*d,this.renderedExtent_=v}var Q=this.renderedResolution/s,tt=Wo.compose(this.imageTransform_,i*o[0]/2,i*o[1]/2,Q,Q,0,(this.renderedExtent_[0]-a[0])/this.renderedResolution*i,(a[1]-this.renderedExtent_[3])/this.renderedResolution*i);return Wo.compose(this.coordinateToCanvasPixelTransform,i*o[0]/2-tt[4],i*o[1]/2-tt[5],i/s,-i/s,0,-a[0],-a[1]),this.updateUsedTiles(t.usedTiles,l,c,g),this.manageTilePyramid(t,l,u,i,n,y,c,h.getPreload()),this.scheduleExpireCache(t,l),this.updateLogos(t,l),this.renderedTiles.length>0},Ju.prototype.drawTileImage=function(t,e,i,o,r,n,s,a,h){var l=t.getImage(this.getLayer());if(l){var p=C.getUid(this),u=h?t.getAlpha(p,e.time):1;1!==u||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(o,r,n,s);var c=u!==this.context.globalAlpha;c&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,o,r,n,s),c&&this.context.restore(),1!==u?e.animate=!0:h&&t.endTransition(p)}},Ju.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},Ju.prototype.getLayer,Ju.prototype.getImageTransform=function(){return this.imageTransform_};var Qu=Ju,tc=function(){};tc.prototype.getReplay=function(t,e){},tc.prototype.isEmpty=function(){};var ec=tc,ic={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},oc={lineString:function(t,e,i,o,r,n,s,a){for(var h,l,p,u=[],c=t[e]>t[i-o],f=r.length,d=t[e],y=t[e+1],g=t[e+=o],v=t[e+1],m=0,_=Math.sqrt(Math.pow(g-d,2)+Math.pow(v-y,2)),b="",x=0,E=0;E<f;++E){l=c?f-E-1:E;var S=r.charAt(l),T=n(b=c?S+b:b+S)-x;x+=T;for(var w=s+T/2;e<i-o&&m+_<w;)d=g,y=v,g=t[e+=o],v=t[e+1],m+=_,_=Math.sqrt(Math.pow(g-d,2)+Math.pow(v-y,2));var C=w-m,R=Math.atan2(v-y,g-d);if(c&&(R+=R>0?-Math.PI:Math.PI),void 0!==p){var P=R-p;if(P+=P>Math.PI?-2*Math.PI:P<-Math.PI?2*Math.PI:0,Math.abs(P)>a)return null}var I=C/_,M=A.lerp(d,g,I),L=A.lerp(y,v,I);p==R?(c&&(h[0]=M,h[1]=L,h[2]=T/2),h[4]=b):(x=T,h=[M,L,T/2,R,b=S],c?u.unshift(h):u.push(h),p=R),s+=T}return u}},rc=oc,nc={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},sc={};sc.ORDER=[ic.POLYGON,ic.CIRCLE,ic.LINE_STRING,ic.IMAGE,ic.TEXT,ic.DEFAULT],sc.TEXT_ALIGN={},sc.TEXT_ALIGN.left=0,sc.TEXT_ALIGN.end=0,sc.TEXT_ALIGN.center=.5,sc.TEXT_ALIGN.right=1,sc.TEXT_ALIGN.start=1,sc.TEXT_ALIGN.top=0,sc.TEXT_ALIGN.middle=.5,sc.TEXT_ALIGN.hanging=.2,sc.TEXT_ALIGN.alphabetic=.8,sc.TEXT_ALIGN.ideographic=.8,sc.TEXT_ALIGN.bottom=1;var ac=sc,hc=function(t,e,i,o,r,n){ju.call(this),this.declutterTree=n,this.tmpExtent_=U.createEmpty(),this.tolerance=t,this.maxExtent=e,this.overlaps=r,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=i,this.fillOrigin_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Wo.create(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0,this.tmpLocalTransform_=Wo.create(),this.resetTransform_=Wo.create()};C.inherits(hc,ju),hc.prototype.replayTextBackground_=function(t,e,i,o,r,n,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,o),t.lineTo.apply(t,r),t.lineTo.apply(t,e),n&&(this.fillOrigin_=n[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},hc.prototype.replayImage_=function(t,e,i,o,r,n,s,a,h,l,p,u,c,f,d,y,g,v){var m=g||v,_=this.tmpLocalTransform_;e-=r*=c,i-=n*=c,f&&(e=Math.round(e),i=Math.round(i));var b,x,E,S,T=d+l>o.width?o.width-l:d,w=a+p>o.height?o.height-p:a,C=this.tmpExtent_,R=y[3]+T*c+y[1],P=y[0]+w*c+y[2],I=e-y[3],M=i-y[0];(m||0!==u)&&(b=[I,M],x=[I+R,M],E=[I+R,M+P],S=[I,M+P]);var L=null;if(0!==u){var A=e+r,O=i+n;L=Wo.compose(_,A,O,1,1,u,-A,-O),U.createOrUpdateEmpty(C),U.extendCoordinate(C,Wo.apply(_,b)),U.extendCoordinate(C,Wo.apply(_,x)),U.extendCoordinate(C,Wo.apply(_,E)),U.extendCoordinate(C,Wo.apply(_,S))}else U.createOrUpdate(I,M,I+R,M+P,C);var F=t.canvas,N=C[0]<=F.width&&C[2]>=0&&C[1]<=F.height&&C[3]>=0;if(s){if(!N&&1==s[4])return;U.extend(s,C);var D=N?[t,L?L.slice(0):null,h,o,l,p,T,w,e,i,c]:null;D&&m&&D.push(g,v,b,x,E,S),s.push(D)}else N&&(m&&this.replayTextBackground_(t,b,x,E,S,g,v),Ps.drawImage(t,L,h,o,l,p,T,w,e,i,c))},hc.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},hc.prototype.appendFlatCoordinates=function(t,e,i,o,r,n){var s=this.coordinates.length,a=this.getBufferedMaxExtent();n&&(e+=o);var h,l,p,u=[t[e],t[e+1]],c=[NaN,NaN],f=!0;for(h=e+o;h<i;h+=o)c[0]=t[h],c[1]=t[h+1],(p=U.coordinateRelationship(a,c))!==l?(f&&(this.coordinates[s++]=u[0],this.coordinates[s++]=u[1]),this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],f=!1):p===k.INTERSECTING?(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1],f=!1):f=!0,u[0]=c[0],u[1]=c[1],l=p;return(r&&f||h===e+o)&&(this.coordinates[s++]=u[0],this.coordinates[s++]=u[1]),s},hc.prototype.drawCustomCoordinates_=function(t,e,i,o,r){for(var n=0,s=i.length;n<s;++n){var a=i[n],h=this.appendFlatCoordinates(t,e,a,o,!1,!1);r.push(h),e=a}return e},hc.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var o,r,n,s,a,h=t.getType(),l=t.getStride(),p=this.coordinates.length;if(h==W.MULTI_POLYGON){o=(t=t).getOrientedFlatCoordinates(),s=[];var u=t.getEndss();a=0;for(var c=0,f=u.length;c<f;++c){var d=[];a=this.drawCustomCoordinates_(o,a,u[c],l,d),s.push(d)}this.instructions.push([nc.CUSTOM,p,s,t,i,Vr.coordinatesss])}else h==W.POLYGON||h==W.MULTI_LINE_STRING?(n=[],o=h==W.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(o,0,t.getEnds(),l,n),this.instructions.push([nc.CUSTOM,p,n,t,i,Vr.coordinatess])):h==W.LINE_STRING||h==W.MULTI_POINT?(o=t.getFlatCoordinates(),r=this.appendFlatCoordinates(o,0,o.length,l,!1,!1),this.instructions.push([nc.CUSTOM,p,r,t,i,Vr.coordinates])):h==W.POINT&&(o=t.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),r=this.coordinates.length,this.instructions.push([nc.CUSTOM,p,r,t,i]));this.endGeometry(t,e)},hc.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[nc.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[nc.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},hc.prototype.fill_=function(t){if(this.fillOrigin_){var e=Wo.apply(this.renderedTransform_,this.fillOrigin_.slice());t.translate(e[0],e[1]),t.rotate(this.viewRotation_)}t.fill(),this.fillOrigin_&&t.setTransform.apply(t,Ps.resetTransform_)},hc.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],xs.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},hc.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(o)){this.declutterTree.insert(o);for(var r=Ps.drawImage,n=5,s=t.length;n<s;++n){var a=t[n];a&&(a.length>11&&this.replayTextBackground_(a[0],a[13],a[14],a[15],a[16],a[11],a[12]),r.apply(void 0,a))}}t.length=5,U.createOrUpdateEmpty(t)}}},hc.prototype.replay_=function(t,e,i,o,r,n){var s;this.pixelCoordinates_&&Xt.equals(e,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=Bo.transform2D(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Wo.setFromArray(this.renderedTransform_,e));for(var a,h,l,p,u,c,f,d,y,g=!nt.isEmpty(i),v=0,m=o.length,_=0,b=0,x=0,E=null,S=null,T=this.coordinateCache_,w=this.viewRotation_,R={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:w},P=this.instructions!=o||this.overlaps?0:200;v<m;){var I,M,L,A=o[v];switch(A[0]){case nc.BEGIN_GEOMETRY:I=A[1],g&&i[C.getUid(I).toString()]||!I.getGeometry()?v=A[2]:void 0===n||U.intersects(n,I.getGeometry().getExtent())?++v:v=A[2]+1;break;case nc.BEGIN_PATH:b>P&&(this.fill_(t),b=0),x>P&&(t.stroke(),x=0),b||x||(t.beginPath(),p=u=NaN),++v;break;case nc.CIRCLE:var O=s[_=A[1]],F=s[_+1],N=s[_+2]-O,D=s[_+3]-F,j=Math.sqrt(N*N+D*D);t.moveTo(O+j,F),t.arc(O,F,j,0,2*Math.PI,!0),++v;break;case nc.CLOSE_PATH:t.closePath(),++v;break;case nc.CUSTOM:_=A[1],a=A[2];var k=A[3],G=A[4],B=6==A.length?A[5]:void 0;R.geometry=k,R.feature=I,v in T||(T[v]=[]);var V=T[v];B?B(s,_,a,2,V):(V[0]=s[_],V[1]=s[_+1],V.length=2),G(V,R),++v;break;case nc.DRAW_IMAGE:_=A[1],a=A[2],y=A[3],h=A[4],l=A[5],d=r?null:A[6];var W,X,Y,z=A[7],K=A[8],H=A[9],$=A[10],q=A[11],Z=A[12],J=A[13],Q=A[14],tt=A[15];for(A.length>16?(W=A[16],X=A[17],Y=A[18]):(W=Ps.defaultPadding,X=Y=!1),q&&(Z+=w);_<a;_+=2)this.replayImage_(t,s[_],s[_+1],y,h,l,d,z,K,H,$,Z,J,Q,tt,W,X?E:null,Y?S:null);this.renderDeclutter_(d,I),++v;break;case nc.DRAW_CHARS:var et=A[1],it=A[2],ot=A[3];d=r?null:A[4];var rt=A[5],st=A[6],at=A[7],ht=A[8],lt=A[9],pt=A[10],ut=A[11],ct=A[12],ft=A[13],dt=A[14],yt=Jr.lineString(s,et,it,2),gt=ht(ct);if(rt||gt<=yt){var vt=this.textStates[ft].textAlign,mt=(yt-gt)*ac.TEXT_ALIGN[vt],_t=rc.lineString(s,et,it,2,ct,ht,mt,at);if(_t){var bt,xt,Et,St,Tt;if(pt)for(bt=0,xt=_t.length;bt<xt;++bt)Et=(Tt=_t[bt])[4],St=this.getImage(Et,ft,"",pt),h=Tt[2]+ut,l=ot*St.height+2*(.5-ot)*ut-lt,this.replayImage_(t,Tt[0],Tt[1],St,h,l,d,St.height,1,0,0,Tt[3],dt,!1,St.width,Ps.defaultPadding,null,null);if(st)for(bt=0,xt=_t.length;bt<xt;++bt)Et=(Tt=_t[bt])[4],St=this.getImage(Et,ft,st,""),h=Tt[2],l=ot*St.height-lt,this.replayImage_(t,Tt[0],Tt[1],St,h,l,d,St.height,1,0,0,Tt[3],dt,!1,St.width,Ps.defaultPadding,null,null)}}this.renderDeclutter_(d,I),++v;break;case nc.END_GEOMETRY:if(void 0!==r){var wt=r(I=A[1]);if(wt)return wt}++v;break;case nc.FILL:P?b++:this.fill_(t),++v;break;case nc.MOVE_TO_LINE_TO:for(_=A[1],a=A[2],M=s[_],f=(L=s[_+1])+.5|0,(c=M+.5|0)===p&&f===u||(t.moveTo(M,L),p=c,u=f),_+=2;_<a;_+=2)c=(M=s[_])+.5|0,f=(L=s[_+1])+.5|0,_!=a-2&&c===p&&f===u||(t.lineTo(M,L),p=c,u=f);++v;break;case nc.SET_FILL_STYLE:E=A,this.fillOrigin_=A[2],b&&(this.fill_(t),b=0,x&&(t.stroke(),x=0)),t.fillStyle=A[1],++v;break;case nc.SET_STROKE_STYLE:S=A,x&&(t.stroke(),x=0),this.setStrokeStyle_(t,A),++v;break;case nc.STROKE:P?x++:t.stroke(),++v;break;default:++v}}b&&this.fill_(t),x&&t.stroke()},hc.prototype.replay=function(t,e,i,o){this.viewRotation_=i,this.replay_(t,e,o,this.instructions,void 0,void 0)},hc.prototype.replayHitDetection=function(t,e,i,o,r,n){return this.viewRotation_=i,this.replay_(t,e,o,this.hitDetectionInstructions,r,n)},hc.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,o,r=e.length,n=-1;for(t=0;t<r;++t)(o=(i=e[t])[0])==nc.END_GEOMETRY?n=t:o==nc.BEGIN_GEOMETRY&&(i[2]=t,Xt.reverseSubArray(this.hitDetectionInstructions,n,t),n=-1)},hc.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var o=t.getColor();i.fillStyle=gs.asColorLike(o||Ps.defaultFillStyle)}else i.fillStyle=void 0;if(e){var r=e.getColor();i.strokeStyle=gs.asColorLike(r||Ps.defaultStrokeStyle);var n=e.getLineCap();i.lineCap=void 0!==n?n:Ps.defaultLineCap;var s=e.getLineDash();i.lineDash=s?s.slice():Ps.defaultLineDash;var a=e.getLineDashOffset();i.lineDashOffset=a||Ps.defaultLineDashOffset;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:Ps.defaultLineJoin;var l=e.getWidth();i.lineWidth=void 0!==l?l:Ps.defaultLineWidth;var p=e.getMiterLimit();i.miterLimit=void 0!==p?p:Ps.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},hc.prototype.applyFill=function(t,e){var i=t.fillStyle,o=[nc.SET_FILL_STYLE,i];if("string"!=typeof i){var r=e.getExtent();o.push([r[0],r[3]])}this.instructions.push(o)},hc.prototype.applyStroke=function(t){this.instructions.push([nc.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio])},hc.prototype.updateFillStyle=function(t,e,i){var o=t.fillStyle;"string"==typeof o&&t.currentFillStyle==o||(e.call(this,t,i),t.currentFillStyle=o)},hc.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,o=t.lineCap,r=t.lineDash,n=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||r!=t.currentLineDash&&!Xt.equals(t.currentLineDash,r)||t.currentLineDashOffset!=n||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=r,t.currentLineDashOffset=n,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},hc.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[nc.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},hc.prototype.finish=C.nullFunction,hc.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=U.clone(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;U.buffer(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_};var lc=hc,pc=function(t,e,i,o,r,n){lc.call(this,t,e,i,o,r,n),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0};C.inherits(pc,lc),pc.prototype.drawCoordinates_=function(t,e,i,o){return this.appendFlatCoordinates(t,e,i,o,!1,!1)},pc.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length,n=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([nc.DRAW_IMAGE,r,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([nc.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},pc.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),o=t.getStride(),r=this.coordinates.length,n=this.drawCoordinates_(i,0,i.length,o);this.instructions.push([nc.DRAW_IMAGE,r,n,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([nc.DRAW_IMAGE,r,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)}},pc.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},pc.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),o=t.getSize(),r=t.getHitDetectionImage(1),n=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=n,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=o[0]};var uc=pc,cc=function(t,e,i,o,r,n){lc.call(this,t,e,i,o,r,n)};C.inherits(cc,lc),cc.prototype.drawFlatCoordinates_=function(t,e,i,o){var r=this.coordinates.length,n=this.appendFlatCoordinates(t,e,i,o,!1,!1),s=[nc.MOVE_TO_LINE_TO,r,n];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},cc.prototype.drawLineString=function(t,e){var i=this.state,o=i.strokeStyle,r=i.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nc.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[nc.BEGIN_PATH]);var n=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(n,0,n.length,s),this.hitDetectionInstructions.push([nc.STROKE]),this.endGeometry(t,e)}},cc.prototype.drawMultiLineString=function(t,e){var i=this.state,o=i.strokeStyle,r=i.lineWidth;if(void 0!==o&&void 0!==r){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nc.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[nc.BEGIN_PATH]);var n,s,a=t.getEnds(),h=t.getFlatCoordinates(),l=t.getStride(),p=0;for(n=0,s=a.length;n<s;++n)p=this.drawFlatCoordinates_(h,p,a[n],l);this.hitDetectionInstructions.push([nc.STROKE]),this.endGeometry(t,e)}},cc.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push([nc.STROKE]),this.reverseHitDetectionInstructions(),this.state=null},cc.prototype.applyStroke=function(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push([nc.STROKE]),t.lastStroke=this.coordinates.length),t.lastStroke=0,lc.prototype.applyStroke.call(this,t),this.instructions.push([nc.BEGIN_PATH])};var fc=cc,dc=function(t,e,i,o,r,n){lc.call(this,t,e,i,o,r,n)};C.inherits(dc,lc),dc.prototype.drawFlatCoordinatess_=function(t,e,i,o){var r=this.state,n=void 0!==r.fillStyle,s=void 0!=r.strokeStyle,a=i.length,h=[nc.BEGIN_PATH];this.instructions.push(h),this.hitDetectionInstructions.push(h);for(var l=0;l<a;++l){var p=i[l],u=this.coordinates.length,c=this.appendFlatCoordinates(t,e,p,o,!0,!s),f=[nc.MOVE_TO_LINE_TO,u,c];if(this.instructions.push(f),this.hitDetectionInstructions.push(f),s){var d=[nc.CLOSE_PATH];this.instructions.push(d),this.hitDetectionInstructions.push(d)}e=p}var y=[nc.FILL];if(this.hitDetectionInstructions.push(y),n&&this.instructions.push(y),s){var g=[nc.STROKE];this.instructions.push(g),this.hitDetectionInstructions.push(g)}return e},dc.prototype.drawCircle=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nc.SET_FILL_STYLE,ds.asString(Ps.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([nc.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,s,!1,!1);var h=[nc.BEGIN_PATH],l=[nc.CIRCLE,a];this.instructions.push(h,l),this.hitDetectionInstructions.push(h,l);var p=[nc.FILL];if(this.hitDetectionInstructions.push(p),void 0!==i.fillStyle&&this.instructions.push(p),void 0!==i.strokeStyle){var u=[nc.STROKE];this.instructions.push(u),this.hitDetectionInstructions.push(u)}this.endGeometry(t,e)}},dc.prototype.drawPolygon=function(t,e){var i=this.state;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nc.SET_FILL_STYLE,ds.asString(Ps.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([nc.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),r=t.getOrientedFlatCoordinates(),n=t.getStride();this.drawFlatCoordinatess_(r,0,o,n),this.endGeometry(t,e)},dc.prototype.drawMultiPolygon=function(t,e){var i=this.state,o=i.fillStyle,r=i.strokeStyle;if(void 0!==o||void 0!==r){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nc.SET_FILL_STYLE,ds.asString(Ps.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([nc.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var n,s,a=t.getEndss(),h=t.getOrientedFlatCoordinates(),l=t.getStride(),p=0;for(n=0,s=a.length;n<s;++n)p=this.drawFlatCoordinatess_(h,p,a[n],l);this.endGeometry(t,e)}},dc.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t){var e,i,o=this.coordinates;for(e=0,i=o.length;e<i;++e)o[e]=tn.snap(o[e],t)}},dc.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.applyFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)};var yc=dc,gc={lineString:function(t,e,i,o,r){var n,s,a,h,l,p,u,c,f,d=i,y=i,g=0,v=0,m=i;for(n=i;n<o;n+=r){var _=e[n],b=e[n+1];void 0!==h&&(c=_-h,f=b-l,a=Math.sqrt(c*c+f*f),void 0!==p&&(v+=s,Math.acos((p*c+u*f)/(s*a))>t&&(v>g&&(g=v,d=m,y=n),v=0,m=n-r)),s=a,p=c,u=f),h=_,l=b}return(v+=a)>g?[m,n]:[d,y]}},vc=gc,mc=function(t,e,i,o,r,n){lc.call(this,t,e,i,o,r,n),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},Ps.labelCache.prune()};C.inherits(mc,lc),mc.measureTextWidths=function(t,e,i){var o,r,n=e.length,s=0;for(r=0;r<n;++r)o=Ps.measureTextWidth(t,e[r]),s=Math.max(s,o),i.push(o);return s},mc.prototype.drawText=function(t,e){var i=this.textFillState_,o=this.textStrokeState_,r=this.textState_;if(""!==this.text_&&r&&(i||o)){var n,s,a=this.coordinates.length,h=t.getType(),l=null,p=2,u=2;if(r.placement===ol.LINE){if(!U.intersects(this.getBufferedMaxExtent(),t.getExtent()))return;var c;if(l=t.getFlatCoordinates(),u=t.getStride(),h==W.LINE_STRING)c=[l.length];else if(h==W.MULTI_LINE_STRING)c=t.getEnds();else if(h==W.POLYGON)c=t.getEnds().slice(0,1);else if(h==W.MULTI_POLYGON){var f=t.getEndss();for(c=[],n=0,s=f.length;n<s;++n)c.push(f[n][0])}this.beginGeometry(t,e);for(var d,y=r.textAlign,g=0,v=0,m=c.length;v<m;++v){if(void 0==y){var _=vc.lineString(r.maxAngle,l,g,c[v],u);g=_[0],d=_[1]}else d=c[v];for(n=g;n<d;n+=u)this.coordinates.push(l[n],l[n+1]);p=this.coordinates.length,g=c[v],this.drawChars_(a,p,this.declutterGroup_),a=p}this.endGeometry(t,e)}else{var b=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),x=b.width/this.pixelRatio;switch(h){case W.POINT:case W.MULTI_POINT:p=(l=t.getFlatCoordinates()).length;break;case W.LINE_STRING:l=t.getFlatMidpoint();break;case W.CIRCLE:l=t.getCenter();break;case W.MULTI_LINE_STRING:p=(l=t.getFlatMidpoints()).length;break;case W.POLYGON:if(l=t.getFlatInteriorPoint(),!r.overflow&&l[2]/this.resolution<x)return;u=3;break;case W.MULTI_POLYGON:var E=t.getFlatInteriorPoints();for(l=[],n=0,s=E.length;n<s;n+=3)(r.overflow||E[n+2]/this.resolution>=x)&&l.push(E[n],E[n+1]);if(0==(p=l.length))return}p=this.appendFlatCoordinates(l,0,p,u,!1,!1),this.beginGeometry(t,e),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),this.updateFillStyle(this.state,this.applyFill,t),this.updateStrokeStyle(this.state,this.applyStroke)),this.drawTextImage_(b,a,p),this.endGeometry(t,e)}}},mc.prototype.getImage=function(t,e,i,o){var r,n=o+e+t+i+this.pixelRatio,s=Ps.labelCache;if(!s.containsKey(n)){var a=o?this.strokeStates[o]||this.textStrokeState_:null,h=i?this.fillStates[i]||this.textFillState_:null,l=this.textStates[e]||this.textState_,p=this.pixelRatio,u=l.scale*p,c=ac.TEXT_ALIGN[l.textAlign||Ps.defaultTextAlign],f=o&&a.lineWidth?a.lineWidth:0,d=t.split("\n"),y=d.length,g=[],v=mc.measureTextWidths(l.font,d,g),m=Ps.measureTextHeight(l.font),_=m*y,b=v+f,x=Ct.createCanvasContext2D(Math.ceil(b*u),Math.ceil((_+f)*u));r=x.canvas,s.set(n,r),1!=u&&x.scale(u,u),x.font=l.font,o&&(x.strokeStyle=a.strokeStyle,x.lineWidth=f*(xs.SAFARI?u:1),x.lineCap=a.lineCap,x.lineJoin=a.lineJoin,x.miterLimit=a.miterLimit,xs.CANVAS_LINE_DASH&&a.lineDash.length&&(x.setLineDash(a.lineDash),x.lineDashOffset=a.lineDashOffset)),i&&(x.fillStyle=h.fillStyle),x.textBaseline="middle",x.textAlign="center";var E,S=.5-c,T=c*r.width/u+S*f;if(o)for(E=0;E<y;++E)x.strokeText(d[E],T+S*g[E],.5*(f+m)+E*m);if(i)for(E=0;E<y;++E)x.fillText(d[E],T+S*g[E],.5*(f+m)+E*m)}return s.get(n)},mc.prototype.drawTextImage_=function(t,e,i){var o=this.textState_,r=this.textStrokeState_,n=this.pixelRatio,s=ac.TEXT_ALIGN[o.textAlign||Ps.defaultTextAlign],a=ac.TEXT_ALIGN[o.textBaseline],h=r&&r.lineWidth?r.lineWidth:0,l=s*t.width/n+2*(.5-s)*h,p=a*t.height/n+2*(.5-a)*h;this.instructions.push([nc.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*n,(p-this.textOffsetY_)*n,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,o.padding==Ps.defaultPadding?Ps.defaultPadding:o.padding.map(function(t){return t*n}),!!o.backgroundFill,!!o.backgroundStroke]),this.hitDetectionInstructions.push([nc.DRAW_IMAGE,e,i,t,(l-this.textOffsetX_)*n,(p-this.textOffsetY_)*n,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/n,!0,t.width,o.padding,!!o.backgroundFill,!!o.backgroundStroke])},mc.prototype.drawChars_=function(t,e,i){var o=this.textStrokeState_,r=this.textState_,n=this.textFillState_,s=this.strokeKey_;o&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:o.strokeStyle,lineCap:o.lineCap,lineDashOffset:o.lineDashOffset,lineWidth:o.lineWidth,lineJoin:o.lineJoin,miterLimit:o.miterLimit,lineDash:o.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||Ps.defaultTextAlign,scale:r.scale});var h=this.fillKey_;n&&(h in this.fillStates||(this.fillStates[h]={fillStyle:n.fillStyle}));var l=this.pixelRatio,p=ac.TEXT_ALIGN[r.textBaseline],u=this.textOffsetY_*l,c=this.text_,f=r.font,d=r.scale,y=o?o.lineWidth*d/2:0,g=this.widths_[f];g||(this.widths_[f]=g={}),this.instructions.push([nc.DRAW_CHARS,t,e,p,i,r.overflow,h,r.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Ps.measureTextWidth(f,t)),e*d*l},u,s,y*l,c,a,1]),this.hitDetectionInstructions.push([nc.DRAW_CHARS,t,e,p,i,r.overflow,h,r.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Ps.measureTextWidth(f,t)),e*d},u,s,y,c,a,1/l])},mc.prototype.setTextStyle=function(t,e){var i,o,r;if(t){this.declutterGroup_=e;var n=t.getFill();n?((o=this.textFillState_)||(o=this.textFillState_={}),o.fillStyle=gs.asColorLike(n.getColor()||Ps.defaultFillStyle)):o=this.textFillState_=null;var s=t.getStroke();if(s){(r=this.textStrokeState_)||(r=this.textStrokeState_={});var a=s.getLineDash(),h=s.getLineDashOffset(),l=s.getWidth(),p=s.getMiterLimit();r.lineCap=s.getLineCap()||Ps.defaultLineCap,r.lineDash=a?a.slice():Ps.defaultLineDash,r.lineDashOffset=void 0===h?Ps.defaultLineDashOffset:h,r.lineJoin=s.getLineJoin()||Ps.defaultLineJoin,r.lineWidth=void 0===l?Ps.defaultLineWidth:l,r.miterLimit=void 0===p?Ps.defaultMiterLimit:p,r.strokeStyle=gs.asColorLike(s.getColor()||Ps.defaultStrokeStyle)}else r=this.textStrokeState_=null;i=this.textState_;var u=t.getFont()||Ps.defaultFont;Ps.checkFont(u);var c=t.getScale();i.overflow=t.getOverflow(),i.font=u,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||Ps.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Ps.defaultPadding,i.scale=void 0===c?1:c;var f=t.getOffsetX(),d=t.getOffsetY(),y=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===g?0:g,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:C.getUid(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=o?"string"==typeof o.fillStyle?o.fillStyle:"|"+C.getUid(o.fillStyle):""}else this.text_=""};var _c=mc,bc=function(t,e,i,o,r,n,s){ec.call(this),this.declutterTree_=n,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=o,this.resolution_=i,this.renderBuffer_=s,this.replaysByZIndex_={},this.hitDetectionContext_=Ct.createCanvasContext2D(1,1),this.hitDetectionTransform_=Wo.create()};C.inherits(bc,ec),bc.circleArrayCache_={0:[[!0]]},bc.fillCircleArrayRowToMiddle_=function(t,e,i){var o,r=Math.floor(t.length/2);if(e>=r)for(o=r;o<e;o++)t[o][i]=!0;else if(e<r)for(o=e+1;o<r;o++)t[o][i]=!0},bc.getCircleArray_=function(t){if(void 0!==bc.circleArrayCache_[t])return bc.circleArrayCache_[t];for(var e=2*t+1,i=new Array(e),o=0;o<e;o++)i[o]=new Array(e);for(var r=t,n=0,s=0;r>=n;)bc.fillCircleArrayRowToMiddle_(i,t+r,t+n),bc.fillCircleArrayRowToMiddle_(i,t+n,t+r),bc.fillCircleArrayRowToMiddle_(i,t-n,t+r),bc.fillCircleArrayRowToMiddle_(i,t-r,t+n),bc.fillCircleArrayRowToMiddle_(i,t-r,t-n),bc.fillCircleArrayRowToMiddle_(i,t-n,t-r),bc.fillCircleArrayRowToMiddle_(i,t+n,t-r),bc.fillCircleArrayRowToMiddle_(i,t+r,t-n),2*((s+=1+2*++n)-r)+1>0&&(s+=1-2*(r-=1));return bc.circleArrayCache_[t]=i,i},bc.replayDeclutter=function(t,e,i){for(var o=Object.keys(t).map(Number).sort(Xt.numberSafeCompareFunction),r={},n=0,s=o.length;n<s;++n)for(var a=t[o[n].toString()],h=0,l=a.length;h<l;){var p=a[h++],u=a[h++];p.replay(e,u,i,r)}},bc.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=U.createEmpty()).push(1)),e},bc.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},bc.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],o=0,r=t.length;o<r;++o)if(t[o]in i)return!0;return!1},bc.prototype.finish=function(){var t;for(t in this.replaysByZIndex_){var e,i=this.replaysByZIndex_[t];for(e in i)i[e].finish()}},bc.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r,n,s){var a,h=2*(o=Math.round(o))+1,l=Wo.compose(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-i,-t[0],-t[1]),p=this.hitDetectionContext_;p.canvas.width!==h||p.canvas.height!==h?(p.canvas.width=h,p.canvas.height=h):p.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(a=U.createEmpty(),U.extendCoordinate(a,t),U.buffer(a,e*(this.renderBuffer_+o),a));var u,c,f=bc.getCircleArray_(o);function d(t){for(var e=p.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var o=0;o<h;o++){var r;if(f[i][o])if(e[4*(o*h+i)+3]>0)return(!u||c!=ic.IMAGE&&c!=ic.TEXT||-1!==u.indexOf(t))&&(r=n(t)),r||void p.clearRect(0,0,h,h)}}this.declutterTree_&&(u=this.declutterTree_.all().map(function(t){return t.value}));var y,g,v,m,_,b=Object.keys(this.replaysByZIndex_).map(Number);for(b.sort(Xt.numberSafeCompareFunction),y=b.length-1;y>=0;--y){var x=b[y].toString();for(v=this.replaysByZIndex_[x],g=ac.ORDER.length-1;g>=0;--g)if(void 0!==(m=v[c=ac.ORDER[g]]))if(!s||c!=ic.IMAGE&&c!=ic.TEXT){if(_=m.replayHitDetection(p,l,i,r,d,a))return _}else{var E=s[x];E?E.push(m,l.slice(0)):s[x]=[m,l.slice(0)]}}},bc.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],o=e[1],r=e[2],n=e[3],s=[i,o,i,n,r,n,r,o];return Bo.transform2D(s,0,8,2,t,s),s},bc.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",o=this.replaysByZIndex_[i];void 0===o&&(o={},this.replaysByZIndex_[i]=o);var r=o[e];void 0===r&&(r=new(0,bc.BATCH_CONSTRUCTORS_[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),o[e]=r);return r},bc.prototype.getReplays=function(){return this.replaysByZIndex_},bc.prototype.isEmpty=function(){return nt.isEmpty(this.replaysByZIndex_)},bc.prototype.replay=function(t,e,i,o,r,n){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(Xt.numberSafeCompareFunction),t.save(),this.clip(t,e);var a,h,l,p,u,c,f=r||ac.ORDER;for(a=0,h=s.length;a<h;++a){var d=s[a].toString();for(u=this.replaysByZIndex_[d],l=0,p=f.length;l<p;++l){var y=f[l];if(void 0!==(c=u[y]))if(!n||y!=ic.IMAGE&&y!=ic.TEXT)c.replay(t,e,i,o);else{var g=n[d];g?g.push(c,e.slice(0)):n[d]=[c,e.slice(0)]}}}t.restore()},bc.BATCH_CONSTRUCTORS_={Circle:yc,Default:lc,Image:uc,LineString:fc,Polygon:yc,Text:_c};var xc=bc,Ec={defaultOrder:function(t,e){return C.getUid(t)-C.getUid(e)},getSquaredTolerance:function(t,e){var i=Ec.getTolerance(t,e);return i*i},getTolerance:function(t,e){return C.SIMPLIFY_TOLERANCE*t/e},renderCircleGeometry_:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(r||n){var s=t.getReplay(i.getZIndex(),ic.CIRCLE);s.setFillStrokeStyle(r,n),s.drawCircle(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),ic.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}},renderFeature:function(t,e,i,o,r,n){var s,a,h=!1;return(s=i.getImage())&&((a=s.getImageState())==Es.LOADED||a==Es.ERROR?s.unlistenImageChange(r,n):(a==Es.IDLE&&s.load(),a=s.getImageState(),s.listenImageChange(r,n),h=!0)),Ec.renderFeature_(t,e,i,o),h},renderFeature_:function(t,e,i,o){var r=i.getGeometryFunction()(e);if(r){var n=r.getSimplifiedGeometry(o);if(i.getRenderer())Ec.renderGeometry_(t,n,i,e);else(0,Ec.GEOMETRY_RENDERERS_[n.getType()])(t,n,i,e)}},renderGeometry_:function(t,e,i,o){if(e.getType()!=W.GEOMETRY_COLLECTION)t.getReplay(i.getZIndex(),ic.DEFAULT).drawCustom(e,o,i.getRenderer());else for(var r=e.getGeometries(),n=0,s=r.length;n<s;++n)Ec.renderGeometry_(t,r[n],i,o)},renderGeometryCollectionGeometry_:function(t,e,i,o){var r,n,s=e.getGeometriesArray();for(r=0,n=s.length;r<n;++r){(0,Ec.GEOMETRY_RENDERERS_[s[r].getType()])(t,s[r],i,o)}},renderLineStringGeometry_:function(t,e,i,o){var r=i.getStroke();if(r){var n=t.getReplay(i.getZIndex(),ic.LINE_STRING);n.setFillStrokeStyle(null,r),n.drawLineString(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ic.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,o)}},renderMultiLineStringGeometry_:function(t,e,i,o){var r=i.getStroke();if(r){var n=t.getReplay(i.getZIndex(),ic.LINE_STRING);n.setFillStrokeStyle(null,r),n.drawMultiLineString(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ic.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,o)}},renderMultiPolygonGeometry_:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(n||r){var s=t.getReplay(i.getZIndex(),ic.POLYGON);s.setFillStrokeStyle(r,n),s.drawMultiPolygon(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),ic.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}},renderPointGeometry_:function(t,e,i,o){var r=i.getImage();if(r){if(r.getImageState()!=Es.LOADED)return;var n=t.getReplay(i.getZIndex(),ic.IMAGE);n.setImageStyle(r,t.addDeclutter(!1)),n.drawPoint(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ic.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,o)}},renderMultiPointGeometry_:function(t,e,i,o){var r=i.getImage();if(r){if(r.getImageState()!=Es.LOADED)return;var n=t.getReplay(i.getZIndex(),ic.IMAGE);n.setImageStyle(r,t.addDeclutter(!1)),n.drawMultiPoint(e,o)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),ic.TEXT);a.setTextStyle(s,t.addDeclutter(!!r)),a.drawText(e,o)}},renderPolygonGeometry_:function(t,e,i,o){var r=i.getFill(),n=i.getStroke();if(r||n){var s=t.getReplay(i.getZIndex(),ic.POLYGON);s.setFillStrokeStyle(r,n),s.drawPolygon(e,o)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),ic.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,o)}}};Ec.GEOMETRY_RENDERERS_={Point:Ec.renderPointGeometry_,LineString:Ec.renderLineStringGeometry_,Polygon:Ec.renderPolygonGeometry_,MultiPoint:Ec.renderMultiPointGeometry_,MultiLineString:Ec.renderMultiLineStringGeometry_,MultiPolygon:Ec.renderMultiPolygonGeometry_,GeometryCollection:Ec.renderGeometryCollectionGeometry_,Circle:Ec.renderCircleGeometry_};var Sc=Ec,Tc=function(t){Wu.call(this,t),this.declutterTree_=t.getDeclutter()?Ba()(9):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=U.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Ct.createCanvasContext2D(),vt.listen(Ps.labelCache,Et.CLEAR,this.handleFontsChanged_,this)};C.inherits(Tc,Wu),Tc.handles=function(t,e){return t===iu.CANVAS&&e.getType()===Ah.VECTOR},Tc.create=function(t,e){return new Tc(e)},Tc.prototype.disposeInternal=function(){vt.unlisten(Ps.labelCache,Et.CLEAR,this.handleFontsChanged_,this),Wu.prototype.disposeInternal.call(this)},Tc.prototype.composeFrame=function(t,e,i){var o=t.extent,r=t.pixelRatio,n=e.managed?t.skippedFeatureUids:{},s=t.viewState,a=s.projection,h=s.rotation,l=a.getExtent(),p=this.getLayer().getSource(),u=this.getTransform(t,0);this.preCompose(i,t,u);var c=e.extent,f=void 0!==c;f&&this.clip(i,t,c);var d=this.replayGroup_;if(d&&!d.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var y,g=this.getLayer(),v=0,m=0,_=1!==e.opacity,b=g.hasListener(Dh.RENDER);if(_||b){var x=i.canvas.width,E=i.canvas.height;if(h){var S=Math.round(Math.sqrt(x*x+E*E));v=(S-x)/2,m=(S-E)/2,x=E=S}this.context.canvas.width=x,this.context.canvas.height=E,y=this.context}else y=i;var T=y.globalAlpha;_||(y.globalAlpha=e.opacity),y!=i&&y.translate(v,m);var w=t.size[0]*r,C=t.size[1]*r;if(Ps.rotateAtOffset(y,-h,w/2,C/2),d.replay(y,u,h,n),p.getWrapX()&&a.canWrapX()&&!U.containsExtent(l,o)){for(var R,P=o[0],I=U.getWidth(l),M=0;P<l[0];)R=I*--M,u=this.getTransform(t,R),d.replay(y,u,h,n),P+=I;for(M=0,P=o[2];P>l[2];)R=I*++M,u=this.getTransform(t,R),d.replay(y,u,h,n),P-=I;u=this.getTransform(t,0)}if(Ps.rotateAtOffset(y,h,w/2,C/2),y!=i){if(b&&this.dispatchRenderEvent(y,t,u),_){var L=i.globalAlpha;i.globalAlpha=e.opacity,i.drawImage(y.canvas,-v,-m),i.globalAlpha=L}else i.drawImage(y.canvas,-v,-m);y.translate(-v,-m)}_||(y.globalAlpha=T)}f&&i.restore(),this.postCompose(i,t,e,u)},Tc.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r){if(this.replayGroup_){var n=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),h={};return this.replayGroup_.forEachFeatureAtCoordinate(t,n,s,i,{},function(t){var e=C.getUid(t).toString();if(!(e in h))return h[e]=!0,o.call(r,t,a)},null)}},Tc.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},Tc.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Tc.prototype.prepareFrame=function(t,e){var i=this.getLayer(),o=i.getSource();this.updateLogos(t,o);var r=t.viewHints[Kp.ANIMATING],n=t.viewHints[Kp.INTERACTING],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&r||!a&&n)return!0;var h=t.extent,l=t.viewState,p=l.projection,u=l.resolution,c=t.pixelRatio,f=i.getRevision(),d=i.getRenderBuffer(),y=i.getRenderOrder();void 0===y&&(y=Sc.defaultOrder);var g=U.buffer(h,d*u),v=l.projection.getExtent();if(o.getWrapX()&&l.projection.canWrapX()&&!U.containsExtent(v,t.extent)){var m=U.getWidth(v),_=Math.max(U.getWidth(g)/2,m);g[0]=v[0]-_,g[2]=v[2]+_}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==y&&U.containsExtent(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var b=new xc(Sc.getTolerance(u,c),g,u,c,o.getOverlaps(),this.declutterTree_,i.getRenderBuffer());o.loadFeatures(g,u,p);var x=function(t){var e,o=t.getStyleFunction();if(o?e=o.call(t,u):(o=i.getStyleFunction())&&(e=o(t,u)),e){var r=this.renderFeature(t,u,c,e,b);this.dirty_=this.dirty_||r}}.bind(this);if(y){var E=[];o.forEachFeatureInExtent(g,function(t){E.push(t)},this),E.sort(y);for(var S=0,T=E.length;S<T;++S)x(E[S])}else o.forEachFeatureInExtent(g,x,this);return b.finish(),this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=y,this.renderedExtent_=g,this.replayGroup_=b,this.replayGroupChanged=!0,!0},Tc.prototype.renderFeature=function(t,e,i,o,r){if(!o)return!1;var n=!1;if(Array.isArray(o))for(var s=0,a=o.length;s<a;++s)n=Sc.renderFeature(r,t,o[s],Sc.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||n;else n=Sc.renderFeature(r,t,o,Sc.getSquaredTolerance(e,i),this.handleStyleImageChange_,this);return n};var wc=Tc,Cc={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},Rc=function(t){this.context=null,Qu.call(this,t),this.declutterTree_=t.getDeclutter()?Ba()(9):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Wo.create(),this.zDirection=t.getRenderMode()==Cc.VECTOR?1:0,vt.listen(Ps.labelCache,Et.CLEAR,this.handleFontsChanged_,this)};C.inherits(Rc,Qu),Rc.handles=function(t,e){return t===iu.CANVAS&&e.getType()===Ah.VECTOR_TILE},Rc.create=function(t,e){return new Rc(e)},Rc.IMAGE_REPLAYS={image:[ic.POLYGON,ic.CIRCLE,ic.LINE_STRING,ic.IMAGE,ic.TEXT],hybrid:[ic.POLYGON,ic.LINE_STRING]},Rc.VECTOR_REPLAYS={image:[ic.DEFAULT],hybrid:[ic.IMAGE,ic.TEXT,ic.DEFAULT],vector:ac.ORDER},Rc.prototype.disposeInternal=function(){vt.unlisten(Ps.labelCache,Et.CLEAR,this.handleFontsChanged_,this),Qu.prototype.disposeInternal.call(this)},Rc.prototype.prepareFrame=function(t,e){var i=this.getLayer(),o=i.getRevision();if(this.renderedLayerRevision_!=o){this.renderedTiles.length=0;var r=i.getRenderMode();this.context||r==Cc.VECTOR||(this.context=Ct.createCanvasContext2D()),this.context&&r==Cc.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=o,Qu.prototype.prepareFrame.apply(this,arguments)},Rc.prototype.createReplayGroup_=function(t,e){var i=this.getLayer(),o=e.pixelRatio,r=e.viewState.projection,n=i.getRevision(),s=i.getRenderOrder()||null,a=t.getReplayState(i);if(a.dirty||a.renderedRevision!=n||a.renderedRenderOrder!=s){for(var h=i.getSource(),l=h.getTileGrid(),p=h.getTileGridForProjection(r),u=p.getResolution(t.tileCoord[0]),c=p.getTileCoordExtent(t.wrappedTileCoord),f={},d=0,y=t.tileKeys.length;d<y;++d){var g=t.getTile(t.tileKeys[d]);if(g.getState()!=ut.ERROR){var v=g.tileCoord,m=l.getTileCoordExtent(v),_=U.getIntersection(c,m),b=U.equals(m,_)?null:U.buffer(_,i.getRenderBuffer()*u),x=g.getProjection(),E=!1;lt.equivalent(r,x)||(E=!0,g.setProjection(r)),a.dirty=!1;var S,T=new xc(0,_,u,o,h.getOverlaps(),this.declutterTree_,i.getRenderBuffer()),w=Sc.getSquaredTolerance(u,o),C=function(t){var e,o=t.getStyleFunction();if(o?e=o.call(t,u):(o=i.getStyleFunction())&&(e=o(t,u)),e){var r=this.renderFeature(t,w,e,T);this.dirty_=this.dirty_||r,a.dirty=a.dirty||r}},R=g.getFeatures();s&&s!==a.renderedRenderOrder&&R.sort(s);for(var P=0,I=R.length;P<I;++P)S=R[P],E&&(x.getUnits()==K.TILE_PIXELS&&(x.setWorldExtent(m),x.setExtent(g.getExtent())),S.getGeometry().transform(x,r)),b&&!U.intersects(b,S.getGeometry().getExtent())||C.call(this,S);for(var M in T.finish(),T.getReplays())f[M]=!0;g.setReplayGroup(i,t.tileCoord.toString(),T)}}a.renderedRevision=n,a.renderedRenderOrder=s}},Rc.prototype.drawTileImage=function(t,e,i,o,r,n,s,a,h){var l=t;this.createReplayGroup_(l,e),this.context&&(this.renderTileImage_(l,e,i),Qu.prototype.drawTileImage.apply(this,arguments))},Rc.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r){var n=e.viewState.resolution,s=e.viewState.rotation;i=void 0==i?0:i;var a,h,l,p,u,c,f,d,y=this.getLayer(),g={},v=this.renderedTiles,m=y.getSource().getTileGridForProjection(e.viewState.projection);for(l=0,p=v.length;l<p;++l)if(f=(c=v[l]).wrappedTileCoord,d=m.getTileCoordExtent(f,this.tmpExtent),a=U.buffer(d,i*n,a),U.containsCoordinate(a,t))for(var _=0,b=c.tileKeys.length;_<b;++_){var x=c.getTile(c.tileKeys[_]);x.getState()!=ut.ERROR&&(u=x.getReplayGroup(y,c.tileCoord.toString()),h=h||u.forEachFeatureAtCoordinate(t,n,s,i,{},function(t){var e=C.getUid(t).toString();if(!(e in g))return g[e]=!0,o.call(r,t,y)},null))}return h},Rc.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),o=t.tileCoord,r=i.getResolution(o[0]),n=e.viewState,s=e.pixelRatio,a=n.resolution/s,h=i.getTileCoordExtent(o,this.tmpExtent),l=n.center,p=U.getTopLeft(h),u=e.size,c=Math.round(s*u[0]/2),f=Math.round(s*u[1]/2);return Wo.compose(this.tmpTransform_,c,f,r/a,r/a,n.rotation,(p[0]-l[0])/r,(l[1]-p[1])/r)},Rc.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},Rc.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Rc.prototype.postCompose=function(t,e,i){var o,r,n=this.getLayer(),s=n.getDeclutter()?{}:null,a=n.getSource(),h=n.getRenderMode(),l=Rc.VECTOR_REPLAYS[h],p=e.pixelRatio,u=e.viewState.rotation,c=e.size;u&&(o=Math.round(p*c[0]/2),r=Math.round(p*c[1]/2),Ps.rotateAtOffset(t,-u,o,r)),s&&this.declutterTree_.clear();for(var f=this.renderedTiles,d=a.getTileGridForProjection(e.viewState.projection),y=[],g=[],v=f.length-1;v>=0;--v){var m=f[v];if(m.getState()!=ut.ABORT)for(var _=m.tileCoord,b=d.getTileCoordExtent(_)[0]-d.getTileCoordExtent(m.wrappedTileCoord)[0],x=void 0,E=0,S=m.tileKeys.length;E<S;++E){var T=m.getTile(m.tileKeys[E]);if(T.getState()!=ut.ERROR){var w=T.getReplayGroup(n,_.toString());if(h==Cc.VECTOR||w.hasReplays(l)){x||(x=this.getTransform(e,b));var C=T.tileCoord[0],R=w.getClipCoords(x);t.save(),t.globalAlpha=i.opacity;for(var P=0,I=y.length;P<I;++P){var M=y[P];C<g[P]&&(t.beginPath(),t.moveTo(R[0],R[1]),t.lineTo(R[2],R[3]),t.lineTo(R[4],R[5]),t.lineTo(R[6],R[7]),t.moveTo(M[6],M[7]),t.lineTo(M[4],M[5]),t.lineTo(M[2],M[3]),t.lineTo(M[0],M[1]),t.clip())}w.replay(t,x,u,{},l,s),t.restore(),y.push(R),g.push(C)}}}}s&&xc.replayDeclutter(s,t,u),u&&Ps.rotateAtOffset(t,u,o,r),Qu.prototype.postCompose.apply(this,arguments)},Rc.prototype.renderFeature=function(t,e,i,o){if(!i)return!1;var r=!1;if(Array.isArray(i))for(var n=0,s=i.length;n<s;++n)r=Sc.renderFeature(o,t,i[n],e,this.handleStyleImageChange_,this)||r;else r=Sc.renderFeature(o,t,i,e,this.handleStyleImageChange_,this);return r},Rc.prototype.renderTileImage_=function(t,e,i){var o=this.getLayer(),r=t.getReplayState(o),n=o.getRevision(),s=Rc.IMAGE_REPLAYS[o.getRenderMode()];if(s&&r.renderedTileRevision!==n){r.renderedTileRevision=n;var a=t.wrappedTileCoord,h=a[0],l=e.pixelRatio,p=o.getSource(),u=p.getTileGridForProjection(e.viewState.projection),c=u.getResolution(h),f=t.getContext(o),d=p.getTilePixelSize(h,l,e.viewState.projection);f.canvas.width=d[0],f.canvas.height=d[1];for(var y=u.getTileCoordExtent(a),g=0,v=t.tileKeys.length;g<v;++g){var m=t.getTile(t.tileKeys[g]);if(m.getState()!=ut.ERROR){var _=l/c,b=Wo.reset(this.tmpTransform_);Wo.scale(b,_,-_),Wo.translate(b,-y[0],-y[3]),m.getReplayGroup(o,t.tileCoord.toString()).replay(f,b,0,{},s)}}}};var Pc=Rc,Ic=function(t){this.source_=t};Ic.prototype.getType=function(){},Ic.prototype.getSource=function(){return this.source_},Ic.prototype.isAnimated=Go.FALSE;var Mc=Ic,Lc=function(t){Mc.call(this,t)};C.inherits(Lc,Mc),Lc.prototype.getType=function(){return ms.FRAGMENT_SHADER};var Ac=Lc,Oc=function(t){Mc.call(this,t)};C.inherits(Oc,Mc),Oc.prototype.getType=function(){return ms.VERTEX_SHADER};var Fc=Oc,Nc={};Nc.fragment=new Ac(C.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),Nc.vertex=new Fc(C.DEBUG_WEBGL?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}");var Dc=Nc,jc=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_pixelRatio=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_pixelRatio":"l"),this.u_opacity=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_opacity":"m"),this.u_fillColor=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_fillColor":"n"),this.u_strokeColor=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_strokeColor":"o"),this.u_size=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_size":"p"),this.a_position=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_position":"e"),this.a_instruction=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_instruction":"f"),this.a_radius=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_radius":"g")},kc={create:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},fromTransform:function(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}},Gc=kc,Uc=function(t,e){ju.call(this),this.tolerance=t,this.maxExtent=e,this.origin=U.getCenter(e),this.projectionMatrix_=Wo.create(),this.offsetRotateMatrix_=Wo.create(),this.offsetScaleMatrix_=Wo.create(),this.tmpMat4_=Gc.create(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0};C.inherits(Uc,ju),Uc.prototype.getDeleteResourcesFunction=function(t){},Uc.prototype.finish=function(t){},Uc.prototype.setUpProgram=function(t,e,i,o){},Uc.prototype.shutDownProgram=function(t,e){},Uc.prototype.drawReplay=function(t,e,i,o){},Uc.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,o,r){},Uc.prototype.drawHitDetectionReplay=function(t,e,i,o,r,n){return r?this.drawHitDetectionReplayOneByOne(t,e,i,o,n):this.drawHitDetectionReplayAll(t,e,i,o)},Uc.prototype.drawHitDetectionReplayAll=function(t,e,i,o){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,i,!0);var r=o(null);return r||void 0},Uc.prototype.replay=function(t,e,i,o,r,n,s,a,h,l,p){var u,c,f,d,y,g,v,m,_=t.getGL();this.lineStringReplay&&(u=_.isEnabled(_.STENCIL_TEST),c=_.getParameter(_.STENCIL_FUNC),f=_.getParameter(_.STENCIL_VALUE_MASK),d=_.getParameter(_.STENCIL_REF),y=_.getParameter(_.STENCIL_WRITEMASK),g=_.getParameter(_.STENCIL_FAIL),v=_.getParameter(_.STENCIL_PASS_DEPTH_PASS),m=_.getParameter(_.STENCIL_PASS_DEPTH_FAIL),_.enable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilMask(255),_.stencilFunc(_.ALWAYS,1,255),_.stencilOp(_.KEEP,_.KEEP,_.REPLACE),this.lineStringReplay.replay(t,e,i,o,r,n,s,a,h,l,p),_.stencilMask(0),_.stencilFunc(_.NOTEQUAL,1,255)),t.bindBuffer(ms.ARRAY_BUFFER,this.verticesBuffer),t.bindBuffer(ms.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var b=this.setUpProgram(_,t,r,n),x=Wo.reset(this.projectionMatrix_);Wo.scale(x,2/(i*r[0]),2/(i*r[1])),Wo.rotate(x,-o),Wo.translate(x,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var E=Wo.reset(this.offsetScaleMatrix_);Wo.scale(E,2/r[0],2/r[1]);var S,T=Wo.reset(this.offsetRotateMatrix_);return 0!==o&&Wo.rotate(T,-o),_.uniformMatrix4fv(b.u_projectionMatrix,!1,Gc.fromTransform(this.tmpMat4_,x)),_.uniformMatrix4fv(b.u_offsetScaleMatrix,!1,Gc.fromTransform(this.tmpMat4_,E)),_.uniformMatrix4fv(b.u_offsetRotateMatrix,!1,Gc.fromTransform(this.tmpMat4_,T)),_.uniform1f(b.u_opacity,s),void 0===h?this.drawReplay(_,t,a,!1):S=this.drawHitDetectionReplay(_,t,a,h,l,p),this.shutDownProgram(_,b),this.lineStringReplay&&(u||_.disable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilFunc(c,d,f),_.stencilMask(y),_.stencilOp(g,m,v)),S},Uc.prototype.drawElements=function(t,e,i,o){var r=e.hasOESElementIndexUint?ms.UNSIGNED_INT:ms.UNSIGNED_SHORT,n=o-i,s=i*(e.hasOESElementIndexUint?4:2);t.drawElements(ms.TRIANGLES,n,r,s)};var Bc=Uc,Vc={defaultFont:"10px sans-serif",defaultFillStyle:[0,0,0,1],defaultLineCap:"round",defaultLineDash:[],defaultLineDashOffset:0,defaultLineJoin:"round",defaultMiterLimit:10,defaultStrokeStyle:[0,0,0,1],defaultTextAlign:.5,defaultTextBaseline:.5,defaultLineWidth:1,triangleIsCounterClockwise:function(t,e,i,o,r,n){var s=(i-t)*(n-e)-(r-t)*(o-e);return s<=Vc.EPSILON&&s>=-Vc.EPSILON?void 0:s>0}};Vc.EPSILON=Number.EPSILON||2.220446049250313e-16;var Wc=Vc,Xc=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:Xc.Usage_.STATIC_DRAW};Xc.prototype.getArray=function(){return this.arr_},Xc.prototype.getUsage=function(){return this.usage_},Xc.Usage_={STATIC_DRAW:ms.STATIC_DRAW,STREAM_DRAW:ms.STREAM_DRAW,DYNAMIC_DRAW:ms.DYNAMIC_DRAW};var Yc=Xc,zc=function(t,e){Bc.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}};C.inherits(zc,Bc),zc.prototype.drawCoordinates_=function(t,e,i,o){var r,n,s=this.vertices.length,a=this.indices.length,h=s/4;for(r=e,n=i;r<n;r+=o)this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=0,this.vertices[s++]=this.radius_,this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=1,this.vertices[s++]=this.radius_,this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=2,this.vertices[s++]=this.radius_,this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=3,this.vertices[s++]=this.radius_,this.indices[a++]=h,this.indices[a++]=h+1,this.indices[a++]=h+2,this.indices[a++]=h+2,this.indices[a++]=h+3,this.indices[a++]=h,h+=4},zc.prototype.drawCircle=function(t,e){var i=t.getRadius(),o=t.getStride();if(i){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=i;var r=t.getFlatCoordinates();r=Bo.translate(r,0,2,o,-this.origin[0],-this.origin[1]),this.drawCoordinates_(r,0,2,o)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var n=this.styles_[this.styles_.length-1];this.state_.fillColor=n[0],this.state_.strokeColor=n[1],this.state_.lineWidth=n[2],this.state_.changed=!1}},zc.prototype.finish=function(t){this.verticesBuffer=new Yc(this.vertices),this.indicesBuffer=new Yc(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},zc.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},zc.prototype.setUpProgram=function(t,e,i,o){var r,n;r=Dc.fragment,n=Dc.vertex;var s,a=e.getProgram(r,n);return this.defaultLocations_?s=this.defaultLocations_:(s=new jc(t,a),this.defaultLocations_=s),e.useProgram(a),t.enableVertexAttribArray(s.a_position),t.vertexAttribPointer(s.a_position,2,ms.FLOAT,!1,16,0),t.enableVertexAttribArray(s.a_instruction),t.vertexAttribPointer(s.a_instruction,1,ms.FLOAT,!1,16,8),t.enableVertexAttribArray(s.a_radius),t.vertexAttribPointer(s.a_radius,1,ms.FLOAT,!1,16,12),t.uniform2fv(s.u_size,i),t.uniform1f(s.u_pixelRatio,o),s},zc.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},zc.prototype.drawReplay=function(t,e,i,o){var r,n,s,a;if(nt.isEmpty(i))for(s=this.startIndices[this.startIndices.length-1],r=this.styleIndices_.length-1;r>=0;--r)n=this.styleIndices_[r],a=this.styles_[r],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),this.drawElements(t,e,n,s),s=n;else this.drawReplaySkipping_(t,e,i)},zc.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,o,r){var n,s,a,h,l,p,u;for(u=this.startIndices.length-2,a=this.startIndices[u+1],n=this.styleIndices_.length-1;n>=0;--n)for(h=this.styles_[n],this.setFillStyle_(t,h[0]),this.setStrokeStyle_(t,h[1],h[2]),l=this.styleIndices_[n];u>=0&&this.startIndices[u]>=l;){if(s=this.startIndices[u],p=this.startIndicesFeature[u],void 0===i[C.getUid(p).toString()]&&p.getGeometry()&&(void 0===r||U.intersects(r,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);var c=o(p);if(c)return c}u--,a=s}},zc.prototype.drawReplaySkipping_=function(t,e,i){var o,r,n,s,a,h,l,p;for(l=this.startIndices.length-2,n=r=this.startIndices[l+1],o=this.styleIndices_.length-1;o>=0;--o){for(s=this.styles_[o],this.setFillStyle_(t,s[0]),this.setStrokeStyle_(t,s[1],s[2]),a=this.styleIndices_[o];l>=0&&this.startIndices[l]>=a;)p=this.startIndices[l],h=this.startIndicesFeature[l],i[C.getUid(h).toString()]&&(r!==n&&this.drawElements(t,e,r,n),n=p),l--,r=p;r!==n&&this.drawElements(t,e,r,n),r=n=a}},zc.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},zc.prototype.setStrokeStyle_=function(t,e,i){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i)},zc.prototype.setFillStrokeStyle=function(t,e){var i,o;if(e){var r=e.getLineDash();this.state_.lineDash=r||Wc.defaultLineDash;var n=e.getLineDashOffset();this.state_.lineDashOffset=n||Wc.defaultLineDashOffset,i=(i=e.getColor())instanceof CanvasGradient||i instanceof CanvasPattern?Wc.defaultStrokeStyle:ds.asArray(i).map(function(t,e){return 3!=e?t/255:t})||Wc.defaultStrokeStyle,o=void 0!==(o=e.getWidth())?o:Wc.defaultLineWidth}else i=[0,0,0,0],o=0;var s=t?t.getColor():[0,0,0,0];s=s instanceof CanvasGradient||s instanceof CanvasPattern?Wc.defaultFillStyle:ds.asArray(s).map(function(t,e){return 3!=e?t/255:t})||Wc.defaultFillStyle,this.state_.strokeColor&&Xt.equals(this.state_.strokeColor,i)&&this.state_.fillColor&&Xt.equals(this.state_.fillColor,s)&&this.state_.lineWidth===o||(this.state_.changed=!0,this.state_.fillColor=s,this.state_.strokeColor=i,this.state_.lineWidth=o,this.styles_.push([s,i,o]))};var Kc=zc,Hc={};Hc.fragment=new Ac(C.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),Hc.vertex=new Fc(C.DEBUG_WEBGL?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}");var $c=Hc,qc=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_opacity=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_opacity":"k"),this.u_image=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_image":"l"),this.a_position=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_position":"c"),this.a_texCoord=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_texCoord":"d"),this.a_offsets=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_offsets":"e"),this.a_opacity=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_opacity":"f"),this.a_rotateWithView=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_rotateWithView":"g")},Zc={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Jc=function(t,e){this.canvas_=t,this.gl_=e,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=Xt.includes(C.WEBGL_EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&e.getExtension("OES_element_index_uint"),vt.listen(this.canvas_,Zc.LOST,this.handleWebGLContextLost,this),vt.listen(this.canvas_,Zc.RESTORED,this.handleWebGLContextRestored,this)};C.inherits(Jc,yt),Jc.prototype.bindBuffer=function(t,e){var i=this.getGL(),o=e.getArray(),r=String(C.getUid(e));if(r in this.bufferCache_){var n=this.bufferCache_[r];i.bindBuffer(t,n.buffer)}else{var s,a=i.createBuffer();i.bindBuffer(t,a),t==ms.ARRAY_BUFFER?s=new Float32Array(o):t==ms.ELEMENT_ARRAY_BUFFER&&(s=this.hasOESElementIndexUint?new Uint32Array(o):new Uint16Array(o)),i.bufferData(t,s,e.getUsage()),this.bufferCache_[r]={buf:e,buffer:a}}},Jc.prototype.deleteBuffer=function(t){var e=this.getGL(),i=String(C.getUid(t)),o=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(o.buffer),delete this.bufferCache_[i]},Jc.prototype.disposeInternal=function(){vt.unlistenAll(this.canvas_);var t=this.getGL();if(!t.isContextLost()){var e;for(e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(e in this.programCache_)t.deleteProgram(this.programCache_[e]);for(e in this.shaderCache_)t.deleteShader(this.shaderCache_[e]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},Jc.prototype.getCanvas=function(){return this.canvas_},Jc.prototype.getGL=function(){return this.gl_},Jc.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},Jc.prototype.getShader=function(t){var e=String(C.getUid(t));if(e in this.shaderCache_)return this.shaderCache_[e];var i=this.getGL(),o=i.createShader(t.getType());return i.shaderSource(o,t.getSource()),i.compileShader(o),this.shaderCache_[e]=o,o},Jc.prototype.getProgram=function(t,e){var i=C.getUid(t)+"/"+C.getUid(e);if(i in this.programCache_)return this.programCache_[i];var o=this.getGL(),r=o.createProgram();return o.attachShader(r,this.getShader(t)),o.attachShader(r,this.getShader(e)),o.linkProgram(r),this.programCache_[i]=r,r},Jc.prototype.handleWebGLContextLost=function(){nt.clear(this.bufferCache_),nt.clear(this.shaderCache_),nt.clear(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},Jc.prototype.handleWebGLContextRestored=function(){},Jc.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var i=Jc.createEmptyTexture(t,1,1),o=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,o),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,o),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=i,this.hitDetectionRenderbuffer_=o},Jc.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},Jc.createTexture_=function(t,e,i){var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_WRAP_S,e),void 0!==i&&t.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_WRAP_T,i),o},Jc.createEmptyTexture=function(t,e,i,o,r){var n=Jc.createTexture_(t,o,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),n},Jc.createTexture=function(t,e,i,o){var r=Jc.createTexture_(t,i,o);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r};var Qc=Jc,tf=function(t,e){Bc.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0};C.inherits(tf,Bc),tf.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,o=this.getTextures(!0),r=t.getGL();return function(){var n,s;if(!r.isContextLost())for(n=0,s=o.length;n<s;++n)r.deleteTexture(o[n]);t.deleteBuffer(e),t.deleteBuffer(i)}},tf.prototype.drawCoordinates=function(t,e,i,o){var r,n,s,a,h,l,p=this.anchorX,u=this.anchorY,c=this.height,f=this.imageHeight,d=this.imageWidth,y=this.opacity,g=this.originX,v=this.originY,m=this.rotateWithView?1:0,_=-this.rotation,b=this.scale,x=this.width,E=Math.cos(_),S=Math.sin(_),T=this.indices.length,w=this.vertices.length;for(r=e;r<i;r+=o)h=t[r]-this.origin[0],l=t[r+1]-this.origin[1],n=w/8,s=-b*p,a=-b*(c-u),this.vertices[w++]=h,this.vertices[w++]=l,this.vertices[w++]=s*E-a*S,this.vertices[w++]=s*S+a*E,this.vertices[w++]=g/d,this.vertices[w++]=(v+c)/f,this.vertices[w++]=y,this.vertices[w++]=m,s=b*(x-p),a=-b*(c-u),this.vertices[w++]=h,this.vertices[w++]=l,this.vertices[w++]=s*E-a*S,this.vertices[w++]=s*S+a*E,this.vertices[w++]=(g+x)/d,this.vertices[w++]=(v+c)/f,this.vertices[w++]=y,this.vertices[w++]=m,s=b*(x-p),a=b*u,this.vertices[w++]=h,this.vertices[w++]=l,this.vertices[w++]=s*E-a*S,this.vertices[w++]=s*S+a*E,this.vertices[w++]=(g+x)/d,this.vertices[w++]=v/f,this.vertices[w++]=y,this.vertices[w++]=m,s=-b*p,a=b*u,this.vertices[w++]=h,this.vertices[w++]=l,this.vertices[w++]=s*E-a*S,this.vertices[w++]=s*S+a*E,this.vertices[w++]=g/d,this.vertices[w++]=v/f,this.vertices[w++]=y,this.vertices[w++]=m,this.indices[T++]=n,this.indices[T++]=n+1,this.indices[T++]=n+2,this.indices[T++]=n,this.indices[T++]=n+2,this.indices[T++]=n+3;return w},tf.prototype.createTextures=function(t,e,i,o){var r,n,s,a,h=e.length;for(a=0;a<h;++a)n=e[a],(s=C.getUid(n).toString())in i?r=i[s]:(r=Qc.createTexture(o,n,ms.CLAMP_TO_EDGE,ms.CLAMP_TO_EDGE),i[s]=r),t[a]=r},tf.prototype.setUpProgram=function(t,e,i,o){var r,n=$c.fragment,s=$c.vertex,a=e.getProgram(n,s);return this.defaultLocations?r=this.defaultLocations:(r=new qc(t,a),this.defaultLocations=r),e.useProgram(a),t.enableVertexAttribArray(r.a_position),t.vertexAttribPointer(r.a_position,2,ms.FLOAT,!1,32,0),t.enableVertexAttribArray(r.a_offsets),t.vertexAttribPointer(r.a_offsets,2,ms.FLOAT,!1,32,8),t.enableVertexAttribArray(r.a_texCoord),t.vertexAttribPointer(r.a_texCoord,2,ms.FLOAT,!1,32,16),t.enableVertexAttribArray(r.a_opacity),t.vertexAttribPointer(r.a_opacity,1,ms.FLOAT,!1,32,24),t.enableVertexAttribArray(r.a_rotateWithView),t.vertexAttribPointer(r.a_rotateWithView,1,ms.FLOAT,!1,32,28),r},tf.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},tf.prototype.drawReplay=function(t,e,i,o){var r,n,s,a=o?this.getHitDetectionTextures():this.getTextures(),h=o?this.hitDetectionGroupIndices:this.groupIndices;if(nt.isEmpty(i))for(r=0,n=a.length,s=0;r<n;++r){t.bindTexture(ms.TEXTURE_2D,a[r]);var l=h[r];this.drawElements(t,e,s,l),s=l}else this.drawReplaySkipping(t,e,i,a,h)},tf.prototype.drawReplaySkipping=function(t,e,i,o,r){var n,s,a=0;for(n=0,s=o.length;n<s;++n){t.bindTexture(ms.TEXTURE_2D,o[n]);for(var h=n>0?r[n-1]:0,l=r[n],p=h,u=h;a<this.startIndices.length&&this.startIndices[a]<=l;){var c=this.startIndicesFeature[a];void 0!==i[C.getUid(c).toString()]?(p!==u&&this.drawElements(t,e,p,u),u=p=a===this.startIndices.length-1?l:this.startIndices[a+1]):u=a===this.startIndices.length-1?l:this.startIndices[a+1],a++}p!==u&&this.drawElements(t,e,p,u)}},tf.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,o,r){var n,s,a,h,l,p=this.startIndices.length-1,u=this.getHitDetectionTextures();for(n=u.length-1;n>=0;--n)for(t.bindTexture(ms.TEXTURE_2D,u[n]),s=n>0?this.hitDetectionGroupIndices[n-1]:0,h=this.hitDetectionGroupIndices[n];p>=0&&this.startIndices[p]>=s;){if(a=this.startIndices[p],l=this.startIndicesFeature[p],void 0===i[C.getUid(l).toString()]&&l.getGeometry()&&(void 0===r||U.intersects(r,l.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,h);var c=o(l);if(c)return c}h=a,p--}},tf.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},tf.prototype.getTextures=function(t){},tf.prototype.getHitDetectionTextures=function(){};var ef=tf,of=function(t,e){ef.call(this,t,e),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]};C.inherits(of,ef),of.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),o=t.getStride();this.drawCoordinates(i,0,i.length,o)},of.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),o=t.getStride();this.drawCoordinates(i,0,i.length,o)},of.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new Yc(this.vertices);var i=this.indices;this.indicesBuffer=new Yc(i);var o={};this.createTextures(this.textures_,this.images_,o,e),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,o,e),this.images_=null,this.hitDetectionImages_=null,ef.prototype.finish.call(this,t)},of.prototype.setImageStyle=function(t){var e,i=t.getAnchor(),o=t.getImage(1),r=t.getImageSize(),n=t.getHitDetectionImage(1),s=t.getOpacity(),a=t.getOrigin(),h=t.getRotateWithView(),l=t.getRotation(),p=t.getSize(),u=t.getScale();0===this.images_.length?this.images_.push(o):(e=this.images_[this.images_.length-1],C.getUid(e)!=C.getUid(o)&&(this.groupIndices.push(this.indices.length),this.images_.push(o))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(n):(e=this.hitDetectionImages_[this.hitDetectionImages_.length-1],C.getUid(e)!=C.getUid(n)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(n))),this.anchorX=i[0],this.anchorY=i[1],this.height=p[1],this.imageHeight=r[1],this.imageWidth=r[0],this.opacity=s,this.originX=a[0],this.originY=a[1],this.rotation=l,this.rotateWithView=h,this.scale=u,this.width=p[0]},of.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},of.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_};var rf=of,nf={lineStringIsClosed:function(t,e,i,o){var r=i-o;return t[e]===t[r]&&t[e+1]===t[r+1]&&(i-e)/o>3&&!!un.linearRing(t,e,i,o)}},sf=nf,af={};af.fragment=new Ac(C.DEBUG_WEBGL?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),af.vertex=new Fc(C.DEBUG_WEBGL?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}");var hf=af,lf=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_miterLimit=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_miterLimit":"l"),this.u_opacity=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_opacity":"m"),this.u_color=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_color":"n"),this.u_size=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_size":"o"),this.u_pixelRatio=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_pixelRatio":"p"),this.a_lastPos=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_lastPos":"d"),this.a_position=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_position":"e"),this.a_nextPos=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_nextPos":"f"),this.a_direction=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_direction":"g")},pf=function(t,e){Bc.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}};C.inherits(pf,Bc),pf.prototype.drawCoordinates_=function(t,e,i,o){var r,n,s,a,h,l,p,u,c=this.vertices.length,f=this.indices.length,d="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,y="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,g=sf.lineStringIsClosed(t,e,i,o),v=f,m=1;for(r=e,n=i;r<n;r+=o){if(h=c/7,l=p,p=u||[t[r],t[r+1]],r===e){if(u=[t[r+o],t[r+o+1]],i-e==2*o&&Xt.equals(p,u))break;if(!g){y&&(c=this.addVertices_([0,0],p,u,m*pf.Instruction_.BEGIN_LINE_CAP*y,c),c=this.addVertices_([0,0],p,u,-m*pf.Instruction_.BEGIN_LINE_CAP*y,c),this.indices[f++]=h+2,this.indices[f++]=h,this.indices[f++]=h+1,this.indices[f++]=h+1,this.indices[f++]=h+3,this.indices[f++]=h+2),c=this.addVertices_([0,0],p,u,m*pf.Instruction_.BEGIN_LINE*(y||1),c),v=(c=this.addVertices_([0,0],p,u,-m*pf.Instruction_.BEGIN_LINE*(y||1),c))/7-1;continue}l=[t[i-2*o],t[i-2*o+1]],s=u}else{if(r===i-o){if(g){u=s;break}l=l||[0,0],c=this.addVertices_(l,p,[0,0],m*pf.Instruction_.END_LINE*(y||1),c),c=this.addVertices_(l,p,[0,0],-m*pf.Instruction_.END_LINE*(y||1),c),this.indices[f++]=h,this.indices[f++]=v-1,this.indices[f++]=v,this.indices[f++]=v,this.indices[f++]=h+1,this.indices[f++]=h,y&&(c=this.addVertices_(l,p,[0,0],m*pf.Instruction_.END_LINE_CAP*y,c),c=this.addVertices_(l,p,[0,0],-m*pf.Instruction_.END_LINE_CAP*y,c),this.indices[f++]=h+2,this.indices[f++]=h,this.indices[f++]=h+1,this.indices[f++]=h+1,this.indices[f++]=h+3,this.indices[f++]=h+2);break}u=[t[r+o],t[r+o+1]]}a=Wc.triangleIsCounterClockwise(l[0],l[1],p[0],p[1],u[0],u[1])?-1:1,c=this.addVertices_(l,p,u,a*pf.Instruction_.BEVEL_FIRST*(d||1),c),c=this.addVertices_(l,p,u,a*pf.Instruction_.BEVEL_SECOND*(d||1),c),c=this.addVertices_(l,p,u,-a*pf.Instruction_.MITER_BOTTOM*(d||1),c),r>e&&(this.indices[f++]=h,this.indices[f++]=v-1,this.indices[f++]=v,this.indices[f++]=h+2,this.indices[f++]=h,this.indices[f++]=m*a>0?v:v-1),this.indices[f++]=h,this.indices[f++]=h+2,this.indices[f++]=h+1,v=h+2,m=a,d&&(c=this.addVertices_(l,p,u,a*pf.Instruction_.MITER_TOP*d,c),this.indices[f++]=h+1,this.indices[f++]=h+3,this.indices[f++]=h)}g&&(h=h||c/7,a=_n.linearRingIsClockwise([l[0],l[1],p[0],p[1],u[0],u[1]],0,6,2)?1:-1,c=this.addVertices_(l,p,u,a*pf.Instruction_.BEVEL_FIRST*(d||1),c),c=this.addVertices_(l,p,u,-a*pf.Instruction_.MITER_BOTTOM*(d||1),c),this.indices[f++]=h,this.indices[f++]=v-1,this.indices[f++]=v,this.indices[f++]=h+1,this.indices[f++]=h,this.indices[f++]=m*a>0?v:v-1)},pf.prototype.addVertices_=function(t,e,i,o,r){return this.vertices[r++]=t[0],this.vertices[r++]=t[1],this.vertices[r++]=e[0],this.vertices[r++]=e[1],this.vertices[r++]=i[0],this.vertices[r++]=i[1],this.vertices[r++]=o,r},pf.prototype.isValid_=function(t,e,i,o){var r=i-e;if(r<2*o)return!1;if(r===2*o){var n=[t[e],t[e+1]],s=[t[e+o],t[e+o+1]];return!Xt.equals(n,s)}return!0},pf.prototype.drawLineString=function(t,e){var i=t.getFlatCoordinates(),o=t.getStride();this.isValid_(i,0,i.length,o)&&(i=Bo.translate(i,0,i.length,o,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,o))},pf.prototype.drawMultiLineString=function(t,e){var i=this.indices.length,o=t.getEnds();o.unshift(0);var r,n,s=t.getFlatCoordinates(),a=t.getStride();if(o.length>1)for(r=1,n=o.length;r<n;++r)if(this.isValid_(s,o[r-1],o[r],a)){var h=Bo.translate(s,o[r-1],o[r],a,-this.origin[0],-this.origin[1]);this.drawCoordinates_(h,0,h.length,a)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},pf.prototype.drawPolygonCoordinates=function(t,e,i){var o,r;if(sf.lineStringIsClosed(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length)for(o=0,r=e.length;o<r;++o)sf.lineStringIsClosed(e[o],0,e[o].length,i)||(e[o].push(e[o][0]),e[o].push(e[o][1])),this.drawCoordinates_(e[o],0,e[o].length,i)},pf.prototype.setPolygonStyle=function(t,e){var i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},pf.prototype.getCurrentIndex=function(){return this.indices.length},pf.prototype.finish=function(t){this.verticesBuffer=new Yc(this.vertices),this.indicesBuffer=new Yc(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},pf.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},pf.prototype.setUpProgram=function(t,e,i,o){var r,n;r=hf.fragment,n=hf.vertex;var s,a=e.getProgram(r,n);return this.defaultLocations_?s=this.defaultLocations_:(s=new lf(t,a),this.defaultLocations_=s),e.useProgram(a),t.enableVertexAttribArray(s.a_lastPos),t.vertexAttribPointer(s.a_lastPos,2,ms.FLOAT,!1,28,0),t.enableVertexAttribArray(s.a_position),t.vertexAttribPointer(s.a_position,2,ms.FLOAT,!1,28,8),t.enableVertexAttribArray(s.a_nextPos),t.vertexAttribPointer(s.a_nextPos,2,ms.FLOAT,!1,28,16),t.enableVertexAttribArray(s.a_direction),t.vertexAttribPointer(s.a_direction,1,ms.FLOAT,!1,28,24),t.uniform2fv(s.u_size,i),t.uniform1f(s.u_pixelRatio,o),s},pf.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},pf.prototype.drawReplay=function(t,e,i,o){var r,n,s,a,h=t.getParameter(t.DEPTH_FUNC),l=t.getParameter(t.DEPTH_WRITEMASK);if(o||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),nt.isEmpty(i))for(s=this.startIndices[this.startIndices.length-1],r=this.styleIndices_.length-1;r>=0;--r)n=this.styleIndices_[r],a=this.styles_[r],this.setStrokeStyle_(t,a[0],a[1],a[2]),this.drawElements(t,e,n,s),t.clear(t.DEPTH_BUFFER_BIT),s=n;else this.drawReplaySkipping_(t,e,i);o||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(l),t.depthFunc(h))},pf.prototype.drawReplaySkipping_=function(t,e,i){var o,r,n,s,a,h,l,p;for(l=this.startIndices.length-2,n=r=this.startIndices[l+1],o=this.styleIndices_.length-1;o>=0;--o){for(s=this.styles_[o],this.setStrokeStyle_(t,s[0],s[1],s[2]),a=this.styleIndices_[o];l>=0&&this.startIndices[l]>=a;)p=this.startIndices[l],h=this.startIndicesFeature[l],i[C.getUid(h).toString()]&&(r!==n&&(this.drawElements(t,e,r,n),t.clear(t.DEPTH_BUFFER_BIT)),n=p),l--,r=p;r!==n&&(this.drawElements(t,e,r,n),t.clear(t.DEPTH_BUFFER_BIT)),r=n=a}},pf.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,o,r){var n,s,a,h,l,p,u;for(u=this.startIndices.length-2,a=this.startIndices[u+1],n=this.styleIndices_.length-1;n>=0;--n)for(h=this.styles_[n],this.setStrokeStyle_(t,h[0],h[1],h[2]),l=this.styleIndices_[n];u>=0&&this.startIndices[u]>=l;){if(s=this.startIndices[u],p=this.startIndicesFeature[u],void 0===i[C.getUid(p).toString()]&&p.getGeometry()&&(void 0===r||U.intersects(r,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);var c=o(p);if(c)return c}u--,a=s}},pf.prototype.setStrokeStyle_=function(t,e,i,o){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,o)},pf.prototype.setFillStrokeStyle=function(t,e){var i=e.getLineCap();this.state_.lineCap=void 0!==i?i:Wc.defaultLineCap;var o=e.getLineDash();this.state_.lineDash=o||Wc.defaultLineDash;var r=e.getLineDashOffset();this.state_.lineDashOffset=r||Wc.defaultLineDashOffset;var n=e.getLineJoin();this.state_.lineJoin=void 0!==n?n:Wc.defaultLineJoin;var s=e.getColor();s=s instanceof CanvasGradient||s instanceof CanvasPattern?Wc.defaultStrokeStyle:ds.asArray(s).map(function(t,e){return 3!=e?t/255:t})||Wc.defaultStrokeStyle;var a=e.getWidth();a=void 0!==a?a:Wc.defaultLineWidth;var h=e.getMiterLimit();h=void 0!==h?h:Wc.defaultMiterLimit,this.state_.strokeColor&&Xt.equals(this.state_.strokeColor,s)&&this.state_.lineWidth===a&&this.state_.miterLimit===h||(this.state_.changed=!0,this.state_.strokeColor=s,this.state_.lineWidth=a,this.state_.miterLimit=h,this.styles_.push([s,a,h]))},pf.Instruction_={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23};var uf=pf,cf={};cf.fragment=new Ac(C.DEBUG_WEBGL?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),cf.vertex=new Fc(C.DEBUG_WEBGL?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}");var ff=cf,df=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_offsetRotateMatrix":"d"),this.u_color=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_color":"e"),this.u_opacity=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_opacity":"f"),this.a_position=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_position":"a")},yf=function(t){this.first_=void 0,this.last_=void 0,this.head_=void 0,this.circular_=void 0===t||t,this.length_=0};yf.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},i=this.head_;if(i){var o=i.next;e.prev=i,e.next=o,i.next=e,o&&(o.prev=e),i===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},yf.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),this.head_=e||i,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=i?this.head_.prev:this.head_),this.length_--}},yf.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},yf.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},yf.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},yf.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},yf.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},yf.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},yf.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},yf.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},yf.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},yf.prototype.getLength=function(){return this.length_};var gf=yf,vf=function(t,e){Bc.call(this,t,e),this.lineStringReplay=new uf(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}};C.inherits(vf,Bc),vf.prototype.drawCoordinates_=function(t,e,i){var o=new gf,r=new Wa;this.processFlatCoordinates_(t,i,o,r,!0);var n=this.getMaxCoords_(o);if(e.length){var s,a,h=[];for(s=0,a=e.length;s<a;++s){var l={list:new gf,maxCoords:void 0,rtree:new Wa};h.push(l),this.processFlatCoordinates_(e[s],i,l.list,l.rtree,!1),this.classifyPoints_(l.list,l.rtree,!0),l.maxCoords=this.getMaxCoords_(l.list)}for(h.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),s=0;s<h.length;++s){var p,u=h[s].list,c=u.firstItem(),f=c;do{if(this.getIntersections_(f,r).length){p=!0;break}f=u.nextItem()}while(c!==f);p||this.bridgeHole_(u,h[s].maxCoords[0],o,n[0],r)&&(r.concat(h[s].rtree),this.classifyPoints_(o,r,!1))}}else this.classifyPoints_(o,r,!1);this.triangulate_(o,r)},vf.prototype.processFlatCoordinates_=function(t,e,i,o,r){var n,s,a,h,l,p=_n.linearRingIsClockwise(t,0,t.length,e),u=this.vertices.length/2,c=[],f=[];if(r===p){for(h=a=this.createPoint_(t[0],t[1],u++),n=e,s=t.length;n<s;n+=e)l=this.createPoint_(t[n],t[n+1],u++),f.push(this.insertItem_(h,l,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)]),h=l;f.push(this.insertItem_(l,a,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)])}else{var d=t.length-e;for(h=a=this.createPoint_(t[d],t[d+1],u++),n=d-e,s=0;n>=s;n-=e)l=this.createPoint_(t[n],t[n+1],u++),f.push(this.insertItem_(h,l,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)]),h=l;f.push(this.insertItem_(l,a,i)),c.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)])}o.load(c,f)},vf.prototype.getMaxCoords_=function(t){var e=t.firstItem(),i=e,o=[i.p0.x,i.p0.y];do{(i=t.nextItem()).p0.x>o[0]&&(o=[i.p0.x,i.p0.y])}while(i!==e);return o},vf.prototype.classifyPoints_=function(t,e,i){var o=t.firstItem(),r=o,n=t.nextItem(),s=!1;do{var a=i?Wc.triangleIsCounterClockwise(n.p1.x,n.p1.y,r.p1.x,r.p1.y,r.p0.x,r.p0.y):Wc.triangleIsCounterClockwise(r.p0.x,r.p0.y,r.p1.x,r.p1.y,n.p1.x,n.p1.y);void 0===a?(this.removeItem_(r,n,t,e),s=!0,n===o&&(o=t.getNextItem()),n=r,t.prevItem()):r.p1.reflex!==a&&(r.p1.reflex=a,s=!0),r=n,n=t.nextItem()}while(r!==o);return s},vf.prototype.bridgeHole_=function(t,e,i,o,r){for(var n=t.firstItem();n.p1.x!==e;)n=t.nextItem();var s,a,h,l,p=n.p1,u={x:o,y:p.y,i:-1},c=1/0,f=this.getIntersections_({p0:p,p1:u},r,!0);for(s=0,a=f.length;s<a;++s){var d=f[s],y=this.calculateIntersection_(p,u,d.p0,d.p1,!0),g=Math.abs(p.x-y[0]);g<c&&void 0!==Wc.triangleIsCounterClockwise(p.x,p.y,d.p0.x,d.p0.y,d.p1.x,d.p1.y)&&(c=g,l={x:y[0],y:y[1],i:-1},n=d)}if(c===1/0)return!1;if(h=n.p1,c>0){var v=this.getPointsInTriangle_(p,l,n.p1,r);if(v.length){var m=1/0;for(s=0,a=v.length;s<a;++s){var _=v[s],b=Math.atan2(p.y-_.y,u.x-_.x);(b<m||b===m&&_.x<h.x)&&(m=b,h=_)}}}for(n=i.firstItem();n.p1.x!==h.x||n.p1.y!==h.y;)n=i.nextItem();var x={x:p.x,y:p.y,i:p.i,reflex:void 0},E={x:n.p1.x,y:n.p1.y,i:n.p1.i,reflex:void 0};return t.getNextItem().p0=x,this.insertItem_(p,n.p1,t,r),this.insertItem_(E,x,t,r),n.p1=E,t.setFirstItem(),i.concat(t),!0},vf.prototype.triangulate_=function(t,e){for(var i=!1,o=this.isSimple_(t,e);t.getLength()>3;)if(o){if(!this.clipEars_(t,e,o,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,o,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(o=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}if(3===t.getLength()){var r=this.indices.length;this.indices[r++]=t.getPrevItem().p0.i,this.indices[r++]=t.getCurrItem().p0.i,this.indices[r++]=t.getNextItem().p0.i}},vf.prototype.clipEars_=function(t,e,i,o){var r,n,s,a=this.indices.length,h=t.firstItem(),l=t.getPrevItem(),p=h,u=t.nextItem(),c=t.getNextItem(),f=!1;do{var d;if(r=p.p0,n=p.p1,s=u.p1,!1===n.reflex)d=i?0===this.getPointsInTriangle_(r,n,s,e,!0).length:o?this.diagonalIsInside_(c.p1,s,n,r,l.p0):this.diagonalIsInside_(l.p0,r,n,s,c.p1),(i||0===this.getIntersections_({p0:r,p1:s},e).length)&&d&&(i||!1===r.reflex||!1===s.reflex||_n.linearRingIsClockwise([l.p0.x,l.p0.y,r.x,r.y,n.x,n.y,s.x,s.y,c.p1.x,c.p1.y],0,10,2)===!o)&&(this.indices[a++]=r.i,this.indices[a++]=n.i,this.indices[a++]=s.i,this.removeItem_(p,u,t,e),u===h&&(h=c),f=!0);l=t.getPrevItem(),p=t.getCurrItem(),u=t.nextItem(),c=t.getNextItem()}while(p!==h&&t.getLength()>3);return f},vf.prototype.resolveSelfIntersections_=function(t,e,i){var o=t.firstItem();t.nextItem();var r=o,n=t.nextItem(),s=!1;do{var a=this.calculateIntersection_(r.p0,r.p1,n.p0,n.p1,i);if(a){var h,l=!1,p=this.vertices.length,u=this.indices.length,c=p/2,f=t.prevItem();if(t.removeItem(),e.remove(f),l=f===o,i?(a[0]===r.p0.x&&a[1]===r.p0.y?(t.prevItem(),h=r.p0,n.p0=h,e.remove(r),l=l||r===o):(h=n.p1,r.p1=h,e.remove(n),l=l||n===o),t.removeItem()):(h=this.createPoint_(a[0],a[1],c),r.p1=h,n.p0=h,e.update([Math.min(r.p0.x,r.p1.x),Math.min(r.p0.y,r.p1.y),Math.max(r.p0.x,r.p1.x),Math.max(r.p0.y,r.p1.y)],r),e.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n)),this.indices[u++]=f.p0.i,this.indices[u++]=f.p1.i,this.indices[u++]=h.i,s=!0,l)break}r=t.getPrevItem(),n=t.nextItem()}while(r!==o);return s},vf.prototype.isSimple_=function(t,e){var i=t.firstItem(),o=i;do{if(this.getIntersections_(o,e).length)return!1;o=t.nextItem()}while(o!==i);return!0},vf.prototype.isClockwise_=function(t){var e=2*t.getLength(),i=new Array(e),o=t.firstItem(),r=o,n=0;do{i[n++]=r.p0.x,i[n++]=r.p0.y,r=t.nextItem()}while(r!==o);return _n.linearRingIsClockwise(i,0,e,2)},vf.prototype.splitPolygon_=function(t,e){var i=t.firstItem(),o=i;do{var r=this.getIntersections_(o,e);if(r.length){var n=r[0],s=this.vertices.length/2,a=this.calculateIntersection_(o.p0,o.p1,n.p0,n.p1),h=this.createPoint_(a[0],a[1],s),l=new gf,p=new Wa;this.insertItem_(h,o.p1,l,p),o.p1=h,e.update([Math.min(o.p0.x,h.x),Math.min(o.p0.y,h.y),Math.max(o.p0.x,h.x),Math.max(o.p0.y,h.y)],o);for(var u=t.nextItem();u!==n;)this.insertItem_(u.p0,u.p1,l,p),e.remove(u),t.removeItem(),u=t.getCurrItem();this.insertItem_(n.p0,h,l,p),n.p0=h,e.update([Math.min(n.p1.x,h.x),Math.min(n.p1.y,h.y),Math.max(n.p1.x,h.x),Math.max(n.p1.y,h.y)],n),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(l,p,!1),this.triangulate_(l,p);break}o=t.nextItem()}while(o!==i)},vf.prototype.createPoint_=function(t,e,i){var o=this.vertices.length;return this.vertices[o++]=t,this.vertices[o++]=e,{x:t,y:e,i:i,reflex:void 0}},vf.prototype.insertItem_=function(t,e,i,o){var r={p0:t,p1:e};return i.insertItem(r),o&&o.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],r),r},vf.prototype.removeItem_=function(t,e,i,o){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,o.remove(e),o.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},vf.prototype.getPointsInTriangle_=function(t,e,i,o,r){var n,s,a,h,l=[],p=o.getInExtent([Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]);for(n=0,s=p.length;n<s;++n)for(a in p[n])"object"!=typeof(h=p[n][a])||r&&!h.reflex||h.x===t.x&&h.y===t.y||h.x===e.x&&h.y===e.y||h.x===i.x&&h.y===i.y||-1!==l.indexOf(h)||!zr.linearRingContainsXY([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,h.x,h.y)||l.push(h);return l},vf.prototype.getIntersections_=function(t,e,i){var o,r,n=t.p0,s=t.p1,a=e.getInExtent([Math.min(n.x,s.x),Math.min(n.y,s.y),Math.max(n.x,s.x),Math.max(n.y,s.y)]),h=[];for(o=0,r=a.length;o<r;++o){var l=a[o];t!==l&&(i||l.p0!==s||l.p1!==n)&&this.calculateIntersection_(n,s,l.p0,l.p1,i)&&h.push(l)}return h},vf.prototype.calculateIntersection_=function(t,e,i,o,r){var n=(o.y-i.y)*(e.x-t.x)-(o.x-i.x)*(e.y-t.y);if(0!==n){var s=((o.x-i.x)*(t.y-i.y)-(o.y-i.y)*(t.x-i.x))/n,a=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/n;if(!r&&s>Wc.EPSILON&&s<1-Wc.EPSILON&&a>Wc.EPSILON&&a<1-Wc.EPSILON||r&&s>=0&&s<=1&&a>=0&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},vf.prototype.diagonalIsInside_=function(t,e,i,o,r){if(void 0===e.reflex||void 0===o.reflex)return!1;var n=(i.x-o.x)*(e.y-o.y)>(i.y-o.y)*(e.x-o.x),s=(r.x-o.x)*(e.y-o.y)<(r.y-o.y)*(e.x-o.x),a=(t.x-e.x)*(o.y-e.y)>(t.y-e.y)*(o.x-e.x),h=(i.x-e.x)*(o.y-e.y)<(i.y-e.y)*(o.x-e.x),l=o.reflex?s||n:s&&n,p=e.reflex?h||a:h&&a;return l&&p},vf.prototype.drawMultiPolygon=function(t,e){var i,o,r,n,s=t.getEndss(),a=t.getStride(),h=this.indices.length,l=this.lineStringReplay.getCurrentIndex(),p=t.getFlatCoordinates(),u=0;for(i=0,o=s.length;i<o;++i){var c=s[i];if(c.length>0){var f=Bo.translate(p,u,c[0],a,-this.origin[0],-this.origin[1]);if(f.length){var d,y=[];for(r=1,n=c.length;r<n;++r)c[r]!==c[r-1]&&(d=Bo.translate(p,c[r-1],c[r],a,-this.origin[0],-this.origin[1]),y.push(d));this.lineStringReplay.drawPolygonCoordinates(f,y,a),this.drawCoordinates_(f,y,a)}}u=c[c.length-1]}this.indices.length>h&&(this.startIndices.push(h),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(h),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>l&&this.lineStringReplay.setPolygonStyle(e,l)},vf.prototype.drawPolygon=function(t,e){var i=t.getEnds(),o=t.getStride();if(i.length>0){var r=t.getFlatCoordinates().map(Number),n=Bo.translate(r,0,i[0],o,-this.origin[0],-this.origin[1]);if(n.length){var s,a,h,l=[];for(s=1,a=i.length;s<a;++s)i[s]!==i[s-1]&&(h=Bo.translate(r,i[s-1],i[s],o,-this.origin[0],-this.origin[1]),l.push(h));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(n,l,o),this.drawCoordinates_(n,l,o)}}},vf.prototype.finish=function(t){this.verticesBuffer=new Yc(this.vertices),this.indicesBuffer=new Yc(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},vf.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,o=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),o()}},vf.prototype.setUpProgram=function(t,e,i,o){var r,n;r=ff.fragment,n=ff.vertex;var s,a=e.getProgram(r,n);return this.defaultLocations_?s=this.defaultLocations_:(s=new df(t,a),this.defaultLocations_=s),e.useProgram(a),t.enableVertexAttribArray(s.a_position),t.vertexAttribPointer(s.a_position,2,ms.FLOAT,!1,8,0),s},vf.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},vf.prototype.drawReplay=function(t,e,i,o){var r,n,s,a,h=t.getParameter(t.DEPTH_FUNC),l=t.getParameter(t.DEPTH_WRITEMASK);if(o||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),nt.isEmpty(i))for(s=this.startIndices[this.startIndices.length-1],r=this.styleIndices_.length-1;r>=0;--r)n=this.styleIndices_[r],a=this.styles_[r],this.setFillStyle_(t,a),this.drawElements(t,e,n,s),s=n;else this.drawReplaySkipping_(t,e,i);o||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(l),t.depthFunc(h))},vf.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,o,r){var n,s,a,h,l,p,u;for(u=this.startIndices.length-2,a=this.startIndices[u+1],n=this.styleIndices_.length-1;n>=0;--n)for(h=this.styles_[n],this.setFillStyle_(t,h),l=this.styleIndices_[n];u>=0&&this.startIndices[u]>=l;){if(s=this.startIndices[u],p=this.startIndicesFeature[u],void 0===i[C.getUid(p).toString()]&&p.getGeometry()&&(void 0===r||U.intersects(r,p.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,a);var c=o(p);if(c)return c}u--,a=s}},vf.prototype.drawReplaySkipping_=function(t,e,i){var o,r,n,s,a,h,l,p;for(l=this.startIndices.length-2,n=r=this.startIndices[l+1],o=this.styleIndices_.length-1;o>=0;--o){for(s=this.styles_[o],this.setFillStyle_(t,s),a=this.styleIndices_[o];l>=0&&this.startIndices[l]>=a;)p=this.startIndices[l],h=this.startIndicesFeature[l],i[C.getUid(h).toString()]&&(r!==n&&(this.drawElements(t,e,r,n),t.clear(t.DEPTH_BUFFER_BIT)),n=p),l--,r=p;r!==n&&(this.drawElements(t,e,r,n),t.clear(t.DEPTH_BUFFER_BIT)),r=n=a}},vf.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},vf.prototype.setFillStrokeStyle=function(t,e){var i=t?t.getColor():[0,0,0,0];if(i=i instanceof CanvasGradient||i instanceof CanvasPattern?Wc.defaultFillStyle:ds.asArray(i).map(function(t,e){return 3!=e?t/255:t})||Wc.defaultFillStyle,this.state_.fillColor&&Xt.equals(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{var o=new ks({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,o)}};var mf=vf,_f=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Ct.createCanvasContext2D(t,t),this.canvas_=this.context_.canvas};_f.prototype.get=function(t){return this.entries_[t]||null},_f.prototype.add=function(t,e,i,o,r){var n,s,a;for(s=0,a=this.emptyBlocks_.length;s<a;++s)if((n=this.emptyBlocks_[s]).width>=e+this.space_&&n.height>=i+this.space_){var h={offsetX:n.x+this.space_,offsetY:n.y+this.space_,image:this.canvas_};return this.entries_[t]=h,o.call(r,this.context_,n.x+this.space_,n.y+this.space_),this.split_(s,n,e+this.space_,i+this.space_),h}return null},_f.prototype.split_=function(t,e,i,o){var r,n;e.width-i>e.height-o?(r={x:e.x+i,y:e.y,width:e.width-i,height:e.height},n={x:e.x,y:e.y+o,width:i,height:e.height-o},this.updateBlocks_(t,r,n)):(r={x:e.x+i,y:e.y,width:e.width-i,height:o},n={x:e.x,y:e.y+o,width:e.width,height:e.height-o},this.updateBlocks_(t,r,n))},_f.prototype.updateBlocks_=function(t,e,i){var o=[t,1];e.width>0&&e.height>0&&o.push(e),i.width>0&&i.height>0&&o.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,o)};var bf=_f,xf=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:C.INITIAL_ATLAS_SIZE,this.maxSize_=void 0!==e.maxSize?e.maxSize:-1!=C.MAX_ATLAS_SIZE?C.MAX_ATLAS_SIZE:void 0!==C.WEBGL_MAX_TEXTURE_SIZE?C.WEBGL_MAX_TEXTURE_SIZE:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new bf(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new bf(this.currentHitSize_,this.space_)]};xf.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},xf.prototype.getInfo_=function(t,e){var i,o,r;for(o=0,r=t.length;o<r;++o)if(i=t[o].get(e))return i;return null},xf.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},xf.prototype.add=function(t,e,i,o,r,n){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,i,o,n);if(!s)return null;var a=void 0!==r?r:C.nullFunction,h=this.add_(!0,t,e,i,a,n);return this.mergeInfos_(s,h)},xf.prototype.add_=function(t,e,i,o,r,n){var s,a,h,l,p=t?this.hitAtlases_:this.atlases_;for(h=0,l=p.length;h<l;++h){if(a=(s=p[h]).add(e,i,o,r,n))return a;var u;a||h!==l-1||(t?(u=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=u):(u=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=u),s=new bf(u,this.space_),p.push(s),++l)}return null};var Ef=xf,Sf=function(t,e){ef.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=Ct.createCanvasContext2D(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1};C.inherits(Sf,ef),Sf.prototype.drawText=function(t,e){if(this.text_){var i=null,o=2,r=2;switch(t.getType()){case W.POINT:case W.MULTI_POINT:o=(i=t.getFlatCoordinates()).length,r=t.getStride();break;case W.CIRCLE:i=t.getCenter();break;case W.LINE_STRING:i=t.getFlatMidpoint();break;case W.MULTI_LINE_STRING:o=(i=t.getFlatMidpoints()).length;break;case W.POLYGON:i=t.getFlatInteriorPoint();break;case W.MULTI_POLYGON:o=(i=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var n,s,a,h,l,p,u,c,f=this.currAtlas_,d=this.text_.split("\n"),y=this.getTextSize_(d),g=Math.round(y[0]*this.textAlign_-this.offsetX_),v=Math.round(y[1]*this.textBaseline_-this.offsetY_),m=this.state_.lineWidth/2*this.state_.scale;for(n=0,s=d.length;n<s;++n)for(l=0,p=f.height*n,a=0,h=(u=d[n].split("")).length;a<h;++a){if(c=f.atlas.getInfo(u[a])){var _,b=c.image;this.anchorX=g-l,this.anchorY=v-p,this.originX=0===a?c.offsetX-m:c.offsetX,this.originY=c.offsetY,this.height=f.height,this.width=0===a||a===u.length-1?f.width[u[a]]+m:f.width[u[a]],this.imageHeight=b.height,this.imageWidth=b.width,0===this.images_.length?this.images_.push(b):(_=this.images_[this.images_.length-1],C.getUid(_)!=C.getUid(b)&&(this.groupIndices.push(this.indices.length),this.images_.push(b))),this.drawText_(i,0,o,r)}l+=this.width}}},Sf.prototype.getTextSize_=function(t){var e=this,i=this.currAtlas_,o=t.length*i.height;return[t.map(function(t){var o,r,n=0;for(o=0,r=t.length;o<r;++o){var s=t[o];i.width[s]||e.addCharToAtlas_(s),n+=i.width[s]?i.width[s]:0}return n}).reduce(function(t,e){return Math.max(t,e)}),o]},Sf.prototype.drawText_=function(t,e,i,o){var r,n;for(r=e,n=i;r<n;r+=o)this.drawCoordinates(t,e,i,o)},Sf.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,i=this.state_,o=this.measureCanvas_.getContext("2d");o.font=i.font;var r=Math.ceil(o.measureText(t).width*i.scale);e.atlas.add(t,r,e.height,function(e,o,r){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",xs.CANVAS_LINE_DASH&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,o,r),i.fillColor&&e.fillText(t,o,r)})&&(e.width[t]=r)}},Sf.prototype.finish=function(t){var e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new Yc(this.vertices),this.indicesBuffer=new Yc(this.indices);this.createTextures(this.textures_,this.images_,{},e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,ef.prototype.finish.call(this,t)},Sf.prototype.setTextStyle=function(t){var e=this.state_,i=t.getFill(),o=t.getStroke();if(t&&t.getText()&&(i||o)){if(i){var r=i.getColor();e.fillColor=gs.asColorLike(r||Wc.defaultFillStyle)}else e.fillColor=null;if(o){var n=o.getColor();e.strokeColor=gs.asColorLike(n||Wc.defaultStrokeStyle),e.lineWidth=o.getWidth()||Wc.defaultLineWidth,e.lineCap=o.getLineCap()||Wc.defaultLineCap,e.lineDashOffset=o.getLineDashOffset()||Wc.defaultLineDashOffset,e.lineJoin=o.getLineJoin()||Wc.defaultLineJoin,e.miterLimit=o.getMiterLimit()||Wc.defaultMiterLimit;var s=o.getLineDash();e.lineDash=s?s.slice():Wc.defaultLineDash}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||Wc.defaultFont,e.scale=t.getScale()||1,this.text_=t.getText();var a=ac.TEXT_ALIGN[t.getTextAlign()],h=ac.TEXT_ALIGN[t.getTextBaseline()];this.textAlign_=void 0===a?Wc.defaultTextAlign:a,this.textBaseline_=void 0===h?Wc.defaultTextBaseline:h,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},Sf.prototype.getAtlas_=function(t){var e,i=[];for(e in t)(t[e]||0===t[e])&&(Array.isArray(t[e])?i=i.concat(t[e]):i.push(t[e]));var o=this.calculateHash_(i);if(!this.atlases_[o]){var r=this.measureCanvas_.getContext("2d");r.font=t.font;var n=Math.ceil((1.5*r.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[o]={atlas:new Ef({space:t.lineWidth+1}),width:{},height:n}}return this.atlases_[o]},Sf.prototype.calculateHash_=function(t){var e,i,o="";for(e=0,i=t.length;e<i;++e)o+=t[e];return o},Sf.prototype.getTextures=function(t){return this.textures_},Sf.prototype.getHitDetectionTextures=function(){return this.textures_};var Tf=Sf,wf=function(t,e,i){ec.call(this),this.maxExtent_=e,this.tolerance_=t,this.renderBuffer_=i,this.replaysByZIndex_={}};C.inherits(wf,ec),wf.prototype.addDeclutter=function(t,e){},wf.prototype.getDeleteResourcesFunction=function(t){var e,i=[];for(e in this.replaysByZIndex_){var o,r=this.replaysByZIndex_[e];for(o in r)i.push(r[o].getDeleteResourcesFunction(t))}return function(){for(var t,e=i.length,o=0;o<e;o++)t=i[o].apply(this,arguments);return t}},wf.prototype.finish=function(t){var e;for(e in this.replaysByZIndex_){var i,o=this.replaysByZIndex_[e];for(i in o)o[i].finish(t)}},wf.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",o=this.replaysByZIndex_[i];void 0===o&&(o={},this.replaysByZIndex_[i]=o);var r=o[e];void 0===r&&(r=new(0,wf.BATCH_CONSTRUCTORS_[e])(this.tolerance_,this.maxExtent_),o[e]=r);return r},wf.prototype.isEmpty=function(){return nt.isEmpty(this.replaysByZIndex_)},wf.prototype.replay=function(t,e,i,o,r,n,s,a){var h,l,p,u,c,f,d=Object.keys(this.replaysByZIndex_).map(Number);for(d.sort(Xt.numberSafeCompareFunction),h=0,l=d.length;h<l;++h)for(c=this.replaysByZIndex_[d[h].toString()],p=0,u=ac.ORDER.length;p<u;++p)void 0!==(f=c[ac.ORDER[p]])&&f.replay(t,e,i,o,r,n,s,a,void 0,!1)},wf.prototype.replayHitDetection_=function(t,e,i,o,r,n,s,a,h,l,p){var u,c,f,d,y,g,v=Object.keys(this.replaysByZIndex_).map(Number);for(v.sort(function(t,e){return e-t}),u=0,c=v.length;u<c;++u)for(d=this.replaysByZIndex_[v[u].toString()],f=ac.ORDER.length-1;f>=0;--f)if(void 0!==(y=d[ac.ORDER[f]])&&(g=y.replay(t,e,i,o,r,n,s,a,h,l,p)))return g},wf.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r,n,s,a,h,l){var p,u=e.getGL();return u.bindFramebuffer(u.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(p=U.buffer(U.createOrUpdateFromCoordinate(t),o*this.renderBuffer_)),this.replayHitDetection_(e,t,o,r,wf.HIT_DETECTION_SIZE_,s,a,h,function(t){var e=new Uint8Array(4);if(u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e),e[3]>0){var i=l(t);if(i)return i}},!0,p)},wf.prototype.hasFeatureAtCoordinate=function(t,e,i,o,r,n,s,a,h){var l=e.getGL();return l.bindFramebuffer(l.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,o,r,wf.HIT_DETECTION_SIZE_,s,a,h,function(t){var e=new Uint8Array(4);return l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,e),e[3]>0},!1)},wf.HIT_DETECTION_SIZE_=[1,1],wf.BATCH_CONSTRUCTORS_={Circle:Kc,Image:rf,LineString:uf,Polygon:mf,Text:Tf};var Cf=wf,Rf=function(t,e,i,o,r,n,s){ju.call(this),this.context_=t,this.center_=e,this.extent_=n,this.pixelRatio_=s,this.size_=r,this.rotation_=o,this.resolution_=i,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null};C.inherits(Rf,ju),Rf.prototype.drawText_=function(t,e){var i=this.context_,o=t.getReplay(0,ic.TEXT);o.setTextStyle(this.textStyle_),o.drawText(e,null),o.finish(i);o.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),o.getDeleteResourcesFunction(i)()},Rf.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},Rf.prototype.drawGeometry=function(t){switch(t.getType()){case W.POINT:this.drawPoint(t,null);break;case W.LINE_STRING:this.drawLineString(t,null);break;case W.POLYGON:this.drawPolygon(t,null);break;case W.MULTI_POINT:this.drawMultiPoint(t,null);break;case W.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case W.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case W.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case W.CIRCLE:this.drawCircle(t,null)}},Rf.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&U.intersects(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},Rf.prototype.drawGeometryCollection=function(t,e){var i,o,r=t.getGeometriesArray();for(i=0,o=r.length;i<o;++i)this.drawGeometry(r[i])},Rf.prototype.drawPoint=function(t,e){var i=this.context_,o=new Cf(1,this.extent_),r=o.getReplay(0,ic.IMAGE);r.setImageStyle(this.imageStyle_),r.drawPoint(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(o,t)},Rf.prototype.drawMultiPoint=function(t,e){var i=this.context_,o=new Cf(1,this.extent_),r=o.getReplay(0,ic.IMAGE);r.setImageStyle(this.imageStyle_),r.drawMultiPoint(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(o,t)},Rf.prototype.drawLineString=function(t,e){var i=this.context_,o=new Cf(1,this.extent_),r=o.getReplay(0,ic.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawLineString(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(o,t)},Rf.prototype.drawMultiLineString=function(t,e){var i=this.context_,o=new Cf(1,this.extent_),r=o.getReplay(0,ic.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawMultiLineString(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(o,t)},Rf.prototype.drawPolygon=function(t,e){var i=this.context_,o=new Cf(1,this.extent_),r=o.getReplay(0,ic.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawPolygon(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(o,t)},Rf.prototype.drawMultiPolygon=function(t,e){var i=this.context_,o=new Cf(1,this.extent_),r=o.getReplay(0,ic.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawMultiPolygon(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(o,t)},Rf.prototype.drawCircle=function(t,e){var i=this.context_,o=new Cf(1,this.extent_),r=o.getReplay(0,ic.CIRCLE);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawCircle(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(o,t)},Rf.prototype.setImageStyle=function(t){this.imageStyle_=t},Rf.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},Rf.prototype.setTextStyle=function(t){this.textStyle_=t};var Pf=Rf,If={};If.fragment=new Ac(C.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),If.vertex=new Fc(C.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}");var Mf=If,Lf=function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_texCoordMatrix":"d"),this.u_projectionMatrix=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_projectionMatrix":"e"),this.u_opacity=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_opacity":"f"),this.u_texture=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_texture":"g"),this.a_position=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_texCoord":"c")},Af=function(t,e){Bu.call(this,e),this.mapRenderer=t,this.arrayBuffer_=new Yc([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=Wo.create(),this.projectionMatrix=Wo.create(),this.tmpMat4_=Gc.create(),this.defaultLocations_=null};C.inherits(Af,Bu),Af.prototype.bindFramebuffer=function(t,e){var i=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){var o=function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,i,this.framebuffer,this.texture);t.postRenderFunctions.push(o);var r=Qc.createEmptyTexture(i,e,e),n=i.createFramebuffer();i.bindFramebuffer(ms.FRAMEBUFFER,n),i.framebufferTexture2D(ms.FRAMEBUFFER,ms.COLOR_ATTACHMENT0,ms.TEXTURE_2D,r,0),this.texture=r,this.framebuffer=n,this.framebufferDimension=e}else i.bindFramebuffer(ms.FRAMEBUFFER,this.framebuffer)},Af.prototype.composeFrame=function(t,e,i){this.dispatchComposeEvent_(Dh.PRECOMPOSE,i,t),i.bindBuffer(ms.ARRAY_BUFFER,this.arrayBuffer_);var o,r=i.getGL(),n=Mf.fragment,s=Mf.vertex,a=i.getProgram(n,s);this.defaultLocations_?o=this.defaultLocations_:(o=new Lf(r,a),this.defaultLocations_=o),i.useProgram(a)&&(r.enableVertexAttribArray(o.a_position),r.vertexAttribPointer(o.a_position,2,ms.FLOAT,!1,16,0),r.enableVertexAttribArray(o.a_texCoord),r.vertexAttribPointer(o.a_texCoord,2,ms.FLOAT,!1,16,8),r.uniform1i(o.u_texture,0)),r.uniformMatrix4fv(o.u_texCoordMatrix,!1,Gc.fromTransform(this.tmpMat4_,this.getTexCoordMatrix())),r.uniformMatrix4fv(o.u_projectionMatrix,!1,Gc.fromTransform(this.tmpMat4_,this.getProjectionMatrix())),r.uniform1f(o.u_opacity,e.opacity),r.bindTexture(ms.TEXTURE_2D,this.getTexture()),r.drawArrays(ms.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(Dh.POSTCOMPOSE,i,t)},Af.prototype.dispatchComposeEvent_=function(t,e,i){var o=this.getLayer();if(o.hasListener(t)){var r=i.viewState,n=r.resolution,s=i.pixelRatio,a=i.extent,h=r.center,l=r.rotation,p=i.size,u=new Pf(e,h,n,l,p,a,s),c=new Nu(t,u,i,null,e);o.dispatchEvent(c)}},Af.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},Af.prototype.getTexture=function(){return this.texture},Af.prototype.getProjectionMatrix=function(){return this.projectionMatrix},Af.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},Af.prototype.prepareFrame=function(t,e,i){},Af.prototype.forEachLayerAtPixel=function(t,e,i,o){};var Of=Af,Ff=function(t,e){Of.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null};C.inherits(Ff,Of),Ff.handles=function(t,e){return t===iu.WEBGL&&e.getType()===Ah.IMAGE},Ff.create=function(t,e){return new Ff(t,e)},Ff.prototype.createTexture_=function(t){var e=t.getImage(),i=this.mapRenderer.getGL();return Qc.createTexture(i,e,ms.CLAMP_TO_EDGE,ms.CLAMP_TO_EDGE)},Ff.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r){var n=this.getLayer(),s=n.getSource(),a=e.viewState.resolution,h=e.viewState.rotation,l=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,h,i,l,function(t){return o.call(r,t,n)})},Ff.prototype.prepareFrame=function(t,e,i){var o=this.mapRenderer.getGL(),r=t.pixelRatio,n=t.viewState,s=n.center,a=n.resolution,h=n.rotation,l=this.image_,p=this.texture,u=this.getLayer().getSource(),c=t.viewHints,f=t.extent;if(void 0!==e.extent&&(f=U.getIntersection(f,e.extent)),!c[Kp.ANIMATING]&&!c[Kp.INTERACTING]&&!U.isEmpty(f)){var d=n.projection;if(!C.ENABLE_RASTER_REPROJECTION){var y=u.getProjection();y&&(d=y)}var g=u.getImage(f,a,r,d);if(g)if(this.loadImage(g)&&(l=g,p=this.createTexture_(g),this.texture)){var v=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,o,this.texture);t.postRenderFunctions.push(v)}}if(l){var m=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(m.width,m.height,r,s,a,h,l.getExtent()),this.hitTransformationMatrix_=null;var _=this.texCoordMatrix;Wo.reset(_),Wo.scale(_,1,-1),Wo.translate(_,0,-1),this.image_=l,this.texture=p,this.updateLogos(t,u)}return!!l},Ff.prototype.updateProjectionMatrix_=function(t,e,i,o,r,n,s){var a=t*r,h=e*r,l=this.projectionMatrix;Wo.reset(l),Wo.scale(l,2*i/a,2*i/h),Wo.rotate(l,-n),Wo.translate(l,s[0]-o[0],s[1]-o[1]),Wo.scale(l,(s[2]-s[0])/2,(s[3]-s[1])/2),Wo.translate(l,1,1)},Ff.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,Go.TRUE,this)},Ff.prototype.forEachLayerAtPixel=function(t,e,i,o){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==C.nullFunction){var r=Wo.apply(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(r,e,0,Go.TRUE,this)?i.call(o,this.getLayer(),null):void 0}var n=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,n));var s=Wo.apply(this.hitTransformationMatrix_,t.slice());if(!(s[0]<0||s[0]>n[0]||s[1]<0||s[1]>n[1])){this.hitCanvasContext_||(this.hitCanvasContext_=Ct.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),s[0],s[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return a[3]>0?i.call(o,this.getLayer(),a):void 0}}},Ff.prototype.getHitTransformationMatrix_=function(t,e){var i=Wo.create();Wo.translate(i,-1,-1),Wo.scale(i,2/t[0],2/t[1]),Wo.translate(i,0,t[1]),Wo.scale(i,1,-1);var o=Wo.invert(this.projectionMatrix.slice()),r=Wo.create();return Wo.translate(r,0,e[1]),Wo.scale(r,1,-1),Wo.scale(r,e[0]/2,e[1]/2),Wo.translate(r,1,1),Wo.multiply(r,o),Wo.multiply(r,i),r};var Nf=Ff,Df=function(t,e){$u.call(this,t,e),this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=Cs.CLASS_UNSELECTABLE,t.insertBefore(this.canvas_,t.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=Ct.createCanvasContext2D(),this.renderedVisible_=!0,this.gl_=ms.getContext(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new Qc(this.canvas_,this.gl_),vt.listen(this.canvas_,Zc.LOST,this.handleWebGLContextLost,this),vt.listen(this.canvas_,Zc.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new Mt,this.focus_=null,this.tileTextureQueue_=new kp(function(t){var e=t[1],i=t[2],o=e[0]-this.focus_[0],r=e[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(o*o+r*r)/i}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var i=this.tileTextureQueue_.dequeue(),o=i[0],r=i[3],n=i[4];this.bindTileTexture(o,r,n,ms.LINEAR,ms.LINEAR)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()};C.inherits(Df,$u),Df.handles=function(t){return xs.WEBGL&&t===iu.WEBGL},Df.create=function(t,e){return new Df(t,e)},Df.prototype.bindTileTexture=function(t,e,i,o,r){var n=this.getGL(),s=t.getKey();if(this.textureCache_.containsKey(s)){var a=this.textureCache_.get(s);n.bindTexture(ms.TEXTURE_2D,a.texture),a.magFilter!=o&&(n.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_MAG_FILTER,o),a.magFilter=o),a.minFilter!=r&&(n.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_MIN_FILTER,r),a.minFilter=r)}else{var h=n.createTexture();if(n.bindTexture(ms.TEXTURE_2D,h),i>0){var l=this.clipTileContext_.canvas,p=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(l.width=e[0],l.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):p.clearRect(0,0,e[0],e[1]),p.drawImage(t.getImage(),i,i,e[0],e[1],0,0,e[0],e[1]),n.texImage2D(ms.TEXTURE_2D,0,ms.RGBA,ms.RGBA,ms.UNSIGNED_BYTE,l)}else n.texImage2D(ms.TEXTURE_2D,0,ms.RGBA,ms.RGBA,ms.UNSIGNED_BYTE,t.getImage());n.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_MAG_FILTER,o),n.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_MIN_FILTER,r),n.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_WRAP_S,ms.CLAMP_TO_EDGE),n.texParameteri(ms.TEXTURE_2D,ms.TEXTURE_WRAP_T,ms.CLAMP_TO_EDGE),this.textureCache_.set(s,{texture:h,magFilter:o,minFilter:r})}},Df.prototype.dispatchComposeEvent_=function(t,e){var i=this.getMap();if(i.hasListener(t)){var o=this.context_,r=e.extent,n=e.size,s=e.viewState,a=e.pixelRatio,h=s.resolution,l=s.center,p=s.rotation,u=new Pf(o,l,h,p,n,r,a),c=new Nu(t,u,e,null,o);i.dispatchEvent(c)}},Df.prototype.disposeInternal=function(){var t=this.getGL();t.isContextLost()||this.textureCache_.forEach(function(e){e&&t.deleteTexture(e.texture)}),this.context_.dispose(),$u.prototype.disposeInternal.call(this)},Df.prototype.expireCache_=function(t,e){for(var i,o=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>C.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK;){if(i=this.textureCache_.peekLast())o.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},Df.prototype.getContext=function(){return this.context_},Df.prototype.getGL=function(){return this.gl_},Df.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},Df.prototype.getType=function(){return iu.WEBGL},Df.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var i in e){e[i].handleWebGLContextLost()}},Df.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},Df.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(ms.TEXTURE0),t.blendFuncSeparate(ms.SRC_ALPHA,ms.ONE_MINUS_SRC_ALPHA,ms.ONE,ms.ONE_MINUS_SRC_ALPHA),t.disable(ms.CULL_FACE),t.disable(ms.DEPTH_TEST),t.disable(ms.SCISSOR_TEST),t.disable(ms.STENCIL_TEST)},Df.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},Df.prototype.renderFrame=function(t){var e=this.getContext(),i=this.getGL();if(i.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(Dh.PRECOMPOSE,t);var o=[],r=t.layerStatesArray;Xt.stableSort(r,$u.sortByZIndex);var n,s,a,h=t.viewState.resolution;for(n=0,s=r.length;n<s;++n)a=r[n],kh.visibleAtResolution(a,h)&&a.sourceState==pt.READY&&this.getLayerRenderer(a.layer).prepareFrame(t,a,e)&&o.push(a);var l=t.size[0]*t.pixelRatio,p=t.size[1]*t.pixelRatio;for(this.canvas_.width==l&&this.canvas_.height==p||(this.canvas_.width=l,this.canvas_.height=p),i.bindFramebuffer(ms.FRAMEBUFFER,null),i.clearColor(0,0,0,0),i.clear(ms.COLOR_BUFFER_BIT),i.enable(ms.BLEND),i.viewport(0,0,this.canvas_.width,this.canvas_.height),n=0,s=o.length;n<s;++n)a=o[n],this.getLayerRenderer(a.layer).composeFrame(t,a,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>C.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_(Dh.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},Df.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r,n,s){var a;if(this.getGL().isContextLost())return!1;var h,l=e.viewState,p=e.layerStatesArray;for(h=p.length-1;h>=0;--h){var u=p[h],c=u.layer;if(kh.visibleAtResolution(u,l.resolution)&&n.call(s,c))if(a=this.getLayerRenderer(c).forEachFeatureAtCoordinate(t,e,i,o,r))return a}},Df.prototype.hasFeatureAtCoordinate=function(t,e,i,o,r){var n=!1;if(this.getGL().isContextLost())return!1;var s,a=e.viewState,h=e.layerStatesArray;for(s=h.length-1;s>=0;--s){var l=h[s],p=l.layer;if(kh.visibleAtResolution(l,a.resolution)&&o.call(r,p))if(n=this.getLayerRenderer(p).hasFeatureAtCoordinate(t,e))return!0}return n},Df.prototype.forEachLayerAtPixel=function(t,e,i,o,r,n){if(this.getGL().isContextLost())return!1;var s,a,h=e.viewState,l=e.layerStatesArray;for(a=l.length-1;a>=0;--a){var p=l[a],u=p.layer;if(kh.visibleAtResolution(p,h.resolution)&&r.call(o,u))if(s=this.getLayerRenderer(u).forEachLayerAtPixel(t,e,i,o))return s}};var jf=Df,kf={};kf.fragment=new Ac(C.DEBUG_WEBGL?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),kf.vertex=new Fc(C.DEBUG_WEBGL?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}");var Gf=kf,Uf=function(t,e){this.u_tileOffset=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_tileOffset":"d"),this.u_texture=t.getUniformLocation(e,C.DEBUG_WEBGL?"u_texture":"e"),this.a_position=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,C.DEBUG_WEBGL?"a_texCoord":"c")},Bf=function(t,e){Of.call(this,t,e),this.fragmentShader_=Gf.fragment,this.vertexShader_=Gf.vertex,this.locations_=null,this.renderArrayBuffer_=new Yc([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]};C.inherits(Bf,Of),Bf.handles=function(t,e){return t===iu.WEBGL&&e.getType()===Ah.TILE},Bf.create=function(t,e){return new Bf(t,e)},Bf.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),Of.prototype.disposeInternal.call(this)},Bf.prototype.createLoadedTileFinder=function(t,e,i){var o=this.mapRenderer;return function(r,n){return t.forEachLoadedTile(e,r,n,function(t){var e=o.isTileTextureLoaded(t);return e&&(i[r]||(i[r]={}),i[r][t.tileCoord.toString()]=t),e})}},Bf.prototype.handleWebGLContextLost=function(){Of.prototype.handleWebGLContextLost.call(this),this.locations_=null},Bf.prototype.prepareFrame=function(t,e,i){var o,r=this.mapRenderer,n=i.getGL(),s=t.viewState,a=s.projection,h=this.getLayer(),l=h.getSource(),p=l.getTileGridForProjection(a),u=p.getZForResolution(s.resolution),c=p.getResolution(u),f=l.getTilePixelSize(u,t.pixelRatio,a),d=f[0]/Ut.toSize(p.getTileSize(u),this.tmpSize_)[0],y=c/d,g=l.getTilePixelRatio(d)*l.getGutter(a),v=s.center,m=t.extent,_=p.getTileRangeForExtentAndZ(m,u);if(this.renderedTileRange_&&this.renderedTileRange_.equals(_)&&this.renderedRevision_==l.getRevision())o=this.renderedFramebufferExtent_;else{var b=_.getSize(),x=Math.max(b[0]*f[0],b[1]*f[1]),E=A.roundUpToPowerOfTwo(x),S=y*E,T=p.getOrigin(u),w=T[0]+_.minX*f[0]*y,C=T[1]+_.minY*f[1]*y;o=[w,C,w+S,C+S],this.bindFramebuffer(t,E),n.viewport(0,0,E,E),n.clearColor(0,0,0,0),n.clear(ms.COLOR_BUFFER_BIT),n.disable(ms.BLEND);var R=i.getProgram(this.fragmentShader_,this.vertexShader_);i.useProgram(R),this.locations_||(this.locations_=new Uf(n,R)),i.bindBuffer(ms.ARRAY_BUFFER,this.renderArrayBuffer_),n.enableVertexAttribArray(this.locations_.a_position),n.vertexAttribPointer(this.locations_.a_position,2,ms.FLOAT,!1,16,0),n.enableVertexAttribArray(this.locations_.a_texCoord),n.vertexAttribPointer(this.locations_.a_texCoord,2,ms.FLOAT,!1,16,8),n.uniform1i(this.locations_.u_texture,0);var P={};P[u]={};var I,M,L,O,F,N,D=this.createLoadedTileFinder(l,a,P),j=h.getUseInterimTilesOnError(),k=!0,G=U.createEmpty(),B=new Vt(0,0,0,0);for(O=_.minX;O<=_.maxX;++O)for(F=_.minY;F<=_.maxY;++F)if(M=l.getTile(u,O,F,d,a),void 0===e.extent||(N=p.getTileCoordExtent(M.tileCoord,G),U.intersects(N,e.extent))){if((L=M.getState())==ut.LOADED||L==ut.EMPTY||L==ut.ERROR&&!j||(M=M.getInterimTile()),(L=M.getState())==ut.LOADED){if(r.isTileTextureLoaded(M)){P[u][M.tileCoord.toString()]=M;continue}}else if(L==ut.EMPTY||L==ut.ERROR&&!j)continue;k=!1,p.forEachTileCoordParentTileRange(M.tileCoord,D,null,B,G)||(I=p.getTileCoordChildTileRange(M.tileCoord,B,G))&&D(u+1,I)}var V=Object.keys(P).map(Number);V.sort(Xt.numberSafeCompareFunction);var W,X,Y,z,K=new Float32Array(4);for(W=0,X=V.length;W<X;++W)for(Y in z=P[V[W]])M=z[Y],N=p.getTileCoordExtent(M.tileCoord,G),K[0]=2*(N[2]-N[0])/S,K[1]=2*(N[3]-N[1])/S,K[2]=2*(N[0]-o[0])/S-1,K[3]=2*(N[1]-o[1])/S-1,n.uniform4fv(this.locations_.u_tileOffset,K),r.bindTileTexture(M,f,g*d,ms.LINEAR,ms.LINEAR),n.drawArrays(ms.TRIANGLE_STRIP,0,4);k?(this.renderedTileRange_=_,this.renderedFramebufferExtent_=o,this.renderedRevision_=l.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,l,u,_);var H=r.getTileTextureQueue();this.manageTilePyramid(t,l,p,d,a,m,u,h.getPreload(),function(t){t.getState()!=ut.LOADED||r.isTileTextureLoaded(t)||H.isKeyQueued(t.getKey())||H.enqueue([t,p.getTileCoordCenter(t.tileCoord),p.getResolution(t.tileCoord[0]),f,g*d])},this),this.scheduleExpireCache(t,l),this.updateLogos(t,l);var $=this.texCoordMatrix;return Wo.reset($),Wo.translate($,(Math.round(v[0]/c)*c-o[0])/(o[2]-o[0]),(Math.round(v[1]/c)*c-o[1])/(o[3]-o[1])),0!==s.rotation&&Wo.rotate($,s.rotation),Wo.scale($,t.size[0]*s.resolution/(o[2]-o[0]),t.size[1]*s.resolution/(o[3]-o[1])),Wo.translate($,-.5,-.5),!0},Bf.prototype.forEachLayerAtPixel=function(t,e,i,o){if(this.framebuffer){var r=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],n=Wo.apply(this.texCoordMatrix,r.slice()),s=[n[0]*this.framebufferDimension,n[1]*this.framebufferDimension],a=this.mapRenderer.getContext().getGL();a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);var h=new Uint8Array(4);return a.readPixels(s[0],s[1],1,1,a.RGBA,a.UNSIGNED_BYTE,h),h[3]>0?i.call(o,this.getLayer(),h):void 0}};var Vf=Bf,Wf=function(t,e){Of.call(this,t,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=U.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null};C.inherits(Wf,Of),Wf.handles=function(t,e){return t===iu.WEBGL&&e.getType()===Ah.VECTOR},Wf.create=function(t,e){return new Wf(t,e)},Wf.prototype.composeFrame=function(t,e,i){this.layerState_=e;var o=t.viewState,r=this.replayGroup_,n=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();r&&!r.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,n[0]*s,n[1]*s),r.replay(i,o.center,o.resolution,o.rotation,n,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},Wf.prototype.disposeInternal=function(){var t=this.replayGroup_;if(t){var e=this.mapRenderer.getContext();t.getDeleteResourcesFunction(e)(),this.replayGroup_=null}Of.prototype.disposeInternal.call(this)},Wf.prototype.forEachFeatureAtCoordinate=function(t,e,i,o,r){if(this.replayGroup_&&this.layerState_){var n=this.mapRenderer.getContext(),s=e.viewState,a=this.getLayer(),h=this.layerState_,l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,n,s.center,s.resolution,s.rotation,e.size,e.pixelRatio,h.opacity,{},function(t){var e=C.getUid(t).toString();if(!(e in l))return l[e]=!0,o.call(r,t,a)})}},Wf.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){var i=this.mapRenderer.getContext(),o=e.viewState,r=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,i,o.center,o.resolution,o.rotation,e.size,e.pixelRatio,r.opacity,e.skippedFeatureUids)}return!1},Wf.prototype.forEachLayerAtPixel=function(t,e,i,o){var r=Wo.apply(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(r,e)?i.call(o,this.getLayer(),null):void 0},Wf.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},Wf.prototype.prepareFrame=function(t,e,i){var o=this.getLayer(),r=o.getSource();this.updateLogos(t,r);var n=t.viewHints[Kp.ANIMATING],s=t.viewHints[Kp.INTERACTING],a=o.getUpdateWhileAnimating(),h=o.getUpdateWhileInteracting();if(!this.dirty_&&!a&&n||!h&&s)return!0;var l=t.extent,p=t.viewState,u=p.projection,c=p.resolution,f=t.pixelRatio,d=o.getRevision(),y=o.getRenderBuffer(),g=o.getRenderOrder();void 0===g&&(g=Sc.defaultOrder);var v=U.buffer(l,y*c);if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==g&&U.containsExtent(this.renderedExtent_,v))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(i)),this.dirty_=!1;var m=new Cf(Sc.getTolerance(c,f),v,o.getRenderBuffer());r.loadFeatures(v,c,u);var _=function(t){var e,i=t.getStyleFunction();if(i?e=i.call(t,c):(i=o.getStyleFunction())&&(e=i(t,c)),e){var r=this.renderFeature(t,c,f,e,m);this.dirty_=this.dirty_||r}};if(g){var b=[];r.forEachFeatureInExtent(v,function(t){b.push(t)},this),b.sort(g),b.forEach(_,this)}else r.forEachFeatureInExtent(v,_,this);return m.finish(i),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=g,this.renderedExtent_=v,this.replayGroup_=m,!0},Wf.prototype.renderFeature=function(t,e,i,o,r){if(!o)return!1;var n=!1;if(Array.isArray(o))for(var s=o.length-1;s>=0;--s)n=Sc.renderFeature(r,t,o[s],Sc.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||n;else n=Sc.renderFeature(r,t,o,Sc.getSquaredTolerance(e,i),this.handleStyleImageChange_,this)||n;return n};var Xf=Wf;C.ENABLE_CANVAS&&(eu.register(Qp.MAP_RENDERER,Zu),eu.registerMultiple(Qp.LAYER_RENDERER,[Ku,Qu,wc,Pc])),C.ENABLE_WEBGL&&(eu.register(Qp.MAP_RENDERER,jf),eu.registerMultiple(Qp.LAYER_RENDERER,[Nf,Vf,Xf]));var Yf=function(t){(t=nt.assign({},t)).controls||(t.controls=mp.defaults()),t.interactions||(t.interactions=Lu.defaults()),ru.call(this,t)};C.inherits(Yf,ru);var zf=Yf,Kf={methods:{getInteractionsTarget:function(){throw new Error("Not implemented method")},addInteraction:function(t){ti(t=t instanceof E.a?t.$interaction:t,Ih),!1===this.getInteractionsTarget().has(t)&&(this.getInteractionsTarget().add(t),this.sortInteractions())},removeInteraction:function(t){(t=t instanceof E.a?t.$interaction:t)&&this.getInteractionsTarget().has(t)&&(this.getInteractionsTarget().remove(t),this.sortInteractions())},getInteractions:function(){return this.getInteractionsTarget().elements},getInteractionById:function(t){return this.getInteractionsTarget().findByKey(t)},sortInteractions:function(t){t||(t=this.getDefaultInteractionsSorter()),this.getInteractionsTarget().sort(t)},getDefaultInteractionsSorter:function(){return function(){return 0}},clearInteractions:function(){this.getInteractionsTarget().clear()},getServices:function(){var t=this;return{get interactionsContainer(){return t}}}},destroyed:function(){this.clearInteractions()}},Hf={methods:{getLayersTarget:function(){throw new Error("Not implemented method")},addLayer:function(t){ti(t=t instanceof E.a?t.$layer:t,kh),!1===this.getLayersTarget().has(t)&&this.getLayersTarget().add(t)},removeLayer:function(t){(t=t instanceof E.a?t.$layer:t)&&this.getLayersTarget().has(t)&&this.getLayersTarget().remove(t)},getLayers:function(){return this.getLayersTarget().elements},getLayerById:function(t){return this.getLayersTarget().findByKey(t)},clearLayers:function(){this.getLayersTarget().clear()},getServices:function(){var t=this;return{get layersContainer(){return t}}}},destroyed:function(){this.clearLayers()}},$f={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},qf=function(t){ee.call(this),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+Cs.CLASS_SELECTABLE,this.element.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.autoPanAnimation=t.autoPanAnimation||{},this.autoPanMargin=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,vt.listen(this,ee.getChangeEventType(qf.Property.ELEMENT),this.handleElementChanged,this),vt.listen(this,ee.getChangeEventType(qf.Property.MAP),this.handleMapChanged,this),vt.listen(this,ee.getChangeEventType(qf.Property.OFFSET),this.handleOffsetChanged,this),vt.listen(this,ee.getChangeEventType(qf.Property.POSITION),this.handlePositionChanged,this),vt.listen(this,ee.getChangeEventType(qf.Property.POSITIONING),this.handlePositioningChanged,this),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(void 0!==t.positioning?t.positioning:$f.TOP_LEFT),void 0!==t.position&&this.setPosition(t.position)};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/C.inherits(qf,ee),qf.prototype.getElement=function(){return this.get(qf.Property.ELEMENT)},qf.prototype.getId=function(){return this.id},qf.prototype.getMap=function(){return this.get(qf.Property.MAP)},qf.prototype.getOffset=function(){return this.get(qf.Property.OFFSET)},qf.prototype.getPosition=function(){return this.get(qf.Property.POSITION)},qf.prototype.getPositioning=function(){return this.get(qf.Property.POSITIONING)},qf.prototype.handleElementChanged=function(){Ct.removeChildren(this.element);var t=this.getElement();t&&this.element.appendChild(t)},qf.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Ct.removeNode(this.element),vt.unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=vt.listen(t,hp.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},qf.prototype.render=function(){this.updatePixelPosition()},qf.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},qf.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(qf.Property.POSITION)&&this.autoPan&&this.panIntoView()},qf.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},qf.prototype.setElement=function(t){this.set(qf.Property.ELEMENT,t)},qf.prototype.setMap=function(t){this.set(qf.Property.MAP,t)},qf.prototype.setOffset=function(t){this.set(qf.Property.OFFSET,t)},qf.prototype.setPosition=function(t){this.set(qf.Property.POSITION,t)},qf.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),o=this.getRect(i,[Ct.outerWidth(i),Ct.outerHeight(i)]),r=this.autoPanMargin;if(!U.containsExtent(e,o)){var n=o[0]-e[0],s=e[2]-o[2],a=o[1]-e[1],h=e[3]-o[3],l=[0,0];if(n<0?l[0]=n-r:s<0&&(l[0]=Math.abs(s)+r),a<0?l[1]=a-r:h<0&&(l[1]=Math.abs(h)+r),0!==l[0]||0!==l[1]){var p=t.getView().getCenter(),u=t.getPixelFromCoordinate(p),c=[u[0]+l[0],u[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(c),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},qf.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),o=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[o,r,o+e[0],r+e[1]]},qf.prototype.setPositioning=function(t){this.set(qf.Property.POSITIONING,t)},qf.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},qf.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(i,o)}else this.setVisible(!1)},qf.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var n=o[0],s=o[1];if(r==$f.BOTTOM_RIGHT||r==$f.CENTER_RIGHT||r==$f.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var a=Math.round(e[0]-t[0]-n)+"px";this.rendered.right_!=a&&(this.rendered.right_=i.right=a)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),r!=$f.BOTTOM_CENTER&&r!=$f.CENTER_CENTER&&r!=$f.TOP_CENTER||(n-=this.element.offsetWidth/2);var h=Math.round(t[0]+n)+"px";this.rendered.left_!=h&&(this.rendered.left_=i.left=h)}if(r==$f.BOTTOM_LEFT||r==$f.BOTTOM_CENTER||r==$f.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var l=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=i.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),r!=$f.CENTER_LEFT&&r!=$f.CENTER_CENTER&&r!=$f.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var p=Math.round(t[1]+s)+"px";this.rendered.top_!=p&&(this.rendered.top_=i.top=p)}},qf.prototype.getOptions=function(){return this.options},qf.Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};var Zf=qf,Jf={methods:{getOverlaysTarget:function(){throw new Error("Not implemented method")},addOverlay:function(t){ti(t=t instanceof E.a?t.$overlay:t,Zf),!1===this.getOverlaysTarget().has(t)&&this.getOverlaysTarget().add(t)},removeOverlay:function(t){(t=t instanceof E.a?t.$overlay:t)&&this.getOverlaysTarget().has(t)&&this.getOverlaysTarget().remove(t)},getOverlays:function(){return this.getOverlaysTarget().elements},getOverlayById:function(t){return this.getOverlaysTarget().findByKey(t)},clearOverlays:function(){this.getOverlaysTarget().clear()},getServices:function(){var t=this;return{get overlaysContainer(){return t}}}},destroyed:function(){this.clearOverlays()}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/function Qf(t,e){return function(t,e){return Jo((i,o)=>e?e(i[t],o[t]):i[t]===o[t])}(t,e)(this)}
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var td={controls:{type:[Object,Boolean],default:!0},keyboardEventTarget:[String,Element,Document],loadTilesWhileAnimating:{type:Boolean,default:!1},loadTilesWhileInteracting:{type:Boolean,default:!1},logo:[String,Object,Element,Boolean],moveTolerance:{type:Number,default:1},pixelRatio:{type:Number,default:function(){return window.devicePixelRatio||1}},renderer:{type:[String,Array],default:function(){return[Ae,Oe]}},tabindex:[String,Number],dataProjection:String},ed={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:[this.$options.name],attrs:{tabindex:this.tabindex}},[this._t("default")],2)},staticRenderFns:[],name:"vl-map",mixins:[To,Hf,Kf,Jf,ah,fa],props:td,computed:{},methods:{createOlObject:function(){var t=new zf({controls:[],loadTilesWhileAnimating:this.loadTilesWhileAnimating,loadTilesWhileInteracting:this.loadTilesWhileInteracting,pixelRatio:this.pixelRatio,renderer:this.renderer,logo:this.logo,keyboardEventTarget:this.keyboardEventTarget,view:this._view});if(this._view=t.getView(),this._defaultLayer.setMap(t),this.controls){var e="object"===fi()(this.controls)?this.controls:void 0;t.getControls().extend(mp.defaults(e).getArray())}return t.set("dataProjection",this.dataProjection),t},getLayersTarget:function(){return ei(this),null==this._layersTarget&&(this._layersTarget=new eh(this.$map.getLayers(),function(t){return t.get("id")})),this._layersTarget},getInteractionsTarget:function(){return ei(this),null==this._interactionsTarget&&(this._interactionsTarget=new eh(this.$map.getInteractions(),function(t){return t.get("id")})),this._interactionsTarget},getDefaultInteractionsSorter:function(){return function(t,e){var i=t.get("priority")||0,o=e.get("priority")||0;return i===o?0:i-o}},getFeaturesTarget:function(){return null==this._featuresTarget&&(this._featuresTarget=new ih(this._defaultLayer.getSource())),this._featuresTarget},getOverlaysTarget:function(){return ei(this),null==this._overlaysTarget&&(this._overlaysTarget=new eh(this.$map.getOverlays(),function(t){return t.getId()})),this._overlaysTarget},getCoordinateFromPixel:function(t){ei(this);var e=this.$map.getCoordinateFromPixel(t);return this.pointToDataProj(e)},getServices:function(){var t=this;return gi(To.methods.getServices.call(this),Hf.methods.getServices.call(this),Kf.methods.getServices.call(this),Jf.methods.getServices.call(this),ah.methods.getServices.call(this),{get map(){return t.$map},get view(){return t.$view},get viewContainer(){return t}})},focus:function(){this.$el.focus()},forEachFeatureAtPixel:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ei(this),this.$map.forEachFeatureAtPixel(t,e,i)},forEachLayerAtPixel:function(t,e,i){return ei(this),this.$map.forEachLayerAtPixel(t,e,void 0,i)},setView:function(t){(t=t instanceof E.a?t.$view:t)!==this._view&&(this._view=t),this.$map&&t!==this.$map.getView()&&this.$map.setView(t)},mount:function(){ei(this),this.$map.setTarget(this.$el),this.subscribeAll(),this.updateSize()},unmount:function(){ei(this),this.unsubscribeAll(),this.$map.setTarget(void 0)},refresh:function(){var t=this;return this.updateSize(),this.render().then(function(){return To.methods.refresh.call(t)})},render:function(){var t=this;return new ui.a(function(e){ei(t),t.$map.once("postrender",function(){return e()}),t.$map.render()})},subscribeAll:function(){(function(){var t,e=this;ei(this),ii(this);var i=(t=ls.call(Bi,cs(this.$map,["click","dblclick","singleclick"]),(t=(t=cs(this.$map,["pointerdrag","pointermove"]),ur).call(t,100),er).call(t,function(t,e){return Object(Ze.i)(t.coordinate,e.coordinate)})),Qi).call(t,function(t){return n()({},t,{coordinate:e.pointToDataProj(t.coordinate)})}),o=cs(this.$map,["movestart","moveend","postrender","precompose","postcompose"]),r=ls.call(Bi,i,o);this.subscribeTo(r,function(t){return e.$emit(t.type,t)})}).call(this)},updateSize:function(){ei(this),this.$map.updateSize()}},watch:{dataProjection:function(t){this.$map&&(this.$map.set("dataProjection",t),this.refresh())}},created:function(){var t=this;this._view=void 0,this._defaultLayer=new Bh({source:new Ya}),li()(this,{$map:{enumerable:!0,get:function(){return t.$olObject}},$view:{enumerable:!0,get:function(){return t._view}}})}};var id={center:{type:Array,default:function(){return[0,0]},validator:function(t){return 2===t.length}},constrainRotation:{type:[Boolean,Number],default:!0},enableRotation:{type:Boolean,default:!0},extent:{type:Array,validator:function(t){return 4===t.length}},maxResolution:Number,minResolution:Number,maxZoom:{type:Number,default:Ie},minZoom:{type:Number,default:0},projection:{type:String,default:Pe},resolution:Number,resolutions:Array,rotation:{type:Number,default:0},zoom:{type:Number,default:0},zoomFactor:{type:Number,default:2}},od={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:[this.$options.name],staticStyle:{display:"none !important"}},[this._t("default",null,{center:this.viewCenter,zoom:this.viewZoom,resolution:this.viewResolution,rotation:this.viewRotation})],2)},staticRenderFns:[],name:"vl-view",mixins:[To,fa],props:id,computed:{viewZoom:function(){return this.rev&&this.$view?Math.round(this.$view.getZoom()):this.zoom},viewRotation:function(){return this.rev&&this.$view?this.$view.getRotation():this.rotation},viewResolution:function(){return this.rev&&this.$view?this.$view.getResolution():this.resolution},viewCenter:function(){if(this.rev&&this.$view)return this.pointToDataProj(this.$view.getCenter())},viewCenterViewProj:function(){if(this.rev&&this.$view)return this.$view.getCenter()},resolvedDataProjection:function(){return Object(Ze.b)(this.$viewContainer&&this.$viewContainer.resolvedDataProjection,this.$options.dataProjection,this.viewProjection)}},methods:{animate:function(){for(var t=this,e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];ii(this);var r=Ze.r;return Object(Ze.k)(i[i.length-1])&&(r=i[i.length-1],i=i.slice(0,i.length-1)),i.forEach(function(e){Array.isArray(e.center)&&(e.center=t.pointToViewProj(e.center))}),new ui.a(function(e){var o;return(o=t.$view).animate.apply(o,no()(i).concat([function(t){r(t),e(t)}]))})},createOlObject:function(){return new qp({center:this.pointToViewProj(this.center),constrainRotation:this.constrainRotation,enableRotation:this.enableRotation,extent:this.extent?this.extentToViewProj(this.extent):void 0,maxResolution:this.maxResolution,minResolution:this.minResolution,maxZoom:this.maxZoom,minZoom:this.minZoom,projection:this.projection,resolution:this.resolution,resolutions:this.resolutions,rotation:this.rotation,zoom:this.zoom,zoomFactor:this.zoomFactor})},fit:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ii(this),Object(Ze.n)(t)?t=this.readGeometryInDataProj(t):t instanceof E.a&&(t=t.$geometry);var o=i.callback||Ze.r;return new ui.a(function(r){e.$view.fit(t,n()({},i,{callback:function(t){o(t),r(t)}}))})},mount:function(){this.$viewContainer&&this.$viewContainer.setView(this),this.subscribeAll()},unmount:function(){this.unsubscribeAll(),this.$viewContainer&&this.$viewContainer.setView(void 0)},subscribeAll:function(){(function(){var t,e=this;ii(this);var i=Ll(this.$view,"resolution",!0,0),o=(t=Qi.call(i,function(){return{prop:"zoom",value:Math.round(e.$view.getZoom())}}),Qf).call(t,"value"),r=ls.call(Bi,Ll(this.$view,"center",!0,0,function(){return e.pointToDataProj(e.$view.getCenter())}),Ll(this.$view,"rotation",!0,0),i,o);this.subscribeTo(r,function(t){var i=t.prop,o=t.value;++e.rev,e.$emit("update:"+i,o)})}).call(this)}},watch:{center:function(t){this.$view&&!Object(Ze.i)(t,this.viewCenter)&&this.$view.setCenter(this.pointToViewProj(t))},resolution:function(t){this.$view&&t!==this.viewResolution&&this.$view.setResolution(t)},zoom:function(t){t=Math.round(t),this.$view&&t!==this.viewZoom&&this.$view.setZoom(t)},rotation:function(t){this.$view&&t!==this.viewRotation&&this.$view.setRotation(t)},minZoom:function(t){this.$view&&t!==this.$view.getMinZoom()&&this.$view.setMinZoom(t)},maxZoom:function(t){this.$view&&t!==this.$view.getMaxZoom()&&this.$view.setMaxZoom(t)},resolvedDataProjection:function(){this.$view&&this.$view.setCenter(this.pointToViewProj(this.center))}},stubVNode:{empty:function(){return this.$options.name}},created:function(){var t=this;li()(this,{$view:{enumerable:!0,get:function(){return t.$olObject}},$viewContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.viewContainer}}})}};var rd={Map:ed,View:od,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(ed,e),Fo()(od,e),t.component(ed.name,ed),t.component(od.name,od)}},nd=function(t){var e=t||{},i=void 0!==e.projection?e.projection:"EPSG:3857",o=void 0!==e.tileGrid?e.tileGrid:Ht.createXYZ({extent:Ht.extentFromProjection(i),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});pe.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:e.opaque,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};C.inherits(nd,pe);var sd=nd,ad={mixins:[Lo],methods:{createSource:function(){return new sd({attributions:this.attributions,cacheSize:this.cacheSize,crossOrigin:this.crossOrigin,maxZoom:this.maxZoom,minZoom:this.minZoom,opaque:this.opaque,projection:this.projection,reprojectionErrorThreshold:this.reprojectionErrorThreshold,tileGrid:this._tileGrid,tilePixelRatio:this.tilePixelRatio,tileUrlFunction:this.createUrlFunc(),tileLoadFunction:this.tileLoadFunction,wrapX:this.wrapX,transition:this.transition})}},watch:{}},hd='&copy; <a href="https://www.mapbox.com/" target="_blank">MapBox</a>, '+(new Date).getFullYear(),ld={name:"vl-source-mapbox",mixins:[ad],props:{accessToken:{type:String,required:!0},attributions:{type:[String,Array],default:hd},mapId:{type:String,required:!0},projection:{type:String,default:Pe},tileFormat:{type:String,default:"png"},url:{type:String,default:"https://{a-c}.tiles.mapbox.com/v4/{mapId}/{z}/{x}/{y}{tileNameSuffix}.{tileFormat}?access_token={accessToken}"}},computed:{tileNameSuffix:function(){return(t=function(t){return(t=Object(Ze.b)(t,1))>1?2:1}(t=this.tilePixelRatio))>1?["@",t,"x"].join(""):"";var t},urlTokens:function(){return["mapId","accessToken","tileNameSuffix","tileFormat"]}}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var pd={Source:ld,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(ld,e),t.component(ld.name,ld)}},ud={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},cd=function(t){var e;if(Lh.call(this,{handleDownEvent:cd.handleDownEvent_,handleDragEvent:cd.handleDragEvent_,handleEvent:cd.handleEvent,handleUpEvent:cd.handleUpEvent_}),this.condition_=t.condition?t.condition:_h.primaryAction,this.defaultDeleteCondition_=function(t){return _h.altKeyOnly(t)&&_h.singleClick(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:_h.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new Wa,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Bh({source:new Ya({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:cd.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,e=new Aa(this.source_.getFeatures()),vt.listen(this.source_,Ga.ADDFEATURE,this.handleSourceAdd_,this),vt.listen(this.source_,Ga.REMOVEFEATURE,this.handleSourceRemove_,this)):e=t.features,!e)throw new Error("The modify interaction requires features or a source");this.features_=e,this.features_.forEach(this.addFeature_,this),vt.listen(this.features_,Ma.ADD,this.handleFeatureAdd_,this),vt.listen(this.features_,Ma.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null};C.inherits(cd,Lh),cd.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,cd.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,cd.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),vt.listen(t,Et.CHANGE,this.handleFeatureChange_,this)},cd.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new cd.Event(ud.MODIFYSTART,this.features_,t)))},cd.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),vt.unlisten(t,Et.CHANGE,this.handleFeatureChange_,this)},cd.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var o=i.length-1;o>=0;--o)e.remove(i[o])},cd.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Lh.prototype.setActive.call(this,t)},cd.prototype.setMap=function(t){this.overlay_.setMap(t),Lh.prototype.setMap.call(this,t)},cd.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},cd.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},cd.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},cd.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},cd.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},cd.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),o={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),o)},cd.prototype.writeMultiPointGeometry_=function(t,e){var i,o,r,n,s=e.getCoordinates();for(o=0,r=s.length;o<r;++o)n={feature:t,geometry:e,depth:[o],index:o,segment:[i=s[o],i]},this.rBush_.insert(e.getExtent(),n)},cd.prototype.writeLineStringGeometry_=function(t,e){var i,o,r,n,s=e.getCoordinates();for(i=0,o=s.length-1;i<o;++i)n={feature:t,geometry:e,index:i,segment:r=s.slice(i,i+2)},this.rBush_.insert(U.boundingExtent(r),n)},cd.prototype.writeMultiLineStringGeometry_=function(t,e){var i,o,r,n,s,a,h,l=e.getCoordinates();for(n=0,s=l.length;n<s;++n)for(o=0,r=(i=l[n]).length-1;o<r;++o)h={feature:t,geometry:e,depth:[n],index:o,segment:a=i.slice(o,o+2)},this.rBush_.insert(U.boundingExtent(a),h)},cd.prototype.writePolygonGeometry_=function(t,e){var i,o,r,n,s,a,h,l=e.getCoordinates();for(n=0,s=l.length;n<s;++n)for(o=0,r=(i=l[n]).length-1;o<r;++o)h={feature:t,geometry:e,depth:[n],index:o,segment:a=i.slice(o,o+2)},this.rBush_.insert(U.boundingExtent(a),h)},cd.prototype.writeMultiPolygonGeometry_=function(t,e){var i,o,r,n,s,a,h,l,p,u,c=e.getCoordinates();for(a=0,h=c.length;a<h;++a)for(n=0,s=(l=c[a]).length;n<s;++n)for(o=0,r=(i=l[n]).length-1;o<r;++o)u={feature:t,geometry:e,depth:[n,a],index:o,segment:p=i.slice(o,o+2)},this.rBush_.insert(U.boundingExtent(p),u)},cd.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),o={feature:t,geometry:e,index:cd.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX,segment:[i,i]},r={feature:t,geometry:e,index:cd.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX,segment:[i,i]},n=[o,r];o.featureSegments=r.featureSegments=n,this.rBush_.insert(U.createOrUpdateFromCoordinate(i),o),this.rBush_.insert(e.getExtent(),r)},cd.prototype.writeGeometryCollectionGeometry_=function(t,e){var i,o=e.getGeometriesArray();for(i=0;i<o.length;++i)this.SEGMENT_WRITERS_[o[i].getType()].call(this,t,o[i])},cd.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new Vs(new an(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},cd.compareIndexes_=function(t,e){return t.index-e.index},cd.handleDownEvent_=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var o=[],r=i.getGeometry().getCoordinates(),n=U.boundingExtent([r]),s=this.rBush_.getInExtent(n),a={};s.sort(cd.compareIndexes_);for(var h=0,l=s.length;h<l;++h){var p=s[h],u=p.segment,c=C.getUid(p.feature),f=p.depth;if(f&&(c+="-"+f.join("-")),a[c]||(a[c]=new Array(2)),p.geometry.getType()===W.CIRCLE&&p.index===cd.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var d=cd.closestOnSegmentData_(e,p);Ia.equals(d,r)&&!a[c][0]&&(this.dragSegments_.push([p,0]),a[c][0]=p)}else if(Ia.equals(u[0],r)&&!a[c][0])this.dragSegments_.push([p,0]),a[c][0]=p;else if(Ia.equals(u[1],r)&&!a[c][1]){if((p.geometry.getType()===W.LINE_STRING||p.geometry.getType()===W.MULTI_LINE_STRING)&&a[c][0]&&0===a[c][0].index)continue;this.dragSegments_.push([p,1]),a[c][1]=p}else this.insertVertexCondition_(t)&&C.getUid(u)in this.vertexSegments_&&!a[c][0]&&!a[c][1]&&o.push([p,r])}o.length&&this.willModifyFeatures_(t);for(var y=o.length-1;y>=0;--y)this.insertVertex_.apply(this,o[y])}return!!this.vertexFeature_},cd.handleDragEvent_=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,o=this.dragSegments_.length;i<o;++i){for(var r,n=this.dragSegments_[i],s=n[0],a=s.depth,h=s.geometry,l=s.segment,p=n[1];e.length<h.getStride();)e.push(l[p][e.length]);switch(h.getType()){case W.POINT:r=e,l[0]=l[1]=e;break;case W.MULTI_POINT:(r=h.getCoordinates())[s.index]=e,l[0]=l[1]=e;break;case W.LINE_STRING:(r=h.getCoordinates())[s.index+p]=e,l[p]=e;break;case W.MULTI_LINE_STRING:case W.POLYGON:(r=h.getCoordinates())[a[0]][s.index+p]=e,l[p]=e;break;case W.MULTI_POLYGON:(r=h.getCoordinates())[a[1]][a[0]][s.index+p]=e,l[p]=e;break;case W.CIRCLE:l[0]=l[1]=e,s.index===cd.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this.changingFeature_=!0,h.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,h.setRadius(Ia.distance(h.getCenter(),e)),this.changingFeature_=!1)}r&&this.setGeometryCoordinates_(h,r)}this.createOrUpdateVertexFeature_(e)},cd.handleUpEvent_=function(t){for(var e,i,o=this.dragSegments_.length-1;o>=0;--o)if((i=(e=this.dragSegments_[o][0]).geometry).getType()===W.CIRCLE){var r=i.getCenter(),n=e.featureSegments[0],s=e.featureSegments[1];n.segment[0]=n.segment[1]=r,s.segment[0]=s.segment[1]=r,this.rBush_.update(U.createOrUpdateFromCoordinate(r),n),this.rBush_.update(i.getExtent(),s)}else this.rBush_.update(U.boundingExtent(e.segment),e);return this.modified_&&(this.dispatchEvent(new cd.Event(ud.MODIFYEND,this.features_,t)),this.modified_=!1),!1},cd.handleEvent=function(t){return!(t instanceof Ch)||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=vh.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=vh.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==vh.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),Lh.handleEvent.call(this,t)&&!e);var e},cd.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},cd.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),o=U.buffer(U.createOrUpdateFromCoordinate(i),e.getView().getResolution()*this.pixelTolerance_),r=this.rBush_.getInExtent(o);if(r.length>0){r.sort(function(t,e){return cd.pointDistanceToSegmentDataSquared_(i,t)-cd.pointDistanceToSegmentDataSquared_(i,e)});var n=r[0],s=n.segment,a=cd.closestOnSegmentData_(i,n),h=e.getPixelFromCoordinate(a),l=Ia.distance(t,h);if(l<=this.pixelTolerance_){var p={};if(n.geometry.getType()===W.CIRCLE&&n.index===cd.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(a);else{var u,c=e.getPixelFromCoordinate(s[0]),f=e.getPixelFromCoordinate(s[1]),d=Ia.squaredDistance(h,c),y=Ia.squaredDistance(h,f);l=Math.sqrt(Math.min(d,y)),this.snappedToVertex_=l<=this.pixelTolerance_,this.snappedToVertex_&&(a=d>y?s[1]:s[0]),this.createOrUpdateVertexFeature_(a);for(var g=1,v=r.length;g<v&&(u=r[g].segment,Ia.equals(s[0],u[0])&&Ia.equals(s[1],u[1])||Ia.equals(s[0],u[1])&&Ia.equals(s[1],u[0]));++g)p[C.getUid(u)]=!0}return p[C.getUid(s)]=!0,void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},cd.pointDistanceToSegmentDataSquared_=function(t,e){var i=e.geometry;if(i.getType()===W.CIRCLE){var o=i;if(e.index===cd.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var r=Ia.squaredDistance(o.getCenter(),t),n=Math.sqrt(r)-o.getRadius();return n*n}}return Ia.squaredDistanceToSegment(t,e.segment)},cd.closestOnSegmentData_=function(t,e){var i=e.geometry;return i.getType()===W.CIRCLE&&e.index===cd.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX?i.getClosestPoint(t):Ia.closestOnSegment(t,e.segment)},cd.prototype.insertVertex_=function(t,e){for(var i,o=t.segment,r=t.feature,n=t.geometry,s=t.depth,a=t.index;e.length<n.getStride();)e.push(0);switch(n.getType()){case W.MULTI_LINE_STRING:case W.POLYGON:(i=n.getCoordinates())[s[0]].splice(a+1,0,e);break;case W.MULTI_POLYGON:(i=n.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case W.LINE_STRING:(i=n.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(n,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(n,a,s,1);var l={segment:[o[0],e],feature:r,geometry:n,depth:s,index:a};h.insert(U.boundingExtent(l.segment),l),this.dragSegments_.push([l,1]);var p={segment:[e,o[1]],feature:r,geometry:n,depth:s,index:a+1};h.insert(U.boundingExtent(p.segment),p),this.dragSegments_.push([p,0]),this.ignoreNextSingleClick_=!0},cd.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=vh.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new cd.Event(ud.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},cd.prototype.removeVertex_=function(){var t,e,i,o,r,n,s,a,h,l,p,u=this.dragSegments_,c={},f=!1;for(r=u.length-1;r>=0;--r)l=(i=u[r])[0],p=C.getUid(l.feature),l.depth&&(p+="-"+l.depth.join("-")),p in c||(c[p]={}),0===i[1]?(c[p].right=l,c[p].index=l.index):1==i[1]&&(c[p].left=l,c[p].index=l.index+1);for(p in c){switch(h=c[p].right,s=c[p].left,a=(n=c[p].index)-1,l=void 0!==s?s:h,a<0&&(a=0),t=e=(o=l.geometry).getCoordinates(),f=!1,o.getType()){case W.MULTI_LINE_STRING:e[l.depth[0]].length>2&&(e[l.depth[0]].splice(n,1),f=!0);break;case W.LINE_STRING:e.length>2&&(e.splice(n,1),f=!0);break;case W.MULTI_POLYGON:t=t[l.depth[1]];case W.POLYGON:(t=t[l.depth[0]]).length>4&&(n==t.length-1&&(n=0),t.splice(n,1),f=!0,0===n&&(t.pop(),t.push(t[0]),a=t.length-1))}if(f){this.setGeometryCoordinates_(o,e);var d=[];if(void 0!==s&&(this.rBush_.remove(s),d.push(s.segment[0])),void 0!==h&&(this.rBush_.remove(h),d.push(h.segment[1])),void 0!==s&&void 0!==h){var y={depth:l.depth,feature:l.feature,geometry:l.geometry,index:a,segment:d};this.rBush_.insert(U.boundingExtent(y.segment),y)}this.updateSegmentIndices_(o,n,l.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),u.length=0}}return f},cd.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},cd.prototype.updateSegmentIndices_=function(t,e,i,o){this.rBush_.forEachInExtent(t.getExtent(),function(r){r.geometry===t&&(void 0===i||void 0===r.depth||Xt.equals(r.depth,i))&&r.index>e&&(r.index+=o)})},cd.getDefaultStyleFunction=function(){var t=Us.createDefaultEditing();return function(e,i){return t[W.POINT]}},cd.Event=function(t,e,i){_t.call(this,t),this.features=e,this.mapBrowserEvent=i},C.inherits(cd.Event,_t);var fd=cd,dd={source:{type:String,required:!0},condition:{type:Function,default:_h.primaryAction},deleteCondition:{type:Function,default:_h.altKeyOnly},insertVertexCondition:{type:Function,default:_h.always},pixelTolerance:{type:Number,default:10},wrapX:{type:Boolean,default:!1}},yd={createInteraction:function(){var t=this;return bi()(mi.a.mark(function e(){var i,o,r;return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.makeIdent(t.source),e.next=3,t.$identityMap.get(i,t.$options.INSTANCE_PROMISE_POOL);case 3:return o=e.sent,Object(Ze.k)(o.getFeatures)&&na(r=o.getFeatures())&&(o=r),e.abrupt("return",new fd({source:sa(o)?o:void 0,features:na(o)?o:void 0,deleteCondition:t.deleteCondition,insertVertexCondition:t.insertVertexCondition,pixelTolerance:t.pixelTolerance,style:t.createStyleFunc(),wrapX:t.wrapX}));case 6:case"end":return e.stop()}},e,t)}))()},getDefaultStyles:function(){var t=Object(Ze.q)(hl(),function(t){return t.map(pl)});return function(e){if(e.getGeometry())return t[e.getGeometry().getType()]}},getServices:function(){return gi(Yh.methods.getServices.call(this),zh.methods.getServices.call(this))},getStyleTarget:function(){return this.$interaction},mount:function(){Yh.methods.mount.call(this)},unmount:function(){Yh.methods.unmount.call(this)},setStyle:function(t){t!==this._styles&&(this._styles=t,this.refresh())},subscribeAll:function(){(function(){var t=this;si(this);var e=cs(this.$interaction,["modifystart","modifyend"]);this.subscribeTo(e,function(e){++t.rev,t.$emit(e.type,e)})}).call(this)}},gd=Ao(["source"],function(){this.recreate()}),vd={name:"vl-interaction-modify",mixins:[Yh,zh],props:dd,methods:yd,watch:gd};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var md={Interaction:vd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(vd,e),t.component(vd.name,vd)}},_d={name:"vl-geom-multi-line-string",mixins:[ga],props:{},computed:{type:Object(Ze.c)(Fe.MULTI_LINE_STRING)},methods:{createGeometry:function(){return new nn(this.toViewProj(this.coordinates))}}},bd={Geom:_d,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(_d,e),t.component(_d.name,_d)}},xd={name:"vl-geom-multi-point",mixins:[ga],props:{},computed:{type:Object(Ze.c)(Fe.MULTI_POINT)},methods:{createGeometry:function(){return new ln(this.toViewProj(this.coordinates))}}},Ed={Geom:xd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(xd,e),t.component(xd.name,xd)}},Sd={name:"vl-geom-multi-polygon",mixins:[ga],props:{},computed:{type:Object(Ze.c)(Fe.MULTI_POLYGON)},methods:{createGeometry:function(){return new Cn(this.toViewProj(this.coordinates))}}},Td={Geom:Sd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Sd,e),t.component(Sd.name,Sd)}},wd=function(t){var e,i=t||{};e=void 0!==i.attributions?i.attributions:[wd.ATTRIBUTION];var o=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",r=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";sd.call(this,{attributions:e,cacheSize:i.cacheSize,crossOrigin:o,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:r,wrapX:i.wrapX})};C.inherits(wd,sd),wd.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.';var Cd=wd,Rd={name:"vl-source-osm",mixins:[ad],props:{attributions:{type:[String,Array],default:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'},maxZoom:{type:Number,default:19},url:{type:String,default:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},methods:{createSource:function(){return new Cd({url:this.urlTmpl,attributions:this.attributions,crossOrigin:this.crossOrigin,maxZoom:this.maxZoom,cacheSize:this.cacheSize,opaque:this.opaque,reprojectionErrorThreshold:this.reprojectionErrorThreshold,wrapX:this.wrapX,transition:this.transition})}}},Pd={Source:Rd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Rd,e),t.component(Rd.name,Rd)}},Id={id:{type:[String,Number],default:function(){return rh()()}},offset:{type:Array,default:function(){return[0,0]},validator:function(t){return 2===t.length}},position:{type:Array,validator:function(t){return 2===t.length},required:!0},positioning:{type:String,default:De.TOP_LEFT,validator:function(t){return gh()(De).includes(t)}},stopEvent:{type:Boolean,default:!0},insertFirst:{type:Boolean,default:!0},autoPan:{type:Boolean,default:!1},autoPanMargin:{type:Number,default:20},autoPanAnimation:Object},Md={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.$options.name,staticStyle:{display:"none"},attrs:{id:[t.$options.name,t.id].join("-")}},[i("div",[t._t("default",null,{id:t.id,position:t.position,offset:t.offset,positioning:t.positioning})],2)])},staticRenderFns:[],name:"vl-overlay",mixins:[To,Co,fa],props:Id,computed:{positionViewProj:function(){if(this.rev&&this.$overlay)return this.$overlay.getPosition()}},methods:{createOlObject:function(){return new Zf({id:this.id,offset:this.offset,position:this.pointToViewProj(this.position),positioning:this.positioning,stopEvent:this.stopEvent,insertFirst:this.insertFirst,autoPan:this.autoPan,autoPanMargin:this.autoPanMargin,autoPanAnimation:this.autoPanAnimation})},mount:function(){ai(this),this.$overlay.setElement(this.$el.children[0]),this.$overlaysContainer&&this.$overlaysContainer.addOverlay(this.$overlay),this.subscribeAll()},unmount:function(){ai(this),this.unsubscribeAll(),this.$overlay.setElement(void 0),this.$overlaysContainer&&this.$overlaysContainer.removeOverlay(this.$overlay)},subscribeAll:function(){(function(){var t=this;ai(this);var e=ls.call(Bi,Ll(this.$overlay,"position",!0,100,function(){return t.pointToDataProj(t.$overlay.getPosition())}),Ll(this.$overlay,["offset","positioning"],!0,100));this.subscribeTo(e,function(e){var i=e.prop,o=e.value;++t.rev,t.$emit("update:"+i,o)})}).call(this)}},watch:{offset:function(t){this.$overlay&&this.$overlay.setOffset(t)},position:function(t){this.$overlay&&this.$overlay.setPosition(this.pointToViewProj(t))},positioning:function(t){this.$overlay&&this.$overlay.setPositioning(t)},resolvedDataProjection:function(){this.$overlay&&this.$overlay.setPosition(this.pointToViewProj(this.position))}},created:function(){var t=this;li()(this,{$overlay:{enumerable:!0,get:function(){return t.$olObject}},$map:{enumerable:!0,get:function(){return t.$services&&t.$services.map}},$view:{enumerable:!0,get:function(){return t.$services&&t.$services.view}},$overlaysContainer:{enumerable:!0,get:function(){return t.$services&&t.$services.overlaysContainer}}})}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var Ld={Overlay:Md,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Md,e),t.component(Md.name,Md)}},Ad={name:"vl-geom-point",mixins:[ga],props:{coordinates:{type:Array,required:!0,validator:function(t){return 2===t.length}}},computed:{type:Object(Ze.c)(Fe.POINT)},methods:{createGeometry:function(){return new an(this.toViewProj(this.coordinates))}}},Od={Geom:Ad,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Ad,e),t.component(Ad.name,Ad)}},Fd={name:"vl-geom-polygon",mixins:[ga],props:{},computed:{type:Object(Ze.c)(Fe.POLYGON)},methods:{createGeometry:function(){return new xn(this.toViewProj(this.coordinates))}}},Nd={Geom:Fd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Fd,e),t.component(Fd.name,Fd)}},Dd={points:{type:Number,required:!0},radius:Number,radius1:Number,radius2:Number,angle:{type:Number,default:0},rotation:{type:Number,default:0},rotateWithView:{type:Boolean,default:!1}},jd={name:"vl-style-reg-shape",mixins:[xa,Ea],props:Dd,methods:{createStyle:function(){return As({points:this.points,radius:this.radius,radius1:this.radius1,radius2:this.radius2,angle:this.angle,rotation:this.rotation,rotateWithView:this.rotateWithView,snapToPixel:this.snapToPixel,fill:this._fill,stroke:this._stroke})},getServices:function(){var t=this;return gi(xa.methods.getServices.call(this),{get stylesContainer(){return t}})},setFill:function(t){(t=t instanceof E.a?t.$style:t)!==this._fill&&(this._fill=t,this.refresh())},setStroke:function(t){(t=t instanceof E.a?t.$style:t)!==this._stroke&&(this._stroke=t,this.refresh())}}},kd={Style:jd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(jd,e),t.component(jd.name,jd)}},Gd=function(t){Ih.call(this,{handleEvent:Gd.handleEvent});var e=t||{};this.condition_=e.condition?e.condition:_h.singleClick,this.addCondition_=e.addCondition?e.addCondition:_h.never,this.removeCondition_=e.removeCondition?e.removeCondition:_h.never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:_h.shiftKeyOnly,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:Go.TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0;var i,o=new Bh({source:new Ya({useSpatialIndex:!1,features:e.features,wrapX:e.wrapX}),style:e.style?e.style:Gd.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=o,e.layers)if("function"==typeof e.layers)i=e.layers;else{var r=e.layers;i=function(t){return Xt.includes(r,t)}}else i=Go.TRUE;this.layerFilter_=i,this.featureLayerAssociation_={};var n=this.featureOverlay_.getSource().getFeaturesCollection();vt.listen(n,Ma.ADD,this.addFeature_,this),vt.listen(n,Ma.REMOVE,this.removeFeature_,this)};C.inherits(Gd,Ih),Gd.prototype.addFeatureLayerAssociation_=function(t,e){var i=C.getUid(t);this.featureLayerAssociation_[i]=e},Gd.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},Gd.prototype.getHitTolerance=function(){return this.hitTolerance_},Gd.prototype.getLayer=function(t){var e=C.getUid(t);return this.featureLayerAssociation_[e]},Gd.handleEvent=function(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),o=this.toggleCondition_(t),r=!e&&!i&&!o,n=t.map,s=this.featureOverlay_.getSource().getFeaturesCollection(),a=[],h=[];if(r){var l;for(nt.clear(this.featureLayerAssociation_),n.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return h.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_}),l=s.getLength()-1;l>=0;--l){var p=s.item(l),u=h.indexOf(p);u>-1?h.splice(u,1):(s.remove(p),a.push(p))}0!==h.length&&s.extend(h)}else{var c;for(n.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r))return!e&&!o||Xt.includes(s.getArray(),t)?(i||o)&&Xt.includes(s.getArray(),t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(h.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_}),c=a.length-1;c>=0;--c)s.remove(a[c]);s.extend(h)}return(h.length>0||a.length>0)&&this.dispatchEvent(new Gd.Event(Gd.EventType_.SELECT,h,a,t)),_h.pointerMove(t)},Gd.prototype.setHitTolerance=function(t){this.hitTolerance_=t},Gd.prototype.setMap=function(t){var e=this.getMap(),i=this.featureOverlay_.getSource().getFeaturesCollection();e&&i.forEach(e.unskipFeature,e),Ih.prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&i.forEach(t.skipFeature,t)},Gd.getDefaultStyleFunction=function(){var t=Us.createDefaultEditing();return Xt.extend(t[W.POLYGON],t[W.LINE_STRING]),Xt.extend(t[W.GEOMETRY_COLLECTION],t[W.LINE_STRING]),function(e,i){return e.getGeometry()?t[e.getGeometry().getType()]:null}},Gd.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},Gd.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},Gd.prototype.removeFeatureLayerAssociation_=function(t){var e=C.getUid(t);delete this.featureLayerAssociation_[e]},Gd.Event=function(t,e,i,o){_t.call(this,t),this.selected=e,this.deselected=i,this.mapBrowserEvent=o},C.inherits(Gd.Event,_t),Gd.EventType_={SELECT:"select"};var Ud=Gd,Bd={filter:{type:Function,default:Object(Ze.c)(!0)},hitTolerance:{type:Number,default:0},multi:{type:Boolean,default:!1},features:{type:Array,default:Ze.y},wrapX:{type:Boolean,default:!0},addCondition:{type:Function,default:_h.never},condition:{type:Function,default:_h.singleClick},removeCondition:{type:Function,default:_h.never},toggleCondition:{type:Function,default:_h.shiftKeyOnly}},Vd={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:[this.$options.name],staticStyle:{display:"none !important"}},[this._t("default",null,{features:this.features})],2)},staticRenderFns:[],name:"vl-interaction-select",mixins:[Yh,zh,fa],props:Bd,computed:{},methods:{createInteraction:function(){return new Ud({multi:this.multi,wrapX:this.wrapX,filter:this.filter,style:this.createStyleFunc(),addCondition:this.addCondition,condition:this.condition,removeCondition:this.removeCondition,toggleCondition:this.toggleCondition})},getDefaultStyles:function(){var t=Object(Ze.q)(hl(),function(t){return t.map(pl)});return function(e){if(e.getGeometry())return t[e.getGeometry().getType()]}},getFeatures:function(){return this.$interaction&&this.$interaction.getFeatures().getArray()||[]},getServices:function(){return gi(Yh.methods.getServices.call(this),zh.methods.getServices.call(this))},getStyleTarget:function(){return this.$interaction},mount:function(){Yh.methods.mount.call(this),this.features.forEach(this.select)},unmount:function(){this.unselectAll(),Yh.methods.unmount.call(this)},select:function(t){ei(this),si(this);var e=sh(t);if(!e)throw new Error("Undefined feature id");t instanceof E.a&&(t=t.$feature),this.$features.map(sh).includes(e)||(t instanceof Vs||(t=void 0,Object(Ze.e)(this.$map.getLayers().getArray(),function(i){var o=i.getSource();return o&&Object(Ze.k)(o.getFeatureById)&&(t=o.getFeatureById(e)),!t})),t&&this.$interaction.getFeatures().push(t))},unselect:function(t){si(this);var e=sh(t);if(!e)throw new Error("Undefined feature id");t instanceof E.a&&(t=t.$feature);var i=this.$features.map(sh).findIndex(function(t){return t===e});-1!==i&&this.$interaction.getFeatures().removeAt(i)},setStyle:function(t){t!==this._styles&&(this._styles=t,this.refresh())},refresh:function(){var t=this;return ui.a.all([new ui.a(function(e){if(t.$interaction){var i=t.$interaction.getFeatures();i.once("change",function(){return e()}),i.changed()}else e()}),Yh.methods.refresh.call(this)])},subscribeAll:function(){(function(){var t=this;si(this);var e=cs(this.$interaction,"select");this.subscribeTo(e,function(e){var i=e.selected,o=e.deselected,r=e.mapBrowserEvent;++t.rev,o.forEach(function(e){return t.$emit("unselect",{feature:e,mapBrowserEvent:r})}),i.forEach(function(e){return t.$emit("select",{feature:e,mapBrowserEvent:r})}),t.$emit("update:features",t.$features.map(t.writeFeatureInDataProj.bind(t)))})}).call(this)},unselectAll:function(){si(this),this.$interaction.getFeatures().clear()}},watch:{features:function(t){if(this.$interaction){var e=function(t,e){return sh(t)===sh(e)},i=Object(Ze.d)(t,this.$features,e),o=Object(Ze.d)(this.$features,t,e);i.forEach(this.select),o.forEach(this.unselect)}}},stubVNode:{empty:!1,attrs:function(){return{class:this.$options.name}}},created:function(){li()(this,{$features:{enumerable:!0,get:this.getFeatures}})}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var Wd={Interaction:Vd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Vd,e),t.component(Vd.name,Vd)}},Xd=function(t){Lh.call(this,{handleEvent:Xd.handleEvent_,handleDownEvent:Go.TRUE,handleUpEvent:Xd.handleUpEvent_});var e=t||{};this.source_=e.source?e.source:null,this.vertex_=void 0===e.vertex||e.vertex,this.edge_=void 0===e.edge||e.edge,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.sortByDistance_=Xd.sortByDistance.bind(this),this.rBush_=new Wa,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}};C.inherits(Xd,Lh),Xd.prototype.addFeature=function(t,e){var i=void 0===e||e,o=C.getUid(t),r=t.getGeometry();if(r){var n=this.SEGMENT_WRITERS_[r.getType()];n&&(this.indexedFeaturesExtents_[o]=r.getExtent(U.createEmpty()),n.call(this,t,r))}i&&(this.featureChangeListenerKeys_[o]=vt.listen(t,Et.CHANGE,this.handleFeatureChange_,this))},Xd.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},Xd.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},Xd.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},Xd.prototype.handleFeatureAdd_=function(t){var e;t instanceof Ya.Event?e=t.feature:t instanceof Aa.Event&&(e=t.element),this.addFeature(e)},Xd.prototype.handleFeatureRemove_=function(t){var e;t instanceof Ya.Event?e=t.feature:t instanceof Aa.Event&&(e=t.element),this.removeFeature(e)},Xd.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=C.getUid(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},Xd.prototype.removeFeature=function(t,e){var i=void 0===e||e,o=C.getUid(t),r=this.indexedFeaturesExtents_[o];if(r){var n,s=this.rBush_,a=[];for(s.forEachInExtent(r,function(e){t===e.feature&&a.push(e)}),n=a.length-1;n>=0;--n)s.remove(a[n])}i&&(vt.unlistenByKey(this.featureChangeListenerKeys_[o]),delete this.featureChangeListenerKeys_[o])},Xd.prototype.setMap=function(t){var e=this.getMap(),i=this.featuresListenerKeys_,o=this.getFeatures_();e&&(i.forEach(vt.unlistenByKey),i.length=0,o.forEach(this.forEachFeatureRemove_,this)),Lh.prototype.setMap.call(this,t),t&&(this.features_?i.push(vt.listen(this.features_,Ma.ADD,this.handleFeatureAdd_,this),vt.listen(this.features_,Ma.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push(vt.listen(this.source_,Ga.ADDFEATURE,this.handleFeatureAdd_,this),vt.listen(this.source_,Ga.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_,this))},Xd.prototype.shouldStopEvent=Go.FALSE,Xd.prototype.snapTo=function(t,e,i){var o=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),n=U.boundingExtent([o,r]),s=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(s=s.filter(function(t){return t.feature.getGeometry().getType()!==W.CIRCLE}));var a,h,l,p,u=!1,c=null,f=null;if(s.length>0){this.pixelCoordinate_=e,s.sort(this.sortByDistance_);var d=s[0].segment,y=s[0].feature.getGeometry().getType()===W.CIRCLE;this.vertex_&&!this.edge_?(a=i.getPixelFromCoordinate(d[0]),h=i.getPixelFromCoordinate(d[1]),l=Ia.squaredDistance(t,a),p=Ia.squaredDistance(t,h),Math.sqrt(Math.min(l,p))<=this.pixelTolerance_&&(u=!0,c=l>p?d[1]:d[0],f=i.getPixelFromCoordinate(c))):this.edge_&&(c=y?Ia.closestOnCircle(e,s[0].feature.getGeometry()):Ia.closestOnSegment(e,d),f=i.getPixelFromCoordinate(c),Ia.distance(t,f)<=this.pixelTolerance_&&(u=!0,this.vertex_&&!y&&(a=i.getPixelFromCoordinate(d[0]),h=i.getPixelFromCoordinate(d[1]),l=Ia.squaredDistance(f,a),p=Ia.squaredDistance(f,h),Math.sqrt(Math.min(l,p))<=this.pixelTolerance_&&(c=l>p?d[1]:d[0],f=i.getPixelFromCoordinate(c))))),u&&(f=[Math.round(f[0]),Math.round(f[1])])}return{snapped:u,vertex:c,vertexPixel:f}},Xd.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},Xd.prototype.writeCircleGeometry_=function(t,e){var i,o,r,n,s=xn.fromCircle(e).getCoordinates()[0];for(i=0,o=s.length-1;i<o;++i)n={feature:t,segment:r=s.slice(i,i+2)},this.rBush_.insert(U.boundingExtent(r),n)},Xd.prototype.writeGeometryCollectionGeometry_=function(t,e){var i,o=e.getGeometriesArray();for(i=0;i<o.length;++i){var r=this.SEGMENT_WRITERS_[o[i].getType()];r&&r.call(this,t,o[i])}},Xd.prototype.writeLineStringGeometry_=function(t,e){var i,o,r,n,s=e.getCoordinates();for(i=0,o=s.length-1;i<o;++i)n={feature:t,segment:r=s.slice(i,i+2)},this.rBush_.insert(U.boundingExtent(r),n)},Xd.prototype.writeMultiLineStringGeometry_=function(t,e){var i,o,r,n,s,a,h,l=e.getCoordinates();for(n=0,s=l.length;n<s;++n)for(o=0,r=(i=l[n]).length-1;o<r;++o)h={feature:t,segment:a=i.slice(o,o+2)},this.rBush_.insert(U.boundingExtent(a),h)},Xd.prototype.writeMultiPointGeometry_=function(t,e){var i,o,r,n,s=e.getCoordinates();for(o=0,r=s.length;o<r;++o)n={feature:t,segment:[i=s[o],i]},this.rBush_.insert(e.getExtent(),n)},Xd.prototype.writeMultiPolygonGeometry_=function(t,e){var i,o,r,n,s,a,h,l,p,u,c=e.getCoordinates();for(a=0,h=c.length;a<h;++a)for(n=0,s=(l=c[a]).length;n<s;++n)for(o=0,r=(i=l[n]).length-1;o<r;++o)u={feature:t,segment:p=i.slice(o,o+2)},this.rBush_.insert(U.boundingExtent(p),u)},Xd.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),o={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),o)},Xd.prototype.writePolygonGeometry_=function(t,e){var i,o,r,n,s,a,h,l=e.getCoordinates();for(n=0,s=l.length;n<s;++n)for(o=0,r=(i=l[n]).length-1;o<r;++o)h={feature:t,segment:a=i.slice(o,o+2)},this.rBush_.insert(U.boundingExtent(a),h)},Xd.handleEvent_=function(t){var e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),Lh.handleEvent.call(this,t)},Xd.handleUpEvent_=function(t){var e=nt.getValues(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_,this),this.pendingFeatures_={}),!1},Xd.sortByDistance=function(t,e){return Ia.squaredDistanceToSegment(this.pixelCoordinate_,t.segment)-Ia.squaredDistanceToSegment(this.pixelCoordinate_,e.segment)};var Yd=Xd,zd={source:{type:String,required:!0},edge:{type:Boolean,default:!0},vertex:{type:Boolean,default:!0},pixelTolerance:{type:Number,default:10}},Kd={createInteraction:function(){var t=this;return bi()(mi.a.mark(function e(){var i,o;return mi.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.makeIdent(t.source),e.next=3,t.$identityMap.get(i,t.$options.INSTANCE_PROMISE_POOL);case 3:return o=e.sent,e.abrupt("return",new Yd({source:o}));case 5:case"end":return e.stop()}},e,t)}))()},mount:function(){Yh.methods.mount.call(this)},unmount:function(){Yh.methods.unmount.call(this)},subscribeAll:function(){}},Hd=Ao(["source"],function(){this.recreate()}),$d={name:"vl-interaction-snap",mixins:[Yh],props:zd,methods:Kd,watch:Hd},qd={Interaction:$d,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()($d,e),t.component($d.name,$d)}},Zd='<a href="http://maps.sputnik.ru/" target="_blank">Спутник</a> &copy; <a href="http://rt.ru/" target="_blank">Ростелеком</a>, '+(new Date).getFullYear(),Jd={name:"vl-source-sputnik",mixins:[ad],props:{url:{type:String,default:"http://tiles.maps.sputnik.ru/{z}/{x}/{y}.png?apikey={apikey}"},apiKey:{type:String},attributions:{type:String,default:Zd}},computed:{urlTokens:function(){return["apiKey"]}}},Qd={Source:Jd,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Jd,e),t.component(Jd.name,Jd)}},ty={color:[Array,String],lineCap:{type:String,default:"round"},lineJoin:{type:String,default:"round"},lineDash:Array,lineDashOffset:{type:Number,default:0},miterLimit:{type:Number,default:10},width:{type:Number,default:1.25}},ey={name:"vl-style-stroke",mixins:[_a],props:ty,watch:{color:function(t){this.$style&&(this.$style.setColor(t),this.refresh())},lineCap:function(t){this.$style&&(this.$style.setLineCap(t),this.refresh())},lineDash:function(t){this.$style&&(this.$style.setLineDash(t),this.refresh())},lineJoin:function(t){this.$style&&(this.$style.setLineJoin(t),this.refresh())},width:function(t){this.$style&&(this.$style.setWidth(t),this.refresh())}},methods:{createStyle:function(){return new ks({color:this.color,lineCap:this.lineCap,lineJoin:this.lineJoin,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,miterLimit:this.miterLimit,width:this.width})},mount:function(){this.$stylesContainer&&this.$stylesContainer.setStroke(this)},unmount:function(){this.$stylesContainer&&this.$stylesContainer.setStroke(void 0)}}},iy={Style:ey,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(ey,e),t.component(ey.name,ey)}},oy={zIndex:{type:Number,default:0},condition:{type:[Function,Boolean],default:!0}},ry={name:"vl-style-box",mixins:[_a,Ea],props:oy,methods:{createStyle:function(){return new Us({zIndex:this.zIndex,image:this._image,stroke:this._stroke,fill:this._fill,text:this._text,geometry:this._geometry})},getServices:function(){var t=this;return gi(_a.methods.getServices.call(this),{get stylesContainer(){return t}})},mount:function(){this.$stylesContainer&&this.$stylesContainer.addStyle(this)},unmount:function(){this.$stylesContainer&&this.$stylesContainer.removeStyle(this)},setImage:function(t){(t=t instanceof E.a?t.$style:t)!==this._image&&(this._image=t),this.$style&&t!==this.$style.getImage()&&(this.$style.setImage(t),this.refresh())},setGeometry:function(t){(t=t instanceof E.a?t.$geometry:t)!==this._geometry&&(this._geometry=t),this.$style&&t!==this.$style.getGeometry()&&(this.$style.setGeometry(t),this.refresh())},setText:function(t){(t=t instanceof E.a?t.$style:t)!==this._text&&(this._text=t),this.$style&&t!==this.$style.getText()&&(this.$style.setText(t),this.refresh())}},watch:{zIndex:function(t){this.$style&&(this.$style.setZIndex(t),this.refresh())}},created:function(){this._image=void 0,this._text=void 0,this._geometry=void 0}},ny={Style:ry,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(ry,e),t.component(ry.name,ry)}},sy={factory:{type:Function,required:!0}},ay={name:"vl-style-func",mixins:[_a,zh],props:sy,computed:{styleFunc:function(){var t=this.factory();return Object(Ze.k)(t)||(t=Ze.r),t}},methods:{createStyle:function(){ei(this);var t=this.styleFunc,e=this.createStyleFunc();return function(i,o){var r=t(i,o);return null===r||Array.isArray(r)&&r.length?r:e(i,o)}},mount:function(){this.$stylesContainer&&this.$stylesContainer.addStyle(this)},unmount:function(){this.$stylesContainer&&this.$stylesContainer.removeStyle(this)},getServices:function(){var t=this;return gi(_a.methods.getServices.call(this),{get stylesContainer(){return t}})},setStyle:function(t){t!==this._styles&&(this._styles=t,this.refresh())},refresh:function(){return ui.a.resolve(this.unmount()).then(this.deinit).then(this.init).then(this.mount)}},watch:{factory:function(){this.refresh()}},stubVNode:{empty:!1,attrs:function(){return{class:this.$options.name}}}},hy={Style:ay,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(ay,e),t.component(ay.name,ay)}},ly={font:{type:String,default:"10px sans-serif"},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0},rotateWithView:{type:Boolean,default:!1},rotation:{type:Number,default:0},scale:{type:Number,default:1},text:String,textAlign:{type:String,default:"start"},textBaseline:{type:String,default:"alphabetic"}},py={name:"vl-style-text",mixins:[_a,Ea],props:ly,methods:{createStyle:function(){return new nl({font:this.font,offsetX:this.offsetX,offsetY:this.offsetY,rotateWithView:this.rotateWithView,rotation:this.rotation,scale:this.scale,text:this.text,textAlign:this.textAlign,textBaseline:this.textBaseline,fill:this._fill,stroke:this._stroke})},mount:function(){this.$stylesContainer&&this.$stylesContainer.setText(this)},unmount:function(){this.$stylesContainer&&this.$stylesContainer.setText(void 0)},getServices:function(){var t=this;return gi(_a.methods.getServices.call(this),{get stylesContainer(){return t}})}},watch:{font:function(t){this.$style&&(this.$style.setFont(t),this.refresh())},offsetX:function(t){this.$style&&(this.$style.setOffsetX(t),this.refresh())},offsetY:function(t){this.$style&&(this.$style.setOffsetY(t),this.refresh())},rotation:function(t){this.$style&&(this.$style.setRotation(t),this.refresh())},scale:function(t){this.$style&&(this.$style.setScale(t),this.refresh())},text:function(t){this.$style&&(this.$style.setText(t),this.refresh())},textAlign:function(t){this.$style&&(this.$style.setTextAlign(t),this.refresh())},textBaseline:function(t){this.$style&&(this.$style.setTextBaseline(t),this.refresh())}},stubVNode:{empty:!1,attrs:function(){return{class:this.$options.name}}}},uy={Style:py,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(py,e),t.component(py.name,py)}},cy={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},fy=function(t){var e=t||{},i=nt.assign({},e);delete i.preload,delete i.useInterimTilesOnError,kh.call(this,i),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=Ah.TILE};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/C.inherits(fy,kh),fy.prototype.getPreload=function(){return this.get(cy.PRELOAD)},fy.prototype.getSource,fy.prototype.setPreload=function(t){this.set(cy.PRELOAD,t)},fy.prototype.getUseInterimTilesOnError=function(){return this.get(cy.USE_INTERIM_TILES_ON_ERROR)},fy.prototype.setUseInterimTilesOnError=function(t){this.set(cy.USE_INTERIM_TILES_ON_ERROR,t)};var dy=fy,yy={preload:{type:Number,default:0}},gy={name:"vl-layer-tile",mixins:[Wl],props:yy,methods:{createLayer:function(){return new dy({id:this.id,minResolution:this.minResolution,maxResolution:this.maxResolution,opacity:this.opacity,visible:this.visible,preload:this.preload,extent:this.extent,zIndex:this.zIndex,source:this._source})}}},vy={Layer:gy,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(gy,e),t.component(gy.name,gy)}},my={updateWhileAnimating:Boolean,updateWhileInteracting:Boolean,renderBuffer:{type:Number,default:100},renderOrder:Function,declutter:Boolean},_y={mixins:[Wl,zh],props:my,methods:{init:function(){return Wl.methods.init.call(this)},deinit:function(){return Wl.methods.deinit.call(this)},getServices:function(){return gi(Wl.methods.getServices.call(this),zh.methods.getServices.call(this))},getStyleTarget:function(){return this.$layer},mount:function(){Wl.methods.mount.call(this)},unmount:function(){Wl.methods.unmount.call(this)}}},by=["vector","image"],xy={name:"vl-layer-vector",mixins:[_y],props:{renderMode:{type:String,default:"vector",validator:function(t){return by.includes(t)}}},methods:{createLayer:function(){return new Bh({id:this.id,minResolution:this.minResolution,maxResolution:this.maxResolution,opacity:this.opacity,visible:this.visible,extent:this.extent,zIndex:this.zIndex,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,source:this._source,renderMode:this.renderMode,renderBuffer:this.renderBuffer,renderOrder:this.renderOrder,declutter:this.declutter})}}},Ey={Layer:xy,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(xy,e),t.component(xy.name,xy)}},Sy=i("d7EF"),Ty=i.n(Sy),wy=ka.all,Cy=(ka.bbox,ka.tile,{features:{type:Array,default:Ze.y},loaderFactory:Function,formatFactory:{type:Function,default:function(){return aa()}},url:[String,Function],strategyFactory:{type:Function,default:function(){return wy}},overlaps:{type:Boolean,default:!0}}),Ry=function(t,e){return t.id===e.id},Py={name:"vl-source-vector",mixins:[lh],props:Cy,computed:{featureIds:function(){return this.features.map(sh)}},methods:{createSource:function(){return new Ya({attributions:this.attributions,projection:this.resolvedDataProjection,loader:this.createLoader(),useSpatialIndex:this.useSpatialIndex,wrapX:this.wrapX,logo:this.logo,strategy:this.strategyFactory(),format:this.formatFactory(),url:this.createUrlFunc(),overlaps:this.overlaps})},createUrlFunc:function(){var t=this;if(this.url){var e=this.url;return Object(Ze.k)(e)||(e=Object(Ze.c)(this.url)),function(i,o,r){return e(Iy(i,r,t.resolvedDataProjection),o,t.resolvedDataProjection)}}},createLoader:function(){var t=this;if(this.loaderFactory){var e=this.loaderFactory();return function(i,o,r){return e(Iy(i,r,t.resolvedDataProjection),o,t.resolvedDataProjection)}}},mount:function(){lh.methods.mount.call(this),this.addFeatures(this.features)},unmount:function(){this.clear(),lh.methods.unmount.call(this)}},watch:{features:function(t,e){if(this.$source){var i=Object(Ze.d)(t,e,Ry),o=Object(Ze.d)(e,t,Ry);this.addFeatures(i),this.removeFeatures(o)}}}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/function Iy(t,e,i){if(t=t.slice(),Object(Ze.j)(t[0])&&Object(Ze.j)(t[1])){var o=kn([t[0],t[1]],e,i),r=Ty()(o,2);t[0]=r[0],t[1]=r[1]}if(Object(Ze.j)(t[2])&&Object(Ze.j)(t[3])){var n=kn([t[2],t[3]],e,i),s=Ty()(n,2);t[2]=s[0],t[3]=s[1]}return t}var My={Source:Py,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Py,e),t.component(Py.name,Py)}},Ly=function(t){var e=t||{},i=e.renderMode||Cc.HYBRID;M.assert(void 0==i||i==Cc.IMAGE||i==Cc.HYBRID||i==Cc.VECTOR,28),e.declutter&&i==Cc.IMAGE&&(i=Cc.HYBRID),e.renderMode=i;var o=nt.assign({},e);delete o.preload,delete o.useInterimTilesOnError,Bh.call(this,o),this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(!e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=Ah.VECTOR_TILE};C.inherits(Ly,Bh),Ly.prototype.getPreload=function(){return this.get(cy.PRELOAD)},Ly.prototype.getUseInterimTilesOnError=function(){return this.get(cy.USE_INTERIM_TILES_ON_ERROR)},Ly.prototype.setPreload=function(t){this.set(cy.PRELOAD,t)},Ly.prototype.setUseInterimTilesOnError=function(t){this.set(cy.USE_INTERIM_TILES_ON_ERROR,t)},Ly.prototype.getSource;var Ay=Ly,Oy=["vector","image","hybrid"],Fy={name:"vl-layer-vector-tile",mixins:[_y],props:{renderMode:{type:String,default:"hybrid",validator:function(t){return Oy.includes(t)}},preload:{type:Number,default:0}},methods:{createLayer:function(){return new Ay({id:this.id,minResolution:this.minResolution,maxResolution:this.maxResolution,opacity:this.opacity,visible:this.visible,preload:this.preload,extent:this.extent,zIndex:this.zIndex,updateWhileAnimating:this.updateWhileAnimating,updateWhileInteracting:this.updateWhileInteracting,source:this._source,renderMode:this.renderMode,renderBuffer:this.renderBuffer,renderOrder:this.renderOrder,declutter:this.declutter})}}},Ny={Layer:Fy,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Fy,e),t.component(Fy.name,Fy)}},Dy=function(t,e,i,o,r,n,s,a,h,l,p,u,c,f,d){if(Tt.call(this,t,e,d),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=l,this.tileKeys=[],this.sourceRevision_=i,this.wrappedTileCoord=n,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],n){var y=h.getTileCoordExtent(n),g=h.getResolution(t[0]),v=a.getZForResolution(g);a.forEachTileCoord(y,v,function(t){var e=U.getIntersection(y,a.getTileCoordExtent(t)),i=a.getExtent();if(i&&(e=U.getIntersection(e,i)),U.getWidth(e)/g>=.5&&U.getHeight(e)/g>=.5){var n=t.toString(),h=l[n];if(!h){var d=s(t,p,u);h=l[n]=new c(t,void 0==d?ut.EMPTY:ut.IDLE,void 0==d?"":d,o,r),this.sourceTileListenerKeys_.push(vt.listen(h,Et.CHANGE,f))}h.consumers++,this.tileKeys.push(n)}}.bind(this))}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/C.inherits(Dy,Tt),Dy.prototype.disposeInternal=function(){for(var t=0,e=this.tileKeys.length;t<e;++t){var i=this.tileKeys[t],o=this.getTile(i);o.consumers--,0==o.consumers&&(delete this.sourceTiles_[i],o.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(vt.unlistenByKey),this.loadListenerKeys_.length=0,this.interimTile&&this.interimTile.dispose(),this.state=ut.ABORT,this.changed(),this.sourceTileListenerKeys_.forEach(vt.unlistenByKey),this.sourceTileListenerKeys_.length=0,Tt.prototype.disposeInternal.call(this)},Dy.prototype.getContext=function(t){var e=C.getUid(t).toString();return e in this.context_||(this.context_[e]=Ct.createCanvasContext2D()),this.context_[e]},Dy.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},Dy.prototype.getReplayState=function(t){var e=C.getUid(t).toString();return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},Dy.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},Dy.prototype.getTile=function(t){return this.sourceTiles_[t]},Dy.prototype.load=function(){var t=0,e={};this.state==ut.IDLE&&this.setState(ut.LOADING),this.state==ut.LOADING&&this.tileKeys.forEach(function(i){var o=this.getTile(i);if(o.state==ut.IDLE&&(o.setLoader(this.loader_),o.load()),o.state==ut.LOADING){var r=vt.listen(o,Et.CHANGE,function(i){var r=o.getState();if(r==ut.LOADED||r==ut.ERROR){var n=C.getUid(o);r==ut.ERROR?e[n]=!0:(--t,delete e[n]),t-Object.keys(e).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(r),++t}}.bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},Dy.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,i=t-1;i>=0;--i){var o=this.getTile(this.tileKeys[i]).getState();o!=ut.LOADED&&--t,o==ut.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(vt.unlistenByKey),this.loadListenerKeys_.length=0,this.setState(ut.LOADED)):this.setState(e==this.tileKeys.length?ut.EMPTY:ut.ERROR)},Dy.defaultLoadFunction=function(t,e){var i=Da.loadFeaturesXhr(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)};var jy=Dy,ky=function(t,e,i,o,r,n){Tt.call(this,t,e,n),this.consumers=0,this.extent_=null,this.format_=o,this.features_=null,this.loader_,this.projection_,this.replayGroups_={},this.tileLoadFunction_=r,this.url_=i};C.inherits(ky,Tt),ky.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=ut.ABORT,this.changed(),Tt.prototype.disposeInternal.call(this)},ky.prototype.getExtent=function(){return this.extent_||ky.DEFAULT_EXTENT},ky.prototype.getFormat=function(){return this.format_},ky.prototype.getFeatures=function(){return this.features_},ky.prototype.getKey=function(){return this.url_},ky.prototype.getProjection=function(){return this.projection_},ky.prototype.getReplayGroup=function(t,e){return this.replayGroups_[C.getUid(t)+","+e]},ky.prototype.load=function(){this.state==ut.IDLE&&(this.setState(ut.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},ky.prototype.onLoad=function(t,e,i){this.setProjection(e),this.setFeatures(t),this.setExtent(i)},ky.prototype.onError=function(){this.setState(ut.ERROR)},ky.prototype.setExtent=function(t){this.extent_=t},ky.prototype.setFeatures=function(t){this.features_=t,this.setState(ut.LOADED)},ky.prototype.setProjection=function(t){this.projection_=t},ky.prototype.setReplayGroup=function(t,e,i){this.replayGroups_[C.getUid(t)+","+e]=i},ky.prototype.setLoader=function(t){this.loader_=t},ky.DEFAULT_EXTENT=[0,0,4096,4096];var Gy=ky,Uy=function(t){var e=t.projection||"EPSG:3857",i=t.extent||Ht.extentFromProjection(e),o=t.tileGrid||Ht.createXYZ({extent:i,maxZoom:t.maxZoom||22,minZoom:t.minZoom,tileSize:t.tileSize||512});he.call(this,{attributions:t.attributions,cacheSize:void 0!==t.cacheSize?t.cacheSize:128,extent:i,logo:t.logo,opaque:!1,projection:e,state:t.state,tileGrid:o,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:jy.defaultLoadFunction,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.format_=t.format?t.format:null,this.sourceTiles_={},this.overlaps_=void 0==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:Gy,this.tileGrids_={}};C.inherits(Uy,he),Uy.prototype.getOverlaps=function(){return this.overlaps_},Uy.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},Uy.prototype.getTile=function(t,e,i,o,r){var n=F.getKeyZXY(t,e,i);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,r),h=new jy(s,null!==a?ut.IDLE:ut.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,a,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(r),this.sourceTiles_,o,r,this.tileClass,this.handleTileChange.bind(this),this.tileOptions);return this.tileCache.set(n,h),h},Uy.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var o=this.tileGrid;i=this.tileGrids_[e]=Ht.createForProjection(t,void 0,o?o.getTileSize(o.getMinZoom()):void 0)}return i},Uy.prototype.getTilePixelRatio=function(t){return t},Uy.prototype.getTilePixelSize=function(t,e,i){var o=Ut.toSize(this.getTileGridForProjection(i).getTileSize(t));return[Math.round(o[0]*e),Math.round(o[1]*e)]};var By=Uy,Vy={name:"vl-source-vector-tile",mixins:[Lo],props:{cacheSize:{type:Number,default:128},formatFactory:{type:Function,default:function(){return new ra(t);var t}},overlaps:{type:Boolean,default:!0}},methods:{createSource:function(){return new By({attributions:this.attributions,cacheSize:this.cacheSize,format:this.formatFactory(),logo:this.logo,overlaps:this.overlaps,projection:this.projection,tileGrid:this._tileGrid,tileLoadFunction:this.tileLoadFunction,tileUrlFunction:this.createUrlFunc(),wrapX:this.wrapX,transition:this.transition})}}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var Wy={Source:Vy,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Vy,e),t.component(Vy.name,Vy)}},Xy={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"},Yy={appendParams:function(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var o=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+o}},zy=Yy,Ky=function(t){var e=t||{},i=e.params||{},o=!("TRANSPARENT"in i)||i.TRANSPARENT;pe.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,opaque:!o,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=U.createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())};C.inherits(Ky,pe),Ky.prototype.getGetFeatureInfoUrl=function(t,e,i,o){var r=lt.get(i),n=this.getProjection(),s=this.getTileGrid();s||(s=this.getTileGridForProjection(r));var a=s.getTileCoordForCoordAndResolution(t,e);if(!(s.getResolutions().length<=a[0])){var h=s.getResolution(a[0]),l=s.getTileCoordExtent(a,this.tmpExtent_),p=Ut.toSize(s.getTileSize(a[0]),this.tmpSize),u=this.gutter_;0!==u&&(p=Ut.buffer(p,u,this.tmpSize),l=U.buffer(l,h*u,l)),n&&n!==r&&(h=Ft.calculateSourceResolution(n,r,t,h),l=lt.transformExtent(l,r,n),t=lt.transform(t,r,n));var c={SERVICE:"WMS",VERSION:C.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};nt.assign(c,this.params_,o);var f=Math.floor((t[0]-l[0])/h),d=Math.floor((l[3]-t[1])/h);return c[this.v13_?"I":"X"]=f,c[this.v13_?"J":"Y"]=d,this.getRequestUrl_(a,p,l,1,n||r,c)}},Ky.prototype.getGutterInternal=function(){return this.gutter_},Ky.prototype.getParams=function(){return this.params_},Ky.prototype.getRequestUrl_=function(t,e,i,o,r,n){var s=this.urls;if(s){if(n.WIDTH=e[0],n.HEIGHT=e[1],n[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=o)switch(this.serverType_){case Xy.GEOSERVER:var a=90*o+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+a:n.FORMAT_OPTIONS="dpi:"+a;break;case Xy.MAPSERVER:n.MAP_RESOLUTION=90*o;break;case Xy.CARMENTA_SERVER:case Xy.QGIS:n.DPI=90*o;break;default:M.assert(!1,52)}var h,l,p=r.getAxisOrientation(),u=i;if(this.v13_&&"ne"==p.substr(0,2))h=i[0],u[0]=i[1],u[1]=h,h=i[2],u[2]=i[3],u[3]=h;if(n.BBOX=u.join(","),1==s.length)l=s[0];else l=s[A.modulo(F.hash(t),s.length)];return zy.appendParams(l,n)}},Ky.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},Ky.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},Ky.prototype.fixedTileUrlFunction=function(t,e,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var r=o.getResolution(t[0]),n=o.getTileCoordExtent(t,this.tmpExtent_),s=Ut.toSize(o.getTileSize(t[0]),this.tmpSize),a=this.gutter_;0!==a&&(s=Ut.buffer(s,a,this.tmpSize),n=U.buffer(n,r*a,n)),1!=e&&(s=Ut.scale(s,e,this.tmpSize));var h={SERVICE:"WMS",VERSION:C.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return nt.assign(h,this.params_),this.getRequestUrl_(t,s,n,e,i,h)}},Ky.prototype.updateParams=function(t){nt.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},Ky.prototype.updateV13_=function(){var t=this.params_.VERSION||C.DEFAULT_WMS_VERSION;this.v13_=Ra.compareVersions(t,"1.3")>=0};var Hy=Ky,$y=function(t){return t.toUpperCase()},qy=function(t){return Object(Ze.s)((e=t,lo()(e).map($y)),["LAYERS","VERSION","STYLES"]);var e},Zy={name:"vl-source-wms",mixins:[Lo],props:{extParams:Object,gutter:Number,hidpi:Boolean,layers:{type:String,required:!0},serverType:String,styles:String,version:{type:String,default:"1.3.0"},url:{type:String,required:!0}},methods:{createSource:function(){return new Hy({attributions:this.attributions,cacheSize:this.cacheSize,params:n()({},qy(this.extParams),{LAYERS:this.layers,STYLES:this.styles,VERSION:this.version}),crossOrigin:this.crossOrigin,gutter:this.gutter,hidpi:this.hidpi,logo:this.logo,tileGrid:this._tileGrid,projection:this.projection,reprojectionErrorThreshold:this.reprojectionErrorThreshold,serverType:this.serverType,wrapX:this.wrapX,url:this.urlTmpl,transition:this.transition,tileLoadFunction:this.tileLoadFunction})},getFeatureInfoUrl:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ii(this),ri(this),e||(e=this.$view.getResolution()),i||(i=this.projection),this.$source.getFeatureInfoUrl(t,e,i,qy(o))}},watch:{layers:function(t){this.$source&&this.$source.updateParams({LAYERS:t})},version:function(t){this.$source&&this.$source.updateParams({VERSION:t})},styles:function(t){this.$source&&this.$source.updateParams({STYLES:t})},extParams:function(t){this.$source&&this.$source.updateParams(qy(t))}}},Jy={Source:Zy,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(Zy,e),t.component(Zy.name,Zy)}},Qy=i("c/Tr"),tg=i.n(Qy),eg={KVP:"KVP",REST:"REST"},ig=function(t){this.matrixIds_=t.matrixIds,zt.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/C.inherits(ig,zt),ig.prototype.getMatrixId=function(t){return this.matrixIds_[t]},ig.prototype.getMatrixIds=function(){return this.matrixIds_},ig.createFromCapabilitiesMatrixSet=function(t,e,i){var o=[],r=[],n=[],s=[],a=[],h=void 0!==i?i:[],l=t.SupportedCRS,p=lt.get(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||lt.get(l),u=p.getMetersPerUnit(),c="ne"==p.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(t,e,i){if(!(h.length>0)||Xt.find(h,function(e,i,o){return t.Identifier==e.TileMatrix})){r.push(t.Identifier);var l=28e-5*t.ScaleDenominator/u,p=t.TileWidth,f=t.TileHeight;c?n.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):n.push(t.TopLeftCorner),o.push(l),s.push(p==f?p:[p,f]),a.push([t.MatrixWidth,-t.MatrixHeight])}}),new ig({extent:e,origins:n,resolutions:o,matrixIds:r,tileSizes:s,sizes:a})};var og=ig,rg=function(t){this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style;var e=t.urls;void 0===e&&void 0!==t.url&&(e=D.expandUrl(t.url)),this.requestEncoding_=void 0!==t.requestEncoding?t.requestEncoding:eg.KVP;var i=this.requestEncoding_,o=t.tileGrid,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i==eg.KVP&&nt.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_});var n=this.dimensions_;this.createFromWMTSTemplate_=function(t){return t=i==eg.KVP?zy.appendParams(t,r):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}),function(e,r,s){if(e){var a={TileMatrix:o.getMatrixId(e[0]),TileCol:e[1],TileRow:-e[2]-1};nt.assign(a,n);var h=t;return h=i==eg.KVP?zy.appendParams(h,a):h.replace(/\{(\w+?)\}/g,function(t,e){return a[e]})}}};var s=e&&e.length>0?D.createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate_)):D.nullTileUrlFunction;pe.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:s,urls:e,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition}),this.setKey(this.getKeyForDimensions_())};C.inherits(rg,pe),rg.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):D.createFromTileUrlFunctions(t.map(this.createFromWMTSTemplate_.bind(this))),e)},rg.prototype.getDimensions=function(){return this.dimensions_},rg.prototype.getFormat=function(){return this.format_},rg.prototype.getLayer=function(){return this.layer_},rg.prototype.getMatrixSet=function(){return this.matrixSet_},rg.prototype.getRequestEncoding=function(){return this.requestEncoding_},rg.prototype.getStyle=function(){return this.style_},rg.prototype.getVersion=function(){return this.version_},rg.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},rg.prototype.updateDimensions=function(t){nt.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},rg.optionsFromCapabilities=function(t,e){var i=t.Contents.Layer,o=Xt.find(i,function(t,i,o){return t.Identifier==e.layer});if(null===o)return null;var r,n,s,a=t.Contents.TileMatrixSet;(r=o.TileMatrixSetLink.length>1?"projection"in e?Xt.findIndex(o.TileMatrixSetLink,function(t,i,o){var r=Xt.find(a,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,n=lt.get(r.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||lt.get(r),s=lt.get(e.projection);return n&&s?lt.equivalent(n,s):r==e.projection}):Xt.findIndex(o.TileMatrixSetLink,function(t,i,o){return t.TileMatrixSet==e.matrixSet}):0)<0&&(r=0),n=o.TileMatrixSetLink[r].TileMatrixSet,s=o.TileMatrixSetLink[r].TileMatrixSetLimits;var h=o.Format[0];"format"in e&&(h=e.format),(r=Xt.findIndex(o.Style,function(t,i,o){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(r=0);var l=o.Style[r].Identifier,p={};"Dimension"in o&&o.Dimension.forEach(function(t,e,i){var o=t.Identifier,r=t.Default;void 0===r&&(r=t.Value[0]),p[o]=r});var u,c=t.Contents.TileMatrixSet,f=Xt.find(c,function(t,e,i){return t.Identifier==n}),d=f.SupportedCRS;if(d&&(u=lt.get(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||lt.get(d)),"projection"in e){var y=lt.get(e.projection);y&&(u&&!lt.equivalent(y,u)||(u=y))}var g,v,m=o.WGS84BoundingBox;if(void 0!==m){var _=lt.get("EPSG:4326").getExtent();v=m[0]==_[0]&&m[2]==_[2],g=lt.transformExtent(m,"EPSG:4326",u);var b=u.getExtent();b&&(U.containsExtent(b,g)||(g=void 0))}var x=og.createFromCapabilitiesMatrixSet(f,g,s),E=[],S=e.requestEncoding;if(S=void 0!==S?S:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var T=t.OperationsMetadata.GetTile.DCP.HTTP.Get,w=0,C=T.length;w<C;++w)if(T[w].Constraint){var R=Xt.find(T[w].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===S&&(S=R[0]),S!==eg.KVP)break;Xt.includes(R,eg.KVP)&&E.push(T[w].href)}else T[w].href&&(S=eg.KVP,E.push(T[w].href));return 0===E.length&&(S=eg.REST,o.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(h=t.format,E.push(t.template))})),{urls:E,layer:e.layer,matrixSet:n,format:h,projection:u,requestEncoding:S,tileGrid:x,style:l,dimensions:p,wrapX:v,crossOrigin:e.crossOrigin}};var ng=rg,sg={name:"vl-source-wmts",mixins:[Lo],props:{dimensions:Object,format:{type:String,default:"image/jpeg"},layerName:{type:String,required:!0},matrixSet:{type:String,required:!0},requestEncoding:{type:String,default:"KVP"},styleName:{type:String,required:!0},version:{type:String,default:"1.0.0"},url:{type:String,required:!0}},methods:{createSource:function(){return new ng({attributions:this.attributions,cacheSize:this.cacheSize,crossOrigin:this.crossOrigin,dimensions:this.dimensions,format:this.format,layer:this.layerName,logo:this.logo,matrixSet:this.matrixSet,projection:this.projection,reprojectionErrorThreshold:this.reprojectionErrorThreshold,requestEncoding:this.requestEncoding,tileGrid:this._tileGrid,tilePixelRatio:this.tilePixelRatio,style:this.styleName,version:this.version,url:this.urlTmpl,wrapX:this.wrapX,transition:this.transition,tileLoadFunction:this.tileLoadFunction})},createTileGrid:function(){ii(this);var t=Ue(this.$view.getProjection()),e=Ve(t,this.maxZoom,this.tileSize);return new og({extent:t,resolutions:e,tileSize:this.tileSize,minZoom:this.minZoom,matrixIds:tg()(Object(Ze.v)(this.minZoom,e.length))})}}},ag={Source:sg,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(sg,e),t.component(sg.name,sg)}},hg={name:"vl-source-xyz",mixins:[ad],props:{}},lg={Source:hg,install:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(Ze.t)(e,"dataProjection"),Fo()(hg,e),t.component(hg.name,hg)}};
/*!
VueLayers
Web map Vue components with the power of OpenLayers

@package vuelayers
@author Vladimir Vershinin <ghettovoice@gmail.com>
@version 0.10.7
@license MIT
@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>
*/var pg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.use(Do,e),t.use(ma,e),t.use(wa,e),t.use(dh,e),t.use(bl,e),t.use(Tl,e),t.use(Rl,e),t.use(Fl,e),t.use(Gl,e),t.use(Yl,e),t.use(np,e),t.use(ap,e),t.use(rd,e),t.use(pd,e),t.use(md,e),t.use(bd,e),t.use(Ed,e),t.use(Td,e),t.use(Pd,e),t.use(Ld,e),t.use(Od,e),t.use(Nd,e),t.use(kd,e),t.use(Wd,e),t.use(qd,e),t.use(Qd,e),t.use(iy,e),t.use(ny,e),t.use(hy,e),t.use(uy,e),t.use(vy,e),t.use(Ey,e),t.use(My,e),t.use(Ny,e),t.use(Wy,e),t.use(Jy,e),t.use(ag,e),t.use(lg,e)};i("27If");E.a.use(pg);var ug={name:"MapViewer",data:function(){return{zoom:7,center:[0,0],rotation:0,geolocPosition:void 0,map:null}},computed:n()({position:function(){return this.treeSelected?[this.treeSelected.lng,this.treeSelected.lat]:this.geolocPosition}},Object(s.c)("data",["treeSelected","session"])),methods:{onMapCreated:function(){console.log("Created map!: "+this.map),this.map=this.$refs.map.$map},handleResize:function(){console.log("handleResize called!!!"),this.map.updateSize()},onMoveEnd:function(t){var e=t.map,i=T.a.proj.transformExtent(e.getView().calculateExtent(e.getSize()),"EPSG:3857","EPSG:4326"),o={type:"DEBUG",messageClass:"TASK",identity:this.session,payloadClass:"EXTENT",payload:i,inResponseTo:null};this.sendStompMessage(o)}},watch:{geolocPosition:function(){this.center=this.geolocPosition,console.log("Encontrada posicion: "+this.geolocPosition)},position:function(){this.center=this.position}}},cg=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fit no-padding klab-viewer"},[i("vl-map",{ref:"map",attrs:{"load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,"data-projection":"EPSG:4326"},on:{created:t.onMapCreated,moveend:function(e){t.onMoveEnd(e)}}},[i("vl-view",{attrs:{zoom:t.zoom,center:t.center,rotation:t.rotation},on:{"update:zoom":function(e){t.zoom=e},"update:center":function(e){t.center=e},"update:rotation":function(e){t.rotation=e}}}),t._v(" "),i("vl-geoloc",{on:{"update:position":function(e){t.geolocPosition=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[t.position?i("vl-feature",{attrs:{id:"position-feature"}},[i("vl-geom-point",{attrs:{coordinates:t.position}}),t._v(" "),i("vl-style-box",[i("vl-style-icon",{attrs:{src:"statics/maps/marker.png",scale:.4,anchor:[.5,1]}})],1)],1):t._e()]}}])}),t._v(" "),i("vl-layer-tile",{attrs:{id:"osm"}},[i("vl-source-sputnik")],1)],1),t._v(" "),i("q-resize-observable",{on:{resize:t.handleResize}})],1)},fg=[];cg._withStripped=!0;var dg=!1;var yg=function(t){dg||i("7jSA")},gg=Object(p.a)(ug,cg,fg,!1,yg,"data-v-f1836ca4",null);gg.options.__file="src\\components\\MapViewer.vue";var vg=gg.exports,mg={name:"viewer",data:function(){return{actualViewer:"mapViewer"}},computed:n()({},Object(s.d)("data",["saved"]),{hasViews:function(){return this.saved.length}}),components:{mapViewer:vg}},_g=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col column no-padding"},[e("div",{staticClass:"col no-padding full-height full-width"},[e(this.actualViewer,{tag:"component"})],1),this._v(" "),this.hasViews?e("div",{staticClass:"col-2"},[this._v("OLD-MAPS")]):this._e()])},bg=[];_g._withStripped=!0;var xg=!1;var Eg=function(t){xg||i("cLCP")},Sg=Object(p.a)(mg,_g,bg,!1,Eg,null,null);Sg.options.__file="src\\components\\Viewer.vue";var Tg=Sg.exports,wg={name:"IndexPage",computed:n()({},Object(s.c)("data",["hasTree","hasSaved"]),Object(s.c)("stomp",["connected"]),{modalVisible:function(){return!this.$store.getters["stomp/connected"]}}),components:{klabTree:d,klabLog:x,viewer:Tg},methods:n()({},Object(s.b)("stomp",["stomp_cleanqueue"])),watch:{}},Cg=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"column with-bg"},[i("div",{staticClass:"col row full-height"},[t.hasTree?i("div",{staticClass:"col-3 no-padding"},[i("klab-tree")],1):t._e(),t._v(" "),i("viewer")],1),t._v(" "),i("div",{staticClass:"col-1 row"},[i("klab-log")],1),t._v(" "),i("q-modal",{attrs:{minimized:"","no-esc-dismiss":"","no-backdrop-dismiss":"","content-css":{padding:"50px",minWidth:"50vw"},"content-classes":["text-center"]},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[i("div",{staticClass:"q-display-1 q-mb-md"},[t._v(t._s(t.$t("label.modalNoConnection")))]),t._v(" "),i("q-spinner-radio",{attrs:{color:"primary",size:40}})],1)],1)},Rg=[];Cg._withStripped=!0;var Pg=!1;var Ig=function(t){Pg||i("D5G0")},Mg=Object(p.a)(wg,Cg,Rg,!1,Ig,"data-v-6be49aa4",null);Mg.options.__file="src\\pages\\index.vue";e.default=Mg.exports},"5PlU":function(t,e,i){var o=i("RY/4"),r=i("dSzd")("iterator"),n=i("/bQp");t.exports=i("FeBl").isIterable=function(t){var e=Object(t);return void 0!==e[r]||"@@iterator"in e||n.hasOwnProperty(o(e))}},"5QVw":function(t,e,i){t.exports={default:i("BwfY"),__esModule:!0}},"5zde":function(t,e,i){i("zQR9"),i("qyJz"),t.exports=i("FeBl").Array.from},"72Lu":function(t,e,i){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},"7jSA":function(t,e,i){var o=i("rx2J");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("rjj0").default)("8c94862c",o,!1,{})},"82Mu":function(t,e,i){var o=i("7KvD"),r=i("L42u").set,n=o.MutationObserver||o.WebKitMutationObserver,s=o.process,a=o.Promise,h="process"==i("R9M2")(s);t.exports=function(){var t,e,i,l=function(){var o,r;for(h&&(o=s.domain)&&o.exit();t;){r=t.fn,t=t.next;try{r()}catch(o){throw t?i():e=void 0,o}}e=void 0,o&&o.enter()};if(h)i=function(){s.nextTick(l)};else if(!n||o.navigator&&o.navigator.standalone)if(a&&a.resolve){var p=a.resolve(void 0);i=function(){p.then(l)}}else i=function(){r.call(o,l)};else{var u=!0,c=document.createTextNode("");new n(l).observe(c,{characterData:!0}),i=function(){c.data=u=!u}}return function(o){var r={fn:o,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},B00U:function(t,e,i){"use strict";var o=i("Xajo"),r=i("ICpg"),n=i("SKH6"),s=i("+3eL"),a=i("WhVc"),h=i("GIjk"),l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var i=this._parent,l=this._parents,u=this._unsubscribe,c=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,d=l?l.length:0;i;)i.remove(this),i=++f<d&&l[f]||null;if(n.isFunction(u))s.tryCatch(u).call(this)===a.errorObject&&(e=!0,t=t||(a.errorObject.e instanceof h.UnsubscriptionError?p(a.errorObject.e.errors):[a.errorObject.e]));if(o.isArray(c))for(f=-1,d=c.length;++f<d;){var y=c[f];if(r.isObject(y))if(s.tryCatch(y.unsubscribe).call(y)===a.errorObject){e=!0,t=t||[];var g=a.errorObject.e;g instanceof h.UnsubscriptionError?t=t.concat(p(g.errors)):t.push(g)}}if(e)throw new h.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var i=e;switch(typeof e){case"function":i=new t(e);case"object":if(i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if("function"!=typeof i._addParent){var o=i;(i=new t)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(i),i._addParent(this),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.prototype._addParent=function(t){var e=this._parent,i=this._parents;e&&e!==t?i?-1===i.indexOf(t)&&i.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function p(t){return t.reduce(function(t,e){return t.concat(e instanceof h.UnsubscriptionError?e.errors:e)},[])}e.Subscription=l},BO1k:function(t,e,i){t.exports={default:i("fxRn"),__esModule:!0}},BwfY:function(t,e,i){i("fWfb"),i("M6a0"),i("OYls"),i("QWe/"),t.exports=i("FeBl").Symbol},CJli:function(t,e,i){i("pRCB");var o=i("FeBl").Object;t.exports=function(t,e){return o.defineProperties(t,e)}},CXw9:function(t,e,i){"use strict";var o,r,n,s,a=i("O4g8"),h=i("7KvD"),l=i("+ZMJ"),p=i("RY/4"),u=i("kM2E"),c=i("EqjI"),f=i("lOnJ"),d=i("2KxR"),y=i("NWt+"),g=i("t8x9"),v=i("L42u").set,m=i("82Mu")(),_=i("qARP"),b=i("dNDb"),x=i("iUbK"),E=i("fJUb"),S=h.TypeError,T=h.process,w=T&&T.versions,C=w&&w.v8||"",R=h.Promise,P="process"==p(T),I=function(){},M=r=_.f,L=!!function(){try{var t=R.resolve(1),e=(t.constructor={})[i("dSzd")("species")]=function(t){t(I,I)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(I)instanceof e&&0!==C.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),A=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},O=function(t,e){if(!t._n){t._n=!0;var i=t._c;m(function(){for(var o=t._v,r=1==t._s,n=0,s=function(e){var i,n,s,a=r?e.ok:e.fail,h=e.resolve,l=e.reject,p=e.domain;try{a?(r||(2==t._h&&D(t),t._h=1),!0===a?i=o:(p&&p.enter(),i=a(o),p&&(p.exit(),s=!0)),i===e.promise?l(S("Promise-chain cycle")):(n=A(i))?n.call(i,h,l):h(i)):l(o)}catch(t){p&&!s&&p.exit(),l(t)}};i.length>n;)s(i[n++]);t._c=[],t._n=!1,e&&!t._h&&F(t)})}},F=function(t){v.call(h,function(){var e,i,o,r=t._v,n=N(t);if(n&&(e=b(function(){P?T.emit("unhandledRejection",r,t):(i=h.onunhandledrejection)?i({promise:t,reason:r}):(o=h.console)&&o.error&&o.error("Unhandled promise rejection",r)}),t._h=P||N(t)?2:1),t._a=void 0,n&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){v.call(h,function(){var e;P?T.emit("rejectionHandled",t):(e=h.onrejectionhandled)&&e({promise:t,reason:t._v})})},j=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),O(e,!0))},k=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw S("Promise can't be resolved itself");(e=A(t))?m(function(){var o={_w:i,_d:!1};try{e.call(t,l(k,o,1),l(j,o,1))}catch(t){j.call(o,t)}}):(i._v=t,i._s=1,O(i,!1))}catch(t){j.call({_w:i,_d:!1},t)}}};L||(R=function(t){d(this,R,"Promise","_h"),f(t),o.call(this);try{t(l(k,this,1),l(j,this,1))}catch(t){j.call(this,t)}},(o=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i("xH/j")(R.prototype,{then:function(t,e){var i=M(g(this,R));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=P?T.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&O(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),n=function(){var t=new o;this.promise=t,this.resolve=l(k,t,1),this.reject=l(j,t,1)},_.f=M=function(t){return t===R||t===s?new n(t):r(t)}),u(u.G+u.W+u.F*!L,{Promise:R}),i("e6n0")(R,"Promise"),i("bRrM")("Promise"),s=i("FeBl").Promise,u(u.S+u.F*!L,"Promise",{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),u(u.S+u.F*(a||!L),"Promise",{resolve:function(t){return E(a&&this===s?R:this,t)}}),u(u.S+u.F*!(L&&i("dY0y")(function(t){R.all(t).catch(I)})),"Promise",{all:function(t){var e=this,i=M(e),o=i.resolve,r=i.reject,n=b(function(){var i=[],n=0,s=1;y(t,!1,function(t){var a=n++,h=!1;i.push(void 0),s++,e.resolve(t).then(function(t){h||(h=!0,i[a]=t,--s||o(i))},r)}),--s||o(i)});return n.e&&r(n.v),i.promise},race:function(t){var e=this,i=M(e),o=i.reject,r=b(function(){y(t,!1,function(t){e.resolve(t).then(i.resolve,o)})});return r.e&&o(r.v),i.promise}})},D2Nv:function(t,e,i){"use strict";var o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function o(){this.constructor=t}t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},r=i("mmVS");e.tap=function(t,e,i){return function(o){return o.lift(new n(t,e,i))}};var n=function(){function t(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.nextOrObserver,this.error,this.complete))},t}(),s=function(t){function e(e,i,o,n){t.call(this,e);var s=new r.Subscriber(i,o,n);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return o(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(r.Subscriber)},D5G0:function(t,e,i){var o=i("jebZ");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("rjj0").default)("83f3247a",o,!1,{})},DtRx:function(t,e,i){var o=i("i4uy"),r=i("MAlW");t.exports=function(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[n+a]=s[a];return e||r(s)}},E47E:function(t,e,i){"use strict";
/*!
 * merge-descriptors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.exports=function(t,e,i){if(!t)throw new TypeError("argument dest is required");if(!e)throw new TypeError("argument src is required");void 0===i&&(i=!0);return Object.getOwnPropertyNames(e).forEach(function(r){if(i||!o.call(t,r)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n)}}),t};var o=Object.prototype.hasOwnProperty},EqBC:function(t,e,i){"use strict";var o=i("kM2E"),r=i("FeBl"),n=i("7KvD"),s=i("t8x9"),a=i("fJUb");o(o.P+o.R,"Promise",{finally:function(t){var e=s(this,r.Promise||n.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then(function(){return i})}:t,i?function(i){return a(e,t()).then(function(){throw i})}:t)}})},FJpM:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},GIjk:function(t,e,i){"use strict";var o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function o(){this.constructor=t}t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},r=function(t){function e(e){t.call(this),this.errors=e;var i=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=i.name="UnsubscriptionError",this.stack=i.stack,this.message=i.message}return o(e,t),e}(Error);e.UnsubscriptionError=r},GRLA:function(t,e,i){var o;o=function(){var t,e,i,o={},r=this;function n(t,e){var i,n=o;t=t.split("."),n=n||r,t[0]in n||!n.execScript||n.execScript("var "+t[0]);for(;t.length&&(i=t.shift());)t.length||void 0===e?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=e}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function a(){}function h(t){return t.xp||(t.xp=++l)}var l=0;function p(t){this.message="Assertion failed. See https://openlayers.org/en/v4.6.5/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"}function u(t,e,i,o){this.fa=t,this.la=e,this.ea=i,this.ka=o}function c(t,e,i,o,r){return void 0!==r?(r.fa=t,r.la=e,r.ea=i,r.ka=o,r):new u(t,e,i,o)}function f(t,e,i){return t.fa<=e&&e<=t.la&&t.ea<=i&&i<=t.ka}function d(t,e){if(!t)throw new p(e)}function y(t,e,i){return Math.min(Math.max(t,e),i)}s(p,Error);var g="cosh"in Math?Math.cosh:function(t){return((t=Math.exp(t))+1/t)/2};function v(t,e,i,o,r,n){var s=r-i,a=n-o;if(0!==s||0!==a){var h=((t-i)*s+(e-o)*a)/(s*s+a*a);1<h?(i=r,o=n):0<h&&(i+=s*h,o+=a*h)}return m(t,e,i,o)}function m(t,e,i,o){return(t=i-t)*t+(e=o-e)*e}function _(t){return t*Math.PI/180}function b(t,e){return 0>(t%=e)*e?t+e:t}function x(t,e,i){return t+i*(e-t)}function E(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function S(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function T(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}function w(t){for(var e=O(),i=0,o=t.length;i<o;++i)U(e,t[i]);return e}function C(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function R(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function P(t,e,i){return(e=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*e+(t=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*t}function I(t,e){return L(t,e[0],e[1])}function M(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function L(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function A(t,e){var i=t[1],o=t[2],r=t[3],n=e[0];e=e[1];var s=0;return n<t[0]?s|=16:n>o&&(s|=4),e<i?s|=8:e>r&&(s|=2),0===s&&(s=1),s}function O(){return[1/0,1/0,-1/0,-1/0]}function F(t,e,i,o,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=o,r):[t,e,i,o]}function N(t){return F(1/0,1/0,-1/0,-1/0,t)}function D(t,e){var i=t[0];return F(i,t=t[1],i,t,e)}function j(t,e,i,o,r){return B(r=N(r),t,e,i,o)}function k(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function G(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function U(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function B(t,e,i,o,r){for(;i<o;i+=r){var n=t,s=e[i],a=e[i+1];n[0]=Math.min(n[0],s),n[1]=Math.min(n[1],a),n[2]=Math.max(n[2],s),n[3]=Math.max(n[3],a)}return t}function V(t,e,i){var o;return(o=e.call(i,X(t)))||(o=e.call(i,Y(t)))||(o=e.call(i,Z(t)))?o:!!(o=e.call(i,q(t)))&&o}function W(t){var e=0;return tt(t)||(e=J(t)*H(t)),e}function X(t){return[t[0],t[1]]}function Y(t){return[t[2],t[1]]}function z(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function K(t,e,i,o,r){var n=e*o[0]/2;o=e*o[1]/2,e=Math.cos(i);var s=Math.sin(i);i=n*e,n*=s,e*=o;var a=o*s,h=t[0],l=t[1];t=h-i+a,o=h-i-a,s=h+i-a,i=h+i+a,a=l-n-e,h=l-n+e;var p=l+n+e;return n=l+n-e,F(Math.min(t,o,s,i),Math.min(a,h,p,n),Math.max(t,o,s,i),Math.max(a,h,p,n),r)}function H(t){return t[3]-t[1]}function $(t,e,i){return i=i||[1/0,1/0,-1/0,-1/0],Q(t,e)&&(i[0]=t[0]>e[0]?t[0]:e[0],i[1]=t[1]>e[1]?t[1]:e[1],i[2]=t[2]<e[2]?t[2]:e[2],i[3]=t[3]<e[3]?t[3]:e[3]),i}function q(t){return[t[0],t[3]]}function Z(t){return[t[2],t[3]]}function J(t){return t[2]-t[0]}function Q(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function tt(t){return t[2]<t[0]||t[3]<t[1]}function et(t,e){var i=(t[2]-t[0])/2*(e-1);e=(t[3]-t[1])/2*(e-1),t[0]-=i,t[2]+=i,t[1]-=e,t[3]+=e}function it(t,e,i){e(t=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]],t,2);var o=[t[0],t[2],t[4],t[6]],r=[t[1],t[3],t[5],t[7]];return F(e=Math.min.apply(null,o),t=Math.min.apply(null,r),o=Math.max.apply(null,o),r=Math.max.apply(null,r),i)}var ot="function"==typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),o=1,r=arguments.length;o<r;++o){var n=arguments[o];if(void 0!==n&&null!==n)for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])}return i};function rt(t){for(var e in t)delete t[e]}function nt(t){var e,i=[];for(e in t)i.push(t[e]);return i}function st(t){for(var e in t)return!1;return!e}function at(t){this.radius=t}function ht(t,e){for(var i=0,o=0,r=t.length;o<r-1;++o)i+=lt(t[o],t[o+1],e);return i}function lt(t,e,i){var o=_(t[1]),r=_(e[1]),n=(r-o)/2;return t=_(e[0]-t[0])/2,o=Math.sin(n)*Math.sin(n)+Math.sin(t)*Math.sin(t)*Math.cos(o)*Math.cos(r),2*i*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}function pt(t,e){for(var i=0,o=t.length,r=t[o-1][0],n=t[o-1][1],s=0;s<o;s++){var a=t[s][0],h=t[s][1];i+=_(a-r)*(2+Math.sin(_(n))+Math.sin(_(h))),r=a,n=h}return i*e*e/2}at.prototype.a=function(t){return pt(t,this.radius)},at.prototype.b=function(t,e){return lt(t,e,this.radius)},at.prototype.offset=function(t,e,i){var o=_(t[1]);e/=this.radius;var r=Math.asin(Math.sin(o)*Math.cos(e)+Math.cos(o)*Math.sin(e)*Math.cos(i));return[180*(_(t[0])+Math.atan2(Math.sin(i)*Math.sin(e)*Math.cos(o),Math.cos(e)-Math.sin(o)*Math.sin(r)))/Math.PI,180*r/Math.PI]};var ut={};ut.degrees=12741994*Math.PI/360,ut.ft=.3048,ut.m=1,ut["us-ft"]=1200/3937;var ct=null;function ft(t){this.wb=t.code,this.a=t.units,this.i=void 0!==t.extent?t.extent:null,this.oe=void 0!==t.worldExtent?t.worldExtent:null,this.b=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.c=void 0!==t.global&&t.global,this.g=!(!this.c||!this.i),this.j=t.getPointResolution,this.f=null,this.l=t.metersPerUnit;var e=t.code,i=ct||window.proj4;"function"==typeof i&&(void 0!==(e=i.defs(e))&&(void 0!==e.axis&&void 0===t.axisOrientation&&(this.b=e.axis),void 0===t.metersPerUnit&&(this.l=e.to_meter),void 0===t.units&&(this.a=e.units)))}function dt(t){ft.call(this,{code:t,units:"m",extent:gt,global:!0,worldExtent:vt,getPointResolution:function(t,e){return t/g(e[1]/6378137)}})}(t=ft.prototype).ml=function(){return this.wb},t.G=function(){return this.i},t.zo=function(){return this.a},t.Bc=function(){return this.l||ut[this.a]},t.Vl=function(){return this.oe},t.il=function(){return this.b},t.Gm=function(){return this.c},t.xq=function(t){this.c=t,this.g=!(!t||!this.i)},t.Si=function(t){this.i=t,this.g=!(!this.c||!t)},t.Sj=function(t){this.oe=t},t.wq=function(t){this.j=t},s(dt,ft);var yt=6378137*Math.PI,gt=[-yt,-yt,yt,yt],vt=[-180,-85,180,85],mt=[new dt("EPSG:3857"),new dt("EPSG:102100"),new dt("EPSG:102113"),new dt("EPSG:900913"),new dt("urn:ogc:def:crs:EPSG:6.18:3:3857"),new dt("urn:ogc:def:crs:EPSG::3857"),new dt("http://www.opengis.net/gml/srs/epsg.xml#3857")];function _t(t,e,i){var o=t.length;i=1<i?i:2,void 0===e&&(e=2<i?t.slice():Array(o));for(var r=0;r<o;r+=i){e[r]=yt*t[r]/180;var n=6378137*Math.log(Math.tan(Math.PI*(t[r+1]+90)/360));n>yt?n=yt:n<-yt&&(n=-yt),e[r+1]=n}return e}function bt(t,e,i){var o=t.length;i=1<i?i:2,void 0===e&&(e=2<i?t.slice():Array(o));for(var r=0;r<o;r+=i)e[r]=180*t[r]/yt,e[r+1]=360*Math.atan(Math.exp(t[r+1]/6378137))/Math.PI-90;return e}function xt(t,e){ft.call(this,{code:t,units:"degrees",extent:Et,axisOrientation:e,global:!0,metersPerUnit:St,worldExtent:Et})}s(xt,ft);var Et=[-180,-90,180,90],St=6378137*Math.PI/180,Tt=[new xt("CRS:84"),new xt("EPSG:4326","neu"),new xt("urn:ogc:def:crs:EPSG::4326","neu"),new xt("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new xt("urn:ogc:def:crs:OGC:1.3:CRS84"),new xt("urn:ogc:def:crs:OGC:2:84"),new xt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new xt("urn:x-ogc:def:crs:EPSG:4326","neu")],wt={},Ct={};function Rt(t,e,i){t=t.wb,e=e.wb,t in Ct||(Ct[t]={}),Ct[t][e]=i}function Pt(t,e){var i;return t in Ct&&e in Ct[t]&&(i=Ct[t][e]),i}var It=new at(6371008.8);function Mt(t,e,i,o){var r=(t=Dt(t)).j;return r?e=r(e,i):"degrees"==t.a&&!o||"degrees"==o||(e=(r=Gt(t,Dt("EPSG:4326")))(e=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2],e,2),e=(It.b(e.slice(0,2),e.slice(2,4))+It.b(e.slice(4,6),e.slice(6,8)))/2,void 0!==(t=o?ut[o]:t.Bc())&&(e/=t)),e}function Lt(t){t.forEach(At),t.forEach(function(e){t.forEach(function(t){e!==t&&Rt(e,t,Bt)})})}function At(t){wt[t.wb]=t,Rt(t,t,Bt)}function Ot(t){return t?"string"==typeof t?Dt(t):t:Dt("EPSG:3857")}function Ft(t,e,i,o){Rt(t=Dt(t),e=Dt(e),Nt(i)),Rt(e,t,Nt(o))}function Nt(t){return function(e,i,o){var r,n=e.length;for(o=void 0!==o?o:2,i=void 0!==i?i:Array(n),r=0;r<n;r+=o){var s=t([e[r],e[r+1]]);for(i[r]=s[0],i[r+1]=s[1],s=o-1;2<=s;--s)i[r+s]=e[r+s]}return i}}function Dt(t){var e=null;if(t instanceof ft)e=t;else if("string"==typeof t&&!(e=wt[t]||null)){var i=ct||window.proj4;"function"==typeof i&&void 0!==i.defs(t)&&At(e=new ft({code:t}))}return e}function jt(t,e){if(t===e)return!0;var i=t.a===e.a;return t.wb===e.wb?i:Gt(t,e)===Bt&&i}function kt(t,e){return Gt(t=Dt(t),e=Dt(e))}function Gt(t,e){var i=t.wb,o=e.wb,r=Pt(i,o);if(!r){var n=ct||window.proj4;if("function"==typeof n){var s=n.defs(i),a=n.defs(o);void 0!==s&&void 0!==a&&(s===a?Lt([e,t]):Ft(e,t,(r=n(o,i)).forward,r.inverse),r=Pt(i,o))}}return r||(r=Ut),r}function Ut(t,e){if(void 0!==e&&t!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];t=e}return t}function Bt(t,e){if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];t=e}else t=t.slice();return t}function Vt(t,e,i){return kt(e,i)(t,void 0,t.length)}function Wt(t,e,i){return it(t,e=kt(e,i))}function Xt(){Lt(mt),Lt(Tt),Tt.forEach(function(t){mt.forEach(function(e){Rt(t,e,_t),Rt(e,t,bt)})})}function Yt(t,e){return t>e?1:t<e?-1:0}function zt(t,e){return 0<=t.indexOf(e)}function Kt(t,e,i){var o=t.length;if(t[0]<=e)return 0;if(!(e<=t[o-1]))if(0<i){for(i=1;i<o;++i)if(t[i]<e)return i-1}else if(0>i){for(i=1;i<o;++i)if(t[i]<=e)return i}else for(i=1;i<o;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return o-1}function Ht(t,e){var i=Array.isArray(e)?e:[e],o=i.length;for(e=0;e<o;e++)t[t.length]=i[e]}function $t(t,e){for(var i,o=t.length>>>0,r=0;r<o;r++)if(e(i=t[r],r,t))return i;return null}function qt(t,e){var i=t.length;if(i!==e.length)return!1;for(var o=0;o<i;o++)if(t[o]!==e[o])return!1;return!0}function Zt(t){var e,i=Qs,o=t.length,r=Array(t.length);for(e=0;e<o;e++)r[e]={index:e,value:t[e]};for(r.sort(function(t,e){return i(t.value,e.value)||t.index-e.index}),e=0;e<t.length;e++)t[e]=r[e].value}function Jt(t,e){var i;return t.every(function(o,r){return i=r,!e(o,r,t)})?-1:i}function Qt(t,e,i,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=i,o):[t,e,i]}function te(t){if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.b=t.resolutions,d(function(t,e){var i=e||Yt;return t.every(function(e,o){return 0===o||!(0<(e=i(t[o-1],e))||0===e)})}(this.b,function(t,e){return e-t}),17),!t.origins)for(var e=0,i=this.b.length-1;e<i;++e)if(o){if(this.b[e]/this.b[e+1]!==o){o=void 0;break}}else var o=this.b[e]/this.b[e+1];this.l=o,this.maxZoom=this.b.length-1,this.g=void 0!==t.origin?t.origin:null,this.c=null,void 0!==t.origins&&(this.c=t.origins,d(this.c.length==this.b.length,20)),void 0===(o=t.extent)||this.g||this.c||(this.g=q(o)),d(!this.g&&this.c||this.g&&!this.c,18),this.i=null,void 0!==t.tileSizes&&(this.i=t.tileSizes,d(this.i.length==this.b.length,19)),this.j=void 0!==t.tileSize?t.tileSize:this.i?null:256,d(!this.j&&this.i||this.j&&!this.i,22),this.o=void 0!==o?o:null,this.a=null,this.f=[0,0],void 0!==t.sizes?this.a=t.sizes.map(function(t){return new u(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):o&&function(t,e){for(var i=t.b.length,o=Array(i),r=t.minZoom;r<i;++r)o[r]=re(t,e,r);t.a=o}(this,o)}Xt();var ee=[0,0,0];function ie(t,e,i,o,r){var n=null,s=e[0]-1;if(2===t.l)var a=e[1],h=e[2];else n=t.Ma(e,r);for(;s>=t.minZoom;){if(2===t.l?e=c(a=Math.floor(a/2),a,h=Math.floor(h/2),h,o):e=re(t,n,s,o),i.call(null,s,e))return!0;--s}return!1}function oe(t,e,i,o){return e[0]<t.maxZoom?2===t.l?c(t=2*e[1],t+1,e=2*e[2],e+1,i):re(t,o=t.Ma(e,o),e[0]+1,i):null}function re(t,e,i,o){se(t,e[0],e[1],i,!1,ee);var r=ee[1],n=ee[2];return se(t,e[2],e[3],i,!0,ee),c(r,ee[1],n,ee[2],o)}function ne(t,e){var i=t.Ic(e[0]),o=t.Ta(e[0]);return t=T(t.Za(e[0]),t.f),[i[0]+(e[1]+.5)*t[0]*o,i[1]+(e[2]+.5)*t[1]*o]}function se(t,e,i,o,r,n){var s=t.Ic(o),a=t.Ta(o);return t=T(t.Za(o),t.f),e=Math.floor((e-s[0])/a+(r?.5:0))/t[0],i=Math.floor((i-s[1])/a+(r?0:.5))/t[1],r?(e=Math.ceil(e)-1,i=Math.ceil(i)-1):(e=Math.floor(e),i=Math.floor(i)),Qt(o,e,i,n)}function ae(t){var e=t.f;return e||(e=pe(t),t.f=e),e}function he(t){var e={};return ot(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=Dt("EPSG:3857").G()),e.resolutions=le(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new te(e)}function le(t,e,i){e=void 0!==e?e:42;var o=H(t);for(t=J(t),i=T(void 0!==i?i:256),i=Math.max(t/i[0],o/i[1]),e+=1,o=Array(e),t=0;t<e;++t)o[t]=i/Math.pow(2,t);return o}function pe(t,e,i){return e=le(t=ue(t),e,i),new te({extent:t,origin:q(t),resolutions:e,tileSize:i})}function ue(t){var e=(t=Dt(t)).G();return e||(e=F(-(t=180*ut.degrees/t.Bc()),-t,t,t)),e}function ce(t){this.og=t.html}function fe(t,e,i,o){for(var r,n=0,s=t.length;n<s;++n)if((r=t[n]).listener===e&&r.Ch===i)return o&&(r.deleteIndex=n),r}function de(t,e){return(t=t.ab)?t[e]:void 0}function ye(t){var e=t.ab;return e||(e=t.ab={}),e}function ge(t,e){var i=de(t,e);if(i){for(var o=0,r=i.length;o<r;++o)t.removeEventListener(e,i[o].Dh),rt(i[o]);i.length=0,(i=t.ab)&&(delete i[e],0===Object.keys(i).length&&delete t.ab)}}function ve(t,e,i,o,r){var n=ye(t),s=n[e];return s||(s=n[e]=[]),(n=fe(s,i,o,!1))?r||(n.Eh=!1):(n={Ch:o,Eh:!!r,listener:i,target:t,type:e},t.addEventListener(e,function(t){return t.Dh=function(e){var i=t.listener,o=t.Ch||t.target;return t.Eh&&be(t),i.call(o,e)}}(n)),s.push(n)),n}function me(t,e,i,o){return ve(t,e,i,o,!0)}function _e(t,e,i,o){(t=de(t,e))&&(i=fe(t,i,o,!0))&&be(i)}function be(t){if(t&&t.target){t.target.removeEventListener(t.type,t.Dh);var e=de(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&ge(t.target,t.type)}rt(t)}}function xe(t){var e,i=ye(t);for(e in i)ge(t,e)}function Ee(){}function Se(t){t.Ub||(t.Ub=!0,t.ia())}function Te(t){this.type=t,this.target=null}function we(t){t.stopPropagation()}function Ce(){this.Wa={},this.qa={},this.oa={}}function Re(t,e){return e?e in t.oa:0<Object.keys(t.oa).length}function Pe(){Ce.call(this),this.g=0}function Ie(t){Pe.call(this),h(this),this.N={},void 0!==t&&this.H(t)}(t=te.prototype).Vf=function(t,e,i){for(var o=(t=re(this,t,e)).fa,r=t.la;o<=r;++o)for(var n=t.ea,s=t.ka;n<=s;++n)i([e,o,n])},t.G=function(){return this.o},t.mj=function(){return this.maxZoom},t.nj=function(){return this.minZoom},t.Ic=function(t){return this.g?this.g:this.c[t]},t.Ta=function(t){return this.b[t]},t.oj=function(){return this.b},t.Ma=function(t,e){var i=this.Ic(t[0]),o=this.Ta(t[0]),r=T(this.Za(t[0]),this.f),n=i[0]+t[1]*r[0]*o;return F(n,t=i[1]+t[2]*r[1]*o,n+r[0]*o,t+r[1]*o,e)},t.Le=function(t,e,i){var o=t[0],r=t[1];t=this.Dc(e);var n=e/this.Ta(t),s=this.Ic(t),a=T(this.Za(t),this.f);return o=n*Math.floor((o-s[0])/e+0)/a[0],e=n*Math.floor((r-s[1])/e+.5)/a[1],Qt(t,o=Math.floor(o),e=Math.floor(e),i)},t.jg=function(t,e,i){return se(this,t[0],t[1],e,!1,i)},t.Za=function(t){return this.j?this.j:this.i[t]},t.Dc=function(t,e){return y(Kt(this.b,t,e||0),this.minZoom,this.maxZoom)},ce.prototype.b=function(){return this.og},Ee.prototype.Ub=!1,Ee.prototype.ia=a,Te.prototype.preventDefault=Te.prototype.stopPropagation=function(){this.sj=!0},s(Ce,Ee),Ce.prototype.addEventListener=function(t,e){var i=this.oa[t];i||(i=this.oa[t]=[]),-1===i.indexOf(e)&&i.push(e)},Ce.prototype.b=function(t){var e="string"==typeof t?new Te(t):t;t=e.type,e.target=this;var i=this.oa[t];if(i){t in this.qa||(this.qa[t]=0,this.Wa[t]=0),++this.qa[t];for(var o=0,r=i.length;o<r;++o)if(!1===i[o].call(this,e)||e.sj){var n=!1;break}if(--this.qa[t],0===this.qa[t]){for(e=this.Wa[t],delete this.Wa[t];e--;)this.removeEventListener(t,a);delete this.qa[t]}return n}},Ce.prototype.ia=function(){xe(this)},Ce.prototype.removeEventListener=function(t,e){var i=this.oa[t];i&&(e=i.indexOf(e),t in this.Wa?(i[e]=a,++this.Wa[t]):(i.splice(e,1),0===i.length&&delete this.oa[t]))},s(Pe,Ce),(t=Pe.prototype).u=function(){++this.g,this.b("change")},t.K=function(){return this.g},t.I=function(t,e,i){if(Array.isArray(t)){for(var o=t.length,r=Array(o),n=0;n<o;++n)r[n]=ve(this,t[n],e,i);return r}return ve(this,t,e,i)},t.once=function(t,e,i){if(Array.isArray(t)){for(var o=t.length,r=Array(o),n=0;n<o;++n)r[n]=me(this,t[n],e,i);return r}return me(this,t,e,i)},t.J=function(t,e,i){if(Array.isArray(t))for(var o=0,r=t.length;o<r;++o)_e(this,t[o],e,i);else _e(this,t,e,i)},s(Ie,Pe);var Me={};function Le(t){return Me.hasOwnProperty(t)?Me[t]:Me[t]="change:"+t}function Ae(t,e,i){var o=Le(e);t.b(new Oe(o,e,i)),t.b(new Oe("propertychange",e,i))}function Oe(t,e,i){Te.call(this,t),this.key=e,this.oldValue=i}function Fe(t,e){if(Ie.call(this),this.c=!!(e||{}).unique,this.a=t||[],this.c)for(t=0,e=this.a.length;t<e;++t)De(this,this.a[t],t);Ne(this)}function Ne(t){t.set(je,t.a.length)}function De(t,e,i){for(var o=0,r=t.a.length;o<r;++o)if(t.a[o]===e&&o!==i)throw new p(58)}(t=Ie.prototype).get=function(t){var e;return this.N.hasOwnProperty(t)&&(e=this.N[t]),e},t.P=function(){return Object.keys(this.N)},t.L=function(){return ot({},this.N)},t.set=function(t,e,i){i?this.N[t]=e:(i=this.N[t],this.N[t]=e,i!==e&&Ae(this,t,i))},t.H=function(t,e){for(var i in t)this.set(i,t[i],e)},t.R=function(t,e){if(t in this.N){var i=this.N[t];delete this.N[t],e||Ae(this,t,i)}},s(Oe,Te),s(Fe,Ie),(t=Fe.prototype).clear=function(){for(;0<this.kc();)this.pop()},t.qg=function(t){var e,i=0;for(e=t.length;i<e;++i)this.push(t[i]);return this},t.forEach=function(t,e){t=e?t.bind(e):t;for(var i=0,o=(e=this.a).length;i<o;++i)t(e[i],i,e)},t.Xm=function(){return this.a},t.item=function(t){return this.a[t]},t.kc=function(){return this.get(je)},t.Re=function(t,e){this.c&&De(this,e),this.a.splice(t,0,e),Ne(this),this.b(new ke("add",e))},t.pop=function(){return this.Wg(this.kc()-1)},t.push=function(t){this.c&&De(this,t);var e=this.kc();return this.Re(e,t),this.kc()},t.remove=function(t){var e,i=this.a,o=0;for(e=i.length;o<e;++o)if(i[o]===t)return this.Wg(o)},t.Wg=function(t){var e=this.a[t];return this.a.splice(t,1),Ne(this),this.b(new ke("remove",e)),e},t.rq=function(t,e){var i=this.kc();if(t<i)this.c&&De(this,e,t),i=this.a[t],this.a[t]=e,this.b(new ke("remove",i)),this.b(new ke("add",e));else{for(;i<t;++i)this.Re(i,void 0);this.Re(t,e)}};var je="length";function ke(t,e){Te.call(this,t),this.element=e}function Ge(t,e,i){Te.call(this,t),this.map=e,this.frameState=void 0!==i?i:null}function Ue(t,e,i,o,r){Ge.call(this,t,e,r),this.originalEvent=i,this.pixel=e.ud(i),this.coordinate=e.Ra(this.pixel),this.dragging=void 0!==o&&o}s(ke,Te),s(Ge,Te),s(Ue,Ge),Ue.prototype.preventDefault=function(){Ge.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},Ue.prototype.stopPropagation=function(){Ge.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var Be=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Ve(t,e){var i,o,r=Be.length;for(o=0;o<r;++o)try{if(i=t.getContext(Be[o],e))return i}catch(t){}return null}var We,Xe,Ye="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",ze=-1!==Ye.indexOf("firefox"),Ke=-1!==Ye.indexOf("safari")&&-1==Ye.indexOf("chrom"),He=-1!==Ye.indexOf("webkit")&&-1==Ye.indexOf("edge"),$e=-1!==Ye.indexOf("macintosh"),qe=window.devicePixelRatio||1,Ze=!1,Je=function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d");return!!t&&(void 0!==t.setLineDash&&(Ze=!0),!0)}catch(t){return!1}}(),Qe="DeviceOrientationEvent"in window,ti="geolocation"in navigator,ei="ontouchstart"in window,ii="PointerEvent"in window,oi=!!navigator.msPointerEnabled,ri=!1,ni=[];if("WebGLRenderingContext"in window)try{var si=Ve(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});si&&(ri=!0,Xe=si.getParameter(si.MAX_TEXTURE_SIZE),ni=si.getSupportedExtensions())}catch(Ar){}We=ri,i=ni,e=Xe;var ai={gr:"singleclick",Wq:"click",Xq:"dblclick",$q:"pointerdrag",cr:"pointermove",Zq:"pointerdown",fr:"pointerup",er:"pointerover",dr:"pointerout",ar:"pointerenter",br:"pointerleave",Yq:"pointercancel"};function hi(t,e,i,o,r){Ue.call(this,t,e,i.b,o,r),this.b=i}function li(t,e){this.b=t,this.i=e}function pi(t){li.call(this,t,{mousedown:this.Jm,mousemove:this.Km,mouseup:this.Nm,mouseover:this.Mm,mouseout:this.Lm}),this.a=t.g,this.g=[]}function ui(t,e){t=t.g;var i=e.clientX;e=e.clientY;for(var o,r=0,n=t.length;r<n&&(o=t[r]);r++){var s=Math.abs(e-o[1]);if(25>=Math.abs(i-o[0])&&25>=s)return!0}return!1}function ci(t){var e=Ci(t,t),i=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),i()},e.pointerId=1,e.isPrimary=!0,e.pointerType="mouse",e}function fi(t){li.call(this,t,{MSPointerDown:this.Sm,MSPointerMove:this.Tm,MSPointerUp:this.Wm,MSPointerOut:this.Um,MSPointerOver:this.Vm,MSPointerCancel:this.Rm,MSGotPointerCapture:this.Pm,MSLostPointerCapture:this.Qm}),this.a=t.g,this.g=["","unavailable","touch","pen","mouse"]}function di(t,e){var i=e;return"number"==typeof e.pointerType&&((i=Ci(e,e)).pointerType=t.g[e.pointerType]),i}function yi(t){li.call(this,t,{pointerdown:this.Kp,pointermove:this.Lp,pointerup:this.Op,pointerout:this.Mp,pointerover:this.Np,pointercancel:this.Jp,gotpointercapture:this.Wl,lostpointercapture:this.Hm})}function gi(t,e,i){Te.call(this,t),this.b=e,t=i||{},this.buttons=function(t){if(t.buttons||vi)t=t.buttons;else switch(t.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}return t}(t),this.pressure=function(t,e){return t.pressure?t.pressure:e?.5:0}(t,this.buttons),this.bubbles="bubbles"in t&&t.bubbles,this.cancelable="cancelable"in t&&t.cancelable,this.view="view"in t?t.view:null,this.detail="detail"in t?t.detail:null,this.screenX="screenX"in t?t.screenX:0,this.screenY="screenY"in t?t.screenY:0,this.clientX="clientX"in t?t.clientX:0,this.clientY="clientY"in t?t.clientY:0,this.ctrlKey="ctrlKey"in t&&t.ctrlKey,this.altKey="altKey"in t&&t.altKey,this.shiftKey="shiftKey"in t&&t.shiftKey,this.metaKey="metaKey"in t&&t.metaKey,this.button="button"in t?t.button:0,this.relatedTarget="relatedTarget"in t?t.relatedTarget:null,this.pointerId="pointerId"in t?t.pointerId:0,this.width="width"in t?t.width:0,this.height="height"in t?t.height:0,this.tiltX="tiltX"in t?t.tiltX:0,this.tiltY="tiltY"in t?t.tiltY:0,this.pointerType="pointerType"in t?t.pointerType:"",this.isPrimary="isPrimary"in t&&t.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}s(hi,Ue),s(pi,li),(t=pi.prototype).Jm=function(t){if(!ui(this,t)){1..toString()in this.a&&this.cancel(t);var e=ci(t);this.a[1..toString()]=t,Mi(this.b,"pointerdown",e,t)}},t.Km=function(t){if(!ui(this,t)){var e=ci(t);Mi(this.b,"pointermove",e,t)}},t.Nm=function(t){if(!ui(this,t)){var e=this.a[1..toString()];e&&e.button===t.button&&(e=ci(t),Mi(this.b,"pointerup",e,t),delete this.a[1..toString()])}},t.Mm=function(t){if(!ui(this,t)){var e=ci(t);Ii(this.b,e,t)}},t.Lm=function(t){if(!ui(this,t)){var e=ci(t);Pi(this.b,e,t)}},t.cancel=function(t){var e=ci(t);this.b.cancel(e,t),delete this.a[1..toString()]},s(fi,li),(t=fi.prototype).Sm=function(t){this.a[t.pointerId.toString()]=t;var e=di(this,t);Mi(this.b,"pointerdown",e,t)},t.Tm=function(t){var e=di(this,t);Mi(this.b,"pointermove",e,t)},t.Wm=function(t){var e=di(this,t);Mi(this.b,"pointerup",e,t),delete this.a[t.pointerId.toString()]},t.Um=function(t){var e=di(this,t);Pi(this.b,e,t)},t.Vm=function(t){var e=di(this,t);Ii(this.b,e,t)},t.Rm=function(t){var e=di(this,t);this.b.cancel(e,t),delete this.a[t.pointerId.toString()]},t.Qm=function(t){this.b.b(new gi("lostpointercapture",t,t))},t.Pm=function(t){this.b.b(new gi("gotpointercapture",t,t))},s(yi,li),(t=yi.prototype).Kp=function(t){Li(this.b,t)},t.Lp=function(t){Li(this.b,t)},t.Op=function(t){Li(this.b,t)},t.Mp=function(t){Li(this.b,t)},t.Np=function(t){Li(this.b,t)},t.Jp=function(t){Li(this.b,t)},t.Hm=function(t){Li(this.b,t)},t.Wl=function(t){Li(this.b,t)},s(gi,Te);var vi=!1;try{vi=1===new MouseEvent("click",{buttons:1}).buttons}catch(Ar){}function mi(t,e){li.call(this,t,{touchstart:this.Qq,touchmove:this.Pq,touchend:this.Oq,touchcancel:this.Nq}),this.a=t.g,this.j=e,this.g=void 0,this.f=0,this.c=void 0}function _i(t,e,i){return(e=Ci(e,i)).pointerId=i.identifier+2,e.bubbles=!0,e.cancelable=!0,e.detail=t.f,e.button=0,e.buttons=1,e.width=i.webkitRadiusX||i.radiusX||0,e.height=i.webkitRadiusY||i.radiusY||0,e.pressure=i.webkitForce||i.force||.5,e.isPrimary=t.g===i.identifier,e.pointerType="touch",e.clientX=i.clientX,e.clientY=i.clientY,e.screenX=i.screenX,e.screenY=i.screenY,e}function bi(t,e,i){function o(){e.preventDefault()}var r,n=Array.prototype.slice.call(e.changedTouches),s=n.length;for(r=0;r<s;++r){var a=_i(t,e,n[r]);a.preventDefault=o,i.call(t,e,a)}}function xi(t,e){var i=t.j.g;if(e=e.changedTouches[0],t.g===e.identifier){var o=[e.clientX,e.clientY];i.push(o),setTimeout(function(){var t=i.indexOf(o);-1<t&&i.splice(t,1)},2500)}}function Ei(t){Ce.call(this),this.f=t,this.g={},this.i={},this.a=[],ii?Si(this,new yi(this)):oi?Si(this,new fi(this)):(Si(this,t=new pi(this)),ei&&Si(this,new mi(this,t))),t=this.a.length;for(var e,i=0;i<t;i++)e=this.a[i],Ti(this,Object.keys(e.i))}function Si(t,e){var i=Object.keys(e.i);i&&(i.forEach(function(t){var i=e.i[t];i&&(this.i[t]=i.bind(e))},t),t.a.push(e))}function Ti(t,e){e.forEach(function(t){ve(this.f,t,this.c,this)},t)}function wi(t,e){e.forEach(function(t){_e(this.f,t,this.c,this)},t)}function Ci(t,e){for(var i,o={},r=0,n=Ai.length;r<n;r++)o[i=Ai[r][0]]=t[i]||e[i]||Ai[r][1];return o}function Ri(t,e,i){e.bubbles=!1,Mi(t,"pointerleave",e,i)}function Pi(t,e,i){t.out(e,i);var o=e.target,r=e.relatedTarget;o&&r&&o.contains(r)||Ri(t,e,i)}function Ii(t,e,i){e.bubbles=!0,Mi(t,"pointerover",e,i);var o=e.target,r=e.relatedTarget;o&&r&&o.contains(r)||(e.bubbles=!1,Mi(t,"pointerenter",e,i))}function Mi(t,e,i,o){t.b(new gi(e,o,i))}function Li(t,e){t.b(new gi(e.type,e,e))}s(mi,li),(t=mi.prototype).Ej=function(){this.f=0,this.c=void 0},t.Qq=function(t){var e=t.touches,i=Object.keys(this.a),o=i.length;if(o>=e.length){var r,n=[];for(r=0;r<o;++r){var s,a=i[r],h=this.a[a];if(!(s=1==a))t:{for(var l=e.length,p=0;p<l;p++)if((s=e[p]).identifier===a-2){s=!0;break t}s=!1}s||n.push(h.out)}for(r=0;r<n.length;++r)this.Of(t,n[r])}e=t.changedTouches[0],(0===(i=Object.keys(this.a).length)||1===i&&1..toString()in this.a)&&(this.g=e.identifier,void 0!==this.c&&clearTimeout(this.c)),xi(this,t),this.f++,bi(this,t,this.Fp)},t.Fp=function(t,e){this.a[e.pointerId]={target:e.target,out:e,pj:e.target};var i=this.b;e.bubbles=!0,Mi(i,"pointerover",e,t),i=this.b,e.bubbles=!1,Mi(i,"pointerenter",e,t),Mi(this.b,"pointerdown",e,t)},t.Pq=function(t){t.preventDefault(),bi(this,t,this.Om)},t.Om=function(t,e){var i=this.a[e.pointerId];if(i){var o=i.out,r=i.pj;Mi(this.b,"pointermove",e,t),o&&r!==e.target&&(o.relatedTarget=e.target,e.relatedTarget=r,o.target=r,e.target?(Pi(this.b,o,t),Ii(this.b,e,t)):(e.target=r,e.relatedTarget=null,this.Of(t,e))),i.out=e,i.pj=e.target}},t.Oq=function(t){xi(this,t),bi(this,t,this.Rq)},t.Rq=function(t,e){Mi(this.b,"pointerup",e,t),this.b.out(e,t),Ri(this.b,e,t),delete this.a[e.pointerId],e.isPrimary&&(this.g=void 0,this.c=setTimeout(this.Ej.bind(this),200))},t.Nq=function(t){bi(this,t,this.Of)},t.Of=function(t,e){this.b.cancel(e,t),this.b.out(e,t),Ri(this.b,e,t),delete this.a[e.pointerId],e.isPrimary&&(this.g=void 0,this.c=setTimeout(this.Ej.bind(this),200))},s(Ei,Ce),Ei.prototype.c=function(t){var e=this.i[t.type];e&&e(t)},Ei.prototype.out=function(t,e){t.bubbles=!0,Mi(this,"pointerout",t,e)},Ei.prototype.cancel=function(t,e){Mi(this,"pointercancel",t,e)},Ei.prototype.ia=function(){for(var t,e=this.a.length,i=0;i<e;i++)t=this.a[i],wi(this,Object.keys(t.i));Ce.prototype.ia.call(this)};var Ai=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Oi(t,e){Ce.call(this),this.g=t,this.j=0,this.l=!1,this.i=[],this.D=e?e*qe:qe,this.c=null,t=this.g.a,this.N=0,this.o={},this.f=new Ei(t),this.a=null,this.s=ve(this.f,"pointerdown",this.pm,this),this.v=ve(this.f,"pointermove",this.mq,this)}function Fi(t,e){"pointerup"==e.type||"pointercancel"==e.type?delete t.o[e.pointerId]:"pointerdown"==e.type&&(t.o[e.pointerId]=!0),t.N=Object.keys(t.o).length}function Ni(t,e){return Math.abs(e.clientX-t.c.clientX)>t.D||Math.abs(e.clientY-t.c.clientY)>t.D}function Di(t,e){this.s=t,this.c=e,this.b=[],this.g=[],this.a={}}function ji(t){var e=t.b,i=t.g,o=e[0];return 1==e.length?(e.length=0,i.length=0):(e[0]=e.pop(),i[0]=i.pop(),ki(t,0)),e=t.c(o),delete t.a[e],o}function ki(t,e){for(var i=t.b,o=t.g,r=i.length,n=i[e],s=o[e],a=e;e<r>>1;){var h=2*e+1,l=2*e+2;h=l<r&&o[l]<o[h]?l:h,i[e]=i[h],o[e]=o[h],e=h}i[e]=n,o[e]=s,Gi(t,a,e)}function Gi(t,e,i){var o=t.b;t=t.g;for(var r=o[i],n=t[i];i>e;){var s=i-1>>1;if(!(t[s]>n))break;o[i]=o[s],t[i]=t[s],i=s}o[i]=r,t[i]=n}function Ui(t){var e,i=t.s,o=t.b,r=t.g,n=0,s=o.length;for(e=0;e<s;++e){var a=o[e],h=i(a);1/0==h?delete t.a[t.c(a)]:(r[n]=h,o[n++]=a)}for(o.length=n,r.length=n,i=(t.b.length>>1)-1;0<=i;i--)ki(t,i)}function Bi(t,e){Di.call(this,function(e){return t.apply(null,e)},function(t){return t[0].lb()}),this.v=e,this.j=0,this.f={}}function Vi(t,e,i){for(var o,r,n,s=0,a=!1;t.j<e&&s<i&&0<t.b.length;)n=(r=ji(t)[0]).lb(),5===(o=r.getState())?a=!0:0!==o||n in t.f||(t.f[n]=!0,++t.j,++s,r.load());0===s&&a&&t.v()}function Wi(t){return t}function Xi(t){if(void 0!==t)return 0}function Yi(t,e){if(void 0!==t)return t+e}function zi(t,e){return 2<(e=-1===(e=(t=void 0!==e?t.toFixed(e):""+t).indexOf("."))?t.length:e)?t:Array(3-e).join("0")+t}function Ki(t){t=(""+t).split(".");for(var e=["1","3"],i=0;i<Math.max(t.length,e.length);i++){var o=parseInt(t[i]||"0",10),r=parseInt(e[i]||"0",10);if(o>r)return 1;if(r>o)return-1}return 0}function Hi(t,e){return t[0]+=e[0],t[1]+=e[1],t}function $i(t,e){var i=t[0];t=t[1];var o=e[0],r=e[1];e=o[0],o=o[1];var n=r[0],s=n-e,a=(r=r[1])-o;return 0>=(i=0===s&&0===a?0:(s*(i-e)+a*(t-o))/(s*s+a*a||0))?(t=e,i=o):1<=i?(t=n,i=r):(t=e+i*s,i=o+i*a),[t,i]}function qi(t,e,i){e=b(e+180,360)-180;var o=Math.abs(3600*e);i=i||0;var r=Math.pow(10,i),n=Math.floor(o/3600),s=Math.floor((o-3600*n)/60);return 60<=(o=Math.ceil((o-3600*n-60*s)*r)/r)&&(o=0,s+=1),60<=s&&(s=0,n+=1),n+"° "+zi(s)+"′ "+zi(o,i)+"″"+(0==e?"":" "+t.charAt(0>e?1:0))}function Zi(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function Ji(t,e){for(var i=!0,o=t.length-1;0<=o;--o)if(t[o]!=e[o]){i=!1;break}return i}function Qi(t,e){var i=Math.cos(e);e=Math.sin(e);var o=t[1]*i+t[0]*e;return t[0]=t[0]*i-t[1]*e,t[1]=o,t}function to(t,e){t[0]*=e,t[1]*=e}function eo(t,e){var i=t[0]-e[0];return i*i+(t=t[1]-e[1])*t}function io(t,e){return Math.sqrt(eo(t,e))}function oo(t,e){return eo(t,$i(t,e))}function ro(t,e){return Zi(t,"{x}, {y}",e)}function no(t){return Math.pow(t,3)}function so(t){return 1-no(1-t)}function ao(t){return 3*t*t-2*t*t*t}function ho(t){return t}function lo(){return!0}function po(){return!1}function uo(t,e,i,o,r,n){for(var s=n||[],a=0;e<i;e+=o){var h=t[e],l=t[e+1];s[a++]=r[0]*h+r[2]*l+r[4],s[a++]=r[1]*h+r[3]*l+r[5]}return n&&s.length!=a&&(s.length=a),s}function co(t,e,i,o,r,n,s){for(var a,h=s||[],l=0;e<i;e+=o)for(h[l++]=t[e]+r,h[l++]=t[e+1]+n,a=e+2;a<e+o;++a)h[l++]=t[a];return s&&h.length!=l&&(h.length=l),h}s(Oi,Ce),(t=Oi.prototype).ci=function(t){Fi(this,t);var e=new hi("pointerup",this.g,t);this.b(e),e.sj||this.l||0!==t.button||function(t,e){var i=new hi("click",t.g,e);t.b(i),0!==t.j?(clearTimeout(t.j),t.j=0,i=new hi("dblclick",t.g,e),t.b(i)):t.j=setTimeout(function(){this.j=0;var t=new hi("singleclick",this.g,e);this.b(t)}.bind(t),250)}(this,this.c),0===this.N&&(this.i.forEach(be),this.i.length=0,this.l=!1,this.c=null,Se(this.a),this.a=null)},t.pm=function(t){Fi(this,t);var e=new hi("pointerdown",this.g,t);this.b(e),this.c=t,0===this.i.length&&(this.a=new Ei(document),this.i.push(ve(this.a,"pointermove",this.mn,this),ve(this.a,"pointerup",this.ci,this),ve(this.f,"pointercancel",this.ci,this)))},t.mn=function(t){if(Ni(this,t)){this.l=!0;var e=new hi("pointerdrag",this.g,t,this.l);this.b(e)}t.preventDefault()},t.mq=function(t){this.b(new hi(t.type,this.g,t,!(!this.c||!Ni(this,t))))},t.ia=function(){this.v&&(be(this.v),this.v=null),this.s&&(be(this.s),this.s=null),this.i.forEach(be),this.i.length=0,this.a&&(Se(this.a),this.a=null),this.f&&(Se(this.f),this.f=null),Ce.prototype.ia.call(this)},Di.prototype.clear=function(){this.b.length=0,this.g.length=0,rt(this.a)},Di.prototype.i=function(t){d(!(this.c(t)in this.a),31);var e=this.s(t);return 1/0!=e&&(this.b.push(t),this.g.push(e),this.a[this.c(t)]=!0,Gi(this,0,this.b.length-1),!0)},s(Bi,Di),Bi.prototype.i=function(t){var e=Di.prototype.i.call(this,t);return e&&ve(t[0],"change",this.l,this),e},Bi.prototype.l=function(t){var e=(t=t.target).getState();2!==e&&3!==e&&4!==e&&5!==e||(_e(t,"change",this.l,this),(t=t.lb())in this.f&&(delete this.f[t],--this.j),this.v())};var fo=Array(6);function yo(t){return vo(t,1,0,0,1,0,0)}function go(t,e){var i=t[0],o=t[1],r=t[2],n=t[3],s=t[4],a=t[5],h=e[0],l=e[1],p=e[2],u=e[3],c=e[4];return e=e[5],t[0]=i*h+r*l,t[1]=o*h+n*l,t[2]=i*p+r*u,t[3]=o*p+n*u,t[4]=i*c+r*e+s,t[5]=o*c+n*e+a,t}function vo(t,e,i,o,r,n,s){return t[0]=e,t[1]=i,t[2]=o,t[3]=r,t[4]=n,t[5]=s,t}function mo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function _o(t,e){var i=e[0],o=e[1];return e[0]=t[0]*i+t[2]*o+t[4],e[1]=t[1]*i+t[3]*o+t[5],e}function bo(t,e){var i=Math.cos(e);e=Math.sin(e),go(t,vo(fo,i,e,-e,i,0,0))}function xo(t,e,i){return go(t,vo(fo,e,0,0,i,0,0))}function Eo(t,e,i){go(t,vo(fo,1,0,0,1,e,i))}function So(t,e,i,o,r,n,s,a){var h=Math.sin(n);return n=Math.cos(n),t[0]=o*n,t[1]=r*h,t[2]=-o*h,t[3]=r*n,t[4]=s*o*n-a*o*h+e,t[5]=s*r*h+a*r*n+i,t}function To(t){var e=t[0]*t[3]-t[1]*t[2];d(0!==e,32);var i=t[0],o=t[1],r=t[2],n=t[3],s=t[4],a=t[5];return t[0]=n/e,t[1]=-o/e,t[2]=-r/e,t[3]=i/e,t[4]=(r*a-n*s)/e,t[5]=-(i*a-o*s)/e,t}function wo(){Ie.call(this),this.s=[1/0,1/0,-1/0,-1/0],this.v=-1,this.i={},this.l=this.f=0,this.O=[1,0,0,1,0,0]}function Co(){wo.call(this),this.ja="XY",this.a=2,this.A=null}function Ro(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function Po(t,e,i){t.a=Ro(e),t.ja=e,t.A=i}function Io(t,e,i,o){if(e)i=Ro(e);else{for(e=0;e<o;++e){if(0===i.length)return t.ja="XY",void(t.a=2);i=i[0]}var r;2==(i=i.length)?r="XY":3==i?r="XYZ":4==i&&(r="XYZM"),e=r}t.ja=e,t.a=i}function Mo(t,e,i,o){for(var r=0,n=t[i-o],s=t[i-o+1];e<i;e+=o){var a=t[e],h=t[e+1];r+=s*a-n*h,n=a,s=h}return r/2}function Lo(t,e,i,o){var r,n=0,s=0;for(r=i.length;s<r;++s){var a=i[s];n+=Mo(t,e,a,o),e=a}return n}function Ao(t,e,i,o,r,n,s){var a=t[e],h=t[e+1],l=t[i]-a,p=t[i+1]-h;if(0!==l||0!==p)if(1<(n=((r-a)*l+(n-h)*p)/(l*l+p*p)))e=i;else if(0<n){for(r=0;r<o;++r)s[r]=x(t[e+r],t[i+r],n);return void(s.length=o)}for(r=0;r<o;++r)s[r]=t[e+r];s.length=o}function Oo(t,e,i,o,r){var n=t[e],s=t[e+1];for(e+=o;e<i;e+=o){var a=t[e],h=t[e+1];(n=m(n,s,a,h))>r&&(r=n),n=a,s=h}return r}function Fo(t,e,i,o,r){var n,s=0;for(n=i.length;s<n;++s){var a=i[s];r=Oo(t,e,a,o,r),e=a}return r}function No(t,e,i,o,r,n,s,a,h,l,p){if(e==i)return l;if(0===r){var u=m(s,a,t[e],t[e+1]);if(u<l){for(p=0;p<o;++p)h[p]=t[e+p];return h.length=o,u}return l}for(var c=p||[NaN,NaN],f=e+o;f<i;)if(Ao(t,f-o,f,o,s,a,c),(u=m(s,a,c[0],c[1]))<l){for(l=u,p=0;p<o;++p)h[p]=c[p];h.length=o,f+=o}else f+=o*Math.max((Math.sqrt(u)-Math.sqrt(l))/r|0,1);if(n&&(Ao(t,i-o,e,o,s,a,c),(u=m(s,a,c[0],c[1]))<l)){for(l=u,p=0;p<o;++p)h[p]=c[p];h.length=o}return l}function Do(t,e,i,o,r,n,s,a,h,l,p){var u;p=p||[NaN,NaN];var c=0;for(u=i.length;c<u;++c){var f=i[c];l=No(t,e,f,o,r,n,s,a,h,l,p),e=f}return l}function jo(t,e){var i,o=0,r=0;for(i=e.length;r<i;++r)t[o++]=e[r];return o}function ko(t,e,i,o){var r,n=0;for(r=i.length;n<r;++n){var s,a=i[n];for(s=0;s<o;++s)t[e++]=a[s]}return e}function Go(t,e,i,o,r){r=r||[];var n,s=0,a=0;for(n=i.length;a<n;++a)e=ko(t,e,i[a],o),r[s++]=e;return r.length=s,r}function Uo(t,e,i,o,r){r=void 0!==r?r:[];for(var n=0;e<i;e+=o)r[n++]=t.slice(e,e+o);return r.length=n,r}function Bo(t,e,i,o,r){r=void 0!==r?r:[];var n,s=0,a=0;for(n=i.length;a<n;++a){var h=i[a];r[s++]=Uo(t,e,h,o,r[s]),e=h}return r.length=s,r}function Vo(t,e,i,o,r){r=void 0!==r?r:[];var n,s=0,a=0;for(n=i.length;a<n;++a){var h=i[a];r[s++]=Bo(t,e,h,o,r[s]),e=h[h.length-1]}return r.length=s,r}function Wo(t,e,i,o,r,n,s){var a=(i-e)/o;if(3>a){for(;e<i;e+=o)n[s++]=t[e],n[s++]=t[e+1];return s}var h=Array(a);h[0]=1,h[a-1]=1,i=[e,i-o];for(var l,p=0;0<i.length;){var u=i.pop(),c=i.pop(),f=0,d=t[c],y=t[c+1],g=t[u],m=t[u+1];for(l=c+o;l<u;l+=o){var _=v(t[l],t[l+1],d,y,g,m);_>f&&(p=l,f=_)}f>r&&(h[(p-e)/o]=1,c+o<p&&i.push(c,p),p+o<u&&i.push(p,u))}for(l=0;l<a;++l)h[l]&&(n[s++]=t[e+l*o],n[s++]=t[e+l*o+1]);return s}function Xo(t,e,i,o,r,n,s,a){var h,l=0;for(h=i.length;l<h;++l){var p=i[l];t:{var u=t,c=p,f=o,d=r,y=n,g=s;if(e!=c){var v=d*Math.round(u[e]/d),m=d*Math.round(u[e+1]/d);e+=f,y[g++]=v,y[g++]=m;do{var _=d*Math.round(u[e]/d);if(s=d*Math.round(u[e+1]/d),(e+=f)==c){y[g++]=_,y[g++]=s,s=g;break t}}while(_==v&&s==m);for(;e<c;){var b=d*Math.round(u[e]/d),x=d*Math.round(u[e+1]/d);if(e+=f,b!=_||x!=s){var E=_-v,S=s-m,T=b-v,w=x-m;E*w==S*T&&(0>E&&T<E||E==T||0<E&&T>E)&&(0>S&&w<S||S==w||0<S&&w>S)||(y[g++]=_,y[g++]=s,v=_,m=s),_=b,s=x}}y[g++]=_,y[g++]=s}s=g}a.push(s),e=p}return s}function Yo(t,e){Co.call(this),this.c=this.j=-1,this.na(t,e)}function zo(t,e,i){Po(t,e,i),t.u()}function Ko(t,e){Co.call(this),this.na(t,e)}function Ho(t,e,i,o,r){return!V(r,function(r){return!$o(t,e,i,o,r[0],r[1])})}function $o(t,e,i,o,r,n){for(var s=0,a=t[i-o],h=t[i-o+1];e<i;e+=o){var l=t[e],p=t[e+1];h<=n?p>n&&0<(l-a)*(n-h)-(r-a)*(p-h)&&s++:p<=n&&0>(l-a)*(n-h)-(r-a)*(p-h)&&s--,a=l,h=p}return 0!==s}function qo(t,e,i,o,r,n){if(0===i.length||!$o(t,e,i[0],o,r,n))return!1;var s;for(e=1,s=i.length;e<s;++e)if($o(t,i[e-1],i[e],o,r,n))return!1;return!0}function Zo(t,e,i,o,r,n,s){for(var a,h,l,p,u,c=r[n+1],f=[],d=0,y=i.length;d<y;++d){var g=i[d];for(l=t[g-o],u=t[g-o+1],a=e;a<g;a+=o)p=t[a],h=t[a+1],(c<=u&&h<=c||u<=c&&c<=h)&&(l=(c-u)/(h-u)*(p-l)+l,f.push(l)),l=p,u=h}for(d=NaN,y=-1/0,f.sort(Yt),l=f[0],a=1,h=f.length;a<h;++a)p=f[a],(g=Math.abs(p-l))>y&&(qo(t,e,i,o,l=(l+p)/2,c)&&(d=l,y=g)),l=p;return isNaN(d)&&(d=r[n]),s?(s.push(d,c,y),s):[d,c,y]}function Jo(t,e,i,o,r,n){for(var s,a=[t[e],t[e+1]],h=[];e+o<i;e+=o){if(h[0]=t[e+o],h[1]=t[e+o+1],s=r.call(n,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}function Qo(t,e,i,o,r){var n=B([1/0,1/0,-1/0,-1/0],t,e,i,o);return!!Q(r,n)&&(!!(M(r,n)||n[0]>=r[0]&&n[2]<=r[2]||n[1]>=r[1]&&n[3]<=r[3])||Jo(t,e,i,o,function(t,e){var i=!1,o=A(r,t),n=A(r,e);if(1===o||1===n)i=!0;else{var s=r[0],a=r[1],h=r[2],l=r[3],p=e[0];t=((e=e[1])-t[1])/(p-t[0]),2&n&&!(2&o)&&(i=(i=p-(e-l)/t)>=s&&i<=h),i||!(4&n)||4&o||(i=(i=e-(p-h)*t)>=a&&i<=l),i||!(8&n)||8&o||(i=(i=p-(e-a)/t)>=s&&i<=h),i||!(16&n)||16&o||(i=(i=e-(p-s)*t)>=a&&i<=l)}return i}))}function tr(t,e,i,o,r){var n=i[0];if(!(Qo(t,e,n,o,r)||$o(t,e,n,o,r[0],r[1])||$o(t,e,n,o,r[0],r[3])||$o(t,e,n,o,r[2],r[1])||$o(t,e,n,o,r[2],r[3])))return!1;if(1===i.length)return!0;for(e=1,n=i.length;e<n;++e)if(Ho(t,i[e-1],i[e],o,r))return!1;return!0}function er(t,e,i,o){for(var r=0,n=t[i-o],s=t[i-o+1];e<i;e+=o){var a=t[e],h=t[e+1];r+=(a-n)*(h+s),n=a,s=h}return 0<r}function ir(t,e,i,o){var r,n=0;o=void 0!==o&&o;var s=0;for(r=e.length;s<r;++s){var a=e[s];if(n=er(t,n,a,i),0===s){if(o&&n||!o&&!n)return!1}else if(o&&!n||!o&&n)return!1;n=a}return!0}function or(t,e,i,o,r){var n;r=void 0!==r&&r;var s=0;for(n=i.length;s<n;++s){var a=i[s],h=er(t,e,a,o);if(0===s?r&&h||!r&&!h:r&&!h||!r&&h){h=t;for(var l=a,p=o;e<l-p;){var u;for(u=0;u<p;++u){var c=h[e+u];h[e+u]=h[l-p+u],h[l-p+u]=c}e+=p,l-=p}}e=a}return e}function rr(t,e,i,o){var r,n=0,s=0;for(r=e.length;s<r;++s)n=or(t,n,e[s],i,o);return n}function nr(t,e){Co.call(this),this.c=[],this.o=-1,this.D=null,this.T=this.C=this.B=-1,this.j=null,this.na(t,e)}function sr(t,e,i,o){var r,n=o||32;for(o=[],r=0;r<n;++r)Ht(o,t.offset(e,i,2*Math.PI*r/n));return o.push(o[0],o[1]),(t=new nr(null)).ba("XY",o,[o.length]),t}function ar(t){var e=t[0],i=t[1],o=t[2];return e=[e,i,e,t=t[3],o,t,o,i,e,i],(i=new nr(null)).ba("XY",e,[e.length]),i}function hr(t,e,i){var o=e||32,r=t.pa(),n=new nr(null,e=t.ja);o=r*(o+1),r=Array(o);for(var s=0;s<o;s++)r[s]=0;return n.ba(e,r,[r.length]),lr(n,t.xa(),t.Bd(),i),n}function lr(t,e,i,o){var r=t.da(),n=t.ja,s=t.pa(),a=t.pb(),h=r.length/s-1;o=o||0;for(var l,p,u=0;u<=h;++u)p=u*s,l=o+2*b(u,h)*Math.PI/h,r[p]=e[0]+i*Math.cos(l),r[p+1]=e[1]+i*Math.sin(l);t.ba(n,r,a)}function pr(t){Ie.call(this),t=ot({},t),this.f=[0,0],this.c=[],this.Ff=this.Ff.bind(this),this.v=Ot(t.projection),ur(this,t)}function ur(t,e){var i={};i.center=void 0!==e.center?e.center:null;var o=void 0!==e.minZoom?e.minZoom:0,r=void 0!==e.maxZoom?e.maxZoom:28,n=void 0!==e.zoomFactor?e.zoomFactor:2;if(void 0!==e.resolutions){var s=e.resolutions,a=s[o],h=void 0!==s[r]?s[r]:s[s.length-1];r=function(t){return function(e,i,o){if(void 0!==e)return(e=y((e=Kt(t,e,o))+i,0,t.length-1))!=(i=Math.floor(e))&&i<t.length-1?t[i]/Math.pow(t[i]/t[i+1],e-i):t[i]}}(s)}else{var l=(s=((h=(a=Ot(e.projection)).G())?Math.max(J(h),H(h)):360*ut.degrees/a.Bc())/256/Math.pow(2,0))/Math.pow(2,28);void 0!==(a=e.maxResolution)?o=0:a=s/Math.pow(n,o),void 0===(h=e.minResolution)&&(h=void 0!==e.maxZoom?void 0!==e.maxResolution?a/Math.pow(n,r):s/Math.pow(n,r):l),r=o+Math.floor(Math.log(a/h)/Math.log(n)),h=a/Math.pow(n,r-o),r=function(t,e,i){return function(o,r,n){if(void 0!==o)return o=Math.max(Math.floor(Math.log(e/o)/Math.log(t)+(-n/2+.5))+r,0),void 0!==i&&(o=Math.min(o,i)),e/Math.pow(t,o)}}(n,a,r-o)}t.a=a,t.i=h,t.D=n,t.j=e.resolutions,t.s=o,void 0===e.enableRotation||e.enableRotation?o=void 0===(o=e.constrainRotation)||!0===o?function(){var t=_(5);return function(e,i){if(void 0!==e)return Math.abs(e+i)<=t?0:e+i}}():!1===o?Yi:"number"==typeof o?function(t){var e=2*Math.PI/t;return function(t,i){if(void 0!==t)return Math.floor((t+i)/e+.5)*e}}(o):Yi:o=Xi,t.l={center:void 0!==e.extent?function(t){return function(e){if(e)return[y(e[0],t[0],t[2]),y(e[1],t[1],t[3])]}}(e.extent):Wi,resolution:r,rotation:o},void 0!==e.resolution?i.resolution=e.resolution:void 0!==e.zoom&&(i.resolution=t.constrainResolution(t.a,e.zoom-t.s),t.j&&(i.resolution=y(Number(t.Pa()||i.resolution),t.i,t.a))),i.rotation=void 0!==e.rotation?e.rotation:0,t.H(i),t.C=e}function cr(t,e){var i=ot({},t.C);return void 0!==i.resolution?i.resolution=t.Pa():i.zoom=t.lg(),i.center=t.xa(),i.rotation=t.Sa(),ot({},i,e)}function fr(t,e,i){var o=t.xa();if(void 0!==o){var r=[o[0]-i[0],o[1]-i[1]];Qi(r,e-t.Sa()),Hi(r,i)}return r}function dr(t,e,i){var o,r=t.xa();return t=t.Pa(),void 0!==r&&void 0!==t&&(o=[i[0]-e*(i[0]-r[0])/t,i[1]-e*(i[1]-r[1])/t]),o}function yr(t){var e=[100,100];return t='.ol-viewport[data-view="'+h(t)+'"]',(t=document.querySelector(t))&&(t=getComputedStyle(t),e[0]=parseInt(t.width,10),e[1]=parseInt(t.height,10)),e}function gr(t){return!!t.xa()&&void 0!==t.Pa()}function vr(t,e,i){t.f[e]+=i,t.u()}function mr(t,e){var i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function _r(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function br(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function xr(t){Ie.call(this);var e=ot({},t);e.opacity=void 0!==t.opacity?t.opacity:1,e.visible=void 0===t.visible||t.visible,e.zIndex=void 0!==t.zIndex?t.zIndex:0,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,this.H(e),this.a={layer:this,Te:!0}}function Er(t){return t.a.opacity=y(t.nc(),0,1),t.a.Vj=t.hg(),t.a.visible=t.Jb(),t.a.extent=t.G(),t.a.zIndex=t.Ba(),t.a.maxResolution=t.lc(),t.a.minResolution=Math.max(t.mc(),0),t.a}function Sr(t){var e=t||{};delete(t=ot({},e)).layers,e=e.layers,xr.call(this,t),this.i=[],this.c={},ve(this,Le(Tr),this.im,this),e?Array.isArray(e)?e=new Fe(e.slice(),{unique:!0}):d(e instanceof Fe,43):e=new Fe(void 0,{unique:!0}),this.Qi(e)}s(wo,Ie),(t=wo.prototype).Ib=function(t,e){return e=e||[NaN,NaN],this.Nb(t[0],t[1],e,1/0),e},t.Bb=function(t){return this.Zc(t[0],t[1])},t.Zc=po,t.G=function(t){this.v!=this.g&&(this.s=this.Ae(this.s),this.v=this.g);var e=this.s;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t=e,t},t.Sb=function(t){return this.Wd(t*t)},t.mb=function(t,e){var i=this.O,o="tile-pixels"==(t=Dt(t)).a?function(o,r,n){var s=t.G(),a=t.oe;return s=H(a)/H(s),So(i,a[0],a[3],s,-s,0,0,0),uo(o,0,o.length,n,i,r),kt(t,e)(o,r,n)}:kt(t,e);return this.Rc(o),this},s(Co,wo),(t=Co.prototype).Zc=po,t.Ae=function(t){return j(this.A,0,this.A.length,this.a,t)},t.fc=function(){return this.A.slice(0,this.a)},t.da=function(){return this.A},t.gc=function(){return this.A.slice(this.A.length-this.a)},t.ic=function(){return this.ja},t.Wd=function(t){if(this.l!=this.g&&(rt(this.i),this.f=0,this.l=this.g),0>t||0!==this.f&&t<=this.f)return this;var e=t.toString();if(this.i.hasOwnProperty(e))return this.i[e];var i=this.xd(t);return i.da().length<this.A.length?this.i[e]=i:(this.f=t,this)},t.xd=function(){return this},t.pa=function(){return this.a},t.Rc=function(t){this.A&&(t(this.A,this.A,this.a),this.u())},t.rotate=function(t,e){var i=this.da();if(i){var o=i.length,r=this.pa(),n=i||[],s=Math.cos(t);t=Math.sin(t);var a=e[0];e=e[1];for(var h=0,l=0;l<o;l+=r){var p=i[l]-a,u=i[l+1]-e;for(n[h++]=a+p*s-u*t,n[h++]=e+p*t+u*s,p=l+2;p<l+r;++p)n[h++]=i[p]}i&&n.length!=h&&(n.length=h),this.u()}},t.scale=function(t,e,i){var o=e;void 0===o&&(o=t);var r=i;if(r||(r=z(this.G())),i=this.da()){e=i.length;var n=this.pa(),s=i||[],a=r[0];r=r[1];for(var h=0,l=0;l<e;l+=n){var p=i[l]-a,u=i[l+1]-r;for(s[h++]=a+t*p,s[h++]=r+o*u,p=l+2;p<l+n;++p)s[h++]=i[p]}i&&s.length!=h&&(s.length=h),this.u()}},t.translate=function(t,e){var i=this.da();i&&(co(i,0,i.length,this.pa(),t,e,i),this.u())},s(Yo,Co),(t=Yo.prototype).clone=function(){var t=new Yo(null);return zo(t,this.ja,this.A.slice()),t},t.Nb=function(t,e,i,o){return o<P(this.G(),t,e)?o:(this.c!=this.g&&(this.j=Math.sqrt(Oo(this.A,0,this.A.length,this.a,0)),this.c=this.g),No(this.A,0,this.A.length,this.a,this.j,!0,t,e,i,o))},t.Vn=function(){return Mo(this.A,0,this.A.length,this.a)},t.W=function(){return Uo(this.A,0,this.A.length,this.a)},t.xd=function(t){var e=[];return e.length=Wo(this.A,0,this.A.length,this.a,t,e,0),zo(t=new Yo(null),"XY",e),t},t.S=function(){return"LinearRing"},t.$a=function(){},t.na=function(t,e){t?(Io(this,e,t,1),this.A||(this.A=[]),this.A.length=ko(this.A,0,t,this.a),this.u()):zo(this,"XY",null)},s(Ko,Co),(t=Ko.prototype).clone=function(){var t=new Ko(null);return t.ba(this.ja,this.A.slice()),t},t.Nb=function(t,e,i,o){var r=this.A;if((t=m(t,e,r[0],r[1]))<o){for(o=this.a,e=0;e<o;++e)i[e]=r[e];return i.length=o,t}return o},t.W=function(){return this.A?this.A.slice():[]},t.Ae=function(t){return D(this.A,t)},t.S=function(){return"Point"},t.$a=function(t){return L(t,this.A[0],this.A[1])},t.na=function(t,e){t?(Io(this,e,t,0),this.A||(this.A=[]),this.A.length=jo(this.A,t),this.u()):this.ba("XY",null)},t.ba=function(t,e){Po(this,t,e),this.u()},s(nr,Co),(t=nr.prototype).Hk=function(t){this.A?Ht(this.A,t.da()):this.A=t.da().slice(),this.c.push(this.A.length),this.u()},t.clone=function(){var t=new nr(null);return t.ba(this.ja,this.A.slice(),this.c.slice()),t},t.Nb=function(t,e,i,o){return o<P(this.G(),t,e)?o:(this.C!=this.g&&(this.B=Math.sqrt(Fo(this.A,0,this.c,this.a,0)),this.C=this.g),Do(this.A,0,this.c,this.a,this.B,!0,t,e,i,o))},t.Zc=function(t,e){return qo(this.Xb(),0,this.c,this.a,t,e)},t.Yn=function(){return Lo(this.Xb(),0,this.c,this.a)},t.W=function(t){if(void 0!==t){var e=this.Xb().slice();or(e,0,this.c,this.a,t)}else e=this.A;return Bo(e,0,this.c,this.a)},t.pb=function(){return this.c},t.Td=function(){if(this.o!=this.g){var t=z(this.G());this.D=Zo(this.Xb(),0,this.c,this.a,t,0),this.o=this.g}return this.D},t.tl=function(){return new Ko(this.Td(),"XYM")},t.zl=function(){return this.c.length},t.Wh=function(t){if(0>t||this.c.length<=t)return null;var e=new Yo(null);return zo(e,this.ja,this.A.slice(0===t?0:this.c[t-1],this.c[t])),e},t.Ud=function(){var t,e=this.ja,i=this.A,o=this.c,r=[],n=0,s=0;for(t=o.length;s<t;++s){var a=o[s],h=new Yo(null);zo(h,e,i.slice(n,a)),r.push(h),n=a}return r},t.Xb=function(){if(this.T!=this.g){var t=this.A;ir(t,this.c,this.a)?this.j=t:(this.j=t.slice(),this.j.length=or(this.j,0,this.c,this.a)),this.T=this.g}return this.j},t.xd=function(t){var e=[],i=[];return e.length=Xo(this.A,0,this.c,this.a,Math.sqrt(t),e,0,i),(t=new nr(null)).ba("XY",e,i),t},t.S=function(){return"Polygon"},t.$a=function(t){return tr(this.Xb(),0,this.c,this.a,t)},t.na=function(t,e){t?(Io(this,e,t,2),this.A||(this.A=[]),t=Go(this.A,0,t,this.a,this.c),this.A.length=0===t.length?0:t[t.length-1],this.u()):this.ba("XY",null,this.c)},t.ba=function(t,e,i){Po(this,t,e),this.c=i,this.u()},s(pr,Ie),(t=pr.prototype).animate=function(t){var e=arguments.length;if(1<e&&"function"==typeof arguments[e-1]){var i=arguments[e-1];--e}if(gr(this)){for(var o=Date.now(),r=this.xa().slice(),n=this.Pa(),s=this.Sa(),a=[],h=0;h<e;++h){var l=arguments[h],p={start:o,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1e3,easing:l.easing||ao};l.center&&(p.ie=r,p.me=l.center,r=p.me),void 0!==l.zoom?(p.ke=n,p.kd=this.constrainResolution(this.a,l.zoom-this.s,0),n=p.kd):l.resolution&&(p.ke=n,p.kd=l.resolution,n=p.kd),void 0!==l.rotation&&(p.Df=s,p.ne=s+(b(l.rotation-s+Math.PI,2*Math.PI)-Math.PI),s=p.ne),p.callback=i,p.ie&&p.me&&!Ji(p.ie,p.me)||p.ke!==p.kd||p.Df!==p.ne?o+=p.duration:p.complete=!0,a.push(p)}this.c.push(a),vr(this,0,1),this.Ff()}else(e=arguments[e-1]).center&&this.ub(e.center),void 0!==e.zoom&&this.Tj(e.zoom),void 0!==e.rotation&&this.ce(e.rotation),i&&i(!0)},t.Ac=function(){return 0<this.f[0]},t.Vh=function(){return 0<this.f[1]},t.rd=function(){vr(this,0,-this.f[0]);for(var t=0,e=this.c.length;t<e;++t){var i=this.c[t];i[0].callback&&i[0].callback(!1)}this.c.length=0},t.Ff=function(){if(void 0!==this.o&&(cancelAnimationFrame(this.o),this.o=void 0),this.Ac()){for(var t=Date.now(),e=!1,i=this.c.length-1;0<=i;--i){for(var o=this.c[i],r=!0,n=0,s=o.length;n<s;++n){var a=o[n];if(!a.complete){if(e=t-a.start,1<=(e=0<a.duration?e/a.duration:1)?(a.complete=!0,e=1):r=!1,e=a.easing(e),a.ie){var h=a.ie[0],l=a.ie[1];this.set("center",[h+e*(a.me[0]-h),l+e*(a.me[1]-l)])}if(a.ke&&a.kd&&(h=1===e?a.kd:a.ke+e*(a.kd-a.ke),a.anchor&&this.set("center",dr(this,h,a.anchor)),this.set("resolution",h)),void 0!==a.Df&&void 0!==a.ne&&(e=1===e?b(a.ne+Math.PI,2*Math.PI)-Math.PI:a.Df+e*(a.ne-a.Df),a.anchor&&this.set("center",fr(this,e,a.anchor)),this.set("rotation",e)),e=!0,!a.complete)break}}r&&(this.c[i]=null,vr(this,0,-1),(o=o[0].callback)&&o(!0))}this.c=this.c.filter(Boolean),e&&void 0===this.o&&(this.o=requestAnimationFrame(this.Ff))}},t.Sc=function(t){return this.l.center(t)},t.constrainResolution=function(t,e,i){return this.l.resolution(t,e||0,i||0)},t.constrainRotation=function(t,e){return this.l.rotation(t,e||0)},t.xa=function(){return this.get("center")},t.qd=function(t){t=t||yr(this);var e=this.xa();d(e,1);var i=this.Pa();d(void 0!==i,2);var o=this.Sa();return d(void 0!==o,3),K(e,i,o,t)},t.sn=function(){return this.a},t.vn=function(){return this.i},t.tn=function(){return this.Me(this.i)},t.Cq=function(t){ur(this,cr(this,{maxZoom:t}))},t.wn=function(){return this.Me(this.a)},t.Dq=function(t){ur(this,cr(this,{minZoom:t}))},t.xn=function(){return this.v},t.Pa=function(){return this.get("resolution")},t.yn=function(){return this.j},t.Je=function(t,e){return e=e||yr(this),Math.max(J(t)/e[0],H(t)/e[1])},t.Sa=function(){return this.get("rotation")},t.getState=function(){var t=this.xa(),e=this.v,i=this.Pa(),o=this.Sa();return{center:t.slice(),projection:void 0!==e?e:null,resolution:i,rotation:o,zoom:this.lg()}},t.lg=function(){var t,e=this.Pa();return void 0!==e&&(t=this.Me(e)),t},t.Me=function(t){var e,i=this.s||0;if(this.j){i=e=Kt(this.j,t,1);var o=this.j[e];e=e==this.j.length-1?2:o/this.j[e+1]}else o=this.a,e=this.D;return i+Math.log(o/t)/Math.log(e)},t.$h=function(t){return this.constrainResolution(this.a,t-this.s,0)},t.Uf=function(t,e){var i=(e=e||{}).size;if(i||(i=yr(this)),t instanceof Co)if("Circle"===t.S()){var o=ar(t=t.G());o.rotate(this.Sa(),z(t))}else o=t;else d(Array.isArray(t),24),d(!tt(t),25),o=ar(t);var r,n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0===e.constrainResolution||e.constrainResolution,h=void 0!==e.nearest&&e.nearest;r=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.constrainResolution(this.a,e.maxZoom-this.s,0):0;var l=o.da(),p=this.Sa();t=Math.cos(-p),p=Math.sin(-p);var u=1/0,c=1/0,f=-1/0,y=-1/0;o=o.pa();for(var g=0,v=l.length;g<v;g+=o){var m=l[g]*t-l[g+1]*p,_=l[g]*p+l[g+1]*t;u=Math.min(u,m),c=Math.min(c,_),f=Math.max(f,m),y=Math.max(y,_)}i=this.Je([u,c,f,y],[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i=isNaN(i)?r:Math.max(i,r),s&&(r=this.constrainResolution(i,0,0),!h&&r<i&&(r=this.constrainResolution(r,-1,0)),i=r),p=-p,t=[(r=(u+f)/2+(n[1]-n[3])/2*i)*t-(n=(c+y)/2+(n[0]-n[2])/2*i)*p,n*t+r*p],n=e.callback?e.callback:a,void 0!==e.duration?this.animate({resolution:i,center:t,duration:e.duration,easing:e.easing},n):(this.gd(i),this.ub(t),setTimeout(n.bind(void 0,!0),0))},t.Nk=function(t,e,i){var o=this.Sa(),r=Math.cos(-o);o=Math.sin(-o);var n=t[0]*r-t[1]*o;t=t[1]*r+t[0]*o;var s=this.Pa();n+=(e[0]/2-i[0])*s,t+=(i[1]-e[1]/2)*s,o=-o,this.ub([n*r-t*o,t*r+n*o])},t.rotate=function(t,e){void 0!==e&&(e=fr(this,t,e),this.ub(e)),this.ce(t)},t.ub=function(t){this.set("center",t),this.Ac()&&this.rd()},t.gd=function(t){this.set("resolution",t),this.Ac()&&this.rd()},t.ce=function(t){this.set("rotation",t),this.Ac()&&this.rd()},t.Tj=function(t){this.gd(this.$h(t))},s(xr,Ie),(t=xr.prototype).S=function(){return this.type},t.G=function(){return this.get("extent")},t.lc=function(){return this.get("maxResolution")},t.mc=function(){return this.get("minResolution")},t.nc=function(){return this.get("opacity")},t.Jb=function(){return this.get("visible")},t.Ba=function(){return this.get("zIndex")},t.Fc=function(t){this.set("extent",t)},t.Mc=function(t){this.set("maxResolution",t)},t.Nc=function(t){this.set("minResolution",t)},t.Gc=function(t){this.set("opacity",t)},t.Hc=function(t){this.set("visible",t)},t.$b=function(t){this.set("zIndex",t)},s(Sr,xr),(t=Sr.prototype).Pe=function(){this.u()},t.im=function(){this.i.forEach(be),this.i.length=0;var t,e=this.Cd();for(var i in this.i.push(ve(e,"add",this.hm,this),ve(e,"remove",this.jm,this)),this.c)this.c[i].forEach(be);for(rt(this.c),i=0,t=(e=e.a).length;i<t;i++){var o=e[i];this.c[h(o).toString()]=[ve(o,"propertychange",this.Pe,this),ve(o,"change",this.Pe,this)]}this.u()},t.hm=function(t){var e=h(t=t.element).toString();this.c[e]=[ve(t,"propertychange",this.Pe,this),ve(t,"change",this.Pe,this)],this.u()},t.jm=function(t){t=h(t.element).toString(),this.c[t].forEach(be),delete this.c[t],this.u()},t.Cd=function(){return this.get(Tr)},t.Qi=function(t){this.set(Tr,t)},t.dg=function(t){var e,i=void 0!==t?t:[],o=i.length;for(this.Cd().forEach(function(t){t.dg(i)}),t=Er(this),e=i.length;o<e;o++){var r=i[o];r.opacity*=t.opacity,r.visible=r.visible&&t.visible,r.maxResolution=Math.min(r.maxResolution,t.maxResolution),r.minResolution=Math.max(r.minResolution,t.minResolution),void 0!==t.extent&&(r.extent=void 0!==r.extent?$(r.extent,t.extent):t.extent)}return i},t.hg=function(){return"ready"};var Tr="layers",wr=[],Cr=[];function Rr(t,e){switch(t){case"MAP_RENDERER":(t=wr).push(e);break;case"LAYER_RENDERER":(t=Cr).push(e);break;default:throw Error("Unsupported plugin type: "+t)}}function Pr(t){for(var e=0,i=t.length;e<i;++e)Rr("LAYER_RENDERER",t[e])}function Ir(t){Ie.call(this);var e=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,o={},r={};if(void 0===t.logo||"boolean"==typeof t.logo&&t.logo)r["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="https://openlayers.org/";else{var n=t.logo;"string"==typeof n?r[n]="":n instanceof HTMLElement?r[h(n).toString()]=n:n&&(d("string"==typeof n.href,44),d("string"==typeof n.src,45),r[n.src]=n.href)}n=t.layers instanceof Sr?t.layers:new Sr({layers:t.layers}),o.layergroup=n,o.target=t.target,o.view=void 0!==t.view?t.view:new pr,void 0!==t.renderer?(Array.isArray(t.renderer)?i=t.renderer:"string"==typeof t.renderer?i=[t.renderer]:d(!1,46),0<=i.indexOf("dom")&&(i=i.concat(Mr))):i=Mr,n=0;var s=i.length;t:for(;n<s;++n)for(var a=i[n],l=0,p=wr.length;l<p;++l){var u=wr[l];if(u.handles(a)){var c=u;break t}}if(!c)throw Error("Unable to create a map renderer for types: "+i.join(", "));if(void 0!==t.controls)if(Array.isArray(t.controls))var f=new Fe(t.controls.slice());else d(t.controls instanceof Fe,47),f=t.controls;if(void 0!==t.interactions)if(Array.isArray(t.interactions))var y=new Fe(t.interactions.slice());else d(t.interactions instanceof Fe,48),y=t.interactions;return void 0!==t.overlays?Array.isArray(t.overlays)?t=new Fe(t.overlays.slice()):(d(t.overlays instanceof Fe,49),t=t.overlays):t=new Fe,{controls:f,interactions:y,keyboardEventTarget:e,logos:r,overlays:t,Im:c,values:o}}(t);this.ob=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.sc=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.ra=void 0!==t.pixelRatio?t.pixelRatio:qe,this.Md=e.logos,this.V=function(){this.j=void 0,this.pq.call(this)}.bind(this),this.La=[1,0,0,1,0,0],this.If=[1,0,0,1,0,0],this.bb=0,this.D=this.C=this.B=this.f=this.c=null,this.a=document.createElement("DIV"),this.a.className="ol-viewport"+(ei?" ol-touch":""),this.a.style.position="relative",this.a.style.overflow="hidden",this.a.style.width="100%",this.a.style.height="100%",this.a.style.msTouchAction="none",this.a.style.touchAction="none",this.o=document.createElement("DIV"),this.o.className="ol-overlaycontainer",this.a.appendChild(this.o),this.v=document.createElement("DIV"),this.v.className="ol-overlaycontainer-stopevent";for(var i="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" "),o=0,r=i.length;o<r;++o)ve(this.v,i[o],we);for(var n in this.a.appendChild(this.v),this.ca=new Oi(this,t.moveTolerance),ai)ve(this.ca,ai[n],this.bi,this);this.$=e.keyboardEventTarget,this.s=null,ve(this.a,"wheel",this.yd,this),ve(this.a,"mousewheel",this.yd,this),this.controls=e.controls||new Fe,this.interactions=e.interactions||new Fe,this.l=e.overlays,this.Fg={},this.pc=e.Im.create(this.a,this),this.T=null,this.Ea=[],this.ua=new Bi(this.Tl.bind(this),this.zm.bind(this)),this.O={},ve(this,Le("layergroup"),this.fm,this),ve(this,Le("view"),this.Am,this),ve(this,Le("size"),this.um,this),ve(this,Le("target"),this.ym,this),this.H(e.values),this.controls.forEach(function(t){t.setMap(this)},this),ve(this.controls,"add",function(t){t.element.setMap(this)},this),ve(this.controls,"remove",function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)},this),ve(this.interactions,"add",function(t){t.element.setMap(this)},this),ve(this.interactions,"remove",function(t){t.element.setMap(null)},this),this.l.forEach(this.zh,this),ve(this.l,"add",function(t){this.zh(t.element)},this),ve(this.l,"remove",function(t){var e=t.element.id;void 0!==e&&delete this.Fg[e.toString()],t.element.setMap(null)},this)}s(Ir,Ie),(t=Ir.prototype).Mf=function(t){this.controls.push(t)},t.Nf=function(t){this.interactions.push(t)},t.xe=function(t){this.hc().Cd().push(t)},t.ye=function(t){this.l.push(t)},t.zh=function(t){var e=t.id;void 0!==e&&(this.Fg[e.toString()]=t),t.setMap(this)},t.ia=function(){Se(this.ca),_e(this.a,"wheel",this.yd,this),_e(this.a,"mousewheel",this.yd,this),void 0!==this.i&&(window.removeEventListener("resize",this.i,!1),this.i=void 0),this.j&&(cancelAnimationFrame(this.j),this.j=void 0),this.Ad(null),Ie.prototype.ia.call(this)},t.Tc=function(t,e,i){if(this.c)return t=this.Ra(t),i=void 0!==i?i:{},this.pc.wa(t,this.c,void 0!==i.hitTolerance?i.hitTolerance*this.c.pixelRatio:0,e,null,void 0!==i.layerFilter?i.layerFilter:lo,null)},t.Xf=function(t,e){var i=null;return this.Tc(t,function(t){i||(i=[]),i.push(t)},e),i},t.tg=function(t,e,i,o,r){if(this.c)return this.pc.Ti(t,this.c,e,void 0!==i?i:null,void 0!==o?o:lo,void 0!==r?r:null)},t.ng=function(t,e){return!!this.c&&(t=this.Ra(t),e=void 0!==e?e:{},this.pc.Ui(t,this.c,void 0!==e.hitTolerance?e.hitTolerance*this.c.pixelRatio:0,void 0!==e.layerFilter?e.layerFilter:lo,null))},t.Sd=function(t){return this.Ra(this.ud(t))},t.ud=function(t){var e=this.a.getBoundingClientRect();return[(t=t.changedTouches?t.changedTouches[0]:t).clientX-e.left,t.clientY-e.top]},t.Xd=function(){return this.get("target")},t.Cc=function(){var t=this.Xd();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},t.Ra=function(t){var e=this.c;return e?_o(e.pixelToCoordinateTransform,t.slice()):null},t.Wf=function(){return this.controls},t.gg=function(){return this.l},t.fg=function(t){return void 0!==(t=this.Fg[t.toString()])?t:null},t.bg=function(){return this.interactions},t.hc=function(){return this.get("layergroup")},t.Xe=function(){return this.hc().Cd()},t.Ia=function(t){var e=this.c;return e?_o(e.coordinateToPixelTransform,t.slice(0,2)):null},t.Ie=function(){return this.pc},t.Cb=function(){return this.get("size")},t.aa=function(){return this.get("view")},t.kg=function(){return this.a},t.Tl=function(t,e,i,o){var r=this.c;return r&&e in r.wantedTiles&&r.wantedTiles[e][t.lb()]?(t=i[0]-r.focus[0],i=i[1]-r.focus[1],65536*Math.log(o)+Math.sqrt(t*t+i*i)/o):1/0},t.yd=function(t,e){t=new Ue(e||t.type,this,t),this.bi(t)},t.bi=function(t){if(this.c){this.T=t.coordinate,t.frameState=this.c;var e,i=this.interactions.a;if(!1!==this.b(t))for(e=i.length-1;0<=e;e--){var o=i[e];if(o.c()&&!o.handleEvent(t))break}}},t.sm=function(){var t=this.c,e=this.ua;if(0!==e.b.length){var i=16,o=i;if(t){var r=t.viewHints;r[0]&&(i=this.ob?8:0,o=2),r[1]&&(i=this.sc?8:0,o=2)}e.j<i&&(Ui(e),Vi(e,i,o))}for(i=0,o=(e=this.Ea).length;i<o;++i)e[i](this,t);e.length=0},t.um=function(){this.render()},t.ym=function(){var t;if(this.Xd()&&(t=this.Cc()),this.s){for(var e=0,i=this.s.length;e<i;++e)be(this.s[e]);this.s=null}if(t){t.appendChild(this.a);var o=this.$?this.$:t;this.s=[ve(o,"keydown",this.yd,this),ve(o,"keypress",this.yd,this)],this.i||(this.i=this.Oc.bind(this),window.addEventListener("resize",this.i,!1))}else{for(o in(t=this.pc).c)Se(Zs(t,o));br(this.a),void 0!==this.i&&(window.removeEventListener("resize",this.i,!1),this.i=void 0)}this.Oc()},t.zm=function(){this.render()},t.ei=function(){this.render()},t.Am=function(){this.B&&(be(this.B),this.B=null),this.C&&(be(this.C),this.C=null);var t=this.aa();t&&(this.a.setAttribute("data-view",h(t)),this.B=ve(t,"propertychange",this.ei,this),this.C=ve(t,"change",this.ei,this)),this.render()},t.fm=function(){this.D&&(this.D.forEach(be),this.D=null);var t=this.hc();t&&(this.D=[ve(t,"propertychange",this.render,this),ve(t,"change",this.render,this)]),this.render()},t.dh=function(){this.j&&cancelAnimationFrame(this.j),this.V()},t.render=function(){void 0===this.j&&(this.j=requestAnimationFrame(this.V))},t.Xg=function(t){return this.controls.remove(t)},t.Zg=function(t){return this.interactions.remove(t)},t.$g=function(t){return this.hc().Cd().remove(t)},t.ah=function(t){return this.l.remove(t)},t.pq=function(){var t,e=Date.now(),i=this.Cb(),o=this.aa(),r=[1/0,1/0,-1/0,-1/0],n=this.c,s=null;if(void 0!==i&&0<i[0]&&0<i[1]&&o&&gr(o)){void 0!==(s=this.c?this.c.viewHints:void 0)?(s[0]=o.f[0],s[1]=o.f[1]):s=o.f.slice();var a=this.hc().dg(),l={},p=0;for(t=a.length;p<t;++p)l[h(a[p].layer)]=a[p];o=(p=o.getState()).center,t=p.resolution/this.ra,o[0]=Math.round(o[0]/t)*t,o[1]=Math.round(o[1]/t)*t,s={animate:!1,coordinateToPixelTransform:this.La,extent:r,focus:this.T?this.T:o,index:this.bb++,layerStates:l,layerStatesArray:a,logos:ot({},this.Md),pixelRatio:this.ra,pixelToCoordinateTransform:this.If,postRenderFunctions:[],size:i,skippedFeatureUids:this.O,tileQueue:this.ua,time:e,usedTiles:{},viewState:p,viewHints:s,wantedTiles:{}}}s&&(s.extent=K(p.center,p.resolution,p.rotation,s.size,r)),this.c=s,this.pc.bh(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.Ea,s.postRenderFunctions),!n||this.f&&(tt(this.f)||k(s.extent,this.f))||(this.b(new Ge("movestart",this,n)),this.f=N(this.f)),!this.f||s.viewHints[0]||s.viewHints[1]||k(s.extent,this.f)||(this.b(new Ge("moveend",this,s)),R(s.extent,this.f))),this.b(new Ge("postrender",this,s)),setTimeout(this.sm.bind(this),0)},t.zf=function(t){this.set("layergroup",t)},t.be=function(t){this.set("size",t)},t.Ad=function(t){this.set("target",t)},t.jh=function(t){this.set("view",t)},t.Uj=function(t){t=h(t).toString(),this.O[t]=!0,this.render()},t.Oc=function(){var t=this.Cc();if(t){var e=getComputedStyle(t);this.be([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.be(void 0)},t.Zj=function(t){t=h(t).toString(),delete this.O[t],this.render()};var Mr=["canvas","webgl"];function Lr(t){Ie.call(this),this.element=t.element?t.element:null,this.a=this.T=null,this.s=[],this.render=t.render?t.render:a,t.target&&this.i(t.target)}s(Lr,Ie),Lr.prototype.ia=function(){br(this.element),Ie.prototype.ia.call(this)},Lr.prototype.f=function(){return this.a},Lr.prototype.setMap=function(t){this.a&&br(this.element);for(var e=0,i=this.s.length;e<i;++e)be(this.s[e]);this.s.length=0,(this.a=t)&&((this.T?this.T:t.v).appendChild(this.element),this.render!==a&&this.s.push(ve(t,"postrender",this.render,this)),t.render())},Lr.prototype.i=function(t){this.T="string"==typeof t?document.getElementById(t):t};var Ar,Or,Fr=(Or={},function(t){if(Ar||(Ar=document.createElement("div").style),!(t in Or)){Ar.font=t;var e=Ar.fontFamily;if(Ar.font="",!e)return null;Or[t]=e.split(/,\s?/)}return Or[t]});function Nr(t){var e=ot({},t);delete e.source,xr.call(this,e),this.o=this.v=this.s=null,t.map&&this.setMap(t.map),ve(this,Le("source"),this.wm,this),this.hd(t.source?t.source:null)}function Dr(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}function jr(t){t=t||{},this.v=document.createElement("UL"),this.l=document.createElement("LI"),this.v.appendChild(this.l),this.l.style.display="none",this.c=void 0===t.collapsed||t.collapsed,this.j=void 0===t.collapsible||t.collapsible,this.j||(this.c=!1);var e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",o=void 0!==t.collapseLabel?t.collapseLabel:"»";"string"==typeof o?(this.o=document.createElement("span"),this.o.textContent=o):this.o=o,"string"==typeof(o=void 0!==t.label?t.label:"i")?(this.D=document.createElement("span"),this.D.textContent=o):this.D=o;var r=this.j&&!this.c?this.o:this.D;(o=document.createElement("button")).setAttribute("type","button"),o.title=i,o.appendChild(r),ve(o,"click",this.Bn,this),(i=document.createElement("div")).className=e+" ol-unselectable ol-control"+(this.c&&this.j?" ol-collapsed":"")+(this.j?"":" ol-uncollapsible"),i.appendChild(this.v),i.appendChild(o),Lr.call(this,{element:i,render:t.render?t.render:kr,target:t.target}),this.B=[],this.C=!0,this.O={}}function kr(t){if(t=t.frameState){for(var e={},i=[],o=t.layerStatesArray,r=t.viewState.resolution,n=0,s=o.length;n<s;++n){var a=o[n];if(Dr(a,r)&&(a=a.layer.ha())&&(a=a.C)&&(a=a(t)))if(Array.isArray(a))for(var h=0,l=a.length;h<l;++h)a[h]in e||(i.push(a[h]),e[a[h]]=!0);else a in e||(i.push(a),e[a]=!0)}if(!qt(i,this.B)){for(;this.v.lastChild!==this.l;)this.v.removeChild(this.v.lastChild);for(e=0,o=i.length;e<o;++e)(r=document.createElement("LI")).innerHTML=i[e],this.v.appendChild(r);for(u in 0===i.length&&0<this.B.length?this.element.classList.add("ol-logo-only"):0===this.B.length&&0<i.length&&this.element.classList.remove("ol-logo-only"),e=0<i.length||!st(t.logos),this.C!=e&&(this.element.style.display=e?"":"none",this.C=e),this.B=i,t=t.logos,i=this.O)u in t||(br(i[u]),delete i[u]);for(var p in t)if((o=t[p])instanceof HTMLElement&&(this.l.appendChild(o),i[p]=o),!(p in i)){var u=new Image;u.src=p,""===o?e=u:((e=document.createElement("a")).href=o,e.appendChild(u)),this.l.appendChild(e),i[p]=e}this.l.style.display=st(t)?"none":""}}else this.C&&(this.element.style.display="none",this.C=!1)}function Gr(t){t.element.classList.toggle("ol-collapsed"),t.c?_r(t.o,t.D):_r(t.D,t.o),t.c=!t.c}function Ur(t){var e=void 0!==(t=t||{}).className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"⇧";this.c=null,"string"==typeof i?(this.c=document.createElement("span"),this.c.className="ol-compass",this.c.textContent=i):(this.c=i,this.c.classList.add("ol-compass"));var o=t.tipLabel?t.tipLabel:"Reset rotation";(i=document.createElement("button")).className=e+"-reset",i.setAttribute("type","button"),i.title=o,i.appendChild(this.c),ve(i,"click",Ur.prototype.D,this),(o=document.createElement("div")).className=e+" ol-unselectable ol-control",o.appendChild(i),e=t.render?t.render:Br,this.l=t.resetNorth?t.resetNorth:void 0,Lr.call(this,{element:o,render:e,target:t.target}),this.v=void 0!==t.duration?t.duration:250,this.j=void 0===t.autoHide||t.autoHide,this.o=void 0,this.j&&this.element.classList.add("ol-hidden")}function Br(t){if(t=t.frameState){if((t=t.viewState.rotation)!=this.o){var e="rotate("+t+"rad)";if(this.j){var i=this.element.classList.contains("ol-hidden");i||0!==t?i&&0!==t&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.c.style.msTransform=e,this.c.style.webkitTransform=e,this.c.style.transform=e}this.o=t}}function Vr(t){var e=void 0!==(t=t||{}).className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",r=void 0!==t.zoomOutLabel?t.zoomOutLabel:"−",n=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",s=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",a=document.createElement("button");a.className=e+"-in",a.setAttribute("type","button"),a.title=n,a.appendChild("string"==typeof o?document.createTextNode(o):o),ve(a,"click",Vr.prototype.j.bind(this,i)),(o=document.createElement("button")).className=e+"-out",o.setAttribute("type","button"),o.title=s,o.appendChild("string"==typeof r?document.createTextNode(r):r),ve(o,"click",Vr.prototype.j.bind(this,-i)),(i=document.createElement("div")).className=e+" ol-unselectable ol-control",i.appendChild(a),i.appendChild(o),Lr.call(this,{element:i,target:t.target}),this.c=void 0!==t.duration?t.duration:250}function Wr(t){t=t||{};var e=new Fe;return(void 0===t.zoom||t.zoom)&&e.push(new Vr(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new Ur(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new jr(t.attributionOptions)),e}function Xr(t,e,i){this.i=t,this.c=e,this.f=i,this.b=[],this.a=this.g=0}function Yr(t){t.b.length=0,t.g=0,t.a=0}function zr(t){Ie.call(this),this.v=null,this.Ha(!0),this.handleEvent=t.handleEvent}function Kr(t,e,i,o){if(void 0!==e){var r=t.Sa(),n=t.xa();void 0!==r&&n&&0<o?t.animate({rotation:e,anchor:i,duration:o,easing:so}):t.rotate(e,i)}}function Hr(t,e,i,o){var r=t.Pa();if(void 0!==(e=t.constrainResolution(r,e,0))){var n=t.j;e=y(e,t.i||n[n.length-1],t.a||n[0])}i&&void 0!==e&&e!==r&&(n=t.xa(),i=dr(t,e,i),i=t.Sc(i),i=[(e*n[0]-r*i[0])/(e-r),(e*n[1]-r*i[1])/(e-r)]),$r(t,e,i,o)}function $r(t,e,i,o){if(e){var r=t.Pa(),n=t.xa();void 0!==r&&n&&e!==r&&o?t.animate({resolution:e,anchor:i,duration:o,easing:so}):(i&&(i=dr(t,e,i),t.ub(i)),t.gd(e))}}function qr(t){t=t||{},this.a=t.delta?t.delta:1,zr.call(this,{handleEvent:Zr}),this.f=void 0!==t.duration?t.duration:250}function Zr(t){var e=!1,i=t.originalEvent;"dblclick"==t.type&&(e=t.coordinate,i=i.shiftKey?-this.a:this.a,Hr(t.map.aa(),i,e,this.f),t.preventDefault(),e=!0);return!e}function Jr(t){return(t=t.originalEvent).altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}function Qr(t){return(t=t.originalEvent).altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function tn(t){return 0==(t=t.originalEvent).button&&!(He&&$e&&t.ctrlKey)}function en(t){return"pointermove"==t.type}function on(t){return"singleclick"==t.type}function rn(t){return!(t=t.originalEvent).altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}function nn(t){return!(t=t.originalEvent).altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function sn(t){return"INPUT"!==(t=t.originalEvent.target.tagName)&&"SELECT"!==t&&"TEXTAREA"!==t}function an(t){return d(t.b,56),"mouse"==t.b.pointerType}function hn(t){return(t=t.b).isPrimary&&0===t.button}function ln(t){t=t||{},zr.call(this,{handleEvent:t.handleEvent?t.handleEvent:un}),this.ck=t.handleDownEvent?t.handleDownEvent:po,this.Ek=t.handleDragEvent?t.handleDragEvent:a,this.Kk=t.handleMoveEvent?t.handleMoveEvent:a,this.Lk=t.handleUpEvent?t.handleUpEvent:po,this.D=!1,this.$={},this.l=[]}function pn(t){for(var e=t.length,i=0,o=0,r=0;r<e;r++)i+=t[r].clientX,o+=t[r].clientY;return[i/e,o/e]}function un(t){if(!(t instanceof hi))return!0;var e=!1,i=t.type;if("pointerdown"===i||"pointerdrag"===i||"pointerup"===i){var o=(i=t.b).pointerId.toString();"pointerup"==t.type?delete this.$[o]:"pointerdown"==t.type?this.$[o]=i:o in this.$&&(this.$[o]=i),this.l=nt(this.$)}return this.D?"pointerdrag"==t.type?this.Ek(t):"pointerup"==t.type&&(this.D=this.Lk(t)&&0<this.l.length):"pointerdown"==t.type?(this.D=t=this.ck(t),e=this.jd(t)):"pointermove"==t.type&&this.Kk(t),!e}function cn(t){ln.call(this,{handleDownEvent:yn,handleDragEvent:fn,handleUpEvent:dn}),t=t||{},this.a=t.kinetic,this.f=null,this.o=t.condition?t.condition:rn,this.j=!1}function fn(t){var e=this.l,i=pn(e);if(e.length==this.s){if(this.a&&this.a.b.push(i[0],i[1],Date.now()),this.f){var o=this.f[0]-i[0],r=i[1]-this.f[1],n=(t=t.map.aa()).getState();to(o=[o,r],n.resolution),Qi(o,n.rotation),Hi(o,n.center),o=t.Sc(o),t.ub(o)}}else this.a&&Yr(this.a);this.f=i,this.s=e.length}function dn(t){var e=t.map;if(t=e.aa(),0===this.l.length){if(!this.j&&this.a&&function(t){if(6>t.b.length)return!1;var e=Date.now()-t.f,i=t.b.length-3;if(t.b[i+2]<e)return!1;for(var o=i-3;0<o&&t.b[o+2]>e;)o-=3;if((e=t.b[i+2]-t.b[o+2])<1e3/60)return!1;var r=t.b[i]-t.b[o];return i=t.b[i+1]-t.b[o+1],t.g=Math.atan2(i,r),t.a=Math.sqrt(r*r+i*i)/e,t.a>t.c}(this.a)){var i=this.a;i=(i.c-i.a)/i.i;var o=this.a.g,r=t.xa();r=e.Ia(r),e=e.Ra([r[0]-i*Math.cos(o),r[1]-i*Math.sin(o)]),t.animate({center:t.Sc(e),duration:500,easing:so})}return vr(t,1,-1),!1}return this.a&&Yr(this.a),this.f=null,!0}function yn(t){if(0<this.l.length&&this.o(t)){var e=t.map.aa();return this.f=null,this.D||vr(e,1,1),e.Ac()&&e.ub(t.frameState.viewState.center),this.a&&Yr(this.a),this.j=1<this.l.length,!0}return!1}function gn(t){t=t||{},ln.call(this,{handleDownEvent:_n,handleDragEvent:vn,handleUpEvent:mn}),this.f=t.condition?t.condition:Qr,this.a=void 0,this.j=void 0!==t.duration?t.duration:250}function vn(t){if(an(t)){var e=t.map,i=e.aa();if(i.l.rotation!==Xi){if(e=e.Cb(),t=t.pixel,t=Math.atan2(e[1]/2-t[1],t[0]-e[0]/2),void 0!==this.a)e=t-this.a,Kr(i,i.Sa()-e);this.a=t}}}function mn(t){if(!an(t))return!0;vr(t=t.map.aa(),1,-1);var e=t.Sa(),i=this.j;return Kr(t,e=t.constrainRotation(e,0),void 0,i),!1}function _n(t){return!!(an(t)&&tn(t)&&this.f(t))&&(vr(t.map.aa(),1,1),this.a=void 0,!0)}function bn(t){this.Uc=null,this.a=document.createElement("div"),this.a.style.position="absolute",this.a.className="ol-box "+t,this.g=this.c=this.b=null}function xn(t){var e=t.c,i=t.g;(t=t.a.style).left=Math.min(e[0],i[0])+"px",t.top=Math.min(e[1],i[1])+"px",t.width=Math.abs(i[0]-e[0])+"px",t.height=Math.abs(i[1]-e[1])+"px"}function En(t){var e=t.c,i=t.g;(e=[e,[e[0],i[1]],i,[i[0],e[1]]].map(t.b.Ra,t.b))[4]=e[0].slice(),t.Uc?t.Uc.na([e]):t.Uc=new nr([e])}function Sn(t){ln.call(this,{handleDownEvent:Rn,handleDragEvent:wn,handleUpEvent:Cn}),t=t||{},this.a=new bn(t.className||"ol-dragbox"),this.o=void 0!==t.minArea?t.minArea:64,this.f=null,this.C=t.condition?t.condition:lo,this.s=t.boxEndCondition?t.boxEndCondition:Tn}function Tn(t,e,i){return(t=i[0]-e[0])*t+(e=i[1]-e[1])*e>=this.o}function wn(t){if(an(t)){var e=this.a,i=t.pixel;e.c=this.f,e.g=i,En(e),xn(e),this.b(new Ln(In,t.coordinate,t))}}function Cn(t){return!an(t)||(this.a.setMap(null),this.s(t,this.f,t.pixel)&&(this.j(t),this.b(new Ln(Mn,t.coordinate,t))),!1)}function Rn(t){if(an(t)&&tn(t)&&this.C(t)){this.f=t.pixel,this.a.setMap(t.map);var e=this.a,i=this.f;return e.c=this.f,e.g=i,En(e),xn(e),this.b(new Ln(Pn,t.coordinate,t)),!0}return!1}s(Nr,xr),(t=Nr.prototype).dg=function(t){return(t=t||[]).push(Er(this)),t},t.ha=function(){return this.get("source")||null},t.hg=function(){var t=this.ha();return t?t.getState():"undefined"},t.yo=function(){this.u()},t.wm=function(){this.o&&(be(this.o),this.o=null);var t=this.ha();t&&(this.o=ve(t,"change",this.yo,this)),this.u()},t.setMap=function(t){this.s&&(be(this.s),this.s=null),t||this.u(),this.v&&(be(this.v),this.v=null),t&&(this.s=ve(t,"precompose",function(t){var e=Er(this);e.Te=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[h(this)]=e},this),this.v=ve(this,"change",t.render,t),this.u())},t.hd=function(t){this.set("source",t)},s(jr,Lr),(t=jr.prototype).Bn=function(t){t.preventDefault(),Gr(this)},t.An=function(){return this.j},t.Dn=function(t){this.j!==t&&(this.j=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.c&&Gr(this))},t.Cn=function(t){this.j&&this.c!==t&&Gr(this)},t.zn=function(){return this.c},s(Ur,Lr),Ur.prototype.D=function(t){t.preventDefault(),void 0!==this.l?this.l():(t=this.a.aa())&&void 0!==t.Sa()&&(0<this.v?t.animate({rotation:0,duration:this.v,easing:so}):t.ce(0))},s(Vr,Lr),Vr.prototype.j=function(t,e){if(e.preventDefault(),e=this.a.aa()){var i=e.Pa();i&&(t=e.constrainResolution(i,t),0<this.c?(e.Ac()&&e.rd(),e.animate({resolution:t,duration:this.c,easing:so})):e.gd(t))}},s(zr,Ie),zr.prototype.c=function(){return this.get("active")},zr.prototype.i=function(){return this.v},zr.prototype.Ha=function(t){this.set("active",t)},zr.prototype.setMap=function(t){this.v=t},s(qr,zr),s(ln,zr),ln.prototype.jd=function(t){return t},s(cn,ln),cn.prototype.jd=po,s(gn,ln),gn.prototype.jd=po,s(bn,Ee),bn.prototype.ia=function(){this.setMap(null)},bn.prototype.setMap=function(t){if(this.b){this.b.o.removeChild(this.a);var e=this.a.style;e.left=e.top=e.width=e.height="inherit"}(this.b=t)&&this.b.o.appendChild(this.a)},bn.prototype.U=function(){return this.Uc},s(Sn,ln),Sn.prototype.U=function(){return this.a.U()},Sn.prototype.j=a;var Pn="boxstart",In="boxdrag",Mn="boxend";function Ln(t,e,i){Te.call(this,t),this.coordinate=e,this.mapBrowserEvent=i}function An(t){var e=(t=t||{}).condition?t.condition:nn;this.B=void 0!==t.duration?t.duration:200,this.T=void 0!==t.out&&t.out,Sn.call(this,{condition:e,className:t.className||"ol-dragzoom"})}function On(t){zr.call(this,{handleEvent:Fn}),t=t||{},this.a=function(t){return rn(t)&&sn(t)},this.f=void 0!==t.condition?t.condition:this.a,this.j=void 0!==t.duration?t.duration:100,this.l=void 0!==t.pixelDelta?t.pixelDelta:128}function Fn(t){var e=!1;if("keydown"==t.type){var i=t.originalEvent.keyCode;if(this.f(t)&&(40==i||37==i||39==i||38==i)){var o=(e=t.map.aa()).Pa()*this.l,r=0,n=0;40==i?n=-o:37==i?r=-o:39==i?r=o:n=o,Qi(o=[r,n],e.Sa()),i=this.j,(r=e.xa())&&(o=e.Sc([r[0]+o[0],r[1]+o[1]]),i?e.animate({duration:i,easing:ho,center:o}):e.ub(o)),t.preventDefault(),e=!0}}return!e}function Nn(t){zr.call(this,{handleEvent:Dn}),t=t||{},this.f=t.condition?t.condition:sn,this.a=t.delta?t.delta:1,this.j=void 0!==t.duration?t.duration:100}function Dn(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var i=t.originalEvent.charCode;!this.f(t)||43!=i&&45!=i||(e=43==i?this.a:-this.a,Hr(i=t.map.aa(),e,void 0,this.j),t.preventDefault(),e=!0)}return!e}function jn(t){zr.call(this,{handleEvent:kn}),t=t||{},this.j=0,this.D=void 0!==t.duration?t.duration:250,this.$=void 0!==t.timeout?t.timeout:80,this.C=void 0===t.useAnchor||t.useAnchor,this.O=t.constrainResolution||!1,this.a=null,this.s=this.l=this.o=this.f=void 0}function kn(t){var e=t.type;if("wheel"!==e&&"mousewheel"!==e)return!0;t.preventDefault(),e=t.map;var i=t.originalEvent;if(this.C&&(this.a=t.coordinate),"wheel"==t.type){var o=i.deltaY;ze&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=qe),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)}else"mousewheel"==t.type&&(o=-i.wheelDeltaY,Ke&&(o/=3));if(0===o)return!1;if(t=Date.now(),void 0===this.f&&(this.f=t),(!this.l||400<t-this.f)&&(this.l=4>Math.abs(o)?Gn:Un),this.l===Gn){e=e.aa(),this.s?clearTimeout(this.s):vr(e,1,1),this.s=setTimeout(this.B.bind(this),400),i=e.Pa()*Math.pow(2,o/300);var r=e.i,n=e.a,s=0;if(i<r?(i=Math.max(i,r/1.5),s=1):i>n&&(i=Math.min(i,1.5*n),s=-1),this.a){var a=dr(e,i,this.a);e.ub(e.Sc(a))}return e.gd(i),0===s&&this.O&&e.animate({resolution:e.constrainResolution(i,0<o?-1:1),easing:so,anchor:this.a,duration:this.D}),0<s?e.animate({resolution:r,easing:so,anchor:this.a,duration:500}):0>s&&e.animate({resolution:n,easing:so,anchor:this.a,duration:500}),this.f=t,!1}return this.j+=o,o=Math.max(this.$-(t-this.f),0),clearTimeout(this.o),this.o=setTimeout(this.T.bind(this,e),o),!1}s(Ln,Te),s(An,Sn),An.prototype.j=function(){var t=this.v,e=t.aa(),i=t.Cb(),o=this.U().G();if(this.T){var r,n=e.qd(i);o=[t.Ia(X(o)),t.Ia(Z(o))],t=N(void 0);var s=0;for(r=o.length;s<r;++s)U(t,o[s]);et(n,1/(o=e.Je(t,i))),o=n}i=e.constrainResolution(e.Je(o,i)),n=z(o),n=e.Sc(n),e.animate({resolution:i,center:n,duration:this.B,easing:so})},s(On,zr),s(Nn,zr),s(jn,zr),jn.prototype.B=function(){this.s=void 0,vr(this.v.aa(),1,-1)},jn.prototype.T=function(t){(t=t.aa()).Ac()&&t.rd(),Hr(t,-y(this.j,-1,1),this.a,this.D),this.l=void 0,this.j=0,this.a=null,this.o=this.f=void 0},jn.prototype.V=function(t){this.C=t,t||(this.a=null)};var Gn="trackpad",Un="wheel";function Bn(t){ln.call(this,{handleDownEvent:Xn,handleDragEvent:Vn,handleUpEvent:Wn}),t=t||{},this.f=null,this.j=void 0,this.a=!1,this.s=0,this.C=void 0!==t.threshold?t.threshold:.3,this.o=void 0!==t.duration?t.duration:250}function Vn(t){var e=0,i=this.l[0],o=this.l[1];if(i=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX),void 0!==this.j&&(e=i-this.j,this.s+=e,!this.a&&Math.abs(this.s)>this.C&&(this.a=!0)),this.j=i,(i=(t=t.map).aa()).l.rotation!==Xi){o=t.a.getBoundingClientRect();var r=pn(this.l);r[0]-=o.left,r[1]-=o.top,this.f=t.Ra(r),this.a&&(o=i.Sa(),t.render(),Kr(i,o+e,this.f))}}function Wn(t){if(2>this.l.length){if(vr(t=t.map.aa(),1,-1),this.a){var e=t.Sa(),i=this.f,o=this.o;Kr(t,e=t.constrainRotation(e,0),i,o)}return!1}return!0}function Xn(t){return 2<=this.l.length&&(t=t.map,this.f=null,this.j=void 0,this.a=!1,this.s=0,this.D||vr(t.aa(),1,1),!0)}function Yn(t){ln.call(this,{handleDownEvent:Hn,handleDragEvent:zn,handleUpEvent:Kn}),t=t||{},this.s=t.constrainResolution||!1,this.f=null,this.o=void 0!==t.duration?t.duration:400,this.a=void 0,this.j=1}function zn(t){var e=1,i=this.l[0],o=this.l[1],r=i.clientX-o.clientX;i=i.clientY-o.clientY,r=Math.sqrt(r*r+i*i),void 0!==this.a&&(e=this.a/r),this.a=r,o=(r=(t=t.map).aa()).Pa();var n=r.a,s=r.i;(i=o*e)>n?(e=n/o,i=n):i<s&&(e=s/o,i=s),1!=e&&(this.j=e),e=t.a.getBoundingClientRect(),(o=pn(this.l))[0]-=e.left,o[1]-=e.top,this.f=t.Ra(o),t.render(),$r(r,i,this.f)}function Kn(t){if(2>this.l.length){vr(t=t.map.aa(),1,-1);var e=t.Pa();if(this.s||e<t.i||e>t.a){var i=this.f,o=this.o;$r(t,e=t.constrainResolution(e,0,this.j-1),i,o)}return!1}return!0}function Hn(t){return 2<=this.l.length&&(t=t.map,this.f=null,this.a=void 0,this.j=1,this.D||vr(t.aa(),1,1),!0)}function $n(t){t=t||{};var e=new Fe,i=new Xr(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new gn),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new qr({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new cn({kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Bn),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Yn({constrainResolution:t.constrainResolution,duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new On),e.push(new Nn({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new jn({constrainResolution:t.constrainResolution,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new An({duration:t.zoomDuration})),e}function qn(t,e,i,o){Ce.call(this),this.extent=t,this.a=i,this.resolution=e,this.state=o}function Zn(t,e,i,o,r){this.c=void 0!==r?r:null,qn.call(this,t,e,i,void 0!==r?0:2),this.g=o}function Jn(t,e,i,o,r){Te.call(this,t),this.vectorContext=e,this.frameState=i,this.context=o,this.glContext=r}function Qn(t){Ce.call(this),this.highWaterMark=void 0!==t?t:2048,this.i=0,this.a={},this.c=this.g=null}function ts(t){return t.i>t.highWaterMark}s(Bn,ln),Bn.prototype.jd=po,s(Yn,ln),Yn.prototype.jd=po,s(qn,Ce),qn.prototype.u=function(){this.b("change")},qn.prototype.G=function(){return this.extent},qn.prototype.getState=function(){return this.state},s(Zn,qn),Zn.prototype.i=function(t){this.state=t?3:2,this.u()},Zn.prototype.load=function(){0==this.state&&(this.state=1,this.u(),this.c(this.i.bind(this)))},Zn.prototype.Y=function(){return this.g},s(Jn,Te),s(Qn,Ce),(t=Qn.prototype).clear=function(){this.i=0,this.a={},this.c=this.g=null,this.b("clear")},t.forEach=function(t,e){for(var i=this.g;i;)t.call(e,i.Pc,i.jc,this),i=i.kb},t.get=function(t){return d(void 0!==(t=this.a[t]),15),t===this.c?t.Pc:(t===this.g?(this.g=this.g.kb,this.g.Pb=null):(t.kb.Pb=t.Pb,t.Pb.kb=t.kb),t.kb=null,t.Pb=this.c,this.c=this.c.kb=t,t.Pc)},t.remove=function(t){var e=this.a[t];return d(void 0!==e,15),e===this.c?(this.c=e.Pb)&&(this.c.kb=null):e===this.g?(this.g=e.kb)&&(this.g.Pb=null):(e.kb.Pb=e.Pb,e.Pb.kb=e.kb),delete this.a[t],--this.i,e.Pc},t.pop=function(){var t=this.g;return delete this.a[t.jc],t.kb&&(t.kb.Pb=null),this.g=t.kb,this.g||(this.c=null),--this.i,t.Pc},t.replace=function(t,e){this.get(t),this.a[t].Pc=e},t.set=function(t,e){d(!(t in this.a),16),e={jc:t,kb:null,Pb:this.c,Pc:e},this.c?this.c.kb=e:this.g=e,this.c=e,this.a[t]=e,++this.i};var es=[0,0,0,1],is=[],os=[0,0,0,1],rs=[0,0,0,0],ns=new Qn,ss={},as=null,hs={},ls=function(){function t(t){var e=ps();e.font="32px monospace",o=e.measureText("wmytzilWMYTZIL@#/&?$%10").width;var i=!0;return"monospace"!=t&&(e.font="32px "+t+",monospace",i=e.measureText("wmytzilWMYTZIL@#/&?$%10").width!=o),i}function e(){var e,o=!0;for(e in r)60>r[e]&&(t(e)?(r[e]=60,rt(hs),as=null,n.clear()):(++r[e],o=!1));o&&(window.clearInterval(i),i=void 0)}var i,o,r=ss,n=ns;return function(o){if(o=Fr(o))for(var n=0,s=o.length;n<s;++n){var a=o[n];a in r||(r[a]=60,t(a)||(r[a]=0,void 0===i&&(i=window.setInterval(e,32))))}}}();function ps(){var t=as;return t||(t=as=mr(1,1)),t}var us=function(){var t;return function(e){var i=hs[e];return void 0==i&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=e,document.body.appendChild(t),i=hs[e]=t.offsetHeight,document.body.removeChild(t)),i}}();function cs(t,e){var i=ps();return t!=i.font&&(i.font=t),i.measureText(e).width}function fs(t,e,i,o){0!==e&&(t.translate(i,o),t.rotate(e),t.translate(-i,-o))}var ds=[1,0,0,1,0,0];function ys(t,e,i,o,r,n,s,a,h,l,p){if(1!=i){var u=t.globalAlpha;t.globalAlpha=u*i}e&&t.setTransform.apply(t,e),t.drawImage(o,r,n,s,a,h,l,s*p,a*p),u&&(t.globalAlpha=u),e&&t.setTransform.apply(t,ds)}var gs=/^#(?:[0-9a-f]{3,4}){1,2}$/i,vs=/^([a-z]*)$/i;function ms(t){return Array.isArray(t)?t:bs(t)}function _s(t){if("string"!=typeof t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var o=t[2];o!=(0|o)&&(o=o+.5|0),t="rgba("+e+","+i+","+o+","+(void 0===t[3]?1:t[3])+")"}return t}var bs=function(){var t={},e=0;return function(i){if(t.hasOwnProperty(i))var o=t[i];else{if(1024<=e)for(var r in o=0,t)0==(3&o++)&&(delete t[r],--e);if(o=i,vs.exec(o)&&((r=document.createElement("div")).style.color=o,document.body.appendChild(r),o=getComputedStyle(r).color,document.body.removeChild(r)),gs.exec(o)){var n=4>=(r=o.length-1)?1:2,s=4===r||8===r;r=parseInt(o.substr(1+0*n,n),16);var a=parseInt(o.substr(1+1*n,n),16),h=parseInt(o.substr(1+2*n,n),16);o=s?parseInt(o.substr(1+3*n,n),16):255,1==n&&(r=(r<<4)+r,a=(a<<4)+a,h=(h<<4)+h,s&&(o=(o<<4)+o)),n=[r,a,h,o/255]}else 0==o.indexOf("rgba(")?n=xs(o=o.slice(5,-1).split(",").map(Number)):0==o.indexOf("rgb(")?((o=o.slice(4,-1).split(",").map(Number)).push(1),n=xs(o)):d(!1,14);o=n,t[i]=o,++e}return o}}();function xs(t){var e=[];return e[0]=y(t[0]+.5|0,0,255),e[1]=y(t[1]+.5|0,0,255),e[2]=y(t[2]+.5|0,0,255),e[3]=y(t[3],0,1),e}function Es(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient?t:_s(t)}function Ss(){}function Ts(t,e,i,o,r){this.g=t,this.f=e,this.c=i,this.N=o,this.ob=r,this.M=this.b=this.a=this.Wa=this.O=this.T=null,this.$=this.V=this.v=this.B=this.C=this.D=0,this.ca=!1,this.i=this.ab=0,this.ra=!1,this.oa=0,this.ta="",this.Ub=this.ua=0,this.Ea=!1,this.s=this.La=0,this.qa=this.l=this.j=null,this.o=[],this.bb=[1,0,0,1,0,0]}function ws(t,e,i){if(t.M){e=uo(e,0,i,2,t.N,t.o),i=t.g;var o=t.bb,r=i.globalAlpha;1!=t.v&&(i.globalAlpha=r*t.v);var n,s=t.ab;t.ca&&(s+=t.ob);var a=0;for(n=e.length;a<n;a+=2){var h=e[a]-t.D,l=e[a+1]-t.C;if(t.ra&&(h=Math.round(h),l=Math.round(l)),0!==s||1!=t.i){var p=h+t.D,u=l+t.C;So(o,p,u,t.i,t.i,s,-p,-u),i.setTransform.apply(i,o)}i.drawImage(t.M,t.V,t.$,t.oa,t.B,h,l,t.oa,t.B)}0===s&&1==t.i||i.setTransform(1,0,0,1,0,0),1!=t.v&&(i.globalAlpha=r)}}function Cs(t,e,i,o){var r=0;if(t.qa&&""!==t.ta){t.j&&Is(t,t.j),t.l&&Ms(t,t.l);var n=t.qa,s=t.g,a=t.Wa,h=n.textAlign?n.textAlign:"center";for(a?(a.font!=n.font&&(a.font=s.font=n.font),a.textAlign!=h&&(a.textAlign=h),a.textBaseline!=n.textBaseline&&(a.textBaseline=s.textBaseline=n.textBaseline)):(s.font=n.font,s.textAlign=h,s.textBaseline=n.textBaseline,t.Wa={font:n.font,textAlign:h,textBaseline:n.textBaseline}),e=uo(e,r,i,o,t.N,t.o),n=t.g,s=t.La,t.Ea&&(s+=t.ob);r<i;r+=o){if(a=e[r]+t.ua,h=e[r+1]+t.Ub,0!==s||1!=t.s){var l=So(t.bb,a,h,t.s,t.s,s,-a,-h);n.setTransform.apply(n,l)}t.l&&n.strokeText(t.ta,a,h),t.j&&n.fillText(t.ta,a,h)}0===s&&1==t.s||n.setTransform(1,0,0,1,0,0)}}function Rs(t,e,i,o,r,n){var s=t.g;for(t=uo(e,i,o,r,t.N,t.o),s.moveTo(t[0],t[1]),e=t.length,n&&(e-=2),i=2;i<e;i+=2)s.lineTo(t[i],t[i+1]);return n&&s.closePath(),o}function Ps(t,e,i,o,r){var n,s=0;for(n=o.length;s<n;++s)i=Rs(t,e,i,o[s],r,!0);return i}function Is(t,e){var i=t.g,o=t.T;o?o.fillStyle!=e.fillStyle&&(o.fillStyle=i.fillStyle=e.fillStyle):(i.fillStyle=e.fillStyle,t.T={fillStyle:e.fillStyle})}function Ms(t,e){var i=t.g,o=t.O;o?(o.lineCap!=e.lineCap&&(o.lineCap=i.lineCap=e.lineCap),Ze&&(qt(o.lineDash,e.lineDash)||i.setLineDash(o.lineDash=e.lineDash),o.lineDashOffset!=e.lineDashOffset&&(o.lineDashOffset=i.lineDashOffset=e.lineDashOffset)),o.lineJoin!=e.lineJoin&&(o.lineJoin=i.lineJoin=e.lineJoin),o.lineWidth!=e.lineWidth&&(o.lineWidth=i.lineWidth=e.lineWidth),o.miterLimit!=e.miterLimit&&(o.miterLimit=i.miterLimit=e.miterLimit),o.strokeStyle!=e.strokeStyle&&(o.strokeStyle=i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,Ze&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,t.O={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}function Ls(t){Pe.call(this),this.a=t}function As(t,e){var i=e.getState();return 2!=i&&3!=i&&ve(e,"change",t.$,t),0==i&&(e.load(),i=e.getState()),2==i}function Os(t){var e=t.a;e.Jb()&&"ready"==e.hg()&&t.u()}function Fs(t,e){e.cj()&&t.postRenderFunctions.push(function(t,e,i){(e=h(t).toString())in i.usedTiles&&t.sd(i.viewState.projection,i.usedTiles[e])}.bind(null,e))}function Ns(t,e){void 0!==(e=e.T)&&("string"==typeof e?t.logos[e]="":e&&(d("string"==typeof e.href,44),d("string"==typeof e.src,45),t.logos[e.src]=e.href))}function Ds(t,e,i,o){e=h(e).toString(),i=i.toString(),e in t?i in t[e]?(t=t[e][i],o.fa<t.fa&&(t.fa=o.fa),o.la>t.la&&(t.la=o.la),o.ea<t.ea&&(t.ea=o.ea),o.ka>t.ka&&(t.ka=o.ka)):t[e][i]=o:(t[e]={},t[e][i]=o)}function js(t,e,i,o,r,n,s,a,l,p){var u=h(e).toString();u in t.wantedTiles||(t.wantedTiles[u]={});var c,f,d,y=t.wantedTiles[u];for(t=t.tileQueue,d=i.minZoom;d<=s;++d){var g=re(i,n,d,g),v=i.Ta(d);for(c=g.fa;c<=g.la;++c)for(f=g.ea;f<=g.ka;++f)if(s-d<=a){var m=e.ad(d,c,f,o,r);0==m.getState()&&(y[m.lb()]=!0,m.lb()in t.a||t.i([m,u,ne(i,m.ya),v])),void 0!==l&&l.call(p,m)}else e.kh(d,c,f,r)}}function ks(t){Ls.call(this,t),this.V=[1,0,0,1,0,0]}function Gs(t,e,i){var o=e.pixelRatio,r=e.size[0]*o,n=e.size[1]*o,s=e.viewState.rotation,a=q(i),h=Z(i),l=Y(i);i=X(i),_o(e.coordinateToPixelTransform,a),_o(e.coordinateToPixelTransform,h),_o(e.coordinateToPixelTransform,l),_o(e.coordinateToPixelTransform,i),t.save(),fs(t,-s,r/2,n/2),t.beginPath(),t.moveTo(a[0]*o,a[1]*o),t.lineTo(h[0]*o,h[1]*o),t.lineTo(l[0]*o,l[1]*o),t.lineTo(i[0]*o,i[1]*o),t.clip(),fs(t,s,r/2,n/2)}function Us(t,e,i,o,r){var n=t.a;if(Re(n,e)){var s=o.size[0]*o.pixelRatio,a=o.size[1]*o.pixelRatio,h=o.viewState.rotation;fs(i,-h,s/2,a/2),t=void 0!==r?r:Bs(t,o,0),n.b(new Jn(e,new Ts(i,o.pixelRatio,o.extent,t,o.viewState.rotation),o,i,null)),fs(i,h,s/2,a/2)}}function Bs(t,e,i){var o=e.viewState,r=e.pixelRatio,n=r/o.resolution;return So(t.V,r*e.size[0]/2,r*e.size[1]/2,n,-n,-o.rotation,-o.center[0]+i,-o.center[1])}function Vs(t){ks.call(this,t),this.l=[1,0,0,1,0,0],this.j=null}function Ws(t){Vs.call(this,t),this.M=null,this.f=[1,0,0,1,0,0],this.o=[],this.c=null}function Xs(){this.b={},this.a=0,this.g=32}function Ys(t){if(t.a>t.g){var e,i=0;for(e in t.b){var o=t.b[e];0!=(3&i++)||Re(o)||(delete t.b[e],--t.a)}}}(t=Ss.prototype).Hh=function(){},t.Hb=function(){},t.Dd=function(){},t.cc=function(){},t.Ce=function(){},t.De=function(){},t.uc=function(){},t.vc=function(){},t.wc=function(){},t.xc=function(){},t.yc=function(){},t.zc=function(){},t.Wb=function(){},t.Oa=function(){},t.Zb=function(){},t.nb=function(){},s(Ts,Ss),(t=Ts.prototype).cc=function(t){if(Q(this.c,t.G())){if(this.a||this.b){this.a&&Is(this,this.a),this.b&&Ms(this,this.b);var e=this.N,i=this.o,o=t.da();i=(e=o?uo(o,0,o.length,t.pa(),e,i):null)[2]-e[0],o=e[3]-e[1],i=Math.sqrt(i*i+o*o),(o=this.g).beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.a&&o.fill(),this.b&&o.stroke()}""!==this.ta&&Cs(this,t.xa(),2,2)}},t.Dd=function(t){this.Oa(t.Fa(),t.Ga()),this.Zb(t.Y()),this.nb(t.Ka())},t.Hb=function(t){switch(t.S()){case"Point":this.yc(t);break;case"LineString":this.uc(t);break;case"Polygon":this.zc(t);break;case"MultiPoint":this.wc(t);break;case"MultiLineString":this.vc(t);break;case"MultiPolygon":this.xc(t);break;case"GeometryCollection":this.De(t);break;case"Circle":this.cc(t)}},t.Ce=function(t,e){(t=(0,e.cb)(t))&&Q(this.c,t.G())&&(this.Dd(e),this.Hb(t))},t.De=function(t){var e,i=0;for(e=(t=t.a).length;i<e;++i)this.Hb(t[i])},t.yc=function(t){var e=t.da();t=t.pa(),this.M&&ws(this,e,e.length),""!==this.ta&&Cs(this,e,e.length,t)},t.wc=function(t){var e=t.da();t=t.pa(),this.M&&ws(this,e,e.length),""!==this.ta&&Cs(this,e,e.length,t)},t.uc=function(t){if(Q(this.c,t.G())){if(this.b){Ms(this,this.b);var e=this.g,i=t.da();e.beginPath(),Rs(this,i,0,i.length,t.pa(),!1),e.stroke()}""!==this.ta&&Cs(this,t=t.Fe(),2,2)}},t.vc=function(t){var e=t.G();if(Q(this.c,e)){if(this.b){Ms(this,this.b),e=this.g;var i,o=t.da(),r=0,n=t.pb(),s=t.pa();e.beginPath();var a=0;for(i=n.length;a<i;++a)r=Rs(this,o,r,n[a],s,!1);e.stroke()}""!==this.ta&&Cs(this,t=t.Ge(),t.length,2)}},t.zc=function(t){if(Q(this.c,t.G())){if(this.b||this.a){this.a&&Is(this,this.a),this.b&&Ms(this,this.b);var e=this.g;e.beginPath(),Ps(this,t.Xb(),0,t.pb(),t.pa()),this.a&&e.fill(),this.b&&e.stroke()}""!==this.ta&&Cs(this,t=t.Td(),2,2)}},t.xc=function(t){if(Q(this.c,t.G())){if(this.b||this.a){this.a&&Is(this,this.a),this.b&&Ms(this,this.b);var e,i=this.g,o=Qu(t),r=0,n=t.td(),s=t.pa();i.beginPath();var a=0;for(e=n.length;a<e;++a)r=Ps(this,o,r,n[a],s);this.a&&i.fill(),this.b&&i.stroke()}""!==this.ta&&Cs(this,t=Ju(t),t.length,2)}},t.Oa=function(t,e){if(t?(t=t.b,this.a={fillStyle:Es(t||es)}):this.a=null,e){t=e.a;var i=e.f,o=e.g,r=e.i,n=e.j,s=e.c;e=e.l,this.b={lineCap:void 0!==i?i:"round",lineDash:o||is,lineDashOffset:r||0,lineJoin:void 0!==n?n:"round",lineWidth:this.f*(void 0!==s?s:1),miterLimit:void 0!==e?e:10,strokeStyle:Es(t||os)}}else this.b=null},t.Zb=function(t){if(t){var e=t.Vc(),i=t.Y(1),o=t.bd(),r=t.oc();this.D=e[0],this.C=e[1],this.B=r[1],this.M=i,this.v=t.i,this.V=o[0],this.$=o[1],this.ca=t.s,this.ab=t.f,this.i=t.a*this.f,this.ra=t.v,this.oa=r[0]}else this.M=null},t.nb=function(t){if(t){var e=t.Fa();e?(e=e.b,this.j={fillStyle:Es(e||es)}):this.j=null;var i=t.Ga();if(i){e=i.a;var o=i.f,r=i.g,n=i.i,s=i.j,a=i.c;i=i.l,this.l={lineCap:void 0!==o?o:"round",lineDash:r||is,lineDashOffset:n||0,lineJoin:void 0!==s?s:"round",lineWidth:void 0!==a?a:1,miterLimit:void 0!==i?i:10,strokeStyle:Es(e||os)}}else this.l=null;e=t.a,o=t.g,r=t.c,n=t.l,s=t.i,a=t.b,i=t.Ka();var h=t.f;t=t.j,this.qa={font:void 0!==e?e:"10px sans-serif",textAlign:void 0!==h?h:"center",textBaseline:void 0!==t?t:"middle"},this.ta=void 0!==i?i:"",this.ua=void 0!==o?this.f*o:0,this.Ub=void 0!==r?this.f*r:0,this.Ea=void 0!==n&&n,this.La=void 0!==s?s:0,this.s=this.f*(void 0!==a?a:1)}else this.ta=""},s(Ls,Pe),Ls.prototype.wa=a,Ls.prototype.cf=po,Ls.prototype.Rf=function(t,e,i){return function(o,r){return xb(t,e,o,r,function(t){i[o]||(i[o]={}),i[o][t.ya.toString()]=t})}},Ls.prototype.$=function(t){2===t.target.getState()&&Os(this)},s(ks,Ls),ks.prototype.s=function(t,e,i,o){if(this.wa(t,e,0,lo,this))return i.call(o,this.a,null)},ks.prototype.pf=function(t,e,i,o){Us(this,"postcompose",t,e,o)},s(Vs,ks),Vs.prototype.df=function(t,e,i){Us(this,"precompose",i,t,void 0);var o=this.Y();if(o){var r=e.extent,n=void 0!==r&&!M(r,t.extent)&&Q(r,t.extent);n&&Gs(i,t,r),r=this.v();var s=i.globalAlpha;i.globalAlpha=e.opacity,i.drawImage(o,0,0,+o.width,+o.height,Math.round(r[4]),Math.round(r[5]),Math.round(o.width*r[0]),Math.round(o.height*r[3])),i.globalAlpha=s,n&&i.restore()}this.pf(i,t,e)},Vs.prototype.wa=function(t,e,i,o,r){var n=this.a;return n.ha().wa(t,e.viewState.resolution,e.viewState.rotation,i,e.skippedFeatureUids,function(t){return o.call(r,t,n)})},Vs.prototype.s=function(t,e,i,o){if(this.Y()){if(this.a.ha().wa!==a)return ks.prototype.s.apply(this,arguments);var r=_o(this.l,t.slice());if(to(r,e.viewState.resolution/this.i),this.j||(this.j=mr(1,1)),this.j.clearRect(0,0,1,1),this.j.drawImage(this.Y(),r[0],r[1],1,1,0,0,1,1),0<(r=this.j.getImageData(0,0,1,1).data)[3])return i.call(o,this.a,r)}},s(Ws,Vs),Ws.handles=function(t,e){return"canvas"===t&&("IMAGE"===e.S()||"VECTOR"===e.S()&&"image"===e.l)},Ws.create=function(t,e){var i=new Ws(e);if("VECTOR"===e.S())for(var o=0,r=Cr.length;o<r;++o){var n=Cr[o];n!==Ws&&n.handles("canvas",e)&&(n=n.create(t,e),i.c=n)}return i},Ws.prototype.Y=function(){return this.M?this.M.Y():null},Ws.prototype.v=function(){return this.f},Ws.prototype.$c=function(t,e){var i=t.pixelRatio,o=t.size,r=t.viewState,n=r.center,s=r.resolution,a=this.a.ha(),h=t.viewHints,l=t.extent;if(void 0!==e.extent&&(l=$(l,e.extent)),!h[0]&&!h[1]&&!tt(l))if(h=r.projection,r=this.c){h=r.context;var p=ot({},t,{size:[J(l)/s,H(l)/s],viewState:ot({},t.viewState,{rotation:0})}),u=Object.keys(p.skippedFeatureUids).sort();!r.$c(p,e)||!r.j&&qt(u,this.o)||(h.canvas.width=p.size[0]*i,h.canvas.height=p.size[1]*i,r.df(p,e,h),this.M=new Zn(l,s,i,h.canvas),this.o=u)}else(r=a.Y(l,s,i,h))&&As(this,r)&&(this.M=r);return this.M&&(l=(r=this.M).G(),h=i*(e=r.resolution)/(s*(r=r.a)),l=So(this.f,i*o[0]/2,i*o[1]/2,h,h,0,r*(l[0]-n[0])/e,r*(n[1]-l[3])/e),So(this.l,i*o[0]/2-l[4],i*o[1]/2-l[5],i/s,-i/s,0,-n[0],-n[1]),Ns(t,a),this.i=e*i/r),!!this.M},Ws.prototype.wa=function(t,e,i,o,r){return this.c?this.c.wa(t,e,i,o,r):Vs.prototype.wa.call(this,t,e,i,o,r)},Xs.prototype.clear=function(){this.b={},this.a=0},Xs.prototype.get=function(t,e,i){return(t=e+":"+t+":"+(i?_s(i):"null"))in this.b?this.b[t]:null},Xs.prototype.set=function(t,e,i,o){this.b[e+":"+t+":"+(i?_s(i):"null")]=o,++this.a},Xs.prototype.c=function(t){this.g=t,Ys(this)};var zs=new Xs;function Ks(t,e){this.l=e,this.c={},this.v={}}function Hs(t){var e=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;So(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),To(mo(o,i))}function $s(){Ys(zs)}function qs(t,e){var i=h(e).toString();if(i in t.c)return t.c[i];for(var o,r=t.S(),n=0,s=Cr.length;n<s;++n){var a=Cr[n];if(a.handles(r,e)){o=a.create(t,e);break}}if(!o)throw Error("Unable to create renderer for layer: "+e.S());return t.c[i]=o,t.v[i]=ve(o,"change",t.gm,t),o}function Zs(t,e){var i=t.c[e];return delete t.c[e],be(t.v[e]),delete t.v[e],i}function Js(t,e){for(var i in t.c)if(!(i in e.layerStates)){e.postRenderFunctions.push(t.oq.bind(t));break}}function Qs(t,e){return t.zIndex-e.zIndex}function ta(t,e){Ks.call(this,t,e),this.g=mr(),this.b=this.g.canvas,this.b.style.width="100%",this.b.style.height="100%",this.b.style.display="block",this.b.className="ol-unselectable",t.insertBefore(this.b,t.childNodes[0]||null),this.a=!0,this.i=[1,0,0,1,0,0]}function ea(t,e,i){var o=t.l,r=t.g;if(Re(o,e)){var n=i.extent,s=i.pixelRatio,a=i.viewState.rotation,h=i.viewState,l=i.pixelRatio/h.resolution;t=So(t.i,t.b.width/2,t.b.height/2,l,-l,-h.rotation,-h.center[0],-h.center[1]),o.b(new Jn(e,new Ts(r,s,n,t,a),i,r,null))}}function ia(t){Vs.call(this,t),this.context=null===this.context?null:mr(),this.c=null,this.f=[],this.T=[1/0,1/0,-1/0,-1/0],this.ra=new u(0,0,0,0),this.o=[1,0,0,1,0,0],this.O=0}function oa(t,e){return e=e.getState(),t=t.a.i(),2==e||4==e||3==e&&!t}s(Ks,Ee),(t=Ks.prototype).wa=function(t,e,i,o,r,n,s){function a(t,i){var n=h(t).toString(),s=e.layerStates[h(i)].Te;if(!(n in e.skippedFeatureUids)||s)return o.call(r,t,s?i:null)}var l,p=e.viewState,u=p.resolution,c=p.projection;if(p=t,c.g){var f=J(c=c.G()),d=t[0];(d<c[0]||d>c[2])&&(p=[d+f*Math.ceil((c[0]-d)/f),t[1]])}for(f=(c=e.layerStatesArray).length-1;0<=f;--f){var y=c[f];if(d=y.layer,Dr(y,u)&&n.call(s,d)&&(y=qs(this,d),d.ha()&&(l=y.wa(d.ha().D?p:t,e,i,a,r)),l))return l}},t.Ui=function(t,e,i,o,r){return void 0!==this.wa(t,e,i,lo,this,o,r)},t.gm=function(){this.l.render()},t.bh=a,t.oq=function(t,e){for(var i in this.c)e&&i in e.layerStates||Se(Zs(this,i))},s(ta,Ks),ta.handles=function(t){return"canvas"===t},ta.create=function(t,e){return new ta(t,e)},ta.prototype.S=function(){return"canvas"},ta.prototype.bh=function(t){if(t){var e=this.g,i=t.pixelRatio,o=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.b.width!=o||this.b.height!=r?(this.b.width=o,this.b.height=r):e.clearRect(0,0,o,r),i=t.viewState.rotation,Hs(t),ea(this,"precompose",t);var n,s=t.layerStatesArray;for(Zt(s),i&&(e.save(),fs(e,i,o/2,r/2)),o=t.viewState.resolution,r=0,n=s.length;r<n;++r){var a=s[r],h=a.layer;h=qs(this,h),Dr(a,o)&&"ready"==a.Vj&&h.$c(t,a)&&h.df(t,a,e)}i&&e.restore(),ea(this,"postcompose",t),this.a||(this.b.style.display="",this.a=!0),Js(this,t),t.postRenderFunctions.push($s)}else this.a&&(this.b.style.display="none",this.a=!1)},ta.prototype.Ti=function(t,e,i,o,r,n){var s=e.viewState.resolution,a=e.layerStatesArray,h=a.length;for(t=_o(e.pixelToCoordinateTransform,t.slice()),--h;0<=h;--h){var l=a[h],p=l.layer;if(Dr(l,s)&&r.call(n,p)&&(l=qs(this,p).s(t,e,i,o)))return l}},s(ia,Vs),ia.handles=function(t,e){return"canvas"===t&&"TILE"===e.S()},ia.create=function(t,e){return new ia(e)},ia.prototype.$c=function(t,e){var i=t.pixelRatio,o=t.size,r=t.viewState,n=r.projection,s=r.resolution;r=r.center;var a=this.a,l=a.ha(),p=l.g,u=l.eb(n),c=u.Dc(s,this.O),f=u.Ta(c),d=Math.round(s/f)||1,y=t.extent;if(void 0!==e.extent&&(y=$(y,e.extent)),tt(y))return!1;var g=re(u,y,c),v=function(t,e,i){var o=t.Ic(e),r=t.Ta(e);return t=T(t.Za(e),t.f),F(o[0]+i.fa*t[0]*r,o[1]+i.ea*t[1]*r,o[0]+(i.la+1)*t[0]*r,o[1]+(i.ka+1)*t[1]*r,void 0)}(u,c,g),m=l.Xc(i),_={};_[c]={};var b,x,E=this.Rf(l,n,_),S=this.T,w=this.ra,C=!1;for(b=g.fa;b<=g.la;++b)for(x=g.ea;x<=g.ka;++x){var R=l.ad(c,b,x,i,n);if(3==R.getState()&&(a.i()?0<a.c()&&(C=!0):Rh(R,2)),oa(this,R)||(R=wh(R)),oa(this,R)){var P=h(this);if(2==R.getState()){_[c][R.ya.toString()]=R;var I=!!R.j&&-1!==R.s[P];C||!I&&-1!==this.f.indexOf(R)||(C=!0)}if(1===Ph(R,P,t.time))continue}I=!1,(P=oe(u,R.ya,w,S))&&(I=E(c+1,P)),I||ie(u,R.ya,E,w,S)}if(R=(R=t.viewHints)[0]||R[1],!(this.i&&16<Date.now()-t.time&&R||!C&&this.c&&M(this.c,y)&&this.wf==p&&d==this.C&&(R||f*i/m*d==this.i))){for((R=this.context)&&(x=l.Zd(c,i,n),b=Math.round((g.la-g.fa+1)*x[0]/d),x=Math.round((g.ka-g.ea+1)*x[1]/d),(C=R.canvas).width!=b||C.height!=x?(this.C=d,C.width=b,C.height=x):(this.c&&!k(v,this.c)&&R.clearRect(0,0,b,x),d=this.C)),this.f.length=0,(C=Object.keys(_).map(Number)).sort(function(t,e){return t===c?1:e===c?-1:t>e?1:t<e?-1:0}),P=0,I=C.length;P<I;++P){w=C[P],E=l.Zd(w,i,n);var L=(R=u.Ta(w))/f,A=m*l.Zf(n),O=_[w];for(var N in O){R=O[N],b=((x=u.Ma(R.ya,S))[0]-v[0])/f*m/d,x=(v[3]-x[3])/f*m/d;var D=E[0]*L/d,j=E[1]*L/d;this.Sf(R,t,e,b,x,D,j,A,c===w),this.f.push(R)}}this.wf=p,this.i=f*i/m*d,this.c=v}return e=this.i/s,e=So(this.o,i*o[0]/2,i*o[1]/2,e,e,0,(this.c[0]-r[0])/this.i*i,(r[1]-this.c[3])/this.i*i),So(this.l,i*o[0]/2-e[4],i*o[1]/2-e[5],i/s,-i/s,0,-r[0],-r[1]),Ds(t.usedTiles,l,c,g),js(t,l,u,i,n,y,c,a.c()),Fs(t,l),Ns(t,l),0<this.f.length},ia.prototype.Sf=function(t,e,i,o,r,n,s,a,l){if(i=t.Y(this.a)){var p=h(this),u=l?Ph(t,p,e.time):1;1!==u||this.a.ha().eg(e.viewState.projection)||this.context.clearRect(o,r,n,s);var c=u!==this.context.globalAlpha;c&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(i,a,a,i.width-2*a,i.height-2*a,o,r,n,s),c&&this.context.restore(),1!==u?e.animate=!0:l&&t.j&&(t.s[p]=-1)}},ia.prototype.Y=function(){var t=this.context;return t?t.canvas:null},ia.prototype.v=function(){return this.o};var ra={Jc:function(){}};function na(){}function sa(t,e,i,o){var r=t[e],n=t[e+1],s=0;for(e+=o;e<i;e+=o){var a=t[e],h=t[e+1];s+=Math.sqrt((a-r)*(a-r)+(h-n)*(h-n)),r=a,n=h}return s}!function(t){function e(t,e,o,n,s){i(t,e,o||0,n||t.length-1,s||r)}function i(t,e,r,n,s){for(;n>r;){if(600<n-r){var a=n-r+1,h=e-r+1,l=Math.log(a),p=.5*Math.exp(2*l/3);l=.5*Math.sqrt(l*p*(a-p)/a)*(0>h-a/2?-1:1),i(t,e,Math.max(r,Math.floor(e-h*p/a+l)),Math.min(n,Math.floor(e+(a-h)*p/a+l)),s)}for(a=t[e],h=r,p=n,o(t,r,e),0<s(t[n],a)&&o(t,r,n);h<p;){for(o(t,h,p),h++,p--;0>s(t[h],a);)h++;for(;0<s(t[p],a);)p--}0===s(t[r],a)?o(t,r,p):o(t,++p,n),p<=e&&(r=p+1),e<=p&&(n=p-1)}}function o(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}function r(t,e){return t<e?-1:t>e?1:0}function n(t,e){if(!(this instanceof n))return new n(t,e);this.Lf=Math.max(4,t||9),this.wh=Math.max(2,Math.ceil(.4*this.Lf)),e&&this.Ak(e),this.clear()}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,o,r){r||(r=y(null)),r.fa=1/0,r.ea=1/0,r.la=-1/0,r.ka=-1/0;for(var n;e<i;e++)n=t.children[e],h(r,t.fb?o(n):n);return r}function h(t,e){return t.fa=Math.min(t.fa,e.fa),t.ea=Math.min(t.ea,e.ea),t.la=Math.max(t.la,e.la),t.ka=Math.max(t.ka,e.ka),t}function l(t,e){return t.fa-e.fa}function p(t,e){return t.ea-e.ea}function u(t){return(t.la-t.fa)*(t.ka-t.ea)}function c(t){return t.la-t.fa+(t.ka-t.ea)}function f(t,e){return t.fa<=e.fa&&t.ea<=e.ea&&e.la<=t.la&&e.ka<=t.ka}function d(t,e){return e.fa<=t.la&&e.ea<=t.ka&&e.la>=t.fa&&e.ka>=t.ea}function y(t){return{children:t,height:1,fb:!0,fa:1/0,ea:1/0,la:-1/0,ka:-1/0}}function g(t,e,i,o,r){for(var n,s=[e,i];s.length;)(i=s.pop())-(e=s.pop())<=o||(n=e+Math.ceil((i-e)/o/2)*o,v(t,n,e,i,r),s.push(e,n,n,i))}var v=e;v.default=e,n.prototype={all:function(){return this.rh(this.data,[])},search:function(t){var e=this.data,i=[],o=this.xb;if(!d(t,e))return i;for(var r,n,s,a,h=[];e;){for(r=0,n=e.children.length;r<n;r++)s=e.children[r],d(t,a=e.fb?o(s):s)&&(e.fb?i.push(s):f(t,a)?this.rh(s,i):h.push(s));e=h.pop()}return i},Ok:function(t){var e=this.data,i=this.xb;if(!d(t,e))return!1;for(var o,r,n,s,a=[];e;){for(o=0,r=e.children.length;o<r;o++)if(n=e.children[o],d(t,s=e.fb?i(n):n)){if(e.fb||f(t,s))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this.wh){for(var e=0,i=t.length;e<i;e++)this.Ca(t[e]);return this}return t=this.th(t.slice(),0,t.length-1,0),this.data.children.length?this.data.height===t.height?this.yh(this.data,t):(this.data.height<t.height&&(e=this.data,this.data=t,t=e),this.vh(t,this.data.height-t.height-1,!0)):this.data=t,this},Ca:function(t){return t&&this.vh(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var i,o,r,n,s=this.data,a=this.xb(t),h=[],l=[];s||h.length;){if(s||(s=h.pop(),o=h[h.length-1],i=l.pop(),n=!0),s.fb){t:{r=t;var p=s.children,u=e;if(u){for(var c=0;c<p.length;c++)if(u(r,p[c])){r=c;break t}r=-1}else r=p.indexOf(r)}if(-1!==r){s.children.splice(r,1),h.push(s),this.yk(h);break}}n||s.fb||!f(s,a)?o?(i++,s=o.children[i],n=!1):s=null:(h.push(s),l.push(i),i=0,o=s,s=s.children[0])}return this},xb:function(t){return t},Pf:l,Qf:p,toJSON:function(){return this.data},rh:function(t,e){for(var i=[];t;)t.fb?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},th:function(t,e,i,o){var r,n=i-e+1,a=this.Lf;if(n<=a){var h=y(t.slice(e,i+1));return s(h,this.xb),h}for(o||(o=Math.ceil(Math.log(n)/Math.log(a)),a=Math.ceil(n/Math.pow(a,o-1))),(h=y([])).fb=!1,h.height=o,g(t,e,i,a=(n=Math.ceil(n/a))*Math.ceil(Math.sqrt(a)),this.Pf);e<=i;e+=a){var l=Math.min(e+a-1,i);for(g(t,e,l,n,this.Qf),r=e;r<=l;r+=n){var p=Math.min(r+n-1,l);h.children.push(this.th(t,r,p,o-1))}}return s(h,this.xb),h},xk:function(t,e,i,o){for(var r,n,s,a,h,l,p,c;o.push(e),!e.fb&&o.length-1!==i;){for(p=c=1/0,r=0,n=e.children.length;r<n;r++)h=u(s=e.children[r]),(l=(Math.max(s.la,t.la)-Math.min(s.fa,t.fa))*(Math.max(s.ka,t.ka)-Math.min(s.ea,t.ea))-h)<c?(c=l,p=h<p?h:p,a=s):l===c&&h<p&&(p=h,a=s);e=a||e.children[0]}return e},vh:function(t,e,i){var o=this.xb;i=i?t:o(t),o=[];var r=this.xk(i,this.data,e,o);for(r.children.push(t),h(r,i);0<=e&&o[e].children.length>this.Lf;)this.Dk(o,e),e--;this.uk(i,o,e)},Dk:function(t,e){var i=t[e],o=i.children.length,r=this.wh;this.vk(i,r,o),o=this.wk(i,r,o),(o=y(i.children.splice(o,i.children.length-o))).height=i.height,o.fb=i.fb,s(i,this.xb),s(o,this.xb),e?t[e-1].children.push(o):this.yh(i,o)},yh:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.fb=!1,s(this.data,this.xb)},wk:function(t,e,i){var o,r,n=r=1/0;for(o=e;o<=i-e;o++){var s=a(t,0,o,this.xb),h=a(t,o,i,this.xb),l=Math.max(0,Math.min(s.la,h.la)-Math.max(s.fa,h.fa))*Math.max(0,Math.min(s.ka,h.ka)-Math.max(s.ea,h.ea));if(s=u(s)+u(h),l<n){n=l;var p=o;r=s<r?s:r}else l===n&&s<r&&(r=s,p=o)}return p},vk:function(t,e,i){var o=t.fb?this.Pf:l,r=t.fb?this.Qf:p;this.sh(t,e,i,o)<(e=this.sh(t,e,i,r))&&t.children.sort(o)},sh:function(t,e,i,o){t.children.sort(o);var r,n=a(t,0,e,o=this.xb),s=a(t,i-e,i,o),l=c(n)+c(s);for(r=e;r<i-e;r++){var p=t.children[r];h(n,t.fb?o(p):p),l+=c(n)}for(r=i-e-1;r>=e;r--)p=t.children[r],h(s,t.fb?o(p):p),l+=c(s);return l},uk:function(t,e,i){for(;0<=i;i--)h(e[i],t)},yk:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.xb)},Ak:function(t){var e=["return a"," - b",";"];this.Pf=new Function("a","b",e.join(t[0])),this.Qf=new Function("a","b",e.join(t[1])),this.xb=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},t.default=n}(ra.Jc=ra.Jc||{}),ra.Jc=ra.Jc.default;var aa="Polygon Circle LineString Image Text Default".split(" "),ha={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};function la(t,e,i,o,r,n){this.ra=n,this.La=[1/0,1/0,-1/0,-1/0],this.ob=t,this.Ea=e,this.overlaps=r,this.pixelRatio=o,this.Wa=0,this.resolution=i,this.i=this.T=this.qa=null,this.a=[],this.coordinates=[],this.Ub={},this.ca=[1,0,0,1,0,0],this.b=[],this.oa=null,this.state={},this.$=0,this.bb=[1,0,0,1,0,0]}function pa(t,e,i,o,r,n,s,a){e.beginPath(),e.moveTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,i),s&&(t.O=s[2],t.Xa(e)),a&&(ya(e,a),e.stroke())}function ua(t,e,i,o,r,n,s,a,h,l,p,u,c,f,d,y,g,v,m){var _=v||m,b=t.bb;i-=n*=f,o-=s*=f,d&&(i=Math.round(i),o=Math.round(o)),d=y+p>r.width?r.width-p:y,h=h+u>r.height?r.height-u:h,y=t.La;var x=g[3]+d*f+g[1],E=g[0]+h*f+g[2],S=i-g[3],T=o-g[0];if(_||0!==c)var w=[S,T],C=[S+x,T],R=[S+x,T+E],P=[S,T+E];g=null,0!==c?(g=So(b,n=i+n,s=o+s,1,1,c,-n,-s),N(y),U(y,_o(b,w)),U(y,_o(b,C)),U(y,_o(b,R)),U(y,_o(b,P))):F(S,T,S+x,T+E,y),c=e.canvas,c=y[0]<=c.width&&0<=y[2]&&y[1]<=c.height&&0<=y[3],a?(c||1!=a[4])&&(G(a,y),(t=c?[e,g?g.slice(0):null,l,r,p,u,d,h,i,o,f]:null)&&_&&t.push(v,m,w,C,R,P),a.push(t)):c&&(_&&pa(t,e,w,C,R,P,v,m),ys(e,g,l,r,p,u,d,h,i,o,f))}function ca(t,e,i,o,r,n,s){var a=t.coordinates.length,h=Sa(t);s&&(i+=r),s=[e[i],e[i+1]];var l,p=[NaN,NaN],u=!0;for(l=i+r;l<o;l+=r){p[0]=e[l],p[1]=e[l+1];var c=A(h,p);c!==f?(u&&(t.coordinates[a++]=s[0],t.coordinates[a++]=s[1]),t.coordinates[a++]=p[0],t.coordinates[a++]=p[1],u=!1):1===c?(t.coordinates[a++]=p[0],t.coordinates[a++]=p[1],u=!1):u=!0,s[0]=p[0],s[1]=p[1];var f=c}return(n&&u||l===i+r)&&(t.coordinates[a++]=s[0],t.coordinates[a++]=s[1]),a}function fa(t,e,i,o,r,n){for(var s=0,a=o.length;s<a;++s){var h=o[s];i=ca(t,e,i,h,r,!1,!1),n.push(i),i=h}return i}function da(t,e){t.qa=[0,e,0],t.a.push(t.qa),t.T=[0,e,0],t.b.push(t.T)}function ya(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],Ze&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))}function ga(t,e,i){if(e&&5<e.length){var o=e[4];if(1==o||o==e.length-5){if(i={fa:e[0],ea:e[1],la:e[2],ka:e[3],value:i},!t.ra.Ok(i))for(t.ra.Ca(i),i=5,o=e.length;i<o;++i){var r=e[i];r&&(11<r.length&&pa(t,r[0],r[13],r[14],r[15],r[16],r[11],r[12]),ys.apply(void 0,r))}e.length=5,N(e)}}}function va(t,e,i,o,r,n,s){if(t.oa&&qt(i,t.ca))var a=t.oa;else t.oa||(t.oa=[]),a=uo(t.coordinates,0,t.coordinates.length,2,i,t.oa),mo(t.ca,i);for(var l,p,u,c,f,d,y,g,v,m=!st(o),_=0,b=r.length,E=0,S=0,T=0,w=null,C=null,R=t.Ub,P=t.$,I={context:e,pixelRatio:t.pixelRatio,resolution:t.resolution,rotation:P},M=t.a!=r||t.overlaps?0:200;_<b;){var L=r[_];switch(L[0]){case 0:var A=L[1];m&&o[h(A).toString()]||!A.U()?_=L[2]:void 0===s||Q(s,A.U().G())?++_:_=L[2]+1;break;case 1:S>M&&(t.Xa(e),S=0),T>M&&(e.stroke(),T=0),S||T||(e.beginPath(),c=f=NaN),++_;break;case 2:var O=a[E=L[1]],F=a[E+1],N=a[E+2]-O,D=a[E+3]-F,j=Math.sqrt(N*N+D*D);e.moveTo(O+j,F),e.arc(O,F,j,0,2*Math.PI,!0),++_;break;case 3:e.closePath(),++_;break;case 4:E=L[1],l=L[2];var k=L[4],G=6==L.length?L[5]:void 0;I.geometry=L[3],I.feature=A,_ in R||(R[_]=[]);var U=R[_];G?G(a,E,l,2,U):(U[0]=a[E],U[1]=a[E+1],U.length=2),k(U,I),++_;break;case 6:E=L[1],l=L[2],v=L[3],p=L[4],u=L[5],g=n?null:L[6];var B=L[7],V=L[8],W=L[9],X=L[10],Y=L[11],z=L[12],K=L[13],H=L[14],$=L[15];if(16<L.length)var q=L[16],Z=L[17],J=L[18];else q=rs,Z=J=!1;for(Y&&(z+=P);E<l;E+=2)ua(t,e,a[E],a[E+1],v,p,u,g,B,V,W,X,z,K,H,$,q,Z?w:null,J?C:null);ga(t,g,A),++_;break;case 5:var tt=L[1],et=L[2],it=L[3];g=n?null:L[4];var ot=L[5],rt=L[6],nt=L[7],at=L[8],ht=L[9],lt=L[10],pt=L[11],ut=L[12],ct=L[13],ft=L[14],dt=sa(a,tt,et,2),yt=at(ut);if(ot||yt<=dt){t:{for(var gt=void 0,vt=void 0,mt=void 0,_t=a,bt=tt,xt=et,Et=ut,St=at,Tt=(dt-yt)*ha[t.s[ct].textAlign],wt=nt,Ct=[],Rt=_t[bt]>_t[xt-2],Pt=Et.length,It=_t[bt],Mt=_t[bt+1],Lt=_t[bt+=2],At=_t[bt+1],Ot=0,Ft=Math.sqrt(Math.pow(Lt-It,2)+Math.pow(At-Mt,2)),Nt="",Dt=0,jt=0;jt<Pt;++jt){vt=Rt?Pt-jt-1:jt;var kt=Et.charAt(vt),Gt=St(Nt=Rt?kt+Nt:Nt+kt)-Dt;Dt+=Gt;for(var Ut=Tt+Gt/2;bt<xt-2&&Ot+Ft<Ut;)It=Lt,Mt=At,Lt=_t[bt+=2],At=_t[bt+1],Ot+=Ft,Ft=Math.sqrt(Math.pow(Lt-It,2)+Math.pow(At-Mt,2));var Bt=Ut-Ot,Vt=Math.atan2(At-Mt,Lt-It);if(Rt&&(Vt+=0<Vt?-Math.PI:Math.PI),void 0!==gt){var Wt=Vt-gt;if(Wt+=Wt>Math.PI?-2*Math.PI:Wt<-Math.PI?2*Math.PI:0,Math.abs(Wt)>wt){var Xt=null;break t}}var Yt=Bt/Ft,zt=x(It,Lt,Yt),Kt=x(Mt,At,Yt);gt==Vt?(Rt&&(mt[0]=zt,mt[1]=Kt,mt[2]=Gt/2),mt[4]=Nt):(Dt=Gt,mt=[zt,Kt,Gt/2,Vt,Nt=kt],Rt?Ct.unshift(mt):Ct.push(mt),gt=Vt),Tt+=Gt}Xt=Ct}if(Xt){var Ht;if(lt){var $t=0;for(Ht=Xt.length;$t<Ht;++$t){var Zt=Xt[$t],Jt=Zt[4],Qt=t.Y(Jt,ct,"",lt);p=Zt[2]+pt,u=it*Qt.height+2*(.5-it)*pt-ht,ua(t,e,Zt[0],Zt[1],Qt,p,u,g,Qt.height,1,0,0,Zt[3],ft,!1,Qt.width,rs,null,null)}}if(rt)for($t=0,Ht=Xt.length;$t<Ht;++$t)Jt=(Zt=Xt[$t])[4],Qt=t.Y(Jt,ct,rt,""),p=Zt[2],u=it*Qt.height-ht,ua(t,e,Zt[0],Zt[1],Qt,p,u,g,Qt.height,1,0,0,Zt[3],ft,!1,Qt.width,rs,null,null)}}ga(t,g,A),++_;break;case 7:if(void 0!==n){var te=n(A=L[1]);if(te)return te}++_;break;case 8:M?S++:t.Xa(e),++_;break;case 9:E=L[1],l=L[2];var ee=a[E],ie=a[E+1];for(y=ie+.5|0,(d=ee+.5|0)===c&&y===f||(e.moveTo(ee,ie),c=d,f=y),E+=2;E<l;E+=2)d=(ee=a[E])+.5|0,y=(ie=a[E+1])+.5|0,(E==l-2||d!==c||y!==f)&&(e.lineTo(ee,ie),c=d,f=y);++_;break;case 10:w=L,t.O=L[2],S&&(t.Xa(e),S=0,T&&(e.stroke(),T=0)),e.fillStyle=L[1],++_;break;case 11:C=L,T&&(e.stroke(),T=0),ya(e,L),++_;break;case 12:M?T++:e.stroke(),++_;break;default:++_}}S&&t.Xa(e),T&&e.stroke()}function ma(t,e,i,o,r,n,s){return t.$=o,va(t,e,i,r,t.b,n,s)}function _a(t){var e=t.b;e.reverse();var i,o=e.length,r=-1;for(i=0;i<o;++i){var n=e[i],s=n[0];if(7==s)r=i;else if(0==s){for(n[2]=i,n=t.b,s=i;r<s;){var a=n[r];n[r]=n[s],n[s]=a,++r,--s}r=-1}}}function ba(t,e,i,o){var r=e.fillStyle;"string"==typeof r&&e.Pk==r||(i.call(t,e,o),e.Pk=r)}function xa(t,e,i){var o=e.strokeStyle,r=e.lineCap,n=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,h=e.lineWidth,l=e.miterLimit;(e.Vk!=o||e.Qk!=r||n!=e.Fh&&!qt(e.Fh,n)||e.Rk!=s||e.Sk!=a||e.Tk!=h||e.Uk!=l)&&(i.call(t,e),e.Vk=o,e.Qk=r,e.Fh=n,e.Rk=s,e.Sk=a,e.Tk=h,e.Uk=l)}function Ea(t,e){t.qa[2]=t.a.length,t.qa=null,t.T[2]=t.b.length,t.T=null,e=[7,e],t.a.push(e),t.b.push(e)}function Sa(t){return t.i||(t.i=R(t.Ea),0<t.Wa&&C(t.i,t.resolution*(t.Wa+1)/2,t.i)),t.i}function Ta(t,e,i,o,r,n){la.call(this,t,e,i,o,r,n),this.M=this.V=this.B=null,this.N=this.o=this.v=this.s=this.l=this.C=this.D=this.j=this.f=this.c=this.g=void 0}function wa(t,e,i,o,r,n){la.call(this,t,e,i,o,r,n)}function Ca(t,e,i,o,r){var n=t.coordinates.length;return n=[9,n,e=ca(t,e,i,o,r,!1,!1)],t.a.push(n),t.b.push(n),o}function Ra(t,e,i,o,r,n){la.call(this,t,e,i,o,r,n)}function Pa(t,e,i,o,r){var n=t.state,s=void 0!==n.fillStyle;n=void 0!=n.strokeStyle;var a=o.length,h=[1];for(t.a.push(h),t.b.push(h),h=0;h<a;++h){var l=o[h];i=[9,t.coordinates.length,i=ca(t,e,i,l,r,!0,!n)],t.a.push(i),t.b.push(i),n&&(i=[3],t.a.push(i),t.b.push(i)),i=l}return e=[8],t.b.push(e),s&&t.a.push(e),n&&(s=[12],t.a.push(s),t.b.push(s)),i}function Ia(t,e){var i=t.state;void 0!==i.fillStyle&&ba(t,i,t.Ah,e),void 0!==i.strokeStyle&&xa(t,i,t.pd)}function Ma(t,e,i,o,r,n){for(la.call(this,t,e,i,o,r,n),this.ta="",this.l=this.D=0,this.C=void 0,this.B=0,this.c=null,this.o={},this.g=null,this.ab={},this.f={},this.s={},this.V=this.v=this.j="",this.ua={};ts(ns);)ns.pop()}function La(t,e,i,o){var r=t.g,n=t.f,s=t.c,a=t.V;r&&(a in t.ab||(t.ab[a]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var h=t.j;t.j in t.s||(t.s[t.j]={font:n.font,textAlign:n.textAlign||"center",scale:n.scale});var l=t.v;s&&(l in t.o||(t.o[l]={fillStyle:s.fillStyle}));var p=t.pixelRatio;s=ha[n.textBaseline];var u=t.l*p,c=t.ta,f=n.font,d=n.scale;r=r?r.lineWidth*d/2:0;var y=t.ua[f];y||(t.ua[f]=y={}),t.a.push([5,e,i,s,o,n.overflow,l,n.maxAngle,function(t){var e=y[t];return e||(e=y[t]=cs(f,t)),e*d*p},u,a,r*p,c,h,1]),t.b.push([5,e,i,s,o,n.overflow,l,n.maxAngle,function(t){var e=y[t];return e||(e=y[t]=cs(f,t)),e*d},u,a,r,c,h,1/p])}function Aa(t,e,i,o,r,n,s){this.a=n,this.g=null,this.o=t,this.c=e,this.l=r,this.s=o,this.v=i,this.i=s,this.b={},this.f=mr(1,1),this.j=[1,0,0,1,0,0]}s(la,Ss),(t=la.prototype).Hh=function(t,e,i){da(this,e);var o,r=t.S(),n=t.pa(),s=this.coordinates.length;if("MultiPolygon"==r){r=Qu(t);for(var a=[],h=t.td(),l=o=0,p=h.length;l<p;++l){var u=[];o=fa(this,r,o,h[l],n,u),a.push(u)}this.a.push([4,s,a,t,i,Vo])}else"Polygon"==r||"MultiLineString"==r?(a=[],fa(this,r="Polygon"==r?t.Xb():t.da(),0,t.pb(),n,a),this.a.push([4,s,a,t,i,Bo])):"LineString"==r||"MultiPoint"==r?(n=ca(this,r=t.da(),0,r.length,n,!1,!1),this.a.push([4,s,n,t,i,Uo])):"Point"==r&&(r=t.da(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.a.push([4,s,n,t,i]));Ea(this,e)},t.Xa=function(t){if(this.O){var e=_o(this.ca,this.O.slice());t.translate(e[0],e[1]),t.rotate(this.$)}t.fill(),this.O&&t.setTransform.apply(t,ds)},t.Na=function(t,e,i,o){this.$=i,va(this,t,e,o,this.a,void 0,void 0)},t.Oa=function(t,e){var i=this.state;t?(t=t.b,i.fillStyle=Es(t||es)):i.fillStyle=void 0,e?(t=e.a,i.strokeStyle=Es(t||os),t=e.f,i.lineCap=void 0!==t?t:"round",t=e.g,i.lineDash=t?t.slice():is,t=e.i,i.lineDashOffset=t||0,t=e.j,i.lineJoin=void 0!==t?t:"round",t=e.c,i.lineWidth=void 0!==t?t:1,e=e.l,i.miterLimit=void 0!==e?e:10,i.lineWidth>this.Wa&&(this.Wa=i.lineWidth,this.i=null)):(i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0)},t.Ah=function(t,e){var i=t.fillStyle;t=[10,i],"string"!=typeof i&&(e=e.G(),t.push([e[0],e[3]])),this.a.push(t)},t.pd=function(t){this.a.push([11,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,function(t,e){var i=t.pixelRatio;return 1==i?e:e.map(function(t){return t*i})}(this,t.lineDash),t.lineDashOffset*this.pixelRatio])},t.bf=a,s(Ta,la),Ta.prototype.yc=function(t,e){if(this.M){da(this,e);var i=t.da(),o=this.coordinates.length;t=ca(this,i,0,i.length,t.pa(),!1,!1),this.a.push([6,o,t,this.M,this.g,this.c,this.B,this.f,this.j,this.D,this.C,this.l,this.s,this.v*this.pixelRatio,this.o,this.N]),this.b.push([6,o,t,this.V,this.g,this.c,this.B,this.f,this.j,this.D,this.C,this.l,this.s,this.v,this.o,this.N]),Ea(this,e)}},Ta.prototype.wc=function(t,e){if(this.M){da(this,e);var i=t.da(),o=this.coordinates.length;t=ca(this,i,0,i.length,t.pa(),!1,!1),this.a.push([6,o,t,this.M,this.g,this.c,this.B,this.f,this.j,this.D,this.C,this.l,this.s,this.v*this.pixelRatio,this.o,this.N]),this.b.push([6,o,t,this.V,this.g,this.c,this.B,this.f,this.j,this.D,this.C,this.l,this.s,this.v,this.o,this.N]),Ea(this,e)}},Ta.prototype.bf=function(){_a(this),this.c=this.g=void 0,this.M=this.V=null,this.N=this.o=this.s=this.l=this.C=this.D=this.j=this.v=this.f=void 0},Ta.prototype.Zb=function(t,e){var i=t.Vc(),o=t.oc(),r=t.Eg(),n=t.Y(1),s=t.bd();this.g=i[0],this.c=i[1],this.B=e,this.V=r,this.M=n,this.f=o[1],this.j=t.i,this.D=s[0],this.C=s[1],this.l=t.s,this.s=t.f,this.v=t.a,this.o=t.v,this.N=o[0]},s(wa,la),wa.prototype.uc=function(t,e){var i=this.state,o=i.lineWidth;void 0!==i.strokeStyle&&void 0!==o&&(xa(this,i,this.pd),da(this,e),this.b.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[1]),Ca(this,i=t.da(),0,i.length,t.pa()),this.b.push([12]),Ea(this,e))},wa.prototype.vc=function(t,e){var i=this.state,o=i.lineWidth;if(void 0!==i.strokeStyle&&void 0!==o){xa(this,i,this.pd),da(this,e),this.b.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],[1]),i=t.pb(),o=t.da(),t=t.pa();var r,n=0,s=0;for(r=i.length;s<r;++s)n=Ca(this,o,n,i[s],t);this.b.push([12]),Ea(this,e)}},wa.prototype.bf=function(){var t=this.state;void 0!=t.$d&&t.$d!=this.coordinates.length&&this.a.push([12]),_a(this),this.state=null},wa.prototype.pd=function(t){void 0!=t.$d&&t.$d!=this.coordinates.length&&(this.a.push([12]),t.$d=this.coordinates.length),t.$d=0,la.prototype.pd.call(this,t),this.a.push([1])},s(Ra,la),Ra.prototype.cc=function(t,e){var i=this.state,o=i.strokeStyle;if(void 0!==i.fillStyle||void 0!==o){Ia(this,t),da(this,e),this.b.push([10,_s(es)]),void 0!==i.strokeStyle&&this.b.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var r=t.da();o=this.coordinates.length,ca(this,r,0,r.length,t.pa(),!1,!1),t=[1],o=[2,o],this.a.push(t,o),this.b.push(t,o),t=[8],this.b.push(t),void 0!==i.fillStyle&&this.a.push(t),void 0!==i.strokeStyle&&(i=[12],this.a.push(i),this.b.push(i)),Ea(this,e)}},Ra.prototype.zc=function(t,e){var i=this.state;Ia(this,t),da(this,e),this.b.push([10,_s(es)]),void 0!==i.strokeStyle&&this.b.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]),i=t.pb(),Pa(this,t.Xb(),0,i,t.pa()),Ea(this,e)},Ra.prototype.xc=function(t,e){var i=this.state,o=i.strokeStyle;if(void 0!==i.fillStyle||void 0!==o){Ia(this,t),da(this,e),this.b.push([10,_s(es)]),void 0!==i.strokeStyle&&this.b.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]),i=t.td(),o=Qu(t),t=t.pa();var r,n=0,s=0;for(r=i.length;s<r;++s)n=Pa(this,o,n,i[s],t);Ea(this,e)}},Ra.prototype.bf=function(){_a(this),this.state=null;var t=this.ob;if(0!==t){var e,i=this.coordinates,o=0;for(e=i.length;o<e;++o)i[o]=t*Math.round(i[o]/t)}},s(Ma,la),Ma.prototype.Wb=function(t,e){var i=this.c,o=this.g,r=this.f;if(""!==this.ta&&r&&(i||o)){i=this.coordinates.length;var n=t.S();o=null;var s=2,a=2;if("line"===r.placement){if(!Q(Sa(this),t.G()))return;if(o=t.da(),a=t.pa(),"LineString"==n)var h=[o.length];else if("MultiLineString"==n)h=t.pb();else if("Polygon"==n)h=t.pb().slice(0,1);else if("MultiPolygon"==n)for(h=[],s=0,n=(t=t.td()).length;s<n;++s)h.push(t[s][0]);da(this,e),t=r.textAlign;var l,p=0;n=0;for(var u=h.length;n<u;++n){if(void 0==t){for(var c,f,d=void 0,y=void 0,g=s=f=c=void 0,v=l=p,m=0,_=0,b=p;p<h[n];p+=a){var x=o[p],E=o[p+1];void 0!==f&&(f=x-f,c=E-c,s=Math.sqrt(f*f+c*c),void 0!==y&&(_+=g,(d=Math.acos((y*f+d*c)/(g*s)))>r.maxAngle&&(_>m&&(m=_,l=b,v=p),_=0,b=p-a)),g=s,y=f,d=c),f=x,c=E}p=(s=_+s>m?[b,p]:[l,v])[0],l=s[1]}else l=h[n];for(s=p;s<l;s+=a)this.coordinates.push(o[s],o[s+1]);s=this.coordinates.length,p=h[n],La(this,i,s,this.N),i=s}}else{switch(u=(h=this.Y(this.ta,this.j,this.v,this.V)).width/this.pixelRatio,n){case"Point":case"MultiPoint":s=(o=t.da()).length;break;case"LineString":o=t.Fe();break;case"Circle":o=t.xa();break;case"MultiLineString":s=(o=t.Ge()).length;break;case"Polygon":if(o=t.Td(),!r.overflow&&o[2]/this.resolution<u)return;a=3;break;case"MultiPolygon":for(o=[],s=0,n=(l=Ju(t)).length;s<n;s+=3)(r.overflow||l[s+2]/this.resolution>=u)&&o.push(l[s],l[s+1]);if(0==(s=o.length))return}s=ca(this,o,0,s,a,!1,!1),da(this,e),(r.backgroundFill||r.backgroundStroke)&&(this.Oa(r.backgroundFill,r.backgroundStroke),ba(this,this.state,this.Ah,t),xa(this,this.state,this.pd)),function(t,e,i,o){var r=t.f,n=t.g,s=t.pixelRatio,a=ha[r.textAlign||"center"],h=ha[r.textBaseline];n=n&&n.lineWidth?n.lineWidth:0,a=a*e.width/s+2*(.5-a)*n,h=h*e.height/s+2*(.5-h)*n,t.a.push([6,i,o,e,(a-t.D)*s,(h-t.l)*s,t.N,e.height,1,0,0,t.C,t.B,1,!0,e.width,r.padding==rs?rs:r.padding.map(function(t){return t*s}),!!r.backgroundFill,!!r.backgroundStroke]),t.b.push([6,i,o,e,(a-t.D)*s,(h-t.l)*s,t.N,e.height,1,0,0,t.C,t.B,1/s,!0,e.width,r.padding,!!r.backgroundFill,!!r.backgroundStroke])}(this,h,i,s)}Ea(this,e)}},Ma.prototype.Y=function(t,e,i,o){var r=o+e+t+i+this.pixelRatio;if(!ns.a.hasOwnProperty(r)){var n=o?this.ab[o]||this.g:null,s=i?this.o[i]||this.c:null,a=this.s[e]||this.f,h=a.scale*this.pixelRatio,l=ha[a.textAlign||"center"];e=o&&n.lineWidth?n.lineWidth:0;var p,u=(t=t.split("\n")).length,c=[],f=a.font,d=t.length,y=0;for(p=0;p<d;++p){var g=cs(f,t[p]);y=Math.max(y,g),c.push(g)}if(d=y,f=us(a.font),y=(d=mr(Math.ceil((d+e)*h),Math.ceil((f*u+e)*h))).canvas,ns.set(r,y),1!=h&&d.scale(h,h),d.font=a.font,o&&(d.strokeStyle=n.strokeStyle,d.lineWidth=e*(Ke?h:1),d.lineCap=n.lineCap,d.lineJoin=n.lineJoin,d.miterLimit=n.miterLimit,Ze&&n.lineDash.length&&(d.setLineDash(n.lineDash),d.lineDashOffset=n.lineDashOffset)),i&&(d.fillStyle=s.fillStyle),d.textBaseline="middle",d.textAlign="center",n=.5-l,s=l*y.width/h+n*e,o)for(o=0;o<u;++o)d.strokeText(t[o],s+n*c[o],.5*(e+f)+o*f);if(i)for(o=0;o<u;++o)d.fillText(t[o],s+n*c[o],.5*(e+f)+o*f)}return ns.get(r)},Ma.prototype.nb=function(t,e){var i,o;if(t){if(this.N=e,(o=t.Fa())?((e=this.c)||(e=this.c={}),e.fillStyle=Es(o.b||es)):e=this.c=null,i=t.Ga()){(o=this.g)||(o=this.g={});var r=i.g,n=i.i,s=i.c,a=i.l;o.lineCap=i.f||"round",o.lineDash=r?r.slice():is,o.lineDashOffset=void 0===n?0:n,o.lineJoin=i.j||"round",o.lineWidth=void 0===s?1:s,o.miterLimit=void 0===a?10:a,o.strokeStyle=Es(i.a||os)}else o=this.g=null;i=this.f,r=t.a||"10px sans-serif",ls(r),n=t.b,i.overflow=t.v,i.font=r,i.maxAngle=t.s,i.placement=t.o,i.textAlign=t.f,i.textBaseline=t.j||"middle",i.backgroundFill=t.N,i.backgroundStroke=t.D,i.padding=t.C||rs,i.scale=void 0===n?1:n,r=t.g,n=t.c,s=t.l,a=t.i,this.ta=t.Ka()||"",this.D=void 0===r?0:r,this.l=void 0===n?0:n,this.C=void 0!==s&&s,this.B=void 0===a?0:a,this.V=o?("string"==typeof o.strokeStyle?o.strokeStyle:h(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.j=i.font+i.scale+(i.textAlign||"?"),this.v=e?"string"==typeof e.fillStyle?e.fillStyle:"|"+h(e.fillStyle):""}else this.ta=""},s(Aa,na);var Oa={0:[[!0]]};function Fa(t,e,i){var o,r=Math.floor(t.length/2);if(e>=r)for(o=r;o<e;o++)t[o][i]=!0;else if(e<r)for(o=e+1;o<r;o++)t[o][i]=!0}function Na(t){for(var e in t.b){var i,o=t.b[e];for(i in o)o[i].bf()}}function Da(t,e){var i=t.c;t=i[0];var o=i[1],r=i[2];return uo(t=[t,o,t,i=i[3],r,i,r,o],0,8,2,e,t),t}(t=Aa.prototype).Vb=function(t){var e=null;return this.a&&(t?(e=this.g)[4]++:(e=this.g=[1/0,1/0,-1/0,-1/0]).push(1)),e},t.wa=function(t,e,i,o,r,n,s){function a(t){for(var e=p.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var o=0;o<h;o++)if(f[i][o]&&0<e[4*(o*h+i)+3]){if(!c||"Image"!=g&&"Text"!=g||-1!==c.indexOf(t))var r=n(t);return r||void p.clearRect(0,0,h,h)}}var h=2*(o=Math.round(o))+1,l=So(this.j,o+.5,o+.5,1/e,-1/e,-i,-t[0],-t[1]),p=this.f;if(p.canvas.width!==h||p.canvas.height!==h?(p.canvas.width=h,p.canvas.height=h):p.clearRect(0,0,h,h),void 0!==this.i){var u=[1/0,1/0,-1/0,-1/0];U(u,t),C(u,e*(this.i+o),u)}var c,f=function(t){if(void 0!==Oa[t])return Oa[t];for(var e=2*t+1,i=Array(e),o=0;o<e;o++)i[o]=Array(e);e=t;for(var r=o=0;e>=o;)Fa(i,t+e,t+o),Fa(i,t+o,t+e),Fa(i,t-o,t+e),Fa(i,t-e,t+o),Fa(i,t-e,t-o),Fa(i,t-o,t-e),Fa(i,t+o,t-e),Fa(i,t+e,t-o),0<2*((r+=1+2*++o)-e)+1&&(r+=1-2*--e);return Oa[t]=i}(o);for(this.a&&(c=this.a.all().map(function(t){return t.value})),(t=Object.keys(this.b).map(Number)).sort(Yt),e=t.length-1;0<=e;--e){var d=t[e].toString(),y=this.b[d];for(o=aa.length-1;0<=o;--o){var g=aa[o],v=y[g];if(void 0!==v)if(!s||"Image"!=g&&"Text"!=g){if(v=ma(v,p,l,i,r,a,u))return v}else{var m=s[d];m?m.push(v,l.slice(0)):s[d]=[v,l.slice(0)]}}}},t.Ja=function(t,e){var i=void 0!==t?t.toString():"0";return void 0===(t=this.b[i])&&(t={},this.b[i]=t),void 0===(i=t[e])&&(i=new ja[e](this.o,this.c,this.v,this.s,this.l,this.a),t[e]=i),i},t.yg=function(){return st(this.b)},t.Na=function(t,e,i,o,r,n){var s=Object.keys(this.b).map(Number);s.sort(Yt),t.save();var a,h,l=Da(this,e);for(t.beginPath(),t.moveTo(l[0],l[1]),t.lineTo(l[2],l[3]),t.lineTo(l[4],l[5]),t.lineTo(l[6],l[7]),t.clip(),r=r||aa,l=0,a=s.length;l<a;++l){var p=s[l].toString(),u=this.b[p],c=0;for(h=r.length;c<h;++c){var f=r[c],d=u[f];void 0!==d&&(!n||"Image"!=f&&"Text"!=f?d.Na(t,e,i,o):(f=n[p])?f.push(d,e.slice(0)):n[p]=[d,e.slice(0)])}}t.restore()};var ja={Circle:Ra,Default:la,Image:Ta,LineString:wa,Polygon:Ra,Text:Ma};function ka(t,e){return h(t)-h(e)}function Ga(t,e){return(t=.5*t/e)*t}function Ua(t,e,i,o,r,n){var s,a=!1;if(s=i.Y()){var h=s.gf();2==h||3==h?s.Yj(r,n):(0==h&&s.load(),s.gi(r,n),a=!0)}return(r=(0,i.cb)(e))&&(o=r.Wd(o),i.Ie()?function t(e,i,o,r){if("GeometryCollection"==i.S())for(var n=0,s=(i=i.vd()).length;n<s;++n)t(e,i[n],o,r);else e.Ja(o.Ba(),"Default").Hh(i,r,o.Ie())}(t,o,i,e):(0,Ba[o.S()])(t,o,i,e)),a}var Ba={Point:function(t,e,i,o){var r=i.Y();if(r){if(2!=r.gf())return;var n=t.Ja(i.Ba(),"Image");n.Zb(r,t.Vb(!1)),n.yc(e,o)}(n=i.Ka())&&((i=t.Ja(i.Ba(),"Text")).nb(n,t.Vb(!!r)),i.Wb(e,o))},LineString:function(t,e,i,o){var r=i.Ga();if(r){var n=t.Ja(i.Ba(),"LineString");n.Oa(null,r),n.uc(e,o)}(r=i.Ka())&&((i=t.Ja(i.Ba(),"Text")).nb(r,t.Vb(!1)),i.Wb(e,o))},Polygon:function(t,e,i,o){var r=i.Fa(),n=i.Ga();if(r||n){var s=t.Ja(i.Ba(),"Polygon");s.Oa(r,n),s.zc(e,o)}(r=i.Ka())&&((i=t.Ja(i.Ba(),"Text")).nb(r,t.Vb(!1)),i.Wb(e,o))},MultiPoint:function(t,e,i,o){var r=i.Y();if(r){if(2!=r.gf())return;var n=t.Ja(i.Ba(),"Image");n.Zb(r,t.Vb(!1)),n.wc(e,o)}(n=i.Ka())&&((i=t.Ja(i.Ba(),"Text")).nb(n,t.Vb(!!r)),i.Wb(e,o))},MultiLineString:function(t,e,i,o){var r=i.Ga();if(r){var n=t.Ja(i.Ba(),"LineString");n.Oa(null,r),n.vc(e,o)}(r=i.Ka())&&((i=t.Ja(i.Ba(),"Text")).nb(r,t.Vb(!1)),i.Wb(e,o))},MultiPolygon:function(t,e,i,o){var r=i.Fa(),n=i.Ga();if(n||r){var s=t.Ja(i.Ba(),"Polygon");s.Oa(r,n),s.xc(e,o)}(r=i.Ka())&&((i=t.Ja(i.Ba(),"Text")).nb(r,t.Vb(!1)),i.Wb(e,o))},GeometryCollection:function(t,e,i,o){var r,n=0;for(r=(e=e.a).length;n<r;++n)(0,Ba[e[n].S()])(t,e[n],i,o)},Circle:function(t,e,i,o){var r=i.Fa(),n=i.Ga();if(r||n){var s=t.Ja(i.Ba(),"Circle");s.Oa(r,n),s.cc(e,o)}(r=i.Ka())&&((i=t.Ja(i.Ba(),"Text")).nb(r,t.Vb(!1)),i.Wb(e,o))}};function Va(t){ks.call(this,t),this.f=t.D?ra.Jc(9):null,this.i=!1,this.N=-1,this.o=NaN,this.l=[1/0,1/0,-1/0,-1/0],this.c=this.v=null,this.j=!0,this.context=mr(),ve(ns,"clear",this.Vi,this)}function Wa(t){this.context=null,ia.call(this,t),this.N=t.D?ra.Jc(9):null,this.D=!1,this.ca=[1,0,0,1,0,0],this.O="vector"==t.l?1:0,ve(ns,"clear",this.Xi,this)}s(Va,ks),Va.handles=function(t,e){return"canvas"===t&&"VECTOR"===e.S()},Va.create=function(t,e){return new Va(e)},(t=Va.prototype).ia=function(){_e(ns,"clear",this.Vi,this),ks.prototype.ia.call(this)},t.df=function(t,e,i){var o=t.extent,r=t.pixelRatio,n=e.Te?t.skippedFeatureUids:{},s=t.viewState,a=s.projection,h=s.rotation,l=a.G(),p=this.a.ha(),u=Bs(this,t,0);Us(this,"precompose",i,t,u);var c=e.extent;(s=void 0!==c)&&Gs(i,t,c);var f=this.c;if(f&&!f.yg()){this.f&&this.f.clear();var d=c=0,y=1!==e.opacity,g=Re(this.a,"render");if(y||g){var v=i.canvas.width,m=i.canvas.height;if(h){var _=Math.round(Math.sqrt(v*v+m*m));c=(_-v)/2,d=(_-m)/2,v=m=_}this.context.canvas.width=v,this.context.canvas.height=m,v=this.context}else v=i;if(m=v.globalAlpha,y||(v.globalAlpha=e.opacity),v!=i&&v.translate(c,d),fs(v,-h,(_=t.size[0]*r)/2,(r*=t.size[1])/2),f.Na(v,u,h,n),p.D&&a.g&&!M(l,o)){a=o[0],p=J(l);for(var b=0;a<l[0];)u=Bs(this,t,u=p*--b),f.Na(v,u,h,n),a+=p;for(b=0,a=o[2];a>l[2];)u=Bs(this,t,u=p*++b),f.Na(v,u,h,n),a-=p;u=Bs(this,t,0)}fs(v,h,_/2,r/2),v!=i&&(g&&Us(this,"render",v,t,u),y?(o=i.globalAlpha,i.globalAlpha=e.opacity,i.drawImage(v.canvas,-c,-d),i.globalAlpha=o):i.drawImage(v.canvas,-c,-d),v.translate(-c,-d)),y||(v.globalAlpha=m)}s&&i.restore(),this.pf(i,t,e,u)},t.wa=function(t,e,i,o,r){if(this.c){var n=this.a,s={};return this.c.wa(t,e.viewState.resolution,e.viewState.rotation,i,{},function(t){var e=h(t).toString();if(!(e in s))return s[e]=!0,o.call(r,t,n)},null)}},t.Vi=function(){var t=this.a;t.Jb()&&this.c&&t.u()},t.Wi=function(){Os(this)},t.$c=function(t){var e=this.a,i=e.ha();Ns(t,i);var o=t.viewHints[0],r=t.viewHints[1],n=e.ca,s=e.ra;if(!this.i&&!n&&o||!s&&r)return!0;n=t.extent;var a=t.viewState;s=a.projection;var h=a.resolution,l=t.pixelRatio;o=e.g;var p=e.f;if(void 0===(r=e.get(Bm))&&(r=ka),n=C(n,p*h),p=a.projection.G(),i.D&&a.projection.g&&!M(p,t.extent)&&(t=Math.max(J(n)/2,J(p)),n[0]=p[0]-t,n[2]=p[2]+t),!this.i&&this.o==h&&this.N==o&&this.v==r&&M(this.l,n))return this.j=!1,!0;this.c=null,this.i=!1;var u=new Aa(.5*h/l,n,h,l,i.$,this.f,e.f);if(i.ae(n,h,s),t=function(t){var i=t.ib();if(i)var o=i.call(t,h);else(i=e.ib())&&(o=i(t,h));if(o){if(o){if(i=!1,Array.isArray(o))for(var r=0,n=o.length;r<n;++r)i=Ua(u,t,o[r],Ga(h,l),this.Wi,this)||i;else i=Ua(u,t,o,Ga(h,l),this.Wi,this);t=i}else t=!1;this.i=this.i||t}}.bind(this),r){var c=[];for(i.ec(n,function(t){c.push(t)},this),c.sort(r),i=0,s=c.length;i<s;++i)t(c[i])}else i.ec(n,t,this);return Na(u),this.o=h,this.N=o,this.v=r,this.l=n,this.c=u,this.j=!0},s(Wa,ia),Wa.handles=function(t,e){return"canvas"===t&&"VECTOR_TILE"===e.S()},Wa.create=function(t,e){return new Wa(e)};var Xa={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"]},Ya={image:["Default"],hybrid:["Image","Text","Default"],vector:aa};function za(t){delete(t=ot({},t)).renderer,t.controls||(t.controls=Wr()),t.interactions||(t.interactions=$n()),Ir.call(this,t)}function Ka(t){Ie.call(this),t=t||{},this.a=null,ve(this,Le(Ja),this.$m,this),this.rg(void 0!==t.tracking&&t.tracking)}(t=Wa.prototype).ia=function(){_e(ns,"clear",this.Xi,this),ia.prototype.ia.call(this)},t.$c=function(t,e){var i=this.a,o=i.g;return this.B!=o&&(this.f.length=0,i=i.l,this.context||"vector"==i||(this.context=mr()),this.context&&"vector"==i&&(this.context=null)),this.B=o,ia.prototype.$c.apply(this,arguments)},t.Sf=function(t,e,i,o,r,n,s,a,l){var p=t,u=this.a,c=e.pixelRatio,f=e.viewState.projection,d=u.g,y=u.get(Bm)||null,g=Cx(p,u);if(g.Be||g.wf!=d||g.eh!=y){var v=u.ha(),m=v.tileGrid,_=v.eb(f),b=_.Ta(p.ya[0]);_=_.Ma(p.l);for(var x=0,E=p.a.length;x<E;++x){var S=p.c[p.a[x]];if(3!=S.getState()){var T=m.Ma(S.ya),w=$(_,T),R=k(T,w)?null:C(w,u.f*b),P=S.o,I=!1;jt(f,P)||(I=!0,S.vg(f)),g.Be=!1,w=new Aa(0,w,b,c,v.s,this.N,u.f);var M=Ga(b,c),L=S.a;y&&y!==g.eh&&L.sort(y);for(var A,O=0,F=L.length;O<F;++O)if(A=L[O],I&&("tile-pixels"==P.a&&(P.Sj(T),P.Si(S.G())),A.U().mb(P,f)),!R||Q(R,A.U().G())){var N=void 0,D=A.ib();if(D?N=D.call(A,b):(D=u.ib())&&(N=D(A,b)),N){D=M;var j=w;if(N){var G=!1;if(Array.isArray(N))for(var U=0,B=N.length;U<B;++U)G=Ua(j,A,N[U],D,this.Yi,this)||G;else G=Ua(j,A,N,D,this.Yi,this);A=G}else A=!1;this.D=this.D||A,g.Be=g.Be||A}}for(var V in Na(w),w.b);T=p.ya.toString(),R=w,S.f[h(u)+","+T]=R}}g.wf=d,g.eh=y}if(this.context){if(g=e,f=Cx(p,u=this.a),d=u.g,(c=Xa[u.l])&&f.fh!==d)for(f.fh=d,b=(v=p.l)[0],f=g.pixelRatio,d=(m=(V=u.ha()).eb(g.viewState.projection)).Ta(b),y=wx(p,u),g=V.Zd(b,f,g.viewState.projection),y.canvas.width=g[0],y.canvas.height=g[1],g=m.Ma(v),v=0,m=p.a.length;v<m;++v)3!=(b=p.c[p.a[v]]).getState()&&(V=f/d,xo(_=yo(this.ca),V,-V),Eo(_,-g[0],-g[3]),Yp(b,u,p.ya.toString()).Na(y,_,0,{},c));ia.prototype.Sf.apply(this,arguments)}},t.wa=function(t,e,i,o,r){var n=e.viewState.resolution,s=e.viewState.rotation;i=void 0==i?0:i;var a,l=this.a,p={},u=this.f;e=l.ha().eb(e.viewState.projection);var c=0;for(a=u.length;c<a;++c){var f=u[c],d=f.l,y=C(d=e.Ma(d,this.T),i*n,y);if(I(y,t)){d=0;for(var g=f.a.length;d<g;++d){var v=f.c[f.a[d]];if(3!=v.getState()){v=Yp(v,l,f.ya.toString());var m=m||v.wa(t,n,s,i,{},function(t){var e=h(t).toString();if(!(e in p))return p[e]=!0,o.call(r,t,l)},null)}}}}return m},t.Xi=function(){var t=this.a;t.Jb()&&void 0!==this.B&&t.u()},t.Yi=function(){Os(this)},t.pf=function(t,e,i){var o=this.a,r=o.D?{}:null,n=o.ha(),s=o.l,a=Ya[s],h=e.pixelRatio,l=e.viewState.rotation,p=e.size;if(l){var u=Math.round(h*p[0]/2),c=Math.round(h*p[1]/2);fs(t,-l,u,c)}r&&this.N.clear(),h=this.f,n=n.eb(e.viewState.projection),p=[];for(var f=[],d=h.length-1;0<=d;--d){var y=h[d];if(5!=y.getState())for(var g=y.ya,v=n.Ma(g)[0]-n.Ma(y.l)[0],m=void 0,_=0,b=y.a.length;_<b;++_){var x=y.c[y.a[_]];if(3!=x.getState()){var E,S=Yp(x,o,g.toString());if(!(E="vector"==s))t:{for(E in E=void 0,S.b)for(var T=S.b[E],w=0,C=a.length;w<C;++w)if(a[w]in T){E=!0;break t}E=!1}if(E){for(m||(m=Bs(this,e,v)),x=x.ya[0],E=Da(S,m),t.save(),t.globalAlpha=i.opacity,T=0,w=p.length;T<w;++T)C=p[T],x<f[T]&&(t.beginPath(),t.moveTo(E[0],E[1]),t.lineTo(E[2],E[3]),t.lineTo(E[4],E[5]),t.lineTo(E[6],E[7]),t.moveTo(C[6],C[7]),t.lineTo(C[4],C[5]),t.lineTo(C[2],C[3]),t.lineTo(C[0],C[1]),t.clip());S.Na(t,m,l,{},a,r),t.restore(),p.push(E),f.push(x)}}}}if(r)for(o=t,a={},h=0,n=(s=Object.keys(r).map(Number).sort(Yt)).length;h<n;++h)for(f=0,d=(p=r[s[h].toString()]).length;f<d;)y=p[f++],g=p[f++],y.Na(o,g,l,a);l&&fs(t,l,u,c),ia.prototype.pf.apply(this,arguments)},Rr("MAP_RENDERER",ta),Pr([Ws,ia,Va,Wa]),s(za,Ir),s(Ka,Ie),(t=Ka.prototype).ia=function(){this.rg(!1),Ie.prototype.ia.call(this)},t.Dp=function(t){if(null!==t.alpha){var e=_(t.alpha);this.set(Ha,e),"boolean"==typeof t.absolute&&t.absolute?this.set(Za,e):"number"==typeof t.webkitCompassHeading&&-1!=t.webkitCompassAccuracy&&this.set(Za,_(t.webkitCompassHeading))}null!==t.beta&&this.set($a,_(t.beta)),null!==t.gamma&&this.set(qa,_(t.gamma)),this.u()},t.Ym=function(){return this.get(Ha)},t.ll=function(){return this.get($a)},t.ql=function(){return this.get(qa)},t.Zm=function(){return this.get(Za)},t.li=function(){return this.get(Ja)},t.$m=function(){if(Qe){var t=this.li();t&&!this.a?this.a=ve(window,"deviceorientation",this.Dp,this):t||null===this.a||(be(this.a),this.a=null)}},t.rg=function(t){this.set(Ja,t)};var Ha="alpha",$a="beta",qa="gamma",Za="heading",Ja="tracking";function Qa(t){this.i=t.opacity,this.s=t.rotateWithView,this.f=t.rotation,this.a=t.scale,this.v=t.snapToPixel}function th(t){this.D=this.o=this.c=null,this.Xa=void 0!==t.fill?t.fill:null,this.oa=[0,0],this.l=t.points,this.b=void 0!==t.radius?t.radius:t.radius1,this.g=t.radius2,this.j=void 0!==t.angle?t.angle:0,this.Ya=void 0!==t.stroke?t.stroke:null,this.B=this.qa=this.C=null,this.N=t.atlasManager,eh(this,this.N),Qa.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel})}function eh(t,e){var i="",o="",r=0,n=null,s=0,a=0;if(t.Ya){var l=t.Ya.a;null===l&&(l=os),l=Es(l),void 0===(a=t.Ya.c)&&(a=1),n=t.Ya.g,s=t.Ya.i,Ze||(n=null,s=0),void 0===(o=t.Ya.j)&&(o="round"),void 0===(i=t.Ya.f)&&(i="round"),void 0===(r=t.Ya.l)&&(r=10)}var p=2*(t.b+a)+1;if(i={strokeStyle:l,Wj:a,size:p,lineCap:i,lineDash:n,lineDashOffset:s,lineJoin:o,miterLimit:r},void 0===e){var u=mr(p,p);t.o=u.canvas,e=p=t.o.width,t.Jh(i,u,0,0),t.Xa?t.D=t.o:(u=mr(i.size,i.size),t.D=u.canvas,t.Ih(i,u,0,0))}else p=Math.round(p),(o=!t.Xa)&&(u=t.Ih.bind(t,i)),t.Ya?(void 0===(r=t.Ya).b&&(r.b="s",r.b=r.a?"string"==typeof r.a?r.b+r.a:r.b+h(r.a).toString():r.b+"-",r.b+=","+(void 0!==r.f?r.f.toString():"-")+","+(r.g?r.g.toString():"-")+","+(void 0!==r.i?r.i:"-")+","+(void 0!==r.j?r.j:"-")+","+(void 0!==r.l?r.l.toString():"-")+","+(void 0!==r.c?r.c.toString():"-")),r=r.b):r="-",t.Xa?(void 0===(n=t.Xa).a&&(n.a=n.b instanceof CanvasPattern||n.b instanceof CanvasGradient?h(n.b).toString():"f"+(n.b?_s(n.b):"-")),n=n.a):n="-",t.c&&r==t.c[1]&&n==t.c[2]&&t.b==t.c[3]&&t.g==t.c[4]&&t.j==t.c[5]&&t.l==t.c[6]||(t.c=["r"+r+n+(void 0!==t.b?t.b.toString():"-")+(void 0!==t.g?t.g.toString():"-")+(void 0!==t.j?t.j.toString():"-")+(void 0!==t.l?t.l.toString():"-"),r,n,t.b,t.g,t.j,t.l]),u=e.add(t.c[0],p,p,t.Jh.bind(t,i),u),t.o=u.image,t.oa=[u.offsetX,u.offsetY],e=u.image.width,t.D=o?u.Bm:t.o;t.C=[p/2,p/2],t.qa=[p,p],t.B=[e,e]}function ih(t){t=t||{},th.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})}function oh(t){t=t||{},this.b=void 0!==t.color?t.color:null,this.a=void 0}function rh(t){t=t||{},this.a=void 0!==t.color?t.color:null,this.f=t.lineCap,this.g=void 0!==t.lineDash?t.lineDash:null,this.i=t.lineDashOffset,this.j=t.lineJoin,this.l=t.miterLimit,this.c=t.width,this.b=void 0}function nh(t){t=t||{},this.Uc=null,this.cb=ph,void 0!==t.geometry&&this.Va(t.geometry),this.Xa=void 0!==t.fill?t.fill:null,this.M=void 0!==t.image?t.image:null,this.pc=void 0!==t.renderer?t.renderer:null,this.Ya=void 0!==t.stroke?t.stroke:null,this.ta=void 0!==t.text?t.text:null,this.bk=t.zIndex}function sh(t){if("function"!=typeof t){if(Array.isArray(t))var e=t;else d(t instanceof nh,41),e=[t];t=function(){return e}}return t}(t=Qa.prototype).hf=function(){return this.i},t.jf=function(){return this.s},t.kf=function(){return this.f},t.lf=function(){return this.a},t.Ke=function(){return this.v},t.Ed=function(t){this.i=t},t.mf=function(t){this.f=t},t.Fd=function(t){this.a=t},s(th,Qa),(t=th.prototype).clone=function(){var t=new th({fill:this.Fa()?this.Fa().clone():void 0,points:this.l,radius:this.b,radius2:this.g,angle:this.j,snapToPixel:this.v,stroke:this.Ga()?this.Ga().clone():void 0,rotation:this.f,rotateWithView:this.s,atlasManager:this.N});return t.Ed(this.i),t.Fd(this.a),t},t.Vc=function(){return this.C},t.ij=function(){return this.j},t.Fa=function(){return this.Xa},t.Eg=function(){return this.D},t.Y=function(){return this.o},t.He=function(){return this.B},t.gf=function(){return 2},t.bd=function(){return this.oa},t.jj=function(){return this.l},t.kj=function(){return this.b},t.Zh=function(){return this.g},t.oc=function(){return this.qa},t.Ga=function(){return this.Ya},t.gi=function(){},t.load=function(){},t.Yj=function(){},t.Jh=function(t,e,i,o){e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath();var r=this.l;if(1/0===r)e.arc(t.size/2,t.size/2,this.b,0,2*Math.PI,!0);else{var n=void 0!==this.g?this.g:this.b;for(n!==this.b&&(r*=2),i=0;i<=r;i++){o=2*i*Math.PI/r-Math.PI/2+this.j;var s=0==i%2?this.b:n;e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}}this.Xa&&(null===(i=this.Xa.b)&&(i=es),e.fillStyle=Es(i),e.fill()),this.Ya&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.Wj,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},t.Ih=function(t,e,i,o){var r;if(e.setTransform(1,0,0,1,0,0),e.translate(i,o),e.beginPath(),1/0===(i=this.l))e.arc(t.size/2,t.size/2,this.b,0,2*Math.PI,!0);else for((o=void 0!==this.g?this.g:this.b)!==this.b&&(i*=2),r=0;r<=i;r++){var n=2*r*Math.PI/i-Math.PI/2+this.j,s=0==r%2?this.b:o;e.lineTo(t.size/2+s*Math.cos(n),t.size/2+s*Math.sin(n))}e.fillStyle=es,e.fill(),this.Ya&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.Wj,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},s(ih,th),ih.prototype.clone=function(){var t=new ih({fill:this.Fa()?this.Fa().clone():void 0,stroke:this.Ga()?this.Ga().clone():void 0,radius:this.b,snapToPixel:this.v,atlasManager:this.N});return t.Ed(this.i),t.Fd(this.a),t},ih.prototype.fd=function(t){this.b=t,eh(this,this.N)},oh.prototype.clone=function(){var t=this.b;return new oh({color:t&&t.slice?t.slice():t||void 0})},oh.prototype.g=function(){return this.b},oh.prototype.c=function(t){this.b=t,this.a=void 0},(t=rh.prototype).clone=function(){var t=this.a;return new rh({color:t&&t.slice?t.slice():t||void 0,lineCap:this.f,lineDash:this.g?this.g.slice():void 0,lineDashOffset:this.i,lineJoin:this.j,miterLimit:this.l,width:this.c})},t.pp=function(){return this.a},t.vl=function(){return this.f},t.qp=function(){return this.g},t.wl=function(){return this.i},t.xl=function(){return this.j},t.Dl=function(){return this.l},t.rp=function(){return this.c},t.sp=function(t){this.a=t,this.b=void 0},t.yq=function(t){this.f=t,this.b=void 0},t.setLineDash=function(t){this.g=t,this.b=void 0},t.zq=function(t){this.i=t,this.b=void 0},t.Aq=function(t){this.j=t,this.b=void 0},t.Eq=function(t){this.l=t,this.b=void 0},t.Kq=function(t){this.c=t,this.b=void 0},(t=nh.prototype).clone=function(){var t=this.U();return t&&t.clone&&(t=t.clone()),new nh({geometry:t,fill:this.Fa()?this.Fa().clone():void 0,image:this.Y()?this.Y().clone():void 0,stroke:this.Ga()?this.Ga().clone():void 0,text:this.Ka()?this.Ka().clone():void 0,zIndex:this.Ba()})},t.Ie=function(){return this.pc},t.Iq=function(t){this.pc=t},t.U=function(){return this.Uc},t.rl=function(){return this.cb},t.Fa=function(){return this.Xa},t.yf=function(t){this.Xa=t},t.Y=function(){return this.M},t.ih=function(t){this.M=t},t.Ga=function(){return this.Ya},t.Af=function(t){this.Ya=t},t.Ka=function(){return this.ta},t.Hd=function(t){this.ta=t},t.Ba=function(){return this.bk},t.Va=function(t){"function"==typeof t?this.cb=t:"string"==typeof t?this.cb=function(e){return e.get(t)}:t?void 0!==t&&(this.cb=function(){return t}):this.cb=ph,this.Uc=t},t.$b=function(t){this.bk=t};var ah=null;function hh(){if(!ah){var t=new oh({color:"rgba(255,255,255,0.4)"}),e=new rh({color:"#3399CC",width:1.25});ah=[new nh({image:new ih({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return ah}function lh(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new nh({fill:new oh({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new nh({stroke:new rh({color:e,width:5})}),new nh({stroke:new rh({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new nh({image:new ih({radius:6,fill:new oh({color:i}),stroke:new rh({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function ph(t){return t.U()}function uh(t){Ie.call(this),this.c=void 0,this.a="geometry",this.f=null,this.j=void 0,this.i=null,ve(this,Le(this.a),this.Oe,this),void 0!==t&&(t instanceof wo||!t?this.Va(t):this.H(t))}function ch(t){Ie.call(this),t=t||{},this.a=null,this.i=Ut,this.f=new at(6378137),this.c=void 0,ve(this,Le("projection"),this.en,this),ve(this,Le("tracking"),this.fn,this),void 0!==t.projection&&this.oi(t.projection),void 0!==t.trackingOptions&&this.Rj(t.trackingOptions),this.Ue(void 0!==t.tracking&&t.tracking)}function fh(t,e,i,o,r,n){var s=NaN,a=NaN,h=(i-e)/o;if(1===h)s=t[e],a=t[e+1];else if(2==h)s=(1-r)*t[e]+r*t[e+o],a=(1-r)*t[e+1]+r*t[e+o+1];else if(0!==h){a=t[e],h=t[e+1];var l,p=0;for(s=[0],l=e+o;l<i;l+=o){var u=t[l],c=t[l+1];p+=Math.sqrt((u-a)*(u-a)+(c-h)*(c-h)),s.push(p),a=u,h=c}for(i=r*p,h=0,p=s.length,l=!1;h<p;)0>(a=+Yt(s[r=h+(p-h>>1)],i))?h=r+1:(p=r,l=!a);0>(r=l?h:~h)?(i=(i-s[-r-2])/(s[-r-1]-s[-r-2]),s=x(t[e+=(-r-2)*o],t[e+o],i),a=x(t[e+1],t[e+o+1],i)):(s=t[e+r*o],a=t[e+r*o+1])}return n?(n[0]=s,n[1]=a,n):[s,a]}function dh(t,e,i,o,r,n){if(i==e)return null;if(r<t[e+o-1])return n?((i=t.slice(e,e+o))[o-1]=r,i):null;if(t[i-1]<r)return n?((i=t.slice(i-o,i))[o-1]=r,i):null;if(r==t[e+o-1])return t.slice(e,e+o);for(e/=o,i/=o;e<i;)r<t[((n=e+i>>1)+1)*o-1]?i=n:e=n+1;if(r==(i=t[e*o-1]))return t.slice((e-1)*o,(e-1)*o+o);var s;for(n=(r-i)/(t[(e+1)*o-1]-i),i=[],s=0;s<o-1;++s)i.push(x(t[(e-1)*o+s],t[e*o+s],n));return i.push(r),i}function yh(t,e){Co.call(this),this.c=null,this.o=this.D=this.j=-1,this.na(t,e)}function gh(t,e,i){for(var o,r,n,s,a,h=[],l=t(0),p=t(1),u=e(l),c=e(p),f=[p,l],d=[c,u],y=[1,0],g={},m=1e5;0<--m&&0<y.length;)n=y.pop(),l=f.pop(),u=d.pop(),(p=n.toString())in g||(h.push(u[0],u[1]),g[p]=!0),s=y.pop(),p=f.pop(),c=d.pop(),v((r=e(o=t(a=(n+s)/2)))[0],r[1],u[0],u[1],c[0],c[1])<i?(h.push(c[0],c[1]),g[p=s.toString()]=!0):(y.push(s,a,a,n),d.push(c,r,r,u),f.push(p,o,o,l));return h}function vh(t){t=t||{},this.a=t.font,this.i=t.rotation,this.l=t.rotateWithView,this.b=t.scale,this.ta=t.text,this.f=t.textAlign,this.j=t.textBaseline,this.Xa=void 0!==t.fill?t.fill:new oh({color:"#333"}),this.s=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.o=void 0!==t.placement?t.placement:"point";var e=void 0===t.overflow?t.exceedLength:t.overflow;this.v=void 0!==e&&e,this.Ya=void 0!==t.stroke?t.stroke:null,this.g=void 0!==t.offsetX?t.offsetX:0,this.c=void 0!==t.offsetY?t.offsetY:0,this.N=t.backgroundFill?t.backgroundFill:null,this.D=t.backgroundStroke?t.backgroundStroke:null,this.C=void 0===t.padding?null:t.padding}function mh(t){t=t||{},this.i=this.v=null,this.j=this.f=1/0,this.s=this.l=-1/0,this.qa=this.oa=1/0,this.O=this.T=-1/0,this.ua=void 0!==t.targetSize?t.targetSize:100,this.ab=void 0!==t.maxLines?t.maxLines:100,this.g=[],this.c=[],this.ra=void 0!==t.strokeStyle?t.strokeStyle:_h,this.D=this.o=void 0,this.a=this.b=this.N=null,1==t.showLabels&&(this.$=void 0==t.lonLabelFormatter?qi.bind(this,"EW"):t.lonLabelFormatter,this.Wa=void 0==t.latLabelFormatter?qi.bind(this,"NS"):t.latLabelFormatter,this.ca=void 0==t.lonLabelPosition?0:t.lonLabelPosition,this.V=void 0==t.latLabelPosition?1:t.latLabelPosition,this.B=void 0!==t.lonLabelStyle?t.lonLabelStyle:new vh({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new oh({color:"rgba(0,0,0,1)"}),stroke:new rh({color:"rgba(255,255,255,1)",width:3})}),this.C=void 0!==t.latLabelStyle?t.latLabelStyle:new vh({font:"12px Calibri,sans-serif",textAlign:"end",fill:new oh({color:"rgba(0,0,0,1)"}),stroke:new rh({color:"rgba(255,255,255,1)",width:3})}),this.b=[],this.a=[]),this.setMap(void 0!==t.map?t.map:null)}s(uh,Ie),(t=uh.prototype).clone=function(){var t=new uh(this.L());t.Lc(this.a);var e=this.U();return e&&t.Va(e.clone()),(e=this.f)&&t.sg(e),t},t.U=function(){return this.get(this.a)},t.an=function(){return this.c},t.sl=function(){return this.a},t.bn=function(){return this.f},t.ib=function(){return this.j},t.bm=function(){this.u()},t.Oe=function(){this.i&&(be(this.i),this.i=null);var t=this.U();t&&(this.i=ve(t,"change",this.bm,this)),this.u()},t.Va=function(t){this.set(this.a,t)},t.sg=function(t){this.j=(this.f=t)?function(t){var e;if("function"==typeof t)e=2==t.length?function(e){return t(this,e)}:t;else{if(Array.isArray(t))var i=t;else d(t instanceof nh,41),i=[t];e=function(){return i}}return e}(t):void 0,this.u()},t.qc=function(t){this.c=t,this.u()},t.Lc=function(t){_e(this,Le(this.a),this.Oe,this),this.a=t,ve(this,Le(this.a),this.Oe,this),this.Oe()},s(ch,Ie),(t=ch.prototype).ia=function(){this.Ue(!1),Ie.prototype.ia.call(this)},t.en=function(){var t=this.mi();t&&(this.i=Gt(Dt("EPSG:4326"),t),this.a&&this.set("position",this.i(this.a)))},t.fn=function(){if(ti){var t=this.ni();t&&void 0===this.c?this.c=navigator.geolocation.watchPosition(this.Pp.bind(this),this.Qp.bind(this),this.ai()):t||void 0===this.c||(navigator.geolocation.clearWatch(this.c),this.c=void 0)}},t.Pp=function(t){t=t.coords,this.set("accuracy",t.accuracy),this.set("altitude",null===t.altitude?void 0:t.altitude),this.set("altitudeAccuracy",null===t.altitudeAccuracy?void 0:t.altitudeAccuracy),this.set("heading",null===t.heading?void 0:_(t.heading)),this.a?(this.a[0]=t.longitude,this.a[1]=t.latitude):this.a=[t.longitude,t.latitude];var e=this.i(this.a);this.set("position",e),this.set("speed",null===t.speed?void 0:t.speed),(t=sr(this.f,this.a,t.accuracy)).Rc(this.i),this.set("accuracyGeometry",t),this.u()},t.Qp=function(t){t.type="error",this.Ue(!1),this.b(t)},t.el=function(){return this.get("accuracy")},t.fl=function(){return this.get("accuracyGeometry")||null},t.gl=function(){return this.get("altitude")},t.hl=function(){return this.get("altitudeAccuracy")},t.cn=function(){return this.get("heading")},t.dn=function(){return this.get("position")},t.mi=function(){return this.get("projection")},t.Ol=function(){return this.get("speed")},t.ni=function(){return this.get("tracking")},t.ai=function(){return this.get("trackingOptions")},t.oi=function(t){this.set("projection",Dt(t))},t.Ue=function(t){this.set("tracking",t)},t.Rj=function(t){this.set("trackingOptions",t)},s(yh,Co),(t=yh.prototype).Fk=function(t){this.A?Ht(this.A,t):this.A=t.slice(),this.u()},t.clone=function(){var t=new yh(null);return t.ba(this.ja,this.A.slice()),t},t.Nb=function(t,e,i,o){return o<P(this.G(),t,e)?o:(this.o!=this.g&&(this.D=Math.sqrt(Oo(this.A,0,this.A.length,this.a,0)),this.o=this.g),No(this.A,0,this.A.length,this.a,this.D,!1,t,e,i,o))},t.dl=function(t,e){return Jo(this.A,0,this.A.length,this.a,t,e)},t.Tn=function(t,e){return"XYM"!=this.ja&&"XYZM"!=this.ja?null:dh(this.A,0,this.A.length,this.a,t,void 0!==e&&e)},t.W=function(){return Uo(this.A,0,this.A.length,this.a)},t.Ph=function(t,e){return fh(this.A,0,this.A.length,this.a,t,e)},t.Un=function(){return sa(this.A,0,this.A.length,this.a)},t.Fe=function(){return this.j!=this.g&&(this.c=this.Ph(.5,this.c),this.j=this.g),this.c},t.xd=function(t){var e=[];return e.length=Wo(this.A,0,this.A.length,this.a,t,e,0),(t=new yh(null)).ba("XY",e),t},t.S=function(){return"LineString"},t.$a=function(t){return Qo(this.A,0,this.A.length,this.a,t)},t.na=function(t,e){t?(Io(this,e,t,1),this.A||(this.A=[]),this.A.length=ko(this.A,0,t,this.a),this.u()):this.ba("XY",null)},t.ba=function(t,e){Po(this,t,e),this.u()},(t=vh.prototype).clone=function(){return new vh({font:this.a,placement:this.o,maxAngle:this.s,overflow:this.v,rotation:this.i,rotateWithView:this.l,scale:this.b,text:this.Ka(),textAlign:this.f,textBaseline:this.j,fill:this.Fa()?this.Fa().clone():void 0,stroke:this.Ga()?this.Ga().clone():void 0,offsetX:this.g,offsetY:this.c})},t.Gl=function(){return this.v},t.pl=function(){return this.a},t.Bl=function(){return this.s},t.Kl=function(){return this.o},t.El=function(){return this.g},t.Fl=function(){return this.c},t.Fa=function(){return this.Xa},t.tp=function(){return this.l},t.up=function(){return this.i},t.vp=function(){return this.b},t.Ga=function(){return this.Ya},t.Ka=function(){return this.ta},t.Ql=function(){return this.f},t.Rl=function(){return this.j},t.jl=function(){return this.N},t.kl=function(){return this.D},t.Il=function(){return this.C},t.Fq=function(t){this.v=t},t.Jj=function(t){this.a=t},t.Bq=function(t){this.s=t},t.Nj=function(t){this.g=t},t.Oj=function(t){this.c=t},t.Hq=function(t){this.o=t},t.yf=function(t){this.Xa=t},t.wp=function(t){this.i=t},t.lj=function(t){this.b=t},t.Af=function(t){this.Ya=t},t.Hd=function(t){this.ta=t},t.Qj=function(t){this.f=t},t.Jq=function(t){this.j=t},t.sq=function(t){this.N=t},t.tq=function(t){this.D=t},t.Gq=function(t){this.C=t};var _h=new rh({color:"rgba(0,0,0,0.2)"}),bh=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];function xh(t,e,i,o,r,n,s){var a=s;return i=function(t,e,i,o,r){return gh(function(o){return[t,e+(i-e)*o]},kt(Dt("EPSG:4326"),o),r)}(e,i,o,t.i,r),(a=void 0!==t.g[a]?t.g[a]:new yh(null)).ba("XY",i),Q(a.G(),n)&&(t.b&&(i=s,n=[(o=a.da())[0],y(n[1]+Math.abs(n[1]-n[3])*t.ca,Math.max(n[1],o[1]),Math.min(n[3],o[o.length-1]))],(i=void 0!==t.b[i]?t.b[i].Qd:new Ko(null)).na(n),t.b[s]={Qd:i,text:t.$(e)}),t.g[s++]=a),s}function Eh(t,e,i,o,r,n,s){var a=s;return i=function(t,e,i,o,r){return gh(function(o){return[e+(i-e)*o,t]},kt(Dt("EPSG:4326"),o),r)}(e,i,o,t.i,r),(a=void 0!==t.c[a]?t.c[a]:new yh(null)).ba("XY",i),Q(a.G(),n)&&(t.a&&(i=s,o=a.da(),n=[y(n[0]+Math.abs(n[0]-n[2])*t.V,Math.max(n[0],o[0]),Math.min(n[2],o[o.length-2])),o[1]],(i=void 0!==t.a[i]?t.a[i].Qd:new Ko(null)).na(n),t.a[s]={Qd:i,text:t.Wa(e)}),t.c[s++]=a),s}function Sh(t,e,i,o,r,n){qn.call(this,t,e,i,0),this.i=o,this.M=new Image,null!==r&&(this.M.crossOrigin=r),this.g=null,this.state=0,this.c=n}function Th(t,e,i){Ce.call(this),i=i||{},this.ya=t,this.state=e,this.g=null,this.key="",this.j=void 0===i.transition?250:i.transition,this.s={}}function wh(t){if(!t.g)return t;var e=t.g;do{if(2==e.getState())return e;e=e.g}while(e);return t}function Ch(t){if(t.g){var e=t.g;do{if(2==e.getState()){e.g=null;break}1==e.getState()?t=e:0==e.getState()?t.g=e.g:t=e,e=t.g}while(e)}}function Rh(t,e){t.state=e,t.u()}function Ph(t,e,i){if(!t.j)return 1;var o=t.s[e];if(o){if(-1===o)return 1}else o=i,t.s[e]=o;return(e=i-o+1e3/60)>=t.j?1:no(e/t.j)}function Ih(t,e,i,o,r,n){Th.call(this,t,e,n),this.f=o,this.l=i,this.M=new Image,null!==o&&(this.M.crossOrigin=o),this.c=null,this.v=r}function Mh(t){t.c.forEach(be),t.c=null}function Lh(){var t=mr(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}function Ah(t){this.b=t}function Oh(t){this.b=t}function Fh(t){this.b=t}(t=mh.prototype).gn=function(){return this.v},t.Cl=function(){return this.g},t.Jl=function(){return this.c},t.di=function(t){var e=t.vectorContext,i=t.frameState;t=i.extent;var o=i.viewState,r=o.center,n=o.projection;if(i=(o=o.resolution)*o/(4*(i=i.pixelRatio)*i),!this.i||!jt(this.i,n)){var s=Dt("EPSG:4326"),a=n.G(),h=n.oe,l=Wt(h,s,n),p=h[2],u=h[1],c=h[0],f=l[3],d=l[2],g=l[1];l=l[0],this.f=h[3],this.j=p,this.l=u,this.s=c,this.oa=f,this.qa=d,this.T=g,this.O=l,this.o=kt(s,n),this.D=kt(n,s),this.N=this.D(z(a)),this.i=n}for(n=this.N[0],s=this.N[1],a=-1,p=Math.pow(this.ua*o,2),u=[],c=[],o=0,h=bh.length;o<h&&(f=bh[o]/2,u[0]=n-f,u[1]=s-f,c[0]=n+f,c[1]=s+f,this.o(u,u),this.o(c,c),!((f=Math.pow(c[0]-u[0],2)+Math.pow(c[1]-u[1],2))<=p));++o)a=bh[o];if(-1==(o=a))this.g.length=this.c.length=0,this.b&&(this.b.length=0),this.a&&(this.a.length=0);else{for(r=(n=this.D(r))[0],n=n[1],s=this.ab,u=(h=Wt(h=[Math.max(t[0],this.O),Math.max(t[1],this.T),Math.min(t[2],this.qa),Math.min(t[3],this.oa)],this.i,"EPSG:4326"))[3],a=h[2],c=h[1],f=h[0],p=xh(this,d=y(r=Math.floor(r/o)*o,this.s,this.j),c,u,i,t,0),h=0;d!=this.s&&h++<s;)p=xh(this,d=Math.max(d-o,this.s),c,u,i,t,p);for(d=y(r,this.s,this.j),h=0;d!=this.j&&h++<s;)p=xh(this,d=Math.min(d+o,this.j),c,u,i,t,p);for(this.g.length=p,this.b&&(this.b.length=p),p=Eh(this,r=y(n=Math.floor(n/o)*o,this.l,this.f),f,a,i,t,0),h=0;r!=this.l&&h++<s;)p=Eh(this,r=Math.max(r-o,this.l),f,a,i,t,p);for(r=y(n,this.l,this.f),h=0;r!=this.f&&h++<s;)p=Eh(this,r=Math.min(r+o,this.f),f,a,i,t,p);this.c.length=p,this.a&&(this.a.length=p)}for(e.Oa(null,this.ra),t=0,i=this.g.length;t<i;++t)r=this.g[t],e.Hb(r);for(t=0,i=this.c.length;t<i;++t)r=this.c[t],e.Hb(r);if(this.b)for(t=0,i=this.b.length;t<i;++t)r=this.b[t],this.B.Hd(r.text),e.nb(this.B),e.Hb(r.Qd);if(this.a)for(t=0,i=this.a.length;t<i;++t)r=this.a[t],this.C.Hd(r.text),e.nb(this.C),e.Hb(r.Qd)},t.setMap=function(t){this.v&&(this.v.J("postcompose",this.di,this),this.v.render()),t&&(t.I("postcompose",this.di,this),t.render()),this.v=t},s(Sh,qn),(t=Sh.prototype).Y=function(){return this.M},t.kn=function(){this.state=3,this.g.forEach(be),this.g=null,this.u()},t.ln=function(){void 0===this.resolution&&(this.resolution=H(this.extent)/this.M.height),this.state=2,this.g.forEach(be),this.g=null,this.u()},t.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.u(),this.g=[me(this.M,"error",this.kn,this),me(this.M,"load",this.ln,this)],this.c(this,this.i))},t.ih=function(t){this.M=t},s(Th,Ce),Th.prototype.u=function(){this.b("change")},Th.prototype.lb=function(){return this.key+"/"+this.ya},Th.prototype.i=function(){return this.ya},Th.prototype.getState=function(){return this.state},s(Ih,Th),(t=Ih.prototype).ia=function(){1==this.state&&(Mh(this),this.M=Lh()),this.g&&Se(this.g),this.state=5,this.u(),Th.prototype.ia.call(this)},t.Y=function(){return this.M},t.lb=function(){return this.l},t.hn=function(){this.state=3,Mh(this),this.M=Lh(),this.u()},t.jn=function(){this.state=this.M.naturalWidth&&this.M.naturalHeight?2:4,Mh(this),this.u()},t.load=function(){3==this.state&&(this.state=0,this.M=new Image,null!==this.f&&(this.M.crossOrigin=this.f)),0==this.state&&(this.state=1,this.u(),this.c=[me(this.M,"error",this.hn,this),me(this.M,"load",this.jn,this)],this.v(this,this.l))},s(Oh,Ah),Oh.prototype.S=function(){return 35632},s(Fh,Ah),Fh.prototype.S=function(){return 35633};var Nh=new Oh("precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),Dh=new Fh("varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;//Until we get gl_VertexID in WebGL,we store an instruction.if(f==0.0){//Offsetting the edges of the triangle by lineWidth/2 is necessary,however//we should also leave some space for the antialiasing,thus we offset by lineWidth.offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}");function jh(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function kh(t,e){this.origin=z(e),this.bb=[1,0,0,1,0,0],this.Ea=[1,0,0,1,0,0],this.La=[1,0,0,1,0,0],this.V=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.b=[],this.j=null,this.g=[],this.i=[],this.a=[],this.s=null,this.f=void 0}function Gh(t,e,i,o){t.drawElements(4,o-i,e.f?5125:5123,i*(e.f?4:2))}s(kh,Ss),kh.prototype.Na=function(t,e,i,o,r,n,s,a,h,l,p){var u=t.b;if(this.f){var c=u.isEnabled(u.STENCIL_TEST),f=u.getParameter(u.STENCIL_FUNC),d=u.getParameter(u.STENCIL_VALUE_MASK),y=u.getParameter(u.STENCIL_REF),g=u.getParameter(u.STENCIL_WRITEMASK),v=u.getParameter(u.STENCIL_FAIL),m=u.getParameter(u.STENCIL_PASS_DEPTH_PASS),_=u.getParameter(u.STENCIL_PASS_DEPTH_FAIL);u.enable(u.STENCIL_TEST),u.clear(u.STENCIL_BUFFER_BIT),u.stencilMask(255),u.stencilFunc(u.ALWAYS,1,255),u.stencilOp(u.KEEP,u.KEEP,u.REPLACE),this.f.Na(t,e,i,o,r,n,s,a,h,l,p),u.stencilMask(0),u.stencilFunc(u.NOTEQUAL,1,255)}Jh(t,34962,this.s),Jh(t,34963,this.j),n=this.Bf(u,t,r,n);var b=yo(this.bb);if(xo(b,2/(i*r[0]),2/(i*r[1])),bo(b,-o),Eo(b,-(e[0]-this.origin[0]),-(e[1]-this.origin[1])),xo(e=yo(this.La),2/r[0],2/r[1]),r=yo(this.Ea),0!==o&&bo(r,-o),u.uniformMatrix4fv(n.g,!1,jh(this.V,b)),u.uniformMatrix4fv(n.i,!1,jh(this.V,e)),u.uniformMatrix4fv(n.c,!1,jh(this.V,r)),u.uniform1f(n.a,s),void 0===h)this.Od(u,t,a,!1);else{l?t=this.Ee(u,t,a,h,p):(u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),this.Od(u,t,a,!0),t=(t=h(null))?t:void 0);var x=t}return this.Cf(u,n),this.f&&(c||u.disable(u.STENCIL_TEST),u.clear(u.STENCIL_BUFFER_BIT),u.stencilFunc(f,y,d),u.stencilMask(g),u.stencilOp(v,_,m)),x};var Uh=[0,0,0,1],Bh=[],Vh=[0,0,0,1];function Wh(t,e,i,o,r,n){return(t=(i-t)*(n-e)-(r-t)*(o-e))<=Xh&&t>=-Xh?void 0:0<t}var Xh=Number.EPSILON||2.220446049250313e-16;function Yh(t){this.b=void 0!==t?t:[],this.a=zh}var zh=35044;function Kh(t,e){kh.call(this,t,e),this.v=null,this.l=[],this.o=[],this.N=0,this.c={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,u:!1}}function Hh(t,e,i,o){e.uniform4fv(t.v.O,i),e.uniform1f(t.v.oa,o)}s(Kh,kh),(t=Kh.prototype).cc=function(t,e){var i=t.Bd(),o=t.pa();if(i){this.g.push(this.b.length),this.i.push(e),this.c.u&&(this.o.push(this.b.length),this.c.u=!1),this.N=i,t=co(t=t.da(),0,2,o,-this.origin[0],-this.origin[1]),e=this.a.length,i=this.b.length;var r,n=e/4;for(r=0;2>r;r+=o)this.a[e++]=t[r],this.a[e++]=t[r+1],this.a[e++]=0,this.a[e++]=this.N,this.a[e++]=t[r],this.a[e++]=t[r+1],this.a[e++]=1,this.a[e++]=this.N,this.a[e++]=t[r],this.a[e++]=t[r+1],this.a[e++]=2,this.a[e++]=this.N,this.a[e++]=t[r],this.a[e++]=t[r+1],this.a[e++]=3,this.a[e++]=this.N,this.b[i++]=n,this.b[i++]=n+1,this.b[i++]=n+2,this.b[i++]=n+2,this.b[i++]=n+3,this.b[i++]=n,n+=4}else this.c.u&&(this.l.pop(),this.l.length&&(o=this.l[this.l.length-1],this.c.fillColor=o[0],this.c.strokeColor=o[1],this.c.lineWidth=o[2],this.c.u=!1))},t.gb=function(){this.s=new Yh(this.a),this.j=new Yh(this.b),this.g.push(this.b.length),0===this.o.length&&0<this.l.length&&(this.l=[]),this.b=this.a=null},t.Db=function(t){var e=this.s,i=this.j;return function(){Qh(t,e),Qh(t,i)}},t.Bf=function(t,e,i,o){var r=il(e,Nh,Dh);if(this.v)var n=this.v;else this.v=n=new function(t,e){this.g=t.getUniformLocation(e,"h"),this.i=t.getUniformLocation(e,"i"),this.c=t.getUniformLocation(e,"j"),this.oa=t.getUniformLocation(e,"k"),this.qa=t.getUniformLocation(e,"l"),this.a=t.getUniformLocation(e,"m"),this.C=t.getUniformLocation(e,"n"),this.O=t.getUniformLocation(e,"o"),this.T=t.getUniformLocation(e,"p"),this.b=t.getAttribLocation(e,"e"),this.j=t.getAttribLocation(e,"f"),this.N=t.getAttribLocation(e,"g")}(t,r);return e.cd(r),t.enableVertexAttribArray(n.b),t.vertexAttribPointer(n.b,2,5126,!1,16,0),t.enableVertexAttribArray(n.j),t.vertexAttribPointer(n.j,1,5126,!1,16,8),t.enableVertexAttribArray(n.N),t.vertexAttribPointer(n.N,1,5126,!1,16,12),t.uniform2fv(n.T,i),t.uniform1f(n.qa,o),n},t.Cf=function(t,e){t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.j),t.disableVertexAttribArray(e.N)},t.Od=function(t,e,i){if(st(i)){var o=this.g[this.g.length-1];for(i=this.o.length-1;0<=i;--i){var r=this.o[i],n=this.l[i];t.uniform4fv(this.v.C,n[0]),Hh(this,t,n[1],n[2]),Gh(t,e,r,o),o=r}}else{var s=this.g.length-2;for(n=o=this.g[s+1],r=this.o.length-1;0<=r;--r){var a=this.l[r];for(t.uniform4fv(this.v.C,a[0]),Hh(this,t,a[1],a[2]),a=this.o[r];0<=s&&this.g[s]>=a;){var l=this.g[s],p=this.i[s];i[p=h(p).toString()]&&(o!==n&&Gh(t,e,o,n),n=l),s--,o=l}o!==n&&Gh(t,e,o,n),o=n=a}}},t.Ee=function(t,e,i,o,r){var n,s,a=this.g.length-2,l=this.g[a+1];for(n=this.o.length-1;0<=n;--n){var p=this.l[n];for(t.uniform4fv(this.v.C,p[0]),Hh(this,t,p[1],p[2]),s=this.o[n];0<=a&&this.g[a]>=s;){p=this.g[a];var u=this.i[a];if(void 0===i[h(u).toString()]&&u.U()&&(void 0===r||Q(r,u.U().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Gh(t,e,p,l),l=o(u)))return l;a--,l=p}}},t.Oa=function(t,e){if(e){var i=e.g;this.c.lineDash=i||Bh,i=e.i,this.c.lineDashOffset=i||0,i=(i=e.a)instanceof CanvasGradient||i instanceof CanvasPattern?Vh:ms(i).map(function(t,e){return 3!=e?t/255:t})||Vh,e=void 0!==(e=e.c)?e:1}else i=[0,0,0,0],e=0;t=(t=t?t.b:[0,0,0,0])instanceof CanvasGradient||t instanceof CanvasPattern?Uh:ms(t).map(function(t,e){return 3!=e?t/255:t})||Uh,this.c.strokeColor&&qt(this.c.strokeColor,i)&&this.c.fillColor&&qt(this.c.fillColor,t)&&this.c.lineWidth===e||(this.c.u=!0,this.c.fillColor=t,this.c.strokeColor=i,this.c.lineWidth=e,this.l.push([t,i,e]))};var $h=new Oh("precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),qh=new Fh("varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}");function Zh(t,e){this.j=t,this.b=e,this.a={},this.c={},this.g={},this.s=this.v=this.i=this.l=null,(this.f=zt(i,"OES_element_index_uint"))&&e.getExtension("OES_element_index_uint"),ve(this.j,"webglcontextlost",this.zp,this),ve(this.j,"webglcontextrestored",this.Ap,this)}function Jh(t,e,i){var o=t.b,r=i.b,n=String(h(i));if(n in t.a)o.bindBuffer(e,t.a[n].buffer);else{var s,a=o.createBuffer();o.bindBuffer(e,a),34962==e?s=new Float32Array(r):34963==e&&(s=t.f?new Uint32Array(r):new Uint16Array(r)),o.bufferData(e,s,i.a),t.a[n]={tc:i,buffer:a}}}function Qh(t,e){var i=t.b;e=String(h(e));var o=t.a[e];i.isContextLost()||i.deleteBuffer(o.buffer),delete t.a[e]}function tl(t){if(!t.i){var e=t.b,i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i);var o=rl(e,1,1),r=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,r),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,r),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),t.i=i,t.v=o,t.s=r}return t.i}function el(t,e){var i=String(h(e));if(i in t.c)return t.c[i];var o=t.b,r=o.createShader(e.S());return o.shaderSource(r,e.b),o.compileShader(r),t.c[i]=r}function il(t,e,i){var o=h(e)+"/"+h(i);if(o in t.g)return t.g[o];var r=t.b,n=r.createProgram();return r.attachShader(n,el(t,e)),r.attachShader(n,el(t,i)),r.linkProgram(n),t.g[o]=n}function ol(t,e,i){var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(3553,10242,e),void 0!==i&&t.texParameteri(3553,10243,i),o}function rl(t,e,i){var o=ol(t,void 0,void 0);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o}function nl(t,e){var i=ol(t,33071,33071);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),i}function sl(t,e){kh.call(this,t,e),this.C=this.D=void 0,this.v=[],this.o=[],this.qa=this.oa=this.height=void 0,this.Wa=null,this.width=this.scale=this.rotation=this.rotateWithView=this.O=this.T=this.opacity=void 0}function al(t,e,i,o){var r=t.D,n=t.C,s=t.height,a=t.oa,h=t.qa,l=t.opacity,p=t.T,u=t.O,c=t.rotateWithView?1:0,f=-t.rotation,d=t.scale,y=t.width,g=Math.cos(f);f=Math.sin(f);var v,m=t.b.length,_=t.a.length;for(v=0;v<i;v+=o){var b=e[v]-t.origin[0],x=e[v+1]-t.origin[1],E=_/8,S=-d*r,T=-d*(s-n);t.a[_++]=b,t.a[_++]=x,t.a[_++]=S*g-T*f,t.a[_++]=S*f+T*g,t.a[_++]=p/h,t.a[_++]=(u+s)/a,t.a[_++]=l,t.a[_++]=c,S=d*(y-r),T=-d*(s-n),t.a[_++]=b,t.a[_++]=x,t.a[_++]=S*g-T*f,t.a[_++]=S*f+T*g,t.a[_++]=(p+y)/h,t.a[_++]=(u+s)/a,t.a[_++]=l,t.a[_++]=c,S=d*(y-r),T=d*n,t.a[_++]=b,t.a[_++]=x,t.a[_++]=S*g-T*f,t.a[_++]=S*f+T*g,t.a[_++]=(p+y)/h,t.a[_++]=u/a,t.a[_++]=l,t.a[_++]=c,S=-d*r,T=d*n,t.a[_++]=b,t.a[_++]=x,t.a[_++]=S*g-T*f,t.a[_++]=S*f+T*g,t.a[_++]=p/h,t.a[_++]=u/a,t.a[_++]=l,t.a[_++]=c,t.b[m++]=E,t.b[m++]=E+1,t.b[m++]=E+2,t.b[m++]=E,t.b[m++]=E+2,t.b[m++]=E+3}}function hl(t,e,i,o){var r,n=e.length;for(r=0;r<n;++r){var s=e[r],a=h(s).toString();a in i?s=i[a]:(s=nl(o,s),i[a]=s),t[r]=s}}function ll(t,e){sl.call(this,t,e),this.l=[],this.c=[],this.B=[],this.N=[]}function pl(t,e,i){var o=e-i;return t[0]===t[o]&&t[1]===t[o+1]&&3<(e-0)/i&&!!Mo(t,0,e,i)}s(Zh,Ee),(t=Zh.prototype).ia=function(){xe(this.j);var t=this.b;if(!t.isContextLost()){for(var e in this.a)t.deleteBuffer(this.a[e].buffer);for(e in this.g)t.deleteProgram(this.g[e]);for(e in this.c)t.deleteShader(this.c[e]);t.deleteFramebuffer(this.i),t.deleteRenderbuffer(this.s),t.deleteTexture(this.v)}},t.yp=function(){return this.b},t.zp=function(){rt(this.a),rt(this.c),rt(this.g),this.s=this.v=this.i=this.l=null},t.Ap=function(){},t.cd=function(t){return t!=this.l&&(this.b.useProgram(t),this.l=t,!0)},s(sl,kh),(t=sl.prototype).Db=function(t){var e=this.s,i=this.j,o=this.ig(!0),r=t.b;return function(){if(!r.isContextLost()){var n,s=0;for(n=o.length;s<n;++s)r.deleteTexture(o[s])}Qh(t,e),Qh(t,i)}},t.Bf=function(t,e){var i=il(e,$h,qh);if(this.Wa)var o=this.Wa;else this.Wa=o=new function(t,e){this.g=t.getUniformLocation(e,"h"),this.i=t.getUniformLocation(e,"i"),this.c=t.getUniformLocation(e,"j"),this.a=t.getUniformLocation(e,"k"),this.b=t.getAttribLocation(e,"c"),this.B=t.getAttribLocation(e,"d"),this.v=t.getAttribLocation(e,"e"),this.o=t.getAttribLocation(e,"f"),this.D=t.getAttribLocation(e,"g")}(t,i);return e.cd(i),t.enableVertexAttribArray(o.b),t.vertexAttribPointer(o.b,2,5126,!1,32,0),t.enableVertexAttribArray(o.v),t.vertexAttribPointer(o.v,2,5126,!1,32,8),t.enableVertexAttribArray(o.B),t.vertexAttribPointer(o.B,2,5126,!1,32,16),t.enableVertexAttribArray(o.o),t.vertexAttribPointer(o.o,1,5126,!1,32,24),t.enableVertexAttribArray(o.D),t.vertexAttribPointer(o.D,1,5126,!1,32,28),o},t.Cf=function(t,e){t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.v),t.disableVertexAttribArray(e.B),t.disableVertexAttribArray(e.o),t.disableVertexAttribArray(e.D)},t.Od=function(t,e,i,o){var r=o?this.ag():this.ig();if(o=o?this.o:this.v,st(i)){var n;i=0;var s=r.length;for(n=0;i<s;++i){t.bindTexture(3553,r[i]);var a=o[i];Gh(t,e,n,a),n=a}}else for(n=s=0,a=r.length;n<a;++n){t.bindTexture(3553,r[n]);for(var l=0<n?o[n-1]:0,p=o[n],u=l;s<this.g.length&&this.g[s]<=p;){void 0!==i[h(this.i[s]).toString()]?(u!==l&&Gh(t,e,u,l),l=u=s===this.g.length-1?p:this.g[s+1]):l=s===this.g.length-1?p:this.g[s+1],s++}u!==l&&Gh(t,e,u,l)}},t.Ee=function(t,e,i,o,r){var n,s,a=this.g.length-1,l=this.ag();for(n=l.length-1;0<=n;--n){t.bindTexture(3553,l[n]);var p=0<n?this.o[n-1]:0;for(s=this.o[n];0<=a&&this.g[a]>=p;){var u=this.g[a],c=this.i[a];if(void 0===i[h(c).toString()]&&c.U()&&(void 0===r||Q(r,c.U().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Gh(t,e,u,s),s=o(c)))return s;s=u,a--}}},t.gb=function(){this.qa=this.oa=this.height=this.C=this.D=void 0,this.b=null,this.scale=this.rotation=this.rotateWithView=this.O=this.T=this.opacity=void 0,this.a=null,this.width=void 0},s(ll,sl),(t=ll.prototype).wc=function(t,e){this.g.push(this.b.length),this.i.push(e),al(this,e=t.da(),e.length,t.pa())},t.yc=function(t,e){this.g.push(this.b.length),this.i.push(e),al(this,e=t.da(),e.length,t.pa())},t.gb=function(t){var e=t.b;this.v.push(this.b.length),this.o.push(this.b.length),this.s=new Yh(this.a),this.j=new Yh(this.b);var i={};hl(this.B,this.l,i,e),hl(this.N,this.c,i,e),this.c=this.l=null,sl.prototype.gb.call(this,t)},t.Zb=function(t){var e=t.Vc(),i=t.Y(1),o=t.He(),r=t.Eg(),n=t.i,s=t.bd(),a=t.s,l=t.f,p=t.oc();if(t=t.a,0===this.l.length)this.l.push(i);else{var u=this.l[this.l.length-1];h(u)!=h(i)&&(this.v.push(this.b.length),this.l.push(i))}0===this.c.length?this.c.push(r):h(u=this.c[this.c.length-1])!=h(r)&&(this.o.push(this.b.length),this.c.push(r)),this.D=e[0],this.C=e[1],this.height=p[1],this.oa=o[1],this.qa=o[0],this.opacity=n,this.T=s[0],this.O=s[1],this.rotation=l,this.rotateWithView=a,this.scale=t,this.width=p[0]},t.ig=function(t){return t?this.B.concat(this.N):this.B},t.ag=function(){return this.N};var ul=new Oh("precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),cl=new Fh("varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}");function fl(t,e){kh.call(this,t,e),this.v=null,this.o=[],this.l=[],this.c={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,u:!1}}function dl(t,e,i,o){var r,n=t.a.length,s=t.b.length,a="bevel"===t.c.lineJoin?0:"miter"===t.c.lineJoin?1:2,h="butt"===t.c.lineCap?0:"square"===t.c.lineCap?1:2,l=pl(e,i,o),p=s,u=1;for(r=0;r<i;r+=o){var c=n/7,f=d,d=y||[e[r],e[r+1]];if(0===r){var y=[e[r+o],e[r+o+1]];if(i-0==2*o&&qt(d,y))break;if(!l){h&&(n=yl(t,[0,0],d,y,u*El*h,n),n=yl(t,[0,0],d,y,-u*El*h,n),t.b[s++]=c+2,t.b[s++]=c,t.b[s++]=c+1,t.b[s++]=c+1,t.b[s++]=c+3,t.b[s++]=c+2),n=yl(t,[0,0],d,y,u*bl*(h||1),n),p=(n=yl(t,[0,0],d,y,-u*bl*(h||1),n))/7-1;continue}f=[e[i-2*o],e[i-2*o+1]];var g=y}else{if(r===i-o){l?y=g:(n=yl(t,f=f||[0,0],d,[0,0],u*xl*(h||1),n),n=yl(t,f,d,[0,0],-u*xl*(h||1),n),t.b[s++]=c,t.b[s++]=p-1,t.b[s++]=p,t.b[s++]=p,t.b[s++]=c+1,t.b[s++]=c,h&&(n=yl(t,f,d,[0,0],u*Sl*h,n),n=yl(t,f,d,[0,0],-u*Sl*h,n),t.b[s++]=c+2,t.b[s++]=c,t.b[s++]=c+1,t.b[s++]=c+1,t.b[s++]=c+3,t.b[s++]=c+2));break}y=[e[r+o],e[r+o+1]]}var v=Wh(f[0],f[1],d[0],d[1],y[0],y[1])?-1:1;n=yl(t,f,d,y,v*Tl*(a||1),n),n=yl(t,f,d,y,v*wl*(a||1),n),n=yl(t,f,d,y,-v*Cl*(a||1),n),0<r&&(t.b[s++]=c,t.b[s++]=p-1,t.b[s++]=p,t.b[s++]=c+2,t.b[s++]=c,t.b[s++]=0<u*v?p:p-1),t.b[s++]=c,t.b[s++]=c+2,t.b[s++]=c+1,p=c+2,u=v,a&&(n=yl(t,f,d,y,v*Rl*a,n),t.b[s++]=c+1,t.b[s++]=c+3,t.b[s++]=c)}l&&(c=c||n/7,n=yl(t,f,d,y,(v=er([f[0],f[1],d[0],d[1],y[0],y[1]],0,6,2)?1:-1)*Tl*(a||1),n),yl(t,f,d,y,-v*Cl*(a||1),n),t.b[s++]=c,t.b[s++]=p-1,t.b[s++]=p,t.b[s++]=c+1,t.b[s++]=c,t.b[s++]=0<u*v?p:p-1)}function yl(t,e,i,o,r,n){return t.a[n++]=e[0],t.a[n++]=e[1],t.a[n++]=i[0],t.a[n++]=i[1],t.a[n++]=o[0],t.a[n++]=o[1],t.a[n++]=r,n}function gl(t,e,i,o){return!((i-=e)<2*o)&&(i!==2*o||!qt([t[e],t[e+1]],[t[e+o],t[e+o+1]]))}function vl(t,e,i,o){var r;if(pl(e,e.length,o)||(e.push(e[0]),e.push(e[1])),dl(t,e,e.length,o),i.length)for(e=0,r=i.length;e<r;++e)pl(i[e],i[e].length,o)||(i[e].push(i[e][0]),i[e].push(i[e][1])),dl(t,i[e],i[e].length,o)}function ml(t,e,i){i=void 0===i?t.b.length:i,t.g.push(i),t.i.push(e),t.c.u&&(t.l.push(i),t.c.u=!1)}function _l(t,e,i,o,r){e.uniform4fv(t.v.C,i),e.uniform1f(t.v.oa,o),e.uniform1f(t.v.O,r)}s(fl,kh),(t=fl.prototype).uc=function(t,e){var i=t.da();t=t.pa(),gl(i,0,i.length,t)&&(i=co(i,0,i.length,t,-this.origin[0],-this.origin[1]),this.c.u&&(this.l.push(this.b.length),this.c.u=!1),this.g.push(this.b.length),this.i.push(e),dl(this,i,i.length,t))},t.vc=function(t,e){var i=this.b.length,o=t.pb();o.unshift(0);var r,n=t.da();if(t=t.pa(),1<o.length){var s=1;for(r=o.length;s<r;++s)if(gl(n,o[s-1],o[s],t)){var a=co(n,o[s-1],o[s],t,-this.origin[0],-this.origin[1]);dl(this,a,a.length,t)}}this.b.length>i&&(this.g.push(i),this.i.push(e),this.c.u&&(this.l.push(i),this.c.u=!1))},t.gb=function(){this.s=new Yh(this.a),this.j=new Yh(this.b),this.g.push(this.b.length),0===this.l.length&&0<this.o.length&&(this.o=[]),this.b=this.a=null},t.Db=function(t){var e=this.s,i=this.j;return function(){Qh(t,e),Qh(t,i)}},t.Bf=function(t,e,i,o){var r=il(e,ul,cl);if(this.v)var n=this.v;else this.v=n=new function(t,e){this.g=t.getUniformLocation(e,"h"),this.i=t.getUniformLocation(e,"i"),this.c=t.getUniformLocation(e,"j"),this.oa=t.getUniformLocation(e,"k"),this.O=t.getUniformLocation(e,"l"),this.a=t.getUniformLocation(e,"m"),this.C=t.getUniformLocation(e,"n"),this.T=t.getUniformLocation(e,"o"),this.qa=t.getUniformLocation(e,"p"),this.l=t.getAttribLocation(e,"d"),this.b=t.getAttribLocation(e,"e"),this.s=t.getAttribLocation(e,"f"),this.f=t.getAttribLocation(e,"g")}(t,r);return e.cd(r),t.enableVertexAttribArray(n.l),t.vertexAttribPointer(n.l,2,5126,!1,28,0),t.enableVertexAttribArray(n.b),t.vertexAttribPointer(n.b,2,5126,!1,28,8),t.enableVertexAttribArray(n.s),t.vertexAttribPointer(n.s,2,5126,!1,28,16),t.enableVertexAttribArray(n.f),t.vertexAttribPointer(n.f,1,5126,!1,28,24),t.uniform2fv(n.T,i),t.uniform1f(n.qa,o),n},t.Cf=function(t,e){t.disableVertexAttribArray(e.l),t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.s),t.disableVertexAttribArray(e.f)},t.Od=function(t,e,i,o){var r=t.getParameter(t.DEPTH_FUNC),n=t.getParameter(t.DEPTH_WRITEMASK);if(o||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),st(i)){var s=this.g[this.g.length-1];for(i=this.l.length-1;0<=i;--i){var a=this.l[i],l=this.o[i];_l(this,t,l[0],l[1],l[2]),Gh(t,e,a,s),t.clear(t.DEPTH_BUFFER_BIT),s=a}}else{var p=this.g.length-2;for(l=s=this.g[p+1],a=this.l.length-1;0<=a;--a){var u=this.o[a];for(_l(this,t,u[0],u[1],u[2]),u=this.l[a];0<=p&&this.g[p]>=u;){var c=this.g[p],f=this.i[p];i[f=h(f).toString()]&&(s!==l&&(Gh(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),l=c),p--,s=c}s!==l&&(Gh(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),s=l=u}}o||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(n),t.depthFunc(r))},t.Ee=function(t,e,i,o,r){var n,s,a=this.g.length-2,l=this.g[a+1];for(n=this.l.length-1;0<=n;--n){var p=this.o[n];for(_l(this,t,p[0],p[1],p[2]),s=this.l[n];0<=a&&this.g[a]>=s;){p=this.g[a];var u=this.i[a];if(void 0===i[h(u).toString()]&&u.U()&&(void 0===r||Q(r,u.U().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Gh(t,e,p,l),l=o(u)))return l;a--,l=p}}},t.Oa=function(t,e){t=e.f,this.c.lineCap=void 0!==t?t:"round",t=e.g,this.c.lineDash=t||Bh,t=e.i,this.c.lineDashOffset=t||0,t=e.j,this.c.lineJoin=void 0!==t?t:"round",t=(t=e.a)instanceof CanvasGradient||t instanceof CanvasPattern?Vh:ms(t).map(function(t,e){return 3!=e?t/255:t})||Vh;var i=e.c;i=void 0!==i?i:1,e=void 0!==(e=e.l)?e:10,this.c.strokeColor&&qt(this.c.strokeColor,t)&&this.c.lineWidth===i&&this.c.miterLimit===e||(this.c.u=!0,this.c.strokeColor=t,this.c.lineWidth=i,this.c.miterLimit=e,this.o.push([t,i,e]))};var bl=3,xl=5,El=7,Sl=11,Tl=13,wl=17,Cl=19,Rl=23,Pl=new Oh("precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),Il=new Fh("attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}");function Ml(){this.b=this.a=this.g=void 0,this.c=0}function Ll(t){var e=t.b;if(e){var i=e.next,o=e.Eb;i&&(i.Eb=o),o&&(o.next=i),t.b=i||o,t.g===t.a?(t.b=void 0,t.g=void 0,t.a=void 0):t.g===e?t.g=t.b:t.a===e&&(t.a=o?t.b.Eb:t.b),t.c--}}function Al(t){if(t.b=t.g,t.b)return t.b.data}function Ol(t){if(t.b&&t.b.next)return t.b=t.b.next,t.b.data}function Fl(t){if(t.b&&t.b.next)return t.b.next.data}function Nl(t){if(t.b&&t.b.Eb)return t.b=t.b.Eb,t.b.data}function Dl(t){if(t.b&&t.b.Eb)return t.b.Eb.data}function jl(t){if(t.b)return t.b.data}function kl(){this.a=ra.Jc(void 0),this.b={}}function Gl(t,e,i){var o=t.b[h(i)];k([o.fa,o.ea,o.la,o.ka],e)||(t.remove(i),t.Ca(e,i))}function Ul(t){return t.a.all().map(function(t){return t.value})}function Bl(t,e){return t.a.search({fa:e[0],ea:e[1],la:e[2],ka:e[3]}).map(function(t){return t.value})}function Vl(t,e,i,o){return Wl(Bl(t,e),i,o)}function Wl(t,e,i){for(var o,r=0,n=t.length;r<n&&!(o=e.call(i,t[r]));r++);return o}function Xl(t,e){kh.call(this,t,e),this.f=new fl(t,e),this.v=null,this.o=[],this.c=[],this.l={fillColor:null,u:!1}}function Yl(t,e,i,o){var r=new Ml,n=new kl;if(zl(t,e,o,r,n,!0),e=Kl(r),i.length){var s,a=[],h=0;for(s=i.length;h<s;++h){var l={list:new Ml,Ec:void 0,gh:new kl};a.push(l),zl(t,i[h],o,l.list,l.gh,!1),Hl(l.list,l.gh,!0),l.Ec=Kl(l.list)}for(a.sort(function(t,e){return e.Ec[0]===t.Ec[0]?t.Ec[1]-e.Ec[1]:e.Ec[0]-t.Ec[0]}),h=0;h<a.length;++h){s=o=Al(i=a[h].list);do{if(op(s,n).length){var p=!0;break}s=Ol(i)}while(o!==s);!p&&$l(i,a[h].Ec[0],r,e[0],n)&&(n.concat(a[h].gh),Hl(r,n,!1))}}else Hl(r,n,!1);!function t(e,i,o){for(var r=!1,n=Jl(i,o);3<i.c;)if(n){if(!ql(e,i,o,n,r)&&!Hl(i,o,r)&&!Zl(e,i,o,!0))break}else if(!ql(e,i,o,n,r)&&!Hl(i,o,r)&&!Zl(e,i,o)){if(!(n=Jl(i,o))){n=e,s=a=Al(r=i);do{if((h=op(s,o)).length){for(a=h[0],h=rp(s.Z,s.X,a.Z,a.X),h=Ql(n,h[0],h[1],n.a.length/2),l=new Ml,p=new kl,tp(h,s.X,l,p),s.X=h,Gl(o,[Math.min(s.Z.x,h.x),Math.min(s.Z.y,h.y),Math.max(s.Z.x,h.x),Math.max(s.Z.y,h.y)],s),s=Ol(r);s!==a;)tp(s.Z,s.X,l,p),o.remove(s),Ll(r),s=jl(r);tp(a.Z,h,l,p),a.Z=h,Gl(o,[Math.min(a.X.x,h.x),Math.min(a.X.y,h.y),Math.max(a.X.x,h.x),Math.max(a.X.y,h.y)],a),Hl(r,o,!1),t(n,r,o),Hl(l,p,!1),t(n,l,p);break}s=Ol(r)}while(s!==a);break}var s=2*(r=i).c,a=Array(s),h=Al(r),l=h,p=0;do{a[p++]=l.Z.x,a[p++]=l.Z.y,l=Ol(r)}while(l!==h);r=!er(a,0,s,2),Hl(i,o,r)}3===i.c&&(n=e.b.length,e.b[n++]=Dl(i).Z.qb,e.b[n++]=jl(i).Z.qb,e.b[n++]=Fl(i).Z.qb)}(t,r,n)}function zl(t,e,i,o,r,n){var s,a=t.a.length/2,h=[],l=[];if(n===er(e,0,e.length,i)){var p=n=Ql(t,e[0],e[1],a++),u=i;for(s=e.length;u<s;u+=i){var c=Ql(t,e[u],e[u+1],a++);l.push(tp(p,c,o)),h.push([Math.min(p.x,c.x),Math.min(p.y,c.y),Math.max(p.x,c.x),Math.max(p.y,c.y)]),p=c}}else for(p=n=Ql(t,e[u=e.length-i],e[u+1],a++),u-=i,s=0;u>=s;u-=i)c=Ql(t,e[u],e[u+1],a++),l.push(tp(p,c,o)),h.push([Math.min(p.x,c.x),Math.min(p.y,c.y),Math.max(p.x,c.x),Math.max(p.y,c.y)]),p=c;l.push(tp(c,n,o)),h.push([Math.min(p.x,c.x),Math.min(p.y,c.y),Math.max(p.x,c.x),Math.max(p.y,c.y)]),r.load(h,l)}function Kl(t){var e=Al(t),i=e,o=[i.Z.x,i.Z.y];do{(i=Ol(t)).Z.x>o[0]&&(o=[i.Z.x,i.Z.y])}while(i!==e);return o}function Hl(t,e,i){var o=Al(t),r=o,n=Ol(t),s=!1;do{var a=i?Wh(n.X.x,n.X.y,r.X.x,r.X.y,r.Z.x,r.Z.y):Wh(r.Z.x,r.Z.y,r.X.x,r.X.y,n.X.x,n.X.y);void 0===a?(ep(r,n,t,e),s=!0,n===o&&(o=Fl(t)),n=r,Nl(t)):r.X.Kb!==a&&(r.X.Kb=a,s=!0),r=n,n=Ol(t)}while(r!==o);return s}function $l(t,e,i,o,r){for(var n=Al(t);n.X.x!==e;)n=Ol(t);var s,a=1/0,h=op({Z:e=n.X,X:o={x:o,y:e.y,qb:-1}},r,!0),l=0;for(s=h.length;l<s;++l){var p=h[l],u=rp(e,o,p.Z,p.X,!0),c=Math.abs(e.x-u[0]);if(c<a&&void 0!==Wh(e.x,e.y,p.Z.x,p.Z.y,p.X.x,p.X.y)){a=c;var f={x:u[0],y:u[1],qb:-1};n=p}}if(1/0===a)return!1;if(h=n.X,0<a&&(n=ip(e,f,n.X,r)).length)for(f=1/0,l=0,s=n.length;l<s;++l)a=n[l],((p=Math.atan2(e.y-a.y,o.x-a.x))<f||p===f&&a.x<h.x)&&(f=p,h=a);for(n=Al(i);n.X.x!==h.x||n.X.y!==h.y;)n=Ol(i);return o={x:e.x,y:e.y,qb:e.qb,Kb:void 0},l={x:n.X.x,y:n.X.y,qb:n.X.qb,Kb:void 0},Fl(t).Z=o,tp(e,n.X,t,r),tp(l,o,t,r),n.X=l,t.b&&(t.g=t.b,t.a=t.b.Eb),i.concat(t),!0}function ql(t,e,i,o,r){var n=t.b.length,s=Al(e),a=Dl(e),h=s,l=Ol(e),p=Fl(e),u=!1;do{var c=h.Z,f=h.X,d=l.X;if(!1===f.Kb){var y=o?0===ip(c,f,d,i,!0).length:r?np(p.X,d,f,c,a.Z):np(a.Z,c,f,d,p.X);!o&&0!==op({Z:c,X:d},i).length||!y||!o&&!1!==c.Kb&&!1!==d.Kb&&er([a.Z.x,a.Z.y,c.x,c.y,f.x,f.y,d.x,d.y,p.X.x,p.X.y],0,10,2)!==!r||(t.b[n++]=c.qb,t.b[n++]=f.qb,t.b[n++]=d.qb,ep(h,l,e,i),l===s&&(s=p),u=!0)}a=Dl(e),h=jl(e),l=Ol(e),p=Fl(e)}while(h!==s&&3<e.c);return u}function Zl(t,e,i,o){var r=Al(e);Ol(e);var n=r,s=Ol(e),a=!1;do{var h=rp(n.Z,n.X,s.Z,s.X,o);if(h){a=t.b.length;var l=t.a.length/2,p=Nl(e);Ll(e),i.remove(p);var u=p===r;if(o?(h[0]===n.Z.x&&h[1]===n.Z.y?(Nl(e),h=n.Z,s.Z=h,i.remove(n),u=u||n===r):(h=s.X,n.X=h,i.remove(s),u=u||s===r),Ll(e)):(h=Ql(t,h[0],h[1],l),n.X=h,s.Z=h,Gl(i,[Math.min(n.Z.x,n.X.x),Math.min(n.Z.y,n.X.y),Math.max(n.Z.x,n.X.x),Math.max(n.Z.y,n.X.y)],n),Gl(i,[Math.min(s.Z.x,s.X.x),Math.min(s.Z.y,s.X.y),Math.max(s.Z.x,s.X.x),Math.max(s.Z.y,s.X.y)],s)),t.b[a++]=p.Z.qb,t.b[a++]=p.X.qb,t.b[a++]=h.qb,a=!0,u)break}n=Dl(e),s=Ol(e)}while(n!==r);return a}function Jl(t,e){var i=Al(t),o=i;do{if(op(o,e).length)return!1;o=Ol(t)}while(o!==i);return!0}function Ql(t,e,i,o){var r=t.a.length;return t.a[r++]=e,t.a[r++]=i,{x:e,y:i,qb:o,Kb:void 0}}function tp(t,e,i,o){var r={Z:t,X:e},n={Eb:void 0,next:void 0,data:r},s=i.b;if(s){var a=s.next;n.Eb=s,n.next=a,s.next=n,a&&(a.Eb=n),s===i.a&&(i.a=n)}else i.g=n,i.a=n,n.next=n,n.Eb=n;return i.b=n,i.c++,o&&o.Ca([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],r),r}function ep(t,e,i,o){jl(i)===e&&(Ll(i),t.X=e.X,o.remove(e),Gl(o,[Math.min(t.Z.x,t.X.x),Math.min(t.Z.y,t.X.y),Math.max(t.Z.x,t.X.x),Math.max(t.Z.y,t.X.y)],t))}function ip(t,e,i,o,r){var n,s,a=[],h=Bl(o,[Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]);for(o=0,n=h.length;o<n;++o)for(s in h[o]){var l=h[o][s];"object"!=typeof l||r&&!l.Kb||l.x===t.x&&l.y===t.y||l.x===e.x&&l.y===e.y||l.x===i.x&&l.y===i.y||-1!==a.indexOf(l)||!$o([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,l.x,l.y)||a.push(l)}return a}function op(t,e,i){var o,r=t.Z,n=t.X,s=[],a=0;for(o=(e=Bl(e,[Math.min(r.x,n.x),Math.min(r.y,n.y),Math.max(r.x,n.x),Math.max(r.y,n.y)])).length;a<o;++a){var h=e[a];t!==h&&(i||h.Z!==n||h.X!==r)&&rp(r,n,h.Z,h.X,i)&&s.push(h)}return s}function rp(t,e,i,o,r){var n=(o.y-i.y)*(e.x-t.x)-(o.x-i.x)*(e.y-t.y);if(0!==n&&(o=((o.x-i.x)*(t.y-i.y)-(o.y-i.y)*(t.x-i.x))/n,i=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/n,!r&&o>Xh&&o<1-Xh&&i>Xh&&i<1-Xh||r&&0<=o&&1>=o&&0<=i&&1>=i))return[t.x+o*(e.x-t.x),t.y+o*(e.y-t.y)]}function np(t,e,i,o,r){if(void 0===e.Kb||void 0===o.Kb)return!1;var n=(i.x-o.x)*(e.y-o.y)>(i.y-o.y)*(e.x-o.x);return r=(r.x-o.x)*(e.y-o.y)<(r.y-o.y)*(e.x-o.x),t=(t.x-e.x)*(o.y-e.y)>(t.y-e.y)*(o.x-e.x),i=(i.x-e.x)*(o.y-e.y)<(i.y-e.y)*(o.x-e.x),e=e.Kb?i||t:i&&t,(o.Kb?r||n:r&&n)&&e}function sp(t,e){this.b=e,this.a=[{x:0,y:0,width:t,height:t}],this.c={},this.g=mr(t,t),this.i=this.g.canvas}function ap(t,e,i,o){e=[e,1],0<i.width&&0<i.height&&e.push(i),0<o.width&&0<o.height&&e.push(o),t.a.splice.apply(t.a,e)}function hp(t){t=t||{},this.a=void 0!==t.initialSize?t.initialSize:256,this.g=void 0!==t.maxSize?t.maxSize:void 0!==e?e:2048,this.b=void 0!==t.space?t.space:1,this.f=[new sp(this.a,this.b)],this.c=this.a,this.i=[new sp(this.c,this.b)]}function lp(t,e){var i,o=0;for(i=t.length;o<i;++o){var r=t[o];if(r=r.get(e))return r}return null}function pp(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,Bm:e.image}}function up(t,e,i,o,r,n,s){var a,h=e?t.i:t.f,l=0;for(a=h.length;l<a;++l){var p=h[l];if(p=p.add(i,o,r,n,s))return p;p||l!==a-1||(e?(p=Math.min(2*t.c,t.g),t.c=p):(p=Math.min(2*t.a,t.g),t.a=p),p=new sp(p,t.b),h.push(p),++a)}return null}function cp(t,e){sl.call(this,t,e),this.c=[],this.ua=[],this.Ub=mr(0,0).canvas,this.N={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.ta="",this.ca=this.$=this.ra=this.ab=void 0,this.B={},this.l=void 0,this.opacity=this.scale=1}function fp(t,e){if(1===e.length){var i=t.l,o=t.N;(t=t.Ub.getContext("2d")).font=o.font,t=Math.ceil(t.measureText(e).width*o.scale),i.Bh.add(e,t,i.height,function(t,i,r){t.font=o.font,t.fillStyle=o.fillColor,t.strokeStyle=o.strokeColor,t.lineWidth=o.lineWidth,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.textAlign="left",t.textBaseline="top",Ze&&o.lineDash&&(t.setLineDash(o.lineDash),t.lineDashOffset=o.lineDashOffset),1!==o.scale&&t.setTransform(o.scale,0,0,o.scale,0,0),o.strokeColor&&t.strokeText(e,i,r),o.fillColor&&t.fillText(e,i,r)})&&(i.width[e]=t)}}function dp(t,e,i){this.c=e,this.i=t,this.g=i,this.a={}}function yp(t,e){var i,o=[];for(i in t.a){var r,n=t.a[i];for(r in n)o.push(n[r].Db(e))}return function(){for(var t,e=o.length,i=0;i<e;i++)t=o[i].apply(this,arguments);return t}}function gp(t,e,i,o,r,n,s,a,h,l,p){var u,c,f=vp,d=Object.keys(t.a).map(Number);d.sort(function(t,e){return e-t});var y=0;for(u=d.length;y<u;++y){var g=t.a[d[y].toString()];for(c=aa.length-1;0<=c;--c){var v=g[aa[c]];if(void 0!==v&&(v=v.Na(e,i,o,r,f,n,s,a,h,l,p)))return v}}}Ml.prototype.concat=function(t){if(t.b){if(this.b){var e=this.b.next;this.b.next=t.g,t.g.Eb=this.b,e.Eb=t.a,t.a.next=e,this.c+=t.c}else this.b=t.b,this.g=t.g,this.a=t.a,this.c=t.c;t.b=void 0,t.g=void 0,t.a=void 0,t.c=0}},(t=kl.prototype).Ca=function(t,e){t={fa:t[0],ea:t[1],la:t[2],ka:t[3],value:e},this.a.Ca(t),this.b[h(e)]=t},t.load=function(t,e){for(var i=Array(e.length),o=0,r=e.length;o<r;o++){var n=t[o],s=e[o];n={fa:n[0],ea:n[1],la:n[2],ka:n[3],value:s},i[o]=n,this.b[h(s)]=n}this.a.load(i)},t.remove=function(t){t=h(t);var e=this.b[t];return delete this.b[t],null!==this.a.remove(e)},t.forEach=function(t,e){return Wl(Ul(this),t,e)},t.clear=function(){this.a.clear(),this.b={}},t.G=function(t){var e=this.a.data;return F(e.fa,e.ea,e.la,e.ka,t)},t.concat=function(t){for(var e in this.a.load(t.a.all()),t.b)this.b[0|e]=t.b[0|e]},s(Xl,kh),(t=Xl.prototype).xc=function(t,e){var i,o,r,n=t.td(),s=t.pa(),a=this.b.length,h=this.f.b.length;t=t.da();var l=o=0;for(i=n.length;l<i;++l){var p=n[l];if(0<p.length){var u=co(t,o,p[0],s,-this.origin[0],-this.origin[1]);if(u.length){var c=[];for(o=1,r=p.length;o<r;++o)if(p[o]!==p[o-1]){var f=co(t,p[o-1],p[o],s,-this.origin[0],-this.origin[1]);c.push(f)}vl(this.f,u,c,s),Yl(this,u,c,s)}}o=p[p.length-1]}this.b.length>a&&(this.g.push(a),this.i.push(e),this.l.u&&(this.c.push(a),this.l.u=!1)),this.f.b.length>h&&ml(this.f,e,h)},t.zc=function(t,e){var i=t.pb(),o=t.pa();if(0<i.length){var r=co(t=t.da().map(Number),0,i[0],o,-this.origin[0],-this.origin[1]);if(r.length){var n,s=[],a=1;for(n=i.length;a<n;++a)if(i[a]!==i[a-1]){var h=co(t,i[a-1],i[a],o,-this.origin[0],-this.origin[1]);s.push(h)}this.g.push(this.b.length),this.i.push(e),this.l.u&&(this.c.push(this.b.length),this.l.u=!1),ml(this.f,e),vl(this.f,r,s,o),Yl(this,r,s,o)}}},t.gb=function(t){this.s=new Yh(this.a),this.j=new Yh(this.b),this.g.push(this.b.length),this.f.gb(t),0===this.c.length&&0<this.o.length&&(this.o=[]),this.b=this.a=null},t.Db=function(t){var e=this.s,i=this.j,o=this.f.Db(t);return function(){Qh(t,e),Qh(t,i),o()}},t.Bf=function(t,e){var i=il(e,Pl,Il);if(this.v)var o=this.v;else this.v=o=new function(t,e){this.g=t.getUniformLocation(e,"b"),this.i=t.getUniformLocation(e,"c"),this.c=t.getUniformLocation(e,"d"),this.C=t.getUniformLocation(e,"e"),this.a=t.getUniformLocation(e,"f"),this.b=t.getAttribLocation(e,"a")}(t,i);return e.cd(i),t.enableVertexAttribArray(o.b),t.vertexAttribPointer(o.b,2,5126,!1,8,0),o},t.Cf=function(t,e){t.disableVertexAttribArray(e.b)},t.Od=function(t,e,i,o){var r=t.getParameter(t.DEPTH_FUNC),n=t.getParameter(t.DEPTH_WRITEMASK);if(o||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),st(i)){var s=this.g[this.g.length-1];for(i=this.c.length-1;0<=i;--i){var a=this.c[i],l=this.o[i];t.uniform4fv(this.v.C,l),Gh(t,e,a,s),s=a}}else{var p=this.g.length-2;for(l=s=this.g[p+1],a=this.c.length-1;0<=a;--a){var u=this.o[a];for(t.uniform4fv(this.v.C,u),u=this.c[a];0<=p&&this.g[p]>=u;){var c=this.g[p],f=this.i[p];i[f=h(f).toString()]&&(s!==l&&(Gh(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),l=c),p--,s=c}s!==l&&(Gh(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),s=l=u}}o||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(n),t.depthFunc(r))},t.Ee=function(t,e,i,o,r){var n,s,a=this.g.length-2,l=this.g[a+1];for(n=this.c.length-1;0<=n;--n){var p=this.o[n];for(t.uniform4fv(this.v.C,p),s=this.c[n];0<=a&&this.g[a]>=s;){p=this.g[a];var u=this.i[a];if(void 0===i[h(u).toString()]&&u.U()&&(void 0===r||Q(r,u.U().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Gh(t,e,p,l),l=o(u)))return l;a--,l=p}}},t.Oa=function(t,e){t=(t=t?t.b:[0,0,0,0])instanceof CanvasGradient||t instanceof CanvasPattern?Uh:ms(t).map(function(t,e){return 3!=e?t/255:t})||Uh,this.l.fillColor&&qt(t,this.l.fillColor)||(this.l.fillColor=t,this.l.u=!0,this.o.push(t)),e?this.f.Oa(null,e):this.f.Oa(null,new rh({color:[0,0,0,0],lineWidth:0}))},sp.prototype.get=function(t){return this.c[t]||null},sp.prototype.add=function(t,e,i,o,r){var n,s=0;for(n=this.a.length;s<n;++s){var a=this.a[s];if(a.width>=e+this.b&&a.height>=i+this.b)return n={offsetX:a.x+this.b,offsetY:a.y+this.b,image:this.i},this.c[t]=n,o.call(r,this.g,a.x+this.b,a.y+this.b),t=s,e+=this.b,o=i+this.b,a.width-e>a.height-o?ap(this,t,i={x:a.x+e,y:a.y,width:a.width-e,height:a.height},e={x:a.x,y:a.y+o,width:e,height:a.height-o}):ap(this,t,i={x:a.x+e,y:a.y,width:a.width-e,height:o},e={x:a.x,y:a.y+o,width:a.width,height:a.height-o}),n}return null},hp.prototype.add=function(t,e,i,o,r,n){return e+this.b>this.g||i+this.b>this.g?null:(o=up(this,!1,t,e,i,o,n))?pp(o,t=up(this,!0,t,e,i,void 0!==r?r:a,n)):null},s(cp,sl),(t=cp.prototype).Wb=function(t,e){if(this.ta){var i=null,o=2,r=2;switch(t.S()){case"Point":case"MultiPoint":o=(i=t.da()).length,r=t.pa();break;case"Circle":i=t.xa();break;case"LineString":i=t.Fe();break;case"MultiLineString":o=(i=t.Ge()).length;break;case"Polygon":i=t.Td();break;case"MultiPolygon":o=(i=Ju(t)).length}this.g.push(this.b.length),this.i.push(e),t=this.l;var n,s,a=function(t,e){var i=t.l,o=e.length*i.height;return[e.map(function(e){var o,r=0,n=0;for(o=e.length;n<o;++n){var s=e[n];i.width[s]||fp(t,s),r+=i.width[s]?i.width[s]:0}return r}).reduce(function(t,e){return Math.max(t,e)}),o]}(this,e=this.ta.split("\n")),l=Math.round(a[0]*this.ab-this.$),p=Math.round(a[1]*this.ra-this.ca),u=this.N.lineWidth/2*this.N.scale;for(a=0,n=e.length;a<n;++a){var c=0,f=t.height*a,d=e[a].split(""),y=0;for(s=d.length;y<s;++y){var g=t.Bh,v=d[y],m=lp(g.f,v);if(m?g=pp(m,g=lp(g.i,v)):g=null,g){m=g.image,this.D=l-c,this.C=p-f,this.T=0===y?g.offsetX-u:g.offsetX,this.O=g.offsetY,this.height=t.height,this.width=0===y||y===d.length-1?t.width[d[y]]+u:t.width[d[y]],this.oa=m.height,this.qa=m.width,0===this.c.length?this.c.push(m):h(g=this.c[this.c.length-1])!=h(m)&&(this.v.push(this.b.length),this.c.push(m)),g=i,v=o;var _=r;for(m=0;m<v;m+=_)al(this,g,v,_)}c+=this.width}}}},t.gb=function(t){var e=t.b;this.v.push(this.b.length),this.o=this.v,this.s=new Yh(this.a),this.j=new Yh(this.b),hl(this.ua,this.c,{},e),this.N={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.ta="",this.ca=this.$=this.ra=this.ab=void 0,this.c=null,this.B={},this.l=void 0,sl.prototype.gb.call(this,t)},t.nb=function(t){var e=this.N,i=t.Fa(),o=t.Ga();if(t&&t.Ka()&&(i||o)){for(var r in i?(i=i.b,e.fillColor=Es(i||Uh)):e.fillColor=null,o?(i=o.a,e.strokeColor=Es(i||Vh),e.lineWidth=o.c||1,e.lineCap=o.f||"round",e.lineDashOffset=o.i||0,e.lineJoin=o.j||"round",e.miterLimit=o.l||10,o=o.g,e.lineDash=o?o.slice():Bh):(e.strokeColor=null,e.lineWidth=0),e.font=t.a||"10px sans-serif",e.scale=t.b||1,this.ta=t.Ka(),o=ha[t.f],i=ha[t.j],this.ab=void 0===o?.5:o,this.ra=void 0===i?.5:i,this.$=t.g||0,this.ca=t.c||0,this.rotateWithView=!!t.l,this.rotation=t.i||0,t=[],e)(e[r]||0===e[r])&&(Array.isArray(e[r])?t=t.concat(e[r]):t.push(e[r]));for(i="",r=0,o=t.length;r<o;++r)i+=t[r];r=i,this.B[r]||((t=this.Ub.getContext("2d")).font=e.font,t=Math.ceil((1.5*t.measureText("M").width+e.lineWidth/2)*e.scale),this.B[r]={Bh:new hp({space:e.lineWidth+1}),width:{},height:t}),this.l=this.B[r]}else this.ta=""},t.ig=function(){return this.ua},t.ag=function(){return this.ua},s(dp,na),(t=dp.prototype).Vb=function(){},t.Ja=function(t,e){var i=void 0!==t?t.toString():"0";return void 0===(t=this.a[i])&&(t={},this.a[i]=t),void 0===(i=t[e])&&(i=new mp[e](this.i,this.c),t[e]=i),i},t.yg=function(){return st(this.a)},t.Na=function(t,e,i,o,r,n,s,a){var h,l,p=Object.keys(this.a).map(Number);p.sort(Yt);var u=0;for(h=p.length;u<h;++u){var c=this.a[p[u].toString()],f=0;for(l=aa.length;f<l;++f){var d=c[aa[f]];void 0!==d&&d.Na(t,e,i,o,r,n,s,a,void 0,!1)}}},t.wa=function(t,e,i,o,r,n,s,a,h,l){var p,u=e.b;return u.bindFramebuffer(u.FRAMEBUFFER,tl(e)),void 0!==this.g&&(p=C(D(t),o*this.g)),gp(this,e,t,o,r,s,a,h,function(t){var e=new Uint8Array(4);if(u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e),0<e[3]&&(t=l(t)))return t},!0,p)};var vp=[1,1],mp={Circle:Kh,Image:ll,LineString:fl,Polygon:Xl,Text:cp};function _p(t,e,i,o,r,n,s){this.b=t,this.g=e,this.c=n,this.i=s,this.l=r,this.j=o,this.f=i,this.a=this.s=this.v=this.o=null}function bp(t,e,i){var o=t.b;(e=e.Ja(0,"Text")).nb(t.a),e.Wb(i,null),e.gb(o),e.Na(t.b,t.g,t.f,t.j,t.l,t.i,1,{},void 0,!1),e.Db(o)()}s(_p,Ss),(t=_p.prototype).Dd=function(t){this.Oa(t.Fa(),t.Ga()),this.Zb(t.Y()),this.nb(t.Ka())},t.Hb=function(t){switch(t.S()){case"Point":this.yc(t,null);break;case"LineString":this.uc(t,null);break;case"Polygon":this.zc(t,null);break;case"MultiPoint":this.wc(t,null);break;case"MultiLineString":this.vc(t,null);break;case"MultiPolygon":this.xc(t,null);break;case"GeometryCollection":this.De(t);break;case"Circle":this.cc(t,null)}},t.Ce=function(t,e){(t=(0,e.cb)(t))&&Q(this.c,t.G())&&(this.Dd(e),this.Hb(t))},t.De=function(t){var e,i=0;for(e=(t=t.a).length;i<e;++i)this.Hb(t[i])},t.yc=function(t,e){var i=this.b,o=new dp(1,this.c),r=o.Ja(0,"Image");r.Zb(this.o),r.yc(t,e),r.gb(i),r.Na(this.b,this.g,this.f,this.j,this.l,this.i,1,{},void 0,!1),r.Db(i)(),this.a&&bp(this,o,t)},t.wc=function(t,e){var i=this.b,o=new dp(1,this.c),r=o.Ja(0,"Image");r.Zb(this.o),r.wc(t,e),r.gb(i),r.Na(this.b,this.g,this.f,this.j,this.l,this.i,1,{},void 0,!1),r.Db(i)(),this.a&&bp(this,o,t)},t.uc=function(t,e){var i=this.b,o=new dp(1,this.c),r=o.Ja(0,"LineString");r.Oa(null,this.s),r.uc(t,e),r.gb(i),r.Na(this.b,this.g,this.f,this.j,this.l,this.i,1,{},void 0,!1),r.Db(i)(),this.a&&bp(this,o,t)},t.vc=function(t,e){var i=this.b,o=new dp(1,this.c),r=o.Ja(0,"LineString");r.Oa(null,this.s),r.vc(t,e),r.gb(i),r.Na(this.b,this.g,this.f,this.j,this.l,this.i,1,{},void 0,!1),r.Db(i)(),this.a&&bp(this,o,t)},t.zc=function(t,e){var i=this.b,o=new dp(1,this.c),r=o.Ja(0,"Polygon");r.Oa(this.v,this.s),r.zc(t,e),r.gb(i),r.Na(this.b,this.g,this.f,this.j,this.l,this.i,1,{},void 0,!1),r.Db(i)(),this.a&&bp(this,o,t)},t.xc=function(t,e){var i=this.b,o=new dp(1,this.c),r=o.Ja(0,"Polygon");r.Oa(this.v,this.s),r.xc(t,e),r.gb(i),r.Na(this.b,this.g,this.f,this.j,this.l,this.i,1,{},void 0,!1),r.Db(i)(),this.a&&bp(this,o,t)},t.cc=function(t,e){var i=this.b,o=new dp(1,this.c),r=o.Ja(0,"Circle");r.Oa(this.v,this.s),r.cc(t,e),r.gb(i),r.Na(this.b,this.g,this.f,this.j,this.l,this.i,1,{},void 0,!1),r.Db(i)(),this.a&&bp(this,o,t)},t.Zb=function(t){this.o=t},t.Oa=function(t,e){this.v=t,this.s=e},t.nb=function(t){this.a=t};var xp=new Oh("precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),Ep=new Fh("varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}");function Sp(t,e){Ls.call(this,e),this.c=t,this.V=new Yh([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.f=this.Mb=null,this.j=void 0,this.v=[1,0,0,1,0,0],this.N=[1,0,0,1,0,0],this.C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.o=null}function Tp(t,e,i,o){if(Re(t=t.a,e)){var r=o.viewState;t.b(new Jn(e,new _p(i,r.center,r.resolution,r.rotation,o.size,o.extent,o.pixelRatio),o,null,i))}}function wp(t,e){Sp.call(this,t,e),this.l=this.i=this.M=null}function Cp(t,e){Ks.call(this,t,e),this.b=document.createElement("CANVAS"),this.b.style.width="100%",this.b.style.height="100%",this.b.style.display="block",this.b.className="ol-unselectable",t.insertBefore(this.b,t.childNodes[0]||null),this.N=this.D=0,this.C=mr(),this.s=!0,this.g=Ve(this.b,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.i=new Zh(this.b,this.g),ve(this.b,"webglcontextlost",this.Co,this),ve(this.b,"webglcontextrestored",this.Do,this),this.a=new Qn,this.o=null,this.j=new Di(function(t){var e=t[1];t=t[2];var i=e[0]-this.o[0];return e=e[1]-this.o[1],65536*Math.log(t)+Math.sqrt(i*i+e*e)/t}.bind(this),function(t){return t[0].lb()}),this.B=function(){if(0!==this.j.b.length){Ui(this.j);var t=ji(this.j);Rp(this,t[0],t[3],t[4])}return!1}.bind(this),this.f=0,Ip(this)}function Rp(t,e,i,o){var r=t.g,n=e.lb();if(t.a.a.hasOwnProperty(n))t=t.a.get(n),r.bindTexture(3553,t.Mb),9729!=t.hi&&(r.texParameteri(3553,10240,9729),t.hi=9729),9729!=t.ji&&(r.texParameteri(3553,10241,9729),t.ji=9729);else{var s=r.createTexture();if(r.bindTexture(3553,s),0<o){var a=t.C.canvas,h=t.C;t.D!==i[0]||t.N!==i[1]?(a.width=i[0],a.height=i[1],t.D=i[0],t.N=i[1]):h.clearRect(0,0,i[0],i[1]),h.drawImage(e.Y(),o,o,i[0],i[1],0,0,i[0],i[1]),r.texImage2D(3553,0,6408,6408,5121,a)}else r.texImage2D(3553,0,6408,6408,5121,e.Y());r.texParameteri(3553,10240,9729),r.texParameteri(3553,10241,9729),r.texParameteri(3553,10242,33071),r.texParameteri(3553,10243,33071),t.a.set(n,{Mb:s,hi:9729,ji:9729})}}function Pp(t,e,i){var o=t.l;if(Re(o,e)){t=t.i;var r=i.viewState;o.b(new Jn(e,new _p(t,r.center,r.resolution,r.rotation,i.size,i.extent,i.pixelRatio),i,null,t))}}function Ip(t){(t=t.g).activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)}s(Sp,Ls),Sp.prototype.Zi=function(t,e,i){Tp(this,"precompose",i,t),Jh(i,34962,this.V);var o=i.b,r=il(i,xp,Ep);if(this.o)var n=this.o;else this.o=n=new function(t,e){this.f=t.getUniformLocation(e,"d"),this.c=t.getUniformLocation(e,"e"),this.g=t.getUniformLocation(e,"f"),this.i=t.getUniformLocation(e,"g"),this.b=t.getAttribLocation(e,"b"),this.a=t.getAttribLocation(e,"c")}(o,r);i.cd(r)&&(o.enableVertexAttribArray(n.b),o.vertexAttribPointer(n.b,2,5126,!1,16,0),o.enableVertexAttribArray(n.a),o.vertexAttribPointer(n.a,2,5126,!1,16,8),o.uniform1i(n.i,0)),o.uniformMatrix4fv(n.f,!1,jh(this.C,this.v)),o.uniformMatrix4fv(n.c,!1,jh(this.C,this.N)),o.uniform1f(n.g,e.opacity),o.bindTexture(3553,this.Mb),o.drawArrays(5,0,4),Tp(this,"postcompose",i,t)},Sp.prototype.Ag=function(){this.f=this.Mb=null,this.j=void 0},s(wp,Sp),wp.handles=function(t,e){return"webgl"===t&&"IMAGE"===e.S()},wp.create=function(t,e){return new wp(t,e)},wp.prototype.wa=function(t,e,i,o,r){var n=this.a;return n.ha().wa(t,e.viewState.resolution,e.viewState.rotation,i,e.skippedFeatureUids,function(t){return o.call(r,t,n)})},wp.prototype.Bg=function(t,e){var i=this.c.g,o=t.pixelRatio,r=t.viewState,n=r.center,s=r.resolution,a=r.rotation,h=this.M,l=this.Mb,p=this.a.ha(),u=t.viewHints,c=t.extent;return void 0!==e.extent&&(c=$(c,e.extent)),u[0]||u[1]||tt(c)||(e=p.Y(c,s,o,r.projection))&&As(this,e)&&(h=e,l=function(t,e){return e=e.Y(),nl(t.c.g,e)}(this,e),this.Mb&&t.postRenderFunctions.push(function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,i,this.Mb))),h&&(function(t,e,i,o,r,n,s,a){e*=n,i*=n,yo(t=t.N),xo(t,2*o/e,2*o/i),bo(t,-s),Eo(t,a[0]-r[0],a[1]-r[1]),xo(t,(a[2]-a[0])/2,(a[3]-a[1])/2),Eo(t,1,1)}(this,(i=this.c.i.j).width,i.height,o,n,s,a,h.G()),this.l=null,yo(o=this.v),xo(o,1,-1),Eo(o,0,-1),this.M=h,this.Mb=l,Ns(t,p)),!!h},wp.prototype.cf=function(t,e){return void 0!==this.wa(t,e,0,lo,this)},wp.prototype.zg=function(t,e,i,o){if(this.M&&this.M.Y())if(this.a.ha().wa!==a){var r=_o(e.pixelToCoordinateTransform,t.slice());if(this.wa(r,e,0,lo,this))return i.call(o,this.a,null)}else{if(r=[this.M.Y().width,this.M.Y().height],!this.l){var n=e.size;Eo(e=[1,0,0,1,0,0],-1,-1),xo(e,2/n[0],2/n[1]),Eo(e,0,n[1]),xo(e,1,-1),n=To(this.N.slice());var s=[1,0,0,1,0,0];Eo(s,0,r[1]),xo(s,1,-1),xo(s,r[0]/2,r[1]/2),Eo(s,1,1),go(s,n),go(s,e),this.l=s}if(!(0>(t=_o(this.l,t.slice()))[0]||t[0]>r[0]||0>t[1]||t[1]>r[1])&&(this.i||(this.i=mr(1,1)),this.i.clearRect(0,0,1,1),this.i.drawImage(this.M.Y(),t[0],t[1],1,1,0,0,1,1),0<(r=this.i.getImageData(0,0,1,1).data)[3]))return i.call(o,this.a,r)}},s(Cp,Ks),Cp.handles=function(t){return We&&"webgl"===t},Cp.create=function(t,e){return new Cp(t,e)},(t=Cp.prototype).ia=function(){var t=this.g;t.isContextLost()||this.a.forEach(function(e){e&&t.deleteTexture(e.Mb)}),Se(this.i),Ks.prototype.ia.call(this)},t.Yk=function(t,e){t=this.g;for(var i;1024<this.a.i-this.f;){if(i=this.a.g.Pc)t.deleteTexture(i.Mb);else{if(+this.a.g.jc==e.index)break;--this.f}this.a.pop()}},t.S=function(){return"webgl"},t.Co=function(t){for(var e in t.preventDefault(),this.a.clear(),this.f=0,t=this.c)t[e].Ag()},t.Do=function(){Ip(this),this.l.render()},t.bh=function(t){var e=this.i,i=this.g;if(i.isContextLost())return!1;if(!t)return this.s&&(this.b.style.display="none",this.s=!1),!1;this.o=t.focus,this.a.set((-t.index).toString(),null),++this.f,Pp(this,"precompose",t);var o=[],r=t.layerStatesArray;Zt(r);var n,s=t.viewState.resolution,a=0;for(n=r.length;a<n;++a){var h=r[a];if(Dr(h,s)&&"ready"==h.Vj){var l=qs(this,h.layer);l.Bg(t,h,e)&&o.push(h)}}for(r=t.size[0]*t.pixelRatio,s=t.size[1]*t.pixelRatio,this.b.width==r&&this.b.height==s||(this.b.width=r,this.b.height=s),i.bindFramebuffer(36160,null),i.clearColor(0,0,0,0),i.clear(16384),i.enable(3042),i.viewport(0,0,this.b.width,this.b.height),a=0,n=o.length;a<n;++a)(l=qs(this,(h=o[a]).layer)).Zi(t,h,e);this.s||(this.b.style.display="",this.s=!0),Hs(t),1024<this.a.i-this.f&&t.postRenderFunctions.push(this.Yk.bind(this)),0!==this.j.b.length&&(t.postRenderFunctions.push(this.B),t.animate=!0),Pp(this,"postcompose",t),Js(this,t),t.postRenderFunctions.push($s)},t.wa=function(t,e,i,o,r,n,s){if(this.g.isContextLost())return!1;var a,h=e.viewState,l=e.layerStatesArray;for(a=l.length-1;0<=a;--a){var p=l[a],u=p.layer;if(Dr(p,h.resolution)&&n.call(s,u)&&(p=qs(this,u).wa(t,e,i,o,r)))return p}},t.Ui=function(t,e,i,o,r){if(i=!1,this.g.isContextLost())return!1;var n,s=e.viewState,a=e.layerStatesArray;for(n=a.length-1;0<=n;--n){var h=a[n],l=h.layer;if(Dr(h,s.resolution)&&o.call(r,l)&&(i=qs(this,l).cf(t,e)))return!0}return i},t.Ti=function(t,e,i,o,r){if(this.g.isContextLost())return!1;var n,s=e.viewState,a=e.layerStatesArray;for(n=a.length-1;0<=n;--n){var h=a[n],l=h.layer;if(Dr(h,s.resolution)&&r.call(o,l)&&(h=qs(this,l).zg(t,e,i,o)))return h}};var Mp=new Oh("precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),Lp=new Fh("varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}");function Ap(t,e){Sp.call(this,t,e),this.T=Mp,this.ca=Lp,this.i=null,this.B=new Yh([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.D=this.l=null,this.s=-1,this.O=[0,0]}function Op(t,e){Sp.call(this,t,e),this.s=!1,this.O=-1,this.T=NaN,this.D=[1/0,1/0,-1/0,-1/0],this.l=this.i=this.B=null}function Fp(t){(t=ot({},t)).controls||(t.controls=Wr()),t.interactions||(t.interactions=$n()),Ir.call(this,t)}function Np(t){Ie.call(this),this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.autoPanAnimation=t.autoPanAnimation||{},this.autoPanMargin=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.a={ze:"",Se:"",xf:"",Ef:"",visible:!0},this.c=null,ve(this,Le(Gp),this.am,this),ve(this,Le(Up),this.km,this),ve(this,Le(Bp),this.om,this),ve(this,Le(Vp),this.qm,this),ve(this,Le(Wp),this.rm,this),void 0!==t.element&&this.Hj(t.element),this.Mj(void 0!==t.offset?t.offset:[0,0]),this.Pj(void 0!==t.positioning?t.positioning:"top-left"),void 0!==t.position&&this.We(t.position)}function Dp(t,e){var i=t.getBoundingClientRect();return[t=i.left+window.pageXOffset,i=i.top+window.pageYOffset,t+e[0],i+e[1]]}function jp(t,e){t.a.visible!==e&&(t.element.style.display=e?"":"none",t.a.visible=e)}function kp(t){var e=t.Ve(),i=t.pi();if(e&&e.c&&i){i=e.Ia(i);var o=e.Cb();e=t.element.style;var r=t.Xh(),n=t.Yh();jp(t,!0);var s=r[0];r=r[1],"bottom-right"==n||"center-right"==n||"top-right"==n?(""!==t.a.Se&&(t.a.Se=e.left=""),s=Math.round(o[0]-i[0]-s)+"px",t.a.xf!=s&&(t.a.xf=e.right=s)):(""!==t.a.xf&&(t.a.xf=e.right=""),"bottom-center"!=n&&"center-center"!=n&&"top-center"!=n||(s-=t.element.offsetWidth/2),s=Math.round(i[0]+s)+"px",t.a.Se!=s&&(t.a.Se=e.left=s)),"bottom-left"==n||"bottom-center"==n||"bottom-right"==n?(""!==t.a.Ef&&(t.a.Ef=e.top=""),i=Math.round(o[1]-i[1]-r)+"px",t.a.ze!=i&&(t.a.ze=e.bottom=i)):(""!==t.a.ze&&(t.a.ze=e.bottom=""),"center-left"!=n&&"center-center"!=n&&"center-right"!=n||(r-=t.element.offsetHeight/2),i=Math.round(i[1]+r)+"px",t.a.Ef!=i&&(t.a.Ef=e.top=i))}else jp(t,!1)}s(Ap,Sp),Ap.handles=function(t,e){return"webgl"===t&&"TILE"===e.S()},Ap.create=function(t,e){return new Ap(t,e)},(t=Ap.prototype).ia=function(){Qh(this.c.i,this.B),Sp.prototype.ia.call(this)},t.Rf=function(t,e,i){var o=this.c;return function(r,n){return xb(t,e,r,n,function(t){var e=o.a.a.hasOwnProperty(t.lb());return e&&(i[r]||(i[r]={}),i[r][t.ya.toString()]=t),e})}},t.Ag=function(){Sp.prototype.Ag.call(this),this.i=null},t.Bg=function(t,e,i){var o=this.c,r=i.b,n=t.viewState,s=n.projection,a=this.a,h=a.ha(),l=h.eb(s),p=l.Dc(n.resolution),c=l.Ta(p),f=h.Zd(p,t.pixelRatio,s),y=f[0]/T(l.Za(p),this.O)[0],g=c/y,v=h.Xc(y)*h.Zf(s),m=n.center,_=t.extent,b=re(l,_,p);if(this.l&&function(t,e){return t.fa==e.fa&&t.ea==e.ea&&t.la==e.la&&t.ka==e.ka}(this.l,b)&&this.s==h.g)g=this.D;else{var x=[b.la-b.fa+1,b.ka-b.ea+1],E=function(t){return d(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}(Math.max(x[0]*f[0],x[1]*f[1]));x=g*E;var S=l.Ic(p),w=S[0]+b.fa*f[0]*g;g=[w,g=S[1]+b.ea*f[1]*g,w+x,g+x],function(t,e,i){var o=t.c.g;if(void 0===t.j||t.j!=i){e.postRenderFunctions.push(function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,o,t.f,t.Mb)),e=rl(o,i,i);var r=o.createFramebuffer();o.bindFramebuffer(36160,r),o.framebufferTexture2D(36160,36064,3553,e,0),t.Mb=e,t.f=r,t.j=i}else o.bindFramebuffer(36160,t.f)}(this,t,E),r.viewport(0,0,E,E),r.clearColor(0,0,0,0),r.clear(16384),r.disable(3042),E=il(i,this.T,this.ca),i.cd(E),this.i||(this.i=new function(t,e){this.c=t.getUniformLocation(e,"d"),this.g=t.getUniformLocation(e,"e"),this.b=t.getAttribLocation(e,"b"),this.a=t.getAttribLocation(e,"c")}(r,E)),Jh(i,34962,this.B),r.enableVertexAttribArray(this.i.b),r.vertexAttribPointer(this.i.b,2,5126,!1,16,0),r.enableVertexAttribArray(this.i.a),r.vertexAttribPointer(this.i.a,2,5126,!1,16,8),r.uniform1i(this.i.g,0),(i={})[p]={};var C=this.Rf(h,s,i),R=a.i();E=!0,w=[1/0,1/0,-1/0,-1/0];var P,I,M,L=new u(0,0,0,0);for(P=b.fa;P<=b.la;++P)for(I=b.ea;I<=b.ka;++I){if(S=h.ad(p,P,I,y,s),void 0!==e.extent){var A=l.Ma(S.ya,w);if(!Q(A,e.extent))continue}if((A=2==(A=S.getState())||4==A||3==A&&!R)||(S=wh(S)),2==(A=S.getState())){if(o.a.a.hasOwnProperty(S.lb())){i[p][S.ya.toString()]=S;continue}}else if(4==A||3==A&&!R)continue;E=!1,(A=ie(l,S.ya,C,L,w))||(S=oe(l,S.ya,L,w))&&C(p+1,S)}for((e=Object.keys(i).map(Number)).sort(Yt),C=new Float32Array(4),R=0,L=e.length;R<L;++R)for(M in P=i[e[R]])S=P[M],A=l.Ma(S.ya,w),C[0]=2*(A[2]-A[0])/x,C[1]=2*(A[3]-A[1])/x,C[2]=2*(A[0]-g[0])/x-1,C[3]=2*(A[1]-g[1])/x-1,r.uniform4fv(this.i.c,C),Rp(o,S,f,v*y),r.drawArrays(5,0,4);E?(this.l=b,this.D=g,this.s=h.g):(this.D=this.l=null,this.s=-1,t.animate=!0)}Ds(t.usedTiles,h,p,b);var O=o.j;return js(t,h,l,y,s,_,p,a.c(),function(t){2!=t.getState()||o.a.a.hasOwnProperty(t.lb())||t.lb()in O.a||O.i([t,ne(l,t.ya),l.Ta(t.ya[0]),f,v*y])},this),Fs(t,h),Ns(t,h),yo(r=this.v),Eo(r,(Math.round(m[0]/c)*c-g[0])/(g[2]-g[0]),(Math.round(m[1]/c)*c-g[1])/(g[3]-g[1])),0!==n.rotation&&bo(r,n.rotation),xo(r,t.size[0]*n.resolution/(g[2]-g[0]),t.size[1]*n.resolution/(g[3]-g[1])),Eo(r,-.5,-.5),!0},t.zg=function(t,e,i,o){if(this.f){t=[(t=_o(this.v,[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]].slice()))[0]*this.j,t[1]*this.j],(e=this.c.i.b).bindFramebuffer(e.FRAMEBUFFER,this.f);var r=new Uint8Array(4);if(e.readPixels(t[0],t[1],1,1,e.RGBA,e.UNSIGNED_BYTE,r),0<r[3])return i.call(o,this.a,r)}},s(Op,Sp),Op.handles=function(t,e){return"webgl"===t&&"VECTOR"===e.S()},Op.create=function(t,e){return new Op(t,e)},(t=Op.prototype).Zi=function(t,e,i){this.l=e;var o=t.viewState,r=this.i,n=t.size,s=t.pixelRatio,a=this.c.g;r&&!r.yg()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,n[0]*s,n[1]*s),r.Na(i,o.center,o.resolution,o.rotation,n,s,e.opacity,e.Te?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},t.ia=function(){var t=this.i;t&&(yp(t,this.c.i)(),this.i=null),Sp.prototype.ia.call(this)},t.wa=function(t,e,i,o,r){if(this.i&&this.l){i=e.viewState;var n=this.a,s={};return this.i.wa(t,this.c.i,i.center,i.resolution,i.rotation,e.size,e.pixelRatio,this.l.opacity,{},function(t){var e=h(t).toString();if(!(e in s))return s[e]=!0,o.call(r,t,n)})}},t.cf=function(t,e){if(this.i&&this.l){var i=e.viewState;return function(t,e,i,o,r,n,s,a){var h=i.b;return h.bindFramebuffer(h.FRAMEBUFFER,tl(i)),void 0!==gp(t,i,e,o,r,n,s,a,function(){var t=new Uint8Array(4);return h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,t),0<t[3]},!1)}(this.i,t,this.c.i,i.resolution,i.rotation,e.pixelRatio,this.l.opacity,e.skippedFeatureUids)}return!1},t.zg=function(t,e,i,o){if(t=_o(e.pixelToCoordinateTransform,t.slice()),this.cf(t,e))return i.call(o,this.a,null)},t.$i=function(){Os(this)},t.Bg=function(t,e,i){function o(t){var e=t.ib();if(e)var i=e.call(t,l);else(e=r.ib())&&(i=e(t,l));if(i){if(i){if(e=!1,Array.isArray(i))for(var o=i.length-1;0<=o;--o)e=Ua(c,t,i[o],Ga(l,p),this.$i,this)||e;else e=Ua(c,t,i,Ga(l,p),this.$i,this)||e;t=e}else t=!1;this.s=this.s||t}}var r=this.a;Ns(t,e=r.ha());var n=t.viewHints[0],s=t.viewHints[1],a=r.ca,h=r.ra;if(!this.s&&!a&&n||!h&&s)return!0;s=t.extent,n=(a=t.viewState).projection;var l=a.resolution,p=t.pixelRatio;a=r.g;var u=r.f;if(void 0===(h=r.get(Bm))&&(h=ka),s=C(s,u*l),!this.s&&this.T==l&&this.O==a&&this.B==h&&M(this.D,s))return!0;this.i&&t.postRenderFunctions.push(yp(this.i,i)),this.s=!1;var c=new dp(.5*l/p,s,r.f);if(e.ae(s,l,n),h){var f=[];e.ec(s,function(t){f.push(t)},this),f.sort(h),f.forEach(o,this)}else e.ec(s,o,this);return function(t,e){for(var i in t.a){var o,r=t.a[i];for(o in r)r[o].gb(e)}}(c,i),this.T=l,this.O=a,this.B=h,this.D=s,this.i=c,!0},Rr("MAP_RENDERER",ta),Pr([Ws,ia,Va,Wa]),Rr("MAP_RENDERER",Cp),Pr([wp,Ap,Op]),s(Fp,Ir),s(Np,Ie),(t=Np.prototype).Rd=function(){return this.get(Gp)},t.nn=function(){return this.id},t.Ve=function(){return this.get(Up)},t.Xh=function(){return this.get(Bp)},t.pi=function(){return this.get(Vp)},t.Yh=function(){return this.get(Wp)},t.am=function(){for(var t=this.element;t.lastChild;)t.removeChild(t.lastChild);(t=this.Rd())&&this.element.appendChild(t)},t.km=function(){this.c&&(br(this.element),be(this.c),this.c=null);var t=this.Ve();t&&(this.c=ve(t,"postrender",this.render,this),kp(this),t=this.stopEvent?t.v:t.o,this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element))},t.render=function(){kp(this)},t.om=function(){kp(this)},t.qm=function(){if(kp(this),this.get(Vp)&&this.autoPan){var t=this.Ve();if(t&&t.Cc()){var e=Dp(t.Cc(),t.Cb()),i=this.Rd(),o=i.offsetWidth,r=getComputedStyle(i);o+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10),r=i.offsetHeight;var n=getComputedStyle(i),s=Dp(i,[o,r+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)]);i=this.autoPanMargin,M(e,s)||(o=s[0]-e[0],r=e[2]-s[2],n=s[1]-e[1],s=e[3]-s[3],e=[0,0],0>o?e[0]=o-i:0>r&&(e[0]=Math.abs(r)+i),0>n?e[1]=n-i:0>s&&(e[1]=Math.abs(s)+i),0===e[0]&&0===e[1])||(i=t.aa().xa(),e=[(i=t.Ia(i))[0]+e[0],i[1]+e[1]],t.aa().animate({center:t.Ra(e),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing}))}}},t.rm=function(){kp(this)},t.Hj=function(t){this.set(Gp,t)},t.setMap=function(t){this.set(Up,t)},t.Mj=function(t){this.set(Bp,t)},t.We=function(t){this.set(Vp,t)},t.Pj=function(t){this.set(Wp,t)};var Gp="element",Up="map",Bp="offset",Vp="position",Wp="positioning";function Xp(t,e,i,o,r,n){Th.call(this,t,e,n),this.c=0,this.l=null,this.v=o,this.a=null,this.f={},this.C=r,this.N=i}function Yp(t,e,i){return t.f[h(e)+","+i]}s(Xp,Th),(t=Xp.prototype).ia=function(){this.a=null,this.f={},this.state=5,this.u(),Th.prototype.ia.call(this)},t.G=function(){return this.l||zp},t.qn=function(){return this.v},t.pn=function(){return this.a},t.lb=function(){return this.N},t.rn=function(){return this.o},t.load=function(){0==this.state&&(Rh(this,1),this.C(this,this.N),this.D(null,NaN,null))},t.Cp=function(t,e,i){this.vg(e),this.Ij(t),this.ri(i)},t.Bp=function(){Rh(this,3)},t.ri=function(t){this.l=t},t.Ij=function(t){this.a=t,Rh(this,2)},t.vg=function(t){this.o=t},t.ug=function(t){this.D=t};var zp=[0,0,4096,4096];function Kp(t){t=t||{},this.c=void 0!==t.className?t.className:"ol-full-screen";var e=void 0!==t.label?t.label:"⤢";this.l="string"==typeof e?document.createTextNode(e):e,e=void 0!==t.labelActive?t.labelActive:"×",this.v="string"==typeof e?document.createTextNode(e):e;var i=t.tipLabel?t.tipLabel:"Toggle full-screen";(e=document.createElement("button")).className=this.c+"-"+$p(),e.setAttribute("type","button"),e.title=i,e.appendChild(this.l),ve(e,"click",this.C,this),(i=document.createElement("div")).className=this.c+" ol-unselectable ol-control "+(Hp()?"":"ol-unsupported"),i.appendChild(e),Lr.call(this,{element:i,target:t.target}),this.D=void 0!==t.keys&&t.keys,this.j=t.source}function Hp(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function $p(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function qp(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}s(Kp,Lr),Kp.prototype.C=function(t){t.preventDefault(),Hp()&&(t=this.a)&&($p()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t=this.j?"string"==typeof this.j?document.getElementById(this.j):this.j:t.Cc(),this.D?t.mozRequestFullScreenWithKeys?t.mozRequestFullScreenWithKeys():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):qp(t):qp(t)))},Kp.prototype.o=function(){var t=this.element.firstElementChild,e=this.a;$p()?(t.className=this.c+"-true",_r(this.v,this.l)):(t.className=this.c+"-false",_r(this.l,this.v)),e&&e.Oc()},Kp.prototype.setMap=function(t){Lr.prototype.setMap.call(this,t),t&&this.s.push(ve(document,Zp(),this.o,this))};var Zp=function(){var t;return function(){if(!t){var e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}();function Jp(t){t=t||{};var e=document.createElement("DIV");e.className=void 0!==t.className?t.className:"ol-mouse-position",Lr.call(this,{element:e,render:t.render?t.render:Qp,target:t.target}),ve(this,Le(eu),this.En,this),t.coordinateFormat&&this.Gj(t.coordinateFormat),t.projection&&this.ti(t.projection),this.o=void 0!==t.undefinedHTML?t.undefinedHTML:"",this.v=e.innerHTML,this.l=this.j=this.c=null}function Qp(t){(t=t.frameState)?this.c!=t.viewState.projection&&(this.c=t.viewState.projection,this.j=null):this.c=null,tu(this,this.l)}function tu(t,e){var i=t.o;if(e&&t.c){if(!t.j){var o=t.si();t.j=o?Gt(t.c,o):Ut}(e=t.a.Ra(e))&&(t.j(e,e),i=(i=t.Qh())?i(e):e.toString())}t.v&&i==t.v||(t.element.innerHTML=i,t.v=i)}s(Jp,Lr),(t=Jp.prototype).En=function(){this.j=null},t.Qh=function(){return this.get(iu)},t.si=function(){return this.get(eu)},t.mm=function(t){this.l=this.a.ud(t),tu(this,this.l)},t.nm=function(){tu(this,null),this.l=null},t.setMap=function(t){Lr.prototype.setMap.call(this,t),t&&(t=t.a,this.s.push(ve(t,"mousemove",this.mm,this),ve(t,"mouseout",this.nm,this)))},t.Gj=function(t){this.set(iu,t)},t.ti=function(t){this.set(eu,Dt(t))};var eu="projection",iu="coordinateFormat";function ou(t){function e(t){t=a.Sd(t),h.a.aa().ub(t),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",e)}function i(t){t=a.Sd({clientX:t.clientX-p.offsetWidth/2,clientY:t.clientY+p.offsetHeight/2}),l.We(t)}t=t||{},this.j=void 0===t.collapsed||t.collapsed,this.l=void 0===t.collapsible||t.collapsible,this.l||(this.j=!1);var o=void 0!==t.className?t.className:"ol-overviewmap",r=void 0!==t.tipLabel?t.tipLabel:"Overview map",n=void 0!==t.collapseLabel?t.collapseLabel:"«";"string"==typeof n?(this.o=document.createElement("span"),this.o.textContent=n):this.o=n,"string"==typeof(n=void 0!==t.label?t.label:"»")?(this.D=document.createElement("span"),this.D.textContent=n):this.D=n;var s=this.l&&!this.j?this.o:this.D;(n=document.createElement("button")).setAttribute("type","button"),n.title=r,n.appendChild(s),ve(n,"click",this.Hn,this),this.C=document.createElement("DIV"),this.C.className="ol-overviewmap-map";var a=this.c=new Ir({controls:new Fe,interactions:new Fe,view:t.view});t.layers&&t.layers.forEach(function(t){a.xe(t)},this),(r=document.createElement("DIV")).className="ol-overviewmap-box",r.style.boxSizing="border-box",this.v=new Np({position:[0,0],positioning:"bottom-left",element:r}),this.c.ye(this.v),(r=document.createElement("div")).className=o+" ol-unselectable ol-control"+(this.j&&this.l?" ol-collapsed":"")+(this.l?"":" ol-uncollapsible"),r.appendChild(this.C),r.appendChild(n),Lr.call(this,{element:r,render:t.render?t.render:ru,target:t.target});var h=this,l=this.v,p=this.v.Rd();p.addEventListener("mousedown",function(){window.addEventListener("mousemove",i),window.addEventListener("mouseup",e)})}function ru(){var t=this.a,e=this.c;if(t.c&&e.c){var i=t.Cb();t=t.aa().qd(i);var o=e.Cb();i=e.aa().qd(o);var r=e.Ia(q(t)),n=e.Ia(Y(t));e=Math.abs(r[0]-n[0]),r=Math.abs(r[1]-n[1]),n=o[0],o=o[1],e<.1*n||r<.1*o||e>.75*n||r>.75*o?nu(this):M(i,t)||(t=this.c,i=this.a.aa(),t.aa().ub(i.xa()))}su(this)}function nu(t){var e=t.a;t=t.c;var i=e.Cb();e=e.aa().qd(i),t=t.aa(),et(e,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2))),t.Uf(e)}function su(t){var e=t.a,i=t.c;if(e.c&&i.c){var o=e.Cb(),r=e.aa(),n=i.aa();i=r.Sa(),e=t.v;var s=t.v.Rd(),a=r.qd(o);if(o=n.Pa(),r=X(a),n=Z(a),t=t.a.aa().xa()){var h=[r[0]-t[0],r[1]-t[1]];Qi(h,i),Hi(h,t)}e.We(h),s&&(s.style.width=Math.abs((r[0]-n[0])/o)+"px",s.style.height=Math.abs((n[1]-r[1])/o)+"px")}}function au(t){t.element.classList.toggle("ol-collapsed"),t.j?_r(t.o,t.D):_r(t.D,t.o),t.j=!t.j;var e=t.c;t.j||e.c||(e.Oc(),nu(t),me(e,"postrender",function(){su(this)},t))}function hu(t){var e=void 0!==(t=t||{}).className?t.className:"ol-scale-line";this.l=document.createElement("DIV"),this.l.className=e+"-inner",this.c=document.createElement("DIV"),this.c.className=e+" ol-unselectable",this.c.appendChild(this.l),this.o=null,this.v=void 0!==t.minWidth?t.minWidth:64,this.j=!1,this.B=void 0,this.D="",Lr.call(this,{element:this.c,render:t.render?t.render:pu,target:t.target}),ve(this,Le(cu),this.V,this),this.O(t.units||"metric")}s(ou,Lr),(t=ou.prototype).setMap=function(t){var e=this.a;t!==e&&(e&&((e=e.aa())&&_e(e,Le("rotation"),this.Qe,this),this.c.Ad(null)),Lr.prototype.setMap.call(this,t),t&&(this.c.Ad(this.C),this.s.push(ve(t,"propertychange",this.lm,this)),0===this.c.Xe().kc()&&this.c.zf(t.hc()),t=t.aa()))&&(ve(t,Le("rotation"),this.Qe,this),gr(t)&&(this.c.Oc(),nu(this)))},t.lm=function(t){"view"===t.key&&((t=t.oldValue)&&_e(t,Le("rotation"),this.Qe,this),ve(t=this.a.aa(),Le("rotation"),this.Qe,this))},t.Qe=function(){this.c.aa().ce(this.a.aa().Sa())},t.Hn=function(t){t.preventDefault(),au(this)},t.Gn=function(){return this.l},t.Jn=function(t){this.l!==t&&(this.l=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.j&&au(this))},t.In=function(t){this.l&&this.j!==t&&au(this)},t.Fn=function(){return this.j},t.Hl=function(){return this.c},s(hu,Lr);var lu=[1,2,5];function pu(t){(t=t.frameState)?this.o=t.viewState:this.o=null,uu(this)}function uu(t){var e=t.o;if(e){var i=e.center,o=e.projection,r=t.C();e=Mt(o,e.resolution,i,"degrees"==r?"degrees":"m"),"degrees"!=r&&(e*=o.Bc());var n=t.v*e;for(i="","degrees"==r?(i=ut.degrees,"degrees"==o.a?n*=i:e/=i,n<i/60?(i="″",e*=3600):n<i?(i="′",e*=60):i="°"):"imperial"==r?.9144>n?(i="in",e/=.0254):1609.344>n?(i="ft",e/=.3048):(i="mi",e/=1609.344):"nautical"==r?(e/=1852,i="nm"):"metric"==r?.001>n?(i="μm",e*=1e6):1>n?(i="mm",e*=1e3):1e3>n?i="m":(i="km",e/=1e3):"us"==r?.9144>n?(i="in",e*=39.37):1609.344>n?(i="ft",e/=.30480061):(i="mi",e/=1609.3472):d(!1,33),r=3*Math.floor(Math.log(t.v*e)/Math.log(10));;){if(n=lu[(r%3+3)%3]*Math.pow(10,Math.floor(r/3)),o=Math.round(n/e),isNaN(o))return t.c.style.display="none",void(t.j=!1);if(o>=t.v)break;++r}e=n+" "+i,t.D!=e&&(t.l.innerHTML=e,t.D=e),t.B!=o&&(t.l.style.width=o+"px",t.B=o),t.j||(t.c.style.display="",t.j=!0)}else t.j&&(t.c.style.display="none",t.j=!1)}hu.prototype.C=function(){return this.get(cu)},hu.prototype.V=function(){uu(this)},hu.prototype.O=function(t){this.set(cu,t)};var cu="units";function fu(t){t=t||{},this.c=void 0,this.j=du,this.D=this.v=0,this.O=null,this.$=!1,this.V=void 0!==t.duration?t.duration:200;var e=void 0!==t.className?t.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=e+"-thumb ol-unselectable";var o=document.createElement("div");o.className=e+" ol-unselectable ol-control",o.appendChild(i),this.l=new Ei(o),ve(this.l,"pointerdown",this.$l,this),ve(this.l,"pointermove",this.Yl,this),ve(this.l,"pointerup",this.Zl,this),ve(o,"click",this.Xl,this),ve(i,"click",we),Lr.call(this,{element:o,render:t.render?t.render:yu})}s(fu,Lr),fu.prototype.ia=function(){Se(this.l),Lr.prototype.ia.call(this)};var du=0;function yu(t){if(t.frameState){if(!this.$){var e=this.element,i=e.offsetWidth,o=e.offsetHeight,r=e.firstElementChild,n=getComputedStyle(r);e=r.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),r=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom),this.O=[e,r],i>o?(this.j=1,this.D=i-e):(this.j=du,this.v=o-r),this.$=!0}(t=t.frameState.viewState.resolution)!==this.c&&(this.c=t,gu(this,t))}}function gu(t,e){e=1-function(t){var e=t.a,i=Math.log(e/t.i)/Math.log(2);return function(t){return Math.log(e/t)/Math.log(2)/i}}(t.a.aa())(e);var i=t.element.firstElementChild;1==t.j?i.style.left=t.D*e+"px":i.style.top=t.v*e+"px"}function vu(t,e){return function(t){var e=t.a,i=Math.log(e/t.i)/Math.log(2);return function(t){return e/Math.pow(2,t*i)}}(t.a.aa())(1-e)}function mu(t){t=t||{},this.extent=t.extent?t.extent:null;var e=void 0!==t.className?t.className:"ol-zoom-extent",i=void 0!==t.label?t.label:"E",o=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=o,r.appendChild("string"==typeof i?document.createTextNode(i):i),ve(r,"click",this.c,this),(i=document.createElement("div")).className=e+" ol-unselectable ol-control",i.appendChild(r),Lr.call(this,{element:i,target:t.target})}(t=fu.prototype).setMap=function(t){Lr.prototype.setMap.call(this,t),t&&t.render()},t.Xl=function(t){var e=this.a.aa();t=vu(this,y(1===this.j?(t.offsetX-this.O[0]/2)/this.D:(t.offsetY-this.O[1]/2)/this.v,0,1)),e.animate({resolution:e.constrainResolution(t),duration:this.V,easing:so})},t.$l=function(t){this.o||t.b.target!==this.element.firstElementChild||(vr(this.a.aa(),1,1),this.C=t.clientX,this.B=t.clientY,this.o=!0)},t.Yl=function(t){if(this.o){var e=this.element.firstElementChild;this.c=vu(this,y(1===this.j?(t.clientX-this.C+parseInt(e.style.left,10))/this.D:(t.clientY-this.B+parseInt(e.style.top,10))/this.v,0,1)),this.a.aa().gd(this.c),gu(this,this.c),this.C=t.clientX,this.B=t.clientY}},t.Zl=function(){if(this.o){var t=this.a.aa();vr(t,1,-1),t.animate({resolution:t.constrainResolution(this.c),duration:this.V,easing:so}),this.o=!1,this.B=this.C=void 0}},s(mu,Lr),mu.prototype.c=function(t){t.preventDefault(),t=this.a.aa();var e=this.extent?this.extent:t.v.G();t.Uf(e)};var _u=document.implementation.createDocument("","",null);function bu(t,e){return _u.createElementNS(t,e)}function xu(t,e){return function t(e,i,o){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)i?o.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):o.push(e.nodeValue);else for(e=e.firstChild;e;e=e.nextSibling)t(e,i,o);return o}(t,e,[]).join("")}function Eu(t){return t instanceof Document}function Su(t){return t instanceof Node}function Tu(t){return(new DOMParser).parseFromString(t,"application/xml")}function wu(t,e){return function(i,o){void 0!==(i=t.call(e,i,o))&&Ht(o[o.length-1],i)}}function Cu(t,e){return function(i,o){void 0!==(i=t.call(void 0!==e?e:this,i,o))&&o[o.length-1].push(i)}}function Ru(t,e){return function(i,o){void 0!==(i=t.call(void 0!==e?e:this,i,o))&&(o[o.length-1]=i)}}function Pu(t){return function(e,i){var o=t.call(this,e,i);void 0!==o&&(i=i[i.length-1],((e=e.localName)in i?i[e]:i[e]=[]).push(o))}}function Iu(t,e){return function(i,o){var r=t.call(this,i,o);void 0!==r&&(o[o.length-1][void 0!==e?e:i.localName]=r)}}function Mu(t,e){return function(i,o,r){t.call(void 0!==e?e:this,i,o,r),r[r.length-1].node.appendChild(i)}}function Lu(t){var e,i;return function(o,r,n){if(void 0===e){e={};var s={};s[o.localName]=t,e[o.namespaceURI]=s,i=Au(o.localName)}ku(e,i,r,n)}}function Au(t,e){return function(i,o,r){return i=o[o.length-1].node,void 0===(o=t)&&(o=r),r=e,void 0===e&&(r=i.namespaceURI),bu(r,o)}}var Ou=Au();function Fu(t,e){for(var i=e.length,o=Array(i),r=0;r<i;++r)o[r]=t[e[r]];return o}function Nu(t,e,i){var o;i=void 0!==i?i:{};var r=0;for(o=t.length;r<o;++r)i[t[r]]=e;return i}function Du(t,e,i,o){for(e=e.firstElementChild;e;e=e.nextElementSibling){var r=t[e.namespaceURI];void 0!==r&&(void 0!==(r=r[e.localName])&&r.call(o,e,i))}}function ju(t,e,i,o,r){return o.push(t),Du(e,i,o,r),o.pop()}function ku(t,e,i,o,r,n){for(var s,a,h=(void 0!==r?r:i).length,l=0;l<h;++l)void 0!==(s=i[l])&&(void 0!==(a=e.call(n,s,o,void 0!==r?r[l]:void 0))&&t[a.namespaceURI][a.localName].call(n,a,s,o))}function Gu(t,e,i,o,r,n,s){r.push(t),ku(e,i,o,r,n,s),r.pop()}function Uu(t,e,i,o){return function(r,n,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(r,n,s):t,!0),"arraybuffer"==e.S()&&(a.responseType="arraybuffer"),a.onload=function(){if(!a.status||200<=a.status&&300>a.status){var t=e.S();if("json"==t||"text"==t)var r=a.responseText;else"xml"==t?(r=a.responseXML)||(r=Tu(a.responseText)):"arraybuffer"==t&&(r=a.response);r?i.call(this,e.Qa(r,{featureProjection:s}),e.sb(r),e.cg()):o.call(this)}else o.call(this)}.bind(this),a.onerror=function(){o.call(this)}.bind(this),a.send()}}function Bu(t,e){return Uu(t,e,function(t){this.Qc(t)},a)}function Vu(){this.i=this.defaultDataProjection=null}function Wu(t,e,i){var o;return i&&(o={dataProjection:i.dataProjection?i.dataProjection:t.sb(e),featureProjection:i.featureProjection}),Xu(t,o)}function Xu(t,e){return ot({dataProjection:t.defaultDataProjection,featureProjection:t.i},e)}function Yu(t,e,i){var o,r=i?Dt(i.featureProjection):null,n=i?Dt(i.dataProjection):null;if(o=r&&n&&!jt(r,n)?t instanceof wo?(e?t.clone():t).mb(e?r:n,e?n:r):Wt(t,n,r):t,e&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);o===t&&(o=o.clone()),o.Rc(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t})}return o}function zu(){Vu.call(this)}function Ku(t){return"string"==typeof t?(t=JSON.parse(t))?t:null:null!==t?t:null}function Hu(t,e){Co.call(this),this.c=[],this.j=this.o=-1,this.na(t,e)}function $u(t,e){var i,o=t.ja,r=[],n=[],s=0;for(i=e.length;s<i;++s){var a=e[s];0===s&&(o=a.ja),Ht(r,a.da()),n.push(r.length)}t.ba(o,r,n)}function qu(t,e){Co.call(this),this.na(t,e)}function Zu(t,e){Co.call(this),this.c=[],this.o=-1,this.D=null,this.T=this.C=this.B=-1,this.j=null,this.na(t,e)}function Ju(t){if(t.o!=t.g){var e,i=t.A,o=t.c,r=t.a,n=0,s=[],a=0;for(e=o.length;a<e;++a){var h=o[a];n=j(i,n,h[0],r),s.push((n[0]+n[2])/2,(n[1]+n[3])/2),n=h[h.length-1]}for(i=Qu(t),o=t.c,r=t.a,a=0,e=[],h=0,n=o.length;h<n;++h){var l=o[h];e=Zo(i,a,l,r,s,2*h,e),a=l[l.length-1]}t.D=e,t.o=t.g}return t.D}function Qu(t){if(t.T!=t.g){var e=t.A;t:{var i,o=t.c,r=0;for(i=o.length;r<i;++r)if(!ir(e,o[r],t.a,void 0)){o=!1;break t}o=!0}o?t.j=e:(t.j=e.slice(),t.j.length=rr(t.j,t.c,t.a)),t.T=t.g}return t.j}function tc(t,e){var i,o=t.ja,r=[],n=[],s=0;for(i=e.length;s<i;++s){var a=e[s];0===s&&(o=a.ja);var h,l=r.length,p=a.pb(),u=0;for(h=p.length;u<h;++u)p[u]+=l;Ht(r,a.da()),n.push(p)}t.ba(o,r,n)}function ec(t){t=t||{},Vu.call(this),this.b=t.geometryName}function ic(t,e){if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)var i="Point";else if(t.points)i="MultiPoint";else if(t.paths)i=1===t.paths.length?"LineString":"MultiLineString";else if(t.rings){var o,r=t.rings,n=oc(t),s=[],a=[];i=[];var h=0;for(o=r.length;h<o;++h)s.length=0,ko(s,0,r[h],n.length),er(s,0,s.length,n.length)?a.push([r[h]]):i.push(r[h]);for(;i.length;){for(r=i.shift(),n=!1,h=a.length-1;0<=h;h--)if(M(new Yo(a[h][0]).G(),new Yo(r).G())){a[h].push(r),n=!0;break}n||a.push([r.reverse()])}t=ot({},t),1===a.length?(i="Polygon",t.rings=a[0]):(i="MultiPolygon",t.rings=a)}return Yu((0,nc[i])(t),!1,e)}function oc(t){var e="XY";return!0===t.hasZ&&!0===t.hasM?e="XYZM":!0===t.hasZ?e="XYZ":!0===t.hasM&&(e="XYM"),e}function rc(t){return{hasZ:"XYZ"===(t=t.ja)||"XYZM"===t,hasM:"XYM"===t||"XYZM"===t}}Vu.prototype.cg=function(){return null},s(zu,Vu),(t=zu.prototype).S=function(){return"json"},t.Yb=function(t,e){return this.dd(Ku(t),Wu(this,t,e))},t.Qa=function(t,e){return this.Mg(Ku(t),Wu(this,t,e))},t.ed=function(t,e){return this.Qg(Ku(t),Wu(this,t,e))},t.sb=function(t){return this.Tg(Ku(t))},t.Jd=function(t,e){return JSON.stringify(this.ld(t,e))},t.ac=function(t,e){return JSON.stringify(this.qe(t,e))},t.md=function(t,e){return JSON.stringify(this.se(t,e))},s(Hu,Co),(t=Hu.prototype).Gk=function(t){this.A?Ht(this.A,t.da().slice()):this.A=t.da().slice(),this.c.push(this.A.length),this.u()},t.clone=function(){var t=new Hu(null);return t.ba(this.ja,this.A.slice(),this.c.slice()),t},t.Nb=function(t,e,i,o){return o<P(this.G(),t,e)?o:(this.j!=this.g&&(this.o=Math.sqrt(Fo(this.A,0,this.c,this.a,0)),this.j=this.g),Do(this.A,0,this.c,this.a,this.o,!1,t,e,i,o))},t.Wn=function(t,e,i){return"XYM"!=this.ja&&"XYZM"!=this.ja||0===this.A.length?null:function(t,e,i,o,r,n){var s=0;if(n)return dh(t,s,e[e.length-1],i,o,r);if(o<t[i-1])return r?((t=t.slice(0,i))[i-1]=o,t):null;if(t[t.length-1]<o)return r?((t=t.slice(t.length-i))[i-1]=o,t):null;for(r=0,n=e.length;r<n;++r){var a=e[r];if(s!=a){if(o<t[s+i-1])break;if(o<=t[a-1])return dh(t,s,a,i,o,!1);s=a}}return null}(this.A,this.c,this.a,t,void 0!==e&&e,void 0!==i&&i)},t.W=function(){return Bo(this.A,0,this.c,this.a)},t.pb=function(){return this.c},t.yl=function(t){if(0>t||this.c.length<=t)return null;var e=new yh(null);return e.ba(this.ja,this.A.slice(0===t?0:this.c[t-1],this.c[t])),e},t.wd=function(){var t,e=this.A,i=this.c,o=this.ja,r=[],n=0,s=0;for(t=i.length;s<t;++s){var a=i[s],h=new yh(null);h.ba(o,e.slice(n,a)),r.push(h),n=a}return r},t.Ge=function(){var t,e=[],i=this.A,o=0,r=this.c,n=this.a,s=0;for(t=r.length;s<t;++s){var a=r[s];Ht(e,o=fh(i,o,a,n,.5)),o=a}return e},t.xd=function(t){var e,i=[],o=[],r=this.A,n=this.c,s=this.a,a=0,h=0,l=0;for(e=n.length;l<e;++l){var p=n[l];h=Wo(r,a,p,s,t,i,h),o.push(h),a=p}return i.length=h,(t=new Hu(null)).ba("XY",i,o),t},t.S=function(){return"MultiLineString"},t.$a=function(t){t:{var e,i=this.A,o=this.c,r=this.a,n=0,s=0;for(e=o.length;s<e;++s){if(Qo(i,n,o[s],r,t)){t=!0;break t}n=o[s]}t=!1}return t},t.na=function(t,e){t?(Io(this,e,t,2),this.A||(this.A=[]),t=Go(this.A,0,t,this.a,this.c),this.A.length=0===t.length?0:t[t.length-1],this.u()):this.ba("XY",null,this.c)},t.ba=function(t,e,i){Po(this,t,e),this.c=i,this.u()},s(qu,Co),(t=qu.prototype).Ik=function(t){this.A?Ht(this.A,t.da()):this.A=t.da().slice(),this.u()},t.clone=function(){var t=new qu(null);return t.ba(this.ja,this.A.slice()),t},t.Nb=function(t,e,i,o){if(o<P(this.G(),t,e))return o;var r,n=this.A,s=this.a,a=0;for(r=n.length;a<r;a+=s){var h=m(t,e,n[a],n[a+1]);if(h<o){for(o=h,h=0;h<s;++h)i[h]=n[a+h];i.length=s}}return o},t.W=function(){return Uo(this.A,0,this.A.length,this.a)},t.Ll=function(t){var e=this.A?this.A.length/this.a:0;return 0>t||e<=t?null:((e=new Ko(null)).ba(this.ja,this.A.slice(t*this.a,(t+1)*this.a)),e)},t.de=function(){var t,e=this.A,i=this.ja,o=this.a,r=[],n=0;for(t=e.length;n<t;n+=o){var s=new Ko(null);s.ba(i,e.slice(n,n+o)),r.push(s)}return r},t.S=function(){return"MultiPoint"},t.$a=function(t){var e,i=this.A,o=this.a,r=0;for(e=i.length;r<e;r+=o){if(L(t,i[r],i[r+1]))return!0}return!1},t.na=function(t,e){t?(Io(this,e,t,1),this.A||(this.A=[]),this.A.length=ko(this.A,0,t,this.a),this.u()):this.ba("XY",null)},t.ba=function(t,e){Po(this,t,e),this.u()},s(Zu,Co),(t=Zu.prototype).Jk=function(t){if(this.A){var e,i=this.A.length;Ht(this.A,t.da());var o=0;for(e=(t=t.pb().slice()).length;o<e;++o)t[o]+=i}else this.A=t.da().slice(),t=t.pb().slice(),this.c.push();this.c.push(t),this.u()},t.clone=function(){for(var t=new Zu(null),e=this.c.length,i=Array(e),o=0;o<e;++o)i[o]=this.c[o].slice();return t.ba(this.ja,this.A.slice(),i),t},t.Nb=function(t,e,i,o){if(o<P(this.G(),t,e))return o;if(this.C!=this.g){var r,n=this.c,s=0,a=0,h=0;for(r=n.length;h<r;++h){var l=n[h];a=Fo(this.A,s,l,this.a,a),s=l[l.length-1]}this.B=Math.sqrt(a),this.C=this.g}var p;n=Qu(this),s=this.c,a=this.a,h=this.B,r=0,l=[NaN,NaN];var u=0;for(p=s.length;u<p;++u){var c=s[u];o=Do(n,r,c,a,h,!0,t,e,i,o,l),r=c[c.length-1]}return o},t.Zc=function(t,e){t:{var i=Qu(this),o=this.c,r=0;if(0!==o.length){var n,s=0;for(n=o.length;s<n;++s){var a=o[s];if(qo(i,r,a,this.a,t,e)){t=!0;break t}r=a[a.length-1]}}t=!1}return t},t.Xn=function(){var t,e=Qu(this),i=this.c,o=0,r=0,n=0;for(t=i.length;n<t;++n){var s=i[n];r+=Lo(e,o,s,this.a),o=s[s.length-1]}return r},t.W=function(t){if(void 0!==t){var e=Qu(this).slice();rr(e,this.c,this.a,t)}else e=this.A;return Vo(e,0,this.c,this.a)},t.td=function(){return this.c},t.ul=function(){var t=new qu(null);return t.ba("XYM",Ju(this).slice()),t},t.xd=function(t){var e=[],i=[],o=this.A,r=this.c,n=this.a;t=Math.sqrt(t);var s,a=0,h=0,l=0;for(s=r.length;l<s;++l){var p=r[l],u=[];h=Xo(o,a,p,n,t,e,h,u),i.push(u),a=p[p.length-1]}return e.length=h,(o=new Zu(null)).ba("XY",e,i),o},t.Ml=function(t){if(0>t||this.c.length<=t)return null;if(0===t)var e=0;else e=(e=this.c[t-1])[e.length-1];var i=(t=this.c[t].slice())[t.length-1];if(0!==e){var o,r=0;for(o=t.length;r<o;++r)t[r]-=e}return(r=new nr(null)).ba(this.ja,this.A.slice(e,i),t),r},t.Vd=function(){var t,e,i=this.ja,o=this.A,r=this.c,n=[],s=0,a=0;for(t=r.length;a<t;++a){var h=r[a].slice(),l=h[h.length-1];if(0!==s){var p=0;for(e=h.length;p<e;++p)h[p]-=s}(p=new nr(null)).ba(i,o.slice(s,l),h),n.push(p),s=l}return n},t.S=function(){return"MultiPolygon"},t.$a=function(t){t:{var e,i=Qu(this),o=this.c,r=this.a,n=0,s=0;for(e=o.length;s<e;++s){var a=o[s];if(tr(i,n,a,r,t)){t=!0;break t}n=a[a.length-1]}t=!1}return t},t.na=function(t,e){if(t){Io(this,e,t,3),this.A||(this.A=[]),e=this.A;var i=this.a,o=this.c,r=0;o=o||[];var n,s=0,a=0;for(n=t.length;a<n;++a)r=Go(e,r,t[a],i,o[s]),o[s++]=r,r=r[r.length-1];o.length=s,0===o.length?this.A.length=0:(t=o[o.length-1],this.A.length=0===t.length?0:t[t.length-1]),this.u()}else this.ba("XY",null,this.c)},t.ba=function(t,e,i){Po(this,t,e),this.c=i,this.u()},s(ec,zu);var nc={Point:function(t){return void 0!==t.m&&void 0!==t.z?new Ko([t.x,t.y,t.z,t.m],"XYZM"):void 0!==t.z?new Ko([t.x,t.y,t.z],"XYZ"):void 0!==t.m?new Ko([t.x,t.y,t.m],"XYM"):new Ko([t.x,t.y])},LineString:function(t){return new yh(t.paths[0],oc(t))},Polygon:function(t){return new nr(t.rings,oc(t))},MultiPoint:function(t){return new qu(t.points,oc(t))},MultiLineString:function(t){return new Hu(t.paths,oc(t))},MultiPolygon:function(t){return new Zu(t.rings,oc(t))}},sc={Point:function(t){var e,i=t.W();return"XYZ"===(t=t.ja)?e={x:i[0],y:i[1],z:i[2]}:"XYM"===t?e={x:i[0],y:i[1],m:i[2]}:"XYZM"===t?e={x:i[0],y:i[1],z:i[2],m:i[3]}:"XY"===t?e={x:i[0],y:i[1]}:d(!1,34),e},LineString:function(t){var e=rc(t);return{hasZ:e.hasZ,hasM:e.hasM,paths:[t.W()]}},Polygon:function(t){var e=rc(t);return{hasZ:e.hasZ,hasM:e.hasM,rings:t.W(!1)}},MultiPoint:function(t){var e=rc(t);return{hasZ:e.hasZ,hasM:e.hasM,points:t.W()}},MultiLineString:function(t){var e=rc(t);return{hasZ:e.hasZ,hasM:e.hasM,paths:t.W()}},MultiPolygon:function(t){var e=rc(t);t=t.W(!1);for(var i=[],o=0;o<t.length;o++)for(var r=t[o].length-1;0<=r;r--)i.push(t[o][r]);return{hasZ:e.hasZ,hasM:e.hasM,rings:i}}};function ac(t,e){return(0,sc[t.S()])(Yu(t,!0,e),e)}function hc(){this.g=new XMLSerializer,Vu.call(this)}function lc(t,e,i){return 0<(t=pc(t,e,i)).length?t[0]:null}function pc(t,e,i){var o=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&Ht(o,t.Kc(e,i));return o}function uc(t){t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.b={},this.b["http://www.opengis.net/gml"]={featureMember:Ru(uc.prototype.ge),featureMembers:Ru(uc.prototype.ge)},hc.call(this)}(t=ec.prototype).dd=function(t,e){var i=ic(t.geometry,e),o=new uh;return this.b&&o.Lc(this.b),o.Va(i),e&&e.pg&&t.attributes[e.pg]&&o.qc(t.attributes[e.pg]),t.attributes&&o.H(t.attributes),o},t.Mg=function(t,e){if(e=e||{},t.features){var i,o=[],r=t.features;for(e.pg=t.objectIdFieldName,t=0,i=r.length;t<i;++t)o.push(this.dd(r[t],e));return o}return[this.dd(t,e)]},t.Qg=function(t,e){return ic(t,e)},t.Tg=function(t){return t.spatialReference&&t.spatialReference.wkid?Dt("EPSG:"+t.spatialReference.wkid):null},t.se=function(t,e){return ac(t,Xu(this,e))},t.ld=function(t,e){e=Xu(this,e);var i={},o=t.U();return o&&(i.geometry=ac(o,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:Dt(e.featureProjection).wb.split(":").pop()})),delete(e=t.L())[t.a],i.attributes=st(e)?{}:e,i},t.qe=function(t,e){e=Xu(this,e);var i,o=[],r=0;for(i=t.length;r<i;++r)o.push(this.ld(t[r],e));return{features:o}},s(hc,Vu),(t=hc.prototype).S=function(){return"xml"},t.Yb=function(t,e){return Eu(t)?lc(this,t,e):Su(t)?this.Lg(t,e):"string"==typeof t?lc(this,t=Tu(t),e):null},t.Lg=function(){return null},t.Qa=function(t,e){return Eu(t)?pc(this,t,e):Su(t)?this.Kc(t,e):"string"==typeof t?pc(this,t=Tu(t),e):[]},t.ed=function(t,e){return Eu(t)?null:Su(t)?this.vj(t,e):("string"==typeof t&&Tu(t),null)},t.vj=function(){return null},t.sb=function(t){return Eu(t)?this.Sg(t):Su(t)?this.uf(t):"string"==typeof t?(t=Tu(t),this.Sg(t)):null},t.Sg=function(){return this.defaultDataProjection},t.uf=function(){return this.defaultDataProjection},t.Jd=function(){return this.g.serializeToString(this.mh())},t.mh=function(){return null},t.ac=function(t,e){return t=this.bc(t,e),this.g.serializeToString(t)},t.bc=function(){return null},t.md=function(t,e){return t=this.re(t,e),this.g.serializeToString(t)},t.re=function(){return null},s(uc,hc);var cc=/^[\s\xa0]*$/;function fc(t){return dc(t=xu(t,!1))}function dc(t){if(t=/^\s*(true|1)|(false|0)\s*$/.exec(t))return void 0!==t[1]||!1}function yc(t){return t=xu(t,!1),t=Date.parse(t),isNaN(t)?void 0:t/1e3}function gc(t){return vc(t=xu(t,!1))}function vc(t){if(t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t))return parseFloat(t[1])}function mc(t){return _c(t=xu(t,!1))}function _c(t){if(t=/^\s*(\d+)\s*$/.exec(t))return parseInt(t[1],10)}function bc(t){return xu(t,!1).trim()}function xc(t,e){Tc(t,e?"1":"0")}function Ec(t,e){t.appendChild(_u.createTextNode(e.toPrecision()))}function Sc(t,e){t.appendChild(_u.createTextNode(e.toString()))}function Tc(t,e){t.appendChild(_u.createTextNode(e))}function wc(t){t=t||{},uc.call(this,t),this.s=void 0!==t.surface&&t.surface,this.c=void 0!==t.curve&&t.curve,this.f=void 0===t.multiCurve||t.multiCurve,this.j=void 0===t.multiSurface||t.multiSurface,this.schemaLocation=t.schemaLocation?t.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",this.hasZ=void 0!==t.hasZ&&t.hasZ}function Cc(t,e,i){var o=i[i.length-1];i=o.hasZ,t.setAttribute("srsDimension",i?3:2),o=o.srsName;for(var r,n=(e=e.W()).length,s=Array(n),a=0;a<n;++a){r=e[a];var h=a,l=i,p="enu";o&&(p=Dt(o).b),p="en"===p.substr(0,2)?r[0]+" "+r[1]:r[1]+" "+r[0],l&&(p+=" "+(r[2]||0)),s[h]=p}Tc(t,s.join(" "))}(t=uc.prototype).ge=function(t,e){var i=t.localName,o=null;if("FeatureCollection"==i)o="http://www.opengis.net/wfs"===t.namespaceURI?ju([],this.b,t,e,this):ju(null,this.b,t,e,this);else if("featureMembers"==i||"featureMember"==i){var r,n=e[0],s=n.featureType,a=n.featureNS;if(!s&&t.childNodes){s=[],a={};var h=0;for(r=t.childNodes.length;h<r;++h){var l=t.childNodes[h];if(1===l.nodeType){var p=l.nodeName.split(":").pop();if(-1===s.indexOf(p)){var u="",c=0;for(var f in l=l.namespaceURI,a){if(a[f]===l){u=f;break}++c}u||(a[u="p"+c]=l),s.push(u+":"+p)}}}"featureMember"!=i&&(n.featureType=s,n.featureNS=a)}for(var d in"string"==typeof a&&(h=a,(a={}).p0=h),n={},s=Array.isArray(s)?s:[s],a){for(p={},h=0,r=s.length;h<r;++h)(-1===s[h].indexOf(":")?"p0":s[h].split(":")[0])===d&&(p[s[h].split(":").pop()]="featureMembers"==i?Cu(this.Kg,this):Ru(this.Kg,this));n[a[d]]=p}o=ju("featureMember"==i?void 0:[],n,t,e)}return null===o&&(o=[]),o},t.rf=function(t,e){var i=e[0];if(i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension"),t=ju(null,this.qh,t,e,this))return Yu(t,!1,i)},t.Kg=function(t,e){var i;(i=t.getAttribute("fid"))||(i=t.getAttributeNS("http://www.opengis.net/gml","id")||"");var o,r={};for(t=t.firstElementChild;t;t=t.nextElementSibling){var n=t.localName;if(0===t.childNodes.length||1===t.childNodes.length&&(3===t.firstChild.nodeType||4===t.firstChild.nodeType)){var s=xu(t,!1);cc.test(s)&&(s=void 0),r[n]=s}else"boundedBy"!==n&&(o=n),r[n]=this.rf(t,e)}return e=new uh(r),o&&e.Lc(o),i&&e.qc(i),e},t.Aj=function(t,e){if(t=this.qf(t,e))return(e=new Ko(null)).ba("XYZ",t),e},t.yj=function(t,e){if(t=ju([],this.kk,t,e,this))return new qu(t)},t.xj=function(t,e){if(t=ju([],this.jk,t,e,this))return $u(e=new Hu(null),t),e},t.zj=function(t,e){if(t=ju([],this.lk,t,e,this))return tc(e=new Zu(null),t),e},t.qj=function(t,e){Du(this.pk,t,e,this)},t.fi=function(t,e){Du(this.hk,t,e,this)},t.rj=function(t,e){Du(this.qk,t,e,this)},t.sf=function(t,e){if(t=this.qf(t,e))return(e=new yh(null)).ba("XYZ",t),e},t.Xp=function(t,e){if(t=ju(null,this.te,t,e,this))return t},t.wj=function(t,e){if(t=this.qf(t,e))return zo(e=new Yo(null),"XYZ",t),e},t.tf=function(t,e){if((t=ju([null],this.Gf,t,e,this))&&t[0]){e=new nr(null);var i,o=t[0],r=[o.length],n=1;for(i=t.length;n<i;++n)Ht(o,t[n]),r.push(o.length);return e.ba("XYZ",o,r),e}},t.qf=function(t,e){return ju(null,this.te,t,e,this)},t.kk={"http://www.opengis.net/gml":{pointMember:Cu(uc.prototype.qj),pointMembers:Cu(uc.prototype.qj)}},t.jk={"http://www.opengis.net/gml":{lineStringMember:Cu(uc.prototype.fi),lineStringMembers:Cu(uc.prototype.fi)}},t.lk={"http://www.opengis.net/gml":{polygonMember:Cu(uc.prototype.rj),polygonMembers:Cu(uc.prototype.rj)}},t.pk={"http://www.opengis.net/gml":{Point:Cu(uc.prototype.qf)}},t.hk={"http://www.opengis.net/gml":{LineString:Cu(uc.prototype.sf)}},t.qk={"http://www.opengis.net/gml":{Polygon:Cu(uc.prototype.tf)}},t.ue={"http://www.opengis.net/gml":{LinearRing:Ru(uc.prototype.Xp)}},t.vj=function(t,e){return(t=this.rf(t,[Wu(this,t,e||{})]))?t:null},t.Kc=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&ot(i,Wu(this,t,e)),this.ge(t,[i])||[]},t.uf=function(t){return Dt(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},s(wc,uc),(t=wc.prototype).aq=function(t,e){if(t=ju([],this.ik,t,e,this))return $u(e=new Hu(null),t),e},t.bq=function(t,e){if(t=ju([],this.mk,t,e,this))return tc(e=new Zu(null),t),e},t.Gh=function(t,e){Du(this.ek,t,e,this)},t.Xj=function(t,e){Du(this.sk,t,e,this)},t.fq=function(t,e){return ju([null],this.nk,t,e,this)},t.iq=function(t,e){return ju([null],this.rk,t,e,this)},t.gq=function(t,e){return ju([null],this.Gf,t,e,this)},t.$p=function(t,e){return ju([null],this.te,t,e,this)},t.Fm=function(t,e){(t=ju(void 0,this.ue,t,e,this))&&e[e.length-1].push(t)},t.Zk=function(t,e){(t=ju(void 0,this.ue,t,e,this))&&(e[e.length-1][0]=t)},t.Bj=function(t,e){if((t=ju([null],this.tk,t,e,this))&&t[0]){e=new nr(null);var i,o=t[0],r=[o.length],n=1;for(i=t.length;n<i;++n)Ht(o,t[n]),r.push(o.length);return e.ba("XYZ",o,r),e}},t.tj=function(t,e){if(t=ju([null],this.fk,t,e,this))return(e=new yh(null)).ba("XYZ",t),e},t.Wp=function(t,e){return F((t=ju([null],this.gk,t,e,this))[1][0],t[1][1],t[2][0],t[2][1])},t.Yp=function(t,e){var i,o=xu(t,!1),r=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;for(t=[];i=r.exec(o);)t.push(parseFloat(i[1])),o=o.substr(i[0].length);if(""===o){if(o="enu",(e=e[0].srsName)&&(o=Dt(e).b),"neu"===o)for(e=0,o=t.length;e<o;e+=3)r=t[e],t[e]=t[e+1],t[e+1]=r;if(2==(e=t.length)&&t.push(0),0!==e)return t}},t.Pg=function(t,e){var i=xu(t,!1).replace(/^\s*|\s*$/g,""),o=(e=e[0]).srsName,r=e.srsDimension;e="enu",o&&(e=Dt(o).b),i=i.split(/\s+/),o=2,t.getAttribute("srsDimension")?o=_c(t.getAttribute("srsDimension")):t.getAttribute("dimension")?o=_c(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?o=_c(t.parentNode.getAttribute("srsDimension")):r&&(o=_c(r));for(var n,s=[],a=0,h=i.length;a<h;a+=o)t=parseFloat(i[a]),r=parseFloat(i[a+1]),n=3===o?parseFloat(i[a+2]):0,"en"===e.substr(0,2)?s.push(t,r,n):s.push(r,t,n);return s},t.te={"http://www.opengis.net/gml":{pos:Ru(wc.prototype.Yp),posList:Ru(wc.prototype.Pg)}},t.Gf={"http://www.opengis.net/gml":{interior:wc.prototype.Fm,exterior:wc.prototype.Zk}},t.qh={"http://www.opengis.net/gml":{Point:Ru(uc.prototype.Aj),MultiPoint:Ru(uc.prototype.yj),LineString:Ru(uc.prototype.sf),MultiLineString:Ru(uc.prototype.xj),LinearRing:Ru(uc.prototype.wj),Polygon:Ru(uc.prototype.tf),MultiPolygon:Ru(uc.prototype.zj),Surface:Ru(wc.prototype.Bj),MultiSurface:Ru(wc.prototype.bq),Curve:Ru(wc.prototype.tj),MultiCurve:Ru(wc.prototype.aq),Envelope:Ru(wc.prototype.Wp)}},t.ik={"http://www.opengis.net/gml":{curveMember:Cu(wc.prototype.Gh),curveMembers:Cu(wc.prototype.Gh)}},t.mk={"http://www.opengis.net/gml":{surfaceMember:Cu(wc.prototype.Xj),surfaceMembers:Cu(wc.prototype.Xj)}},t.ek={"http://www.opengis.net/gml":{LineString:Cu(uc.prototype.sf),Curve:Cu(wc.prototype.tj)}},t.sk={"http://www.opengis.net/gml":{Polygon:Cu(uc.prototype.tf),Surface:Cu(wc.prototype.Bj)}},t.tk={"http://www.opengis.net/gml":{patches:Ru(wc.prototype.fq)}},t.fk={"http://www.opengis.net/gml":{segments:Ru(wc.prototype.iq)}},t.gk={"http://www.opengis.net/gml":{lowerCorner:Cu(wc.prototype.Pg),upperCorner:Cu(wc.prototype.Pg)}},t.nk={"http://www.opengis.net/gml":{PolygonPatch:Ru(wc.prototype.gq)}},t.rk={"http://www.opengis.net/gml":{LineStringSegment:Ru(wc.prototype.$p)}},t.Hi=function(t,e,i){var o=i[i.length-1].srsName;o&&t.setAttribute("srsName",o),o=bu(t.namespaceURI,"pos"),t.appendChild(o),t=(i=i[i.length-1]).hasZ,o.setAttribute("srsDimension",t?3:2);var r=i.srsName;i="enu",r&&(i=Dt(r).b),e=e.W(),i="en"===i.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0],t&&(i+=" "+(e[2]||0)),Tc(o,i)};var Rc={"http://www.opengis.net/gml":{lowerCorner:Mu(Tc),upperCorner:Mu(Tc)}};(t=wc.prototype).Pn=function(t,e,i){var o=i[i.length-1].srsName;o&&t.setAttribute("srsName",o),Gu({node:t},Rc,Ou,[e[0]+" "+e[1],e[2]+" "+e[3]],i,["lowerCorner","upperCorner"],this)},t.Ei=function(t,e,i){var o=i[i.length-1].srsName;o&&t.setAttribute("srsName",o),o=bu(t.namespaceURI,"posList"),t.appendChild(o),Cc(o,e,i)},t.On=function(t,e){e=(t=e[e.length-1]).node;var i=t.exteriorWritten;return void 0===i&&(t.exteriorWritten=!0),bu(e.namespaceURI,void 0!==i?"interior":"exterior")},t.af=function(t,e,i){var o=i[i.length-1],r=o.hasZ;o=o.srsName,"PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName?(e=e.Ud(),Gu({node:t,hasZ:r,srsName:o},Lc,this.On,e,i,void 0,this)):"Surface"===t.nodeName&&(r=bu(t.namespaceURI,"patches"),t.appendChild(r),t=bu(r.namespaceURI,"PolygonPatch"),r.appendChild(t),this.af(t,e,i))},t.$e=function(t,e,i){var o=i[i.length-1].srsName;"LineStringSegment"!==t.nodeName&&o&&t.setAttribute("srsName",o),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName?(o=bu(t.namespaceURI,"posList"),t.appendChild(o),Cc(o,e,i)):"Curve"===t.nodeName&&(o=bu(t.namespaceURI,"segments"),t.appendChild(o),t=bu(o.namespaceURI,"LineStringSegment"),o.appendChild(t),this.$e(t,e,i))},t.Gi=function(t,e,i){var o=i[i.length-1],r=o.hasZ,n=o.srsName;o=o.surface,n&&t.setAttribute("srsName",n),e=e.Vd(),Gu({node:t,hasZ:r,srsName:n,surface:o},Pc,this.l,e,i,void 0,this)},t.Qn=function(t,e,i){var o=i[i.length-1],r=o.srsName;o=o.hasZ,r&&t.setAttribute("srsName",r),e=e.de(),Gu({node:t,hasZ:o,srsName:r},Ic,Au("pointMember"),e,i,void 0,this)},t.Fi=function(t,e,i){var o=i[i.length-1],r=o.hasZ,n=o.srsName;o=o.curve,n&&t.setAttribute("srsName",n),e=e.wd(),Gu({node:t,hasZ:r,srsName:n,curve:o},Mc,this.l,e,i,void 0,this)},t.Ii=function(t,e,i){var o=bu(t.namespaceURI,"LinearRing");t.appendChild(o),this.Ei(o,e,i)},t.Ji=function(t,e,i){var o=this.a(e,i);o&&(t.appendChild(o),this.af(o,e,i))},t.Rn=function(t,e,i){var o=bu(t.namespaceURI,"Point");t.appendChild(o),this.Hi(o,e,i)},t.Di=function(t,e,i){var o=this.a(e,i);o&&(t.appendChild(o),this.$e(o,e,i))},t.Yc=function(t,e,i){var o,r=i[i.length-1],n=ot({},r);n.node=t,o=Array.isArray(e)?r.dataProjection?Wt(e,r.featureProjection,r.dataProjection):e:Yu(e,!0,r),Gu(n,Ac,this.a,[o],i,void 0,this)},t.Ci=function(t,e,i){var o=e.c;o&&t.setAttribute("fid",o);var r=(o=i[i.length-1]).featureNS,n=e.a;o.tb||(o.tb={},o.tb[r]={});var s=e.L();e=[];var a=[];for(l in s){var h=s[l];null!==h&&(e.push(l),a.push(h),l==n||h instanceof wo?l in o.tb[r]||(o.tb[r][l]=Mu(this.Yc,this)):l in o.tb[r]||(o.tb[r][l]=Mu(Tc)))}var l=ot({},o);l.node=t,Gu(l,o.tb,Au(void 0,r),a,i,e)};var Pc={"http://www.opengis.net/gml":{surfaceMember:Mu(wc.prototype.Ji),polygonMember:Mu(wc.prototype.Ji)}},Ic={"http://www.opengis.net/gml":{pointMember:Mu(wc.prototype.Rn)}},Mc={"http://www.opengis.net/gml":{lineStringMember:Mu(wc.prototype.Di),curveMember:Mu(wc.prototype.Di)}},Lc={"http://www.opengis.net/gml":{exterior:Mu(wc.prototype.Ii),interior:Mu(wc.prototype.Ii)}},Ac={"http://www.opengis.net/gml":{Curve:Mu(wc.prototype.$e),MultiCurve:Mu(wc.prototype.Fi),Point:Mu(wc.prototype.Hi),MultiPoint:Mu(wc.prototype.Qn),LineString:Mu(wc.prototype.$e),MultiLineString:Mu(wc.prototype.Fi),LinearRing:Mu(wc.prototype.Ei),Polygon:Mu(wc.prototype.af),MultiPolygon:Mu(wc.prototype.Gi),Surface:Mu(wc.prototype.af),MultiSurface:Mu(wc.prototype.Gi),Envelope:Mu(wc.prototype.Pn)}},Oc={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};function Fc(t){t=t||{},uc.call(this,t),this.b["http://www.opengis.net/gml"].featureMember=Cu(uc.prototype.ge),this.schemaLocation=t.schemaLocation?t.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}function Nc(t){return(t=bu(t,"coordinates")).setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}function Dc(t,e,i){var o=i[i.length-1];i=o.hasZ,o=o.srsName;for(var r,n=(e=e.W()).length,s=Array(n),a=0;a<n;++a)r=e[a],s[a]=jc(r,o,i);Tc(t,s.join(" "))}function jc(t,e,i){var o="enu";return e&&(o=Dt(e).b),e="en"===o.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0],i&&(e+=","+(t[2]||0)),e}wc.prototype.l=function(t,e){return bu("http://www.opengis.net/gml",Oc[e[e.length-1].node.nodeName])},wc.prototype.a=function(t,e){var i=e[e.length-1];e=i.multiSurface;var o=i.surface,r=i.curve;return i=i.multiCurve,Array.isArray(t)?t="Envelope":"MultiPolygon"===(t=t.S())&&!0===e?t="MultiSurface":"Polygon"===t&&!0===o?t="Surface":"LineString"===t&&!0===r?t="Curve":"MultiLineString"===t&&!0===i&&(t="MultiCurve"),bu("http://www.opengis.net/gml",t)},wc.prototype.re=function(t,e){e=Xu(this,e);var i=bu("http://www.opengis.net/gml","geom"),o={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.c,surface:this.s,multiSurface:this.j,multiCurve:this.f};return e&&ot(o,e),this.Yc(i,t,[o]),i},wc.prototype.bc=function(t,e){e=Xu(this,e);var i=bu("http://www.opengis.net/gml","featureMembers");i.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var o={srsName:this.srsName,hasZ:this.hasZ,curve:this.c,surface:this.s,multiSurface:this.j,multiCurve:this.f,featureNS:this.featureNS,featureType:this.featureType};e&&ot(o,e);var r=(e=[o])[e.length-1];o=r.featureType;var n=r.featureNS,s={};return s[n]={},s[n][o]=Mu(this.Ci,this),(r=ot({},r)).node=i,Gu(r,s,Au(o,n),t,e),i},s(Fc,uc),(t=Fc.prototype).uj=function(t,e){t=xu(t,!1).replace(/^\s*|\s*$/g,"");var i=e[0].srsName;e="enu",i&&(i=Dt(i))&&(e=i.b);for(var o,r,n=[],s=0,a=(t=t.trim().split(/\s+/)).length;s<a;s++)r=t[s].split(/,+/),i=parseFloat(r[0]),o=parseFloat(r[1]),r=3===r.length?parseFloat(r[2]):0,"en"===e.substr(0,2)?n.push(i,o,r):n.push(o,i,r);return n},t.Up=function(t,e){return F((t=ju([null],this.dk,t,e,this))[1][0],t[1][1],t[1][3],t[1][4])},t.Dm=function(t,e){(t=ju(void 0,this.ue,t,e,this))&&e[e.length-1].push(t)},t.Ep=function(t,e){(t=ju(void 0,this.ue,t,e,this))&&(e[e.length-1][0]=t)},t.te={"http://www.opengis.net/gml":{coordinates:Ru(Fc.prototype.uj)}},t.Gf={"http://www.opengis.net/gml":{innerBoundaryIs:Fc.prototype.Dm,outerBoundaryIs:Fc.prototype.Ep}},t.dk={"http://www.opengis.net/gml":{coordinates:Cu(Fc.prototype.uj)}},t.qh={"http://www.opengis.net/gml":{Point:Ru(uc.prototype.Aj),MultiPoint:Ru(uc.prototype.yj),LineString:Ru(uc.prototype.sf),MultiLineString:Ru(uc.prototype.xj),LinearRing:Ru(uc.prototype.wj),Polygon:Ru(uc.prototype.tf),MultiPolygon:Ru(uc.prototype.zj),Box:Ru(Fc.prototype.Up)}},t.wg=function(t,e){var i=e[e.length-1];e=i.multiSurface;var o=i.surface;return i=i.multiCurve,Array.isArray(t)?t="Envelope":"MultiPolygon"===(t=t.S())&&!0===e?t="MultiSurface":"Polygon"===t&&!0===o?t="Surface":"MultiLineString"===t&&!0===i&&(t="MultiCurve"),bu("http://www.opengis.net/gml",t)},t.ui=function(t,e,i){var o,r=i[i.length-1],n=ot({},r);n.node=t,o=Array.isArray(e)?r.dataProjection?Wt(e,r.featureProjection,r.dataProjection):e:Yu(e,!0,r),Gu(n,kc,this.wg,[o],i,void 0,this)},t.Ye=function(t,e,i){var o=i[i.length-1].srsName;"LineStringSegment"!==t.nodeName&&o&&t.setAttribute("srsName",o),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName?(o=Nc(t.namespaceURI),t.appendChild(o),Dc(o,e,i)):"Curve"===t.nodeName&&(o=bu(t.namespaceURI,"segments"),t.appendChild(o),t=bu(o.namespaceURI,"LineStringSegment"),o.appendChild(t),this.Ye(t,e,i))},t.Ze=function(t,e,i){var o=i[i.length-1],r=o.hasZ;o=o.srsName,"PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName?(e=e.Ud(),Gu({node:t,hasZ:r,srsName:o},Gc,this.Kn,e,i,void 0,this)):"Surface"===t.nodeName&&(r=bu(t.namespaceURI,"patches"),t.appendChild(r),t=bu(r.namespaceURI,"PolygonPatch"),r.appendChild(t),this.Ze(t,e,i))},t.Kn=function(t,e){e=(t=e[e.length-1]).node;var i=t.exteriorWritten;return void 0===i&&(t.exteriorWritten=!0),bu(e.namespaceURI,void 0!==i?"innerBoundaryIs":"outerBoundaryIs")},t.Ai=function(t,e,i){var o=bu(t.namespaceURI,"LinearRing");t.appendChild(o),this.wi(o,e,i)},t.xi=function(t,e,i){var o=i[i.length-1],r=o.hasZ,n=o.srsName;o=o.curve,n&&t.setAttribute("srsName",n),e=e.wd(),Gu({node:t,hasZ:r,srsName:n,curve:o},Bc,this.a,e,i,void 0,this)},t.zi=function(t,e,i){var o=i[i.length-1];i=o.hasZ;var r=o.srsName;r&&t.setAttribute("srsName",r),o=Nc(t.namespaceURI),t.appendChild(o),Tc(o,t=jc(t=e.W(),r,i))},t.Mn=function(t,e,i){var o=i[i.length-1],r=o.hasZ;(o=o.srsName)&&t.setAttribute("srsName",o),e=e.de(),Gu({node:t,hasZ:r,srsName:o},Uc,Au("pointMember"),e,i,void 0,this)},t.Nn=function(t,e,i){var o=bu(t.namespaceURI,"Point");t.appendChild(o),this.zi(o,e,i)},t.vi=function(t,e,i){var o=this.wg(e,i);o&&(t.appendChild(o),this.Ye(o,e,i))},t.wi=function(t,e,i){var o=i[i.length-1].srsName;o&&t.setAttribute("srsName",o),o=Nc(t.namespaceURI),t.appendChild(o),Dc(o,e,i)},t.yi=function(t,e,i){var o=i[i.length-1],r=o.hasZ,n=o.srsName;o=o.surface,n&&t.setAttribute("srsName",n),e=e.Vd(),Gu({node:t,hasZ:r,srsName:n,surface:o},Wc,this.a,e,i,void 0,this)},t.Bi=function(t,e,i){var o=this.wg(e,i);o&&(t.appendChild(o),this.Ze(o,e,i))},t.Ln=function(t,e,i){var o=i[i.length-1].srsName;o&&t.setAttribute("srsName",o),Gu({node:t},Xc,Ou,[e[0]+" "+e[1],e[2]+" "+e[3]],i,["lowerCorner","upperCorner"],this)};var kc={"http://www.opengis.net/gml":{Curve:Mu(Fc.prototype.Ye),MultiCurve:Mu(Fc.prototype.xi),Point:Mu(Fc.prototype.zi),MultiPoint:Mu(Fc.prototype.Mn),LineString:Mu(Fc.prototype.Ye),MultiLineString:Mu(Fc.prototype.xi),LinearRing:Mu(Fc.prototype.wi),Polygon:Mu(Fc.prototype.Ze),MultiPolygon:Mu(Fc.prototype.yi),Surface:Mu(Fc.prototype.Ze),MultiSurface:Mu(Fc.prototype.yi),Envelope:Mu(Fc.prototype.Ln)}},Gc={"http://www.opengis.net/gml":{outerBoundaryIs:Mu(Fc.prototype.Ai),innerBoundaryIs:Mu(Fc.prototype.Ai)}},Uc={"http://www.opengis.net/gml":{pointMember:Mu(Fc.prototype.Nn)}},Bc={"http://www.opengis.net/gml":{lineStringMember:Mu(Fc.prototype.vi),curveMember:Mu(Fc.prototype.vi)}};Fc.prototype.a=function(t,e){return bu("http://www.opengis.net/gml",Vc[e[e.length-1].node.nodeName])};var Vc={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Wc={"http://www.opengis.net/gml":{surfaceMember:Mu(Fc.prototype.Bi),polygonMember:Mu(Fc.prototype.Bi)}},Xc={"http://www.opengis.net/gml":{lowerCorner:Mu(Tc),upperCorner:Mu(Tc)}};function Yc(t){t=t||{},hc.call(this),this.defaultDataProjection=Dt("EPSG:4326"),this.b=t.readExtensions}s(Yc,hc);var zc=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function Kc(t,e,i,o){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in o?(t.push(o.ele),delete o.ele,e.hasZ=!0):t.push(0),"time"in o?(t.push(o.time),delete o.time,e.hasM=!0):t.push(0),t}function Hc(t,e,i){var o="XY",r=2;if(t.hasZ&&t.hasM?(o="XYZM",r=4):t.hasZ?(o="XYZ",r=3):t.hasM&&(o="XYM",r=3),4!==r){var n,s=0;for(n=e.length/4;s<n;s++)e[s*r]=e[4*s],e[s*r+1]=e[4*s+1],t.hasZ&&(e[s*r+2]=e[4*s+2]),t.hasM&&(e[s*r+2]=e[4*s+3]);if(e.length=e.length/4*r,i)for(s=0,n=i.length;s<n;s++)i[s]=i[s]/4*r}return o}function $c(t,e){var i=e[e.length-1],o=t.getAttribute("href");null!==o&&(i.link=o),Du(of,t,e)}function qc(t,e){e[e.length-1].extensionsNode_=t}function Zc(t,e){var i=e[0];if(t=ju({flatCoordinates:[],layoutOptions:{}},rf,t,e)){e=t.flatCoordinates,delete t.flatCoordinates;var o=t.layoutOptions;delete t.layoutOptions,o=Hc(o,e);var r=new yh(null);return r.ba(o,e),Yu(r,!1,i),(i=new uh(r)).H(t),i}}function Jc(t,e){var i=e[0];if(t=ju({flatCoordinates:[],ends:[],layoutOptions:{}},sf,t,e)){e=t.flatCoordinates,delete t.flatCoordinates;var o=t.ends;delete t.ends;var r=t.layoutOptions;delete t.layoutOptions,r=Hc(r,e,o);var n=new Hu(null);return n.ba(r,e,o),Yu(n,!1,i),(i=new uh(n)).H(t),i}}function Qc(t,e){var i=e[0];if(e=ju({},lf,t,e)){var o={};return Yu(t=new Ko(t=Kc([],o,t,e),o=Hc(o,t)),!1,i),(i=new uh(t)).H(e),i}}var tf={rte:Zc,trk:Jc,wpt:Qc},ef=Nu(zc,{rte:Cu(Zc),trk:Cu(Jc),wpt:Cu(Qc)}),of=Nu(zc,{text:Iu(bc,"linkText"),type:Iu(bc,"linkType")}),rf=Nu(zc,{name:Iu(bc),cmt:Iu(bc),desc:Iu(bc),src:Iu(bc),link:$c,number:Iu(mc),extensions:qc,type:Iu(bc),rtept:function(t,e){var i=ju({},nf,t,e);i&&Kc((e=e[e.length-1]).flatCoordinates,e.layoutOptions,t,i)}}),nf=Nu(zc,{ele:Iu(gc),time:Iu(yc)}),sf=Nu(zc,{name:Iu(bc),cmt:Iu(bc),desc:Iu(bc),src:Iu(bc),link:$c,number:Iu(mc),type:Iu(bc),extensions:qc,trkseg:function(t,e){var i=e[e.length-1];Du(af,t,e),i.ends.push(i.flatCoordinates.length)}}),af=Nu(zc,{trkpt:function(t,e){var i=ju({},hf,t,e);i&&Kc((e=e[e.length-1]).flatCoordinates,e.layoutOptions,t,i)}}),hf=Nu(zc,{ele:Iu(gc),time:Iu(yc)}),lf=Nu(zc,{ele:Iu(gc),time:Iu(yc),magvar:Iu(gc),geoidheight:Iu(gc),name:Iu(bc),cmt:Iu(bc),desc:Iu(bc),src:Iu(bc),link:$c,sym:Iu(bc),type:Iu(bc),fix:Iu(bc),sat:Iu(mc),hdop:Iu(gc),vdop:Iu(gc),pdop:Iu(gc),ageofdgpsdata:Iu(gc),dgpsid:Iu(mc),extensions:qc});function pf(t,e){e||(e=[]);for(var i=0,o=e.length;i<o;++i){var r=e[i];if(t.b){var n=r.get("extensionsNode_")||null;t.b(r,n)}r.set("extensionsNode_",void 0)}}function uf(t,e,i){t.setAttribute("href",e),e=i[i.length-1].properties,Gu({node:t},df,Ou,[e.linkText,e.linkType],i,ff)}function cf(t,e,i){var o=i[i.length-1],r=o.node.namespaceURI,n=o.properties;switch(t.setAttributeNS(null,"lat",e[1]),t.setAttributeNS(null,"lon",e[0]),o.geometryLayout){case"XYZM":0!==e[3]&&(n.time=e[3]);case"XYZ":0!==e[2]&&(n.ele=e[2]);break;case"XYM":0!==e[2]&&(n.time=e[2])}o=Fu(n,e="rtept"==t.nodeName?vf[r]:Ef[r]),Gu({node:t,properties:n},Sf,Ou,o,i,e)}Yc.prototype.Lg=function(t,e){if(!zt(zc,t.namespaceURI))return null;var i=tf[t.localName];return i&&(t=i(t,[Wu(this,t,e)]))?(pf(this,[t]),t):null},Yc.prototype.Kc=function(t,e){return zt(zc,t.namespaceURI)&&"gpx"==t.localName&&(t=ju([],ef,t,[Wu(this,t,e)]))?(pf(this,t),t):[]};var ff=["text","type"],df=Nu(zc,{text:Mu(Tc),type:Mu(Tc)}),yf=Nu(zc,"name cmt desc src link number type rtept".split(" ")),gf=Nu(zc,{name:Mu(Tc),cmt:Mu(Tc),desc:Mu(Tc),src:Mu(Tc),link:Mu(uf),number:Mu(Sc),type:Mu(Tc),rtept:Lu(Mu(cf))}),vf=Nu(zc,["ele","time"]),mf=Nu(zc,"name cmt desc src link number type trkseg".split(" ")),_f=Nu(zc,{name:Mu(Tc),cmt:Mu(Tc),desc:Mu(Tc),src:Mu(Tc),link:Mu(uf),number:Mu(Sc),type:Mu(Tc),trkseg:Lu(Mu(function(t,e,i){Gu({node:t,geometryLayout:e.ja,properties:{}},xf,bf,e.W(),i)}))}),bf=Au("trkpt"),xf=Nu(zc,{trkpt:Mu(cf)}),Ef=Nu(zc,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Sf=Nu(zc,{ele:Mu(Ec),time:Mu(function(t,e){e=new Date(1e3*e),t.appendChild(_u.createTextNode(e.getUTCFullYear()+"-"+zi(e.getUTCMonth()+1)+"-"+zi(e.getUTCDate())+"T"+zi(e.getUTCHours())+":"+zi(e.getUTCMinutes())+":"+zi(e.getUTCSeconds())+"Z"))}),magvar:Mu(Ec),geoidheight:Mu(Ec),name:Mu(Tc),cmt:Mu(Tc),desc:Mu(Tc),src:Mu(Tc),link:Mu(uf),sym:Mu(Tc),type:Mu(Tc),fix:Mu(Tc),sat:Mu(Sc),hdop:Mu(Ec),vdop:Mu(Ec),pdop:Mu(Ec),ageofdgpsdata:Mu(Ec),dgpsid:Mu(Sc)}),Tf={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function wf(t,e){if((t=t.U())&&(t=Tf[t.S()]))return bu(e[e.length-1].node.namespaceURI,t)}var Cf=Nu(zc,{rte:Mu(function(t,e,i){var o=i[0],r=e.L();t={node:t,properties:r},(e=e.U())&&(e=Yu(e,!0,o),t.geometryLayout=e.ja,r.rtept=e.W()),r=Fu(r,o=yf[i[i.length-1].node.namespaceURI]),Gu(t,gf,Ou,r,i,o)}),trk:Mu(function(t,e,i){var o=i[0],r=e.L();t={node:t,properties:r},(e=e.U())&&(e=Yu(e,!0,o),r.trkseg=e.wd()),r=Fu(r,o=mf[i[i.length-1].node.namespaceURI]),Gu(t,_f,Ou,r,i,o)}),wpt:Mu(function(t,e,i){var o=i[0],r=i[i.length-1];r.properties=e.L(),(e=e.U())&&(e=Yu(e,!0,o),r.geometryLayout=e.ja,cf(t,e.W(),i))})});function Rf(t){wo.call(this),this.a=t||null,Mf(this)}function Pf(t){var e,i=[],o=0;for(e=t.length;o<e;++o)i.push(t[o].clone());return i}function If(t){var e;if(t.a){var i=0;for(e=t.a.length;i<e;++i)_e(t.a[i],"change",t.u,t)}}function Mf(t){var e;if(t.a){var i=0;for(e=t.a.length;i<e;++i)ve(t.a[i],"change",t.u,t)}}function Lf(t){t=t||{},Vu.call(this),this.defaultDataProjection=Dt(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326"),t.featureProjection&&(this.i=Dt(t.featureProjection)),this.b=t.geometryName,this.a=t.extractGeometryName}function Af(t,e){return t?Yu((0,Ff[t.type])(t),!1,e):null}function Of(t,e){return(0,Nf[t.S()])(Yu(t,!0,e),e)}Yc.prototype.bc=function(t,e){e=Xu(this,e);var i=bu("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),i.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Gu({node:i},Cf,wf,t,[e]),i},s(Rf,wo),(t=Rf.prototype).clone=function(){var t=new Rf(null);return t.Kj(this.a),t},t.Nb=function(t,e,i,o){if(o<P(this.G(),t,e))return o;var r,n=this.a,s=0;for(r=n.length;s<r;++s)o=n[s].Nb(t,e,i,o);return o},t.Zc=function(t,e){var i,o=this.a,r=0;for(i=o.length;r<i;++r)if(o[r].Zc(t,e))return!0;return!1},t.Ae=function(t){N(t);for(var e=this.a,i=0,o=e.length;i<o;++i)G(t,e[i].G());return t},t.vd=function(){return Pf(this.a)},t.Wd=function(t){if(this.l!=this.g&&(rt(this.i),this.f=0,this.l=this.g),0>t||0!==this.f&&t<this.f)return this;var e=t.toString();if(this.i.hasOwnProperty(e))return this.i[e];var i,o=[],r=this.a,n=!1,s=0;for(i=r.length;s<i;++s){var a=r[s],h=a.Wd(t);o.push(h),h!==a&&(n=!0)}return n?(If(t=new Rf(null)),t.a=o,Mf(t),t.u(),this.i[e]=t):(this.f=t,this)},t.S=function(){return"GeometryCollection"},t.$a=function(t){var e,i=this.a,o=0;for(e=i.length;o<e;++o)if(i[o].$a(t))return!0;return!1},t.rotate=function(t,e){for(var i=this.a,o=0,r=i.length;o<r;++o)i[o].rotate(t,e);this.u()},t.scale=function(t,e,i){i||(i=z(this.G()));for(var o=this.a,r=0,n=o.length;r<n;++r)o[r].scale(t,e,i);this.u()},t.Kj=function(t){t=Pf(t),If(this),this.a=t,Mf(this),this.u()},t.Rc=function(t){var e,i=this.a,o=0;for(e=i.length;o<e;++o)i[o].Rc(t);this.u()},t.translate=function(t,e){var i,o=this.a,r=0;for(i=o.length;r<i;++r)o[r].translate(t,e);this.u()},t.ia=function(){If(this),wo.prototype.ia.call(this)},s(Lf,zu);var Ff={Point:function(t){return new Ko(t.coordinates)},LineString:function(t){return new yh(t.coordinates)},Polygon:function(t){return new nr(t.coordinates)},MultiPoint:function(t){return new qu(t.coordinates)},MultiLineString:function(t){return new Hu(t.coordinates)},MultiPolygon:function(t){return new Zu(t.coordinates)},GeometryCollection:function(t,e){return new Rf(t=t.geometries.map(function(t){return Af(t,e)}))}},Nf={Point:function(t){return{type:"Point",coordinates:t.W()}},LineString:function(t){return{type:"LineString",coordinates:t.W()}},Polygon:function(t,e){if(e)var i=e.rightHanded;return{type:"Polygon",coordinates:t.W(i)}},MultiPoint:function(t){return{type:"MultiPoint",coordinates:t.W()}},MultiLineString:function(t){return{type:"MultiLineString",coordinates:t.W()}},MultiPolygon:function(t,e){if(e)var i=e.rightHanded;return{type:"MultiPolygon",coordinates:t.W(i)}},GeometryCollection:function(t,e){return{type:"GeometryCollection",geometries:t.a.map(function(t){var i=ot({},e);return delete i.featureProjection,Of(t,i)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};function Df(){Vu.call(this)}function jf(t){return"string"==typeof t?t:""}function kf(t){t=t||{},Vu.call(this),this.defaultDataProjection=Dt("EPSG:4326"),this.b=t.altitudeMode?t.altitudeMode:"none"}(t=Lf.prototype).dd=function(t,e){e=Af((t="Feature"===t.type?t:{type:"Feature",geometry:t}).geometry,e);var i=new uh;return this.b?i.Lc(this.b):this.a&&void 0!==t.geometry_name&&i.Lc(t.geometry_name),i.Va(e),void 0!==t.id&&i.qc(t.id),t.properties&&i.H(t.properties),i},t.Mg=function(t,e){if("FeatureCollection"===t.type){var i,o=[],r=0;for(i=(t=t.features).length;r<i;++r)o.push(this.dd(t[r],e))}else o=[this.dd(t,e)];return o},t.Qg=function(t,e){return Af(t,e)},t.Tg=function(t){var e;return(t=t.crs)?"name"==t.type?e=Dt(t.properties.name):d(!1,36):e=this.defaultDataProjection,e},t.ld=function(t,e){e=Xu(this,e);var i={type:"Feature"},o=t.c;return void 0!==o&&(i.id=o),(o=t.U())?i.geometry=Of(o,e):i.geometry=null,delete(e=t.L())[t.a],st(e)?i.properties=null:i.properties=e,i},t.qe=function(t,e){e=Xu(this,e);var i,o=[],r=0;for(i=t.length;r<i;++r)o.push(this.ld(t[r],e));return{type:"FeatureCollection",features:o}},t.se=function(t,e){return Of(t,Xu(this,e))},s(Df,Vu),(t=Df.prototype).S=function(){return"text"},t.Yb=function(t,e){return this.fe(jf(t),Xu(this,e))},t.Qa=function(t,e){return this.Ng(jf(t),Xu(this,e))},t.ed=function(t,e){return this.Gd(jf(t),Xu(this,e))},t.sb=function(){return this.defaultDataProjection},t.Jd=function(t,e){return this.pe(t,Xu(this,e))},t.ac=function(t,e){return this.nh(t,Xu(this,e))},t.md=function(t,e){return this.Kd(t,Xu(this,e))},s(kf,Df);var Gf,Uf,Bf,Vf,Wf,Xf,Yf,zf,Kf,Hf,$f,qf,Zf,Jf,Qf,td=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,ed=/^H.([A-Z]{3}).*?:(.*)/,id=/^HFDTE(\d{2})(\d{2})(\d{2})/,od=/\r\n|\r|\n/;function rd(t,e,i,o,r,n){Ce.call(this),this.j=null,this.M=t||new Image,null!==o&&(this.M.crossOrigin=o),this.c=n?document.createElement("CANVAS"):null,this.f=n,this.i=null,this.g=r,this.a=i,this.l=e,this.s=!1,2==this.g&&nd(this)}function nd(t){var e=mr(1,1);try{e.drawImage(t.M,0,0),e.getImageData(0,0,1,1)}catch(e){t.s=!0}}function sd(t){t=t||{},this.l=void 0!==t.anchor?t.anchor:[.5,.5],this.o=null,this.g=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.C=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.B=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.qa=void 0!==t.crossOrigin?t.crossOrigin:null;var e=void 0!==t.img?t.img:null,i=void 0!==t.imgSize?t.imgSize:null,o=t.src;d(!(void 0!==o&&e),4),d(!e||e&&i,5),void 0!==o&&0!==o.length||!e||(o=e.src||h(e).toString()),d(void 0!==o&&0<o.length,6);var r=void 0!==t.src?0:2;this.j=void 0!==t.color?ms(t.color):null;var n=this.qa,s=this.j,a=zs.get(o,n,s);a||(a=new rd(e,o,i,n,r,s),zs.set(o,n,s,a)),this.b=a,this.oa=void 0!==t.offset?t.offset:[0,0],this.c=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.N=null,this.D=void 0!==t.size?t.size:null,Qa.call(this,{opacity:void 0!==t.opacity?t.opacity:1,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView})}function ad(t){t=t||{},hc.call(this),Gf||(Bf=new oh({color:Uf=[255,255,255,1]}),Xf=Wf="pixels",Hf=new sd({anchor:Vf=[20,2],anchorOrigin:"bottom-left",anchorXUnits:Wf,anchorYUnits:Xf,crossOrigin:"anonymous",rotation:0,scale:Kf=.5,size:Yf=[64,64],src:zf="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),$f="NO_IMAGE",qf=new rh({color:Uf,width:1}),Zf=new rh({color:[51,51,51,1],width:2}),Jf=new vh({font:"bold 16px Helvetica",fill:Bf,stroke:Zf,scale:.8}),Qf=new nh({fill:Bf,image:Hf,text:Jf,stroke:qf,zIndex:0}),Gf=[Qf]),this.defaultDataProjection=Dt("EPSG:4326"),this.a=t.defaultStyle?t.defaultStyle:Gf,this.c=void 0===t.extractStyles||t.extractStyles,this.j=void 0===t.writeStyles||t.writeStyles,this.b={},this.f=void 0===t.showPointNames||t.showPointNames}(t=kf.prototype).fe=function(t,e){var i=this.b,o=t.split(od);t={};var r,n=[],s=2e3,a=0,h=1,l=-1,p=0;for(r=o.length;p<r;++p){var u,c=o[p];if("B"==c.charAt(0)){if(u=td.exec(c)){c=parseInt(u[1],10);var f=parseInt(u[2],10),d=parseInt(u[3],10),y=parseInt(u[4],10)+parseInt(u[5],10)/6e4;"S"==u[6]&&(y=-y);var g=parseInt(u[7],10)+parseInt(u[8],10)/6e4;"W"==u[9]&&(g=-g),n.push(g,y),"none"!=i&&n.push("gps"==i?parseInt(u[11],10):"barometric"==i?parseInt(u[12],10):0),(u=Date.UTC(s,a,h,c,f,d))<l&&(u=Date.UTC(s,a,h+1,c,f,d)),n.push(u/1e3),l=u}}else"H"==c.charAt(0)&&((u=id.exec(c))?(h=parseInt(u[1],10),a=parseInt(u[2],10)-1,s=2e3+parseInt(u[3],10)):(u=ed.exec(c))&&(t[u[1]]=u[2].trim()))}return 0===n.length?null:((o=new yh(null)).ba("none"==i?"XYM":"XYZM",n),(e=new uh(Yu(o,!1,e))).H(t),e)},t.Ng=function(t,e){return(t=this.fe(t,e))?[t]:[]},t.pe=function(){},t.nh=function(){},t.Kd=function(){},t.Gd=function(){},s(rd,Ce),rd.prototype.v=function(){this.g=3,this.i.forEach(be),this.i=null,this.b("change")},rd.prototype.o=function(){if(this.g=2,this.a&&(this.M.width=this.a[0],this.M.height=this.a[1]),this.a=[this.M.width,this.M.height],this.i.forEach(be),this.i=null,nd(this),!this.s&&null!==this.f){this.c.width=this.M.width,this.c.height=this.M.height;var t=this.c.getContext("2d");t.drawImage(this.M,0,0);for(var e=t.getImageData(0,0,this.M.width,this.M.height),i=e.data,o=this.f[0]/255,r=this.f[1]/255,n=this.f[2]/255,s=0,a=i.length;s<a;s+=4)i[s]*=o,i[s+1]*=r,i[s+2]*=n;t.putImageData(e,0,0)}this.b("change")},rd.prototype.Y=function(){return this.c?this.c:this.M},rd.prototype.load=function(){if(0==this.g){this.g=1,this.i=[me(this.M,"error",this.v,this),me(this.M,"load",this.o,this)];try{this.M.src=this.l}catch(t){this.v()}}},s(sd,Qa),(t=sd.prototype).clone=function(){return new sd({anchor:this.l.slice(),anchorOrigin:this.g,anchorXUnits:this.C,anchorYUnits:this.B,crossOrigin:this.qa,color:this.j&&this.j.slice?this.j.slice():this.j||void 0,src:this.b.l,offset:this.oa.slice(),offsetOrigin:this.c,size:null!==this.D?this.D.slice():void 0,opacity:this.i,scale:this.a,snapToPixel:this.v,rotation:this.f,rotateWithView:this.s})},t.Vc=function(){if(this.o)return this.o;var t=this.l,e=this.oc();if("fraction"==this.C||"fraction"==this.B){if(!e)return null;t=this.l.slice(),"fraction"==this.C&&(t[0]*=e[0]),"fraction"==this.B&&(t[1]*=e[1])}if("top-left"!=this.g){if(!e)return null;t===this.l&&(t=this.l.slice()),"top-right"!=this.g&&"bottom-right"!=this.g||(t[0]=-t[0]+e[0]),"bottom-left"!=this.g&&"bottom-right"!=this.g||(t[1]=-t[1]+e[1])}return this.o=t},t.np=function(){return this.j},t.Y=function(t){return this.b.Y(t)},t.He=function(){return this.b.a},t.gf=function(){return this.b.g},t.Eg=function(){var t=this.b;if(!t.j)if(t.s){var e=t.a[0],i=t.a[1],o=mr(e,i);o.fillRect(0,0,e,i),t.j=o.canvas}else t.j=t.M;return t.j},t.bd=function(){if(this.N)return this.N;var t=this.oa;if("top-left"!=this.c){var e=this.oc(),i=this.b.a;if(!e||!i)return null;t=t.slice(),"top-right"!=this.c&&"bottom-right"!=this.c||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.c&&"bottom-right"!=this.c||(t[1]=i[1]-e[1]-t[1])}return this.N=t},t.op=function(){return this.b.l},t.oc=function(){return this.D?this.D:this.b.a},t.gi=function(t,e){ve(this.b,"change",t,e)},t.load=function(){this.b.load()},t.Yj=function(t,e){_e(this.b,"change",t,e)},s(ad,hc);var hd=["http://www.google.com/kml/ext/2.2"],ld=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],pd={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"};function ud(t,e){var i=[0,0],o="start";if(t.Y()){var r=t.Y().He();null===r&&(r=Yf),2==r.length&&(o=t.Y().a,i[0]=o*r[0]/2,i[1]=-o*r[1]/2,o="left")}return null!==t.Ka()?((t=(r=t.Ka()).clone()).Jj(r.a||Jf.a),t.lj(r.b||Jf.b),t.yf(r.Fa()||Jf.Fa()),t.Af(r.Ga()||Zf)):t=Jf.clone(),t.Hd(e),t.Nj(i[0]),t.Oj(i[1]),t.Qj(o),new nh({text:t})}function cd(t,e,i,o,r){return function(){var n=r,s="";if(n&&this.U()&&(n="Point"===this.U().S()),n&&(s=this.get("name"),n=n&&s),t)return n?(n=ud(t[0],s),t.concat(n)):t;if(e){var a=function t(e,i,o){return Array.isArray(e)?e:"string"==typeof e?(!(e in o)&&"#"+e in o&&(e="#"+e),t(o[e],i,o)):i}(e,i,o);return n?(n=ud(a[0],s),a.concat(n)):a}return n?(n=ud(i[0],s),i.concat(n)):i}}function fd(t){if(t=xu(t,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t))return t=t[1],[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}function dd(t){t=xu(t,!1);for(var e,i=[],o=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=o.exec(t);)i.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),t=t.substr(e[0].length);if(""===t)return i}function yd(t){var e=xu(t,!1).trim();return(t=t.baseURI)&&"about:blank"!=t||(t=window.location.href),t?new URL(e,t).href:e}function gd(t){return gc(t)}function vd(t,e){return ju(null,Fd,t,e)}function md(t,e){if(e=ju({A:[],ak:[]},Dd,t,e)){var i;t=e.A,e=e.ak;var o=0;for(i=Math.min(t.length,e.length);o<i;++o)t[4*o+3]=e[o];return(e=new yh(null)).ba("XYZM",t),e}}function _d(t,e){var i=ju({},Od,t,e);if(t=ju(null,jd,t,e))return(e=new yh(null)).ba("XYZ",t),e.H(i),e}function bd(t,e){var i=ju({},Od,t,e);if(t=ju(null,jd,t,e))return(e=new nr(null)).ba("XYZ",t,[t.length]),e.H(i),e}function xd(t,e){if(!(t=ju([],Wd,t,e)))return null;if(0===t.length)return new Rf(t);var i,o=!0,r=t[0].S(),n=1;for(i=t.length;n<i;++n)if((e=t[n]).S()!=r){o=!1;break}if(o)if("Point"==r){var s=t[0];for(o=s.ja,r=s.da(),n=1,i=t.length;n<i;++n)Ht(r,(e=t[n]).da());(s=new qu(null)).ba(o,r),wd(s,t)}else"LineString"==r?($u(s=new Hu(null),t),wd(s,t)):"Polygon"==r?(tc(s=new Zu(null),t),wd(s,t)):"GeometryCollection"==r?s=new Rf(t):d(!1,37);else s=new Rf(t);return s}function Ed(t,e){var i=ju({},Od,t,e);if(t=ju(null,jd,t,e))return(e=new Ko(null)).ba("XYZ",t),e.H(i),e}function Sd(t,e){var i=ju({},Od,t,e);if((t=ju([null],Nd,t,e))&&t[0]){e=new nr(null);var o,r=t[0],n=[r.length],s=1;for(o=t.length;s<o;++s)Ht(r,t[s]),n.push(r.length);return e.ba("XYZ",r,n),e.H(i),e}}function Td(t,e){if(!(e=ju({},Jd,t,e)))return null;t="fillStyle"in e?e.fillStyle:Bf;var i=e.fill;void 0===i||i||(t=null),(i="imageStyle"in e?e.imageStyle:Hf)==$f&&(i=void 0);var o="textStyle"in e?e.textStyle:Jf,r="strokeStyle"in e?e.strokeStyle:qf;return void 0===(e=e.outline)||e||(r=null),[new nh({fill:t,image:i,stroke:r,text:o,zIndex:void 0})]}function wd(t,e){var i,o,r,n=e.length,s=Array(e.length),a=Array(e.length),h=Array(e.length),l=o=r=!1;for(i=0;i<n;++i){var p=e[i];s[i]=p.get("extrude"),a[i]=p.get("tessellate"),h[i]=p.get("altitudeMode"),l=l||void 0!==s[i],o=o||void 0!==a[i],r=r||h[i]}l&&t.set("extrude",s),o&&t.set("tessellate",a),r&&t.set("altitudeMode",h)}function Cd(t,e){Du(Id,t,e)}function Rd(t,e){Du(Md,t,e)}var Pd=Nu(ld,{displayName:Iu(bc),value:Iu(bc)}),Id=Nu(ld,{Data:function(t,e){var i=t.getAttribute("name");Du(Pd,t,e),t=e[e.length-1],null!==i?t[i]=t.value:null!==t.displayName&&(t[t.displayName]=t.value),delete t.value},SchemaData:function(t,e){Du(Zd,t,e)}}),Md=Nu(ld,{LatLonAltBox:function(t,e){(t=ju({},Ld,t,e))&&((e=e[e.length-1]).extent=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)],e.altitudeMode=t.altitudeMode,e.minAltitude=parseFloat(t.minAltitude),e.maxAltitude=parseFloat(t.maxAltitude))},Lod:function(t,e){(t=ju({},Ad,t,e))&&((e=e[e.length-1]).minLodPixels=parseFloat(t.minLodPixels),e.maxLodPixels=parseFloat(t.maxLodPixels),e.minFadeExtent=parseFloat(t.minFadeExtent),e.maxFadeExtent=parseFloat(t.maxFadeExtent))}}),Ld=Nu(ld,{altitudeMode:Iu(bc),minAltitude:Iu(gc),maxAltitude:Iu(gc),north:Iu(gc),south:Iu(gc),east:Iu(gc),west:Iu(gc)}),Ad=Nu(ld,{minLodPixels:Iu(gc),maxLodPixels:Iu(gc),minFadeExtent:Iu(gc),maxFadeExtent:Iu(gc)}),Od=Nu(ld,{extrude:Iu(fc),tessellate:Iu(fc),altitudeMode:Iu(bc)}),Fd=Nu(ld,{coordinates:Ru(dd)}),Nd=Nu(ld,{innerBoundaryIs:function(t,e){(t=ju(void 0,Ud,t,e))&&e[e.length-1].push(t)},outerBoundaryIs:function(t,e){(t=ju(void 0,Kd,t,e))&&(e[e.length-1][0]=t)}}),Dd=Nu(ld,{when:function(t,e){e=e[e.length-1].ak,t=xu(t,!1),t=Date.parse(t),e.push(isNaN(t)?0:t)}},Nu(hd,{coord:function(t,e){e=e[e.length-1].A,t=xu(t,!1),(t=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(t))?e.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),0):e.push(0,0,0,0)}})),jd=Nu(ld,{coordinates:Ru(dd)}),kd=Nu(ld,{href:Iu(yd)},Nu(hd,{x:Iu(gc),y:Iu(gc),w:Iu(gc),h:Iu(gc)})),Gd=Nu(ld,{Icon:Iu(function(t,e){return(t=ju({},kd,t,e))?t:null}),heading:Iu(gc),hotSpot:Iu(function(t){var e=t.getAttribute("xunits"),i=t.getAttribute("yunits"),o="insetPixels"!==e?"insetPixels"!==i?"bottom-left":"top-left":"insetPixels"!==i?"bottom-right":"top-right";return{x:parseFloat(t.getAttribute("x")),oh:pd[e],y:parseFloat(t.getAttribute("y")),ph:pd[i],origin:o}}),scale:Iu(gd)}),Ud=Nu(ld,{LinearRing:Ru(vd)}),Bd=Nu(ld,{color:Iu(fd),scale:Iu(gd)}),Vd=Nu(ld,{color:Iu(fd),width:Iu(gc)}),Wd=Nu(ld,{LineString:Cu(_d),LinearRing:Cu(bd),MultiGeometry:Cu(xd),Point:Cu(Ed),Polygon:Cu(Sd)}),Xd=Nu(hd,{Track:Cu(md)}),Yd=Nu(ld,{ExtendedData:Cd,Region:Rd,Link:function(t,e){Du(zd,t,e)},address:Iu(bc),description:Iu(bc),name:Iu(bc),open:Iu(fc),phoneNumber:Iu(bc),visibility:Iu(fc)}),zd=Nu(ld,{href:Iu(yd)}),Kd=Nu(ld,{LinearRing:Ru(vd)}),Hd=Nu(ld,{Style:Iu(Td),key:Iu(bc),styleUrl:Iu(yd)}),$d=Nu(ld,{ExtendedData:Cd,Region:Rd,MultiGeometry:Iu(xd,"geometry"),LineString:Iu(_d,"geometry"),LinearRing:Iu(bd,"geometry"),Point:Iu(Ed,"geometry"),Polygon:Iu(Sd,"geometry"),Style:Iu(Td),StyleMap:function(t,e){(t=ju(void 0,Qd,t,e))&&(e=e[e.length-1],Array.isArray(t)?e.Style=t:"string"==typeof t?e.styleUrl=t:d(!1,38))},address:Iu(bc),description:Iu(bc),name:Iu(bc),open:Iu(fc),phoneNumber:Iu(bc),styleUrl:Iu(yd),visibility:Iu(fc)},Nu(hd,{MultiTrack:Iu(function(t,e){if(t=ju([],Xd,t,e))return $u(e=new Hu(null),t),e},"geometry"),Track:Iu(md,"geometry")})),qd=Nu(ld,{color:Iu(fd),fill:Iu(fc),outline:Iu(fc)}),Zd=Nu(ld,{SimpleData:function(t,e){var i=t.getAttribute("name");null!==i&&(t=bc(t),e[e.length-1][i]=t)}}),Jd=Nu(ld,{IconStyle:function(t,e){if(t=ju({},Gd,t,e)){e=e[e.length-1];var i,o="Icon"in t?t.Icon:{},r=!("Icon"in t)||0<Object.keys(o).length,n=o.href;n?i=n:r&&(i=zf),n="bottom-left";var s,a=t.hotSpot;if(a){var h=[a.x,a.y],l=a.oh,p=a.ph;n=a.origin}else i===zf?(h=Vf,l=Wf,p=Xf):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(i)&&(h=[.5,0],p=l="fraction");a=o.x;var u,c,f=o.y;void 0!==a&&void 0!==f&&(s=[a,f]),a=o.w,o=o.h,void 0!==a&&void 0!==o&&(u=[a,o]),void 0!==(o=t.heading)&&(c=_(o)),t=t.scale,r?(i==zf&&(u=Yf,void 0===t&&(t=Kf)),i=new sd({anchor:h,anchorOrigin:n,anchorXUnits:l,anchorYUnits:p,crossOrigin:"anonymous",offset:s,offsetOrigin:"bottom-left",rotation:c,scale:t,size:u,src:i}),e.imageStyle=i):e.imageStyle=$f}},LabelStyle:function(t,e){(t=ju({},Bd,t,e))&&(e[e.length-1].textStyle=new vh({fill:new oh({color:"color"in t?t.color:Uf}),scale:t.scale}))},LineStyle:function(t,e){(t=ju({},Vd,t,e))&&(e[e.length-1].strokeStyle=new rh({color:"color"in t?t.color:Uf,width:"width"in t?t.width:1}))},PolyStyle:function(t,e){if(t=ju({},qd,t,e)){(e=e[e.length-1]).fillStyle=new oh({color:"color"in t?t.color:Uf});var i=t.fill;void 0!==i&&(e.fill=i),void 0!==(t=t.outline)&&(e.outline=t)}}}),Qd=Nu(ld,{Pair:function(t,e){if(t=ju({},Hd,t,e)){var i=t.key;i&&"normal"==i&&((i=t.styleUrl)&&(e[e.length-1]=i),(t=t.Style)&&(e[e.length-1]=t))}}});function ty(t,e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var i=ey(t,e);if(i)return i}}function ey(t,e){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling)if(zt(ld,i.namespaceURI)&&"name"==i.localName)return bc(i);for(i=e.firstElementChild;i;i=i.nextElementSibling)if(e=i.localName,zt(ld,i.namespaceURI)&&("Document"==e||"Folder"==e||"Placemark"==e||"kml"==e)&&(e=ey(t,i)))return e}function iy(t,e){var i=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&Ht(i,oy(t,e));return i}function oy(t,e){var i,o=[];for(i=e.firstElementChild;i;i=i.nextElementSibling)if(zt(ld,i.namespaceURI)&&"NetworkLink"==i.localName){var r=ju({},Yd,i,[]);o.push(r)}for(i=e.firstElementChild;i;i=i.nextElementSibling)e=i.localName,!zt(ld,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||Ht(o,oy(t,i));return o}function ry(t,e){var i=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&Ht(i,t.vf(e));return i}function ny(t,e){var i;for(e=[255*(4==(e=ms(e)).length?e[3]:1),e[2],e[1],e[0]],i=0;4>i;++i){var o=parseInt(e[i],10).toString(16);e[i]=1==o.length?"0"+o:o}Tc(t,e.join(""))}function sy(t,e,i){t={node:t};var o=e.S();if("GeometryCollection"==o)var r=e.vd(),n=jy;else"MultiPoint"==o?(r=e.de(),n=Vy):"MultiLineString"==o?(r=e.wd(),n=Wy):"MultiPolygon"==o?(r=e.Vd(),n=Yy):d(!1,39);Gu(t,Cy,n,r,i)}function ay(t,e,i){Gu({node:t},wy,Xy,[e],i)}function hy(t,e,i){var o={node:t};e.c&&t.setAttribute("id",e.c),t=e.L();var r={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};r[e.a]=1;var n=Object.keys(t||{}).sort().filter(function(t){return!r[t]});if(0<n.length){var s=Fu(t,n);Gu(o,Py,Uy,[{names:n,values:s}],i)}(n=e.ib())&&(n=n.call(e,0))&&(n=Array.isArray(n)?n[0]:n,this.j&&(t.Style=n),(n=n.Ka())&&(t.name=n.Ka())),t=Fu(t,n=Ry[i[i.length-1].node.namespaceURI]),Gu(o,Py,Ou,t,i,n),t=i[0],(e=e.U())&&(e=Yu(e,!0,t)),Gu(o,Py,jy,[e],i)}function ly(t,e,i){var o=e.da();(t={node:t}).layout=e.ja,t.stride=e.pa(),(e=e.L()).coordinates=o,e=Fu(e,o=Iy[i[i.length-1].node.namespaceURI]),Gu(t,My,Ou,e,i,o)}function py(t,e,i){var o=(e=e.Ud()).shift();Gu(t={node:t},Ly,By,e,i),Gu(t,Ly,zy,[o],i)}function uy(t,e){Ec(t,Math.round(1e6*e)/1e6)}(t=ad.prototype).Jg=function(t,e){if(t=ju([],Nu(ld,{Document:wu(this.Jg,this),Folder:wu(this.Jg,this),Placemark:Cu(this.Rg,this),Style:this.kq.bind(this),StyleMap:this.jq.bind(this)}),t,e,this))return t},t.Rg=function(t,e){var i=ju({geometry:null},$d,t,e);if(i){var o=new uh;return null!==(t=t.getAttribute("id"))&&o.qc(t),e=e[0],(t=i.geometry)&&Yu(t,!1,e),o.Va(t),delete i.geometry,this.c&&o.sg(cd(i.Style,i.styleUrl,this.a,this.b,this.f)),delete i.Style,o.H(i),o}},t.kq=function(t,e){var i=t.getAttribute("id");null!==i&&(e=Td(t,e))&&((t=t.baseURI)&&"about:blank"!=t||(t=window.location.href),i=t?new URL("#"+i,t).href:"#"+i,this.b[i]=e)},t.jq=function(t,e){var i=t.getAttribute("id");null!==i&&(e=ju(void 0,Qd,t,e))&&((t=t.baseURI)&&"about:blank"!=t||(t=window.location.href),i=t?new URL("#"+i,t).href:"#"+i,this.b[i]=e)},t.Lg=function(t,e){return zt(ld,t.namespaceURI)&&(t=this.Rg(t,[Wu(this,t,e)]))?t:null},t.Kc=function(t,e){if(!zt(ld,t.namespaceURI))return[];var i=t.localName;if("Document"==i||"Folder"==i)return(i=this.Jg(t,[Wu(this,t,e)]))?i:[];if("Placemark"==i)return(e=this.Rg(t,[Wu(this,t,e)]))?[e]:[];if("kml"==i){for(i=[],t=t.firstElementChild;t;t=t.nextElementSibling){var o=this.Kc(t,e);o&&Ht(i,o)}return i}return[]},t.cq=function(t){return Eu(t)?ty(this,t):Su(t)?ey(this,t):"string"==typeof t?ty(this,t=Tu(t)):void 0},t.eq=function(t){var e=[];return Eu(t)?Ht(e,iy(this,t)):Su(t)?Ht(e,oy(this,t)):"string"==typeof t&&Ht(e,iy(this,t=Tu(t))),e},t.hq=function(t){var e=[];return Eu(t)?Ht(e,ry(this,t)):Su(t)?Ht(e,this.vf(t)):"string"==typeof t&&Ht(e,ry(this,t=Tu(t))),e},t.vf=function(t){var e,i=[];for(e=t.firstElementChild;e;e=e.nextElementSibling)if(zt(ld,e.namespaceURI)&&"Region"==e.localName){var o=ju({},Md,e,[]);i.push(o)}for(e=t.firstElementChild;e;e=e.nextElementSibling)t=e.localName,!zt(ld,e.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||Ht(i,this.vf(e));return i};var cy=Nu(ld,["Document","Placemark"]),fy=Nu(ld,{Document:Mu(function(t,e,i){Gu({node:t},dy,Dy,e,i,void 0,this)}),Placemark:Mu(hy)}),dy=Nu(ld,{Placemark:Mu(hy)}),yy=Nu(ld,{Data:Mu(function(t,e,i){t.setAttribute("name",e.name),t={node:t},"object"==typeof(e=e.value)?(null!==e&&e.displayName&&Gu(t,yy,Ou,[e.displayName],i,["displayName"]),null!==e&&e.value&&Gu(t,yy,Ou,[e.value],i,["value"])):Gu(t,yy,Ou,[e],i,["value"])}),value:Mu(function(t,e){Tc(t,e)}),displayName:Mu(function(t,e){t.appendChild(_u.createCDATASection(e))})}),gy={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},vy=Nu(ld,["href"],Nu(hd,["x","y","w","h"])),my=Nu(ld,{href:Mu(Tc)},Nu(hd,{x:Mu(Ec),y:Mu(Ec),w:Mu(Ec),h:Mu(Ec)})),_y=Nu(ld,["scale","heading","Icon","hotSpot"]),by=Nu(ld,{Icon:Mu(function(t,e,i){t={node:t};var o=vy[i[i.length-1].node.namespaceURI],r=Fu(e,o);Gu(t,my,Ou,r,i,o),r=Fu(e,o=vy[hd[0]]),Gu(t,my,Ny,r,i,o)}),heading:Mu(Ec),hotSpot:Mu(function(t,e){t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("xunits",e.oh),t.setAttribute("yunits",e.ph)}),scale:Mu(uy)}),xy=Nu(ld,["color","scale"]),Ey=Nu(ld,{color:Mu(ny),scale:Mu(uy)}),Sy=Nu(ld,["color","width"]),Ty=Nu(ld,{color:Mu(ny),width:Mu(Ec)}),wy=Nu(ld,{LinearRing:Mu(ly)}),Cy=Nu(ld,{LineString:Mu(ly),Point:Mu(ly),Polygon:Mu(py),GeometryCollection:Mu(sy)}),Ry=Nu(ld,"name open visibility address phoneNumber description styleUrl Style".split(" ")),Py=Nu(ld,{ExtendedData:Mu(function(t,e,i){t={node:t};var o=e.names;e=e.values;for(var r=o.length,n=0;n<r;n++)Gu(t,yy,Gy,[{name:o[n],value:e[n]}],i)}),MultiGeometry:Mu(sy),LineString:Mu(ly),LinearRing:Mu(ly),Point:Mu(ly),Polygon:Mu(py),Style:Mu(function(t,e,i){t={node:t};var o={},r=e.Fa(),n=e.Ga(),s=e.Y();e=e.Ka(),s instanceof sd&&(o.IconStyle=s),e&&(o.LabelStyle=e),n&&(o.LineStyle=n),r&&(o.PolyStyle=r),o=Fu(o,e=Oy[i[i.length-1].node.namespaceURI]),Gu(t,Fy,Ou,o,i,e)}),address:Mu(Tc),description:Mu(Tc),name:Mu(Tc),open:Mu(xc),phoneNumber:Mu(Tc),styleUrl:Mu(Tc),visibility:Mu(xc)}),Iy=Nu(ld,["extrude","tessellate","altitudeMode","coordinates"]),My=Nu(ld,{extrude:Mu(xc),tessellate:Mu(xc),altitudeMode:Mu(Tc),coordinates:Mu(function(t,e,i){var o,r=(i=i[i.length-1]).layout;i=i.stride,"XY"==r||"XYM"==r?o=2:"XYZ"==r||"XYZM"==r?o=3:d(!1,34);var n,s=e.length,a="";if(0<s){for(a+=e[0],r=1;r<o;++r)a+=","+e[r];for(n=i;n<s;n+=i)for(a+=" "+e[n],r=1;r<o;++r)a+=","+e[n+r]}Tc(t,a)})}),Ly=Nu(ld,{outerBoundaryIs:Mu(ay),innerBoundaryIs:Mu(ay)}),Ay=Nu(ld,{color:Mu(ny)}),Oy=Nu(ld,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Fy=Nu(ld,{IconStyle:Mu(function(t,e,i){t={node:t};var o={},r=e.oc(),n=e.He(),s={href:e.b.l};if(r){s.w=r[0],s.h=r[1];var a=e.Vc(),h=e.bd();h&&n&&0!==h[0]&&h[1]!==r[1]&&(s.x=h[0],s.y=n[1]-(h[1]+r[1])),!a||a[0]===r[0]/2&&a[1]===r[1]/2||(o.hotSpot={x:a[0],oh:"pixels",y:r[1]-a[1],ph:"pixels"})}o.Icon=s,1!==(r=e.a)&&(o.scale=r),0!==(e=e.f)&&(o.heading=e),o=Fu(o,e=_y[i[i.length-1].node.namespaceURI]),Gu(t,by,Ou,o,i,e)}),LabelStyle:Mu(function(t,e,i){t={node:t};var o={},r=e.Fa();r&&(o.color=r.b),(e=e.b)&&1!==e&&(o.scale=e),o=Fu(o,e=xy[i[i.length-1].node.namespaceURI]),Gu(t,Ey,Ou,o,i,e)}),LineStyle:Mu(function(t,e,i){t={node:t};var o=Sy[i[i.length-1].node.namespaceURI];e=Fu({color:e.a,width:e.c},o),Gu(t,Ty,Ou,e,i,o)}),PolyStyle:Mu(function(t,e,i){Gu({node:t},Ay,ky,[e.b],i)})});function Ny(t,e,i){return bu(hd[0],"gx:"+i)}function Dy(t,e){return bu(e[e.length-1].node.namespaceURI,"Placemark")}function jy(t,e){if(t)return bu(e[e.length-1].node.namespaceURI,gy[t.S()])}var ky=Au("color"),Gy=Au("Data"),Uy=Au("ExtendedData"),By=Au("innerBoundaryIs"),Vy=Au("Point"),Wy=Au("LineString"),Xy=Au("LinearRing"),Yy=Au("Polygon"),zy=Au("outerBoundaryIs");function Ky(t,e,i,o,r){this.l=r,this.f=t,this.b=e,this.a=this.c=null,this.g=i,this.j=o,this.s=[1,0,0,1,0,0]}function Hy(t){Vu.call(this),t=t||{},this.defaultDataProjection=new ft({code:"EPSG:3857",units:"tile-pixels"}),this.b=t.featureClass?t.featureClass:Ky,this.g=t.geometryName,this.f=t.layerName?t.layerName:"layer",this.c=t.layers?t.layers:null,this.a=null}function $y(t,e,i){if(3===t){t={keys:[],values:[],features:[]};var o=i.Ua()+i.ga;i.Og(qy,t,o),t.length=t.features.length,t.length&&(e[t.name]=t)}}function qy(t,e,i){if(15===t)e.version=i.Ua();else if(1===t)e.name=i.Vg();else if(5===t)e.extent=i.Ua();else if(2===t)e.features.push(i.ga);else if(3===t)e.keys.push(i.Vg());else if(4===t){t=null;for(var o=i.Ua()+i.ga;i.ga<o;)t=1===(t=i.Ua()>>3)?i.Vg():2===t?i.Zp():3===t?i.Vp():4===t?i.lq():5===t?i.Ua():6===t?i.Ug():7===t?i.Tp():null;e.values.push(t)}}function Zy(t,e,i){if(1==t)e.id=i.Ua();else if(2==t)for(t=i.Ua()+i.ga;i.ga<t;){var o=e.layer.keys[i.Ua()],r=e.layer.values[i.Ua()];e.properties[o]=r}else 3==t?e.type=i.Ua():4==t&&(e.geometry=i.ga)}function Jy(t,e,i){var o=i.type;if(0===o)return null;var r=i.id,n=i.properties;n[t.f]=i.layer.name;var s,a=[],h=[],l=h;e.ga=i.geometry,i=e.Ua()+e.ga;for(var p=1,u=0,c=0,f=0,y=0,g=0;e.ga<i;)u||(p=7&(u=e.Ua()),u>>=3),u--,1===p||2===p?(c+=e.Ug(),f+=e.Ug(),1===p&&y>g&&(l.push(y),g=y),a.push(c,f),y+=2):7===p?y>g&&(a.push(a[g],a[g+1]),y+=2):d(!1,59);if(y>g&&l.push(y),e=h.length,1===o?s=1===e?"Point":"MultiPoint":2===o?s=1===e?"LineString":"MultiLineString":3===o&&(s="Polygon"),o=s,t.b===Ky)a=new t.b(o,a,h,n,r);else{if("Polygon"==o){for(o=[],l=e=s=0,i=h.length;l<i;++l)er(a,s,p=h[l],2)||(o.push(h.slice(e,l)),e=l),s=p;1<o.length?(h=o,o=new Zu(null)):o=new nr(null)}else o="Point"===o?new Ko(null):"LineString"===o?new yh(null):"Polygon"===o?new nr(null):"MultiPoint"===o?new qu(null):"MultiLineString"===o?new Hu(null):null;o.ba("XY",a,h),a=new t.b,t.g&&a.Lc(t.g),t=Yu(o,!1,Xu(t,void 0)),a.Va(t),a.qc(r),a.H(n)}return a}function Qy(){hc.call(this),this.defaultDataProjection=Dt("EPSG:4326")}function tg(t,e){e[e.length-1].le[t.getAttribute("k")]=t.getAttribute("v")}ad.prototype.bc=function(t,e){e=Xu(this,e);var i=bu(ld[4],"kml");i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",hd[0]),i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),i.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var o={node:i},r={};return 1<t.length?r.Document=t:1==t.length&&(r.Placemark=t[0]),r=Fu(r,t=cy[i.namespaceURI]),Gu(o,fy,Ou,r,[e],t,this),i},ra.Ld=function(){},function(t){function e(t){this.tc=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.type=this.ga=0,this.length=this.tc.length}function i(t,e,i){var r=i.tc,n=r[i.ga++],s=(112&n)>>4;if(128>n)return o(t,s,e);if(s|=(127&(n=r[i.ga++]))<<3,128>n)return o(t,s,e);if(s|=(127&(n=r[i.ga++]))<<10,128>n)return o(t,s,e);if(s|=(127&(n=r[i.ga++]))<<17,128>n)return o(t,s,e);if(s|=(127&(n=r[i.ga++]))<<24,128>n)return o(t,s,e);if(128>(n=r[i.ga++]))return o(t,s|(1&n)<<31,e);throw Error("Expected varint not more than 10 bytes")}function o(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}var r=function(t,e,i,o,r){var n=8*r-o-1,s=(1<<n)-1,a=s>>1,h=-7;r=i?r-1:0;var l=i?-1:1,p=t[e+r];for(r+=l,i=p&(1<<-h)-1,p>>=-h,h+=n;0<h;i=256*i+t[e+r],r+=l,h-=8);for(n=i&(1<<-h)-1,i>>=-h,h+=o;0<h;n=256*n+t[e+r],r+=l,h-=8);if(0===i)i=1-a;else{if(i===s)return n?NaN:1/0*(p?-1:1);n+=Math.pow(2,o),i-=a}return(p?-1:1)*n*Math.pow(2,i-o)};e.c=0,e.g=1,e.b=2,e.a=5,e.prototype={Og:function(t,e,i){for(i=i||this.length;this.ga<i;){var o=this.Ua(),r=o>>3,n=this.ga;this.type=7&o,t(r,e,this),this.ga===n&&this.Lq(o)}return e},Zp:function(){var t=r(this.tc,this.ga,!0,23,4);return this.ga+=4,t},Vp:function(){var t=r(this.tc,this.ga,!0,52,8);return this.ga+=8,t},Ua:function(t){var e=this.tc,o=e[this.ga++],r=127&o;return 128>o?r:(r|=(127&(o=e[this.ga++]))<<7,128>o?r:(r|=(127&(o=e[this.ga++]))<<14,128>o?r:(r|=(127&(o=e[this.ga++]))<<21,128>o?r:i(r|(15&(o=e[this.ga]))<<28,t,this))))},lq:function(){return this.Ua(!0)},Ug:function(){var t=this.Ua();return 1==t%2?(t+1)/-2:t/2},Tp:function(){return!!this.Ua()},Vg:function(){for(var t=this.Ua()+this.ga,e=this.tc,i="",o=this.ga;o<t;){var r=e[o],n=null,s=239<r?4:223<r?3:191<r?2:1;if(o+s>t)break;if(1===s)128>r&&(n=r);else if(2===s){var a=e[o+1];128==(192&a)&&(127>=(n=(31&r)<<6|63&a)&&(n=null))}else if(3===s){a=e[o+1];var h=e[o+2];128==(192&a)&&128==(192&h)&&(2047>=(n=(15&r)<<12|(63&a)<<6|63&h)||55296<=n&&57343>=n)&&(n=null)}else if(4===s){a=e[o+1],h=e[o+2];var l=e[o+3];128==(192&a)&&128==(192&h)&&128==(192&l)&&(65535>=(n=(15&r)<<18|(63&a)<<12|(63&h)<<6|63&l)||1114112<=n)&&(n=null)}null===n?(n=65533,s=1):65535<n&&(n-=65536,i+=String.fromCharCode(n>>>10&1023|55296),n=56320|1023&n),i+=String.fromCharCode(n),o+=s}return this.ga=t,i},Lq:function(t){if((t&=7)===e.c)for(;127<this.tc[this.ga++];);else if(t===e.b)this.ga=this.Ua()+this.ga;else if(t===e.a)this.ga+=4;else{if(t!==e.g)throw Error("Unimplemented type: "+t);this.ga+=8}}},t.default=e}(ra.Ld=ra.Ld||{}),ra.Ld=ra.Ld.default,(t=Ky.prototype).get=function(t){return this.j[t]},t.pb=Ky.prototype.td=function(){return this.g},t.G=function(){return this.i||(this.i="Point"===this.f?D(this.b):j(this.b,0,this.b.length,2)),this.i},t.Td=function(){if(!this.c){var t=z(this.G());this.c=Zo(this.b,0,this.g,2,t,0)}return this.c},t.Fe=function(){return this.a||(this.a=fh(this.b,0,this.b.length,2,.5)),this.a},t.Ge=function(){if(!this.a){this.a=[];for(var t=this.b,e=0,i=this.g,o=0,r=i.length;o<r;++o){var n=i[o];e=fh(t,e,n,2,.5),Ht(this.a,e),e=n}}return this.a},t.Ao=function(){return this.l},t.Xb=function(){return this.b},t.da=Ky.prototype.Xb,t.U=function(){return this},t.Bo=function(){return this.j},t.Wd=Ky.prototype.U,t.pa=function(){return 2},t.ib=a,t.S=function(){return this.f},t.mb=function(t){var e=t.G();e=H(t=t.oe)/H(e);var i=this.s;So(i,t[0],t[3],e,-e,0,0,0),uo(this.b,0,this.b.length,2,i,this.b)},s(Hy,Vu),(t=Hy.prototype).cg=function(){return this.a},t.S=function(){return"arraybuffer"},t.Qa=function(t){var e,i=this.c,o=(t=new ra.Ld(t)).Og($y,{}),r=[];for(e in o)if(!i||-1!=i.indexOf(e)){for(var n,s=o[e],a=0,h=s.length;a<h;++a){var l=s;(n=t).ga=l.features[a];var p=n.Ua()+n.ga;l={layer:l,type:0,properties:{}},n.Og(Zy,l,p),n=l,r.push(Jy(this,t,n))}this.a=s?[0,0,s.extent,s.extent]:null}return r},t.sb=function(){return this.defaultDataProjection},t.Sn=function(t){this.c=t},t.Yb=function(){},t.ed=function(){},t.Jd=function(){},t.md=function(){},t.ac=function(){},s(Qy,hc);var eg=[null],ig=Nu(eg,{nd:function(t,e){e[e.length-1].zd.push(t.getAttribute("ref"))},tag:tg}),og=Nu(eg,{node:function(t,e){var i=e[0],o=e[e.length-1],r=t.getAttribute("id"),n=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];o.ki[r]=n,st((t=ju({le:{}},rg,t,e)).le)||(Yu(n=new Ko(n),!1,i),(i=new uh(n)).qc(r),i.H(t.le),o.features.push(i))},way:function(t,e){t=ju({id:t.getAttribute("id"),zd:[],le:{}},ig,t,e),e[e.length-1].lh.push(t)}}),rg=Nu(eg,{tag:tg});function ng(t,e,i,o){var r;r=void 0!==o?o:[];for(var n=o=0;n<e;){var s=t[n++];for(r[o++]=t[n++],r[o++]=s,s=2;s<i;++s)r[o++]=t[n++]}r.length=o}function sg(t){t=t||{},Vu.call(this),this.defaultDataProjection=Dt("EPSG:4326"),this.b=t.factor?t.factor:1e5,this.a=t.geometryLayout?t.geometryLayout:"XY"}function ag(t,e,i){var o,r,n=Array(e);for(o=0;o<e;++o)n[o]=0;var s=0;for(r=t.length;s<r;)for(o=0;o<e;++o,++s){var a=t[s],h=a-n[o];n[o]=a,t[s]=h}return lg(t,i||1e5)}function hg(t,e,i){var o,r,n=Array(e);for(o=0;o<e;++o)n[o]=0;for(t=pg(t,i||1e5),i=0,r=t.length;i<r;)for(o=0;o<e;++o,++i)n[o]+=t[i],t[i]=n[o];return t}function lg(t,e){var i;e=e||1e5;var o=0;for(i=t.length;o<i;++o)t[o]=Math.round(t[o]*e);for(e=0,o=t.length;e<o;++e)i=t[e],t[e]=0>i?~(i<<1):i<<1;for(e="",o=0,i=t.length;o<i;++o){for(var r,n=t[o],s="";32<=n;)r=63+(32|31&n),s+=String.fromCharCode(r),n>>=5;e+=s+=String.fromCharCode(n+63)}return e}function pg(t,e){e=e||1e5;var i,o=[],r=0,n=0,s=0;for(i=t.length;s<i;++s){var a=t.charCodeAt(s)-63;r|=(31&a)<<n,32>a?(o.push(r),n=r=0):n+=5}for(t=0,r=o.length;t<r;++t)n=o[t],o[t]=1&n?~(n>>1):n>>1;for(t=0,r=o.length;t<r;++t)o[t]/=e;return o}function ug(t){t=t||{},Vu.call(this),this.a=t.layerName,this.b=t.layers?t.layers:null,this.defaultDataProjection=Dt(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326")}function cg(t,e){var i,o,r=[],n=0;for(o=t.length;n<o;++n){var s=t[n];0<n&&r.pop(),i=0<=s?e[s]:e[~s].slice().reverse(),r.push.apply(r,i)}for(t=0,e=r.length;t<e;++t)r[t]=r[t].slice();return r}function fg(t,e,i,o,r,n,s){var a,h=[],l=0;for(a=(t=t.geometries).length;l<a;++l)h[l]=dg(t[l],e,i,o,r,n,s);return h}function dg(t,e,i,o,r,n,s){var a=t.type,h=gg[a];return i="Point"===a||"MultiPoint"===a?h(t,i,o):h(t,e),(e=new uh).Va(Yu(i,!1,s)),void 0!==t.id&&e.qc(t.id),t=t.properties,r&&(t||(t={}),t[r]=n),t&&e.H(t),e}function yg(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}Qy.prototype.Kc=function(t,e){if(e=Wu(this,t,e),"osm"==t.localName){t=ju({ki:{},lh:[],features:[]},og,t,[e]);for(var i=0;i<t.lh.length;i++){for(var o=t.lh[i],r=[],n=0,s=o.zd.length;n<s;n++)Ht(r,t.ki[o.zd[n]]);o.zd[0]==o.zd[o.zd.length-1]?(n=new nr(null)).ba("XY",r,[r.length]):(n=new yh(null)).ba("XY",r),Yu(n,!1,e),(r=new uh(n)).qc(o.id),r.H(o.le),t.features.push(r)}if(t.features)return t.features}return[]},Qy.prototype.mh=function(){},Qy.prototype.bc=function(){},Qy.prototype.re=function(){},s(sg,Df),(t=sg.prototype).fe=function(t,e){return new uh(t=this.Gd(t,e))},t.Ng=function(t,e){return[this.fe(t,e)]},t.Gd=function(t,e){var i=Ro(this.a);return ng(t=hg(t,i,this.b),t.length,i,t),Yu(new yh(i=Uo(t,0,t.length,i),this.a),!1,Xu(this,e))},t.pe=function(t,e){return(t=t.U())?this.Kd(t,e):(d(!1,40),"")},t.nh=function(t,e){return this.pe(t[0],e)},t.Kd=function(t,e){return e=(t=Yu(t,!0,Xu(this,e))).da(),t=t.pa(),ng(e,e.length,t,e),ag(e,t,this.b)},s(ug,zu),ug.prototype.Mg=function(t,e){if("Topology"==t.type){var i=null,o=null;if(t.transform){var r=t.transform;i=r.scale,o=r.translate}var n=t.arcs;if(r){r=i;var s,a=o,h=0;for(s=n.length;h<s;++h){var l,p=n[h],u=r,c=a,f=0,d=0,y=0;for(l=p.length;y<l;++y){var g=p[y];f+=g[0],d+=g[1],g[0]=f,g[1]=d,yg(g,u,c)}}}for(var v in r=[],t=t.objects,a=this.a,t)this.b&&-1==this.b.indexOf(v)||("GeometryCollection"===t[v].type?(h=t[v],r.push.apply(r,fg(h,n,i,o,a,v,e))):(h=t[v],r.push(dg(h,n,i,o,a,v,e))));return r}return[]},ug.prototype.Tg=function(){return this.defaultDataProjection};var gg={Point:function(t,e,i){return t=t.coordinates,e&&i&&yg(t,e,i),new Ko(t)},LineString:function(t,e){return new yh(t=cg(t.arcs,e))},Polygon:function(t,e){var i,o=[],r=0;for(i=t.arcs.length;r<i;++r)o[r]=cg(t.arcs[r],e);return new nr(o)},MultiPoint:function(t,e,i){var o;if(t=t.coordinates,e&&i){var r=0;for(o=t.length;r<o;++r)yg(t[r],e,i)}return new qu(t)},MultiLineString:function(t,e){var i,o=[],r=0;for(i=t.arcs.length;r<i;++r)o[r]=cg(t.arcs[r],e);return new Hu(o)},MultiPolygon:function(t,e){var i,o,r=[],n=0;for(o=t.arcs.length;n<o;++n){var s=t.arcs[n],a=[],h=0;for(i=s.length;h<i;++h)a[h]=cg(s[h],e);r[n]=a}return new Zu(r)}};function vg(t){this.rc=t}function mg(t,e){this.rc=t,this.b=Array.prototype.slice.call(arguments,1),d(2<=this.b.length,57)}function _g(t){var e=["And"].concat(Array.prototype.slice.call(arguments));mg.apply(this,e)}function bg(t,e,i){this.rc="BBOX",this.geometryName=t,this.extent=e,this.srsName=i}function xg(t,e,i,o){this.rc=t,this.geometryName=e||"the_geom",this.geometry=i,this.srsName=o}function Eg(t,e,i){xg.call(this,"Contains",t,e,i)}function Sg(t,e){this.rc=t,this.b=e}function Tg(t,e,i){Sg.call(this,"During",t),this.a=e,this.g=i}function wg(t,e,i,o){Sg.call(this,t,e),this.g=i,this.a=o}function Cg(t,e,i){wg.call(this,"PropertyIsEqualTo",t,e,i)}function Rg(t,e){wg.call(this,"PropertyIsGreaterThan",t,e)}function Pg(t,e){wg.call(this,"PropertyIsGreaterThanOrEqualTo",t,e)}function Ig(t,e,i){xg.call(this,"Intersects",t,e,i)}function Mg(t,e,i){Sg.call(this,"PropertyIsBetween",t),this.a=e,this.g=i}function Lg(t,e,i,o,r,n){Sg.call(this,"PropertyIsLike",t),this.c=e,this.f=void 0!==i?i:"*",this.i=void 0!==o?o:".",this.g=void 0!==r?r:"!",this.a=n}function Ag(t){Sg.call(this,"PropertyIsNull",t)}function Og(t,e){wg.call(this,"PropertyIsLessThan",t,e)}function Fg(t,e){wg.call(this,"PropertyIsLessThanOrEqualTo",t,e)}function Ng(t){this.rc="Not",this.condition=t}function Dg(t,e,i){wg.call(this,"PropertyIsNotEqualTo",t,e,i)}function jg(t){var e=["Or"].concat(Array.prototype.slice.call(arguments));mg.apply(this,e)}function kg(t,e,i){xg.call(this,"Within",t,e,i)}function Gg(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(_g,e))}function Ug(t,e,i){return new bg(t,e,i)}function Bg(t){t=t||{},this.c=t.featureType,this.a=t.featureNS,this.b=t.gmlFormat?t.gmlFormat:new wc,this.l=t.schemaLocation?t.schemaLocation:Vg["1.1.0"],hc.call(this)}(t=ug.prototype).ld=function(){},t.qe=function(){},t.se=function(){},t.Qg=function(){},t.dd=function(){},s(mg,vg),s(_g,mg),s(bg,vg),s(xg,vg),s(Eg,xg),s(Sg,vg),s(Tg,Sg),s(wg,Sg),s(Cg,wg),s(Rg,wg),s(Pg,wg),s(Ig,xg),s(Mg,Sg),s(Lg,Sg),s(Ag,Sg),s(Og,wg),s(Fg,wg),s(Ng,vg),s(Dg,wg),s(jg,mg),s(kg,xg),s(Bg,hc);var Vg={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};function Wg(t,e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return Yg(t,e)}Bg.prototype.Kc=function(t,e){var i={featureType:this.c,featureNS:this.a};return ot(i,Wu(this,t,e||{})),e=[i],this.b.b["http://www.opengis.net/gml"].featureMember=Cu(uc.prototype.ge),(t=ju([],this.b.b,t,e,this.b))||(t=[]),t},Bg.prototype.j=function(t){return Eu(t)?qg(t):Su(t)?ju({},$g,t,[]):"string"==typeof t?qg(t=Tu(t)):void 0},Bg.prototype.f=function(t){return Eu(t)?Wg(this,t):Su(t)?Yg(this,t):"string"==typeof t?Wg(this,t=Tu(t)):void 0};var Xg={"http://www.opengis.net/gml":{boundedBy:Iu(uc.prototype.rf,"bounds")}};function Yg(t,e){var i={},o=_c(e.getAttribute("numberOfFeatures"));return i.numberOfFeatures=o,ju(i,Xg,e,[],t.b)}var zg={"http://www.opengis.net/wfs":{totalInserted:Iu(mc),totalUpdated:Iu(mc),totalDeleted:Iu(mc)}},Kg={"http://www.opengis.net/ogc":{FeatureId:Cu(function(t){return t.getAttribute("fid")})}},Hg={"http://www.opengis.net/wfs":{Feature:function(t,e){Du(Kg,t,e)}}},$g={"http://www.opengis.net/wfs":{TransactionSummary:Iu(function(t,e){return ju({},zg,t,e)},"transactionSummary"),InsertResults:Iu(function(t,e){return ju([],Hg,t,e)},"insertIds")}};function qg(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return ju({},$g,t,[])}var Zg={"http://www.opengis.net/wfs":{PropertyName:Mu(Tc)}};function Jg(t,e){var i=bu("http://www.opengis.net/ogc","Filter"),o=bu("http://www.opengis.net/ogc","FeatureId");i.appendChild(o),o.setAttribute("fid",e),t.appendChild(i)}function Qg(t,e){return t=(t||"feature")+":",0===e.indexOf(t)?e:t+e}var tv={"http://www.opengis.net/wfs":{Insert:Mu(function(t,e,i){var o=i[i.length-1],r=o.gmlVersion;if(o=bu(o.featureNS,o.featureType),t.appendChild(o),2===r){t=Fc.prototype,(r=e.c)&&o.setAttribute("fid",r);var n=(r=i[i.length-1]).featureNS,s=e.a;r.tb||(r.tb={},r.tb[n]={});var a=e.L();e=[];var h=[];for(p in a){var l=a[p];null!==l&&(e.push(p),h.push(l),p==s||l instanceof wo?p in r.tb[n]||(r.tb[n][p]=Mu(t.ui,t)):p in r.tb[n]||(r.tb[n][p]=Mu(Tc)))}var p=ot({},r);p.node=o,Gu(p,r.tb,Au(void 0,n),h,i,e)}else wc.prototype.Ci(o,e,i)}),Update:Mu(function(t,e,i){var o=i[i.length-1];d(void 0!==e.c,27);var r=o.featurePrefix,n=o.featureNS,s=e.a;if(t.setAttribute("typeName",Qg(r,o.featureType)),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+r,n),void 0!==(r=e.c)){for(var a=[],h=0,l=(n=e.P()).length;h<l;h++){var p=e.get(n[h]);if(void 0!==p){var u=n[h];p instanceof wo&&(u=s),a.push({name:u,value:p})}}Gu({gmlVersion:o.gmlVersion,node:t,hasZ:o.hasZ,srsName:o.srsName},tv,Au("Property"),a,i),Jg(t,r)}}),Delete:Mu(function(t,e,i){i=i[i.length-1],d(void 0!==e.c,26);var o=i.featurePrefix,r=i.featureNS;t.setAttribute("typeName",Qg(o,i.featureType)),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+o,r),void 0!==(e=e.c)&&Jg(t,e)}),Property:Mu(function(t,e,i){var o=bu("http://www.opengis.net/wfs","Name"),r=i[i.length-1].gmlVersion;t.appendChild(o),Tc(o,e.name),void 0!==e.value&&null!==e.value&&(o=bu("http://www.opengis.net/wfs","Value"),t.appendChild(o),e.value instanceof wo?2===r?Fc.prototype.ui(o,e.value,i):wc.prototype.Yc(o,e.value,i):Tc(o,e.value))}),Native:Mu(function(t,e){e.Uq&&t.setAttribute("vendorId",e.Uq),void 0!==e.qq&&t.setAttribute("safeToIgnore",e.qq),void 0!==e.value&&Tc(t,e.value)})}};function ev(t,e,i){t={node:t};for(var o=0,r=(e=e.b).length;o<r;++o){var n=e[o];Gu(t,av,Au(n.rc),[n],i)}}function iv(t,e){void 0!==e.a&&t.setAttribute("matchCase",e.a.toString()),rv(t,e.b),nv(t,""+e.g)}function ov(t,e,i){Tc(t=bu("http://www.opengis.net/ogc",t),i),e.appendChild(t)}function rv(t,e){ov("PropertyName",t,e)}function nv(t,e){ov("Literal",t,e)}function sv(t,e){var i=bu("http://www.opengis.net/gml","TimeInstant");t.appendChild(i),t=bu("http://www.opengis.net/gml","timePosition"),i.appendChild(t),Tc(t,e)}var av={"http://www.opengis.net/wfs":{Query:Mu(function(t,e,i){var o=i[i.length-1],r=o.featurePrefix,n=o.featureNS,s=o.propertyNames,a=o.srsName;t.setAttribute("typeName",r?Qg(r,e):e),a&&t.setAttribute("srsName",a),n&&t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+r,n),(e=ot({},o)).node=t,Gu(e,Zg,Au("PropertyName"),s,i),(o=o.filter)&&(s=bu("http://www.opengis.net/ogc","Filter"),t.appendChild(s),Gu({node:s},av,Au(o.rc),[o],i))})},"http://www.opengis.net/ogc":{During:Mu(function(t,e){var i=bu("http://www.opengis.net/fes","ValueReference");Tc(i,e.b),t.appendChild(i),i=bu("http://www.opengis.net/gml","TimePeriod"),t.appendChild(i),t=bu("http://www.opengis.net/gml","begin"),i.appendChild(t),sv(t,e.a),t=bu("http://www.opengis.net/gml","end"),i.appendChild(t),sv(t,e.g)}),And:Mu(ev),Or:Mu(ev),Not:Mu(function(t,e,i){e=e.condition,Gu({node:t},av,Au(e.rc),[e],i)}),BBOX:Mu(function(t,e,i){i[i.length-1].srsName=e.srsName,rv(t,e.geometryName),wc.prototype.Yc(t,e.extent,i)}),Contains:Mu(function(t,e,i){i[i.length-1].srsName=e.srsName,rv(t,e.geometryName),wc.prototype.Yc(t,e.geometry,i)}),Intersects:Mu(function(t,e,i){i[i.length-1].srsName=e.srsName,rv(t,e.geometryName),wc.prototype.Yc(t,e.geometry,i)}),Within:Mu(function(t,e,i){i[i.length-1].srsName=e.srsName,rv(t,e.geometryName),wc.prototype.Yc(t,e.geometry,i)}),PropertyIsEqualTo:Mu(iv),PropertyIsNotEqualTo:Mu(iv),PropertyIsLessThan:Mu(iv),PropertyIsLessThanOrEqualTo:Mu(iv),PropertyIsGreaterThan:Mu(iv),PropertyIsGreaterThanOrEqualTo:Mu(iv),PropertyIsNull:Mu(function(t,e){rv(t,e.b)}),PropertyIsBetween:Mu(function(t,e){rv(t,e.b);var i=bu("http://www.opengis.net/ogc","LowerBoundary");t.appendChild(i),nv(i,""+e.a),i=bu("http://www.opengis.net/ogc","UpperBoundary"),t.appendChild(i),nv(i,""+e.g)}),PropertyIsLike:Mu(function(t,e){t.setAttribute("wildCard",e.f),t.setAttribute("singleChar",e.i),t.setAttribute("escapeChar",e.g),void 0!==e.a&&t.setAttribute("matchCase",e.a.toString()),rv(t,e.b),nv(t,""+e.c)})}};function hv(t){t=t||{},Vu.call(this),this.b=void 0!==t.splitCollection&&t.splitCollection}function lv(t){return 0===(t=t.W()).length?"":t.join(" ")}function pv(t){for(var e=[],i=0,o=(t=t.W()).length;i<o;++i)e.push(t[i].join(" "));return e.join(",")}function uv(t){for(var e=[],i=0,o=(t=t.Ud()).length;i<o;++i)e.push("("+pv(t[i])+")");return e.join(",")}function cv(t){var e=t.S(),i=(0,fv[e])(t);if(e=e.toUpperCase(),t instanceof Co){var o="";"XYZ"!==(t=t.ja)&&"XYZM"!==t||(o+="Z"),"XYM"!==t&&"XYZM"!==t||(o+="M"),0<(t=o).length&&(e+=" "+t)}return 0===i.length?e+" EMPTY":e+"("+i+")"}Bg.prototype.s=function(t){var e=bu("http://www.opengis.net/wfs","GetFeature");if(e.setAttribute("service","WFS"),e.setAttribute("version","1.1.0"),t){t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&e.setAttribute("maxFeatures",t.maxFeatures),t.resultType&&e.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&e.setAttribute("startIndex",t.startIndex),void 0!==t.count&&e.setAttribute("count",t.count);var i=t.filter;if(t.bbox){d(t.geometryName,12);var o=Ug(t.geometryName,t.bbox,t.srsName);i=i?Gg(i,o):o}}return e.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.l),i={node:e,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.a,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:i,propertyNames:t.propertyNames?t.propertyNames:[]},d(Array.isArray(t.featureTypes),11),t=t.featureTypes,(o=ot({},(i=[i])[i.length-1])).node=e,Gu(o,av,Au("Query"),t,i),e},Bg.prototype.v=function(t,e,i,o){var r=[],n=bu("http://www.opengis.net/wfs","Transaction"),s=o.version?o.version:"1.1.0",a="1.0.0"===s?2:3;if(n.setAttribute("service","WFS"),n.setAttribute("version",s),o){var h=o.gmlOptions?o.gmlOptions:{};o.handle&&n.setAttribute("handle",o.handle)}n.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",Vg[s]);var l=o.featurePrefix?o.featurePrefix:"feature";return t&&(s={node:n,featureNS:o.featureNS,featureType:o.featureType,featurePrefix:l,gmlVersion:a,hasZ:o.hasZ,srsName:o.srsName},ot(s,h),Gu(s,tv,Au("Insert"),t,r)),e&&(s={node:n,featureNS:o.featureNS,featureType:o.featureType,featurePrefix:l,gmlVersion:a,hasZ:o.hasZ,srsName:o.srsName},ot(s,h),Gu(s,tv,Au("Update"),e,r)),i&&Gu({node:n,featureNS:o.featureNS,featureType:o.featureType,featurePrefix:l,gmlVersion:a,srsName:o.srsName},tv,Au("Delete"),i,r),o.nativeElements&&Gu({node:n,featureNS:o.featureNS,featureType:o.featureType,featurePrefix:l,gmlVersion:a,srsName:o.srsName},tv,Au("Native"),o.nativeElements,r),n},Bg.prototype.Sg=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.uf(t);return null},Bg.prototype.uf=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(t=(t=t.firstElementChild.firstElementChild).firstElementChild;t;t=t.nextElementSibling)if(0!==t.childNodes.length&&(1!==t.childNodes.length||3!==t.firstChild.nodeType)){var e=[{}];return this.b.rf(t,e),Dt(e.pop().srsName)}return null},s(hv,Df);var fv={Point:lv,LineString:pv,Polygon:uv,MultiPoint:function(t){for(var e=[],i=0,o=(t=t.de()).length;i<o;++i)e.push("("+lv(t[i])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],i=0,o=(t=t.wd()).length;i<o;++i)e.push("("+pv(t[i])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],i=0,o=(t=t.Vd()).length;i<o;++i)e.push("("+uv(t[i])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],i=0,o=(t=t.vd()).length;i<o;++i)e.push(cv(t[i]));return e.join(",")}};function dv(t){this.g=t,this.a="XY"}function yv(t){t.b=function t(e){var i=e.a.charAt(++e.b),o={position:e.b,value:i};if("("==i)o.type=2;else if(","==i)o.type=5;else if(")"==i)o.type=3;else if("0"<=i&&"9">=i||"."==i||"-"==i){o.type=4,i=e.b;var r=!1,n=!1;do{"."==s?r=!0:"e"!=s&&"E"!=s||(n=!0);var s=e.a.charAt(++e.b)}while("0"<=s&&"9">=s||"."==s&&(void 0===r||!r)||!n&&("e"==s||"E"==s)||n&&("-"==s||"+"==s));e=parseFloat(e.a.substring(i,e.b--)),o.value=e}else if("a"<=i&&"z">=i||"A"<=i&&"Z">=i){o.type=1,i=e.b;do{s=e.a.charAt(++e.b)}while("a"<=s&&"z">=s||"A"<=s&&"Z">=s);e=e.a.substring(i,e.b--).toUpperCase(),o.value=e}else{if(" "==i||"\t"==i||"\r"==i||"\n"==i)return t(e);if(""!==i)throw Error("Unexpected character: "+i);o.type=6}return o}(t.g)}function gv(t,e){return(e=t.b.type==e)&&yv(t),e}function vv(t){for(var e=[],i=t.a.length,o=0;o<i;++o){var r=t.b;if(!gv(t,4))break;e.push(r.value)}if(e.length==i)return e;throw Error(xv(t))}function mv(t){for(var e=[vv(t)];gv(t,5);)e.push(vv(t));return e}function _v(t){for(var e=[t.Gg()];gv(t,5);)e.push(t.Gg());return e}function bv(t){var e=1==t.b.type&&"EMPTY"==t.b.value;return e&&yv(t),e}function xv(t){return"Unexpected `"+t.b.value+"` at position "+t.b.position+" in `"+t.g.a+"`"}(t=hv.prototype).fe=function(t,e){return(t=this.Gd(t,e))?((e=new uh).Va(t),e):null},t.Ng=function(t,e){var i=[];t=this.Gd(t,e),e=[];for(var o=0,r=(i=this.b&&"GeometryCollection"==t.S()?t.a:[t]).length;o<r;++o)(t=new uh).Va(i[o]),e.push(t);return e},t.Gd=function(t,e){return yv(t=new dv(new function(t){this.a=t,this.b=-1}(t))),(t=function t(e){var i=e.b;if(gv(e,1)){i=i.value;var o="XY",r=e.b;if(1==e.b.type&&("Z"===(r=r.value)?o="XYZ":"M"===r?o="XYM":"ZM"===r&&(o="XYZM"),"XY"!==o&&yv(e)),e.a=o,"GEOMETRYCOLLECTION"==i){t:{if(gv(e,2)){i=[];do{i.push(t(e))}while(gv(e,5));if(gv(e,3)){e=i;break t}}else if(bv(e)){e=[];break t}throw Error(xv(e))}return new Rf(e)}if(r=Sv[i],o=Ev[i],!r||!o)throw Error("Invalid geometry type: "+i);return i=r.call(e),new o(i,e.a)}throw Error(xv(e))}(t))?Yu(t,!1,e):null},t.pe=function(t,e){return(t=t.U())?this.Kd(t,e):""},t.nh=function(t,e){if(1==t.length)return this.pe(t[0],e);for(var i=[],o=0,r=t.length;o<r;++o)i.push(t[o].U());return t=new Rf(i),this.Kd(t,e)},t.Kd=function(t,e){return cv(Yu(t,!0,e))},(t=dv.prototype).Hg=function(){if(gv(this,2)){var t=vv(this);if(gv(this,3))return t}else if(bv(this))return null;throw Error(xv(this))},t.Gg=function(){if(gv(this,2)){var t=mv(this);if(gv(this,3))return t}else if(bv(this))return[];throw Error(xv(this))},t.Ig=function(){if(gv(this,2)){var t=_v(this);if(gv(this,3))return t}else if(bv(this))return[];throw Error(xv(this))},t.Hp=function(){if(gv(this,2)){var t;if(2==this.b.type)for(t=[this.Hg()];gv(this,5);)t.push(this.Hg());else t=mv(this);if(gv(this,3))return t}else if(bv(this))return[];throw Error(xv(this))},t.Gp=function(){if(gv(this,2)){var t=_v(this);if(gv(this,3))return t}else if(bv(this))return[];throw Error(xv(this))},t.Ip=function(){if(gv(this,2)){for(var t=[this.Ig()];gv(this,5);)t.push(this.Ig());if(gv(this,3))return t}else if(bv(this))return[];throw Error(xv(this))};var Ev={POINT:Ko,LINESTRING:yh,POLYGON:nr,MULTIPOINT:qu,MULTILINESTRING:Hu,MULTIPOLYGON:Zu},Sv={POINT:dv.prototype.Hg,LINESTRING:dv.prototype.Gg,POLYGON:dv.prototype.Ig,MULTIPOINT:dv.prototype.Hp,MULTILINESTRING:dv.prototype.Gp,MULTIPOLYGON:dv.prototype.Ip};function Tv(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function wv(){}function Cv(){this.version=void 0}function Rv(t,e){return ju({},Kv,t,e)}function Pv(t,e){return ju({},Wv,t,e)}function Iv(t,e){if(e=Rv(t,e))return t=[_c(t.getAttribute("width")),_c(t.getAttribute("height"))],e.size=t,e}function Mv(t,e){return ju([],Hv,t,e)}wv.prototype.read=function(t){return Eu(t)?this.a(t):Su(t)?this.b(t):"string"==typeof t?(t=Tu(t),this.a(t)):null},s(Cv,wv),Cv.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},Cv.prototype.b=function(t){return this.version=t.getAttribute("version").trim(),(t=ju({version:this.version},Av,t,[]))?t:null};var Lv=[null,"http://www.opengis.net/wms"],Av=Nu(Lv,{Service:Iu(function(t,e){return ju({},Fv,t,e)}),Capability:Iu(function(t,e){return ju({},Ov,t,e)})}),Ov=Nu(Lv,{Request:Iu(function(t,e){return ju({},Vv,t,e)}),Exception:Iu(function(t,e){return ju([],kv,t,e)}),Layer:Iu(function(t,e){return ju({},Gv,t,e)})}),Fv=Nu(Lv,{Name:Iu(bc),Title:Iu(bc),Abstract:Iu(bc),KeywordList:Iu(Mv),OnlineResource:Iu(Tv),ContactInformation:Iu(function(t,e){return ju({},Nv,t,e)}),Fees:Iu(bc),AccessConstraints:Iu(bc),LayerLimit:Iu(mc),MaxWidth:Iu(mc),MaxHeight:Iu(mc)}),Nv=Nu(Lv,{ContactPersonPrimary:Iu(function(t,e){return ju({},Dv,t,e)}),ContactPosition:Iu(bc),ContactAddress:Iu(function(t,e){return ju({},jv,t,e)}),ContactVoiceTelephone:Iu(bc),ContactFacsimileTelephone:Iu(bc),ContactElectronicMailAddress:Iu(bc)}),Dv=Nu(Lv,{ContactPerson:Iu(bc),ContactOrganization:Iu(bc)}),jv=Nu(Lv,{AddressType:Iu(bc),Address:Iu(bc),City:Iu(bc),StateOrProvince:Iu(bc),PostCode:Iu(bc),Country:Iu(bc)}),kv=Nu(Lv,{Format:Cu(bc)}),Gv=Nu(Lv,{Name:Iu(bc),Title:Iu(bc),Abstract:Iu(bc),KeywordList:Iu(Mv),CRS:Pu(bc),EX_GeographicBoundingBox:Iu(function(t,e){var i=ju({},Bv,t,e);if(i){t=i.westBoundLongitude,e=i.southBoundLatitude;var o=i.eastBoundLongitude;if(i=i.northBoundLatitude,void 0!==t&&void 0!==e&&void 0!==o&&void 0!==i)return[t,e,o,i]}}),BoundingBox:Pu(function(t){var e=[vc(t.getAttribute("minx")),vc(t.getAttribute("miny")),vc(t.getAttribute("maxx")),vc(t.getAttribute("maxy"))],i=[vc(t.getAttribute("resx")),vc(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:e,res:i}}),Dimension:Pu(function(t){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:dc(t.getAttribute("multipleValues")),nearestValue:dc(t.getAttribute("nearestValue")),current:dc(t.getAttribute("current")),values:bc(t)}}),Attribution:Iu(function(t,e){return ju({},Uv,t,e)}),AuthorityURL:Pu(function(t,e){if(e=Rv(t,e))return e.name=t.getAttribute("name"),e}),Identifier:Pu(bc),MetadataURL:Pu(function(t,e){if(e=Rv(t,e))return e.type=t.getAttribute("type"),e}),DataURL:Pu(Rv),FeatureListURL:Pu(Rv),Style:Pu(function(t,e){return ju({},zv,t,e)}),MinScaleDenominator:Iu(gc),MaxScaleDenominator:Iu(gc),Layer:Pu(function(t,e){var i=e[e.length-1],o=ju({},Gv,t,e);if(o)return void 0===(e=dc(t.getAttribute("queryable")))&&(e=i.queryable),o.queryable=void 0!==e&&e,void 0===(e=_c(t.getAttribute("cascaded")))&&(e=i.cascaded),o.cascaded=e,void 0===(e=dc(t.getAttribute("opaque")))&&(e=i.opaque),o.opaque=void 0!==e&&e,void 0===(e=dc(t.getAttribute("noSubsets")))&&(e=i.noSubsets),o.noSubsets=void 0!==e&&e,(e=vc(t.getAttribute("fixedWidth")))||(e=i.fixedWidth),o.fixedWidth=e,(t=vc(t.getAttribute("fixedHeight")))||(t=i.fixedHeight),o.fixedHeight=t,["Style","CRS","AuthorityURL"].forEach(function(t){t in i&&(o[t]=(o[t]||[]).concat(i[t]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(t){t in o||(o[t]=i[t])}),o})}),Uv=Nu(Lv,{Title:Iu(bc),OnlineResource:Iu(Tv),LogoURL:Iu(Iv)}),Bv=Nu(Lv,{westBoundLongitude:Iu(gc),eastBoundLongitude:Iu(gc),southBoundLatitude:Iu(gc),northBoundLatitude:Iu(gc)}),Vv=Nu(Lv,{GetCapabilities:Iu(Pv),GetMap:Iu(Pv),GetFeatureInfo:Iu(Pv)}),Wv=Nu(Lv,{Format:Pu(bc),DCPType:Pu(function(t,e){return ju({},Xv,t,e)})}),Xv=Nu(Lv,{HTTP:Iu(function(t,e){return ju({},Yv,t,e)})}),Yv=Nu(Lv,{Get:Iu(Rv),Post:Iu(Rv)}),zv=Nu(Lv,{Name:Iu(bc),Title:Iu(bc),Abstract:Iu(bc),LegendURL:Pu(Iv),StyleSheetURL:Iu(Rv),StyleURL:Iu(Rv)}),Kv=Nu(Lv,{Format:Iu(bc),OnlineResource:Iu(Tv)}),Hv=Nu(Lv,{Keyword:Cu(bc)});function $v(t){t=t||{},this.a="http://mapserver.gis.umn.edu/mapserver",this.b=new Fc,this.c=t.layers?t.layers:null,hc.call(this)}function qv(){}s($v,hc),$v.prototype.Kc=function(t,e){var i={};e&&ot(i,Wu(this,t,e)),i=[i],t.setAttribute("namespaceURI",this.a);var o=t.localName;if(e=[],0!==t.childNodes.length){if("msGMLOutput"==o)for(var r=0,n=t.childNodes.length;r<n;r++){var s=t.childNodes[r];if(s.nodeType===Node.ELEMENT_NODE){var a=i[0],h=s.localName.replace("_layer","");if(!this.c||zt(this.c,h)){h+="_feature",a.featureType=h,a.featureNS=this.a;var l={};l[h]=Cu(this.b.Kg,this.b),a=Nu([a.featureNS,null],l),s.setAttribute("namespaceURI",this.a),(s=ju([],a,s,i,this.b))&&Ht(e,s)}}}"FeatureCollection"==o&&(t=ju([],this.b.b,t,[{}],this.b))&&(e=t)}return e},$v.prototype.mh=function(){},$v.prototype.bc=function(){},$v.prototype.re=function(){},s(qv,wv),qv.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},qv.prototype.b=function(t){return(t=ju({},Jv,t,[]))?t:null};var Zv=[null,"http://www.opengis.net/ows/1.1"],Jv=Nu(Zv,{ServiceIdentification:Iu(function(t,e){return ju({},pm,t,e)}),ServiceProvider:Iu(function(t,e){return ju({},um,t,e)}),OperationsMetadata:Iu(function(t,e){return ju({},sm,t,e)})}),Qv=Nu(Zv,{DeliveryPoint:Iu(bc),City:Iu(bc),AdministrativeArea:Iu(bc),PostalCode:Iu(bc),Country:Iu(bc),ElectronicMailAddress:Iu(bc)}),tm=Nu(Zv,{Value:Pu(function(t){return bc(t)})}),em=Nu(Zv,{AllowedValues:Iu(function(t,e){return ju({},tm,t,e)})}),im=Nu(Zv,{Phone:Iu(function(t,e){return ju({},am,t,e)}),Address:Iu(function(t,e){return ju({},Qv,t,e)})}),om=Nu(Zv,{HTTP:Iu(function(t,e){return ju({},rm,t,e)})}),rm=Nu(Zv,{Get:Pu(function(t,e){var i=Tv(t);if(i)return ju({href:i},hm,t,e)}),Post:void 0}),nm=Nu(Zv,{DCP:Iu(function(t,e){return ju({},om,t,e)})}),sm=Nu(Zv,{Operation:function(t,e){var i=t.getAttribute("name");(t=ju({},nm,t,e))&&(e[e.length-1][i]=t)}}),am=Nu(Zv,{Voice:Iu(bc),Facsimile:Iu(bc)}),hm=Nu(Zv,{Constraint:Pu(function(t,e){var i=t.getAttribute("name");if(i)return ju({name:i},em,t,e)})}),lm=Nu(Zv,{IndividualName:Iu(bc),PositionName:Iu(bc),ContactInfo:Iu(function(t,e){return ju({},im,t,e)})}),pm=Nu(Zv,{Abstract:Iu(bc),AccessConstraints:Iu(bc),Fees:Iu(bc),Title:Iu(bc),ServiceTypeVersion:Iu(bc),ServiceType:Iu(bc)}),um=Nu(Zv,{ProviderName:Iu(bc),ProviderSite:Iu(Tv),ServiceContact:Iu(function(t,e){return ju({},lm,t,e)})});function cm(){this.g=new qv}function fm(t){var e=bc(t).split(" ");if(e&&2==e.length&&(t=+e[0],e=+e[1],!isNaN(t)&&!isNaN(e)))return[t,e]}s(cm,wv),cm.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},cm.prototype.b=function(t){var e=t.getAttribute("version").trim(),i=this.g.b(t);return i?(i.version=e,(i=ju(i,gm,t,[]))?i:null):null};var dm=[null,"http://www.opengis.net/wmts/1.0"],ym=[null,"http://www.opengis.net/ows/1.1"],gm=Nu(dm,{Contents:Iu(function(t,e){return ju({},vm,t,e)})}),vm=Nu(dm,{Layer:Pu(function(t,e){return ju({},mm,t,e)}),TileMatrixSet:Pu(function(t,e){return ju({},wm,t,e)})}),mm=Nu(dm,{Style:Pu(function(t,e){if(e=ju({},_m,t,e))return t="true"===t.getAttribute("isDefault"),e.isDefault=t,e}),Format:Pu(bc),TileMatrixSetLink:Pu(function(t,e){return ju({},bm,t,e)}),Dimension:Pu(function(t,e){return ju({},Sm,t,e)}),ResourceURL:Pu(function(t){var e=t.getAttribute("format"),i=t.getAttribute("template");t=t.getAttribute("resourceType");var o={};return e&&(o.format=e),i&&(o.template=i),t&&(o.resourceType=t),o})},Nu(ym,{Title:Iu(bc),Abstract:Iu(bc),WGS84BoundingBox:Iu(function(t,e){if(2==(t=ju([],Tm,t,e)).length)return w(t)}),Identifier:Iu(bc)})),_m=Nu(dm,{LegendURL:Pu(function(t){var e={};return e.format=t.getAttribute("format"),e.href=Tv(t),e})},Nu(ym,{Title:Iu(bc),Identifier:Iu(bc)})),bm=Nu(dm,{TileMatrixSet:Iu(bc),TileMatrixSetLimits:Iu(function(t,e){return ju([],xm,t,e)})}),xm=Nu(dm,{TileMatrixLimits:Cu(function(t,e){return ju({},Em,t,e)})}),Em=Nu(dm,{TileMatrix:Iu(bc),MinTileRow:Iu(mc),MaxTileRow:Iu(mc),MinTileCol:Iu(mc),MaxTileCol:Iu(mc)}),Sm=Nu(dm,{Default:Iu(bc),Value:Pu(bc)},Nu(ym,{Identifier:Iu(bc)})),Tm=Nu(ym,{LowerCorner:Cu(fm),UpperCorner:Cu(fm)}),wm=Nu(dm,{WellKnownScaleSet:Iu(bc),TileMatrix:Pu(function(t,e){return ju({},Cm,t,e)})},Nu(ym,{SupportedCRS:Iu(bc),Identifier:Iu(bc)})),Cm=Nu(dm,{TopLeftCorner:Iu(fm),ScaleDenominator:Iu(gc),TileWidth:Iu(mc),TileHeight:Iu(mc),MatrixWidth:Iu(mc),MatrixHeight:Iu(mc)},Nu(ym,{Identifier:Iu(bc)}));function Rm(t,e,i){Co.call(this),this.hh(t,e||0,i)}function Pm(t){var e=t.A[t.a]-t.A[0];return e*e+(t=t.A[t.a+1]-t.A[1])*t}function Im(t){t=t||{},zr.call(this,{handleEvent:lo}),this.j=t.formatConstructors?t.formatConstructors:[],this.s=t.projection?Dt(t.projection):null,this.a=null,this.f=t.source||null,this.target=t.target?t.target:null}function Mm(t){var e,i=0;for(e=(t=t.dataTransfer.files).length;i<e;++i){var o=t.item(i),r=new FileReader;r.addEventListener("load",this.l.bind(this,o)),r.readAsText(o)}}function Lm(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function Am(t){var e=t.v;e&&(e=t.target?t.target:e.a,t.a=[ve(e,"drop",Mm,t),ve(e,"dragenter",Lm,t),ve(e,"dragover",Lm,t),ve(e,"drop",Lm,t)])}function Om(t){t.a&&(t.a.forEach(be),t.a=null)}s(Rm,Co),(t=Rm.prototype).clone=function(){var t=new Rm(null);return Po(t,this.ja,this.A.slice()),t.u(),t},t.Nb=function(t,e,i,o){var r=this.A;t-=r[0];var n=e-r[1];if((e=t*t+n*n)<o){if(0===e)for(o=0;o<this.a;++o)i[o]=r[o];else for(o=this.Bd()/Math.sqrt(e),i[0]=r[0]+o*t,i[1]=r[1]+o*n,o=2;o<this.a;++o)i[o]=r[o];return i.length=this.a,e}return o},t.Zc=function(t,e){var i=this.A;return(t-=i[0])*t+(e-=i[1])*e<=Pm(this)},t.xa=function(){return this.A.slice(0,this.a)},t.Ae=function(t){var e=this.A,i=e[this.a]-e[0];return F(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},t.Bd=function(){return Math.sqrt(Pm(this))},t.S=function(){return"Circle"},t.$a=function(t){var e=this.G();return!!Q(t,e)&&(e=this.xa(),t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||V(t,this.Bb,this))},t.ub=function(t){var e,i=this.a,o=t.slice();for(o[i]=o[0]+(this.A[i]-this.A[0]),e=1;e<i;++e)o[i+e]=t[e];Po(this,this.ja,o),this.u()},t.hh=function(t,e,i){if(t){var o;for(Io(this,i,t,0),this.A||(this.A=[]),t=jo(i=this.A,t),i[t++]=i[0]+e,e=1,o=this.a;e<o;++e)i[t++]=i[e];i.length=t}else Po(this,"XY",null);this.u()},t.W=function(){},t.na=function(){},t.fd=function(t){this.A[this.a]=this.A[0]+t,this.u()},s(Im,zr),Im.prototype.l=function(t,e){e=e.target.result;var i=this.v,o=this.s;o||(o=i.aa().v);var r,n=[],s=0;for(r=(i=this.j).length;s<r;++s){var a=new i[s],h={featureProjection:o};try{n=a.Qa(e,h)}catch(t){n=null}if(n&&0<n.length)break}this.f&&(this.f.clear(),this.f.Qc(n)),this.b(new Nm(Fm,t,n,o))},Im.prototype.Ha=function(t){zr.prototype.Ha.call(this,t),t?Am(this):Om(this)},Im.prototype.setMap=function(t){Om(this),zr.prototype.setMap.call(this,t),this.c()&&Am(this)};var Fm="addfeatures";function Nm(t,e,i,o){Te.call(this,t),this.features=i,this.file=e,this.projection=o}function Dm(t){t=t||{},ln.call(this,{handleDownEvent:Gm,handleDragEvent:jm,handleUpEvent:km}),this.s=t.condition?t.condition:nn,this.a=this.f=void 0,this.j=0,this.o=void 0!==t.duration?t.duration:400}function jm(t){if(an(t)){var e=t.map,i=e.Cb(),o=t.pixel;t=o[0]-i[0]/2,o=i[1]/2-o[1],i=Math.atan2(o,t),t=Math.sqrt(t*t+o*o),(e=e.aa()).l.rotation!==Xi&&void 0!==this.f&&(o=i-this.f,Kr(e,e.Sa()-o)),this.f=i,void 0!==this.a&&$r(e,i=this.a*(e.Pa()/t)),void 0!==this.a&&(this.j=this.a/t),this.a=t}}function km(t){if(!an(t))return!0;vr(t=t.map.aa(),1,-1);var e=this.j-1,i=t.Sa();Kr(t,i=t.constrainRotation(i,0),void 0,void 0),i=t.Pa();var o=this.o;return $r(t,i=t.constrainResolution(i,0,e),void 0,o),this.j=0,!1}function Gm(t){return!(!an(t)||!this.s(t))&&(vr(t.map.aa(),1,1),this.a=this.f=void 0,!0)}function Um(t){var e=ot({},t=t||{});delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,Nr.call(this,e),this.D=void 0!==t.declutter&&t.declutter,this.f=void 0!==t.renderBuffer?t.renderBuffer:100,this.C=null,this.V=void 0,this.j(t.style),this.ca=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.ra=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting,this.l=t.renderMode||"vector",this.type="VECTOR"}s(Nm,Te),s(Dm,ln),s(Um,Nr),Um.prototype.B=function(){return this.C},Um.prototype.ib=function(){return this.V},Um.prototype.j=function(t){this.C=void 0!==t?t:hh,this.V=null===t?void 0:sh(this.C),this.u()};var Bm="renderOrder";function Vm(){return[[-1/0,-1/0,1/0,1/0]]}function Wm(t){Ie.call(this),this.c=Dt(t.projection),this.v=null,this.C=Xm(this,t.attributions),this.T=t.logo,this.ra=void 0!==t.state?t.state:"ready",this.D=void 0!==t.wrapX&&t.wrapX}function Xm(t,e){if(!e)return null;if(e instanceof ce)return t.v=[e],function(){return[e.og]};if(Array.isArray(e)){if(e[0]instanceof ce){t.v=e;var i=e.map(function(t){return t.og});return function(){return i}}return t.v=e.map(function(t){return new ce({html:t})}),function(){return e}}return"function"==typeof e?e:(t.v=[new ce({html:e})],function(){return[e]})}function Ym(t,e){t.ra=e,t.u()}function zm(t){t=t||{},Wm.call(this,{attributions:t.attributions,logo:t.logo,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.o=a,this.O=t.format,this.$=void 0==t.overlaps||t.overlaps,this.V=t.url,void 0!==t.loader?this.o=t.loader:void 0!==this.V&&(d(this.O,7),this.o=Bu(this.V,this.O)),this.ca=void 0!==t.strategy?t.strategy:Vm;var e=void 0===t.useSpatialIndex||t.useSpatialIndex;if(this.a=e?new kl:null,this.B=new kl,this.f={},this.j={},this.l={},this.s={},this.i=null,t.features instanceof Fe)var i=t.features,o=i.a;else Array.isArray(t.features)&&(o=t.features);e||void 0!==i||(i=new Fe(o)),void 0!==o&&$m(this,o),void 0!==i&&function(t,e){var i=!1;ve(t,"addfeature",function(t){i||(i=!0,e.push(t.feature),i=!1)}),ve(t,"removefeature",function(t){i||(i=!0,e.remove(t.feature),i=!1)}),ve(e,"add",function(t){i||(i=!0,this.Gb(t.element),i=!1)},t),ve(e,"remove",function(t){i||(i=!0,this.Lb(t.element),i=!1)},t),t.i=e}(this,i)}function Km(t,e,i){t.s[e]=[ve(i,"change",t.gj,t),ve(i,"propertychange",t.gj,t)]}function Hm(t,e,i){var o=!0,r=i.c;return void 0!==r?r.toString()in t.j?o=!1:t.j[r.toString()]=i:(d(!(e in t.l),30),t.l[e]=i),o}function $m(t,e){var i,o=[],r=[],n=[],s=0;for(i=e.length;s<i;s++){var a=e[s],l=h(a).toString();Hm(t,l,a)&&r.push(a)}for(s=0,i=r.length;s<i;s++)Km(t,l=h(a=r[s]).toString(),a),(e=a.U())?(l=e.G(),o.push(l),n.push(a)):t.f[l]=a;for(t.a&&t.a.load(o,n),s=0,i=r.length;s<i;s++)t.b(new Zm("addfeature",r[s]))}function qm(t,e){for(var i in t.j)if(t.j[i]===e){delete t.j[i];break}}function Zm(t,e){Te.call(this,t),this.feature=e}function Jm(t){ln.call(this,{handleDownEvent:t_,handleEvent:Qm,handleUpEvent:e_}),this.V=!1,this.ca=null,this.o=!1,this.ob=t.source?t.source:null,this.La=t.features?t.features:null,this.Xk=t.snapTolerance?t.snapTolerance:12,this.O=t.type,this.f=function(t){var e;return"Point"===t||"MultiPoint"===t?e=h_:"LineString"===t||"MultiLineString"===t?e=l_:"Polygon"===t||"MultiPolygon"===t?e=p_:"Circle"===t&&(e=u_),e}(this.O),this.$k=!!t.stopClick,this.Ea=t.minPoints?t.minPoints:this.f===p_?3:2,this.ua=t.maxPoints?t.maxPoints:1/0,this.Md=t.finishCondition?t.finishCondition:lo;var e=t.geometryFunction;if(!e)if("Circle"===this.O)e=function(t,e){return(e=e||new Rm([NaN,NaN])).hh(t[0],Math.sqrt(eo(t[0],t[1]))),e};else{var i,o=this.f;o===h_?i=Ko:o===l_?i=yh:o===p_&&(i=nr),e=function(t,e){return e?o===p_?t[0].length?e.na([t[0].concat([t[0][0]])]):e.na([]):e.na(t):e=new i(t),e}}this.cb=e,this.T=this.C=this.a=this.B=this.j=this.s=null,this.sc=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.ra=new Um({source:new zm({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:function(){var t=lh();return function(e){return t[e.U().S()]}}()}),this.bb=t.geometryName,this.Wk=t.condition?t.condition:rn,this.If=t.freehand?lo:t.freehandCondition?t.freehandCondition:nn,ve(this,Le("active"),this.Ki,this)}function Qm(t){this.o=this.f!==h_&&this.If(t);var e=!0;return this.o&&"pointerdrag"===t.type&&null!==this.j?(n_(this,t),e=!1):this.o&&"pointerdown"===t.type?e=!1:"pointermove"===t.type?e=i_(this,t):"dblclick"===t.type&&(e=!1),un.call(this,t)&&e}function t_(t){return this.V=!this.o,this.o?(this.ca=t.pixel,this.s||r_(this,t),!0):!!this.Wk(t)&&(this.ca=t.pixel,!0)}function e_(t){var e=!0;i_(this,t);var i=this.f===u_;return this.V?(this.s?this.o||i?this.Pd():o_(this,t)?this.Md(t)&&this.Pd():n_(this,t):(r_(this,t),this.f===h_&&this.Pd()),e=!1):this.o&&(this.s=null,s_(this)),!e&&this.$k&&t.stopPropagation(),e}function i_(t,e){if(t.ca&&(!t.o&&t.V||t.o&&!t.V)){var i=t.ca,o=e.pixel,r=i[0]-o[0];r=r*r+(i=i[1]-o[1])*i,t.V=t.o?r>t.sc:r<=t.sc}return t.s?(r=e.coordinate,i=t.j.U(),t.f===h_?o=t.a:t.f===p_?(o=(o=t.a[0])[o.length-1],o_(t,e)&&(r=t.s.slice())):o=(o=t.a)[o.length-1],o[0]=r[0],o[1]=r[1],t.cb(t.a,i),t.B&&t.B.U().na(r),i instanceof nr&&t.f!==p_?(t.C||(t.C=new uh(new yh(null))),r=i.Wh(0),(e=t.C.U()).ba(r.ja,r.da())):t.T&&(e=t.C.U()).na(t.T),a_(t)):(e=e.coordinate.slice(),t.B?t.B.U().na(e):(t.B=new uh(new Ko(e)),a_(t))),!0}function o_(t,e){var i=!1;if(t.j){var o=!1,r=[t.s];if(t.f===l_?o=t.a.length>t.Ea:t.f===p_&&(o=t.a[0].length>t.Ea,r=[t.a[0][0],t.a[0][t.a[0].length-2]]),o){o=e.map;for(var n=0,s=r.length;n<s;n++){var a=r[n],h=o.Ia(a),l=e.pixel;if(i=l[0]-h[0],h=l[1]-h[1],i=Math.sqrt(i*i+h*h)<=(t.o?1:t.Xk)){t.s=a;break}}}}return i}function r_(t,e){e=e.coordinate,t.s=e,t.f===h_?t.a=e.slice():t.f===p_?(t.a=[[e.slice(),e.slice()]],t.T=t.a[0]):(t.a=[e.slice(),e.slice()],t.f===u_&&(t.T=t.a)),t.T&&(t.C=new uh(new yh(t.T))),e=t.cb(t.a),t.j=new uh,t.bb&&t.j.Lc(t.bb),t.j.Va(e),a_(t),t.b(new c_("drawstart",t.j))}function n_(t,e){e=e.coordinate;var i,o=t.j.U();if(t.f===l_){t.s=e.slice();var r=t.a;r.length>=t.ua&&(t.o?r.pop():i=!0),r.push(e.slice()),t.cb(r,o)}else t.f===p_&&((r=t.a[0]).length>=t.ua&&(t.o?r.pop():i=!0),r.push(e.slice()),i&&(t.s=r[0]),t.cb(t.a,o));a_(t),i&&t.Pd()}function s_(t){t.s=null;var e=t.j;return e&&(t.j=null,t.B=null,t.C=null,t.ra.ha().clear(!0)),e}function a_(t){var e=[];t.j&&e.push(t.j),t.C&&e.push(t.C),t.B&&e.push(t.B),(t=t.ra.ha()).clear(!0),t.Qc(e)}s(Wm,Ie),(t=Wm.prototype).wa=a,t.za=function(){return this.v},t.Aa=function(){return this.T},t.Da=function(){return this.c},t.getState=function(){return this.ra},t.sa=function(){this.u()},t.va=function(t){this.C=Xm(this,t),this.u()},s(zm,Wm),(t=zm.prototype).Gb=function(t){var e=h(t).toString();if(Hm(this,e,t)){Km(this,e,t);var i=t.U();i?(e=i.G(),this.a&&this.a.Ca(e,t)):this.f[e]=t,this.b(new Zm("addfeature",t))}this.u()},t.Qc=function(t){$m(this,t),this.u()},t.clear=function(t){if(t){for(var e in this.s)this.s[e].forEach(be);this.i||(this.s={},this.j={},this.l={})}else if(this.a)for(var i in this.a.forEach(this.Yg,this),this.f)this.Yg(this.f[i]);this.i&&this.i.clear(),this.a&&this.a.clear(),this.B.clear(),this.f={},this.b(new Zm("clear")),this.u()},t.Lh=function(t,e){return this.a?this.a.forEach(t,e):this.i?this.i.forEach(t,e):void 0},t.ec=function(t,e,i){return this.a?Vl(this.a,t,e,i):this.i?this.i.forEach(e,i):void 0},t.Mh=function(t,e,i){return this.ec(t,function(o){if(o.U().$a(t)&&(o=e.call(i,o)))return o})},t.Th=function(){return this.i},t.ee=function(){if(this.i)var t=this.i.a;else this.a&&(t=Ul(this.a),st(this.f)||Ht(t,nt(this.f)));return t},t.Sh=function(t){var e=[];return function(t,e,i){t.ec([e[0],e[1],e[0],e[1]],function(t){if(t.U().Bb(e))return i.call(void 0,t)})}(this,t,function(t){e.push(t)}),e},t.Yf=function(t){return Bl(this.a,t)},t.Oh=function(t,e){var i=t[0],o=t[1],r=null,n=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||lo;return Vl(this.a,a,function(t){if(h(t)){var e=t.U(),l=s;(s=e.Nb(i,o,n,s))<l&&(r=t,t=Math.sqrt(s),a[0]=i-t,a[1]=o-t,a[2]=i+t,a[3]=o+t)}}),r},t.G=function(t){return this.a.G(t)},t.Rh=function(t){return void 0!==(t=this.j[t.toString()])?t:null},t.ej=function(){return this.O},t.fj=function(){return this.V},t.gj=function(t){var e=h(t=t.target).toString(),i=t.U();i?(i=i.G(),e in this.f?(delete this.f[e],this.a&&this.a.Ca(i,t)):this.a&&Gl(this.a,i,t)):e in this.f||(this.a&&this.a.remove(t),this.f[e]=t),void 0!==(i=t.c)?(i=i.toString(),e in this.l?(delete this.l[e],this.j[i]=t):this.j[i]!==t&&(qm(this,t),this.j[i]=t)):e in this.l||(qm(this,t),this.l[e]=t),this.u(),this.b(new Zm("changefeature",t))},t.ae=function(t,e,i){var o,r=this.B,n=0;for(o=(t=this.ca(t,e)).length;n<o;++n){var s=t[n];Vl(r,s,function(t){return M(t.extent,s)})||(this.o.call(this,s,e,i),r.Ca(s,{extent:s.slice()}))}},t.Cj=function(t){var e,i=this.B;Vl(i,t,function(i){if(k(i.extent,t))return e=i,!0}),e&&i.remove(e)},t.Lb=function(t){var e=h(t).toString();e in this.f?delete this.f[e]:this.a&&this.a.remove(t),this.Yg(t),this.u()},t.Yg=function(t){var e=h(t).toString();this.s[e].forEach(be),delete this.s[e];var i=t.c;void 0!==i?delete this.j[i.toString()]:delete this.l[e],this.b(new Zm("removefeature",t))},t.hj=function(t){this.o=t},s(Zm,Te),s(Jm,ln),(t=Jm.prototype).setMap=function(t){ln.prototype.setMap.call(this,t),this.Ki()},t.nq=function(){if(this.j){var t=this.j.U();if(this.f===l_){var e=this.a;e.splice(-2,1),this.cb(e,t),2<=e.length&&(this.s=e[e.length-2].slice())}else if(this.f===p_){(e=this.a[0]).splice(-2,1),this.C.U().na(e),this.cb(this.a,t)}0===e.length&&(this.s=null),a_(this)}},t.Pd=function(){var t=s_(this),e=this.a,i=t.U();this.f===l_?(e.pop(),this.cb(e,i)):this.f===p_&&(e[0].pop(),this.cb(e,i),e=i.W()),"MultiPoint"===this.O?t.Va(new qu([e])):"MultiLineString"===this.O?t.Va(new Hu([e])):"MultiPolygon"===this.O&&t.Va(new Zu([e])),this.b(new c_("drawend",t)),this.La&&this.La.push(t),this.ob&&this.ob.Gb(t)},t.Zn=function(t){var e=t.U();this.j=t,this.a=e.W(),t=this.a[this.a.length-1],this.s=t.slice(),this.a.push(t.slice()),a_(this),this.b(new c_("drawstart",this.j))},t.jd=po,t.Ki=function(){var t=this.v,e=this.c();t&&e||s_(this),this.ra.setMap(e?t:null)};var h_="Point",l_="LineString",p_="Polygon",u_="Circle";function c_(t,e){Te.call(this,t),this.feature=e}function f_(t){var e=t||{};this.a=this.j=null,this.C=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.B=!1,this.T=this.s=null,t||(t={}),ln.call(this,{handleDownEvent:y_,handleDragEvent:g_,handleEvent:d_,handleUpEvent:v_}),this.o=new Um({source:new zm({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:function(){var t=lh();return function(){return t.Polygon}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.O=new Um({source:new zm({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:function(){var t=lh();return function(){return t.Point}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.f(t.extent)}function d_(t){if(!(t instanceof hi))return!0;if("pointermove"==t.type&&!this.D){var e=t.pixel,i=t.map,o=b_(this,e,i);o||(o=i.Ra(e)),x_(this,o)}return un.call(this,t),!1}function y_(t){function e(t){var e=null,i=null;return t[0]==r[0]?e=r[2]:t[0]==r[2]&&(e=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==e&&null!==i?[e,i]:null}var i=t.pixel,o=t.map,r=this.G();return(t=b_(this,i,o))&&r?(i=t[0]==r[0]||t[0]==r[2]?t[0]:null,o=t[1]==r[1]||t[1]==r[3]?t[1]:null,null!==i&&null!==o?this.a=m_(e(t)):null!==i?this.a=__(e([i,r[1]]),e([i,r[3]])):null!==o&&(this.a=__(e([r[0],o]),e([r[2],o])))):(t=o.Ra(i),this.f([t[0],t[1],t[0],t[1]]),this.a=m_(t)),!0}function g_(t){return this.a&&(t=t.coordinate,this.f(this.a(t)),x_(this,t)),!0}function v_(){this.a=null;var t=this.G();return t&&0!==W(t)||this.f(null),!1}function m_(t){return function(e){return w([t,e])}}function __(t,e){return t[0]==e[0]?function(i){return w([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return w([t,[e[0],i[1]]])}:null}function b_(t,e,i){var o=i.Ra(e),r=t.G();if(r){(r=[[[r[0],r[1]],[r[0],r[3]]],[[r[0],r[3]],[r[2],r[3]]],[[r[2],r[3]],[r[2],r[1]]],[[r[2],r[1]],[r[0],r[1]]]]).sort(function(t,e){return oo(o,t)-oo(o,e)}),r=r[0];var n=$i(o,r),s=i.Ia(n);if(io(e,s)<=t.C)return e=i.Ia(r[0]),i=i.Ia(r[1]),e=eo(s,e),i=eo(s,i),t.B=Math.sqrt(Math.min(e,i))<=t.C,t.B&&(n=e>i?r[1]:r[0]),n}return null}function x_(t,e){var i=t.T;i?i.U().na(e):(i=new uh(new Ko(e)),t.T=i,t.O.ha().Gb(i))}function E_(t){Te.call(this,"extentchanged"),this.extent=t}function S_(t){if(ln.call(this,{handleDownEvent:P_,handleDragEvent:I_,handleEvent:L_,handleUpEvent:M_}),this.Md=t.condition?t.condition:hn,this.bb=function(t){return Jr(t)&&on(t)},this.ob=t.deleteCondition?t.deleteCondition:this.bb,this.sc=t.insertVertexCondition?t.insertVertexCondition:lo,this.La=this.f=null,this.Ea=[0,0],this.C=this.T=!1,this.a=new kl,this.ra=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.s=this.ua=!1,this.j=[],this.B=new Um({source:new zm({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:function(){var t=lh();return function(){return t.Point}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.ca={Point:this.io,LineString:this.Mi,LinearRing:this.Mi,Polygon:this.jo,MultiPoint:this.fo,MultiLineString:this.eo,MultiPolygon:this.ho,Circle:this.bo,GeometryCollection:this.co},this.V=null,t.source?(this.V=t.source,t=new Fe(this.V.ee()),ve(this.V,"addfeature",this.vm,this),ve(this.V,"removefeature",this.xm,this)):t=t.features,!t)throw Error("The modify interaction requires features or a source");this.o=t,this.o.forEach(this.xg,this),ve(this.o,"add",this.$n,this),ve(this.o,"remove",this.ao,this),this.O=null}function T_(t,e){t.C||(t.C=!0,t.b(new D_("modifystart",t.o,e)))}function w_(t,e){!function(t,e){var i=[];(t=t.a).forEach(function(t){e===t.feature&&i.push(t)});for(var o=i.length-1;0<=o;--o)t.remove(i[o])}(t,e),t.f&&0===t.o.kc()&&(t.B.ha().Lb(t.f),t.f=null),_e(e,"change",t.Li,t)}function C_(t,e){var i=t.f;i?i.U().na(e):(i=new uh(new Ko(e)),t.f=i,t.B.ha().Gb(i))}function R_(t,e){return t.index-e.index}function P_(t){if(!this.Md(t))return!1;A_(this,t.pixel,t.map);var e=t.map.Ra(t.pixel);this.j.length=0,this.C=!1;var i=this.f;if(i){var o=[],r=w([i=i.U().W()]),n={};(r=Bl(this.a,r)).sort(R_);for(var s=0,a=r.length;s<a;++s){var l=r[s],p=l.ma,u=h(l.feature),c=l.depth;c&&(u+="-"+c.join("-")),n[u]||(n[u]=Array(2)),"Circle"===l.geometry.S()&&1===l.index?Ji(p=F_(e,l),i)&&!n[u][0]&&(this.j.push([l,0]),n[u][0]=l):Ji(p[0],i)&&!n[u][0]?(this.j.push([l,0]),n[u][0]=l):Ji(p[1],i)&&!n[u][1]?("LineString"!==l.geometry.S()&&"MultiLineString"!==l.geometry.S()||!n[u][0]||0!==n[u][0].index)&&(this.j.push([l,1]),n[u][1]=l):this.sc(t)&&h(p)in this.La&&!n[u][0]&&!n[u][1]&&o.push([l,i])}for(o.length&&T_(this,t),t=o.length-1;0<=t;--t)this.Em.apply(this,o[t])}return!!this.f}function I_(t){this.T=!1,T_(this,t),t=t.coordinate;for(var e=0,i=this.j.length;e<i;++e){var o=this.j[e],r=o[0],n=r.depth,s=r.geometry,a=r.ma;for(o=o[1];t.length<s.pa();)t.push(a[o][t.length]);switch(s.S()){case"Point":var h=t;a[0]=a[1]=t;break;case"MultiPoint":(h=s.W())[r.index]=t,a[0]=a[1]=t;break;case"LineString":(h=s.W())[r.index+o]=t,a[o]=t;break;case"MultiLineString":case"Polygon":(h=s.W())[n[0]][r.index+o]=t,a[o]=t;break;case"MultiPolygon":(h=s.W())[n[1]][n[0]][r.index+o]=t,a[o]=t;break;case"Circle":a[0]=a[1]=t,0===r.index?(this.s=!0,s.ub(t)):(this.s=!0,s.fd(io(s.xa(),t))),this.s=!1}h&&(r=s,n=h,this.s=!0,r.na(n),this.s=!1)}C_(this,t)}function M_(t){for(var e,i,o=this.j.length-1;0<=o;--o)if("Circle"===(i=(e=this.j[o][0]).geometry).S()){var r=i.xa(),n=e.Tf[0];e=e.Tf[1],n.ma[0]=n.ma[1]=r,e.ma[0]=e.ma[1]=r,Gl(this.a,D(r),n),Gl(this.a,i.G(),e)}else Gl(this.a,w(e.ma),e);return this.C&&(this.b(new D_("modifyend",this.o,t)),this.C=!1),!1}function L_(t){return!(t instanceof hi)||(this.O=t,t.map.aa().Vh()||"pointermove"!=t.type||this.D||(this.Ea=t.pixel,A_(this,t.pixel,t.map)),this.f&&this.ob(t)&&(e=!("singleclick"!=t.type||!this.T)||this.Dj()),"singleclick"==t.type&&(this.T=!1),un.call(this,t)&&!e);var e}function A_(t,e,i){var o=i.Ra(e),r=C(D(o),i.aa().Pa()*t.ra);if(0<(r=Bl(t.a,r)).length){r.sort(function(t,e){return O_(o,t)-O_(o,e)});var n=r[0],s=n.ma,a=F_(o,n),l=i.Ia(a),p=io(e,l);if(p<=t.ra){if(e={},"Circle"===n.geometry.S()&&1===n.index)t.ua=!0,C_(t,a);else for(p=i.Ia(s[0]),n=i.Ia(s[1]),i=eo(l,p),l=eo(l,n),p=Math.sqrt(Math.min(i,l)),t.ua=p<=t.ra,t.ua&&(a=i>l?s[1]:s[0]),C_(t,a),l=1,i=r.length;l<i&&(a=r[l].ma,Ji(s[0],a[0])&&Ji(s[1],a[1])||Ji(s[0],a[1])&&Ji(s[1],a[0]));++l)e[h(a)]=!0;return e[h(s)]=!0,void(t.La=e)}}t.f&&(t.B.ha().Lb(t.f),t.f=null)}function O_(t,e){var i=e.geometry;return"Circle"===i.S()&&1===e.index?(t=eo(i.xa(),t),(i=Math.sqrt(t)-i.Bd())*i):oo(t,e.ma)}function F_(t,e){var i=e.geometry;return"Circle"===i.S()&&1===e.index?i.Ib(t):$i(t,e.ma)}function N_(t,e,i,o,r){Vl(t.a,e.G(),function(t){t.geometry===e&&(void 0===o||void 0===t.depth||qt(t.depth,o))&&t.index>i&&(t.index+=r)})}function D_(t,e,i){Te.call(this,t),this.features=e,this.mapBrowserEvent=i}function j_(t){if(zr.call(this,{handleEvent:k_}),t=t||{},this.C=t.condition?t.condition:on,this.D=t.addCondition?t.addCondition:po,this.B=t.removeCondition?t.removeCondition:po,this.T=t.toggleCondition?t.toggleCondition:nn,this.s=!!t.multi&&t.multi,this.l=t.filter?t.filter:lo,this.j=t.hitTolerance?t.hitTolerance:0,this.f=new Um({source:new zm({useSpatialIndex:!1,features:t.features,wrapX:t.wrapX}),style:t.style?t.style:function(){var t=lh();return Ht(t.Polygon,t.LineString),Ht(t.GeometryCollection,t.LineString),function(e){return e.U()?t[e.U().S()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.layers)if("function"==typeof t.layers)t=t.layers;else{var e=t.layers;t=function(t){return zt(e,t)}}else t=lo;this.o=t,this.a={},ve(t=this.f.ha().i,"add",this.ko,this),ve(t,"remove",this.oo,this)}function k_(t){if(!this.C(t))return!0;var e=this.D(t),i=this.B(t),o=this.T(t),r=!e&&!i&&!o,n=t.map,s=this.f.ha().i,a=[],l=[];if(r){for(rt(this.a),n.Tc(t.pixel,function(t,e){if(this.l(t,e))return l.push(t),t=h(t),this.a[t]=e,!this.s}.bind(this),{layerFilter:this.o,hitTolerance:this.j}),r=s.kc()-1;0<=r;--r){n=s.item(r);var p=l.indexOf(n);-1<p?l.splice(p,1):(s.remove(n),a.push(n))}0!==l.length&&s.qg(l)}else{for(n.Tc(t.pixel,function(t,r){if(this.l(t,r))return!e&&!o||zt(s.a,t)?(i||o)&&zt(s.a,t)&&(a.push(t),r=h(t),delete this.a[r]):(l.push(t),t=h(t),this.a[t]=r),!this.s}.bind(this),{layerFilter:this.o,hitTolerance:this.j}),r=a.length-1;0<=r;--r)s.remove(a[r]);s.qg(l)}return(0<l.length||0<a.length)&&this.b(new G_(U_,l,a,t)),en(t)}function G_(t,e,i,o){Te.call(this,t),this.selected=e,this.deselected=i,this.mapBrowserEvent=o}s(c_,Te),s(f_,ln),f_.prototype.setMap=function(t){this.o.setMap(t),this.O.setMap(t),ln.prototype.setMap.call(this,t)},f_.prototype.G=function(){return this.j},f_.prototype.f=function(t){this.j=t||null;var e=this.s;e?t?e.Va(ar(t)):e.Va(void 0):(this.s=e=new uh(t?ar(t):{}),this.o.ha().Gb(e)),this.b(new E_(this.j))},s(E_,Te),s(S_,ln),(t=S_.prototype).xg=function(t){var e=t.U();e&&e.S()in this.ca&&this.ca[e.S()].call(this,t,e),(e=this.v)&&e.c&&this.c()&&A_(this,this.Ea,e),ve(t,"change",this.Li,this)},t.Ha=function(t){this.f&&!t&&(this.B.ha().Lb(this.f),this.f=null),ln.prototype.Ha.call(this,t)},t.setMap=function(t){this.B.setMap(t),ln.prototype.setMap.call(this,t)},t.vm=function(t){t.feature&&this.o.push(t.feature)},t.xm=function(t){t.feature&&this.o.remove(t.feature)},t.$n=function(t){this.xg(t.element)},t.Li=function(t){this.s||(w_(this,t=t.target),this.xg(t))},t.ao=function(t){w_(this,t.element)},t.io=function(t,e){var i=e.W();t={feature:t,geometry:e,ma:[i,i]},this.a.Ca(e.G(),t)},t.fo=function(t,e){var i,o=e.W(),r=0;for(i=o.length;r<i;++r){var n=o[r];n={feature:t,geometry:e,depth:[r],index:r,ma:[n,n]},this.a.Ca(e.G(),n)}},t.Mi=function(t,e){var i,o=e.W(),r=0;for(i=o.length-1;r<i;++r){var n=o.slice(r,r+2),s={feature:t,geometry:e,index:r,ma:n};this.a.Ca(w(n),s)}},t.eo=function(t,e){var i,o,r=e.W(),n=0;for(o=r.length;n<o;++n){var s=r[n],a=0;for(i=s.length-1;a<i;++a){var h=s.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,ma:h};this.a.Ca(w(h),l)}}},t.jo=function(t,e){var i,o,r=e.W(),n=0;for(o=r.length;n<o;++n){var s=r[n],a=0;for(i=s.length-1;a<i;++a){var h=s.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,ma:h};this.a.Ca(w(h),l)}}},t.ho=function(t,e){var i,o,r,n=e.W(),s=0;for(r=n.length;s<r;++s){var a=n[s],h=0;for(o=a.length;h<o;++h){var l=a[h],p=0;for(i=l.length-1;p<i;++p){var u=l.slice(p,p+2),c={feature:t,geometry:e,depth:[h,s],index:p,ma:u};this.a.Ca(w(u),c)}}}},t.bo=function(t,e){var i=e.xa(),o={feature:t,geometry:e,index:0,ma:[i,i]};t={feature:t,geometry:e,index:1,ma:[i,i]},o.Tf=t.Tf=[o,t],this.a.Ca(D(i),o),this.a.Ca(e.G(),t)},t.co=function(t,e){var i=e.a;for(e=0;e<i.length;++e)this.ca[i[e].S()].call(this,t,i[e])},t.Em=function(t,e){for(var i,o=t.ma,r=t.feature,n=t.geometry,s=t.depth,a=t.index;e.length<n.pa();)e.push(0);switch(n.S()){case"MultiLineString":case"Polygon":(i=n.W())[s[0]].splice(a+1,0,e);break;case"MultiPolygon":(i=n.W())[s[1]][s[0]].splice(a+1,0,e);break;case"LineString":(i=n.W()).splice(a+1,0,e);break;default:return}this.s=!0,n.na(i),this.s=!1,(i=this.a).remove(t),N_(this,n,a,s,1),t={ma:[o[0],e],feature:r,geometry:n,depth:s,index:a},i.Ca(w(t.ma),t),this.j.push([t,1]),e={ma:[e,o[1]],feature:r,geometry:n,depth:s,index:a+1},i.Ca(w(e.ma),e),this.j.push([e,0]),this.T=!0},t.Dj=function(){if(this.O&&"pointerdrag"!=this.O.type){var t=this.O;T_(this,t);var e,i,o=this.j,r={};for(i=o.length-1;0<=i;--i){var n=o[i],s=n[0],a=h(s.feature);s.depth&&(a+="-"+s.depth.join("-")),a in r||(r[a]={}),0===n[1]?(r[a].right=s,r[a].index=s.index):1==n[1]&&(r[a].left=s,r[a].index=s.index+1)}for(a in r){var l=r[a].right,p=r[a].left,u=(i=r[a].index)-1;s=void 0!==p?p:l,0>u&&(u=0);var c=e=(n=s.geometry).W(),f=!1;switch(n.S()){case"MultiLineString":2<e[s.depth[0]].length&&(e[s.depth[0]].splice(i,1),f=!0);break;case"LineString":2<e.length&&(e.splice(i,1),f=!0);break;case"MultiPolygon":c=c[s.depth[1]];case"Polygon":4<(c=c[s.depth[0]]).length&&(i==c.length-1&&(i=0),c.splice(i,1),f=!0,0===i&&(c.pop(),c.push(c[0]),u=c.length-1))}f&&(f=n,this.s=!0,f.na(e),this.s=!1,e=[],void 0!==p&&(this.a.remove(p),e.push(p.ma[0])),void 0!==l&&(this.a.remove(l),e.push(l.ma[1])),void 0!==p&&void 0!==l&&(p={depth:s.depth,feature:s.feature,geometry:s.geometry,index:u,ma:e},this.a.Ca(w(p.ma),p)),N_(this,n,i,s.depth,-1),this.f&&(this.B.ha().Lb(this.f),this.f=null),o.length=0)}return this.b(new D_("modifyend",this.o,t)),this.C=!1,!0}return!1},s(D_,Te),s(j_,zr),(t=j_.prototype).lo=function(){return this.f.ha().i},t.mo=function(){return this.j},t.no=function(t){return t=h(t),this.a[t]},t.po=function(t){this.j=t},t.setMap=function(t){var e=this.v,i=this.f.ha().i;e&&i.forEach(e.Zj,e),zr.prototype.setMap.call(this,t),this.f.setMap(t),t&&i.forEach(t.Uj,t)},t.ko=function(t){var e=this.v;e&&e.Uj(t.element)},t.oo=function(t){var e=this.v;e&&e.Zj(t.element)},s(G_,Te);var U_="select";function B_(t){ln.call(this,{handleEvent:W_,handleDownEvent:lo,handleUpEvent:X_}),t=t||{},this.s=t.source?t.source:null,this.O=void 0===t.vertex||t.vertex,this.C=void 0===t.edge||t.edge,this.j=t.features?t.features:null,this.ra=[],this.B={},this.V={},this.o={},this.T=null,this.f=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.ua=function(t,e){return oo(this.T,t.ma)-oo(this.T,e.ma)}.bind(this),this.a=new kl,this.ca={Point:this.wo,LineString:this.Pi,LinearRing:this.Pi,Polygon:this.xo,MultiPoint:this.uo,MultiLineString:this.to,MultiPolygon:this.vo,GeometryCollection:this.so,Circle:this.ro}}function V_(t,e,i,o){var r=o.Ra([e[0]-t.f,e[1]+t.f]),n=o.Ra([e[0]+t.f,e[1]-t.f]);r=w([r,n]);var s=Bl(t.a,r);t.O&&!t.C&&(s=s.filter(function(t){return"Circle"!==t.feature.U().S()}));var a=!1;r=!1;var h=n=null;if(0<s.length){t.T=i,s.sort(t.ua);var l=s[0].ma;a="Circle"===s[0].feature.U().S(),t.O&&!t.C?(i=o.Ia(l[0]),a=o.Ia(l[1]),i=eo(e,i),e=eo(e,a),(a=(a=Math.sqrt(Math.min(i,e)))<=t.f)&&(r=!0,n=i>e?l[1]:l[0],h=o.Ia(n))):t.C&&(n=a?function(t,e){var i=e.Bd(),o=e.xa();e=o[0],o=o[1];var r=t[0]-e;t=t[1]-o,0===r&&0===t&&(r=1);var n=Math.sqrt(r*r+t*t);return[e+i*r/n,o+i*t/n]}(i,s[0].feature.U()):$i(i,l),io(e,h=o.Ia(n))<=t.f&&(r=!0,t.O&&!a&&(i=o.Ia(l[0]),a=o.Ia(l[1]),i=eo(h,i),e=eo(h,a),a=(a=Math.sqrt(Math.min(i,e)))<=t.f)))&&(n=i>e?l[1]:l[0],h=o.Ia(n)),r&&(h=[Math.round(h[0]),Math.round(h[1])])}return{Mq:r,vertex:n,Vq:h}}function W_(t){var e=V_(this,t.pixel,t.coordinate,t.map);return e.Mq&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.Vq),un.call(this,t)}function X_(){var t=nt(this.o);return t.length&&(t.forEach(this.$j,this),this.o={}),!1}function Y_(t){if(ln.call(this,{handleDownEvent:z_,handleDragEvent:H_,handleMoveEvent:$_,handleUpEvent:K_}),t=t||{},this.a=null,this.j=void 0!==t.features?t.features:null,t.layers)if("function"==typeof t.layers)var e=t.layers;else{var i=t.layers;e=function(t){return zt(i,t)}}else e=lo;this.C=e,this.s=t.hitTolerance?t.hitTolerance:0,this.f=null,ve(this,Le("active"),this.o,this)}function z_(t){if(this.f=q_(this,t.pixel,t.map),!this.a&&this.f){this.a=t.coordinate,$_.call(this,t);var e=this.j||new Fe([this.f]);return this.b(new J_("translatestart",e,t.coordinate)),!0}return!1}function K_(t){if(this.a){this.a=null,$_.call(this,t);var e=this.j||new Fe([this.f]);return this.b(new J_("translateend",e,t.coordinate)),!0}return!1}function H_(t){if(this.a){var e=(t=t.coordinate)[0]-this.a[0],i=t[1]-this.a[1],o=this.j||new Fe([this.f]);o.forEach(function(t){var o=t.U();o.translate(e,i),t.Va(o)}),this.a=t,this.b(new J_("translating",o,t))}}function $_(t){var e=t.map.a;q_(this,t.pixel,t.map)?(e.classList.remove(this.a?"ol-grab":"ol-grabbing"),e.classList.add(this.a?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}function q_(t,e,i){return i.Tc(e,function(t){if(!this.j||zt(this.j.a,t))return t}.bind(t),{layerFilter:t.C,hitTolerance:t.s})}function Z_(t,e){var i=t.v;t=t.c(),i&&t||(i=i||e)&&i.a.classList.remove("ol-grab","ol-grabbing")}function J_(t,e,i){Te.call(this,t),this.features=e,this.coordinate=i}function Q_(t){var e=ot({},t=t||{});delete e.gradient,delete e.radius,delete e.blur,delete e.shadow,delete e.weight,Um.call(this,e),this.c=null,this.$=void 0!==t.shadow?t.shadow:250,this.O=void 0,this.T=null,ve(this,Le(ib),this.cm,this),this.Lj(t.gradient?t.gradient:tb),this.Fj(void 0!==t.blur?t.blur:15),this.fd(void 0!==t.radius?t.radius:8),ve(this,Le(eb),this.mg,this),ve(this,Le(ob),this.mg,this),this.mg();var i,o=t.weight?t.weight:"weight";i="string"==typeof o?function(t){return t.get(o)}:o,this.j(function(t){var e=255*(t=void 0!==(t=i(t))?y(t,0,1):1)|0,o=this.T[e];return o||(o=[new nh({image:new sd({opacity:t,src:this.O})})],this.T[e]=o),o}.bind(this)),this.set(Bm,null),ve(this,"render",this.tm,this)}s(B_,ln),(t=B_.prototype).Gb=function(t,e){e=void 0===e||e;var i=h(t),o=t.U();if(o){var r=this.ca[o.S()];r&&(this.V[i]=o.G([1/0,1/0,-1/0,-1/0]),r.call(this,t,o))}e&&(this.B[i]=ve(t,"change",this.qo,this))},t.bl=function(t){this.Gb(t)},t.cl=function(t){this.Lb(t)},t.Ni=function(t){if(t instanceof Zm)var e=t.feature;else t instanceof ke&&(e=t.element);this.Gb(e)},t.Oi=function(t){if(t instanceof Zm)var e=t.feature;else t instanceof ke&&(e=t.element);this.Lb(e)},t.qo=function(t){if(t=t.target,this.D){var e=h(t);e in this.o||(this.o[e]=t)}else this.$j(t)},t.Lb=function(t,e){e=void 0===e||e;var i=h(t),o=this.V[i];if(o){var r=this.a,n=[];for(Vl(r,o,function(e){t===e.feature&&n.push(e)}),o=n.length-1;0<=o;--o)r.remove(n[o])}e&&(be(this.B[i]),delete this.B[i])},t.setMap=function(t){var e,i=this.v,o=this.ra;this.j?e=this.j:this.s&&(e=this.s.ee()),i&&(o.forEach(be),o.length=0,e.forEach(this.cl,this)),ln.prototype.setMap.call(this,t),t&&(this.j?o.push(ve(this.j,"add",this.Ni,this),ve(this.j,"remove",this.Oi,this)):this.s&&o.push(ve(this.s,"addfeature",this.Ni,this),ve(this.s,"removefeature",this.Oi,this)),e.forEach(this.bl,this))},t.jd=po,t.$j=function(t){this.Lb(t,!1),this.Gb(t,!1)},t.ro=function(t,e){var i,o=0;for(i=(e=hr(e).W()[0]).length-1;o<i;++o){var r=e.slice(o,o+2),n={feature:t,ma:r};this.a.Ca(w(r),n)}},t.so=function(t,e){var i=e.a;for(e=0;e<i.length;++e){var o=this.ca[i[e].S()];o&&o.call(this,t,i[e])}},t.Pi=function(t,e){var i,o=0;for(i=(e=e.W()).length-1;o<i;++o){var r=e.slice(o,o+2),n={feature:t,ma:r};this.a.Ca(w(r),n)}},t.to=function(t,e){var i,o,r=0;for(o=(e=e.W()).length;r<o;++r){var n=e[r],s=0;for(i=n.length-1;s<i;++s){var a=n.slice(s,s+2),h={feature:t,ma:a};this.a.Ca(w(a),h)}}},t.uo=function(t,e){var i,o=e.W(),r=0;for(i=o.length;r<i;++r){var n=o[r];n={feature:t,ma:[n,n]},this.a.Ca(e.G(),n)}},t.vo=function(t,e){var i,o,r,n=0;for(r=(e=e.W()).length;n<r;++n){var s=e[n],a=0;for(o=s.length;a<o;++a){var h=s[a],l=0;for(i=h.length-1;l<i;++l){var p=h.slice(l,l+2),u={feature:t,ma:p};this.a.Ca(w(p),u)}}}},t.wo=function(t,e){var i=e.W();t={feature:t,ma:[i,i]},this.a.Ca(e.G(),t)},t.xo=function(t,e){var i,o,r=0;for(o=(e=e.W()).length;r<o;++r){var n=e[r],s=0;for(i=n.length-1;s<i;++s){var a=n.slice(s,s+2),h={feature:t,ma:a};this.a.Ca(w(a),h)}}},s(Y_,ln),Y_.prototype.B=function(){return this.s},Y_.prototype.T=function(t){this.s=t},Y_.prototype.setMap=function(t){var e=this.v;ln.prototype.setMap.call(this,t),Z_(this,e)},Y_.prototype.o=function(){Z_(this,null)},s(J_,Te),s(Q_,Um);var tb=["#00f","#0ff","#0f0","#ff0","#f00"];(t=Q_.prototype).Nh=function(){return this.get(eb)},t.Uh=function(){return this.get(ib)},t.Ri=function(){return this.get(ob)},t.cm=function(){for(var t=this.Uh(),e=mr(1,256),i=e.createLinearGradient(0,0,1,256),o=1/(t.length-1),r=0,n=t.length;r<n;++r)i.addColorStop(r*o,t[r]);e.fillStyle=i,e.fillRect(0,0,1,256),this.c=e.getImageData(0,0,1,256).data},t.mg=function(){var t=this.Ri(),e=this.Nh(),i=t+e+1,o=2*i;(o=mr(o,o)).shadowOffsetX=o.shadowOffsetY=this.$,o.shadowBlur=e,o.shadowColor="#000",o.beginPath(),e=i-this.$,o.arc(e,e,t,0,2*Math.PI,!0),o.fill(),this.O=o.canvas.toDataURL(),this.T=Array(256),this.u()},t.tm=function(t){var e,i,o=(t=t.context).canvas,r=(o=t.getImageData(0,0,o.width,o.height)).data,n=0;for(e=r.length;n<e;n+=4)(i=4*r[n+3])&&(r[n]=this.c[i],r[n+1]=this.c[i+1],r[n+2]=this.c[i+2]);t.putImageData(o,0,0)},t.Fj=function(t){this.set(eb,t)},t.Lj=function(t){this.set(ib,t)},t.fd=function(t){this.set(ob,t)};var eb="blur",ib="gradient",ob="radius";function rb(t){Nr.call(this,t||{}),this.type="IMAGE"}function nb(t){var e=ot({},t=t||{});delete e.preload,delete e.useInterimTilesOnError,Nr.call(this,e),this.j(void 0!==t.preload?t.preload:0),this.C(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.type="TILE"}function sb(t){var e=(t=t||{}).renderMode||"hybrid";d(void 0==e||"image"==e||"hybrid"==e||"vector"==e,28),t.declutter&&"image"==e&&(e="hybrid"),t.renderMode=e,delete(e=ot({},t)).preload,delete e.useInterimTilesOnError,Um.call(this,e),this.T(t.preload?t.preload:0),this.O(!t.useInterimTilesOnError||t.useInterimTilesOnError),this.type="VECTOR_TILE"}function ab(t,e){var i=/\{z\}/g,o=/\{x\}/g,r=/\{y\}/g,n=/\{-y\}/g;return function(s){if(s)return t.replace(i,s[0].toString()).replace(o,s[1].toString()).replace(r,function(){return(-s[2]-1).toString()}).replace(n,function(){var t=e.a?e.a[s[0]]:null;return d(t,55),(t.ka-t.ea+1+s[2]).toString()})}}function hb(t,e){for(var i=t.length,o=Array(i),r=0;r<i;++r)o[r]=ab(t[r],e);return lb(o)}function lb(t){return 1===t.length?t[0]:function(e,i,o){if(e)return t[b((e[1]<<e[0])+e[2],t.length)](e,i,o)}}function pb(){}function ub(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var o,r=i[2].charCodeAt(0);for(o=i[1].charCodeAt(0);o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(r=parseInt(i[2],10),o=parseInt(i[1],10);o<=r;o++)e.push(t.replace(i[0],o.toString()));return e}return e.push(t),e}function cb(t,e,i,o){function r(){delete window[s],n.parentNode.removeChild(n)}var n=document.createElement("script"),s="olc_"+h(e);n.async=!0,n.src=t+(-1==t.indexOf("?")?"?":"&")+(o||"callback")+"="+s;var a=setTimeout(function(){r(),i&&i()},1e4);window[s]=function(t){clearTimeout(a),r(),e(t)},document.getElementsByTagName("head")[0].appendChild(n)}function fb(t){Qn.call(this,t)}function db(t,e,i,o){var r=Vt(i,e,t);return i=Mt(e,o,i),void 0!==(e=e.Bc())&&(i*=e),void 0!==(e=t.Bc())&&(i/=e),(e=t.G())&&!I(e,r)||(t=Mt(t,i,r)/i,isFinite(t)&&0<t&&(i/=t)),i}function yb(t,e,i,o){t=i-t,e=o-e;var r=Math.sqrt(t*t+e*e);return[Math.round(i+t/r),Math.round(o+e/r)]}function gb(t,e,i,o,r,n,s,a,h,l,p){var u=mr(Math.round(i*t),Math.round(i*e));if(0===h.length)return u.canvas;u.scale(i,i);var c=[1/0,1/0,-1/0,-1/0];h.forEach(function(t){G(c,t.extent)});var f=mr(Math.round(i*J(c)/o),Math.round(i*H(c)/o)),d=i/o;h.forEach(function(t){f.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,(t.extent[0]-c[0])*d,-(t.extent[3]-c[3])*d,J(t.extent)*d,H(t.extent)*d)});var y=q(s);return a.c.forEach(function(t){var e=t.source,r=t.target,s=e[1][0],a=e[1][1],h=e[2][0],l=e[2][1];t=(r[0][0]-y[0])/n;var p=-(r[0][1]-y[1])/n,d=(r[1][0]-y[0])/n,g=-(r[1][1]-y[1])/n,v=(r[2][0]-y[0])/n,m=-(r[2][1]-y[1])/n;r=e[0][0],e=e[0][1];t:{for(a=(s=[[s-=r,a-=e,0,0,d-t],[h-=r,l-=e,0,0,v-t],[0,0,s,a,g-p],[0,0,h,l,m-p]]).length,h=0;h<a;h++){l=h;for(var _=Math.abs(s[h][h]),b=h+1;b<a;b++){var x=Math.abs(s[b][h]);x>_&&(_=x,l=b)}if(0===_){s=null;break t}for(_=s[l],s[l]=s[h],s[h]=_,l=h+1;l<a;l++)for(_=-s[l][h]/s[h][h],b=h;b<a+1;b++)s[l][b]=h==b?0:s[l][b]+_*s[h][b]}for(h=Array(a),l=a-1;0<=l;l--)for(h[l]=s[l][a]/s[l][l],_=l-1;0<=_;_--)s[_][a]-=s[_][l]*h[l];s=h}s&&(u.save(),u.beginPath(),a=yb(h=(t+d+v)/3,l=(p+g+m)/3,t,p),d=yb(h,l,d,g),v=yb(h,l,v,m),u.moveTo(d[0],d[1]),u.lineTo(a[0],a[1]),u.lineTo(v[0],v[1]),u.clip(),u.transform(s[0],s[2],s[1],s[3],t,p),u.translate(c[0]-r,c[3]-e),u.scale(o/i,-o/i),u.drawImage(f.canvas,0,0),u.restore())}),p&&(u.save(),u.strokeStyle="black",u.lineWidth=1,a.c.forEach(function(t){var e=t.target;t=(e[0][0]-y[0])/n;var i=-(e[0][1]-y[1])/n,o=(e[1][0]-y[0])/n,r=-(e[1][1]-y[1])/n,s=(e[2][0]-y[0])/n;e=-(e[2][1]-y[1])/n,u.beginPath(),u.moveTo(o,r),u.lineTo(t,i),u.lineTo(s,e),u.closePath(),u.stroke()}),u.restore()),u.canvas}function vb(t,e,i,o,r){this.g=t,this.i=e;var n={},s=kt(this.i,this.g);if(this.a=function(t){var e=t[0]+"/"+t[1];return n[e]||(n[e]=s(t)),n[e]},this.f=o,this.v=r*r,this.c=[],this.l=!1,this.s=this.g.g&&!!o&&!!this.g.G()&&J(o)==J(this.g.G()),this.b=this.g.G()?J(this.g.G()):null,this.j=this.i.G()?J(this.i.G()):null,function t(e,i,o,r,n,s,a,h,l,p){var u=w([s,a,h,l]),c=e.b?J(u)/e.b:null,f=e.b,d=e.g.g&&.5<c&&1>c,y=!1;if(0<p){if(e.i.c&&e.j){var g=w([i,o,r,n]);y|=.25<J(g)/e.j}!d&&e.g.c&&c&&(y|=.25<c)}if(y||!e.f||Q(u,e.f)){if(!(y||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(l[0])&&isFinite(l[1]))){if(!(0<p))return;y=!0}if(0<p&&(y||(u=e.a([(i[0]+r[0])/2,(i[1]+r[1])/2]),f=d?(b(s[0],f)+b(h[0],f))/2-b(u[0],f):(s[0]+h[0])/2-u[0],u=(s[1]+h[1])/2-u[1],y=f*f+u*u>e.v),y))return void(Math.abs(i[0]-r[0])<=Math.abs(i[1]-r[1])?(d=[(o[0]+r[0])/2,(o[1]+r[1])/2],f=e.a(d),u=[(n[0]+i[0])/2,(n[1]+i[1])/2],c=e.a(u),t(e,i,o,d,u,s,a,f,c,p-1),t(e,u,d,r,n,c,f,h,l,p-1)):(d=[(i[0]+o[0])/2,(i[1]+o[1])/2],f=e.a(d),u=[(r[0]+n[0])/2,(r[1]+n[1])/2],c=e.a(u),t(e,i,d,u,n,s,f,c,l,p-1),t(e,d,o,r,u,f,a,h,c,p-1)));if(d){if(!e.s)return;e.l=!0}e.c.push({source:[s,h,l],target:[i,r,n]}),e.c.push({source:[s,a,h],target:[i,o,r]})}}(this,t=q(i),e=Z(i),o=Y(i),i=X(i),r=this.a(t),this.a(e),this.a(o),this.a(i),10),this.l){var a=1/0;this.c.forEach(function(t){a=Math.min(a,t.source[0][0],t.source[1][0],t.source[2][0])}),this.c.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-a>this.b/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-a>this.b/2&&(e[0][0]-=this.b),e[1][0]-a>this.b/2&&(e[1][0]-=this.b),e[2][0]-a>this.b/2&&(e[2][0]-=this.b),Math.max(e[0][0],e[1][0],e[2][0])-Math.min(e[0][0],e[1][0],e[2][0])<this.b/2&&(t.source=e)}},this)}n={}}function mb(t){var e=[1/0,1/0,-1/0,-1/0];return t.c.forEach(function(t){t=t.source,U(e,t[0]),U(e,t[1]),U(e,t[2])}),e}function _b(t,e,i,o,r,n,s,a,h,l,p){if(Th.call(this,r,0),this.B=void 0!==p&&p,this.C=s,this.D=a,this.N=null,this.c=e,this.l=o,this.v=n||r,this.a=[],this.Id=null,this.f=0,n=o.Ma(this.v),a=this.l.G(),r=this.c.G(),0===W(n=a?$(n,a):n))this.state=4;else if((a=t.G())&&(r=r?$(r,a):a),o=db(t,i,z(n),o.Ta(this.v[0])),!isFinite(o)||0>=o)this.state=4;else if(this.o=new vb(t,i,n,r,o*(void 0!==l?l:.5)),0===this.o.c.length)this.state=4;else if(this.f=e.Dc(o),i=mb(this.o),r&&(t.g?(i[1]=y(i[1],r[1],r[3]),i[3]=y(i[3],r[1],r[3])):i=$(i,r)),W(i)){for(e=(t=re(e,i,this.f)).fa;e<=t.la;e++)for(i=t.ea;i<=t.ka;i++)(l=h(this.f,e,i,s))&&this.a.push(l);0===this.a.length&&(this.state=4)}else this.state=4}function bb(t){Wm.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.bb=void 0!==t.opaque&&t.opaque,this.sc=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.a=new fb(t.cacheSize),this.j=[0,0],this.jc="",this.Ea={transition:t.transition}}function xb(t,e,i,o,r){if(!(t=t.Yd(e)))return!1;e=!0;for(var n,s,a=o.fa;a<=o.la;++a)for(var h=o.ea;h<=o.ka;++h)n=i+"/"+a+"/"+h,s=!1,t.a.hasOwnProperty(n)&&((s=2===(n=t.get(n)).getState())&&(s=!1!==r(n))),s||(e=!1);return e}function Eb(t,e){t.jc!==e&&(t.jc=e,t.u())}function Sb(t,e,i){var o=void 0!==i?i:t.c;if(i=t.eb(o),t.D&&o.c){var r=e;e=r[0],t=ne(i,r),I(o=ue(o),t)?e=r:(r=J(o),t[0]+=r*Math.ceil((o[0]-t[0])/r),e=i.jg(t,e))}if(r=e[0],o=e[1],t=e[2],i.minZoom>r||r>i.maxZoom)i=!1;else{var n=i.G();i=!(i=n?re(i,n,r):i.a?i.a[r]:null)||f(i,o,t)}return i?e:null}function Tb(t,e){Te.call(this,t),this.tile=e}function wb(t){bb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.dc?this.dc.bind(this):pb,this.urls=null,t.urls?this.vb(t.urls):t.url&&this.rb(t.url),t.tileUrlFunction&&this.hb(t.tileUrlFunction),this.V={}}function Cb(t){wb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Ib,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Ih,this.f={},this.s={},this.ob=t.reprojectionErrorThreshold,this.O=!1}function Rb(t,e,i,o,r,n,s){return r=(i=Sb(t,e=[e,i,o],n))?t.tileUrlFunction(i,r,n):void 0,(r=new t.tileClass(e,void 0!==r?0:4,void 0!==r?r:"",t.crossOrigin,t.tileLoadFunction,t.Ea)).key=s,ve(r,"change",t.dj,t),r}function Pb(t,e,i,o,r,n){var s=e+"/"+i+"/"+o,a=t.jc;if(t.a.a.hasOwnProperty(s)){var h=t.a.get(s);if(h.key!=a){var l=h;h=Rb(t,e,i,o,r,n,a),0==l.getState()?h.g=l.g:h.g=l,Ch(h),t.a.replace(s,h)}}else h=Rb(t,e,i,o,r,n,a),t.a.set(s,h);return h}function Ib(t,e){t.Y().src=e}function Mb(t){this.i=void 0!==t.hidpi&&t.hidpi,Cb.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Dt("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:this.i?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.o=void 0!==t.culture?t.culture:"en-us",this.$=void 0!==t.maxZoom?t.maxZoom:-1,this.l=t.key,this.B=t.imagerySet,cb("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.B+"?uriScheme=https&include=ImageryProviders&key="+this.l+"&c="+this.o,this.La.bind(this),void 0,"jsonp")}function Lb(t){var e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:he({extent:ue(e),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});Cb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})}function Ab(t){this.o=t.account,this.B=t.map||"",this.i=t.config||{},this.l={},Lb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,state:"loading",wrapX:t.wrapX}),Ob(this)}function Ob(t){var e=JSON.stringify(t.i);if(t.l[e])Fb(t,t.l[e]);else{var i="https://"+t.o+".carto.com/api/v1/map";t.B&&(i+="/named/"+t.B);var o=new XMLHttpRequest;o.addEventListener("load",t.em.bind(t,e)),o.addEventListener("error",t.dm.bind(t)),o.open("POST",i),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(t.i))}}function Fb(t,e){t.rb("https://"+e.cdn_url.https+"/"+t.o+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png")}function Nb(t){zm.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.features=[],this.geometryFunction=t.geometryFunction||function(t){return d((t=t.U())instanceof Ko,10),t},this.source=t.source,this.source.I("change",Nb.prototype.sa,this)}function Db(t){if(void 0!==t.resolution){t.features.length=0;for(var e=[1/0,1/0,-1/0,-1/0],i=t.distance*t.resolution,o=t.source.ee(),r={},n=0,s=o.length;n<s;n++){var a=o[n];h(a).toString()in r||!(a=t.geometryFunction(a))||(D(a=a.W(),e),C(e,i,e),a=(a=t.source.Yf(e)).filter(function(t){return!((t=h(t).toString())in r)&&(r[t]=!0)}),t.features.push(jb(t,a)))}}}function jb(t,e){for(var i=[0,0],o=e.length-1;0<=o;--o){var r=t.geometryFunction(e[o]);r?Hi(i,r.W()):e.splice(o,1)}return to(i,1/e.length),(t=new uh(new Ko(i))).set("features",e),t}function kb(t,e,i,o,r,n){this.s=e,this.l=t.G();var s=e.G(),a=s?$(i,s):i;s=db(t,e,z(a),o),this.f=new vb(t,e,a,this.l,.5*s),this.c=o,this.g=i,t=mb(this.f),this.j=(this.Tb=n(t,s,r))?this.Tb.a:1,this.je=this.i=null,r=2,this.Tb&&(r=0),qn.call(this,i,o,this.j,r)}function Gb(t){Wm.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state}),this.o=void 0!==t.resolutions?t.resolutions:null,this.i=null,this.ua=0}function Ub(t,e){return t.o&&(e=t.o[Kt(t.o,e,0)]),e}function Bb(t,e){t.Y().src=e}function Vb(t,e){Te.call(this,t),this.image=e}s(rb,Nr),s(nb,Nr),nb.prototype.c=function(){return this.get("preload")},nb.prototype.j=function(t){this.set("preload",t)},nb.prototype.i=function(){return this.get("useInterimTilesOnError")},nb.prototype.C=function(t){this.set("useInterimTilesOnError",t)},s(sb,Um),sb.prototype.c=function(){return this.get("preload")},sb.prototype.i=function(){return this.get("useInterimTilesOnError")},sb.prototype.T=function(t){this.set("preload",t)},sb.prototype.O=function(t){this.set("useInterimTilesOnError",t)},s(fb,Qn),fb.prototype.sd=function(t){for(var e,i;ts(this);){var o;if((o=(i=(e=this.g.Pc).ya[0].toString())in t)&&(e=e.ya,o=f(t[i],e[1],e[2])),o)break;Se(this.pop())}},s(_b,Th),_b.prototype.ia=function(){1==this.state&&(this.Id.forEach(be),this.Id=null),Th.prototype.ia.call(this)},_b.prototype.Y=function(){return this.N},_b.prototype.he=function(){var t=[];if(this.a.forEach(function(e){e&&2==e.getState()&&t.push({extent:this.c.Ma(e.ya),image:e.Y()})},this),this.a.length=0,0===t.length)this.state=3;else{var e=this.v[0],i=this.l.Za(e),o="number"==typeof i?i:i[0];i="number"==typeof i?i:i[1],e=this.l.Ta(e);var r=this.c.Ta(this.f),n=this.l.Ma(this.v);this.N=gb(o,i,this.C,r,this.c.G(),e,n,this.o,t,this.D,this.B),this.state=2}this.u()},_b.prototype.load=function(){if(0==this.state){this.state=1,this.u();var t=0;this.Id=[],this.a.forEach(function(e){var i=e.getState();if(0==i||1==i){t++;var o=ve(e,"change",function(){var i=e.getState();2!=i&&3!=i&&4!=i||(be(o),0===--t&&(this.Id.forEach(be),this.Id=null,this.he()))},this);this.Id.push(o)}},this),this.a.forEach(function(t){0==t.getState()&&t.load()}),0===t&&setTimeout(this.he.bind(this),0)}},s(bb,Wm),(t=bb.prototype).cj=function(){return ts(this.a)},t.sd=function(t,e){(t=this.Yd(t))&&t.sd(e)},t.Zf=function(){return 0},t.eg=function(){return this.bb},t.jb=function(){return this.tileGrid},t.eb=function(t){return this.tileGrid?this.tileGrid:ae(t)},t.Yd=function(t){var e=this.c;return e&&!jt(e,t)?null:this.a},t.Xc=function(){return this.sc},t.Zd=function(t,e,i){return i=this.eb(i),e=this.Xc(e),t=T(i.Za(t),this.j),1==e?t:S(t,e,this.j)},t.sa=function(){this.a.clear(),this.u()},t.kh=a,s(Tb,Te),s(wb,bb),(t=wb.prototype).yb=function(){return this.tileLoadFunction},t.zb=function(){return this.tileUrlFunction},t.Ab=function(){return this.urls},t.dj=function(t){var e=h(t=t.target),i=t.getState();if(1==i){this.V[e]=!0;var o="tileloadstart"}else e in this.V&&(delete this.V[e],o=3==i?"tileloaderror":2==i||5==i?"tileloadend":void 0);void 0!=o&&this.b(new Tb(o,t))},t.Fb=function(t){this.a.clear(),this.tileLoadFunction=t,this.u()},t.hb=function(t,e){this.tileUrlFunction=t,function(t){if(0!==t.i){var e=t.c.jc.split("/").map(Number)[0];t.forEach(function(t){if(t.ya[0]!==e){var i=t.ya;this.remove(i[0]+"/"+i[1]+"/"+i[2]),Se(t)}},t)}}(this.a),void 0!==e?Eb(this,e):this.u()},t.rb=function(t){var e=this.urls=ub(t);this.hb(this.dc?this.dc.bind(this):hb(e,this.tileGrid),t)},t.vb=function(t){this.urls=t;var e=t.join("\n");this.hb(this.dc?this.dc.bind(this):hb(t,this.tileGrid),e)},t.kh=function(t,e,i){t=t+"/"+e+"/"+i,this.a.a.hasOwnProperty(t)&&this.a.get(t)},s(Cb,wb),(t=Cb.prototype).cj=function(){if(ts(this.a))return!0;for(var t in this.f)if(ts(this.f[t]))return!0;return!1},t.sd=function(t,e){for(var i in t=this.Yd(t),this.a.sd(this.a==t?e:{}),this.f){var o=this.f[i];o.sd(o==t?e:{})}},t.Zf=function(t){return this.c&&t&&!jt(this.c,t)?0:this.$f()},t.$f=function(){return 0},t.eg=function(t){return!(this.c&&t&&!jt(this.c,t))&&wb.prototype.eg.call(this,t)},t.eb=function(t){var e=this.c;return!this.tileGrid||e&&!jt(e,t)?((e=h(t).toString())in this.s||(this.s[e]=ae(t)),this.s[e]):this.tileGrid},t.Yd=function(t){var e=this.c;return!e||jt(e,t)?this.a:((t=h(t).toString())in this.f||(this.f[t]=new fb(this.a.highWaterMark)),this.f[t])},t.ad=function(t,e,i,o,r){var n=this.c;if(n&&r&&!jt(n,r)){var s,a=this.Yd(r);if(t=(i=[t,e,i])[0]+"/"+i[1]+"/"+i[2],a.a.hasOwnProperty(t)&&(s=a.get(t)),e=this.jc,s&&s.key==e)return s;var h=this.eb(n),l=this.eb(r),p=Sb(this,i,r);return(o=new _b(n,h,r,l,i,p,this.Xc(o),this.$f(),function(t,e,i,o){return Pb(this,t,e,i,o,n)}.bind(this),this.ob,this.O)).key=e,s?(o.g=s,Ch(o),a.replace(t,o)):a.set(t,o),o}return Pb(this,t,e,i,o,n||r)},t.Qb=function(t){if(this.O!=t){for(var e in this.O=t,this.f)this.f[e].clear();this.u()}},t.Rb=function(t,e){(t=Dt(t))&&((t=h(t).toString())in this.s||(this.s[t]=e))},s(Mb,Cb),Mb.prototype.ca=function(){return this.l},Mb.prototype.ua=function(){return this.B},Mb.prototype.La=function(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)Ym(this,"error");else{var e=t.brandLogoUri;-1==e.indexOf("https")&&(e=e.replace("http","https"));var i=t.resourceSets[0].resources[0];t=-1==this.$?i.zoomMax:this.$;var o=ue(this.c);this.tileGrid=he({extent:o,minZoom:i.zoomMin,maxZoom:t,tileSize:(i.imageWidth==i.imageHeight?i.imageWidth:[i.imageWidth,i.imageHeight])/(this.i?2:1)});var r=this.o,n=this.i;if(this.tileUrlFunction=lb(i.imageUrlSubdomains.map(function(t){var e=[0,0,0],o=i.imageUrl.replace("{subdomain}",t).replace("{culture}",r);return function(t){if(t)return Qt(t[0],t[1],-t[2]-1,e),t=o,n&&(t+="&dpi=d1&device=mobile"),t.replace("{quadkey}",function(t){var e,i=t[0],o=Array(i),r=1<<i-1;for(e=0;e<i;++e){var n=48;t[1]&r&&(n+=1),t[2]&r&&(n+=2),o[e]=String.fromCharCode(n),r>>=1}return o.join("")}(e))}})),i.imageryProviders){var s=Gt(Dt("EPSG:4326"),this.c);this.va(function(t){var e=[],o=t.viewState.zoom;return i.imageryProviders.map(function(i){for(var r=!1,n=i.coverageAreas,a=0,h=n.length;a<h;++a){var l=n[a];if(o>=l.zoomMin&&o<=l.zoomMax&&Q(l=it([(l=l.bbox)[1],l[0],l[3],l[2]],s),t.extent)){r=!0;break}}r&&e.push(i.attribution)}),e.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),e})}this.T=e,Ym(this,"ready")}},s(Lb,Cb),s(Ab,Lb),(t=Ab.prototype).nl=function(){return this.i},t.Sq=function(t){ot(this.i,t),Ob(this)},t.uq=function(t){this.i=t||{},Ob(this)},t.em=function(t,e){if(!(e=e.target).status||200<=e.status&&300>e.status){try{var i=JSON.parse(e.responseText)}catch(t){return void Ym(this,"error")}Fb(this,i),this.l[t]=i,Ym(this,"ready")}else Ym(this,"error")},t.dm=function(){Ym(this,"error")},s(Nb,zm),(t=Nb.prototype).Eo=function(){return this.distance},t.Fo=function(){return this.source},t.ae=function(t,e,i){this.source.ae(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,Db(this),this.Qc(this.features))},t.vq=function(t){this.distance=t,this.sa()},t.sa=function(){this.clear(),Db(this),this.Qc(this.features),zm.prototype.sa.call(this)},s(kb,qn),kb.prototype.ia=function(){1==this.state&&(be(this.je),this.je=null),qn.prototype.ia.call(this)},kb.prototype.Y=function(){return this.i},kb.prototype.he=function(){var t=this.Tb.getState();2==t&&(this.i=gb(J(this.g)/this.c,H(this.g)/this.c,this.j,this.Tb.resolution,0,this.c,this.g,this.f,[{extent:this.Tb.G(),image:this.Tb.Y()}],0)),this.state=t,this.u()},kb.prototype.load=function(){if(0==this.state){this.state=1,this.u();var t=this.Tb.getState();2==t||3==t?this.he():(this.je=ve(this.Tb,"change",function(){var t=this.Tb.getState();2!=t&&3!=t||(be(this.je),this.je=null,this.he())},this),this.Tb.load())}},s(Gb,Wm),Gb.prototype.Y=function(t,e,i,o){var r=this.c;if(r&&o&&!jt(r,o)){if(this.i){if(this.ua==this.g&&jt(this.i.s,o)&&this.i.resolution==e&&k(this.i.G(),t))return this.i;Se(this.i),this.i=null}return this.i=new kb(r,o,t,e,i,function(t,e,i){return this.Wc(t,e,i,r)}.bind(this)),this.ua=this.g,this.i}return r&&(o=r),this.Wc(t,e,i,o)},Gb.prototype.j=function(t){switch((t=t.target).getState()){case 1:this.b(new Vb(Wb,t));break;case 2:this.b(new Vb(Xb,t));break;case 3:this.b(new Vb(Yb,t))}},s(Vb,Te);var Wb="imageloadstart",Xb="imageloadend",Yb="imageloaderror";function zb(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var o=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+o}function Kb(t){t=t||{},Gb.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.V=void 0!==t.crossOrigin?t.crossOrigin:null,this.$=void 0===t.hidpi||t.hidpi,this.a=t.url,this.f=void 0!==t.imageLoadFunction?t.imageLoadFunction:Bb,this.s=t.params||{},this.M=null,this.l=[0,0],this.O=0,this.B=void 0!==t.ratio?t.ratio:1.5}function Hb(t){Gb.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.Ea=t.canvasFunction,this.V=null,this.$=0,this.La=void 0!==t.ratio?t.ratio:1.5}function $b(t){Gb.call(this,{projection:t.projection,resolutions:t.resolutions}),this.V=void 0!==t.crossOrigin?t.crossOrigin:null,this.l=void 0!==t.displayDpi?t.displayDpi:96,this.f=t.params||{},this.O=t.url,this.a=void 0!==t.imageLoadFunction?t.imageLoadFunction:Bb,this.$=void 0===t.hidpi||t.hidpi,this.ca=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.s=void 0!==t.ratio?t.ratio:1,this.Ea=void 0!==t.useOverlay&&t.useOverlay,this.M=null,this.B=0}function qb(t){var e=t.imageExtent,i=void 0!==t.crossOrigin?t.crossOrigin:null,o=void 0!==t.imageLoadFunction?t.imageLoadFunction:Bb;Gb.call(this,{attributions:t.attributions,logo:t.logo,projection:Dt(t.projection)}),this.M=new Sh(e,void 0,1,t.url,i,o),this.a=t.imageSize?t.imageSize:null,ve(this.M,"change",this.j,this)}function Zb(t){this.a=t.source,this.ob=[1,0,0,1,0,0],this.f=mr(),this.l=[0,0],this.ca=ra.Jc(9),this.bb=void 0==t.renderBuffer?100:t.renderBuffer,this.B=null,Hb.call(this,{attributions:t.attributions,canvasFunction:this.Mk.bind(this),logo:t.logo,projection:t.projection,ratio:t.ratio,resolutions:t.resolutions,state:this.a.getState()}),this.O=null,this.s=void 0,this.aj(t.style),ve(this.a,"change",this.To,this)}function Jb(t){t=t||{},Gb.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.ca=void 0!==t.crossOrigin?t.crossOrigin:null,this.f=t.url,this.s=void 0!==t.imageLoadFunction?t.imageLoadFunction:Bb,this.a=t.params||{},this.l=!0,ex(this),this.$=t.serverType,this.Ea=void 0===t.hidpi||t.hidpi,this.M=null,this.B=[0,0],this.V=0,this.O=void 0!==t.ratio?t.ratio:1.5}s(Kb,Gb),(t=Kb.prototype).Ho=function(){return this.s},t.Wc=function(t,e,i,o){if(void 0===this.a)return null;e=Ub(this,e),i=this.$?i:1;var r=this.M;if(r&&this.O==this.g&&r.resolution==e&&r.a==i&&M(r.G(),t))return r;ot(r={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},this.s);var n=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.B){var a=this.B*J(t)/2,h=this.B*H(t)/2;t[0]=n-a,t[1]=s-h,t[2]=n+a,t[3]=s+h}a=e/i,h=Math.ceil(J(t)/a);var l=Math.ceil(H(t)/a);return t[0]=n-a*h/2,t[2]=n+a*h/2,t[1]=s-a*l/2,t[3]=s+a*l/2,this.l[0]=h,this.l[1]=l,n=t,s=this.l,a=i,o=o.wb.split(":").pop(),r.SIZE=s[0]+","+s[1],r.BBOX=n.join(","),r.BBOXSR=o,r.IMAGESR=o,r.DPI=Math.round(90*a),(n=(o=this.a).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"))==o&&d(!1,50),r=zb(n,r),this.M=new Sh(t,e,i,r,this.V,this.f),this.O=this.g,ve(this.M,"change",this.j,this),this.M},t.Go=function(){return this.f},t.Io=function(){return this.a},t.Jo=function(t){this.M=null,this.f=t,this.u()},t.Ko=function(t){t!=this.a&&(this.a=t,this.M=null,this.u())},t.Lo=function(t){ot(this.s,t),this.M=null,this.u()},s(Hb,Gb),Hb.prototype.Wc=function(t,e,i,o){e=Ub(this,e);var r=this.V;return r&&this.$==this.g&&r.resolution==e&&r.a==i&&M(r.G(),t)?r:(et(t=t.slice(),this.La),(o=this.Ea(t,e,i,[J(t)/e*i,H(t)/e*i],o))&&(r=new Zn(t,e,i,o)),this.V=r,this.$=this.g,r)},s($b,Gb),(t=$b.prototype).No=function(){return this.f},t.Wc=function(t,e,i){e=Ub(this,e),i=this.$?i:1;var o=this.M;if(o&&this.B==this.g&&o.resolution==e&&o.a==i&&M(o.G(),t))return o;1!=this.s&&et(t=t.slice(),this.s);var r=[J(t)/e*i,H(t)/e*i];if(void 0!==this.O){o=this.O;var n=z(t),s=this.ca,a=J(t),h=H(t),l=r[0],p=r[1],u=.0254/this.l;r={OPERATION:this.Ea?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.l,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:p*a>l*h?a*s/(l*u):h*s/(p*u),SETVIEWCENTERX:n[0],SETVIEWCENTERY:n[1]},ot(r,this.f),ve(o=new Sh(t,e,i,o=zb(o,r),this.V,this.a),"change",this.j,this)}else o=null;return this.M=o,this.B=this.g,o},t.Mo=function(){return this.a},t.Po=function(t){ot(this.f,t),this.u()},t.Oo=function(t){this.M=null,this.a=t,this.u()},s(qb,Gb),qb.prototype.Wc=function(t){return Q(t,this.M.G())?this.M:null},qb.prototype.j=function(t){if(2==this.M.getState()){var e=this.M.G(),i=this.M.Y();if(this.a)var o=this.a[0],r=this.a[1];else o=i.width,r=i.height;if((e=Math.ceil(J(e)/(H(e)/r)))!=o){var n=(e=mr(e,r)).canvas;e.drawImage(i,0,0,o,r,0,0,n.width,n.height),this.M.ih(n)}}Gb.prototype.j.call(this,t)},s(Zb,Hb),(t=Zb.prototype).Mk=function(t,e,i,o,r){var n=new Aa(.5*e/i,t,e,i,this.a.$,this.ca,this.bb);this.a.ae(t,e,r);var s=!1;return this.a.ec(t,function(t){var o,r;if(!(o=s))if((o=t.ib())?r=o.call(t,e):this.s&&(r=this.s(t,e)),r){var a,h=!1;for(Array.isArray(r)||(r=[r]),o=0,a=r.length;o<a;++o)h=Ua(n,t,r[o],Ga(e,i),this.So,this)||h;o=h}else o=!1;s=o},this),Na(n),s?null:(this.l[0]!=o[0]||this.l[1]!=o[1]?(this.f.canvas.width=o[0],this.f.canvas.height=o[1],this.l[0]=o[0],this.l[1]=o[1]):this.f.clearRect(0,0,o[0],o[1]),this.ca.clear(),t=function(t,e,i,o,r){return i=o/i,So(t.ob,r[0]/2,r[1]/2,i,-i,0,-e[0],-e[1])}(this,z(t),e,i,o),n.Na(this.f,t,0,{}),this.B=n,this.f.canvas)},t.wa=function(t,e,i,o,r,n){if(this.B){var s={};return this.B.wa(t,e,0,o,r,function(t){var e=h(t).toString();if(!(e in s))return s[e]=!0,n(t)},null)}},t.Qo=function(){return this.a},t.Ro=function(){return this.O},t.ib=function(){return this.s},t.So=function(){this.u()},t.To=function(){Ym(this,this.a.getState())},t.aj=function(t){this.O=void 0!==t?t:hh,this.s=t?sh(this.O):void 0,this.u()},s(Jb,Gb);var Qb=[101,101];function tx(t,e,i,o,r,n){if(d(void 0!==t.f,9),n[t.l?"CRS":"SRS"]=r.wb,"STYLES"in t.a||(n.STYLES=""),1!=o)switch(t.$){case"geoserver":o=90*o+.5|0,n.FORMAT_OPTIONS="FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+";dpi:"+o:"dpi:"+o;break;case"mapserver":n.MAP_RESOLUTION=90*o;break;case"carmentaserver":case"qgis":n.DPI=90*o;break;default:d(!1,8)}var s;return n.WIDTH=i[0],n.HEIGHT=i[1],i=r.b,s=t.l&&"ne"==i.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,n.BBOX=s.join(","),zb(t.f,n)}function ex(t){t.l=0<=Ki(t.a.VERSION||"1.3.0")}function ix(t){var e;e=void 0!==(t=t||{}).attributions?t.attributions:['&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'],Lb.call(this,{attributions:e,cacheSize:t.cacheSize,crossOrigin:void 0!==t.crossOrigin?t.crossOrigin:"anonymous",opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:t.wrapX})}function ox(t){this.B=null,this.Ea=void 0!==t.operationType?t.operationType:"pixel",this.La=void 0!==t.threads?t.threads:1,this.f=function(t){for(var e=t.length,i=Array(e),o=0;o<e;++o){var r=o,n=t[o],s=null;n instanceof bb?(n=new nb({source:n}),s=new ia(n)):n instanceof Gb&&(n=new rb({source:n}),s=new Ws(n)),i[r]=s}return i}(t.sources);for(var e=0,i=this.f.length;e<i;++e)ve(this.f[e],"change",this.u,this);this.$=new Bi(function(){return 1},this.u.bind(this)),i={};for(var o=0,r=(e=function(t){return t.map(function(t){return Er(t.a)})}(this.f)).length;o<r;++o)i[h(e[o].layer)]=e[o];this.a=null,this.O={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,focus:null,index:0,layerStates:i,layerStatesArray:e,logos:{},pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.$,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},Gb.call(this,{}),void 0!==t.operation&&this.s(t.operation,t.lib)}(t=Jb.prototype).Uo=function(t,e,i,o){if(void 0!==this.f){i=Dt(i);var r=this.c;r&&r!==i&&(e=db(r,i,t,e),t=Vt(t,i,r));var n=K(t,e,0,Qb),s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.a.LAYERS};return ot(s,this.a,o),o=Math.floor((n[3]-t[1])/e),s[this.l?"I":"X"]=Math.floor((t[0]-n[0])/e),s[this.l?"J":"Y"]=o,tx(this,n,Qb,1,r||i,s)}},t.Wo=function(){return this.a},t.Wc=function(t,e,i,o){if(void 0===this.f)return null;e=Ub(this,e),1==i||this.Ea&&void 0!==this.$||(i=1);var r=e/i,n=z(t),s=K(n,r,0,[Math.ceil(J(t)/r),Math.ceil(H(t)/r)]);return t=K(n,r,0,[Math.ceil(this.O*J(t)/r),Math.ceil(this.O*H(t)/r)]),(n=this.M)&&this.V==this.g&&n.resolution==e&&n.a==i&&M(n.G(),s)?n:(ot(s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},this.a),this.B[0]=Math.round(J(t)/r),this.B[1]=Math.round(H(t)/r),o=tx(this,t,this.B,i,o,s),this.M=new Sh(t,e,i,o,this.ca,this.s),this.V=this.g,ve(this.M,"change",this.j,this),this.M)},t.Vo=function(){return this.s},t.Xo=function(){return this.f},t.Yo=function(t){this.M=null,this.s=t,this.u()},t.Zo=function(t){t!=this.f&&(this.f=t,this.M=null,this.u())},t.$o=function(t){ot(this.a,t),ex(this),this.M=null,this.u()},s(ix,Lb),ra.nf={},ra.nf.Hf=function(){},function(t){function e(t,e,i){return s?new ImageData(t,e,i):((e=a.createImageData(e,i)).data.set(t),e)}function i(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}return function(i){var o=i.buffers,r=i.meta,n=i.width,s=i.height,a=o.length,h=o[0].byteLength;if(i.imageOps){for(h=Array(a),i=0;i<a;++i){var l=i,p=new Uint8ClampedArray(o[i]),u=n,c=s;p=e?new ImageData(p,u,c):{data:p,width:u,height:c},h[l]=p}n=t(h,r).data}else{for(n=new Uint8ClampedArray(h),s=Array(a),l=Array(a),i=0;i<a;++i)s[i]=new Uint8ClampedArray(o[i]),l[i]=[0,0,0,0];for(o=0;o<h;o+=4){for(i=0;i<a;++i)p=s[i],l[i][0]=p[o],l[i][1]=p[o+1],l[i][2]=p[o+2],l[i][3]=p[o+3];i=t(l,r),n[o]=i[0],n[o+1]=i[1],n[o+2]=i[2],n[o+3]=i[3]}}return n.buffer}}function o(t,e){var o=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+i.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]);return o=URL.createObjectURL(new Blob(o,{type:"text/javascript"})),(o=new Worker(o)).addEventListener("message",e),o}function r(t,e){var o=i(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:o(t),meta:t.meta}})},0)}}}function n(t){var e;this.Jf=!!t.Cm;var i=[];if(e=0===t.threads?0:this.Jf?1:t.threads||1)for(var n=0;n<e;++n)i[n]=o(t,this.xh.bind(this,n));else i[0]=r(t,this.xh.bind(this,0));this.we=i,this.Nd=[],this.Bk=t.Sp||1/0,this.ve=0,this.od={},this.Kf=null}var s=!0;try{new ImageData(10,10)}catch(t){s=!1}var a=document.createElement("canvas").getContext("2d");n.prototype.Rp=function(t,e,i){this.zk({inputs:t,ii:e,callback:i}),this.uh()},n.prototype.zk=function(t){for(this.Nd.push(t);this.Nd.length>this.Bk;)this.Nd.shift().callback(null,null)},n.prototype.uh=function(){if(0===this.ve&&0<this.Nd.length){var t=this.Kf=this.Nd.shift(),e=t.inputs[0].width,i=t.inputs[0].height,o=t.inputs.map(function(t){return t.data.buffer}),r=this.we.length;if(this.ve=r,1===r)this.we[0].postMessage({buffers:o,meta:t.ii,imageOps:this.Jf,width:e,height:i},o);else for(var n=4*Math.ceil(t.inputs[0].data.length/4/r),s=0;s<r;++s){for(var a=s*n,h=[],l=0,p=o.length;l<p;++l)h.push(o[s].slice(a,a+n));this.we[s].postMessage({buffers:h,meta:t.ii,imageOps:this.Jf,width:e,height:i},h)}}},n.prototype.xh=function(t,e){this.hr||(this.od[t]=e.data,--this.ve,0===this.ve&&this.Ck())},n.prototype.Ck=function(){var t=this.Kf,i=this.we.length;if(1===i)var o=new Uint8ClampedArray(this.od[0].buffer),r=this.od[0].meta;else{var n=t.inputs[0].data.length;o=new Uint8ClampedArray(n),r=Array(n),n=4*Math.ceil(n/4/i);for(var s=0;s<i;++s){var a=s*n;o.set(new Uint8ClampedArray(this.od[s].buffer),a),r[s]=this.od[s].meta}}this.Kf=null,this.od={},t.callback(null,e(o,t.inputs[0].width,t.inputs[0].height),r),this.uh()},t.default={Hf:n},t.Hf=n}(ra.nf=ra.nf||{}),s(ox,Gb),ox.prototype.s=function(t,e){this.B=new ra.nf.Hf({operation:t,Cm:"image"===this.Ea,Sp:1,lib:e,threads:this.La}),this.u()},ox.prototype.Y=function(t,e,i,o){i=!0;for(var r,n=0,s=this.f.length;n<s;++n)if("ready"!==(r=this.f[n].a.ha()).getState()){i=!1;break}if(!i)return null;if((i=ot({},this.O)).viewState=ot({},i.viewState),r=z(t),i.extent=t.slice(),i.focus=r,i.size[0]=Math.round(J(t)/e),i.size[1]=Math.round(H(t)/e),i.time=Date.now(),i.animate=!1,(n=i.viewState).center=r,n.projection=o,n.resolution=e,this.l=i,this.a&&(o=this.a.resolution,r=this.a.G(),e===o&&k(t,r)||(this.a=null)),!this.a||this.g!==this.V)t:{for(t=this.l,o=this.f.length,e=Array(o),r=0;r<o;++r){n=this.f[r],s=t;var a=t.layerStatesArray[r];if(n.$c(s,a)){var h=s.size[0],l=s.size[1];if(rx){var p=rx.canvas;p.width!==h||p.height!==l?rx=mr(h,l):rx.clearRect(0,0,h,l)}else rx=mr(h,l);n.df(s,a,rx),n=rx.getImageData(0,0,h,l)}else n=null;if(!n)break t;e[r]=n}o={},this.b(new nx(sx,t,o)),this.B.Rp(e,o,this.ca.bind(this,t))}return Vi(i.tileQueue,16,16),i.animate&&requestAnimationFrame(this.u.bind(this)),this.a},ox.prototype.ca=function(t,e,i,o){if(!e&&i){e=t.extent;var r=t.viewState.resolution;if(r===this.l.viewState.resolution&&k(e,this.l.extent)){if(this.a)var n=this.a.Y().getContext("2d");else n=mr(Math.round(J(e)/r),Math.round(H(e)/r)),this.a=new Zn(e,r,1,n.canvas);n.putImageData(i,0,0),this.u(),this.V=this.g,this.b(new nx(ax,t,o))}}};var rx=null;function nx(t,e,i){Te.call(this,t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=i}s(nx,Te),ox.prototype.Wc=function(){return null};var sx="beforeoperations",ax="afteroperations";function hx(t){var e=t.layer.indexOf("-");e=ux[-1==e?t.layer:t.layer.slice(0,e)];var i=px[t.layer];Lb.call(this,{attributions:lx,cacheSize:t.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=t.maxZoom?t.maxZoom:e.maxZoom,minZoom:void 0!=t.minZoom?t.minZoom:e.minZoom,opaque:i.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+i.Ob,wrapX:t.wrapX})}s(hx,Lb);var lx=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.','&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'],px={terrain:{Ob:"jpg",opaque:!0},"terrain-background":{Ob:"jpg",opaque:!0},"terrain-labels":{Ob:"png",opaque:!1},"terrain-lines":{Ob:"png",opaque:!1},"toner-background":{Ob:"png",opaque:!0},toner:{Ob:"png",opaque:!0},"toner-hybrid":{Ob:"png",opaque:!1},"toner-labels":{Ob:"png",opaque:!1},"toner-lines":{Ob:"png",opaque:!1},"toner-lite":{Ob:"png",opaque:!0},watercolor:{Ob:"jpg",opaque:!0}},ux={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}};function cx(t){t=t||{},Cb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.i=t.params||{},this.l=[1/0,1/0,-1/0,-1/0],Eb(this,fx(this))}function fx(t){var e,i=0,o=[];for(e in t.i)o[i++]=e+"-"+t.i[e];return o.join("/")}function dx(t){bb.call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX})}function yx(t,e,i){Th.call(this,t,2),this.c=e,this.ta=i,this.a=null}function gx(t){if(this.i=null,Cb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:Dt("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),t.url)if(t.jsonp)cb(t.url,this.Cg.bind(this),this.ef.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.bp.bind(this)),e.addEventListener("error",this.ap.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.Cg(t.tileJSON):d(!1,51)}function vx(t){if(bb.call(this,{projection:Dt("EPSG:3857"),state:"loading"}),this.s=void 0===t.preemptive||t.preemptive,this.l=pb,this.f=void 0,this.i=t.jsonp||!1,t.url)if(this.i)cb(t.url,this.Dg.bind(this),this.ff.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.gp.bind(this)),e.addEventListener("error",this.fp.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.Dg(t.tileJSON):d(!1,51)}function mx(t,e,i,o,r,n){Th.call(this,t,e),this.v=i,this.a=o,this.N=r,this.c=this.l=this.f=null,this.o=n}function _x(t){if(0==t.state)if(t.state=1,t.o)cb(t.v,t.bj.bind(t),t.Ne.bind(t));else{var e=new XMLHttpRequest;e.addEventListener("load",t.ep.bind(t)),e.addEventListener("error",t.cp.bind(t)),e.open("GET",t.v),e.send()}}function bx(t){var e=(t=t||{}).params||{};Cb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:!(!("TRANSPARENT"in e)||e.TRANSPARENT),projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.o=void 0!==t.gutter?t.gutter:0,this.i=e,this.l=!0,this.B=t.serverType,this.$=void 0===t.hidpi||t.hidpi,this.ca=[1/0,1/0,-1/0,-1/0],Sx(this),Eb(this,Ex(this))}function xx(t,e,i,o,r,n,s){var a=t.urls;if(a){if(s.WIDTH=i[0],s.HEIGHT=i[1],s[t.l?"CRS":"SRS"]=n.wb,"STYLES"in t.i||(s.STYLES=""),1!=r)switch(t.B){case"geoserver":i=90*r+.5|0,s.FORMAT_OPTIONS="FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+";dpi:"+i:"dpi:"+i;break;case"mapserver":s.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":s.DPI=90*r;break;default:d(!1,52)}return n=n.b,t.l&&"ne"==n.substr(0,2)&&(t=o[0],o[0]=o[1],o[1]=t,t=o[2],o[2]=o[3],o[3]=t),s.BBOX=o.join(","),zb(1==a.length?a[0]:a[b((e[1]<<e[0])+e[2],a.length)],s)}}function Ex(t){var e,i=0,o=[];for(e in t.i)o[i++]=e+"-"+t.i[e];return o.join("/")}function Sx(t){t.l=0<=Ki(t.i.VERSION||"1.3.0")}function Tx(t,e,i,o,r,n,s,a,h,l,p,u,c,f,d){if(Th.call(this,t,e,d),this.v={},this.o={},this.c=l,this.a=[],this.D=i,this.l=n,this.f=[],this.N=[],n){var y=h.Ma(n),g=h.Ta(t[0]);a.Vf(y,a.Dc(g),function(t){var e=$(y,a.Ma(t)),i=a.G();i&&(e=$(e,i)),.5<=J(e)/g&&.5<=H(e)/g&&(e=t.toString(),(i=l[e])||(i=s(t,p,u),i=l[e]=new c(t,void 0==i?4:0,void 0==i?"":i,o,r),this.N.push(ve(i,"change",f))),i.c++,this.a.push(e))}.bind(this))}}function wx(t,e){return(e=h(e).toString())in t.v||(t.v[e]=mr()),t.v[e]}function Cx(t,e){return(e=h(e).toString())in t.o||(t.o[e]={Be:!1,eh:null,wf:-1,fh:-1}),t.o[e]}function Rx(t,e){t.ug(Uu(e,t.v,t.Cp.bind(t),t.Bp.bind(t)))}function Px(t){var e=t.projection||"EPSG:3857",i=t.extent||ue(e),o=t.tileGrid||he({extent:i,maxZoom:t.maxZoom||22,minZoom:t.minZoom,tileSize:t.tileSize||512});wb.call(this,{attributions:t.attributions,cacheSize:void 0!==t.cacheSize?t.cacheSize:128,extent:i,logo:t.logo,opaque:!1,projection:e,state:t.state,tileGrid:o,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Rx,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.l=t.format?t.format:null,this.i={},this.s=void 0==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:Xp,this.f={}}function Ix(t){this.s=t.matrixIds,te.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})}function Mx(t,e,i){var o=[],r=[],n=[],s=[],a=[],h=void 0!==i?i:[],l=(i=Dt((i=t.SupportedCRS).replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Dt(i)).Bc(),p="ne"==i.b.substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(t){var e;if(e=!(0<h.length)||$t(h,function(e){return t.Identifier==e.TileMatrix})){r.push(t.Identifier),e=28e-5*t.ScaleDenominator/l;var i=t.TileWidth,u=t.TileHeight;p?n.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):n.push(t.TopLeftCorner),o.push(e),s.push(i==u?i:[i,u]),a.push([t.MatrixWidth,-t.MatrixHeight])}}),new Ix({extent:e,origins:n,resolutions:o,matrixIds:r,tileSizes:s,sizes:a})}function Lx(t){this.La=void 0!==t.version?t.version:"1.0.0",this.B=void 0!==t.format?t.format:"image/jpeg",this.i=void 0!==t.dimensions?t.dimensions:{},this.$=t.layer,this.o=t.matrixSet,this.ca=t.style;var e=t.urls;void 0===e&&void 0!==t.url&&(e=ub(t.url));var i=this.ua=void 0!==t.requestEncoding?t.requestEncoding:"KVP",o=t.tileGrid,r={layer:this.$,style:this.ca,tilematrixset:this.o};"KVP"==i&&ot(r,{Service:"WMTS",Request:"GetTile",Version:this.La,Format:this.B});var n=this.i;this.l=function(t){return t="KVP"==i?zb(t,r):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}),function(e){if(e){var r={TileMatrix:o.s[e[0]],TileCol:e[1],TileRow:-e[2]-1};return ot(r,n),e=t,"KVP"==i?zb(e,r):e.replace(/\{(\w+?)\}/g,function(t,e){return r[e]})}}};var s=e&&0<e.length?lb(e.map(this.l)):pb;Cb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:s,urls:e,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition}),Eb(this,Ax(this))}function Ax(t){var e,i=0,o=[];for(e in t.i)o[i++]=e+"-"+t.i[e];return o.join("/")}function Ox(t){var e=(t=t||{}).size,i=e[0],o=e[1];e=t.extent||[0,-e[1],e[0],0];var r=[],n=t.tileSize||256,s=n;switch(void 0!==t.tierSizeCalculation?t.tierSizeCalculation:Nx){case Nx:for(;i>s||o>s;)r.push([Math.ceil(i/s),Math.ceil(o/s)]),s+=s;break;case Dx:for(;i>s||o>s;)r.push([Math.ceil(i/s),Math.ceil(o/s)]),i>>=1,o>>=1;break;default:d(!1,53)}r.push([1,1]),r.reverse(),o=[1];var a=[0];for(s=1,i=r.length;s<i;s++)o.push(1<<s),a.push(r[s-1][0]*r[s-1][1]+a[s-1]);o.reverse();var h=new te({tileSize:n,extent:e,origin:q(e),resolutions:o});(e=t.url)&&-1==e.indexOf("{TileGroup}")&&-1==e.indexOf("{tileIndex}")&&(e+="{TileGroup}/{z}-{x}-{y}.jpg"),e=lb((e=ub(e)).map(function(t){return function(e){if(e){var i=e[0],o=e[1],n=o+(e=-e[2]-1)*r[i][0],s={z:i,x:o,y:e,tileIndex:n,TileGroup:"TileGroup"+((n+a[i])/h.Za(i)|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return s[e]})}}})),Cb.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:Fx.bind(null,h),tileGrid:h,tileUrlFunction:e,transition:t.transition})}function Fx(t,e,i,o,r,n,s){Ih.call(this,e,i,o,r,n,s),this.a=null,this.o=T(t.Za(e[0]))}s(cx,Cb),cx.prototype.o=function(){return this.i},cx.prototype.Xc=function(t){return t},cx.prototype.dc=function(t,e,i){var o=this.tileGrid;if(o||(o=this.eb(i)),!(o.b.length<=t[0])){var r=o.Ma(t,this.l),n=T(o.Za(t[0]),this.j);1!=e&&(n=S(n,e,this.j)),ot(o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},this.i);var s=this.urls;return s?(i=i.wb.split(":").pop(),o.SIZE=n[0]+","+n[1],o.BBOX=r.join(","),o.BBOXSR=i,o.IMAGESR=i,o.DPI=Math.round(o.DPI?o.DPI*e:90*e),t=zb(t=(1==s.length?s[0]:s[b((t[1]<<t[0])+t[2],s.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)):t=void 0,t}},cx.prototype.B=function(t){ot(this.i,t),Eb(this,fx(this))},s(dx,bb),dx.prototype.ad=function(t,e,i){var o=t+"/"+e+"/"+i;if(this.a.a.hasOwnProperty(o))return this.a.get(o);var r=T(this.tileGrid.Za(t));return r=new yx(t=[t,e,i],r,e=(e=Sb(this,t))?Sb(this,e).toString():""),this.a.set(o,r),r},s(yx,Th),yx.prototype.Y=function(){if(this.a)return this.a;var t=this.c,e=mr(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.ta,t[0]/2,t[1]/2),this.a=e.canvas},yx.prototype.load=function(){},s(gx,Cb),(t=gx.prototype).bp=function(t){if(!(t=t.target).status||200<=t.status&&300>t.status){try{var e=JSON.parse(t.responseText)}catch(t){return void this.ef()}this.Cg(e)}else this.ef()},t.ap=function(){this.ef()},t.Sl=function(){return this.i},t.Cg=function(t){var e=Dt("EPSG:4326"),i=this.c;if(void 0!==t.bounds){var o=Gt(e,i);o=it(t.bounds,o)}var r=t.minzoom||0,n=t.maxzoom||22;if(this.tileGrid=i=he({extent:ue(i),maxZoom:n,minZoom:r}),this.tileUrlFunction=hb(t.tiles,i),void 0!==t.attribution&&!this.C){var s=void 0!==o?o:e.G();this.va(function(e){return Q(s,e.extent)?[t.attribution]:null})}this.i=t,Ym(this,"ready")},t.ef=function(){Ym(this,"error")},s(vx,bb),(t=vx.prototype).gp=function(t){if(!(t=t.target).status||200<=t.status&&300>t.status){try{var e=JSON.parse(t.responseText)}catch(t){return void this.ff()}this.Dg(e)}else this.ff()},t.fp=function(){this.ff()},t.Pl=function(){return this.f},t.al=function(t,e,i,o,r){this.tileGrid?(e=this.tileGrid.Le(t,e),function(t,e,i,o,r){0==t.state&&!0===r?(me(t,"change",function(){i.call(o,this.getData(e))},t),_x(t)):!0===r?setTimeout(function(){i.call(o,this.getData(e))}.bind(t),0):i.call(o,t.getData(e))}(this.ad(e[0],e[1],e[2],1,this.c),t,i,o,r)):!0===r?setTimeout(function(){i.call(o,null)},0):i.call(o,null)},t.ff=function(){Ym(this,"error")},t.Dg=function(t){var e=Dt("EPSG:4326"),i=this.c;if(void 0!==t.bounds){var o=Gt(e,i);o=it(t.bounds,o)}var r=t.minzoom||0,n=t.maxzoom||22;if(this.tileGrid=i=he({extent:ue(i),maxZoom:n,minZoom:r}),this.f=t.template,r=t.grids){if(this.l=hb(r,i),void 0!==t.attribution){var s=void 0!==o?o:e.G();this.va(function(e){return Q(s,e.extent)?[t.attribution]:null})}Ym(this,"ready")}else Ym(this,"error")},t.ad=function(t,e,i,o,r){var n=t+"/"+e+"/"+i;return this.a.a.hasOwnProperty(n)?this.a.get(n):(e=Sb(this,t=[t,e,i],r),o=new mx(t,void 0!==(o=this.l(e,o,r))?0:4,void 0!==o?o:"",this.tileGrid.Ma(t),this.s,this.i),this.a.set(n,o),o)},t.kh=function(t,e,i){t=t+"/"+e+"/"+i,this.a.a.hasOwnProperty(t)&&this.a.get(t)},s(mx,Th),(t=mx.prototype).Y=function(){return null},t.getData=function(t){if(!this.f||!this.l)return null;var e=this.f[Math.floor((1-(t[1]-this.a[1])/(this.a[3]-this.a[1]))*this.f.length)];return"string"!=typeof e?null:(93<=(e=e.charCodeAt(Math.floor((t[0]-this.a[0])/(this.a[2]-this.a[0])*e.length)))&&e--,35<=e&&e--,t=null,(e-=32)in this.l&&(e=this.l[e],t=this.c&&e in this.c?this.c[e]:e),t)},t.lb=function(){return this.v},t.Ne=function(){this.state=3,this.u()},t.bj=function(t){this.f=t.grid,this.l=t.keys,this.c=t.data,this.state=4,this.u()},t.ep=function(t){if(!(t=t.target).status||200<=t.status&&300>t.status){try{var e=JSON.parse(t.responseText)}catch(t){return void this.Ne()}this.bj(e)}else this.Ne()},t.cp=function(){this.Ne()},t.load=function(){this.N&&_x(this)},s(bx,Cb),(t=bx.prototype).hp=function(t,e,i,o){i=Dt(i);var r=this.c,n=this.tileGrid;if(n||(n=this.eb(i)),e=n.Le(t,e),!(n.b.length<=e[0])){var s=n.Ta(e[0]),a=n.Ma(e,this.ca);n=T(n.Za(e[0]),this.j);var h=this.o;return 0!==h&&(n=E(n,h,this.j),a=C(a,s*h,a)),r&&r!==i&&(s=db(r,i,t,s),a=Wt(a,i,r),t=Vt(t,i,r)),h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.i.LAYERS},ot(h,this.i,o),o=Math.floor((a[3]-t[1])/s),h[this.l?"I":"X"]=Math.floor((t[0]-a[0])/s),h[this.l?"J":"Y"]=o,xx(this,e,n,a,1,r||i,h)}},t.$f=function(){return this.o},t.ip=function(){return this.i},t.Xc=function(t){return this.$&&void 0!==this.B?t:1},t.dc=function(t,e,i){var o=this.tileGrid;if(o||(o=this.eb(i)),!(o.b.length<=t[0])){1==e||this.$&&void 0!==this.B||(e=1);var r=o.Ta(t[0]),n=o.Ma(t,this.ca);o=T(o.Za(t[0]),this.j);var s=this.o;return 0!==s&&(o=E(o,s,this.j),n=C(n,r*s,n)),1!=e&&(o=S(o,e,this.j)),ot(r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},this.i),xx(this,t,o,n,e,i,r)}},t.jp=function(t){ot(this.i,t),Sx(this),Eb(this,Ex(this))},s(Tx,Th),(t=Tx.prototype).ia=function(){for(var t=0,e=this.a.length;t<e;++t){var i=this.a[t],o=this.c[i];o.c--,0==o.c&&(delete this.c[i],Se(o))}this.a.length=0,this.c=null,this.f.forEach(be),this.f.length=0,this.g&&Se(this.g),this.state=5,this.u(),this.N.forEach(be),this.N.length=0,Th.prototype.ia.call(this)},t.Y=function(t){return-1==Cx(this,t).fh?null:wx(this,t).canvas},t.lb=function(){return this.a.join("/")+"-"+this.D},t.load=function(){var t=0,e={};0==this.state&&Rh(this,1),1==this.state&&this.a.forEach(function(i){var o=this.c[i];0==o.state&&(o.ug(this.C),o.load()),1==o.state&&(i=ve(o,"change",function(){var i=o.getState();if(2==i||3==i){var r=h(o);3==i?e[r]=!0:(--t,delete e[r]),0==t-Object.keys(e).length&&this.Kh()}}.bind(this)),this.f.push(i),++t)}.bind(this)),0==t-Object.keys(e).length&&setTimeout(this.Kh.bind(this),0)},t.Kh=function(){for(var t=this.a.length,e=0,i=t-1;0<=i;--i){var o=this.c[this.a[i]].getState();2!=o&&--t,4==o&&++e}t==this.a.length?(this.f.forEach(be),this.f.length=0,Rh(this,2)):Rh(this,e==this.a.length?4:3)},s(Px,wb),(t=Px.prototype).clear=function(){this.a.clear(),this.i={}},t.ad=function(t,e,i,o,r){var n=t+"/"+e+"/"+i;return this.a.a.hasOwnProperty(n)?this.a.get(n):(o=new Tx(t=[t,e,i],null!==(e=Sb(this,t,r))?0:4,this.g,this.l,this.tileLoadFunction,e,this.tileUrlFunction,this.tileGrid,this.eb(r),this.i,o,r,this.tileClass,this.dj.bind(this),this.Ea),this.a.set(n,o),o)},t.eb=function(t){var e=t.wb,i=this.f[e];return i||(i=this.tileGrid,i=this.f[e]=pe(t,void 0,i?i.Za(i.minZoom):void 0)),i},t.Xc=function(t){return t},t.Zd=function(t,e,i){return t=T(this.eb(i).Za(t)),[Math.round(t[0]*e),Math.round(t[1]*e)]},s(Ix,te),Ix.prototype.v=function(){return this.s},s(Lx,Cb),(t=Lx.prototype).vb=function(t){this.urls=t;var e=t.join("\n");this.hb(this.dc?this.dc.bind(this):lb(t.map(this.l.bind(this))),e)},t.ol=function(){return this.i},t.kp=function(){return this.B},t.lp=function(){return this.$},t.Al=function(){return this.o},t.Nl=function(){return this.ua},t.mp=function(){return this.ca},t.Ul=function(){return this.La},t.Tq=function(t){ot(this.i,t),Eb(this,Ax(this))},s(Ox,Cb),s(Fx,Ih),Fx.prototype.Y=function(){if(this.a)return this.a;var t=Ih.prototype.Y.call(this);if(2==this.state){var e=this.o;return t.width==e[0]&&t.height==e[1]?this.a=t:((e=mr(e[0],e[1])).drawImage(t,0,0),this.a=e.canvas)}return t};var Nx="default",Dx="truncated";return p.prototype.code=p.prototype.code,n("ol.Attribution",ce),ce.prototype.getHTML=ce.prototype.b,n("ol.CanvasMap",za),n("ol.Collection",Fe),Fe.prototype.clear=Fe.prototype.clear,Fe.prototype.extend=Fe.prototype.qg,Fe.prototype.forEach=Fe.prototype.forEach,Fe.prototype.getArray=Fe.prototype.Xm,Fe.prototype.item=Fe.prototype.item,Fe.prototype.getLength=Fe.prototype.kc,Fe.prototype.insertAt=Fe.prototype.Re,Fe.prototype.pop=Fe.prototype.pop,Fe.prototype.push=Fe.prototype.push,Fe.prototype.remove=Fe.prototype.remove,Fe.prototype.removeAt=Fe.prototype.Wg,Fe.prototype.setAt=Fe.prototype.rq,ke.prototype.element=ke.prototype.element,n("ol.color.asArray",ms),n("ol.color.asString",_s),n("ol.colorlike.asColorLike",Es),n("ol.control.defaults",Wr),n("ol.coordinate.add",Hi),n("ol.coordinate.createStringXY",function(t){return function(e){return ro(e,t)}}),n("ol.coordinate.format",Zi),n("ol.coordinate.rotate",Qi),n("ol.coordinate.toStringHDMS",function(t,e){return t?qi("NS",t[1],e)+" "+qi("EW",t[0],e):""}),n("ol.coordinate.toStringXY",ro),n("ol.DeviceOrientation",Ka),Ka.prototype.getAlpha=Ka.prototype.Ym,Ka.prototype.getBeta=Ka.prototype.ll,Ka.prototype.getGamma=Ka.prototype.ql,Ka.prototype.getHeading=Ka.prototype.Zm,Ka.prototype.getTracking=Ka.prototype.li,Ka.prototype.setTracking=Ka.prototype.rg,n("ol.easing.easeIn",no),n("ol.easing.easeOut",so),n("ol.easing.inAndOut",ao),n("ol.easing.linear",ho),n("ol.easing.upAndDown",function(t){return.5>t?ao(2*t):1-ao(2*(t-.5))}),n("ol.extent.boundingExtent",w),n("ol.extent.buffer",C),n("ol.extent.containsCoordinate",I),n("ol.extent.containsExtent",M),n("ol.extent.containsXY",L),n("ol.extent.createEmpty",O),n("ol.extent.equals",k),n("ol.extent.extend",G),n("ol.extent.getArea",W),n("ol.extent.getBottomLeft",X),n("ol.extent.getBottomRight",Y),n("ol.extent.getCenter",z),n("ol.extent.getHeight",H),n("ol.extent.getIntersection",$),n("ol.extent.getSize",function(t){return[t[2]-t[0],t[3]-t[1]]}),n("ol.extent.getTopLeft",q),n("ol.extent.getTopRight",Z),n("ol.extent.getWidth",J),n("ol.extent.intersects",Q),n("ol.extent.isEmpty",tt),n("ol.extent.applyTransform",it),n("ol.Feature",uh),uh.prototype.clone=uh.prototype.clone,uh.prototype.getGeometry=uh.prototype.U,uh.prototype.getId=uh.prototype.an,uh.prototype.getGeometryName=uh.prototype.sl,uh.prototype.getStyle=uh.prototype.bn,uh.prototype.getStyleFunction=uh.prototype.ib,uh.prototype.setGeometry=uh.prototype.Va,uh.prototype.setStyle=uh.prototype.sg,uh.prototype.setId=uh.prototype.qc,uh.prototype.setGeometryName=uh.prototype.Lc,n("ol.featureloader.xhr",Bu),n("ol.Geolocation",ch),ch.prototype.getAccuracy=ch.prototype.el,ch.prototype.getAccuracyGeometry=ch.prototype.fl,ch.prototype.getAltitude=ch.prototype.gl,ch.prototype.getAltitudeAccuracy=ch.prototype.hl,ch.prototype.getHeading=ch.prototype.cn,ch.prototype.getPosition=ch.prototype.dn,ch.prototype.getProjection=ch.prototype.mi,ch.prototype.getSpeed=ch.prototype.Ol,ch.prototype.getTracking=ch.prototype.ni,ch.prototype.getTrackingOptions=ch.prototype.ai,ch.prototype.setProjection=ch.prototype.oi,ch.prototype.setTracking=ch.prototype.Ue,ch.prototype.setTrackingOptions=ch.prototype.Rj,n("ol.Graticule",mh),mh.prototype.getMap=mh.prototype.gn,mh.prototype.getMeridians=mh.prototype.Cl,mh.prototype.getParallels=mh.prototype.Jl,mh.prototype.setMap=mh.prototype.setMap,n("ol.has.DEVICE_PIXEL_RATIO",qe),n("ol.has.CANVAS",Je),n("ol.has.DEVICE_ORIENTATION",Qe),n("ol.has.GEOLOCATION",ti),n("ol.has.TOUCH",ei),n("ol.has.WEBGL",We),Sh.prototype.getImage=Sh.prototype.Y,Sh.prototype.load=Sh.prototype.load,Ih.prototype.getImage=Ih.prototype.Y,n("ol.inherits",s),n("ol.interaction.defaults",$n),n("ol.Kinetic",Xr),n("ol.loadingstrategy.all",Vm),n("ol.loadingstrategy.bbox",function(t){return[t]}),n("ol.loadingstrategy.tile",function(t){return function(e,i){i=t.Dc(i),e=re(t,e,i);var o=[];for((i=[i,0,0])[1]=e.fa;i[1]<=e.la;++i[1])for(i[2]=e.ea;i[2]<=e.ka;++i[2])o.push(t.Ma(i));return o}}),n("ol.Map",Fp),Ue.prototype.originalEvent=Ue.prototype.originalEvent,Ue.prototype.pixel=Ue.prototype.pixel,Ue.prototype.coordinate=Ue.prototype.coordinate,Ue.prototype.dragging=Ue.prototype.dragging,Ge.prototype.map=Ge.prototype.map,Ge.prototype.frameState=Ge.prototype.frameState,n("ol.Object",Ie),Ie.prototype.get=Ie.prototype.get,Ie.prototype.getKeys=Ie.prototype.P,Ie.prototype.getProperties=Ie.prototype.L,Ie.prototype.set=Ie.prototype.set,Ie.prototype.setProperties=Ie.prototype.H,Ie.prototype.unset=Ie.prototype.R,Oe.prototype.key=Oe.prototype.key,Oe.prototype.oldValue=Oe.prototype.oldValue,n("ol.Observable",Pe),n("ol.Observable.unByKey",function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)be(t[e]);else be(t)}),Pe.prototype.changed=Pe.prototype.u,Pe.prototype.dispatchEvent=Pe.prototype.b,Pe.prototype.getRevision=Pe.prototype.K,Pe.prototype.on=Pe.prototype.I,Pe.prototype.once=Pe.prototype.once,Pe.prototype.un=Pe.prototype.J,n("ol.Overlay",Np),Np.prototype.getElement=Np.prototype.Rd,Np.prototype.getId=Np.prototype.nn,Np.prototype.getMap=Np.prototype.Ve,Np.prototype.getOffset=Np.prototype.Xh,Np.prototype.getPosition=Np.prototype.pi,Np.prototype.getPositioning=Np.prototype.Yh,Np.prototype.setElement=Np.prototype.Hj,Np.prototype.setMap=Np.prototype.setMap,Np.prototype.setOffset=Np.prototype.Mj,Np.prototype.setPosition=Np.prototype.We,Np.prototype.setPositioning=Np.prototype.Pj,n("ol.PluggableMap",Ir),Ir.prototype.addControl=Ir.prototype.Mf,Ir.prototype.addInteraction=Ir.prototype.Nf,Ir.prototype.addLayer=Ir.prototype.xe,Ir.prototype.addOverlay=Ir.prototype.ye,Ir.prototype.forEachFeatureAtPixel=Ir.prototype.Tc,Ir.prototype.getFeaturesAtPixel=Ir.prototype.Xf,Ir.prototype.forEachLayerAtPixel=Ir.prototype.tg,Ir.prototype.hasFeatureAtPixel=Ir.prototype.ng,Ir.prototype.getEventCoordinate=Ir.prototype.Sd,Ir.prototype.getEventPixel=Ir.prototype.ud,Ir.prototype.getTarget=Ir.prototype.Xd,Ir.prototype.getTargetElement=Ir.prototype.Cc,Ir.prototype.getCoordinateFromPixel=Ir.prototype.Ra,Ir.prototype.getControls=Ir.prototype.Wf,Ir.prototype.getOverlays=Ir.prototype.gg,Ir.prototype.getOverlayById=Ir.prototype.fg,Ir.prototype.getInteractions=Ir.prototype.bg,Ir.prototype.getLayerGroup=Ir.prototype.hc,Ir.prototype.getLayers=Ir.prototype.Xe,Ir.prototype.getPixelFromCoordinate=Ir.prototype.Ia,Ir.prototype.getSize=Ir.prototype.Cb,Ir.prototype.getView=Ir.prototype.aa,Ir.prototype.getViewport=Ir.prototype.kg,Ir.prototype.renderSync=Ir.prototype.dh,Ir.prototype.render=Ir.prototype.render,Ir.prototype.removeControl=Ir.prototype.Xg,Ir.prototype.removeInteraction=Ir.prototype.Zg,Ir.prototype.removeLayer=Ir.prototype.$g,Ir.prototype.removeOverlay=Ir.prototype.ah,Ir.prototype.setLayerGroup=Ir.prototype.zf,Ir.prototype.setSize=Ir.prototype.be,Ir.prototype.setTarget=Ir.prototype.Ad,Ir.prototype.setView=Ir.prototype.jh,Ir.prototype.updateSize=Ir.prototype.Oc,n("ol.proj.METERS_PER_UNIT",ut),n("ol.proj.setProj4",function(t){ct=t}),n("ol.proj.getPointResolution",Mt),n("ol.proj.addEquivalentProjections",Lt),n("ol.proj.addProjection",At),n("ol.proj.addCoordinateTransforms",Ft),n("ol.proj.fromLonLat",function(t,e){return Vt(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}),n("ol.proj.toLonLat",function(t,e){return(-180>(e=(t=Vt(t,void 0!==e?e:"EPSG:3857","EPSG:4326"))[0])||180<e)&&(t[0]=b(e+180,360)-180),t}),n("ol.proj.get",Dt),n("ol.proj.equivalent",jt),n("ol.proj.getTransform",kt),n("ol.proj.transform",Vt),n("ol.proj.transformExtent",Wt),n("ol.render.toContext",function(t,e){var i=t.canvas,o=e||{};return e=o.pixelRatio||qe,(o=o.size)&&(i.width=o[0]*e,i.height=o[1]*e,i.style.width=o[0]+"px",i.style.height=o[1]+"px"),new Ts(t,e,i=[0,0,i.width,i.height],o=xo([1,0,0,1,0,0],e,e),0)}),n("ol.size.toSize",T),n("ol.Sphere",at),at.prototype.geodesicArea=at.prototype.a,at.prototype.haversineDistance=at.prototype.b,n("ol.Sphere.getLength",function t(e,i){var o=i||{},r=o.radius||6371008.8;o=o.projection||"EPSG:3857";var n,s=(e=e.clone().mb(o,"EPSG:4326")).S();switch(o=0,s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=ht(i=e.W(),r);break;case"MultiLineString":case"Polygon":for(i=e.W(),e=0,s=i.length;e<s;++e)o+=ht(i[e],r);break;case"MultiPolygon":for(i=e.W(),e=0,s=i.length;e<s;++e){var a=i[e],h=0;for(n=a.length;h<n;++h)o+=ht(a[h],r)}break;case"GeometryCollection":for(r=e.vd(),e=0,s=r.length;e<s;++e)o+=t(r[e],i);break;default:throw Error("Unsupported geometry type: "+s)}return o}),n("ol.Sphere.getArea",function t(e,i){var o=i||{},r=o.radius||6371008.8;o=o.projection||"EPSG:3857";var n,s=(e=e.clone().mb(o,"EPSG:4326")).S();switch(o=0,s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(i=e.W(),o=Math.abs(pt(i[0],r)),e=1,s=i.length;e<s;++e)o-=Math.abs(pt(i[e],r));break;case"MultiPolygon":for(i=e.W(),e=0,s=i.length;e<s;++e){var a=i[e];o+=Math.abs(pt(a[0],r));var h=1;for(n=a.length;h<n;++h)o-=Math.abs(pt(a[h],r))}break;case"GeometryCollection":for(r=e.vd(),e=0,s=r.length;e<s;++e)o+=t(r[e],i);break;default:throw Error("Unsupported geometry type: "+s)}return o}),n("ol.style.iconImageCache",zs),Th.prototype.getTileCoord=Th.prototype.i,Th.prototype.load=Th.prototype.load,n("ol.tilegrid.createXYZ",he),Xp.prototype.getExtent=Xp.prototype.G,Xp.prototype.getFormat=Xp.prototype.qn,Xp.prototype.getFeatures=Xp.prototype.pn,Xp.prototype.getProjection=Xp.prototype.rn,Xp.prototype.setExtent=Xp.prototype.ri,Xp.prototype.setFeatures=Xp.prototype.Ij,Xp.prototype.setProjection=Xp.prototype.vg,Xp.prototype.setLoader=Xp.prototype.ug,n("ol.View",pr),pr.prototype.animate=pr.prototype.animate,pr.prototype.getAnimating=pr.prototype.Ac,pr.prototype.getInteracting=pr.prototype.Vh,pr.prototype.cancelAnimations=pr.prototype.rd,pr.prototype.constrainCenter=pr.prototype.Sc,pr.prototype.constrainResolution=pr.prototype.constrainResolution,pr.prototype.constrainRotation=pr.prototype.constrainRotation,pr.prototype.getCenter=pr.prototype.xa,pr.prototype.calculateExtent=pr.prototype.qd,pr.prototype.getMaxResolution=pr.prototype.sn,pr.prototype.getMinResolution=pr.prototype.vn,pr.prototype.getMaxZoom=pr.prototype.tn,pr.prototype.setMaxZoom=pr.prototype.Cq,pr.prototype.getMinZoom=pr.prototype.wn,pr.prototype.setMinZoom=pr.prototype.Dq,pr.prototype.getProjection=pr.prototype.xn,pr.prototype.getResolution=pr.prototype.Pa,pr.prototype.getResolutions=pr.prototype.yn,pr.prototype.getResolutionForExtent=pr.prototype.Je,pr.prototype.getRotation=pr.prototype.Sa,pr.prototype.getZoom=pr.prototype.lg,pr.prototype.getZoomForResolution=pr.prototype.Me,pr.prototype.getResolutionForZoom=pr.prototype.$h,pr.prototype.fit=pr.prototype.Uf,pr.prototype.centerOn=pr.prototype.Nk,pr.prototype.rotate=pr.prototype.rotate,pr.prototype.setCenter=pr.prototype.ub,pr.prototype.setResolution=pr.prototype.gd,pr.prototype.setRotation=pr.prototype.ce,pr.prototype.setZoom=pr.prototype.Tj,n("ol.xml.getAllTextContent",xu),n("ol.xml.parse",Tu),Zh.prototype.getGL=Zh.prototype.yp,Zh.prototype.useProgram=Zh.prototype.cd,n("ol.tilegrid.TileGrid",te),te.prototype.forEachTileCoord=te.prototype.Vf,te.prototype.getMaxZoom=te.prototype.mj,te.prototype.getMinZoom=te.prototype.nj,te.prototype.getOrigin=te.prototype.Ic,te.prototype.getResolution=te.prototype.Ta,te.prototype.getResolutions=te.prototype.oj,te.prototype.getTileCoordExtent=te.prototype.Ma,te.prototype.getTileCoordForCoordAndResolution=te.prototype.Le,te.prototype.getTileCoordForCoordAndZ=te.prototype.jg,te.prototype.getTileSize=te.prototype.Za,te.prototype.getZForResolution=te.prototype.Dc,n("ol.tilegrid.WMTS",Ix),Ix.prototype.getMatrixIds=Ix.prototype.v,n("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",Mx),n("ol.style.AtlasManager",hp),n("ol.style.Circle",ih),ih.prototype.setRadius=ih.prototype.fd,n("ol.style.Fill",oh),oh.prototype.clone=oh.prototype.clone,oh.prototype.getColor=oh.prototype.g,oh.prototype.setColor=oh.prototype.c,n("ol.style.Icon",sd),sd.prototype.clone=sd.prototype.clone,sd.prototype.getAnchor=sd.prototype.Vc,sd.prototype.getColor=sd.prototype.np,sd.prototype.getImage=sd.prototype.Y,sd.prototype.getOrigin=sd.prototype.bd,sd.prototype.getSrc=sd.prototype.op,sd.prototype.getSize=sd.prototype.oc,sd.prototype.load=sd.prototype.load,Xs.prototype.setSize=Xs.prototype.c,n("ol.style.Image",Qa),Qa.prototype.getOpacity=Qa.prototype.hf,Qa.prototype.getRotateWithView=Qa.prototype.jf,Qa.prototype.getRotation=Qa.prototype.kf,Qa.prototype.getScale=Qa.prototype.lf,Qa.prototype.getSnapToPixel=Qa.prototype.Ke,Qa.prototype.setOpacity=Qa.prototype.Ed,Qa.prototype.setRotation=Qa.prototype.mf,Qa.prototype.setScale=Qa.prototype.Fd,n("ol.style.RegularShape",th),th.prototype.clone=th.prototype.clone,th.prototype.getAnchor=th.prototype.Vc,th.prototype.getAngle=th.prototype.ij,th.prototype.getFill=th.prototype.Fa,th.prototype.getImage=th.prototype.Y,th.prototype.getOrigin=th.prototype.bd,th.prototype.getPoints=th.prototype.jj,th.prototype.getRadius=th.prototype.kj,th.prototype.getRadius2=th.prototype.Zh,th.prototype.getSize=th.prototype.oc,th.prototype.getStroke=th.prototype.Ga,n("ol.style.Stroke",rh),rh.prototype.clone=rh.prototype.clone,rh.prototype.getColor=rh.prototype.pp,rh.prototype.getLineCap=rh.prototype.vl,rh.prototype.getLineDash=rh.prototype.qp,rh.prototype.getLineDashOffset=rh.prototype.wl,rh.prototype.getLineJoin=rh.prototype.xl,rh.prototype.getMiterLimit=rh.prototype.Dl,rh.prototype.getWidth=rh.prototype.rp,rh.prototype.setColor=rh.prototype.sp,rh.prototype.setLineCap=rh.prototype.yq,rh.prototype.setLineDash=rh.prototype.setLineDash,rh.prototype.setLineDashOffset=rh.prototype.zq,rh.prototype.setLineJoin=rh.prototype.Aq,rh.prototype.setMiterLimit=rh.prototype.Eq,rh.prototype.setWidth=rh.prototype.Kq,n("ol.style.Style",nh),nh.prototype.clone=nh.prototype.clone,nh.prototype.getRenderer=nh.prototype.Ie,nh.prototype.setRenderer=nh.prototype.Iq,nh.prototype.getGeometry=nh.prototype.U,nh.prototype.getGeometryFunction=nh.prototype.rl,nh.prototype.getFill=nh.prototype.Fa,nh.prototype.setFill=nh.prototype.yf,nh.prototype.getImage=nh.prototype.Y,nh.prototype.setImage=nh.prototype.ih,nh.prototype.getStroke=nh.prototype.Ga,nh.prototype.setStroke=nh.prototype.Af,nh.prototype.getText=nh.prototype.Ka,nh.prototype.setText=nh.prototype.Hd,nh.prototype.getZIndex=nh.prototype.Ba,nh.prototype.setGeometry=nh.prototype.Va,nh.prototype.setZIndex=nh.prototype.$b,n("ol.style.Text",vh),vh.prototype.clone=vh.prototype.clone,vh.prototype.getOverflow=vh.prototype.Gl,vh.prototype.getFont=vh.prototype.pl,vh.prototype.getMaxAngle=vh.prototype.Bl,vh.prototype.getPlacement=vh.prototype.Kl,vh.prototype.getOffsetX=vh.prototype.El,vh.prototype.getOffsetY=vh.prototype.Fl,vh.prototype.getFill=vh.prototype.Fa,vh.prototype.getRotateWithView=vh.prototype.tp,vh.prototype.getRotation=vh.prototype.up,vh.prototype.getScale=vh.prototype.vp,vh.prototype.getStroke=vh.prototype.Ga,vh.prototype.getText=vh.prototype.Ka,vh.prototype.getTextAlign=vh.prototype.Ql,vh.prototype.getTextBaseline=vh.prototype.Rl,vh.prototype.getBackgroundFill=vh.prototype.jl,vh.prototype.getBackgroundStroke=vh.prototype.kl,vh.prototype.getPadding=vh.prototype.Il,vh.prototype.setOverflow=vh.prototype.Fq,vh.prototype.setFont=vh.prototype.Jj,vh.prototype.setMaxAngle=vh.prototype.Bq,vh.prototype.setOffsetX=vh.prototype.Nj,vh.prototype.setOffsetY=vh.prototype.Oj,vh.prototype.setPlacement=vh.prototype.Hq,vh.prototype.setFill=vh.prototype.yf,vh.prototype.setRotation=vh.prototype.wp,vh.prototype.setScale=vh.prototype.lj,vh.prototype.setStroke=vh.prototype.Af,vh.prototype.setText=vh.prototype.Hd,vh.prototype.setTextAlign=vh.prototype.Qj,vh.prototype.setTextBaseline=vh.prototype.Jq,vh.prototype.setBackgroundFill=vh.prototype.sq,vh.prototype.setBackgroundStroke=vh.prototype.tq,vh.prototype.setPadding=vh.prototype.Gq,n("ol.source.BingMaps",Mb),n("ol.source.BingMaps.TOS_ATTRIBUTION",'<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),Mb.prototype.getApiKey=Mb.prototype.ca,Mb.prototype.getImagerySet=Mb.prototype.ua,n("ol.source.CartoDB",Ab),Ab.prototype.getConfig=Ab.prototype.nl,Ab.prototype.updateConfig=Ab.prototype.Sq,Ab.prototype.setConfig=Ab.prototype.uq,n("ol.source.Cluster",Nb),Nb.prototype.getDistance=Nb.prototype.Eo,Nb.prototype.getSource=Nb.prototype.Fo,Nb.prototype.setDistance=Nb.prototype.vq,n("ol.source.Image",Gb),Vb.prototype.image=Vb.prototype.image,n("ol.source.ImageArcGISRest",Kb),Kb.prototype.getParams=Kb.prototype.Ho,Kb.prototype.getImageLoadFunction=Kb.prototype.Go,Kb.prototype.getUrl=Kb.prototype.Io,Kb.prototype.setImageLoadFunction=Kb.prototype.Jo,Kb.prototype.setUrl=Kb.prototype.Ko,Kb.prototype.updateParams=Kb.prototype.Lo,n("ol.source.ImageCanvas",Hb),n("ol.source.ImageMapGuide",$b),$b.prototype.getParams=$b.prototype.No,$b.prototype.getImageLoadFunction=$b.prototype.Mo,$b.prototype.updateParams=$b.prototype.Po,$b.prototype.setImageLoadFunction=$b.prototype.Oo,n("ol.source.ImageStatic",qb),n("ol.source.ImageVector",Zb),Zb.prototype.getSource=Zb.prototype.Qo,Zb.prototype.getStyle=Zb.prototype.Ro,Zb.prototype.getStyleFunction=Zb.prototype.ib,Zb.prototype.setStyle=Zb.prototype.aj,n("ol.source.ImageWMS",Jb),Jb.prototype.getGetFeatureInfoUrl=Jb.prototype.Uo,Jb.prototype.getParams=Jb.prototype.Wo,Jb.prototype.getImageLoadFunction=Jb.prototype.Vo,Jb.prototype.getUrl=Jb.prototype.Xo,Jb.prototype.setImageLoadFunction=Jb.prototype.Yo,Jb.prototype.setUrl=Jb.prototype.Zo,Jb.prototype.updateParams=Jb.prototype.$o,n("ol.source.OSM",ix),n("ol.source.OSM.ATTRIBUTION",'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'),n("ol.source.Raster",ox),ox.prototype.setOperation=ox.prototype.s,nx.prototype.extent=nx.prototype.extent,nx.prototype.resolution=nx.prototype.resolution,nx.prototype.data=nx.prototype.data,n("ol.source.Source",Wm),Wm.prototype.getAttributions=Wm.prototype.za,Wm.prototype.getLogo=Wm.prototype.Aa,Wm.prototype.getProjection=Wm.prototype.Da,Wm.prototype.getState=Wm.prototype.getState,Wm.prototype.refresh=Wm.prototype.sa,Wm.prototype.setAttributions=Wm.prototype.va,n("ol.source.Stamen",hx),n("ol.source.Tile",bb),bb.prototype.getTileGrid=bb.prototype.jb,Tb.prototype.tile=Tb.prototype.tile,n("ol.source.TileArcGISRest",cx),cx.prototype.getParams=cx.prototype.o,cx.prototype.updateParams=cx.prototype.B,n("ol.source.TileDebug",dx),n("ol.source.TileImage",Cb),Cb.prototype.setRenderReprojectionEdges=Cb.prototype.Qb,Cb.prototype.setTileGridForProjection=Cb.prototype.Rb,n("ol.source.TileJSON",gx),gx.prototype.getTileJSON=gx.prototype.Sl,n("ol.source.TileUTFGrid",vx),vx.prototype.getTemplate=vx.prototype.Pl,vx.prototype.forDataAtCoordinateAndResolution=vx.prototype.al,n("ol.source.TileWMS",bx),bx.prototype.getGetFeatureInfoUrl=bx.prototype.hp,bx.prototype.getParams=bx.prototype.ip,bx.prototype.updateParams=bx.prototype.jp,wb.prototype.getTileLoadFunction=wb.prototype.yb,wb.prototype.getTileUrlFunction=wb.prototype.zb,wb.prototype.getUrls=wb.prototype.Ab,wb.prototype.setTileLoadFunction=wb.prototype.Fb,wb.prototype.setTileUrlFunction=wb.prototype.hb,wb.prototype.setUrl=wb.prototype.rb,wb.prototype.setUrls=wb.prototype.vb,n("ol.source.Vector",zm),zm.prototype.addFeature=zm.prototype.Gb,zm.prototype.addFeatures=zm.prototype.Qc,zm.prototype.clear=zm.prototype.clear,zm.prototype.forEachFeature=zm.prototype.Lh,zm.prototype.forEachFeatureInExtent=zm.prototype.ec,zm.prototype.forEachFeatureIntersectingExtent=zm.prototype.Mh,zm.prototype.getFeaturesCollection=zm.prototype.Th,zm.prototype.getFeatures=zm.prototype.ee,zm.prototype.getFeaturesAtCoordinate=zm.prototype.Sh,zm.prototype.getFeaturesInExtent=zm.prototype.Yf,zm.prototype.getClosestFeatureToCoordinate=zm.prototype.Oh,zm.prototype.getExtent=zm.prototype.G,zm.prototype.getFeatureById=zm.prototype.Rh,zm.prototype.getFormat=zm.prototype.ej,zm.prototype.getUrl=zm.prototype.fj,zm.prototype.removeLoadedExtent=zm.prototype.Cj,zm.prototype.removeFeature=zm.prototype.Lb,zm.prototype.setLoader=zm.prototype.hj,Zm.prototype.feature=Zm.prototype.feature,n("ol.source.VectorTile",Px),Px.prototype.clear=Px.prototype.clear,n("ol.source.WMTS",Lx),Lx.prototype.getDimensions=Lx.prototype.ol,Lx.prototype.getFormat=Lx.prototype.kp,Lx.prototype.getLayer=Lx.prototype.lp,Lx.prototype.getMatrixSet=Lx.prototype.Al,Lx.prototype.getRequestEncoding=Lx.prototype.Nl,Lx.prototype.getStyle=Lx.prototype.mp,Lx.prototype.getVersion=Lx.prototype.Ul,Lx.prototype.updateDimensions=Lx.prototype.Tq,n("ol.source.WMTS.optionsFromCapabilities",function(t,e){var i=$t(t.Contents.Layer,function(t){return t.Identifier==e.layer});if(null===i)return null;var o=t.Contents.TileMatrixSet,r=1<i.TileMatrixSetLink.length?Jt(i.TileMatrixSetLink,"projection"in e?function(t){var i=$t(o,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,r=Dt(i.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Dt(i),n=Dt(e.projection);return r&&n?jt(r,n):i==e.projection}:function(t){return t.TileMatrixSet==e.matrixSet}):0;0>r&&(r=0);var n=i.TileMatrixSetLink[r].TileMatrixSet,s=i.TileMatrixSetLink[r].TileMatrixSetLimits,a=i.Format[0];"format"in e&&(a=e.format),0>(r=Jt(i.Style,function(t){return"style"in e?t.Title==e.style:t.isDefault}))&&(r=0),r=i.Style[r].Identifier;var h={};"Dimension"in i&&i.Dimension.forEach(function(t){var e=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),h[e]=i});var l,p=$t(t.Contents.TileMatrixSet,function(t){return t.Identifier==n}),u=p.SupportedCRS;if(u&&(l=Dt(u.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Dt(u)),"projection"in e&&(!(u=Dt(e.projection))||l&&!jt(u,l)||(l=u)),void 0!==(u=i.WGS84BoundingBox)){var c=Dt("EPSG:4326").G();c=u[0]==c[0]&&u[2]==c[2];var f=Wt(u,"EPSG:4326",l);(u=l.G())&&(M(u,f)||(f=void 0))}s=Mx(p,f,s);var d=[];if(p=void 0!==(p=e.requestEncoding)?p:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(f=0,u=(t=t.OperationsMetadata.GetTile.DCP.HTTP.Get).length;f<u;++f)if(t[f].Constraint){var y=$t(t[f].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===p&&(p=y[0]),"KVP"!==p)break;zt(y,"KVP")&&d.push(t[f].href)}else t[f].href&&(p="KVP",d.push(t[f].href));return 0===d.length&&(p="REST",i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(a=t.format,d.push(t.template))})),{urls:d,layer:e.layer,matrixSet:n,format:a,projection:l,requestEncoding:p,tileGrid:s,style:r,dimensions:h,wrapX:c,crossOrigin:e.crossOrigin}}),n("ol.source.XYZ",Lb),n("ol.source.Zoomify",Ox),n("ol.renderer.webgl.ImageLayer",wp),n("ol.renderer.webgl.Map",Cp),n("ol.renderer.webgl.TileLayer",Ap),n("ol.renderer.webgl.VectorLayer",Op),n("ol.renderer.canvas.ImageLayer",Ws),n("ol.renderer.canvas.Map",ta),n("ol.renderer.canvas.TileLayer",ia),n("ol.renderer.canvas.VectorLayer",Va),n("ol.renderer.canvas.VectorTileLayer",Wa),Jn.prototype.vectorContext=Jn.prototype.vectorContext,Jn.prototype.frameState=Jn.prototype.frameState,Jn.prototype.context=Jn.prototype.context,Jn.prototype.glContext=Jn.prototype.glContext,Ky.prototype.get=Ky.prototype.get,Ky.prototype.getExtent=Ky.prototype.G,Ky.prototype.getId=Ky.prototype.Ao,Ky.prototype.getGeometry=Ky.prototype.U,Ky.prototype.getProperties=Ky.prototype.Bo,Ky.prototype.getType=Ky.prototype.S,n("ol.render.VectorContext",Ss),_p.prototype.setStyle=_p.prototype.Dd,_p.prototype.drawGeometry=_p.prototype.Hb,_p.prototype.drawFeature=_p.prototype.Ce,Ts.prototype.drawCircle=Ts.prototype.cc,Ts.prototype.setStyle=Ts.prototype.Dd,Ts.prototype.drawGeometry=Ts.prototype.Hb,Ts.prototype.drawFeature=Ts.prototype.Ce,n("ol.proj.common.add",Xt),n("ol.proj.Projection",ft),ft.prototype.getCode=ft.prototype.ml,ft.prototype.getExtent=ft.prototype.G,ft.prototype.getUnits=ft.prototype.zo,ft.prototype.getMetersPerUnit=ft.prototype.Bc,ft.prototype.getWorldExtent=ft.prototype.Vl,ft.prototype.getAxisOrientation=ft.prototype.il,ft.prototype.isGlobal=ft.prototype.Gm,ft.prototype.setGlobal=ft.prototype.xq,ft.prototype.setExtent=ft.prototype.Si,ft.prototype.setWorldExtent=ft.prototype.Sj,ft.prototype.setGetPointResolution=ft.prototype.wq,n("ol.proj.Units.METERS_PER_UNIT",ut),n("ol.layer.Base",xr),xr.prototype.getExtent=xr.prototype.G,xr.prototype.getMaxResolution=xr.prototype.lc,xr.prototype.getMinResolution=xr.prototype.mc,xr.prototype.getOpacity=xr.prototype.nc,xr.prototype.getVisible=xr.prototype.Jb,xr.prototype.getZIndex=xr.prototype.Ba,xr.prototype.setExtent=xr.prototype.Fc,xr.prototype.setMaxResolution=xr.prototype.Mc,xr.prototype.setMinResolution=xr.prototype.Nc,xr.prototype.setOpacity=xr.prototype.Gc,xr.prototype.setVisible=xr.prototype.Hc,xr.prototype.setZIndex=xr.prototype.$b,n("ol.layer.Group",Sr),Sr.prototype.getLayers=Sr.prototype.Cd,Sr.prototype.setLayers=Sr.prototype.Qi,n("ol.layer.Heatmap",Q_),Q_.prototype.getBlur=Q_.prototype.Nh,Q_.prototype.getGradient=Q_.prototype.Uh,Q_.prototype.getRadius=Q_.prototype.Ri,Q_.prototype.setBlur=Q_.prototype.Fj,Q_.prototype.setGradient=Q_.prototype.Lj,Q_.prototype.setRadius=Q_.prototype.fd,n("ol.layer.Image",rb),rb.prototype.getSource=rb.prototype.ha,n("ol.layer.Layer",Nr),Nr.prototype.getSource=Nr.prototype.ha,Nr.prototype.setMap=Nr.prototype.setMap,Nr.prototype.setSource=Nr.prototype.hd,n("ol.layer.Tile",nb),nb.prototype.getPreload=nb.prototype.c,nb.prototype.getSource=nb.prototype.ha,nb.prototype.setPreload=nb.prototype.j,nb.prototype.getUseInterimTilesOnError=nb.prototype.i,nb.prototype.setUseInterimTilesOnError=nb.prototype.C,n("ol.layer.Vector",Um),Um.prototype.getSource=Um.prototype.ha,Um.prototype.getStyle=Um.prototype.B,Um.prototype.getStyleFunction=Um.prototype.ib,Um.prototype.setStyle=Um.prototype.j,n("ol.layer.VectorTile",sb),sb.prototype.getPreload=sb.prototype.c,sb.prototype.getUseInterimTilesOnError=sb.prototype.i,sb.prototype.setPreload=sb.prototype.T,sb.prototype.setUseInterimTilesOnError=sb.prototype.O,sb.prototype.getSource=sb.prototype.ha,n("ol.interaction.DoubleClickZoom",qr),n("ol.interaction.DoubleClickZoom.handleEvent",Zr),n("ol.interaction.DragAndDrop",Im),n("ol.interaction.DragAndDrop.handleEvent",lo),Nm.prototype.features=Nm.prototype.features,Nm.prototype.file=Nm.prototype.file,Nm.prototype.projection=Nm.prototype.projection,n("ol.interaction.DragBox",Sn),Sn.prototype.getGeometry=Sn.prototype.U,Ln.prototype.coordinate=Ln.prototype.coordinate,Ln.prototype.mapBrowserEvent=Ln.prototype.mapBrowserEvent,n("ol.interaction.DragPan",cn),n("ol.interaction.DragRotate",gn),n("ol.interaction.DragRotateAndZoom",Dm),n("ol.interaction.DragZoom",An),n("ol.interaction.Draw",Jm),n("ol.interaction.Draw.handleEvent",Qm),Jm.prototype.removeLastPoint=Jm.prototype.nq,Jm.prototype.finishDrawing=Jm.prototype.Pd,Jm.prototype.extend=Jm.prototype.Zn,n("ol.interaction.Draw.createRegularPolygon",function(t,e){return function(i,o){var r=i[0];i=i[1];var n=Math.sqrt(eo(r,i));return lr(o=o||hr(new Rm(r),t),r,n,e||Math.atan((i[1]-r[1])/(i[0]-r[0]))),o}}),n("ol.interaction.Draw.createBox",function(){return function(t,e){return t=w(t),(e=e||new nr(null)).na([[X(t),Y(t),Z(t),q(t),X(t)]]),e}}),c_.prototype.feature=c_.prototype.feature,n("ol.interaction.Extent",f_),f_.prototype.getExtent=f_.prototype.G,f_.prototype.setExtent=f_.prototype.f,E_.prototype.extent=E_.prototype.extent,n("ol.interaction.Interaction",zr),zr.prototype.getActive=zr.prototype.c,zr.prototype.getMap=zr.prototype.i,zr.prototype.setActive=zr.prototype.Ha,n("ol.interaction.KeyboardPan",On),n("ol.interaction.KeyboardPan.handleEvent",Fn),n("ol.interaction.KeyboardZoom",Nn),n("ol.interaction.KeyboardZoom.handleEvent",Dn),n("ol.interaction.Modify",S_),n("ol.interaction.Modify.handleEvent",L_),S_.prototype.removePoint=S_.prototype.Dj,D_.prototype.features=D_.prototype.features,D_.prototype.mapBrowserEvent=D_.prototype.mapBrowserEvent,n("ol.interaction.MouseWheelZoom",jn),n("ol.interaction.MouseWheelZoom.handleEvent",kn),jn.prototype.setMouseAnchor=jn.prototype.V,n("ol.interaction.PinchRotate",Bn),n("ol.interaction.PinchZoom",Yn),n("ol.interaction.Pointer",ln),n("ol.interaction.Pointer.handleEvent",un),n("ol.interaction.Select",j_),j_.prototype.getFeatures=j_.prototype.lo,j_.prototype.getHitTolerance=j_.prototype.mo,j_.prototype.getLayer=j_.prototype.no,n("ol.interaction.Select.handleEvent",k_),j_.prototype.setHitTolerance=j_.prototype.po,j_.prototype.setMap=j_.prototype.setMap,G_.prototype.selected=G_.prototype.selected,G_.prototype.deselected=G_.prototype.deselected,G_.prototype.mapBrowserEvent=G_.prototype.mapBrowserEvent,n("ol.interaction.Snap",B_),B_.prototype.addFeature=B_.prototype.Gb,B_.prototype.removeFeature=B_.prototype.Lb,n("ol.interaction.Translate",Y_),Y_.prototype.getHitTolerance=Y_.prototype.B,Y_.prototype.setHitTolerance=Y_.prototype.T,J_.prototype.features=J_.prototype.features,J_.prototype.coordinate=J_.prototype.coordinate,n("ol.geom.Circle",Rm),Rm.prototype.clone=Rm.prototype.clone,Rm.prototype.getCenter=Rm.prototype.xa,Rm.prototype.getRadius=Rm.prototype.Bd,Rm.prototype.getType=Rm.prototype.S,Rm.prototype.intersectsExtent=Rm.prototype.$a,Rm.prototype.setCenter=Rm.prototype.ub,Rm.prototype.setCenterAndRadius=Rm.prototype.hh,Rm.prototype.setRadius=Rm.prototype.fd,Rm.prototype.transform=Rm.prototype.mb,n("ol.geom.Geometry",wo),wo.prototype.getClosestPoint=wo.prototype.Ib,wo.prototype.intersectsCoordinate=wo.prototype.Bb,wo.prototype.getExtent=wo.prototype.G,wo.prototype.rotate=wo.prototype.rotate,wo.prototype.scale=wo.prototype.scale,wo.prototype.simplify=wo.prototype.Sb,wo.prototype.transform=wo.prototype.mb,n("ol.geom.GeometryCollection",Rf),Rf.prototype.clone=Rf.prototype.clone,Rf.prototype.getGeometries=Rf.prototype.vd,Rf.prototype.getType=Rf.prototype.S,Rf.prototype.intersectsExtent=Rf.prototype.$a,Rf.prototype.setGeometries=Rf.prototype.Kj,Rf.prototype.applyTransform=Rf.prototype.Rc,Rf.prototype.translate=Rf.prototype.translate,n("ol.geom.LinearRing",Yo),Yo.prototype.clone=Yo.prototype.clone,Yo.prototype.getArea=Yo.prototype.Vn,Yo.prototype.getCoordinates=Yo.prototype.W,Yo.prototype.getType=Yo.prototype.S,Yo.prototype.setCoordinates=Yo.prototype.na,n("ol.geom.LineString",yh),yh.prototype.appendCoordinate=yh.prototype.Fk,yh.prototype.clone=yh.prototype.clone,yh.prototype.forEachSegment=yh.prototype.dl,yh.prototype.getCoordinateAtM=yh.prototype.Tn,yh.prototype.getCoordinates=yh.prototype.W,yh.prototype.getCoordinateAt=yh.prototype.Ph,yh.prototype.getLength=yh.prototype.Un,yh.prototype.getType=yh.prototype.S,yh.prototype.intersectsExtent=yh.prototype.$a,yh.prototype.setCoordinates=yh.prototype.na,n("ol.geom.MultiLineString",Hu),Hu.prototype.appendLineString=Hu.prototype.Gk,Hu.prototype.clone=Hu.prototype.clone,Hu.prototype.getCoordinateAtM=Hu.prototype.Wn,Hu.prototype.getCoordinates=Hu.prototype.W,Hu.prototype.getLineString=Hu.prototype.yl,Hu.prototype.getLineStrings=Hu.prototype.wd,Hu.prototype.getType=Hu.prototype.S,Hu.prototype.intersectsExtent=Hu.prototype.$a,Hu.prototype.setCoordinates=Hu.prototype.na,n("ol.geom.MultiPoint",qu),qu.prototype.appendPoint=qu.prototype.Ik,qu.prototype.clone=qu.prototype.clone,qu.prototype.getCoordinates=qu.prototype.W,qu.prototype.getPoint=qu.prototype.Ll,qu.prototype.getPoints=qu.prototype.de,qu.prototype.getType=qu.prototype.S,qu.prototype.intersectsExtent=qu.prototype.$a,qu.prototype.setCoordinates=qu.prototype.na,n("ol.geom.MultiPolygon",Zu),Zu.prototype.appendPolygon=Zu.prototype.Jk,Zu.prototype.clone=Zu.prototype.clone,Zu.prototype.getArea=Zu.prototype.Xn,Zu.prototype.getCoordinates=Zu.prototype.W,Zu.prototype.getInteriorPoints=Zu.prototype.ul,Zu.prototype.getPolygon=Zu.prototype.Ml,Zu.prototype.getPolygons=Zu.prototype.Vd,Zu.prototype.getType=Zu.prototype.S,Zu.prototype.intersectsExtent=Zu.prototype.$a,Zu.prototype.setCoordinates=Zu.prototype.na,n("ol.geom.Point",Ko),Ko.prototype.clone=Ko.prototype.clone,Ko.prototype.getCoordinates=Ko.prototype.W,Ko.prototype.getType=Ko.prototype.S,Ko.prototype.intersectsExtent=Ko.prototype.$a,Ko.prototype.setCoordinates=Ko.prototype.na,n("ol.geom.Polygon",nr),nr.prototype.appendLinearRing=nr.prototype.Hk,nr.prototype.clone=nr.prototype.clone,nr.prototype.getArea=nr.prototype.Yn,nr.prototype.getCoordinates=nr.prototype.W,nr.prototype.getInteriorPoint=nr.prototype.tl,nr.prototype.getLinearRingCount=nr.prototype.zl,nr.prototype.getLinearRing=nr.prototype.Wh,nr.prototype.getLinearRings=nr.prototype.Ud,nr.prototype.getType=nr.prototype.S,nr.prototype.intersectsExtent=nr.prototype.$a,nr.prototype.setCoordinates=nr.prototype.na,n("ol.geom.Polygon.circular",sr),n("ol.geom.Polygon.fromExtent",ar),n("ol.geom.Polygon.fromCircle",hr),n("ol.geom.SimpleGeometry",Co),Co.prototype.getFirstCoordinate=Co.prototype.fc,Co.prototype.getLastCoordinate=Co.prototype.gc,Co.prototype.getLayout=Co.prototype.ic,Co.prototype.applyTransform=Co.prototype.Rc,Co.prototype.translate=Co.prototype.translate,n("ol.format.EsriJSON",ec),ec.prototype.readFeature=ec.prototype.Yb,ec.prototype.readFeatures=ec.prototype.Qa,ec.prototype.readGeometry=ec.prototype.ed,ec.prototype.readProjection=ec.prototype.sb,ec.prototype.writeGeometry=ec.prototype.md,ec.prototype.writeGeometryObject=ec.prototype.se,ec.prototype.writeFeature=ec.prototype.Jd,ec.prototype.writeFeatureObject=ec.prototype.ld,ec.prototype.writeFeatures=ec.prototype.ac,ec.prototype.writeFeaturesObject=ec.prototype.qe,n("ol.format.Feature",Vu),n("ol.format.filter.and",Gg),n("ol.format.filter.or",function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(jg,e))}),n("ol.format.filter.not",function(t){return new Ng(t)}),n("ol.format.filter.bbox",Ug),n("ol.format.filter.contains",function(t,e,i){return new Eg(t,e,i)}),n("ol.format.filter.intersects",function(t,e,i){return new Ig(t,e,i)}),n("ol.format.filter.within",function(t,e,i){return new kg(t,e,i)}),n("ol.format.filter.equalTo",function(t,e,i){return new Cg(t,e,i)}),n("ol.format.filter.notEqualTo",function(t,e,i){return new Dg(t,e,i)}),n("ol.format.filter.lessThan",function(t,e){return new Og(t,e)}),n("ol.format.filter.lessThanOrEqualTo",function(t,e){return new Fg(t,e)}),n("ol.format.filter.greaterThan",function(t,e){return new Rg(t,e)}),n("ol.format.filter.greaterThanOrEqualTo",function(t,e){return new Pg(t,e)}),n("ol.format.filter.isNull",function(t){return new Ag(t)}),n("ol.format.filter.between",function(t,e,i){return new Mg(t,e,i)}),n("ol.format.filter.like",function(t,e,i,o,r,n){return new Lg(t,e,i,o,r,n)}),n("ol.format.filter.during",function(t,e,i){return new Tg(t,e,i)}),n("ol.format.GeoJSON",Lf),Lf.prototype.readFeature=Lf.prototype.Yb,Lf.prototype.readFeatures=Lf.prototype.Qa,Lf.prototype.readGeometry=Lf.prototype.ed,Lf.prototype.readProjection=Lf.prototype.sb,Lf.prototype.writeFeature=Lf.prototype.Jd,Lf.prototype.writeFeatureObject=Lf.prototype.ld,Lf.prototype.writeFeatures=Lf.prototype.ac,Lf.prototype.writeFeaturesObject=Lf.prototype.qe,Lf.prototype.writeGeometry=Lf.prototype.md,Lf.prototype.writeGeometryObject=Lf.prototype.se,n("ol.format.GML",wc),wc.prototype.writeFeatures=wc.prototype.ac,wc.prototype.writeFeaturesNode=wc.prototype.bc,n("ol.format.GML2",Fc),n("ol.format.GML3",wc),wc.prototype.writeGeometryNode=wc.prototype.re,wc.prototype.writeFeatures=wc.prototype.ac,wc.prototype.writeFeaturesNode=wc.prototype.bc,uc.prototype.readFeatures=uc.prototype.Qa,n("ol.format.GPX",Yc),Yc.prototype.readFeature=Yc.prototype.Yb,Yc.prototype.readFeatures=Yc.prototype.Qa,Yc.prototype.readProjection=Yc.prototype.sb,Yc.prototype.writeFeatures=Yc.prototype.ac,Yc.prototype.writeFeaturesNode=Yc.prototype.bc,n("ol.format.IGC",kf),kf.prototype.readFeature=kf.prototype.Yb,kf.prototype.readFeatures=kf.prototype.Qa,kf.prototype.readProjection=kf.prototype.sb,n("ol.format.KML",ad),ad.prototype.readFeature=ad.prototype.Yb,ad.prototype.readFeatures=ad.prototype.Qa,ad.prototype.readName=ad.prototype.cq,ad.prototype.readNetworkLinks=ad.prototype.eq,ad.prototype.readRegion=ad.prototype.hq,ad.prototype.readRegionFromNode=ad.prototype.vf,ad.prototype.readProjection=ad.prototype.sb,ad.prototype.writeFeatures=ad.prototype.ac,ad.prototype.writeFeaturesNode=ad.prototype.bc,n("ol.format.MVT",Hy),Hy.prototype.getLastExtent=Hy.prototype.cg,Hy.prototype.readFeatures=Hy.prototype.Qa,Hy.prototype.readProjection=Hy.prototype.sb,Hy.prototype.setLayers=Hy.prototype.Sn,n("ol.format.OSMXML",Qy),Qy.prototype.readFeatures=Qy.prototype.Qa,Qy.prototype.readProjection=Qy.prototype.sb,n("ol.format.Polyline",sg),n("ol.format.Polyline.encodeDeltas",ag),n("ol.format.Polyline.decodeDeltas",hg),n("ol.format.Polyline.encodeFloats",lg),n("ol.format.Polyline.decodeFloats",pg),sg.prototype.readFeature=sg.prototype.Yb,sg.prototype.readFeatures=sg.prototype.Qa,sg.prototype.readGeometry=sg.prototype.ed,sg.prototype.readProjection=sg.prototype.sb,sg.prototype.writeGeometry=sg.prototype.md,n("ol.format.TopoJSON",ug),ug.prototype.readFeatures=ug.prototype.Qa,ug.prototype.readProjection=ug.prototype.sb,n("ol.format.WFS",Bg),Bg.prototype.readFeatures=Bg.prototype.Qa,Bg.prototype.readTransactionResponse=Bg.prototype.j,Bg.prototype.readFeatureCollectionMetadata=Bg.prototype.f,n("ol.format.WFS.writeFilter",function(t){var e=bu("http://www.opengis.net/ogc","Filter");return Gu({node:e},av,Au(t.rc),[t],[]),e}),Bg.prototype.writeGetFeature=Bg.prototype.s,Bg.prototype.writeTransaction=Bg.prototype.v,Bg.prototype.readProjection=Bg.prototype.sb,n("ol.format.WKT",hv),hv.prototype.readFeature=hv.prototype.Yb,hv.prototype.readFeatures=hv.prototype.Qa,hv.prototype.readGeometry=hv.prototype.ed,hv.prototype.writeFeature=hv.prototype.Jd,hv.prototype.writeFeatures=hv.prototype.ac,hv.prototype.writeGeometry=hv.prototype.md,n("ol.format.WMSCapabilities",Cv),Cv.prototype.read=Cv.prototype.read,n("ol.format.WMSGetFeatureInfo",$v),$v.prototype.readFeatures=$v.prototype.Qa,n("ol.format.WMTSCapabilities",cm),cm.prototype.read=cm.prototype.read,n("ol.format.filter.And",_g),n("ol.format.filter.Bbox",bg),n("ol.format.filter.Comparison",Sg),n("ol.format.filter.ComparisonBinary",wg),n("ol.format.filter.Contains",Eg),n("ol.format.filter.During",Tg),n("ol.format.filter.EqualTo",Cg),n("ol.format.filter.Filter",vg),n("ol.format.filter.GreaterThan",Rg),n("ol.format.filter.GreaterThanOrEqualTo",Pg),n("ol.format.filter.Intersects",Ig),n("ol.format.filter.IsBetween",Mg),n("ol.format.filter.IsLike",Lg),n("ol.format.filter.IsNull",Ag),n("ol.format.filter.LessThan",Og),n("ol.format.filter.LessThanOrEqualTo",Fg),n("ol.format.filter.Not",Ng),n("ol.format.filter.NotEqualTo",Dg),n("ol.format.filter.Or",jg),n("ol.format.filter.Spatial",xg),n("ol.format.filter.Within",kg),n("ol.events.condition.altKeyOnly",Jr),n("ol.events.condition.altShiftKeysOnly",Qr),n("ol.events.condition.always",lo),n("ol.events.condition.click",function(t){return"click"==t.type}),n("ol.events.condition.never",po),n("ol.events.condition.pointerMove",en),n("ol.events.condition.singleClick",on),n("ol.events.condition.doubleClick",function(t){return"dblclick"==t.type}),n("ol.events.condition.noModifierKeys",rn),n("ol.events.condition.platformModifierKeyOnly",function(t){return!(t=t.originalEvent).altKey&&($e?t.metaKey:t.ctrlKey)&&!t.shiftKey}),n("ol.events.condition.shiftKeyOnly",nn),n("ol.events.condition.targetNotEditable",sn),n("ol.events.condition.mouseOnly",an),n("ol.events.condition.primaryAction",hn),Te.prototype.type=Te.prototype.type,Te.prototype.target=Te.prototype.target,Te.prototype.preventDefault=Te.prototype.preventDefault,Te.prototype.stopPropagation=Te.prototype.stopPropagation,n("ol.control.Attribution",jr),n("ol.control.Attribution.render",kr),jr.prototype.getCollapsible=jr.prototype.An,jr.prototype.setCollapsible=jr.prototype.Dn,jr.prototype.setCollapsed=jr.prototype.Cn,jr.prototype.getCollapsed=jr.prototype.zn,n("ol.control.Control",Lr),Lr.prototype.getMap=Lr.prototype.f,Lr.prototype.setMap=Lr.prototype.setMap,Lr.prototype.setTarget=Lr.prototype.i,n("ol.control.FullScreen",Kp),n("ol.control.MousePosition",Jp),n("ol.control.MousePosition.render",Qp),Jp.prototype.getCoordinateFormat=Jp.prototype.Qh,Jp.prototype.getProjection=Jp.prototype.si,Jp.prototype.setCoordinateFormat=Jp.prototype.Gj,Jp.prototype.setProjection=Jp.prototype.ti,n("ol.control.OverviewMap",ou),n("ol.control.OverviewMap.render",ru),ou.prototype.getCollapsible=ou.prototype.Gn,ou.prototype.setCollapsible=ou.prototype.Jn,ou.prototype.setCollapsed=ou.prototype.In,ou.prototype.getCollapsed=ou.prototype.Fn,ou.prototype.getOverviewMap=ou.prototype.Hl,n("ol.control.Rotate",Ur),n("ol.control.Rotate.render",Br),n("ol.control.ScaleLine",hu),hu.prototype.getUnits=hu.prototype.C,n("ol.control.ScaleLine.render",pu),hu.prototype.setUnits=hu.prototype.O,n("ol.control.Zoom",Vr),n("ol.control.ZoomSlider",fu),n("ol.control.ZoomSlider.render",yu),n("ol.control.ZoomToExtent",mu),Ie.prototype.changed=Ie.prototype.u,Ie.prototype.dispatchEvent=Ie.prototype.b,Ie.prototype.getRevision=Ie.prototype.K,Ie.prototype.on=Ie.prototype.I,Ie.prototype.once=Ie.prototype.once,Ie.prototype.un=Ie.prototype.J,Ir.prototype.get=Ir.prototype.get,Ir.prototype.getKeys=Ir.prototype.P,Ir.prototype.getProperties=Ir.prototype.L,Ir.prototype.set=Ir.prototype.set,Ir.prototype.setProperties=Ir.prototype.H,Ir.prototype.unset=Ir.prototype.R,Ir.prototype.changed=Ir.prototype.u,Ir.prototype.dispatchEvent=Ir.prototype.b,Ir.prototype.getRevision=Ir.prototype.K,Ir.prototype.on=Ir.prototype.I,Ir.prototype.once=Ir.prototype.once,Ir.prototype.un=Ir.prototype.J,za.prototype.addControl=za.prototype.Mf,za.prototype.addInteraction=za.prototype.Nf,za.prototype.addLayer=za.prototype.xe,za.prototype.addOverlay=za.prototype.ye,za.prototype.forEachFeatureAtPixel=za.prototype.Tc,za.prototype.getFeaturesAtPixel=za.prototype.Xf,za.prototype.forEachLayerAtPixel=za.prototype.tg,za.prototype.hasFeatureAtPixel=za.prototype.ng,za.prototype.getEventCoordinate=za.prototype.Sd,za.prototype.getEventPixel=za.prototype.ud,za.prototype.getTarget=za.prototype.Xd,za.prototype.getTargetElement=za.prototype.Cc,za.prototype.getCoordinateFromPixel=za.prototype.Ra,za.prototype.getControls=za.prototype.Wf,za.prototype.getOverlays=za.prototype.gg,za.prototype.getOverlayById=za.prototype.fg,za.prototype.getInteractions=za.prototype.bg,za.prototype.getLayerGroup=za.prototype.hc,za.prototype.getLayers=za.prototype.Xe,za.prototype.getPixelFromCoordinate=za.prototype.Ia,za.prototype.getSize=za.prototype.Cb,za.prototype.getView=za.prototype.aa,za.prototype.getViewport=za.prototype.kg,za.prototype.renderSync=za.prototype.dh,za.prototype.render=za.prototype.render,za.prototype.removeControl=za.prototype.Xg,za.prototype.removeInteraction=za.prototype.Zg,za.prototype.removeLayer=za.prototype.$g,za.prototype.removeOverlay=za.prototype.ah,za.prototype.setLayerGroup=za.prototype.zf,za.prototype.setSize=za.prototype.be,za.prototype.setTarget=za.prototype.Ad,za.prototype.setView=za.prototype.jh,za.prototype.updateSize=za.prototype.Oc,za.prototype.get=za.prototype.get,za.prototype.getKeys=za.prototype.P,za.prototype.getProperties=za.prototype.L,za.prototype.set=za.prototype.set,za.prototype.setProperties=za.prototype.H,za.prototype.unset=za.prototype.R,za.prototype.changed=za.prototype.u,za.prototype.dispatchEvent=za.prototype.b,za.prototype.getRevision=za.prototype.K,za.prototype.on=za.prototype.I,za.prototype.once=za.prototype.once,za.prototype.un=za.prototype.J,Fe.prototype.get=Fe.prototype.get,Fe.prototype.getKeys=Fe.prototype.P,Fe.prototype.getProperties=Fe.prototype.L,Fe.prototype.set=Fe.prototype.set,Fe.prototype.setProperties=Fe.prototype.H,Fe.prototype.unset=Fe.prototype.R,Fe.prototype.changed=Fe.prototype.u,Fe.prototype.dispatchEvent=Fe.prototype.b,Fe.prototype.getRevision=Fe.prototype.K,Fe.prototype.on=Fe.prototype.I,Fe.prototype.once=Fe.prototype.once,Fe.prototype.un=Fe.prototype.J,ke.prototype.type=ke.prototype.type,ke.prototype.target=ke.prototype.target,ke.prototype.preventDefault=ke.prototype.preventDefault,ke.prototype.stopPropagation=ke.prototype.stopPropagation,Ka.prototype.get=Ka.prototype.get,Ka.prototype.getKeys=Ka.prototype.P,Ka.prototype.getProperties=Ka.prototype.L,Ka.prototype.set=Ka.prototype.set,Ka.prototype.setProperties=Ka.prototype.H,Ka.prototype.unset=Ka.prototype.R,Ka.prototype.changed=Ka.prototype.u,Ka.prototype.dispatchEvent=Ka.prototype.b,Ka.prototype.getRevision=Ka.prototype.K,Ka.prototype.on=Ka.prototype.I,Ka.prototype.once=Ka.prototype.once,Ka.prototype.un=Ka.prototype.J,uh.prototype.get=uh.prototype.get,uh.prototype.getKeys=uh.prototype.P,uh.prototype.getProperties=uh.prototype.L,uh.prototype.set=uh.prototype.set,uh.prototype.setProperties=uh.prototype.H,uh.prototype.unset=uh.prototype.R,uh.prototype.changed=uh.prototype.u,uh.prototype.dispatchEvent=uh.prototype.b,uh.prototype.getRevision=uh.prototype.K,uh.prototype.on=uh.prototype.I,uh.prototype.once=uh.prototype.once,uh.prototype.un=uh.prototype.J,ch.prototype.get=ch.prototype.get,ch.prototype.getKeys=ch.prototype.P,ch.prototype.getProperties=ch.prototype.L,ch.prototype.set=ch.prototype.set,ch.prototype.setProperties=ch.prototype.H,ch.prototype.unset=ch.prototype.R,ch.prototype.changed=ch.prototype.u,ch.prototype.dispatchEvent=ch.prototype.b,ch.prototype.getRevision=ch.prototype.K,ch.prototype.on=ch.prototype.I,ch.prototype.once=ch.prototype.once,ch.prototype.un=ch.prototype.J,Ih.prototype.getTileCoord=Ih.prototype.i,Ih.prototype.load=Ih.prototype.load,Fp.prototype.addControl=Fp.prototype.Mf,Fp.prototype.addInteraction=Fp.prototype.Nf,Fp.prototype.addLayer=Fp.prototype.xe,Fp.prototype.addOverlay=Fp.prototype.ye,Fp.prototype.forEachFeatureAtPixel=Fp.prototype.Tc,Fp.prototype.getFeaturesAtPixel=Fp.prototype.Xf,Fp.prototype.forEachLayerAtPixel=Fp.prototype.tg,Fp.prototype.hasFeatureAtPixel=Fp.prototype.ng,Fp.prototype.getEventCoordinate=Fp.prototype.Sd,Fp.prototype.getEventPixel=Fp.prototype.ud,Fp.prototype.getTarget=Fp.prototype.Xd,Fp.prototype.getTargetElement=Fp.prototype.Cc,Fp.prototype.getCoordinateFromPixel=Fp.prototype.Ra,Fp.prototype.getControls=Fp.prototype.Wf,Fp.prototype.getOverlays=Fp.prototype.gg,Fp.prototype.getOverlayById=Fp.prototype.fg,Fp.prototype.getInteractions=Fp.prototype.bg,Fp.prototype.getLayerGroup=Fp.prototype.hc,Fp.prototype.getLayers=Fp.prototype.Xe,Fp.prototype.getPixelFromCoordinate=Fp.prototype.Ia,Fp.prototype.getSize=Fp.prototype.Cb,Fp.prototype.getView=Fp.prototype.aa,Fp.prototype.getViewport=Fp.prototype.kg,Fp.prototype.renderSync=Fp.prototype.dh,Fp.prototype.render=Fp.prototype.render,Fp.prototype.removeControl=Fp.prototype.Xg,Fp.prototype.removeInteraction=Fp.prototype.Zg,Fp.prototype.removeLayer=Fp.prototype.$g,Fp.prototype.removeOverlay=Fp.prototype.ah,Fp.prototype.setLayerGroup=Fp.prototype.zf,Fp.prototype.setSize=Fp.prototype.be,Fp.prototype.setTarget=Fp.prototype.Ad,Fp.prototype.setView=Fp.prototype.jh,Fp.prototype.updateSize=Fp.prototype.Oc,Fp.prototype.get=Fp.prototype.get,Fp.prototype.getKeys=Fp.prototype.P,Fp.prototype.getProperties=Fp.prototype.L,Fp.prototype.set=Fp.prototype.set,Fp.prototype.setProperties=Fp.prototype.H,Fp.prototype.unset=Fp.prototype.R,Fp.prototype.changed=Fp.prototype.u,Fp.prototype.dispatchEvent=Fp.prototype.b,Fp.prototype.getRevision=Fp.prototype.K,Fp.prototype.on=Fp.prototype.I,Fp.prototype.once=Fp.prototype.once,Fp.prototype.un=Fp.prototype.J,Ge.prototype.type=Ge.prototype.type,Ge.prototype.target=Ge.prototype.target,Ge.prototype.preventDefault=Ge.prototype.preventDefault,Ge.prototype.stopPropagation=Ge.prototype.stopPropagation,Ue.prototype.map=Ue.prototype.map,Ue.prototype.frameState=Ue.prototype.frameState,Ue.prototype.type=Ue.prototype.type,Ue.prototype.target=Ue.prototype.target,Ue.prototype.preventDefault=Ue.prototype.preventDefault,Ue.prototype.stopPropagation=Ue.prototype.stopPropagation,hi.prototype.originalEvent=hi.prototype.originalEvent,hi.prototype.pixel=hi.prototype.pixel,hi.prototype.coordinate=hi.prototype.coordinate,hi.prototype.dragging=hi.prototype.dragging,hi.prototype.preventDefault=hi.prototype.preventDefault,hi.prototype.stopPropagation=hi.prototype.stopPropagation,hi.prototype.map=hi.prototype.map,hi.prototype.frameState=hi.prototype.frameState,hi.prototype.type=hi.prototype.type,hi.prototype.target=hi.prototype.target,Oe.prototype.type=Oe.prototype.type,Oe.prototype.target=Oe.prototype.target,Oe.prototype.preventDefault=Oe.prototype.preventDefault,Oe.prototype.stopPropagation=Oe.prototype.stopPropagation,Np.prototype.get=Np.prototype.get,Np.prototype.getKeys=Np.prototype.P,Np.prototype.getProperties=Np.prototype.L,Np.prototype.set=Np.prototype.set,Np.prototype.setProperties=Np.prototype.H,Np.prototype.unset=Np.prototype.R,Np.prototype.changed=Np.prototype.u,Np.prototype.dispatchEvent=Np.prototype.b,Np.prototype.getRevision=Np.prototype.K,Np.prototype.on=Np.prototype.I,Np.prototype.once=Np.prototype.once,Np.prototype.un=Np.prototype.J,Tx.prototype.getTileCoord=Tx.prototype.i,Tx.prototype.load=Tx.prototype.load,Xp.prototype.getTileCoord=Xp.prototype.i,Xp.prototype.load=Xp.prototype.load,pr.prototype.get=pr.prototype.get,pr.prototype.getKeys=pr.prototype.P,pr.prototype.getProperties=pr.prototype.L,pr.prototype.set=pr.prototype.set,pr.prototype.setProperties=pr.prototype.H,pr.prototype.unset=pr.prototype.R,pr.prototype.changed=pr.prototype.u,pr.prototype.dispatchEvent=pr.prototype.b,pr.prototype.getRevision=pr.prototype.K,pr.prototype.on=pr.prototype.I,pr.prototype.once=pr.prototype.once,pr.prototype.un=pr.prototype.J,Ix.prototype.forEachTileCoord=Ix.prototype.Vf,Ix.prototype.getMaxZoom=Ix.prototype.mj,Ix.prototype.getMinZoom=Ix.prototype.nj,Ix.prototype.getOrigin=Ix.prototype.Ic,Ix.prototype.getResolution=Ix.prototype.Ta,Ix.prototype.getResolutions=Ix.prototype.oj,Ix.prototype.getTileCoordExtent=Ix.prototype.Ma,Ix.prototype.getTileCoordForCoordAndResolution=Ix.prototype.Le,Ix.prototype.getTileCoordForCoordAndZ=Ix.prototype.jg,Ix.prototype.getTileSize=Ix.prototype.Za,Ix.prototype.getZForResolution=Ix.prototype.Dc,th.prototype.getOpacity=th.prototype.hf,th.prototype.getRotateWithView=th.prototype.jf,th.prototype.getRotation=th.prototype.kf,th.prototype.getScale=th.prototype.lf,th.prototype.getSnapToPixel=th.prototype.Ke,th.prototype.setOpacity=th.prototype.Ed,th.prototype.setRotation=th.prototype.mf,th.prototype.setScale=th.prototype.Fd,ih.prototype.clone=ih.prototype.clone,ih.prototype.getAngle=ih.prototype.ij,ih.prototype.getFill=ih.prototype.Fa,ih.prototype.getPoints=ih.prototype.jj,ih.prototype.getRadius=ih.prototype.kj,ih.prototype.getRadius2=ih.prototype.Zh,ih.prototype.getStroke=ih.prototype.Ga,ih.prototype.getOpacity=ih.prototype.hf,ih.prototype.getRotateWithView=ih.prototype.jf,ih.prototype.getRotation=ih.prototype.kf,ih.prototype.getScale=ih.prototype.lf,ih.prototype.getSnapToPixel=ih.prototype.Ke,ih.prototype.setOpacity=ih.prototype.Ed,ih.prototype.setRotation=ih.prototype.mf,ih.prototype.setScale=ih.prototype.Fd,sd.prototype.getOpacity=sd.prototype.hf,sd.prototype.getRotateWithView=sd.prototype.jf,sd.prototype.getRotation=sd.prototype.kf,sd.prototype.getScale=sd.prototype.lf,sd.prototype.getSnapToPixel=sd.prototype.Ke,sd.prototype.setOpacity=sd.prototype.Ed,sd.prototype.setRotation=sd.prototype.mf,sd.prototype.setScale=sd.prototype.Fd,Wm.prototype.get=Wm.prototype.get,Wm.prototype.getKeys=Wm.prototype.P,Wm.prototype.getProperties=Wm.prototype.L,Wm.prototype.set=Wm.prototype.set,Wm.prototype.setProperties=Wm.prototype.H,Wm.prototype.unset=Wm.prototype.R,Wm.prototype.changed=Wm.prototype.u,Wm.prototype.dispatchEvent=Wm.prototype.b,Wm.prototype.getRevision=Wm.prototype.K,Wm.prototype.on=Wm.prototype.I,Wm.prototype.once=Wm.prototype.once,Wm.prototype.un=Wm.prototype.J,bb.prototype.getAttributions=bb.prototype.za,bb.prototype.getLogo=bb.prototype.Aa,bb.prototype.getProjection=bb.prototype.Da,bb.prototype.getState=bb.prototype.getState,bb.prototype.refresh=bb.prototype.sa,bb.prototype.setAttributions=bb.prototype.va,bb.prototype.get=bb.prototype.get,bb.prototype.getKeys=bb.prototype.P,bb.prototype.getProperties=bb.prototype.L,bb.prototype.set=bb.prototype.set,bb.prototype.setProperties=bb.prototype.H,bb.prototype.unset=bb.prototype.R,bb.prototype.changed=bb.prototype.u,bb.prototype.dispatchEvent=bb.prototype.b,bb.prototype.getRevision=bb.prototype.K,bb.prototype.on=bb.prototype.I,bb.prototype.once=bb.prototype.once,bb.prototype.un=bb.prototype.J,wb.prototype.getTileGrid=wb.prototype.jb,wb.prototype.refresh=wb.prototype.sa,wb.prototype.getAttributions=wb.prototype.za,wb.prototype.getLogo=wb.prototype.Aa,wb.prototype.getProjection=wb.prototype.Da,wb.prototype.getState=wb.prototype.getState,wb.prototype.setAttributions=wb.prototype.va,wb.prototype.get=wb.prototype.get,wb.prototype.getKeys=wb.prototype.P,wb.prototype.getProperties=wb.prototype.L,wb.prototype.set=wb.prototype.set,wb.prototype.setProperties=wb.prototype.H,wb.prototype.unset=wb.prototype.R,wb.prototype.changed=wb.prototype.u,wb.prototype.dispatchEvent=wb.prototype.b,wb.prototype.getRevision=wb.prototype.K,wb.prototype.on=wb.prototype.I,wb.prototype.once=wb.prototype.once,wb.prototype.un=wb.prototype.J,Cb.prototype.getTileLoadFunction=Cb.prototype.yb,Cb.prototype.getTileUrlFunction=Cb.prototype.zb,Cb.prototype.getUrls=Cb.prototype.Ab,Cb.prototype.setTileLoadFunction=Cb.prototype.Fb,Cb.prototype.setTileUrlFunction=Cb.prototype.hb,Cb.prototype.setUrl=Cb.prototype.rb,Cb.prototype.setUrls=Cb.prototype.vb,Cb.prototype.getTileGrid=Cb.prototype.jb,Cb.prototype.refresh=Cb.prototype.sa,Cb.prototype.getAttributions=Cb.prototype.za,Cb.prototype.getLogo=Cb.prototype.Aa,Cb.prototype.getProjection=Cb.prototype.Da,Cb.prototype.getState=Cb.prototype.getState,Cb.prototype.setAttributions=Cb.prototype.va,Cb.prototype.get=Cb.prototype.get,Cb.prototype.getKeys=Cb.prototype.P,Cb.prototype.getProperties=Cb.prototype.L,Cb.prototype.set=Cb.prototype.set,Cb.prototype.setProperties=Cb.prototype.H,Cb.prototype.unset=Cb.prototype.R,Cb.prototype.changed=Cb.prototype.u,Cb.prototype.dispatchEvent=Cb.prototype.b,Cb.prototype.getRevision=Cb.prototype.K,Cb.prototype.on=Cb.prototype.I,Cb.prototype.once=Cb.prototype.once,Cb.prototype.un=Cb.prototype.J,Mb.prototype.setRenderReprojectionEdges=Mb.prototype.Qb,Mb.prototype.setTileGridForProjection=Mb.prototype.Rb,Mb.prototype.getTileLoadFunction=Mb.prototype.yb,Mb.prototype.getTileUrlFunction=Mb.prototype.zb,Mb.prototype.getUrls=Mb.prototype.Ab,Mb.prototype.setTileLoadFunction=Mb.prototype.Fb,Mb.prototype.setTileUrlFunction=Mb.prototype.hb,Mb.prototype.setUrl=Mb.prototype.rb,Mb.prototype.setUrls=Mb.prototype.vb,Mb.prototype.getTileGrid=Mb.prototype.jb,Mb.prototype.refresh=Mb.prototype.sa,Mb.prototype.getAttributions=Mb.prototype.za,Mb.prototype.getLogo=Mb.prototype.Aa,Mb.prototype.getProjection=Mb.prototype.Da,Mb.prototype.getState=Mb.prototype.getState,Mb.prototype.setAttributions=Mb.prototype.va,Mb.prototype.get=Mb.prototype.get,Mb.prototype.getKeys=Mb.prototype.P,Mb.prototype.getProperties=Mb.prototype.L,Mb.prototype.set=Mb.prototype.set,Mb.prototype.setProperties=Mb.prototype.H,Mb.prototype.unset=Mb.prototype.R,Mb.prototype.changed=Mb.prototype.u,Mb.prototype.dispatchEvent=Mb.prototype.b,Mb.prototype.getRevision=Mb.prototype.K,Mb.prototype.on=Mb.prototype.I,Mb.prototype.once=Mb.prototype.once,Mb.prototype.un=Mb.prototype.J,Lb.prototype.setRenderReprojectionEdges=Lb.prototype.Qb,Lb.prototype.setTileGridForProjection=Lb.prototype.Rb,Lb.prototype.getTileLoadFunction=Lb.prototype.yb,Lb.prototype.getTileUrlFunction=Lb.prototype.zb,Lb.prototype.getUrls=Lb.prototype.Ab,Lb.prototype.setTileLoadFunction=Lb.prototype.Fb,Lb.prototype.setTileUrlFunction=Lb.prototype.hb,Lb.prototype.setUrl=Lb.prototype.rb,Lb.prototype.setUrls=Lb.prototype.vb,Lb.prototype.getTileGrid=Lb.prototype.jb,Lb.prototype.refresh=Lb.prototype.sa,Lb.prototype.getAttributions=Lb.prototype.za,Lb.prototype.getLogo=Lb.prototype.Aa,Lb.prototype.getProjection=Lb.prototype.Da,Lb.prototype.getState=Lb.prototype.getState,Lb.prototype.setAttributions=Lb.prototype.va,Lb.prototype.get=Lb.prototype.get,Lb.prototype.getKeys=Lb.prototype.P,Lb.prototype.getProperties=Lb.prototype.L,Lb.prototype.set=Lb.prototype.set,Lb.prototype.setProperties=Lb.prototype.H,Lb.prototype.unset=Lb.prototype.R,Lb.prototype.changed=Lb.prototype.u,Lb.prototype.dispatchEvent=Lb.prototype.b,Lb.prototype.getRevision=Lb.prototype.K,Lb.prototype.on=Lb.prototype.I,Lb.prototype.once=Lb.prototype.once,Lb.prototype.un=Lb.prototype.J,Ab.prototype.setRenderReprojectionEdges=Ab.prototype.Qb,Ab.prototype.setTileGridForProjection=Ab.prototype.Rb,Ab.prototype.getTileLoadFunction=Ab.prototype.yb,Ab.prototype.getTileUrlFunction=Ab.prototype.zb,Ab.prototype.getUrls=Ab.prototype.Ab,Ab.prototype.setTileLoadFunction=Ab.prototype.Fb,Ab.prototype.setTileUrlFunction=Ab.prototype.hb,Ab.prototype.setUrl=Ab.prototype.rb,Ab.prototype.setUrls=Ab.prototype.vb,Ab.prototype.getTileGrid=Ab.prototype.jb,Ab.prototype.refresh=Ab.prototype.sa,Ab.prototype.getAttributions=Ab.prototype.za,Ab.prototype.getLogo=Ab.prototype.Aa,Ab.prototype.getProjection=Ab.prototype.Da,Ab.prototype.getState=Ab.prototype.getState,Ab.prototype.setAttributions=Ab.prototype.va,Ab.prototype.get=Ab.prototype.get,Ab.prototype.getKeys=Ab.prototype.P,Ab.prototype.getProperties=Ab.prototype.L,Ab.prototype.set=Ab.prototype.set,Ab.prototype.setProperties=Ab.prototype.H,Ab.prototype.unset=Ab.prototype.R,Ab.prototype.changed=Ab.prototype.u,Ab.prototype.dispatchEvent=Ab.prototype.b,Ab.prototype.getRevision=Ab.prototype.K,Ab.prototype.on=Ab.prototype.I,Ab.prototype.once=Ab.prototype.once,Ab.prototype.un=Ab.prototype.J,zm.prototype.getAttributions=zm.prototype.za,zm.prototype.getLogo=zm.prototype.Aa,zm.prototype.getProjection=zm.prototype.Da,zm.prototype.getState=zm.prototype.getState,zm.prototype.refresh=zm.prototype.sa,zm.prototype.setAttributions=zm.prototype.va,zm.prototype.get=zm.prototype.get,zm.prototype.getKeys=zm.prototype.P,zm.prototype.getProperties=zm.prototype.L,zm.prototype.set=zm.prototype.set,zm.prototype.setProperties=zm.prototype.H,zm.prototype.unset=zm.prototype.R,zm.prototype.changed=zm.prototype.u,zm.prototype.dispatchEvent=zm.prototype.b,zm.prototype.getRevision=zm.prototype.K,zm.prototype.on=zm.prototype.I,zm.prototype.once=zm.prototype.once,zm.prototype.un=zm.prototype.J,Nb.prototype.addFeature=Nb.prototype.Gb,Nb.prototype.addFeatures=Nb.prototype.Qc,Nb.prototype.clear=Nb.prototype.clear,Nb.prototype.forEachFeature=Nb.prototype.Lh,Nb.prototype.forEachFeatureInExtent=Nb.prototype.ec,Nb.prototype.forEachFeatureIntersectingExtent=Nb.prototype.Mh,Nb.prototype.getFeaturesCollection=Nb.prototype.Th,Nb.prototype.getFeatures=Nb.prototype.ee,Nb.prototype.getFeaturesAtCoordinate=Nb.prototype.Sh,Nb.prototype.getFeaturesInExtent=Nb.prototype.Yf,Nb.prototype.getClosestFeatureToCoordinate=Nb.prototype.Oh,Nb.prototype.getExtent=Nb.prototype.G,Nb.prototype.getFeatureById=Nb.prototype.Rh,Nb.prototype.getFormat=Nb.prototype.ej,Nb.prototype.getUrl=Nb.prototype.fj,Nb.prototype.removeLoadedExtent=Nb.prototype.Cj,Nb.prototype.removeFeature=Nb.prototype.Lb,Nb.prototype.setLoader=Nb.prototype.hj,Nb.prototype.getAttributions=Nb.prototype.za,Nb.prototype.getLogo=Nb.prototype.Aa,Nb.prototype.getProjection=Nb.prototype.Da,Nb.prototype.getState=Nb.prototype.getState,Nb.prototype.refresh=Nb.prototype.sa,Nb.prototype.setAttributions=Nb.prototype.va,Nb.prototype.get=Nb.prototype.get,Nb.prototype.getKeys=Nb.prototype.P,Nb.prototype.getProperties=Nb.prototype.L,Nb.prototype.set=Nb.prototype.set,Nb.prototype.setProperties=Nb.prototype.H,Nb.prototype.unset=Nb.prototype.R,Nb.prototype.changed=Nb.prototype.u,Nb.prototype.dispatchEvent=Nb.prototype.b,Nb.prototype.getRevision=Nb.prototype.K,Nb.prototype.on=Nb.prototype.I,Nb.prototype.once=Nb.prototype.once,Nb.prototype.un=Nb.prototype.J,Gb.prototype.getAttributions=Gb.prototype.za,Gb.prototype.getLogo=Gb.prototype.Aa,Gb.prototype.getProjection=Gb.prototype.Da,Gb.prototype.getState=Gb.prototype.getState,Gb.prototype.refresh=Gb.prototype.sa,Gb.prototype.setAttributions=Gb.prototype.va,Gb.prototype.get=Gb.prototype.get,Gb.prototype.getKeys=Gb.prototype.P,Gb.prototype.getProperties=Gb.prototype.L,Gb.prototype.set=Gb.prototype.set,Gb.prototype.setProperties=Gb.prototype.H,Gb.prototype.unset=Gb.prototype.R,Gb.prototype.changed=Gb.prototype.u,Gb.prototype.dispatchEvent=Gb.prototype.b,Gb.prototype.getRevision=Gb.prototype.K,Gb.prototype.on=Gb.prototype.I,Gb.prototype.once=Gb.prototype.once,Gb.prototype.un=Gb.prototype.J,Vb.prototype.type=Vb.prototype.type,Vb.prototype.target=Vb.prototype.target,Vb.prototype.preventDefault=Vb.prototype.preventDefault,Vb.prototype.stopPropagation=Vb.prototype.stopPropagation,Kb.prototype.getAttributions=Kb.prototype.za,Kb.prototype.getLogo=Kb.prototype.Aa,Kb.prototype.getProjection=Kb.prototype.Da,Kb.prototype.getState=Kb.prototype.getState,Kb.prototype.refresh=Kb.prototype.sa,Kb.prototype.setAttributions=Kb.prototype.va,Kb.prototype.get=Kb.prototype.get,Kb.prototype.getKeys=Kb.prototype.P,Kb.prototype.getProperties=Kb.prototype.L,Kb.prototype.set=Kb.prototype.set,Kb.prototype.setProperties=Kb.prototype.H,Kb.prototype.unset=Kb.prototype.R,Kb.prototype.changed=Kb.prototype.u,Kb.prototype.dispatchEvent=Kb.prototype.b,Kb.prototype.getRevision=Kb.prototype.K,Kb.prototype.on=Kb.prototype.I,Kb.prototype.once=Kb.prototype.once,Kb.prototype.un=Kb.prototype.J,Hb.prototype.getAttributions=Hb.prototype.za,Hb.prototype.getLogo=Hb.prototype.Aa,Hb.prototype.getProjection=Hb.prototype.Da,Hb.prototype.getState=Hb.prototype.getState,Hb.prototype.refresh=Hb.prototype.sa,Hb.prototype.setAttributions=Hb.prototype.va,Hb.prototype.get=Hb.prototype.get,Hb.prototype.getKeys=Hb.prototype.P,Hb.prototype.getProperties=Hb.prototype.L,Hb.prototype.set=Hb.prototype.set,Hb.prototype.setProperties=Hb.prototype.H,Hb.prototype.unset=Hb.prototype.R,Hb.prototype.changed=Hb.prototype.u,Hb.prototype.dispatchEvent=Hb.prototype.b,Hb.prototype.getRevision=Hb.prototype.K,Hb.prototype.on=Hb.prototype.I,Hb.prototype.once=Hb.prototype.once,Hb.prototype.un=Hb.prototype.J,$b.prototype.getAttributions=$b.prototype.za,$b.prototype.getLogo=$b.prototype.Aa,$b.prototype.getProjection=$b.prototype.Da,$b.prototype.getState=$b.prototype.getState,$b.prototype.refresh=$b.prototype.sa,$b.prototype.setAttributions=$b.prototype.va,$b.prototype.get=$b.prototype.get,$b.prototype.getKeys=$b.prototype.P,$b.prototype.getProperties=$b.prototype.L,$b.prototype.set=$b.prototype.set,$b.prototype.setProperties=$b.prototype.H,$b.prototype.unset=$b.prototype.R,$b.prototype.changed=$b.prototype.u,$b.prototype.dispatchEvent=$b.prototype.b,$b.prototype.getRevision=$b.prototype.K,$b.prototype.on=$b.prototype.I,$b.prototype.once=$b.prototype.once,$b.prototype.un=$b.prototype.J,qb.prototype.getAttributions=qb.prototype.za,qb.prototype.getLogo=qb.prototype.Aa,qb.prototype.getProjection=qb.prototype.Da,qb.prototype.getState=qb.prototype.getState,qb.prototype.refresh=qb.prototype.sa,qb.prototype.setAttributions=qb.prototype.va,qb.prototype.get=qb.prototype.get,qb.prototype.getKeys=qb.prototype.P,qb.prototype.getProperties=qb.prototype.L,qb.prototype.set=qb.prototype.set,qb.prototype.setProperties=qb.prototype.H,qb.prototype.unset=qb.prototype.R,qb.prototype.changed=qb.prototype.u,qb.prototype.dispatchEvent=qb.prototype.b,qb.prototype.getRevision=qb.prototype.K,qb.prototype.on=qb.prototype.I,qb.prototype.once=qb.prototype.once,qb.prototype.un=qb.prototype.J,Zb.prototype.getAttributions=Zb.prototype.za,Zb.prototype.getLogo=Zb.prototype.Aa,Zb.prototype.getProjection=Zb.prototype.Da,Zb.prototype.getState=Zb.prototype.getState,Zb.prototype.refresh=Zb.prototype.sa,Zb.prototype.setAttributions=Zb.prototype.va,Zb.prototype.get=Zb.prototype.get,Zb.prototype.getKeys=Zb.prototype.P,Zb.prototype.getProperties=Zb.prototype.L,Zb.prototype.set=Zb.prototype.set,Zb.prototype.setProperties=Zb.prototype.H,Zb.prototype.unset=Zb.prototype.R,Zb.prototype.changed=Zb.prototype.u,Zb.prototype.dispatchEvent=Zb.prototype.b,Zb.prototype.getRevision=Zb.prototype.K,Zb.prototype.on=Zb.prototype.I,Zb.prototype.once=Zb.prototype.once,Zb.prototype.un=Zb.prototype.J,Jb.prototype.getAttributions=Jb.prototype.za,Jb.prototype.getLogo=Jb.prototype.Aa,Jb.prototype.getProjection=Jb.prototype.Da,Jb.prototype.getState=Jb.prototype.getState,Jb.prototype.refresh=Jb.prototype.sa,Jb.prototype.setAttributions=Jb.prototype.va,Jb.prototype.get=Jb.prototype.get,Jb.prototype.getKeys=Jb.prototype.P,Jb.prototype.getProperties=Jb.prototype.L,Jb.prototype.set=Jb.prototype.set,Jb.prototype.setProperties=Jb.prototype.H,Jb.prototype.unset=Jb.prototype.R,Jb.prototype.changed=Jb.prototype.u,Jb.prototype.dispatchEvent=Jb.prototype.b,Jb.prototype.getRevision=Jb.prototype.K,Jb.prototype.on=Jb.prototype.I,Jb.prototype.once=Jb.prototype.once,Jb.prototype.un=Jb.prototype.J,ix.prototype.setRenderReprojectionEdges=ix.prototype.Qb,ix.prototype.setTileGridForProjection=ix.prototype.Rb,ix.prototype.getTileLoadFunction=ix.prototype.yb,ix.prototype.getTileUrlFunction=ix.prototype.zb,ix.prototype.getUrls=ix.prototype.Ab,ix.prototype.setTileLoadFunction=ix.prototype.Fb,ix.prototype.setTileUrlFunction=ix.prototype.hb,ix.prototype.setUrl=ix.prototype.rb,ix.prototype.setUrls=ix.prototype.vb,ix.prototype.getTileGrid=ix.prototype.jb,ix.prototype.refresh=ix.prototype.sa,ix.prototype.getAttributions=ix.prototype.za,ix.prototype.getLogo=ix.prototype.Aa,ix.prototype.getProjection=ix.prototype.Da,ix.prototype.getState=ix.prototype.getState,ix.prototype.setAttributions=ix.prototype.va,ix.prototype.get=ix.prototype.get,ix.prototype.getKeys=ix.prototype.P,ix.prototype.getProperties=ix.prototype.L,ix.prototype.set=ix.prototype.set,ix.prototype.setProperties=ix.prototype.H,ix.prototype.unset=ix.prototype.R,ix.prototype.changed=ix.prototype.u,ix.prototype.dispatchEvent=ix.prototype.b,ix.prototype.getRevision=ix.prototype.K,ix.prototype.on=ix.prototype.I,ix.prototype.once=ix.prototype.once,ix.prototype.un=ix.prototype.J,ox.prototype.getAttributions=ox.prototype.za,ox.prototype.getLogo=ox.prototype.Aa,ox.prototype.getProjection=ox.prototype.Da,ox.prototype.getState=ox.prototype.getState,ox.prototype.refresh=ox.prototype.sa,ox.prototype.setAttributions=ox.prototype.va,ox.prototype.get=ox.prototype.get,ox.prototype.getKeys=ox.prototype.P,ox.prototype.getProperties=ox.prototype.L,ox.prototype.set=ox.prototype.set,ox.prototype.setProperties=ox.prototype.H,ox.prototype.unset=ox.prototype.R,ox.prototype.changed=ox.prototype.u,ox.prototype.dispatchEvent=ox.prototype.b,ox.prototype.getRevision=ox.prototype.K,ox.prototype.on=ox.prototype.I,ox.prototype.once=ox.prototype.once,ox.prototype.un=ox.prototype.J,nx.prototype.type=nx.prototype.type,nx.prototype.target=nx.prototype.target,nx.prototype.preventDefault=nx.prototype.preventDefault,nx.prototype.stopPropagation=nx.prototype.stopPropagation,hx.prototype.setRenderReprojectionEdges=hx.prototype.Qb,hx.prototype.setTileGridForProjection=hx.prototype.Rb,hx.prototype.getTileLoadFunction=hx.prototype.yb,hx.prototype.getTileUrlFunction=hx.prototype.zb,hx.prototype.getUrls=hx.prototype.Ab,hx.prototype.setTileLoadFunction=hx.prototype.Fb,hx.prototype.setTileUrlFunction=hx.prototype.hb,hx.prototype.setUrl=hx.prototype.rb,hx.prototype.setUrls=hx.prototype.vb,hx.prototype.getTileGrid=hx.prototype.jb,hx.prototype.refresh=hx.prototype.sa,hx.prototype.getAttributions=hx.prototype.za,hx.prototype.getLogo=hx.prototype.Aa,hx.prototype.getProjection=hx.prototype.Da,hx.prototype.getState=hx.prototype.getState,hx.prototype.setAttributions=hx.prototype.va,hx.prototype.get=hx.prototype.get,hx.prototype.getKeys=hx.prototype.P,hx.prototype.getProperties=hx.prototype.L,hx.prototype.set=hx.prototype.set,hx.prototype.setProperties=hx.prototype.H,hx.prototype.unset=hx.prototype.R,hx.prototype.changed=hx.prototype.u,hx.prototype.dispatchEvent=hx.prototype.b,hx.prototype.getRevision=hx.prototype.K,hx.prototype.on=hx.prototype.I,hx.prototype.once=hx.prototype.once,hx.prototype.un=hx.prototype.J,Tb.prototype.type=Tb.prototype.type,Tb.prototype.target=Tb.prototype.target,Tb.prototype.preventDefault=Tb.prototype.preventDefault,Tb.prototype.stopPropagation=Tb.prototype.stopPropagation,cx.prototype.setRenderReprojectionEdges=cx.prototype.Qb,cx.prototype.setTileGridForProjection=cx.prototype.Rb,cx.prototype.getTileLoadFunction=cx.prototype.yb,cx.prototype.getTileUrlFunction=cx.prototype.zb,cx.prototype.getUrls=cx.prototype.Ab,cx.prototype.setTileLoadFunction=cx.prototype.Fb,cx.prototype.setTileUrlFunction=cx.prototype.hb,cx.prototype.setUrl=cx.prototype.rb,cx.prototype.setUrls=cx.prototype.vb,cx.prototype.getTileGrid=cx.prototype.jb,cx.prototype.refresh=cx.prototype.sa,cx.prototype.getAttributions=cx.prototype.za,cx.prototype.getLogo=cx.prototype.Aa,cx.prototype.getProjection=cx.prototype.Da,cx.prototype.getState=cx.prototype.getState,cx.prototype.setAttributions=cx.prototype.va,cx.prototype.get=cx.prototype.get,cx.prototype.getKeys=cx.prototype.P,cx.prototype.getProperties=cx.prototype.L,cx.prototype.set=cx.prototype.set,cx.prototype.setProperties=cx.prototype.H,cx.prototype.unset=cx.prototype.R,cx.prototype.changed=cx.prototype.u,cx.prototype.dispatchEvent=cx.prototype.b,cx.prototype.getRevision=cx.prototype.K,cx.prototype.on=cx.prototype.I,cx.prototype.once=cx.prototype.once,cx.prototype.un=cx.prototype.J,dx.prototype.getTileGrid=dx.prototype.jb,dx.prototype.refresh=dx.prototype.sa,dx.prototype.getAttributions=dx.prototype.za,dx.prototype.getLogo=dx.prototype.Aa,dx.prototype.getProjection=dx.prototype.Da,dx.prototype.getState=dx.prototype.getState,dx.prototype.setAttributions=dx.prototype.va,dx.prototype.get=dx.prototype.get,dx.prototype.getKeys=dx.prototype.P,dx.prototype.getProperties=dx.prototype.L,dx.prototype.set=dx.prototype.set,dx.prototype.setProperties=dx.prototype.H,dx.prototype.unset=dx.prototype.R,dx.prototype.changed=dx.prototype.u,dx.prototype.dispatchEvent=dx.prototype.b,dx.prototype.getRevision=dx.prototype.K,dx.prototype.on=dx.prototype.I,dx.prototype.once=dx.prototype.once,dx.prototype.un=dx.prototype.J,gx.prototype.setRenderReprojectionEdges=gx.prototype.Qb,gx.prototype.setTileGridForProjection=gx.prototype.Rb,gx.prototype.getTileLoadFunction=gx.prototype.yb,gx.prototype.getTileUrlFunction=gx.prototype.zb,gx.prototype.getUrls=gx.prototype.Ab,gx.prototype.setTileLoadFunction=gx.prototype.Fb,gx.prototype.setTileUrlFunction=gx.prototype.hb,gx.prototype.setUrl=gx.prototype.rb,gx.prototype.setUrls=gx.prototype.vb,gx.prototype.getTileGrid=gx.prototype.jb,gx.prototype.refresh=gx.prototype.sa,gx.prototype.getAttributions=gx.prototype.za,gx.prototype.getLogo=gx.prototype.Aa,gx.prototype.getProjection=gx.prototype.Da,gx.prototype.getState=gx.prototype.getState,gx.prototype.setAttributions=gx.prototype.va,gx.prototype.get=gx.prototype.get,gx.prototype.getKeys=gx.prototype.P,gx.prototype.getProperties=gx.prototype.L,gx.prototype.set=gx.prototype.set,gx.prototype.setProperties=gx.prototype.H,gx.prototype.unset=gx.prototype.R,gx.prototype.changed=gx.prototype.u,gx.prototype.dispatchEvent=gx.prototype.b,gx.prototype.getRevision=gx.prototype.K,gx.prototype.on=gx.prototype.I,gx.prototype.once=gx.prototype.once,gx.prototype.un=gx.prototype.J,vx.prototype.getTileGrid=vx.prototype.jb,vx.prototype.refresh=vx.prototype.sa,vx.prototype.getAttributions=vx.prototype.za,vx.prototype.getLogo=vx.prototype.Aa,vx.prototype.getProjection=vx.prototype.Da,vx.prototype.getState=vx.prototype.getState,vx.prototype.setAttributions=vx.prototype.va,vx.prototype.get=vx.prototype.get,vx.prototype.getKeys=vx.prototype.P,vx.prototype.getProperties=vx.prototype.L,vx.prototype.set=vx.prototype.set,vx.prototype.setProperties=vx.prototype.H,vx.prototype.unset=vx.prototype.R,vx.prototype.changed=vx.prototype.u,vx.prototype.dispatchEvent=vx.prototype.b,vx.prototype.getRevision=vx.prototype.K,vx.prototype.on=vx.prototype.I,vx.prototype.once=vx.prototype.once,vx.prototype.un=vx.prototype.J,bx.prototype.setRenderReprojectionEdges=bx.prototype.Qb,bx.prototype.setTileGridForProjection=bx.prototype.Rb,bx.prototype.getTileLoadFunction=bx.prototype.yb,bx.prototype.getTileUrlFunction=bx.prototype.zb,bx.prototype.getUrls=bx.prototype.Ab,bx.prototype.setTileLoadFunction=bx.prototype.Fb,bx.prototype.setTileUrlFunction=bx.prototype.hb,bx.prototype.setUrl=bx.prototype.rb,bx.prototype.setUrls=bx.prototype.vb,bx.prototype.getTileGrid=bx.prototype.jb,bx.prototype.refresh=bx.prototype.sa,bx.prototype.getAttributions=bx.prototype.za,bx.prototype.getLogo=bx.prototype.Aa,bx.prototype.getProjection=bx.prototype.Da,bx.prototype.getState=bx.prototype.getState,bx.prototype.setAttributions=bx.prototype.va,bx.prototype.get=bx.prototype.get,bx.prototype.getKeys=bx.prototype.P,bx.prototype.getProperties=bx.prototype.L,bx.prototype.set=bx.prototype.set,bx.prototype.setProperties=bx.prototype.H,bx.prototype.unset=bx.prototype.R,bx.prototype.changed=bx.prototype.u,bx.prototype.dispatchEvent=bx.prototype.b,bx.prototype.getRevision=bx.prototype.K,bx.prototype.on=bx.prototype.I,bx.prototype.once=bx.prototype.once,bx.prototype.un=bx.prototype.J,Zm.prototype.type=Zm.prototype.type,Zm.prototype.target=Zm.prototype.target,Zm.prototype.preventDefault=Zm.prototype.preventDefault,Zm.prototype.stopPropagation=Zm.prototype.stopPropagation,Px.prototype.getTileLoadFunction=Px.prototype.yb,Px.prototype.getTileUrlFunction=Px.prototype.zb,Px.prototype.getUrls=Px.prototype.Ab,Px.prototype.setTileLoadFunction=Px.prototype.Fb,Px.prototype.setTileUrlFunction=Px.prototype.hb,Px.prototype.setUrl=Px.prototype.rb,Px.prototype.setUrls=Px.prototype.vb,Px.prototype.getTileGrid=Px.prototype.jb,Px.prototype.refresh=Px.prototype.sa,Px.prototype.getAttributions=Px.prototype.za,Px.prototype.getLogo=Px.prototype.Aa,Px.prototype.getProjection=Px.prototype.Da,Px.prototype.getState=Px.prototype.getState,Px.prototype.setAttributions=Px.prototype.va,Px.prototype.get=Px.prototype.get,Px.prototype.getKeys=Px.prototype.P,Px.prototype.getProperties=Px.prototype.L,Px.prototype.set=Px.prototype.set,Px.prototype.setProperties=Px.prototype.H,Px.prototype.unset=Px.prototype.R,Px.prototype.changed=Px.prototype.u,Px.prototype.dispatchEvent=Px.prototype.b,Px.prototype.getRevision=Px.prototype.K,Px.prototype.on=Px.prototype.I,Px.prototype.once=Px.prototype.once,Px.prototype.un=Px.prototype.J,Lx.prototype.setRenderReprojectionEdges=Lx.prototype.Qb,Lx.prototype.setTileGridForProjection=Lx.prototype.Rb,Lx.prototype.getTileLoadFunction=Lx.prototype.yb,Lx.prototype.getTileUrlFunction=Lx.prototype.zb,Lx.prototype.getUrls=Lx.prototype.Ab,Lx.prototype.setTileLoadFunction=Lx.prototype.Fb,Lx.prototype.setTileUrlFunction=Lx.prototype.hb,Lx.prototype.setUrl=Lx.prototype.rb,Lx.prototype.setUrls=Lx.prototype.vb,Lx.prototype.getTileGrid=Lx.prototype.jb,Lx.prototype.refresh=Lx.prototype.sa,Lx.prototype.getAttributions=Lx.prototype.za,Lx.prototype.getLogo=Lx.prototype.Aa,Lx.prototype.getProjection=Lx.prototype.Da,Lx.prototype.getState=Lx.prototype.getState,Lx.prototype.setAttributions=Lx.prototype.va,Lx.prototype.get=Lx.prototype.get,Lx.prototype.getKeys=Lx.prototype.P,Lx.prototype.getProperties=Lx.prototype.L,Lx.prototype.set=Lx.prototype.set,Lx.prototype.setProperties=Lx.prototype.H,Lx.prototype.unset=Lx.prototype.R,Lx.prototype.changed=Lx.prototype.u,Lx.prototype.dispatchEvent=Lx.prototype.b,Lx.prototype.getRevision=Lx.prototype.K,Lx.prototype.on=Lx.prototype.I,Lx.prototype.once=Lx.prototype.once,Lx.prototype.un=Lx.prototype.J,Ox.prototype.setRenderReprojectionEdges=Ox.prototype.Qb,Ox.prototype.setTileGridForProjection=Ox.prototype.Rb,Ox.prototype.getTileLoadFunction=Ox.prototype.yb,Ox.prototype.getTileUrlFunction=Ox.prototype.zb,Ox.prototype.getUrls=Ox.prototype.Ab,Ox.prototype.setTileLoadFunction=Ox.prototype.Fb,Ox.prototype.setTileUrlFunction=Ox.prototype.hb,Ox.prototype.setUrl=Ox.prototype.rb,Ox.prototype.setUrls=Ox.prototype.vb,Ox.prototype.getTileGrid=Ox.prototype.jb,Ox.prototype.refresh=Ox.prototype.sa,Ox.prototype.getAttributions=Ox.prototype.za,Ox.prototype.getLogo=Ox.prototype.Aa,Ox.prototype.getProjection=Ox.prototype.Da,Ox.prototype.getState=Ox.prototype.getState,Ox.prototype.setAttributions=Ox.prototype.va,Ox.prototype.get=Ox.prototype.get,Ox.prototype.getKeys=Ox.prototype.P,Ox.prototype.getProperties=Ox.prototype.L,Ox.prototype.set=Ox.prototype.set,Ox.prototype.setProperties=Ox.prototype.H,Ox.prototype.unset=Ox.prototype.R,Ox.prototype.changed=Ox.prototype.u,Ox.prototype.dispatchEvent=Ox.prototype.b,Ox.prototype.getRevision=Ox.prototype.K,Ox.prototype.on=Ox.prototype.I,Ox.prototype.once=Ox.prototype.once,Ox.prototype.un=Ox.prototype.J,_b.prototype.getTileCoord=_b.prototype.i,_b.prototype.load=_b.prototype.load,Ls.prototype.changed=Ls.prototype.u,Ls.prototype.dispatchEvent=Ls.prototype.b,Ls.prototype.getRevision=Ls.prototype.K,Ls.prototype.on=Ls.prototype.I,Ls.prototype.once=Ls.prototype.once,Ls.prototype.un=Ls.prototype.J,Sp.prototype.changed=Sp.prototype.u,Sp.prototype.dispatchEvent=Sp.prototype.b,Sp.prototype.getRevision=Sp.prototype.K,Sp.prototype.on=Sp.prototype.I,Sp.prototype.once=Sp.prototype.once,Sp.prototype.un=Sp.prototype.J,wp.prototype.changed=wp.prototype.u,wp.prototype.dispatchEvent=wp.prototype.b,wp.prototype.getRevision=wp.prototype.K,wp.prototype.on=wp.prototype.I,wp.prototype.once=wp.prototype.once,wp.prototype.un=wp.prototype.J,Ap.prototype.changed=Ap.prototype.u,Ap.prototype.dispatchEvent=Ap.prototype.b,Ap.prototype.getRevision=Ap.prototype.K,Ap.prototype.on=Ap.prototype.I,Ap.prototype.once=Ap.prototype.once,Ap.prototype.un=Ap.prototype.J,Op.prototype.changed=Op.prototype.u,Op.prototype.dispatchEvent=Op.prototype.b,Op.prototype.getRevision=Op.prototype.K,Op.prototype.on=Op.prototype.I,Op.prototype.once=Op.prototype.once,Op.prototype.un=Op.prototype.J,ks.prototype.changed=ks.prototype.u,ks.prototype.dispatchEvent=ks.prototype.b,ks.prototype.getRevision=ks.prototype.K,ks.prototype.on=ks.prototype.I,ks.prototype.once=ks.prototype.once,ks.prototype.un=ks.prototype.J,Vs.prototype.changed=Vs.prototype.u,Vs.prototype.dispatchEvent=Vs.prototype.b,Vs.prototype.getRevision=Vs.prototype.K,Vs.prototype.on=Vs.prototype.I,Vs.prototype.once=Vs.prototype.once,Vs.prototype.un=Vs.prototype.J,Ws.prototype.changed=Ws.prototype.u,Ws.prototype.dispatchEvent=Ws.prototype.b,Ws.prototype.getRevision=Ws.prototype.K,Ws.prototype.on=Ws.prototype.I,Ws.prototype.once=Ws.prototype.once,Ws.prototype.un=Ws.prototype.J,ia.prototype.changed=ia.prototype.u,ia.prototype.dispatchEvent=ia.prototype.b,ia.prototype.getRevision=ia.prototype.K,ia.prototype.on=ia.prototype.I,ia.prototype.once=ia.prototype.once,ia.prototype.un=ia.prototype.J,Va.prototype.changed=Va.prototype.u,Va.prototype.dispatchEvent=Va.prototype.b,Va.prototype.getRevision=Va.prototype.K,Va.prototype.on=Va.prototype.I,Va.prototype.once=Va.prototype.once,Va.prototype.un=Va.prototype.J,Wa.prototype.changed=Wa.prototype.u,Wa.prototype.dispatchEvent=Wa.prototype.b,Wa.prototype.getRevision=Wa.prototype.K,Wa.prototype.on=Wa.prototype.I,Wa.prototype.once=Wa.prototype.once,Wa.prototype.un=Wa.prototype.J,Jn.prototype.type=Jn.prototype.type,Jn.prototype.target=Jn.prototype.target,Jn.prototype.preventDefault=Jn.prototype.preventDefault,Jn.prototype.stopPropagation=Jn.prototype.stopPropagation,gi.prototype.type=gi.prototype.type,gi.prototype.target=gi.prototype.target,gi.prototype.preventDefault=gi.prototype.preventDefault,gi.prototype.stopPropagation=gi.prototype.stopPropagation,xr.prototype.get=xr.prototype.get,xr.prototype.getKeys=xr.prototype.P,xr.prototype.getProperties=xr.prototype.L,xr.prototype.set=xr.prototype.set,xr.prototype.setProperties=xr.prototype.H,xr.prototype.unset=xr.prototype.R,xr.prototype.changed=xr.prototype.u,xr.prototype.dispatchEvent=xr.prototype.b,xr.prototype.getRevision=xr.prototype.K,xr.prototype.on=xr.prototype.I,xr.prototype.once=xr.prototype.once,xr.prototype.un=xr.prototype.J,Sr.prototype.getExtent=Sr.prototype.G,Sr.prototype.getMaxResolution=Sr.prototype.lc,Sr.prototype.getMinResolution=Sr.prototype.mc,Sr.prototype.getOpacity=Sr.prototype.nc,Sr.prototype.getVisible=Sr.prototype.Jb,Sr.prototype.getZIndex=Sr.prototype.Ba,Sr.prototype.setExtent=Sr.prototype.Fc,Sr.prototype.setMaxResolution=Sr.prototype.Mc,Sr.prototype.setMinResolution=Sr.prototype.Nc,Sr.prototype.setOpacity=Sr.prototype.Gc,Sr.prototype.setVisible=Sr.prototype.Hc,Sr.prototype.setZIndex=Sr.prototype.$b,Sr.prototype.get=Sr.prototype.get,Sr.prototype.getKeys=Sr.prototype.P,Sr.prototype.getProperties=Sr.prototype.L,Sr.prototype.set=Sr.prototype.set,Sr.prototype.setProperties=Sr.prototype.H,Sr.prototype.unset=Sr.prototype.R,Sr.prototype.changed=Sr.prototype.u,Sr.prototype.dispatchEvent=Sr.prototype.b,Sr.prototype.getRevision=Sr.prototype.K,Sr.prototype.on=Sr.prototype.I,Sr.prototype.once=Sr.prototype.once,Sr.prototype.un=Sr.prototype.J,Nr.prototype.getExtent=Nr.prototype.G,Nr.prototype.getMaxResolution=Nr.prototype.lc,Nr.prototype.getMinResolution=Nr.prototype.mc,Nr.prototype.getOpacity=Nr.prototype.nc,Nr.prototype.getVisible=Nr.prototype.Jb,Nr.prototype.getZIndex=Nr.prototype.Ba,Nr.prototype.setExtent=Nr.prototype.Fc,Nr.prototype.setMaxResolution=Nr.prototype.Mc,Nr.prototype.setMinResolution=Nr.prototype.Nc,Nr.prototype.setOpacity=Nr.prototype.Gc,Nr.prototype.setVisible=Nr.prototype.Hc,Nr.prototype.setZIndex=Nr.prototype.$b,Nr.prototype.get=Nr.prototype.get,Nr.prototype.getKeys=Nr.prototype.P,Nr.prototype.getProperties=Nr.prototype.L,Nr.prototype.set=Nr.prototype.set,Nr.prototype.setProperties=Nr.prototype.H,Nr.prototype.unset=Nr.prototype.R,Nr.prototype.changed=Nr.prototype.u,Nr.prototype.dispatchEvent=Nr.prototype.b,Nr.prototype.getRevision=Nr.prototype.K,Nr.prototype.on=Nr.prototype.I,Nr.prototype.once=Nr.prototype.once,Nr.prototype.un=Nr.prototype.J,Um.prototype.setMap=Um.prototype.setMap,Um.prototype.setSource=Um.prototype.hd,Um.prototype.getExtent=Um.prototype.G,Um.prototype.getMaxResolution=Um.prototype.lc,Um.prototype.getMinResolution=Um.prototype.mc,Um.prototype.getOpacity=Um.prototype.nc,Um.prototype.getVisible=Um.prototype.Jb,Um.prototype.getZIndex=Um.prototype.Ba,Um.prototype.setExtent=Um.prototype.Fc,Um.prototype.setMaxResolution=Um.prototype.Mc,Um.prototype.setMinResolution=Um.prototype.Nc,Um.prototype.setOpacity=Um.prototype.Gc,Um.prototype.setVisible=Um.prototype.Hc,Um.prototype.setZIndex=Um.prototype.$b,Um.prototype.get=Um.prototype.get,Um.prototype.getKeys=Um.prototype.P,Um.prototype.getProperties=Um.prototype.L,Um.prototype.set=Um.prototype.set,Um.prototype.setProperties=Um.prototype.H,Um.prototype.unset=Um.prototype.R,Um.prototype.changed=Um.prototype.u,Um.prototype.dispatchEvent=Um.prototype.b,Um.prototype.getRevision=Um.prototype.K,Um.prototype.on=Um.prototype.I,Um.prototype.once=Um.prototype.once,Um.prototype.un=Um.prototype.J,Q_.prototype.getSource=Q_.prototype.ha,Q_.prototype.getStyle=Q_.prototype.B,Q_.prototype.getStyleFunction=Q_.prototype.ib,Q_.prototype.setStyle=Q_.prototype.j,Q_.prototype.setMap=Q_.prototype.setMap,Q_.prototype.setSource=Q_.prototype.hd,Q_.prototype.getExtent=Q_.prototype.G,Q_.prototype.getMaxResolution=Q_.prototype.lc,Q_.prototype.getMinResolution=Q_.prototype.mc,Q_.prototype.getOpacity=Q_.prototype.nc,Q_.prototype.getVisible=Q_.prototype.Jb,Q_.prototype.getZIndex=Q_.prototype.Ba,Q_.prototype.setExtent=Q_.prototype.Fc,Q_.prototype.setMaxResolution=Q_.prototype.Mc,Q_.prototype.setMinResolution=Q_.prototype.Nc,Q_.prototype.setOpacity=Q_.prototype.Gc,Q_.prototype.setVisible=Q_.prototype.Hc,Q_.prototype.setZIndex=Q_.prototype.$b,Q_.prototype.get=Q_.prototype.get,Q_.prototype.getKeys=Q_.prototype.P,Q_.prototype.getProperties=Q_.prototype.L,Q_.prototype.set=Q_.prototype.set,Q_.prototype.setProperties=Q_.prototype.H,Q_.prototype.unset=Q_.prototype.R,Q_.prototype.changed=Q_.prototype.u,Q_.prototype.dispatchEvent=Q_.prototype.b,Q_.prototype.getRevision=Q_.prototype.K,Q_.prototype.on=Q_.prototype.I,Q_.prototype.once=Q_.prototype.once,Q_.prototype.un=Q_.prototype.J,rb.prototype.setMap=rb.prototype.setMap,rb.prototype.setSource=rb.prototype.hd,rb.prototype.getExtent=rb.prototype.G,rb.prototype.getMaxResolution=rb.prototype.lc,rb.prototype.getMinResolution=rb.prototype.mc,rb.prototype.getOpacity=rb.prototype.nc,rb.prototype.getVisible=rb.prototype.Jb,rb.prototype.getZIndex=rb.prototype.Ba,rb.prototype.setExtent=rb.prototype.Fc,rb.prototype.setMaxResolution=rb.prototype.Mc,rb.prototype.setMinResolution=rb.prototype.Nc,rb.prototype.setOpacity=rb.prototype.Gc,rb.prototype.setVisible=rb.prototype.Hc,rb.prototype.setZIndex=rb.prototype.$b,rb.prototype.get=rb.prototype.get,rb.prototype.getKeys=rb.prototype.P,rb.prototype.getProperties=rb.prototype.L,rb.prototype.set=rb.prototype.set,rb.prototype.setProperties=rb.prototype.H,rb.prototype.unset=rb.prototype.R,rb.prototype.changed=rb.prototype.u,rb.prototype.dispatchEvent=rb.prototype.b,rb.prototype.getRevision=rb.prototype.K,rb.prototype.on=rb.prototype.I,rb.prototype.once=rb.prototype.once,rb.prototype.un=rb.prototype.J,nb.prototype.setMap=nb.prototype.setMap,nb.prototype.setSource=nb.prototype.hd,nb.prototype.getExtent=nb.prototype.G,nb.prototype.getMaxResolution=nb.prototype.lc,nb.prototype.getMinResolution=nb.prototype.mc,nb.prototype.getOpacity=nb.prototype.nc,nb.prototype.getVisible=nb.prototype.Jb,nb.prototype.getZIndex=nb.prototype.Ba,nb.prototype.setExtent=nb.prototype.Fc,nb.prototype.setMaxResolution=nb.prototype.Mc,nb.prototype.setMinResolution=nb.prototype.Nc,nb.prototype.setOpacity=nb.prototype.Gc,nb.prototype.setVisible=nb.prototype.Hc,nb.prototype.setZIndex=nb.prototype.$b,nb.prototype.get=nb.prototype.get,nb.prototype.getKeys=nb.prototype.P,nb.prototype.getProperties=nb.prototype.L,nb.prototype.set=nb.prototype.set,nb.prototype.setProperties=nb.prototype.H,nb.prototype.unset=nb.prototype.R,nb.prototype.changed=nb.prototype.u,nb.prototype.dispatchEvent=nb.prototype.b,nb.prototype.getRevision=nb.prototype.K,nb.prototype.on=nb.prototype.I,nb.prototype.once=nb.prototype.once,nb.prototype.un=nb.prototype.J,sb.prototype.getStyle=sb.prototype.B,sb.prototype.getStyleFunction=sb.prototype.ib,sb.prototype.setStyle=sb.prototype.j,sb.prototype.setMap=sb.prototype.setMap,sb.prototype.setSource=sb.prototype.hd,sb.prototype.getExtent=sb.prototype.G,sb.prototype.getMaxResolution=sb.prototype.lc,sb.prototype.getMinResolution=sb.prototype.mc,sb.prototype.getOpacity=sb.prototype.nc,sb.prototype.getVisible=sb.prototype.Jb,sb.prototype.getZIndex=sb.prototype.Ba,sb.prototype.setExtent=sb.prototype.Fc,sb.prototype.setMaxResolution=sb.prototype.Mc,sb.prototype.setMinResolution=sb.prototype.Nc,sb.prototype.setOpacity=sb.prototype.Gc,sb.prototype.setVisible=sb.prototype.Hc,sb.prototype.setZIndex=sb.prototype.$b,sb.prototype.get=sb.prototype.get,sb.prototype.getKeys=sb.prototype.P,sb.prototype.getProperties=sb.prototype.L,sb.prototype.set=sb.prototype.set,sb.prototype.setProperties=sb.prototype.H,sb.prototype.unset=sb.prototype.R,sb.prototype.changed=sb.prototype.u,sb.prototype.dispatchEvent=sb.prototype.b,sb.prototype.getRevision=sb.prototype.K,sb.prototype.on=sb.prototype.I,sb.prototype.once=sb.prototype.once,sb.prototype.un=sb.prototype.J,zr.prototype.get=zr.prototype.get,zr.prototype.getKeys=zr.prototype.P,zr.prototype.getProperties=zr.prototype.L,zr.prototype.set=zr.prototype.set,zr.prototype.setProperties=zr.prototype.H,zr.prototype.unset=zr.prototype.R,zr.prototype.changed=zr.prototype.u,zr.prototype.dispatchEvent=zr.prototype.b,zr.prototype.getRevision=zr.prototype.K,zr.prototype.on=zr.prototype.I,zr.prototype.once=zr.prototype.once,zr.prototype.un=zr.prototype.J,qr.prototype.getActive=qr.prototype.c,qr.prototype.getMap=qr.prototype.i,qr.prototype.setActive=qr.prototype.Ha,qr.prototype.get=qr.prototype.get,qr.prototype.getKeys=qr.prototype.P,qr.prototype.getProperties=qr.prototype.L,qr.prototype.set=qr.prototype.set,qr.prototype.setProperties=qr.prototype.H,qr.prototype.unset=qr.prototype.R,qr.prototype.changed=qr.prototype.u,qr.prototype.dispatchEvent=qr.prototype.b,qr.prototype.getRevision=qr.prototype.K,qr.prototype.on=qr.prototype.I,qr.prototype.once=qr.prototype.once,qr.prototype.un=qr.prototype.J,Im.prototype.getActive=Im.prototype.c,Im.prototype.getMap=Im.prototype.i,Im.prototype.setActive=Im.prototype.Ha,Im.prototype.get=Im.prototype.get,Im.prototype.getKeys=Im.prototype.P,Im.prototype.getProperties=Im.prototype.L,Im.prototype.set=Im.prototype.set,Im.prototype.setProperties=Im.prototype.H,Im.prototype.unset=Im.prototype.R,Im.prototype.changed=Im.prototype.u,Im.prototype.dispatchEvent=Im.prototype.b,Im.prototype.getRevision=Im.prototype.K,Im.prototype.on=Im.prototype.I,Im.prototype.once=Im.prototype.once,Im.prototype.un=Im.prototype.J,Nm.prototype.type=Nm.prototype.type,Nm.prototype.target=Nm.prototype.target,Nm.prototype.preventDefault=Nm.prototype.preventDefault,Nm.prototype.stopPropagation=Nm.prototype.stopPropagation,ln.prototype.getActive=ln.prototype.c,ln.prototype.getMap=ln.prototype.i,ln.prototype.setActive=ln.prototype.Ha,ln.prototype.get=ln.prototype.get,ln.prototype.getKeys=ln.prototype.P,ln.prototype.getProperties=ln.prototype.L,ln.prototype.set=ln.prototype.set,ln.prototype.setProperties=ln.prototype.H,ln.prototype.unset=ln.prototype.R,ln.prototype.changed=ln.prototype.u,ln.prototype.dispatchEvent=ln.prototype.b,ln.prototype.getRevision=ln.prototype.K,ln.prototype.on=ln.prototype.I,ln.prototype.once=ln.prototype.once,ln.prototype.un=ln.prototype.J,Sn.prototype.getActive=Sn.prototype.c,Sn.prototype.getMap=Sn.prototype.i,Sn.prototype.setActive=Sn.prototype.Ha,Sn.prototype.get=Sn.prototype.get,Sn.prototype.getKeys=Sn.prototype.P,Sn.prototype.getProperties=Sn.prototype.L,Sn.prototype.set=Sn.prototype.set,Sn.prototype.setProperties=Sn.prototype.H,Sn.prototype.unset=Sn.prototype.R,Sn.prototype.changed=Sn.prototype.u,Sn.prototype.dispatchEvent=Sn.prototype.b,Sn.prototype.getRevision=Sn.prototype.K,Sn.prototype.on=Sn.prototype.I,Sn.prototype.once=Sn.prototype.once,Sn.prototype.un=Sn.prototype.J,Ln.prototype.type=Ln.prototype.type,Ln.prototype.target=Ln.prototype.target,Ln.prototype.preventDefault=Ln.prototype.preventDefault,Ln.prototype.stopPropagation=Ln.prototype.stopPropagation,cn.prototype.getActive=cn.prototype.c,cn.prototype.getMap=cn.prototype.i,cn.prototype.setActive=cn.prototype.Ha,cn.prototype.get=cn.prototype.get,cn.prototype.getKeys=cn.prototype.P,cn.prototype.getProperties=cn.prototype.L,cn.prototype.set=cn.prototype.set,cn.prototype.setProperties=cn.prototype.H,cn.prototype.unset=cn.prototype.R,cn.prototype.changed=cn.prototype.u,cn.prototype.dispatchEvent=cn.prototype.b,cn.prototype.getRevision=cn.prototype.K,cn.prototype.on=cn.prototype.I,cn.prototype.once=cn.prototype.once,cn.prototype.un=cn.prototype.J,gn.prototype.getActive=gn.prototype.c,gn.prototype.getMap=gn.prototype.i,gn.prototype.setActive=gn.prototype.Ha,gn.prototype.get=gn.prototype.get,gn.prototype.getKeys=gn.prototype.P,gn.prototype.getProperties=gn.prototype.L,gn.prototype.set=gn.prototype.set,gn.prototype.setProperties=gn.prototype.H,gn.prototype.unset=gn.prototype.R,gn.prototype.changed=gn.prototype.u,gn.prototype.dispatchEvent=gn.prototype.b,gn.prototype.getRevision=gn.prototype.K,gn.prototype.on=gn.prototype.I,gn.prototype.once=gn.prototype.once,gn.prototype.un=gn.prototype.J,Dm.prototype.getActive=Dm.prototype.c,Dm.prototype.getMap=Dm.prototype.i,Dm.prototype.setActive=Dm.prototype.Ha,Dm.prototype.get=Dm.prototype.get,Dm.prototype.getKeys=Dm.prototype.P,Dm.prototype.getProperties=Dm.prototype.L,Dm.prototype.set=Dm.prototype.set,Dm.prototype.setProperties=Dm.prototype.H,Dm.prototype.unset=Dm.prototype.R,Dm.prototype.changed=Dm.prototype.u,Dm.prototype.dispatchEvent=Dm.prototype.b,Dm.prototype.getRevision=Dm.prototype.K,Dm.prototype.on=Dm.prototype.I,Dm.prototype.once=Dm.prototype.once,Dm.prototype.un=Dm.prototype.J,An.prototype.getGeometry=An.prototype.U,An.prototype.getActive=An.prototype.c,An.prototype.getMap=An.prototype.i,An.prototype.setActive=An.prototype.Ha,An.prototype.get=An.prototype.get,An.prototype.getKeys=An.prototype.P,An.prototype.getProperties=An.prototype.L,An.prototype.set=An.prototype.set,An.prototype.setProperties=An.prototype.H,An.prototype.unset=An.prototype.R,An.prototype.changed=An.prototype.u,An.prototype.dispatchEvent=An.prototype.b,An.prototype.getRevision=An.prototype.K,An.prototype.on=An.prototype.I,An.prototype.once=An.prototype.once,An.prototype.un=An.prototype.J,Jm.prototype.getActive=Jm.prototype.c,Jm.prototype.getMap=Jm.prototype.i,Jm.prototype.setActive=Jm.prototype.Ha,Jm.prototype.get=Jm.prototype.get,Jm.prototype.getKeys=Jm.prototype.P,Jm.prototype.getProperties=Jm.prototype.L,Jm.prototype.set=Jm.prototype.set,Jm.prototype.setProperties=Jm.prototype.H,Jm.prototype.unset=Jm.prototype.R,Jm.prototype.changed=Jm.prototype.u,Jm.prototype.dispatchEvent=Jm.prototype.b,Jm.prototype.getRevision=Jm.prototype.K,Jm.prototype.on=Jm.prototype.I,Jm.prototype.once=Jm.prototype.once,Jm.prototype.un=Jm.prototype.J,c_.prototype.type=c_.prototype.type,c_.prototype.target=c_.prototype.target,c_.prototype.preventDefault=c_.prototype.preventDefault,c_.prototype.stopPropagation=c_.prototype.stopPropagation,f_.prototype.getActive=f_.prototype.c,f_.prototype.getMap=f_.prototype.i,f_.prototype.setActive=f_.prototype.Ha,f_.prototype.get=f_.prototype.get,f_.prototype.getKeys=f_.prototype.P,f_.prototype.getProperties=f_.prototype.L,f_.prototype.set=f_.prototype.set,f_.prototype.setProperties=f_.prototype.H,f_.prototype.unset=f_.prototype.R,f_.prototype.changed=f_.prototype.u,f_.prototype.dispatchEvent=f_.prototype.b,f_.prototype.getRevision=f_.prototype.K,f_.prototype.on=f_.prototype.I,f_.prototype.once=f_.prototype.once,f_.prototype.un=f_.prototype.J,E_.prototype.type=E_.prototype.type,E_.prototype.target=E_.prototype.target,E_.prototype.preventDefault=E_.prototype.preventDefault,E_.prototype.stopPropagation=E_.prototype.stopPropagation,On.prototype.getActive=On.prototype.c,On.prototype.getMap=On.prototype.i,On.prototype.setActive=On.prototype.Ha,On.prototype.get=On.prototype.get,On.prototype.getKeys=On.prototype.P,On.prototype.getProperties=On.prototype.L,On.prototype.set=On.prototype.set,On.prototype.setProperties=On.prototype.H,On.prototype.unset=On.prototype.R,On.prototype.changed=On.prototype.u,On.prototype.dispatchEvent=On.prototype.b,On.prototype.getRevision=On.prototype.K,On.prototype.on=On.prototype.I,On.prototype.once=On.prototype.once,On.prototype.un=On.prototype.J,Nn.prototype.getActive=Nn.prototype.c,Nn.prototype.getMap=Nn.prototype.i,Nn.prototype.setActive=Nn.prototype.Ha,Nn.prototype.get=Nn.prototype.get,Nn.prototype.getKeys=Nn.prototype.P,Nn.prototype.getProperties=Nn.prototype.L,Nn.prototype.set=Nn.prototype.set,Nn.prototype.setProperties=Nn.prototype.H,Nn.prototype.unset=Nn.prototype.R,Nn.prototype.changed=Nn.prototype.u,Nn.prototype.dispatchEvent=Nn.prototype.b,Nn.prototype.getRevision=Nn.prototype.K,Nn.prototype.on=Nn.prototype.I,Nn.prototype.once=Nn.prototype.once,Nn.prototype.un=Nn.prototype.J,S_.prototype.getActive=S_.prototype.c,S_.prototype.getMap=S_.prototype.i,S_.prototype.setActive=S_.prototype.Ha,S_.prototype.get=S_.prototype.get,S_.prototype.getKeys=S_.prototype.P,S_.prototype.getProperties=S_.prototype.L,S_.prototype.set=S_.prototype.set,S_.prototype.setProperties=S_.prototype.H,S_.prototype.unset=S_.prototype.R,S_.prototype.changed=S_.prototype.u,S_.prototype.dispatchEvent=S_.prototype.b,S_.prototype.getRevision=S_.prototype.K,S_.prototype.on=S_.prototype.I,S_.prototype.once=S_.prototype.once,S_.prototype.un=S_.prototype.J,D_.prototype.type=D_.prototype.type,D_.prototype.target=D_.prototype.target,D_.prototype.preventDefault=D_.prototype.preventDefault,D_.prototype.stopPropagation=D_.prototype.stopPropagation,jn.prototype.getActive=jn.prototype.c,jn.prototype.getMap=jn.prototype.i,jn.prototype.setActive=jn.prototype.Ha,jn.prototype.get=jn.prototype.get,jn.prototype.getKeys=jn.prototype.P,jn.prototype.getProperties=jn.prototype.L,jn.prototype.set=jn.prototype.set,jn.prototype.setProperties=jn.prototype.H,jn.prototype.unset=jn.prototype.R,jn.prototype.changed=jn.prototype.u,jn.prototype.dispatchEvent=jn.prototype.b,jn.prototype.getRevision=jn.prototype.K,jn.prototype.on=jn.prototype.I,jn.prototype.once=jn.prototype.once,jn.prototype.un=jn.prototype.J,Bn.prototype.getActive=Bn.prototype.c,Bn.prototype.getMap=Bn.prototype.i,Bn.prototype.setActive=Bn.prototype.Ha,Bn.prototype.get=Bn.prototype.get,Bn.prototype.getKeys=Bn.prototype.P,Bn.prototype.getProperties=Bn.prototype.L,Bn.prototype.set=Bn.prototype.set,Bn.prototype.setProperties=Bn.prototype.H,Bn.prototype.unset=Bn.prototype.R,Bn.prototype.changed=Bn.prototype.u,Bn.prototype.dispatchEvent=Bn.prototype.b,Bn.prototype.getRevision=Bn.prototype.K,Bn.prototype.on=Bn.prototype.I,Bn.prototype.once=Bn.prototype.once,Bn.prototype.un=Bn.prototype.J,Yn.prototype.getActive=Yn.prototype.c,Yn.prototype.getMap=Yn.prototype.i,Yn.prototype.setActive=Yn.prototype.Ha,Yn.prototype.get=Yn.prototype.get,Yn.prototype.getKeys=Yn.prototype.P,Yn.prototype.getProperties=Yn.prototype.L,Yn.prototype.set=Yn.prototype.set,Yn.prototype.setProperties=Yn.prototype.H,Yn.prototype.unset=Yn.prototype.R,Yn.prototype.changed=Yn.prototype.u,Yn.prototype.dispatchEvent=Yn.prototype.b,Yn.prototype.getRevision=Yn.prototype.K,Yn.prototype.on=Yn.prototype.I,Yn.prototype.once=Yn.prototype.once,Yn.prototype.un=Yn.prototype.J,j_.prototype.getActive=j_.prototype.c,j_.prototype.getMap=j_.prototype.i,j_.prototype.setActive=j_.prototype.Ha,j_.prototype.get=j_.prototype.get,j_.prototype.getKeys=j_.prototype.P,j_.prototype.getProperties=j_.prototype.L,j_.prototype.set=j_.prototype.set,j_.prototype.setProperties=j_.prototype.H,j_.prototype.unset=j_.prototype.R,j_.prototype.changed=j_.prototype.u,j_.prototype.dispatchEvent=j_.prototype.b,j_.prototype.getRevision=j_.prototype.K,j_.prototype.on=j_.prototype.I,j_.prototype.once=j_.prototype.once,j_.prototype.un=j_.prototype.J,G_.prototype.type=G_.prototype.type,G_.prototype.target=G_.prototype.target,G_.prototype.preventDefault=G_.prototype.preventDefault,G_.prototype.stopPropagation=G_.prototype.stopPropagation,B_.prototype.getActive=B_.prototype.c,B_.prototype.getMap=B_.prototype.i,B_.prototype.setActive=B_.prototype.Ha,B_.prototype.get=B_.prototype.get,B_.prototype.getKeys=B_.prototype.P,B_.prototype.getProperties=B_.prototype.L,B_.prototype.set=B_.prototype.set,B_.prototype.setProperties=B_.prototype.H,B_.prototype.unset=B_.prototype.R,B_.prototype.changed=B_.prototype.u,B_.prototype.dispatchEvent=B_.prototype.b,B_.prototype.getRevision=B_.prototype.K,B_.prototype.on=B_.prototype.I,B_.prototype.once=B_.prototype.once,B_.prototype.un=B_.prototype.J,Y_.prototype.getActive=Y_.prototype.c,Y_.prototype.getMap=Y_.prototype.i,Y_.prototype.setActive=Y_.prototype.Ha,Y_.prototype.get=Y_.prototype.get,Y_.prototype.getKeys=Y_.prototype.P,Y_.prototype.getProperties=Y_.prototype.L,Y_.prototype.set=Y_.prototype.set,Y_.prototype.setProperties=Y_.prototype.H,Y_.prototype.unset=Y_.prototype.R,Y_.prototype.changed=Y_.prototype.u,Y_.prototype.dispatchEvent=Y_.prototype.b,Y_.prototype.getRevision=Y_.prototype.K,Y_.prototype.on=Y_.prototype.I,Y_.prototype.once=Y_.prototype.once,Y_.prototype.un=Y_.prototype.J,J_.prototype.type=J_.prototype.type,J_.prototype.target=J_.prototype.target,J_.prototype.preventDefault=J_.prototype.preventDefault,J_.prototype.stopPropagation=J_.prototype.stopPropagation,wo.prototype.get=wo.prototype.get,wo.prototype.getKeys=wo.prototype.P,wo.prototype.getProperties=wo.prototype.L,wo.prototype.set=wo.prototype.set,wo.prototype.setProperties=wo.prototype.H,wo.prototype.unset=wo.prototype.R,wo.prototype.changed=wo.prototype.u,wo.prototype.dispatchEvent=wo.prototype.b,wo.prototype.getRevision=wo.prototype.K,wo.prototype.on=wo.prototype.I,wo.prototype.once=wo.prototype.once,wo.prototype.un=wo.prototype.J,Co.prototype.getClosestPoint=Co.prototype.Ib,Co.prototype.intersectsCoordinate=Co.prototype.Bb,Co.prototype.getExtent=Co.prototype.G,Co.prototype.rotate=Co.prototype.rotate,Co.prototype.scale=Co.prototype.scale,Co.prototype.simplify=Co.prototype.Sb,Co.prototype.transform=Co.prototype.mb,Co.prototype.get=Co.prototype.get,Co.prototype.getKeys=Co.prototype.P,Co.prototype.getProperties=Co.prototype.L,Co.prototype.set=Co.prototype.set,Co.prototype.setProperties=Co.prototype.H,Co.prototype.unset=Co.prototype.R,Co.prototype.changed=Co.prototype.u,Co.prototype.dispatchEvent=Co.prototype.b,Co.prototype.getRevision=Co.prototype.K,Co.prototype.on=Co.prototype.I,Co.prototype.once=Co.prototype.once,Co.prototype.un=Co.prototype.J,Rm.prototype.getFirstCoordinate=Rm.prototype.fc,Rm.prototype.getLastCoordinate=Rm.prototype.gc,Rm.prototype.getLayout=Rm.prototype.ic,Rm.prototype.rotate=Rm.prototype.rotate,Rm.prototype.scale=Rm.prototype.scale,Rm.prototype.getClosestPoint=Rm.prototype.Ib,Rm.prototype.intersectsCoordinate=Rm.prototype.Bb,Rm.prototype.getExtent=Rm.prototype.G,Rm.prototype.simplify=Rm.prototype.Sb,Rm.prototype.get=Rm.prototype.get,Rm.prototype.getKeys=Rm.prototype.P,Rm.prototype.getProperties=Rm.prototype.L,Rm.prototype.set=Rm.prototype.set,Rm.prototype.setProperties=Rm.prototype.H,Rm.prototype.unset=Rm.prototype.R,Rm.prototype.changed=Rm.prototype.u,Rm.prototype.dispatchEvent=Rm.prototype.b,Rm.prototype.getRevision=Rm.prototype.K,Rm.prototype.on=Rm.prototype.I,Rm.prototype.once=Rm.prototype.once,Rm.prototype.un=Rm.prototype.J,Rf.prototype.getClosestPoint=Rf.prototype.Ib,Rf.prototype.intersectsCoordinate=Rf.prototype.Bb,Rf.prototype.getExtent=Rf.prototype.G,Rf.prototype.rotate=Rf.prototype.rotate,Rf.prototype.scale=Rf.prototype.scale,Rf.prototype.simplify=Rf.prototype.Sb,Rf.prototype.transform=Rf.prototype.mb,Rf.prototype.get=Rf.prototype.get,Rf.prototype.getKeys=Rf.prototype.P,Rf.prototype.getProperties=Rf.prototype.L,Rf.prototype.set=Rf.prototype.set,Rf.prototype.setProperties=Rf.prototype.H,Rf.prototype.unset=Rf.prototype.R,Rf.prototype.changed=Rf.prototype.u,Rf.prototype.dispatchEvent=Rf.prototype.b,Rf.prototype.getRevision=Rf.prototype.K,Rf.prototype.on=Rf.prototype.I,Rf.prototype.once=Rf.prototype.once,Rf.prototype.un=Rf.prototype.J,Yo.prototype.getFirstCoordinate=Yo.prototype.fc,Yo.prototype.getLastCoordinate=Yo.prototype.gc,Yo.prototype.getLayout=Yo.prototype.ic,Yo.prototype.rotate=Yo.prototype.rotate,Yo.prototype.scale=Yo.prototype.scale,Yo.prototype.getClosestPoint=Yo.prototype.Ib,Yo.prototype.intersectsCoordinate=Yo.prototype.Bb,Yo.prototype.getExtent=Yo.prototype.G,Yo.prototype.simplify=Yo.prototype.Sb,Yo.prototype.transform=Yo.prototype.mb,Yo.prototype.get=Yo.prototype.get,Yo.prototype.getKeys=Yo.prototype.P,Yo.prototype.getProperties=Yo.prototype.L,Yo.prototype.set=Yo.prototype.set,Yo.prototype.setProperties=Yo.prototype.H,Yo.prototype.unset=Yo.prototype.R,Yo.prototype.changed=Yo.prototype.u,Yo.prototype.dispatchEvent=Yo.prototype.b,Yo.prototype.getRevision=Yo.prototype.K,Yo.prototype.on=Yo.prototype.I,Yo.prototype.once=Yo.prototype.once,Yo.prototype.un=Yo.prototype.J,yh.prototype.getFirstCoordinate=yh.prototype.fc,yh.prototype.getLastCoordinate=yh.prototype.gc,yh.prototype.getLayout=yh.prototype.ic,yh.prototype.rotate=yh.prototype.rotate,yh.prototype.scale=yh.prototype.scale,yh.prototype.getClosestPoint=yh.prototype.Ib,yh.prototype.intersectsCoordinate=yh.prototype.Bb,yh.prototype.getExtent=yh.prototype.G,yh.prototype.simplify=yh.prototype.Sb,yh.prototype.transform=yh.prototype.mb,yh.prototype.get=yh.prototype.get,yh.prototype.getKeys=yh.prototype.P,yh.prototype.getProperties=yh.prototype.L,yh.prototype.set=yh.prototype.set,yh.prototype.setProperties=yh.prototype.H,yh.prototype.unset=yh.prototype.R,yh.prototype.changed=yh.prototype.u,yh.prototype.dispatchEvent=yh.prototype.b,yh.prototype.getRevision=yh.prototype.K,yh.prototype.on=yh.prototype.I,yh.prototype.once=yh.prototype.once,yh.prototype.un=yh.prototype.J,Hu.prototype.getFirstCoordinate=Hu.prototype.fc,Hu.prototype.getLastCoordinate=Hu.prototype.gc,Hu.prototype.getLayout=Hu.prototype.ic,Hu.prototype.rotate=Hu.prototype.rotate,Hu.prototype.scale=Hu.prototype.scale,Hu.prototype.getClosestPoint=Hu.prototype.Ib,Hu.prototype.intersectsCoordinate=Hu.prototype.Bb,Hu.prototype.getExtent=Hu.prototype.G,Hu.prototype.simplify=Hu.prototype.Sb,Hu.prototype.transform=Hu.prototype.mb,Hu.prototype.get=Hu.prototype.get,Hu.prototype.getKeys=Hu.prototype.P,Hu.prototype.getProperties=Hu.prototype.L,Hu.prototype.set=Hu.prototype.set,Hu.prototype.setProperties=Hu.prototype.H,Hu.prototype.unset=Hu.prototype.R,Hu.prototype.changed=Hu.prototype.u,Hu.prototype.dispatchEvent=Hu.prototype.b,Hu.prototype.getRevision=Hu.prototype.K,Hu.prototype.on=Hu.prototype.I,Hu.prototype.once=Hu.prototype.once,Hu.prototype.un=Hu.prototype.J,qu.prototype.getFirstCoordinate=qu.prototype.fc,qu.prototype.getLastCoordinate=qu.prototype.gc,qu.prototype.getLayout=qu.prototype.ic,qu.prototype.rotate=qu.prototype.rotate,qu.prototype.scale=qu.prototype.scale,qu.prototype.getClosestPoint=qu.prototype.Ib,qu.prototype.intersectsCoordinate=qu.prototype.Bb,qu.prototype.getExtent=qu.prototype.G,qu.prototype.simplify=qu.prototype.Sb,qu.prototype.transform=qu.prototype.mb,qu.prototype.get=qu.prototype.get,qu.prototype.getKeys=qu.prototype.P,qu.prototype.getProperties=qu.prototype.L,qu.prototype.set=qu.prototype.set,qu.prototype.setProperties=qu.prototype.H,qu.prototype.unset=qu.prototype.R,qu.prototype.changed=qu.prototype.u,qu.prototype.dispatchEvent=qu.prototype.b,qu.prototype.getRevision=qu.prototype.K,qu.prototype.on=qu.prototype.I,qu.prototype.once=qu.prototype.once,qu.prototype.un=qu.prototype.J,Zu.prototype.getFirstCoordinate=Zu.prototype.fc,Zu.prototype.getLastCoordinate=Zu.prototype.gc,Zu.prototype.getLayout=Zu.prototype.ic,Zu.prototype.rotate=Zu.prototype.rotate,Zu.prototype.scale=Zu.prototype.scale,Zu.prototype.getClosestPoint=Zu.prototype.Ib,Zu.prototype.intersectsCoordinate=Zu.prototype.Bb,Zu.prototype.getExtent=Zu.prototype.G,Zu.prototype.simplify=Zu.prototype.Sb,Zu.prototype.transform=Zu.prototype.mb,Zu.prototype.get=Zu.prototype.get,Zu.prototype.getKeys=Zu.prototype.P,Zu.prototype.getProperties=Zu.prototype.L,Zu.prototype.set=Zu.prototype.set,Zu.prototype.setProperties=Zu.prototype.H,Zu.prototype.unset=Zu.prototype.R,Zu.prototype.changed=Zu.prototype.u,Zu.prototype.dispatchEvent=Zu.prototype.b,Zu.prototype.getRevision=Zu.prototype.K,Zu.prototype.on=Zu.prototype.I,Zu.prototype.once=Zu.prototype.once,Zu.prototype.un=Zu.prototype.J,Ko.prototype.getFirstCoordinate=Ko.prototype.fc,Ko.prototype.getLastCoordinate=Ko.prototype.gc,Ko.prototype.getLayout=Ko.prototype.ic,Ko.prototype.rotate=Ko.prototype.rotate,Ko.prototype.scale=Ko.prototype.scale,Ko.prototype.getClosestPoint=Ko.prototype.Ib,Ko.prototype.intersectsCoordinate=Ko.prototype.Bb,Ko.prototype.getExtent=Ko.prototype.G,Ko.prototype.simplify=Ko.prototype.Sb,Ko.prototype.transform=Ko.prototype.mb,Ko.prototype.get=Ko.prototype.get,Ko.prototype.getKeys=Ko.prototype.P,Ko.prototype.getProperties=Ko.prototype.L,Ko.prototype.set=Ko.prototype.set,Ko.prototype.setProperties=Ko.prototype.H,Ko.prototype.unset=Ko.prototype.R,Ko.prototype.changed=Ko.prototype.u,Ko.prototype.dispatchEvent=Ko.prototype.b,Ko.prototype.getRevision=Ko.prototype.K,Ko.prototype.on=Ko.prototype.I,Ko.prototype.once=Ko.prototype.once,Ko.prototype.un=Ko.prototype.J,nr.prototype.getFirstCoordinate=nr.prototype.fc,nr.prototype.getLastCoordinate=nr.prototype.gc,nr.prototype.getLayout=nr.prototype.ic,nr.prototype.rotate=nr.prototype.rotate,nr.prototype.scale=nr.prototype.scale,nr.prototype.getClosestPoint=nr.prototype.Ib,nr.prototype.intersectsCoordinate=nr.prototype.Bb,nr.prototype.getExtent=nr.prototype.G,nr.prototype.simplify=nr.prototype.Sb,nr.prototype.transform=nr.prototype.mb,nr.prototype.get=nr.prototype.get,nr.prototype.getKeys=nr.prototype.P,nr.prototype.getProperties=nr.prototype.L,nr.prototype.set=nr.prototype.set,nr.prototype.setProperties=nr.prototype.H,nr.prototype.unset=nr.prototype.R,nr.prototype.changed=nr.prototype.u,nr.prototype.dispatchEvent=nr.prototype.b,nr.prototype.getRevision=nr.prototype.K,nr.prototype.on=nr.prototype.I,nr.prototype.once=nr.prototype.once,nr.prototype.un=nr.prototype.J,wc.prototype.readFeatures=wc.prototype.Qa,Fc.prototype.readFeatures=Fc.prototype.Qa,wc.prototype.readFeatures=wc.prototype.Qa,Lr.prototype.get=Lr.prototype.get,Lr.prototype.getKeys=Lr.prototype.P,Lr.prototype.getProperties=Lr.prototype.L,Lr.prototype.set=Lr.prototype.set,Lr.prototype.setProperties=Lr.prototype.H,Lr.prototype.unset=Lr.prototype.R,Lr.prototype.changed=Lr.prototype.u,Lr.prototype.dispatchEvent=Lr.prototype.b,Lr.prototype.getRevision=Lr.prototype.K,Lr.prototype.on=Lr.prototype.I,Lr.prototype.once=Lr.prototype.once,Lr.prototype.un=Lr.prototype.J,jr.prototype.getMap=jr.prototype.f,jr.prototype.setMap=jr.prototype.setMap,jr.prototype.setTarget=jr.prototype.i,jr.prototype.get=jr.prototype.get,jr.prototype.getKeys=jr.prototype.P,jr.prototype.getProperties=jr.prototype.L,jr.prototype.set=jr.prototype.set,jr.prototype.setProperties=jr.prototype.H,jr.prototype.unset=jr.prototype.R,jr.prototype.changed=jr.prototype.u,jr.prototype.dispatchEvent=jr.prototype.b,jr.prototype.getRevision=jr.prototype.K,jr.prototype.on=jr.prototype.I,jr.prototype.once=jr.prototype.once,jr.prototype.un=jr.prototype.J,Kp.prototype.getMap=Kp.prototype.f,Kp.prototype.setMap=Kp.prototype.setMap,Kp.prototype.setTarget=Kp.prototype.i,Kp.prototype.get=Kp.prototype.get,Kp.prototype.getKeys=Kp.prototype.P,Kp.prototype.getProperties=Kp.prototype.L,Kp.prototype.set=Kp.prototype.set,Kp.prototype.setProperties=Kp.prototype.H,Kp.prototype.unset=Kp.prototype.R,Kp.prototype.changed=Kp.prototype.u,Kp.prototype.dispatchEvent=Kp.prototype.b,Kp.prototype.getRevision=Kp.prototype.K,Kp.prototype.on=Kp.prototype.I,Kp.prototype.once=Kp.prototype.once,Kp.prototype.un=Kp.prototype.J,Jp.prototype.getMap=Jp.prototype.f,Jp.prototype.setMap=Jp.prototype.setMap,Jp.prototype.setTarget=Jp.prototype.i,Jp.prototype.get=Jp.prototype.get,Jp.prototype.getKeys=Jp.prototype.P,Jp.prototype.getProperties=Jp.prototype.L,Jp.prototype.set=Jp.prototype.set,Jp.prototype.setProperties=Jp.prototype.H,Jp.prototype.unset=Jp.prototype.R,Jp.prototype.changed=Jp.prototype.u,Jp.prototype.dispatchEvent=Jp.prototype.b,Jp.prototype.getRevision=Jp.prototype.K,Jp.prototype.on=Jp.prototype.I,Jp.prototype.once=Jp.prototype.once,Jp.prototype.un=Jp.prototype.J,ou.prototype.getMap=ou.prototype.f,ou.prototype.setMap=ou.prototype.setMap,ou.prototype.setTarget=ou.prototype.i,ou.prototype.get=ou.prototype.get,ou.prototype.getKeys=ou.prototype.P,ou.prototype.getProperties=ou.prototype.L,ou.prototype.set=ou.prototype.set,ou.prototype.setProperties=ou.prototype.H,ou.prototype.unset=ou.prototype.R,ou.prototype.changed=ou.prototype.u,ou.prototype.dispatchEvent=ou.prototype.b,ou.prototype.getRevision=ou.prototype.K,ou.prototype.on=ou.prototype.I,ou.prototype.once=ou.prototype.once,ou.prototype.un=ou.prototype.J,Ur.prototype.getMap=Ur.prototype.f,Ur.prototype.setMap=Ur.prototype.setMap,Ur.prototype.setTarget=Ur.prototype.i,Ur.prototype.get=Ur.prototype.get,Ur.prototype.getKeys=Ur.prototype.P,Ur.prototype.getProperties=Ur.prototype.L,Ur.prototype.set=Ur.prototype.set,Ur.prototype.setProperties=Ur.prototype.H,Ur.prototype.unset=Ur.prototype.R,Ur.prototype.changed=Ur.prototype.u,Ur.prototype.dispatchEvent=Ur.prototype.b,Ur.prototype.getRevision=Ur.prototype.K,Ur.prototype.on=Ur.prototype.I,Ur.prototype.once=Ur.prototype.once,Ur.prototype.un=Ur.prototype.J,hu.prototype.getMap=hu.prototype.f,hu.prototype.setMap=hu.prototype.setMap,hu.prototype.setTarget=hu.prototype.i,hu.prototype.get=hu.prototype.get,hu.prototype.getKeys=hu.prototype.P,hu.prototype.getProperties=hu.prototype.L,hu.prototype.set=hu.prototype.set,hu.prototype.setProperties=hu.prototype.H,hu.prototype.unset=hu.prototype.R,hu.prototype.changed=hu.prototype.u,hu.prototype.dispatchEvent=hu.prototype.b,hu.prototype.getRevision=hu.prototype.K,hu.prototype.on=hu.prototype.I,hu.prototype.once=hu.prototype.once,hu.prototype.un=hu.prototype.J,Vr.prototype.getMap=Vr.prototype.f,Vr.prototype.setMap=Vr.prototype.setMap,Vr.prototype.setTarget=Vr.prototype.i,Vr.prototype.get=Vr.prototype.get,Vr.prototype.getKeys=Vr.prototype.P,Vr.prototype.getProperties=Vr.prototype.L,Vr.prototype.set=Vr.prototype.set,Vr.prototype.setProperties=Vr.prototype.H,Vr.prototype.unset=Vr.prototype.R,Vr.prototype.changed=Vr.prototype.u,Vr.prototype.dispatchEvent=Vr.prototype.b,Vr.prototype.getRevision=Vr.prototype.K,Vr.prototype.on=Vr.prototype.I,Vr.prototype.once=Vr.prototype.once,Vr.prototype.un=Vr.prototype.J,fu.prototype.getMap=fu.prototype.f,fu.prototype.setMap=fu.prototype.setMap,fu.prototype.setTarget=fu.prototype.i,fu.prototype.get=fu.prototype.get,fu.prototype.getKeys=fu.prototype.P,fu.prototype.getProperties=fu.prototype.L,fu.prototype.set=fu.prototype.set,fu.prototype.setProperties=fu.prototype.H,fu.prototype.unset=fu.prototype.R,fu.prototype.changed=fu.prototype.u,fu.prototype.dispatchEvent=fu.prototype.b,fu.prototype.getRevision=fu.prototype.K,fu.prototype.on=fu.prototype.I,fu.prototype.once=fu.prototype.once,fu.prototype.un=fu.prototype.J,mu.prototype.getMap=mu.prototype.f,mu.prototype.setMap=mu.prototype.setMap,mu.prototype.setTarget=mu.prototype.i,mu.prototype.get=mu.prototype.get,mu.prototype.getKeys=mu.prototype.P,mu.prototype.getProperties=mu.prototype.L,mu.prototype.set=mu.prototype.set,mu.prototype.setProperties=mu.prototype.H,mu.prototype.unset=mu.prototype.R,mu.prototype.changed=mu.prototype.u,mu.prototype.dispatchEvent=mu.prototype.b,mu.prototype.getRevision=mu.prototype.K,mu.prototype.on=mu.prototype.I,mu.prototype.once=mu.prototype.once,mu.prototype.un=mu.prototype.J,o.ol},t.exports=o()},Gu7T:function(t,e,i){"use strict";e.__esModule=!0;var o,r=i("c/Tr"),n=(o=r)&&o.__esModule?o:{default:o};e.default=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,n.default)(t)}},HSQo:function(t,e,i){t.exports={default:i("CJli"),__esModule:!0}},ICpg:function(t,e,i){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},K6ED:function(t,e,i){t.exports={default:i("cnlX"),__esModule:!0}},Kh4W:function(t,e,i){e.f=i("dSzd")},Kh5d:function(t,e,i){var o=i("sB3e"),r=i("PzxK");i("uqUo")("getPrototypeOf",function(){return function(t){return r(o(t))}})},L42u:function(t,e,i){var o,r,n,s=i("+ZMJ"),a=i("knuC"),h=i("RPLV"),l=i("ON07"),p=i("7KvD"),u=p.process,c=p.setImmediate,f=p.clearImmediate,d=p.MessageChannel,y=p.Dispatch,g=0,v={},m=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},_=function(t){m.call(t.data)};c&&f||(c=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return v[++g]=function(){a("function"==typeof t?t:Function(t),e)},o(g),g},f=function(t){delete v[t]},"process"==i("R9M2")(u)?o=function(t){u.nextTick(s(m,t,1))}:y&&y.now?o=function(t){y.now(s(m,t,1))}:d?(n=(r=new d).port2,r.port1.onmessage=_,o=s(n.postMessage,n,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(o=function(t){p.postMessage(t+"","*")},p.addEventListener("message",_,!1)):o="onreadystatechange"in l("script")?function(t){h.appendChild(l("script")).onreadystatechange=function(){h.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:c,clear:f}},LKZe:function(t,e,i){var o=i("NpIQ"),r=i("X8DO"),n=i("TcQ7"),s=i("MmMw"),a=i("D2L2"),h=i("SfB7"),l=Object.getOwnPropertyDescriptor;e.f=i("+E39")?l:function(t,e){if(t=n(t),e=s(e,!0),h)try{return l(t,e)}catch(t){}if(a(t,e))return r(!o.f.call(t,e),t[e])}},MAlW:function(t,e){for(var i=[],o=0;o<256;++o)i[o]=(o+256).toString(16).substr(1);t.exports=function(t,e){var o=e||0,r=i;return r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]}},O4R0:function(t,e,i){i("+MLA"),t.exports=i("FeBl").Object.freeze},OYls:function(t,e,i){i("crlp")("asyncIterator")},OvRC:function(t,e,i){t.exports={default:i("oM7Q"),__esModule:!0}},Pf15:function(t,e,i){"use strict";e.__esModule=!0;var o=s(i("kiBT")),r=s(i("OvRC")),n=s(i("pFYg"));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,n.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},"QWe/":function(t,e,i){i("crlp")("observable")},Rewd:function(t,e,i){"use strict";var o=i("D2Nv");e._do=function(t,e,i){return o.tap(t,e,i)(this)}},Rrel:function(t,e,i){var o=i("TcQ7"),r=i("n0T6").f,n={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==n.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(o(t))}},SKH6:function(t,e,i){"use strict";e.isFunction=function(t){return"function"==typeof t}},SldL:function(t,e,i){(function(e){!function(e){"use strict";var i,o=Object.prototype,r=o.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",h=n.toStringTag||"@@toStringTag",l="object"==typeof t,p=e.regeneratorRuntime;if(p)l&&(t.exports=p);else{(p=e.regeneratorRuntime=l?t.exports:{}).wrap=b;var u="suspendedStart",c="suspendedYield",f="executing",d="completed",y={},g={};g[s]=function(){return this};var v=Object.getPrototypeOf,m=v&&v(v(L([])));m&&m!==o&&r.call(m,s)&&(g=m);var _=T.prototype=E.prototype=Object.create(g);S.prototype=_.constructor=T,T.constructor=S,T[h]=S.displayName="GeneratorFunction",p.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,h in t||(t[h]="GeneratorFunction")),t.prototype=Object.create(_),t},p.awrap=function(t){return{__await:t}},w(C.prototype),C.prototype[a]=function(){return this},p.AsyncIterator=C,p.async=function(t,e,i,o){var r=new C(b(t,e,i,o));return p.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},w(_),_[h]="Generator",_[s]=function(){return this},_.toString=function(){return"[object Generator]"},p.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var o=e.pop();if(o in t)return i.value=o,i.done=!1,i}return i.done=!0,i}},p.values=L,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(I),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(o,r){return a.type="throw",a.arg=t,e.next=o,r&&(e.method="next",e.arg=i),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var h=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(h&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=t,s.arg=e,n?(this.method="next",this.next=n.finallyLoc,y):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),I(i),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var r=o.arg;I(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:L(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=i),y}}}function b(t,e,i,o){var r=e&&e.prototype instanceof E?e:E,n=Object.create(r.prototype),s=new M(o||[]);return n._invoke=function(t,e,i){var o=u;return function(r,n){if(o===f)throw new Error("Generator is already running");if(o===d){if("throw"===r)throw n;return A()}for(i.method=r,i.arg=n;;){var s=i.delegate;if(s){var a=R(s,i);if(a){if(a===y)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===u)throw o=d,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=f;var h=x(t,e,i);if("normal"===h.type){if(o=i.done?d:c,h.arg===y)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(o=d,i.method="throw",i.arg=h.arg)}}}(t,i,s),n}function x(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function E(){}function S(){}function T(){}function w(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(t){function i(e,o,n,s){var a=x(t[e],t,o);if("throw"!==a.type){var h=a.arg,l=h.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){i("next",t,n,s)},function(t){i("throw",t,n,s)}):Promise.resolve(l).then(function(t){h.value=t,n(h)},s)}s(a.arg)}var o;"object"==typeof e.process&&e.process.domain&&(i=e.process.domain.bind(i)),this._invoke=function(t,e){function r(){return new Promise(function(o,r){i(t,e,o,r)})}return o=o?o.then(r,r):r()}}function R(t,e){var o=t.iterator[e.method];if(o===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,R(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=x(o,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,y;var n=r.arg;return n?n.done?(e[t.resultName]=n.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,y):n:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=i,e.done=!0,e};return n.next=n}}return{next:A}}function A(){return{value:i,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,i("DuR2"))},SpdK:function(t,e,i){var o;o=function(){"use strict";function t(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}function e(t,e){return t<e?-1:t>e?1:0}return function(i,o,r,n,s){!function e(i,o,r,n,s){for(;n>r;){if(n-r>600){var a=n-r+1,h=o-r+1,l=Math.log(a),p=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*p*(a-p)/a)*(h-a/2<0?-1:1),c=Math.max(r,Math.floor(o-h*p/a+u)),f=Math.min(n,Math.floor(o+(a-h)*p/a+u));e(i,o,c,f,s)}var d=i[o],y=r,g=n;for(t(i,r,o),s(i[n],d)>0&&t(i,r,n);y<g;){for(t(i,y,g),y++,g--;s(i[y],d)<0;)y++;for(;s(i[g],d)>0;)g--}0===s(i[r],d)?t(i,r,g):t(i,++g,n),g<=o&&(r=g+1),o<=g&&(n=g-1)}}(i,o,r||0,n||i.length-1,s||e)}},t.exports=o()},TmV0:function(t,e,i){i("fZOM"),t.exports=i("FeBl").Object.values},U5ju:function(t,e,i){i("M6a0"),i("zQR9"),i("+tPU"),i("CXw9"),i("EqBC"),i("jKW+"),t.exports=i("FeBl").Promise},VOfZ:function(t,e,i){"use strict";(function(t){var i="undefined"!=typeof window&&window,o="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,r=i||void 0!==t&&t||o;e.root=r,function(){if(!r)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,i("DuR2"))},WhVc:function(t,e,i){"use strict";e.errorObject={e:{}}},Xajo:function(t,e,i){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},Xc4G:function(t,e,i){var o=i("lktj"),r=i("1kS7"),n=i("NpIQ");t.exports=function(t){var e=o(t),i=r.f;if(i)for(var s,a=i(t),h=n.f,l=0;a.length>l;)h.call(t,s=a[l++])&&e.push(s);return e}},Xd32:function(t,e,i){i("+tPU"),i("zQR9"),t.exports=i("5PlU")},Xxa5:function(t,e,i){t.exports=i("jyFz")},"Y/tY":function(t,e,i){var o=i("72Lu"),r={};for(var n in o)o.hasOwnProperty(n)&&(r[o[n]]=n);var s=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var h=s[a].channels,l=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:h}),Object.defineProperty(s[a],"labels",{value:l})}s.rgb.hsl=function(t){var e,i,o=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.min(o,r,n),a=Math.max(o,r,n),h=a-s;return a===s?e=0:o===a?e=(r-n)/h:r===a?e=2+(n-o)/h:n===a&&(e=4+(o-r)/h),(e=Math.min(60*e,360))<0&&(e+=360),i=(s+a)/2,[e,100*(a===s?0:i<=.5?h/(a+s):h/(2-a-s)),100*i]},s.rgb.hsv=function(t){var e,i,o=t[0],r=t[1],n=t[2],s=Math.min(o,r,n),a=Math.max(o,r,n),h=a-s;return i=0===a?0:h/a*1e3/10,a===s?e=0:o===a?e=(r-n)/h:r===a?e=2+(n-o)/h:n===a&&(e=4+(o-r)/h),(e=Math.min(60*e,360))<0&&(e+=360),[e,i,a/255*1e3/10]},s.rgb.hwb=function(t){var e=t[0],i=t[1],o=t[2];return[s.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(i,o))),100*(o=1-1/255*Math.max(e,Math.max(i,o)))]},s.rgb.cmyk=function(t){var e,i=t[0]/255,o=t[1]/255,r=t[2]/255;return[100*((1-i-(e=Math.min(1-i,1-o,1-r)))/(1-e)||0),100*((1-o-e)/(1-e)||0),100*((1-r-e)/(1-e)||0),100*e]},s.rgb.keyword=function(t){var e=r[t];if(e)return e;var i,n,s,a=1/0;for(var h in o)if(o.hasOwnProperty(h)){var l=o[h],p=(n=t,s=l,Math.pow(n[0]-s[0],2)+Math.pow(n[1]-s[1],2)+Math.pow(n[2]-s[2],2));p<a&&(a=p,i=h)}return i},s.keyword.rgb=function(t){return o[t]},s.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,o=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92)+.1805*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)),100*(.2126*e+.7152*i+.0722*o),100*(.0193*e+.1192*i+.9505*o)]},s.rgb.lab=function(t){var e=s.rgb.xyz(t),i=e[0],o=e[1],r=e[2];return o/=100,r/=108.883,i=(i/=95.047)>.008856?Math.pow(i,1/3):7.787*i+16/116,[116*(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116)-16,500*(i-o),200*(o-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.hsl.rgb=function(t){var e,i,o,r,n,s=t[0]/360,a=t[1]/100,h=t[2]/100;if(0===a)return[n=255*h,n,n];e=2*h-(i=h<.5?h*(1+a):h+a-h*a),r=[0,0,0];for(var l=0;l<3;l++)(o=s+1/3*-(l-1))<0&&o++,o>1&&o--,n=6*o<1?e+6*(i-e)*o:2*o<1?i:3*o<2?e+(i-e)*(2/3-o)*6:e,r[l]=255*n;return r},s.hsl.hsv=function(t){var e=t[0],i=t[1]/100,o=t[2]/100,r=i,n=Math.max(o,.01);return i*=(o*=2)<=1?o:2-o,r*=n<=1?n:2-n,[e,100*(0===o?2*r/(n+r):2*i/(o+i)),100*((o+i)/2)]},s.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,o=t[2]/100,r=Math.floor(e)%6,n=e-Math.floor(e),s=255*o*(1-i),a=255*o*(1-i*n),h=255*o*(1-i*(1-n));switch(o*=255,r){case 0:return[o,h,s];case 1:return[a,o,s];case 2:return[s,o,h];case 3:return[s,a,o];case 4:return[h,s,o];case 5:return[o,s,a]}},s.hsv.hsl=function(t){var e,i,o,r=t[0],n=t[1]/100,s=t[2]/100,a=Math.max(s,.01);return o=(2-n)*s,i=n*a,[r,100*(i=(i/=(e=(2-n)*a)<=1?e:2-e)||0),100*(o/=2)]},s.hwb.rgb=function(t){var e,i,o,r,n,s,a,h=t[0]/360,l=t[1]/100,p=t[2]/100,u=l+p;switch(u>1&&(l/=u,p/=u),i=1-p,o=6*h-(e=Math.floor(6*h)),0!=(1&e)&&(o=1-o),r=l+o*(i-l),e){default:case 6:case 0:n=i,s=r,a=l;break;case 1:n=r,s=i,a=l;break;case 2:n=l,s=i,a=r;break;case 3:n=l,s=r,a=i;break;case 4:n=r,s=l,a=i;break;case 5:n=i,s=l,a=r}return[255*n,255*s,255*a]},s.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,o=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,i*(1-r)+r)),255*(1-Math.min(1,o*(1-r)+r))]},s.xyz.rgb=function(t){var e,i,o,r=t[0]/100,n=t[1]/100,s=t[2]/100;return i=-.9689*r+1.8758*n+.0415*s,o=.0557*r+-.204*n+1.057*s,e=(e=3.2406*r+-1.5372*n+-.4986*s)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:12.92*i,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:12.92*o,[255*(e=Math.min(Math.max(0,e),1)),255*(i=Math.min(Math.max(0,i),1)),255*(o=Math.min(Math.max(0,o),1))]},s.xyz.lab=function(t){var e=t[0],i=t[1],o=t[2];return i/=100,o/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116)-16,500*(e-i),200*(i-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},s.lab.xyz=function(t){var e,i,o,r=t[0],n=t[1],s=t[2];e=n/500+(i=(r+16)/116),o=i-s/200;var a=Math.pow(i,3),h=Math.pow(e,3),l=Math.pow(o,3);return i=a>.008856?a:(i-16/116)/7.787,e=h>.008856?h:(e-16/116)/7.787,o=l>.008856?l:(o-16/116)/7.787,[e*=95.047,i*=100,o*=108.883]},s.lab.lch=function(t){var e,i=t[0],o=t[1],r=t[2];return(e=360*Math.atan2(r,o)/2/Math.PI)<0&&(e+=360),[i,Math.sqrt(o*o+r*r),e]},s.lch.lab=function(t){var e,i=t[0],o=t[1];return e=t[2]/360*2*Math.PI,[i,o*Math.cos(e),o*Math.sin(e)]},s.rgb.ansi16=function(t){var e=t[0],i=t[1],o=t[2],r=1 in arguments?arguments[1]:s.rgb.hsv(t)[2];if(0===(r=Math.round(r/50)))return 30;var n=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return 2===r&&(n+=60),n},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){var e=t[0],i=t[1],o=t[2];return e===i&&i===o?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(o/255*5)},s.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},s.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var i;return t-=16,[Math.floor(t/36)/5*255,Math.floor((i=t%36)/6)/5*255,i%6/5*255]},s.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},s.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];3===e[0].length&&(i=i.split("").map(function(t){return t+t}).join(""));var o=parseInt(i,16);return[o>>16&255,o>>8&255,255&o]},s.rgb.hcg=function(t){var e,i,o=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(Math.max(o,r),n),a=Math.min(Math.min(o,r),n),h=s-a;return e=h<1?a/(1-h):0,i=h<=0?0:s===o?(r-n)/h%6:s===r?2+(n-o)/h:4+(o-r)/h+4,i/=6,[360*(i%=1),100*h,100*e]},s.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,o=1,r=0;return(o=i<.5?2*e*i:2*e*(1-i))<1&&(r=(i-.5*o)/(1-o)),[t[0],100*o,100*r]},s.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,o=e*i,r=0;return o<1&&(r=(i-o)/(1-o)),[t[0],100*o,100*r]},s.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,o=t[2]/100;if(0===i)return[255*o,255*o,255*o];var r,n=[0,0,0],s=e%1*6,a=s%1,h=1-a;switch(Math.floor(s)){case 0:n[0]=1,n[1]=a,n[2]=0;break;case 1:n[0]=h,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=a;break;case 3:n[0]=0,n[1]=h,n[2]=1;break;case 4:n[0]=a,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=h}return r=(1-i)*o,[255*(i*n[0]+r),255*(i*n[1]+r),255*(i*n[2]+r)]},s.hcg.hsv=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e),o=0;return i>0&&(o=e/i),[t[0],100*o,100*i]},s.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100*(1-e)+.5*e,o=0;return i>0&&i<.5?o=e/(2*i):i>=.5&&i<1&&(o=e/(2*(1-i))),[t[0],100*o,100*i]},s.hcg.hwb=function(t){var e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},s.hwb.hcg=function(t){var e=t[1]/100,i=1-t[2]/100,o=i-e,r=0;return o<1&&(r=(i-o)/(1-o)),[t[0],100*o,100*r]},s.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},s.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},s.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},s.gray.hsl=s.gray.hsv=function(t){return[0,0,t[0]]},s.gray.hwb=function(t){return[0,100,t[0]]},s.gray.cmyk=function(t){return[0,0,0,t[0]]},s.gray.lab=function(t){return[t[0],0,0]},s.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},s.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},ZaQb:function(t,e,i){var o=i("EqjI"),r=i("77Pl"),n=function(t,e){if(r(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{(o=i("+ZMJ")(Function.call,i("LKZe").f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return n(t,i),e?t.__proto__=i:o(t,i),t}}({},!1):void 0),check:n}},Zx67:function(t,e,i){t.exports={default:i("fS6E"),__esModule:!0}},Zzip:function(t,e,i){t.exports={default:i("/n6Q"),__esModule:!0}},aeHf:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,'/*!\nVueLayers\nWeb map Vue components with the power of OpenLayers\n\n@package vuelayers\n@author Vladimir Vershinin <ghettovoice@gmail.com>\n@version 0.10.7\n@license MIT\n@copyright (c) 2017-2018, Vladimir Vershinin <ghettovoice@gmail.com>\n*/\n/* include OpenLayers styles */\n.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 2px solid blue; }\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute; }\n.ol-scale-line {\n  background: rgba(0, 60, 136, 0.3);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute; }\n.ol-scale-line-inner {\n  border: 1px solid #eee;\n  border-top: none;\n  color: #eee;\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width; }\n.ol-overlay-container {\n  will-change: left,right,top,bottom; }\n.ol-unsupported {\n  display: none; }\n.ol-viewport, .ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent; }\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: auto;\n  -moz-user-select: auto;\n  -ms-user-select: auto;\n  user-select: auto; }\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: grabbing; }\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: grab; }\n.ol-control {\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.4);\n  border-radius: 4px;\n  padding: 2px; }\n.ol-control:hover {\n  background-color: rgba(255, 255, 255, 0.6); }\n.ol-zoom {\n  top: .5em;\n  left: .5em; }\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear; }\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s; }\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em; }\n.ol-full-screen {\n  right: .5em;\n  top: .5em; }\n@media print {\n  .ol-control {\n    display: none; } }\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: white;\n  font-size: 1.14em;\n  font-weight: bold;\n  text-decoration: none;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: rgba(0, 60, 136, 0.5);\n  border: none;\n  border-radius: 2px; }\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0; }\n.ol-zoom-extent button {\n  line-height: 1.4em; }\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  font-size: 1.2em;\n  will-change: transform; }\n.ol-touch .ol-control button {\n  font-size: 1.5em; }\n.ol-touch .ol-zoom-extent {\n  top: 5.5em; }\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  background-color: rgba(0, 60, 136, 0.7); }\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0; }\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px; }\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em); }\n.ol-attribution ul {\n  margin: 0;\n  padding: 0 .5em;\n  font-size: .7rem;\n  line-height: 1.375em;\n  color: #000;\n  text-shadow: 0 0 2px #fff; }\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n  line-height: inherit; }\n.ol-attribution li:not(:last-child):after {\n  content: " "; }\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle; }\n.ol-attribution ul, .ol-attribution button {\n  display: inline-block; }\n.ol-attribution.ol-collapsed ul {\n  display: none; }\n.ol-attribution.ol-logo-only ul {\n  display: block; }\n.ol-attribution:not(.ol-collapsed) {\n  background: rgba(255, 255, 255, 0.8); }\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n  height: 1.1em;\n  line-height: 1em; }\n.ol-attribution.ol-logo-only {\n  background: transparent;\n  bottom: .4em;\n  height: 1.1em;\n  line-height: 1em; }\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em; }\n.ol-attribution.ol-logo-only button,\n.ol-attribution.ol-uncollapsible button {\n  display: none; }\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px; }\n.ol-zoomslider button {\n  position: relative;\n  height: 10px; }\n.ol-touch .ol-zoomslider {\n  top: 5.5em; }\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em; }\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0; }\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: inline-block; }\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid #7b98bc;\n  height: 150px;\n  margin: 2px;\n  width: 150px; }\n.ol-overviewmap:not(.ol-collapsed) button {\n  bottom: 1px;\n  left: 2px;\n  position: absolute; }\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none; }\n.ol-overviewmap:not(.ol-collapsed) {\n  background: rgba(255, 255, 255, 0.8); }\n.ol-overviewmap-box {\n  border: 2px dotted rgba(0, 60, 136, 0.7); }\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move; }\n/* VueLayers base styles */\n.vl-map {\n  width: 100%;\n  height: 100%; }',""])},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var o,r=i("C4MV"),n=(o=r)&&o.__esModule?o:{default:o};e.default=function(t,e,i){return e in t?(0,n.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},bbL7:function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return n});const o="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n=o||void 0!==t&&t||r;!function(){if(!n)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(e,i("DuR2"))},"c/Tr":function(t,e,i){t.exports={default:i("5zde"),__esModule:!0}},cLCP:function(t,e,i){var o=i("egIR");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("rjj0").default)("337d6307",o,!1,{})},cnlX:function(t,e,i){i("iInB");var o=i("FeBl").Object;t.exports=function(t,e){return o.getOwnPropertyDescriptor(t,e)}},crlp:function(t,e,i){var o=i("7KvD"),r=i("FeBl"),n=i("O4g8"),s=i("Kh4W"),a=i("evD5").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=n?{}:o.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},d7EF:function(t,e,i){"use strict";e.__esModule=!0;var o=n(i("us/S")),r=n(i("BO1k"));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return function(t,e){var i=[],o=!0,n=!1,s=void 0;try{for(var a,h=(0,r.default)(t);!(o=(a=h.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,s=t}finally{try{!o&&h.return&&h.return()}finally{if(n)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},dNDb:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},dY0y:function(t,e,i){var o=i("dSzd")("iterator"),r=!1;try{var n=[7][o]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var n=[7],s=n[o]();s.next=function(){return{done:i=!0}},n[o]=function(){return s},t(n)}catch(t){}return i}},egIR:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},emf4:function(t,e,i){"use strict";t.exports=r;var o=i("SpdK");function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function n(t,e,i){if(!i)return e.indexOf(t);for(var o=0;o<e.length;o++)if(i(t,e[o]))return o;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,o,r){r||(r=y(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var n,s=e;s<i;s++)n=t.children[s],h(r,t.leaf?o(n):n);return r}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function p(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,r,n){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,o(t,s,e,i,n),a.push(e,s,s,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],o=this.toBBox;if(!d(t,e))return i;for(var r,n,s,a,h=[];e;){for(r=0,n=e.children.length;r<n;r++)s=e.children[r],d(t,a=e.leaf?o(s):s)&&(e.leaf?i.push(s):f(t,a)?this._all(s,i):h.push(s));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!d(t,e))return!1;for(var o,r,n,s,a=[];e;){for(o=0,r=e.children.length;o<r;o++)if(n=e.children[o],d(t,s=e.leaf?i(n):n)){if(e.leaf||f(t,s))return!0;a.push(n)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var o=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var r=this.data;this.data=o,o=r}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var i,o,r,s,a=this.data,h=this.toBBox(t),l=[],p=[];a||l.length;){if(a||(a=l.pop(),o=l[l.length-1],i=p.pop(),s=!0),a.leaf&&-1!==(r=n(t,a.children,e)))return a.children.splice(r,1),l.push(a),this._condense(l),this;s||a.leaf||!f(a,h)?o?(i++,a=o.children[i],s=!1):a=null:(l.push(a),p.push(i),i=0,o=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:p,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,o){var r,n=i-e+1,a=this._maxEntries;if(n<=a)return s(r=y(t.slice(e,i+1)),this.toBBox),r;o||(o=Math.ceil(Math.log(n)/Math.log(a)),a=Math.ceil(n/Math.pow(a,o-1))),(r=y([])).leaf=!1,r.height=o;var h,l,p,u,c=Math.ceil(n/a),f=c*Math.ceil(Math.sqrt(a));for(g(t,e,i,f,this.compareMinX),h=e;h<=i;h+=f)for(g(t,h,p=Math.min(h+f-1,i),c,this.compareMinY),l=h;l<=p;l+=c)u=Math.min(l+c-1,p),r.children.push(this._build(t,l,u,o-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,o){for(var r,n,s,a,h,l,p,c,f,d;o.push(e),!e.leaf&&o.length-1!==i;){for(p=c=1/0,r=0,n=e.children.length;r<n;r++)h=u(s=e.children[r]),f=t,d=s,(l=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-h)<c?(c=l,p=h<p?h:p,a=s):l===c&&h<p&&(p=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var o=this.toBBox,r=i?t:o(t),n=[],s=this._chooseSubtree(r,this.data,e,n);for(s.children.push(t),h(s,r);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(r,n,e)},_split:function(t,e){var i=t[e],o=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,o);var n=this._chooseSplitIndex(i,r,o),a=y(i.children.splice(n,i.children.length-n));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var o,r,n,s,h,l,p,c,f,d,y,g,v,m;for(l=p=1/0,o=e;o<=i-e;o++)r=a(t,0,o,this.toBBox),n=a(t,o,i,this.toBBox),f=r,d=n,void 0,void 0,void 0,void 0,y=Math.max(f.minX,d.minX),g=Math.max(f.minY,d.minY),v=Math.min(f.maxX,d.maxX),m=Math.min(f.maxY,d.maxY),s=Math.max(0,v-y)*Math.max(0,m-g),h=u(r)+u(n),s<l?(l=s,c=o,p=h<p?h:p):s===l&&h<p&&(p=h,c=o);return c},_chooseSplitAxis:function(t,e,i){var o=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:p;this._allDistMargin(t,e,i,o)<this._allDistMargin(t,e,i,r)&&t.children.sort(o)},_allDistMargin:function(t,e,i,o){t.children.sort(o);var r,n,s=this.toBBox,l=a(t,0,e,s),p=a(t,i-e,i,s),u=c(l)+c(p);for(r=e;r<i-e;r++)n=t.children[r],h(l,t.leaf?s(n):n),u+=c(l);for(r=i-e-1;r>=e;r--)n=t.children[r],h(p,t.leaf?s(n):n),u+=c(p);return u},_adjustParentBBoxes:function(t,e,i){for(var o=i;o>=0;o--)h(e[o],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},exGp:function(t,e,i){"use strict";e.__esModule=!0;var o,r=i("//Fk"),n=(o=r)&&o.__esModule?o:{default:o};e.default=function(t){return function(){var e=t.apply(this,arguments);return new n.default(function(t,i){return function o(r,s){try{var a=e[r](s),h=a.value}catch(t){return void i(t)}if(!a.done)return n.default.resolve(h).then(function(t){o("next",t)},function(t){o("throw",t)});t(h)}("next")})}}},exh5:function(t,e,i){var o=i("kM2E");o(o.S,"Object",{setPrototypeOf:i("ZaQb").set})},fBQ2:function(t,e,i){"use strict";var o=i("evD5"),r=i("X8DO");t.exports=function(t,e,i){e in t?o.f(t,e,r(0,i)):t[e]=i}},fJUb:function(t,e,i){var o=i("77Pl"),r=i("EqjI"),n=i("qARP");t.exports=function(t,e){if(o(t),r(e)&&e.constructor===t)return e;var i=n.f(t);return(0,i.resolve)(e),i.promise}},fS6E:function(t,e,i){i("Kh5d"),t.exports=i("FeBl").Object.getPrototypeOf},fWfb:function(t,e,i){"use strict";var o=i("7KvD"),r=i("D2L2"),n=i("+E39"),s=i("kM2E"),a=i("880/"),h=i("06OY").KEY,l=i("S82l"),p=i("e8AB"),u=i("e6n0"),c=i("3Eo+"),f=i("dSzd"),d=i("Kh4W"),y=i("crlp"),g=i("Xc4G"),v=i("7UMu"),m=i("77Pl"),_=i("EqjI"),b=i("TcQ7"),x=i("MmMw"),E=i("X8DO"),S=i("Yobk"),T=i("Rrel"),w=i("LKZe"),C=i("evD5"),R=i("lktj"),P=w.f,I=C.f,M=T.f,L=o.Symbol,A=o.JSON,O=A&&A.stringify,F=f("_hidden"),N=f("toPrimitive"),D={}.propertyIsEnumerable,j=p("symbol-registry"),k=p("symbols"),G=p("op-symbols"),U=Object.prototype,B="function"==typeof L,V=o.QObject,W=!V||!V.prototype||!V.prototype.findChild,X=n&&l(function(){return 7!=S(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,e,i){var o=P(U,e);o&&delete U[e],I(t,e,i),o&&t!==U&&I(U,e,o)}:I,Y=function(t){var e=k[t]=S(L.prototype);return e._k=t,e},z=B&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},K=function(t,e,i){return t===U&&K(G,e,i),m(t),e=x(e,!0),m(i),r(k,e)?(i.enumerable?(r(t,F)&&t[F][e]&&(t[F][e]=!1),i=S(i,{enumerable:E(0,!1)})):(r(t,F)||I(t,F,E(1,{})),t[F][e]=!0),X(t,e,i)):I(t,e,i)},H=function(t,e){m(t);for(var i,o=g(e=b(e)),r=0,n=o.length;n>r;)K(t,i=o[r++],e[i]);return t},$=function(t){var e=D.call(this,t=x(t,!0));return!(this===U&&r(k,t)&&!r(G,t))&&(!(e||!r(this,t)||!r(k,t)||r(this,F)&&this[F][t])||e)},q=function(t,e){if(t=b(t),e=x(e,!0),t!==U||!r(k,e)||r(G,e)){var i=P(t,e);return!i||!r(k,e)||r(t,F)&&t[F][e]||(i.enumerable=!0),i}},Z=function(t){for(var e,i=M(b(t)),o=[],n=0;i.length>n;)r(k,e=i[n++])||e==F||e==h||o.push(e);return o},J=function(t){for(var e,i=t===U,o=M(i?G:b(t)),n=[],s=0;o.length>s;)!r(k,e=o[s++])||i&&!r(U,e)||n.push(k[e]);return n};B||(a((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function(i){this===U&&e.call(G,i),r(this,F)&&r(this[F],t)&&(this[F][t]=!1),X(this,t,E(1,i))};return n&&W&&X(U,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",function(){return this._k}),w.f=q,C.f=K,i("n0T6").f=T.f=Z,i("NpIQ").f=$,i("1kS7").f=J,n&&!i("O4g8")&&a(U,"propertyIsEnumerable",$,!0),d.f=function(t){return Y(f(t))}),s(s.G+s.W+s.F*!B,{Symbol:L});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Q.length>tt;)f(Q[tt++]);for(var et=R(f.store),it=0;et.length>it;)y(et[it++]);s(s.S+s.F*!B,"Symbol",{for:function(t){return r(j,t+="")?j[t]:j[t]=L(t)},keyFor:function(t){if(!z(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),s(s.S+s.F*!B,"Object",{create:function(t,e){return void 0===e?S(t):H(S(t),e)},defineProperty:K,defineProperties:H,getOwnPropertyDescriptor:q,getOwnPropertyNames:Z,getOwnPropertySymbols:J}),A&&s(s.S+s.F*(!B||l(function(){var t=L();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){for(var e,i,o=[t],r=1;arguments.length>r;)o.push(arguments[r++]);if(i=e=o[1],(_(e)||void 0!==t)&&!z(t))return v(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!z(e))return e}),o[1]=e,O.apply(A,o)}}),L.prototype[N]||i("hJx8")(L.prototype,N,L.prototype.valueOf),u(L,"Symbol"),u(Math,"Math",!0),u(o.JSON,"JSON",!0)},fZOM:function(t,e,i){var o=i("kM2E"),r=i("mbce")(!1);o(o.S,"Object",{values:function(t){return r(t)}})},fxRn:function(t,e,i){i("+tPU"),i("zQR9"),t.exports=i("g8Ux")},g8Ux:function(t,e,i){var o=i("77Pl"),r=i("3fs2");t.exports=i("FeBl").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return o(e.call(t))}},gRE1:function(t,e,i){t.exports={default:i("TmV0"),__esModule:!0}},hGBu:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.message-log {\n  height: 2em;\n  overflow: hidden;\n}\n.stomp-status{\n  font-size: larger;\n}\n.stomp-message {\n  font-size: small;\n}\n\n",""])},hNlV:function(t,e,i){"use strict";(function(t){i.d(e,"r",function(){return T}),i.d(e,"c",function(){return w}),i.d(e,"y",function(){return C}),i.d(e,"g",function(){return R}),i.d(e,"l",function(){return P}),i.d(e,"o",function(){return I}),i.d(e,"j",function(){return L}),i.d(e,"k",function(){return A}),i.d(e,"m",function(){return O}),i.d(e,"n",function(){return N}),i.d(e,"b",function(){return D}),i.d(e,"u",function(){return j}),i.d(e,"x",function(){return k}),i.d(e,"i",function(){return G}),i.d(e,"h",function(){return U}),i.d(e,"e",function(){return V}),i.d(e,"w",function(){return W}),i.d(e,"q",function(){return Y}),i.d(e,"t",function(){return z}),i.d(e,"s",function(){return K}),i.d(e,"z",function(){return H}),i.d(e,"p",function(){return $}),i.d(e,"v",function(){return q}),i.d(e,"f",function(){return Z}),i.d(e,"d",function(){return J}),i.d(e,"a",function(){return Q});var o,r=i("Xxa5"),n=i.n(r),s=i("fZjL"),a=i.n(s),h=i("Zx67"),l=i.n(h),p=i("pFYg"),u=i.n(p),c=i("c/Tr"),f=(i.n(c),n.a.mark(q)),d=(void 0!==t?t:"undefined"!=typeof window?window:{}).isFinite||T,y=Object.prototype,g=Object.prototype,v=y.toString,m=g.toString,_=(o={},v).call(o),b=(o=0,v).call(o),x=(o="",v).call(o),E=(o=!0,v).call(o),S=m.call(Object);function T(){}function w(t){return function(){return t}}function C(){return[]}function R(t){return t}function P(t){return v.call(t)===b}function I(t){return v.call(t)===x}function M(t){return Array.isArray(t)}function L(t){return"number"==typeof t&&d(t)}function A(t){return"function"==typeof t}function O(t){return!isNaN(parseFloat(t))&&d(t)}function F(t){return null!=t&&"object"===(void 0===t?"undefined":u()(t))}function N(t){if(!F(t)||v.call(t)!==_)return!1;var e=l()(t);if(null==e)return!0;var i=e.constructor;return"function"==typeof i&&i instanceof i&&m.call(i)===S}function D(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.find(function(t){return null!=t})}function j(t){var e={},i=function(t){return O(t)||I(t)||M(t)||(e=t,v.call(e)===E)||N(t);var e};return a()(t).forEach(function(o){i(t[o])&&(e[o]=t[o])}),e}function k(t,e){var i=new RegExp(a()(e).map(function(t){return"(\\{"+t+"\\})"}).join("|"),"ig");return t.replace(i,function(t){return e[t.substr(1,t.length-2)]||""})}function G(t,e){if(t===e)return!0;if(null==t||null==e||!F(t)&&!F(e))return t!=t&&e!=e;var i=a()(t),o=a()(e);if(i.length!==o.length)return!1;var r=[],n=function(i,o){for(var n=0,s=i.length;n<s;n++){var a=i[n];if(!r.includes(a)){if(!1===e.hasOwnProperty(a))return!1;var h=o[n];if(!G(t[a],e[h]))return!1;r.push(h)}}return!0};return!1!==n(i,o)&&n(o,i)}function U(t){return!t||function(t){return F(t)&&t.hasOwnProperty("length")}(t)&&0===t.length||F(t)&&0===a()(t).length}function B(t){return!U(t)}function V(t,e){for(var i=a()(t),o=0,r=i.length;o<r;o++){var n=i[o];if(!1===e(t[n],n))return}}function W(t,e,i){var o=i;return V(t,function(t,i){o=e(o,t,i)}),o}function X(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return W(t,function(t,i,o){return e(i,o)&&(M(t)?t.push(i):t[o]=i),t},M(t)?[]:{})}function Y(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return W(t,function(t,i,o){return t[o]=e(i,o),t},M(t)?[]:{})}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:R)}function z(t,e){for(var i=arguments.length,o=Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];return W(o=Array.isArray(e)?e:[e].concat(o),function(e,i){return e[i]=t[i],e},{})}function K(t,e){for(var i=arguments.length,o=Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];return o=Array.isArray(e)?e:[e].concat(o),X(t,function(t,e){return!o.includes(e)})}function H(t){return 0===(t=String(t)).length?"":t[0].toUpperCase()+t.slice(1)}function $(t){return 0===(t=String(t)).length?"":t[0].toLowerCase()+t.slice(1)}function q(t,e){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i=t;case 1:if(!(i<e)){r.next=7;break}return r.next=4,i;case 4:i+=o,r.next=1;break;case 7:case"end":return r.stop()}},f,this)}function Z(t,e,i){return D(new Function("object","try { return object."+e+" } catch (e) {}")(t),i)}function J(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;return X(t,function(t){return!function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;return X(t,function(t){return i(t,e)}).shift()}(e,t,i)})}function Q(t){return t.replace(/([-_]\w)/g,function(t){return t[1].toUpperCase()})}}).call(e,i("DuR2"))},"i/C/":function(t,e,i){i("exh5"),t.exports=i("FeBl").Object.setPrototypeOf},i4uy:function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(i){var o=new Uint8Array(16);t.exports=function(){return i(o),o}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},iInB:function(t,e,i){var o=i("TcQ7"),r=i("LKZe").f;i("uqUo")("getOwnPropertyDescriptor",function(){return function(t,e){return r(o(t),e)}})},iUbK:function(t,e,i){var o=i("7KvD").navigator;t.exports=o&&o.userAgent||""},"jKW+":function(t,e,i){"use strict";var o=i("kM2E"),r=i("qARP"),n=i("dNDb");o(o.S,"Promise",{try:function(t){var e=r.f(this),i=n(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},jebZ:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.row div[data-v-6be49aa4]{\n  padding: 10px 15px;\n  background: rgba(86, 61, 124, .15);\n  border: 1px solid rgba(86, 61, 124, .2)\n}\n",""])},jyFz:function(t,e,i){(function(e){var o="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,r=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,n=r&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,t.exports=i("SldL"),r)o.regeneratorRuntime=n;else try{delete o.regeneratorRuntime}catch(t){o.regeneratorRuntime=void 0}}).call(e,i("DuR2"))},kiBT:function(t,e,i){t.exports={default:i("i/C/"),__esModule:!0}},knuC:function(t,e){t.exports=function(t,e,i){var o=void 0===i;switch(e.length){case 0:return o?t():t.call(i);case 1:return o?t(e[0]):t.call(i,e[0]);case 2:return o?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return o?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return o?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},mbce:function(t,e,i){var o=i("lktj"),r=i("TcQ7"),n=i("NpIQ").f;t.exports=function(t){return function(e){for(var i,s=r(e),a=o(s),h=a.length,l=0,p=[];h>l;)n.call(s,i=a[l++])&&p.push(t?[i,s[i]]:s[i]);return p}}},mmVS:function(t,e,i){"use strict";var o=this&&this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function o(){this.constructor=t}t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},r=i("SKH6"),n=i("B00U"),s=i("yrou"),a=i("r8ZY"),h=function(t){function e(e,i,o){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!e){this.destination=s.empty;break}if("object"==typeof e){if(p(e)){var r=e[a.rxSubscriber]();this.syncErrorThrowable=r.syncErrorThrowable,this.destination=r,r.add(this)}else this.syncErrorThrowable=!0,this.destination=new l(this,e);break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,i,o)}}return o(e,t),e.prototype[a.rxSubscriber]=function(){return this},e.create=function(t,i,o){var r=new e(t,i,o);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(n.Subscription);e.Subscriber=h;var l=function(t){function e(e,i,o,n){var a;t.call(this),this._parentSubscriber=e;var h=this;r.isFunction(i)?a=i:i&&(a=i.next,o=i.error,n=i.complete,i!==s.empty&&(h=Object.create(i),r.isFunction(h.unsubscribe)&&this.add(h.unsubscribe.bind(h)),h.unsubscribe=this.unsubscribe.bind(this))),this._context=h,this._next=a,this._error=o,this._complete=n}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},e.prototype.__tryOrSetError=function(t,e,i){try{e.call(this._context,i)}catch(e){return t.syncErrorValue=e,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h);function p(t){return t instanceof h||"syncErrorThrowable"in t&&t[a.rxSubscriber]}},mybr:function(t,e,i){var o=i("FJpM");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("rjj0").default)("45981c63",o,!1,{})},n0T6:function(t,e,i){var o=i("Ibhu"),r=i("xnc9").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,r)}},oM7Q:function(t,e,i){i("sF+V");var o=i("FeBl").Object;t.exports=function(t,e){return o.create(t,e)}},pFYg:function(t,e,i){"use strict";e.__esModule=!0;var o=s(i("Zzip")),r=s(i("5QVw")),n="function"==typeof r.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===n(o.default)?function(t){return void 0===t?"undefined":n(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":n(t)}},pRCB:function(t,e,i){var o=i("kM2E");o(o.S+o.F*!i("+E39"),"Object",{defineProperties:i("qio6")})},qARP:function(t,e,i){"use strict";var o=i("lOnJ");t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,o){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=o}),this.resolve=o(e),this.reject=o(i)}(t)}},qyJz:function(t,e,i){"use strict";var o=i("+ZMJ"),r=i("kM2E"),n=i("sB3e"),s=i("msXi"),a=i("Mhyx"),h=i("QRG4"),l=i("fBQ2"),p=i("3fs2");r(r.S+r.F*!i("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,u,c=n(t),f="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,g=void 0!==y,v=0,m=p(c);if(g&&(y=o(y,d>2?arguments[2]:void 0,2)),void 0==m||f==Array&&a(m))for(i=new f(e=h(c.length));e>v;v++)l(i,v,g?y(c[v],v):c[v]);else for(u=m.call(c),i=new f;!(r=u.next()).done;v++)l(i,v,g?s(u,y,[r.value,v],!0):r.value);return i.length=v,i}})},r8ZY:function(t,e,i){"use strict";var o=i("VOfZ").root.Symbol;e.rxSubscriber="function"==typeof o&&"function"==typeof o.for?o.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},rZKj:function(t,e,i){var o=i("zOqJ");t.exports=function(t){var e,i,r,n;if(e=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(t)){var s=e[1],a="cmyk"===(h=s.replace(/a$/,""))?4:3;i=o[h],r=e[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(t,e){return/%$/.test(t)&&e===a?parseFloat(t)/100:(/%$/.test(t),parseFloat(t))}),s===h&&r.push(1),n=void 0===r[a]?1:r[a],r=r.slice(0,a),i[h]=function(){return r}}else if(/^#[A-Fa-f0-9]+$/.test(t)){var h;a=(h=t.replace(/^#/,"")).length;i=o.rgb,r=(r=h.split(3===a?/(.)/:/(..)/)).filter(Boolean).map(function(t){return 3===a?parseInt(t+t,16):parseInt(t,16)}),n=1,i.rgb=function(){return r},r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0)}else(i=o.keyword).keyword=function(){return t},r=t,n=1;var l={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{l.rgb=i.rgb(r)}catch(t){}try{l.hsl=i.hsl(r)}catch(t){}try{l.hsv=i.hsv(r)}catch(t){}try{l.cmyk=i.cmyk(r)}catch(t){}try{l.keyword=i.keyword(r)}catch(t){}return l.rgb&&(l.hex="#"+l.rgb.map(function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}).join("")),l.rgb&&(l.rgba=l.rgb.concat(n)),l.hsl&&(l.hsla=l.hsl.concat(n)),l.hsv&&(l.hsva=l.hsv.concat(n)),l.cmyk&&(l.cmyka=l.cmyk.concat(n)),l}},rx2J:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.map[data-v-f1836ca4] {\n  height: 100%;\n  width: 100%;\n}\n.klab-viewer[data-v-f1836ca4] {\n  position: relative;\n}\n",""])},"sF+V":function(t,e,i){var o=i("kM2E");o(o.S,"Object",{create:i("Yobk")})},t8x9:function(t,e,i){var o=i("77Pl"),r=i("lOnJ"),n=i("dSzd")("species");t.exports=function(t,e){var i,s=o(t).constructor;return void 0===s||void 0==(i=o(s)[n])?e:r(i)}},u2KI:function(t,e,i){t.exports={default:i("O4R0"),__esModule:!0}},ujcs:function(t,e){e.read=function(t,e,i,o,r){var n,s,a=8*r-o-1,h=(1<<a)-1,l=h>>1,p=-7,u=i?r-1:0,c=i?-1:1,f=t[e+u];for(u+=c,n=f&(1<<-p)-1,f>>=-p,p+=a;p>0;n=256*n+t[e+u],u+=c,p-=8);for(s=n&(1<<-p)-1,n>>=-p,p+=o;p>0;s=256*s+t[e+u],u+=c,p-=8);if(0===n)n=1-l;else{if(n===h)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,o),n-=l}return(f?-1:1)*s*Math.pow(2,n-o)},e.write=function(t,e,i,o,r,n){var s,a,h,l=8*n-r-1,p=(1<<l)-1,u=p>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:n-1,d=o?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),(e+=s+u>=1?c/h:c*Math.pow(2,1-u))*h>=2&&(s++,h/=2),s+u>=p?(a=0,s=p):s+u>=1?(a=(e*h-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[i+f]=255&a,f+=d,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[i+f]=255&s,f+=d,s/=256,l-=8);t[i+f-d]|=128*y}},"us/S":function(t,e,i){t.exports={default:i("Xd32"),__esModule:!0}},vImi:function(t,e,i){var o=i("Y/tY");function r(t){var e=function(){for(var t={},e=Object.keys(o),i=e.length,r=0;r<i;r++)t[e[r]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;)for(var r=i.pop(),n=Object.keys(o[r]),s=n.length,a=0;a<s;a++){var h=n[a],l=e[h];-1===l.distance&&(l.distance=e[r].distance+1,l.parent=r,i.unshift(h))}return e}function n(t,e){return function(i){return e(t(i))}}function s(t,e){for(var i=[e[t].parent,t],r=o[e[t].parent][t],s=e[t].parent;e[s].parent;)i.unshift(e[s].parent),r=n(o[e[s].parent][s],r),s=e[s].parent;return r.conversion=i,r}t.exports=function(t){for(var e=r(t),i={},o=Object.keys(e),n=o.length,a=0;a<n;a++){var h=o[a];null!==e[h].parent&&(i[h]=s(h,e))}return i}},wtjU:function(t,e,i){var o=i("hGBu");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,i("rjj0").default)("e465e9ca",o,!1,{})},yEsh:function(t,e,i){"use strict";e.__esModule=!0;var o=n(i("Zx67")),r=n(i("K6ED"));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,n){null===e&&(e=Function.prototype);var s=(0,r.default)(e,i);if(void 0===s){var a=(0,o.default)(e);return null===a?void 0:t(a,i,n)}if("value"in s)return s.value;var h=s.get;return void 0!==h?h.call(n):void 0}},yrou:function(t,e,i){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},zOqJ:function(t,e,i){var o=i("Y/tY"),r=i("vImi"),n={};Object.keys(o).forEach(function(t){n[t]={},Object.defineProperty(n[t],"channels",{value:o[t].channels}),Object.defineProperty(n[t],"labels",{value:o[t].labels});var e=r(t);Object.keys(e).forEach(function(i){var o=e[i];n[t][i]=function(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var i=t(e);if("object"==typeof i)for(var o=i.length,r=0;r<o;r++)i[r]=Math.round(i[r]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}(o),n[t][i].raw=function(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(o)})}),t.exports=n},zwoO:function(t,e,i){"use strict";e.__esModule=!0;var o,r=i("pFYg"),n=(o=r)&&o.__esModule?o:{default:o};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,n.default)(e))&&"function"!=typeof e?t:e}}});
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"6BcA":function(t,e,n){"use strict";var i=n("dbei"),s=n.n(i);s.a},"7QM7":function(t,e,n){"use strict";var i=n("wxf7"),s=n.n(i);s.a},A0nk:function(t,e,n){},FSLv:function(t,e,n){"use strict";var i=n("XXY3"),s=n.n(i);s.a},JFNH:function(t,e,n){"use strict";var i=n("ofTP"),s=n.n(i);s.a},JXPH:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:t.size,height:t.size,viewBox:"-120 -120 250 250",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("image",{attrs:{x:"-100",y:"-100",width:"200",height:"200","xlink:href":n("TfIi")}}),i("circle",{class:{moving:this.moving},style:{fill:t.realColor},attrs:{id:"spinner",cx:"0",cy:"-90",r:t.ball}})])},s=[];i._withStripped=!0;var a=n("MVZn"),o=n.n(a),c=(n("xfY5"),n("4IOb")),r=n("L2JU"),l={props:{size:{type:Number,default:200},ball:{type:Number,default:12},color:{type:String,default:c["H"].getBrand("primary")},animated:{type:Boolean,default:!0},storeControlled:{type:Boolean,default:!1}},computed:o()({},Object(r["c"])("view",["spinner"]),{moving:function(){return this.storeControlled?this.spinner.animated:this.animated},realColor:function(){return this.storeControlled?this.spinner.colorValue:this.color}}),watch:{spinner:{handler:function(){this.spinner.errorMessage&&console.error(this.spinner.errorMessage)},deep:!1}}},d=l,g=(n("FSLv"),n("KHd+")),M=Object(g["a"])(d,i,s,!1,null,"e7d23a42",null);e["a"]=M.exports},KbJ9:function(t,e,n){"use strict";var i=n("A0nk"),s=n.n(i);s.a},M4pf:function(t,e,n){},OZQF:function(t,e,n){},TfIi:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMzAwIgogICBoZWlnaHQ9IjMxNS45MjI1OCIKICAgdmlld0JveD0iMCAwIDc5LjM3NDk5OCA4My41ODc4NTEiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzgiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImtsYWItc3Bpbm5lci5zdmciCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1Ij4KICA8ZGVmcwogICAgIGlkPSJkZWZzMiIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMC45NjAxOTk4NCIKICAgICBpbmtzY2FwZTpjeD0iLTIzOS45OTE1MyIKICAgICBpbmtzY2FwZTpjeT0iNy4xMTA3MjY4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJtbSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTkyMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSIxMDI4IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjEiCiAgICAgdW5pdHM9InB4IgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTUiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9ImtsYWItZWxlcGhhbnQtbGF5ZXIiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00My40NjU1NzQsLTE1NS4zNjMwOSkiPgogICAgPHBhdGgKICAgICAgIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiCiAgICAgICBpZD0ia2xhYi1lbGVwaGFudCIKICAgICAgIGQ9Im0gODQuNzYxOTA2LDIzOC44OTY5MSBjIDAsLTAuMDQ3MiAwLjE3NzcxOCwtMC4zODEwNyAwLjM5NDkzLC0wLjc0MTk3IDAuNzcxODU3LC0xLjI4MjQ4IDEuMzAwNTAxLC0yLjgzNjcxIDEuNDk2NDA2LC00LjM5OTUgMC4xMTg1ODQsLTAuOTQ1OTcgMC4wNjE4NiwtMi42NjMzNiAtMC4xMTgxNTIsLTMuNTc3MjkgLTAuNDUyNjU1LC0yLjI5ODExIC0xLjcwMzk3NiwtNC41NTk0NyAtMy40MDMwMzYsLTYuMTQ5ODkgLTAuNzI0MzA1LC0wLjY3Nzk5IC0xLjk4NDEwNiwtMS41NzU0OCAtMi4yMTE0ODYsLTEuNTc1NDggLTAuMDkwNjQsMCAtMC4xOTI1NDYsMC4xNTY0OCAtMC4zMjAyNTcsMC40OTE3NiAtMC4xMDMwMjQsMC4yNzA0NyAtMC4zOTQ0NTQsMC45MDEzMSAtMC42NDc2MTksMS40MDE4NiAtMi4wNjM4MDQsNC4wODA0NyAtNS44NDI3ODUsNi45MzAyOSAtMTAuNDk0NTcsNy45MTQyIC0wLjk0MTEzNiwwLjE5OTA3IC0xLjE2NzQ4NSwwLjIxNjY3IC0yLjgzMjU3NywwLjIyMDI5IC0xLjg5ODM1LDAuMDA0IC0yLjMyNDY5OSwtMC4wNDEzIC0zLjc3Njc2NywtMC40MDI3OSAtMC43MTQxODksLTAuMTc3NzcgLTIuMDY1MDQ1LC0wLjYzOTA4IC0yLjQyNjIzMiwtMC44Mjg1NCAtMC4yNDkwNjgsLTAuMTMwNjQgLTAuMDg3MDMsLTAuMTU0OTIgMC40MjAxNzQsLTAuMDYyOSAwLjI2ODgzNCwwLjA0ODcgMC45MzAzMTYsMC4xMTcyNiAxLjQ2OTk2LDAuMTUyMjYgNC4xMjA4NzEsMC4yNjcyNyA4LjEyNDIyNywtMS4yNDEwNiAxMS4wNDQyNzIsLTQuMTYxMTEgMC45ODM5NzcsLTAuOTgzOTcgMi4xNDk3NzcsLTIuNTE4NzMgMi4wMTUzNDUsLTIuNjUzMTYgLTAuMDI1MjMsLTAuMDI1MiAtMC40ODEwNjUsMC4xMzEzNiAtMS4wMTI5NTgsMC4zNDc5OSAtMC41MzE4OTYsMC4yMTY2MyAtMS4yNTAzNCwwLjQ4NTE5IC0xLjU5NjU0MywwLjU5Njc5IC01LjY3NTgzLDEuODI5NzggLTExLjk4MjI0OCwxLjA0OTg0IC0xNy4wMTIyNSwtMi4xMDM5NiAtMS44OTYzMDgsLTEuMTg4OTggLTMuNzYwNTU4LC0yLjg1NDA1IC01LjA1ODYwOCwtNC41MTgxMyAtNi4wMDAyMiwtNy42OTIxOSAtOC40MDU2MDcsLTE3LjQ0OTMzIC02LjY4MTU0OSwtMjcuMTAyODUgMC44Nzc1ODQsLTQuOTEzODYgMy40MjIyMTcsLTEwLjkxNDQ3IDYuNDYzNzEzLC0xNS4yNDIzNiAzLjI2NTcyNywtNC42NDY5NiA3LjY5OTc0MiwtOC43NzA3IDEyLjIyMzYxOSwtMTEuMzY4MjUgMS44MTczMjYsLTEuMDQzNDkgNC4zOTk0NzMsLTIuMjgwNDIgNC42NTEwMjQsLTIuMjI3OTggMC4wNzgzMiwwLjAxNjMgLTAuMDMyNTUsMC4yMzEyNiAtMC4zNjQzMTYsMC43MDYyNyAtMC4yNjIyOTksMC4zNzU1NSAtMC40NzY5MDYsMC43MjAxIC0wLjQ3NjkwNiwwLjc2NTY2IDAsMC4wODY0IDAuMDM2NjksMC4wOTY5IDAuODU2ODA1LDAuMjQzOTcgMS4wNDM3NDIsMC4xODcxOCAxLjA0ODY5NCwwLjE3MTQ3IC0wLjI2OTgzOSwwLjg1NjEzIC0zLjYyODU2NCwxLjg4NDE4IC02LjgzMjU0NSw0LjMwNjE0IC05LjQxNzE2Miw3LjExODY3IC01LjIxNjcwOCw1LjY3NjcgLTguMjg2NzAxLDEyLjYzOTUzIC04Ljk1NTI5NywyMC4zMTA4NyAtMC4xODc5MzUsMi4xNTYzMSAtMC4wNTg2MSw1LjgwMDQ2IDAuMjc5MjIzLDcuODY4MjYgMC42NjIzNTcsNC4wNTQxMSAwLjk5MjU0LDUuMjU4NDIgMi4wMDYyMjcsNy4zMTc0OSAxLjY5MzIxLDMuNDM5MzcgNC40MzEyNyw2LjE5OTU3IDcuODI5MDI0LDcuODkyMzQgMS42OTg3MTIsMC44NDYzIDMuMTMyMzE1LDEuMzA3NTMgNC4zNDk4MTQsMS4zOTk0NCAxLjgxMzc1LDAuMTM2OTIgMy45NTU5OTIsLTAuNTY2ODEgNS4yNTc5NzYsLTEuNzI3MjUgMS4xMDE5NzksLTAuOTgyMTggMi4zNTU5NDEsLTMuNDg2MSAyLjk4MTI3NCwtNS45NTMwMiAwLjQ2NTAxMSwtMS44MzQ0NiAwLjY0MzY1OSwtMy41NTcwMiAwLjc0MjQyNSwtNy4xNTg2MyAwLjA3NjQ2LC0yLjc4ODM2IDAuMTUwNTE0LC0zLjQwNDIyIDAuNTk2MjIxLC00Ljk1ODU1IDEuNDMzNjAxLC00Ljk5OTQ0IDQuMjMyNjI4LC05LjQ5NjM5IDcuNzQ4ODI2LC0xMi40NDkzNSAyLjE4NzkzNiwtMS44Mzc0NyA1LjE3MDMwMywtMy40MDcwNiA3Ljc0NTkyOSwtNC4wNzY2MyAyLjk5Mjc1NiwtMC43NzggNS44Mzc0MDUsLTAuODk4NTcgOC45MzgyODUsLTAuMzc4ODYgbCAwLjk4NzAxOSwwLjE2NTQzIDAuNDAzNjgxLC0wLjI0ODM5IGMgMC43MTYwNjQsLTAuNDQwNiAxLjMwMDkyMiwtMC42MjA4MSAzLjMzNDU5NiwtMS4wMjc0NyA1LjM4OTMyLC0xLjA3NzY2IDguMjU1MTIsLTIuMTQyNzMgMTEuMzgzNzksLTQuMjMwNzIgMC41MzQ5NywtMC4zNTcwMyAwLjk5OTMzLC0wLjY0OTE0IDEuMDMxOTMsLTAuNjQ5MTQgMC4wNywwIDEuMjA3NDgsMS41NDc5OCAxLjg3OTEsMi41NTcxOSA1LjgxNDUzLDguNzM3MjEgNy45MjIzOSwxOS41MTcwNSA1LjgzODc0LDI5Ljg2MDA4IC0yLjIzMjI1LDExLjA4MDY0IC05LjAwMzgsMjAuNTg3NDkgLTE4LjgwMzc3LDI2LjM5OTM2IC00Ljc1ODY4LDIuODIyMTIgLTEwLjU4MTc2LDQuNzMwMTEgLTE2LjA1MTI3MSw1LjI1OTMzIC0yLjExMDc5NCwwLjIwNDI0IC0yLjQzOTE2MywwLjIyMTU1IC0yLjQzOTE2MywwLjEyODU3IHogTSA4MC44NzMwNDUsMjAyLjgwODIgYyAwLjUwMDc3NSwtMC4yNDUyMSAxLjA3OTcwNywtMC44Mjk2NyAxLjI5MjQxNiwtMS4zMDQ3OCAwLjE4NDA4MiwtMC40MTExNiAwLjEyNDI4MywtMC40OTcwOSAtMC41NTk0NTksLTAuODAzOTMgLTEuMjQyNDQ4LC0wLjU1NzU4IC0yLjk1MzE1LC0wLjIwNjYxIC0zLjk1MzI5MSwwLjgxMTA2IC0wLjI5NDAzLDAuMjk5MTkgLTAuMzY5OTcsMC40MjU4OCAtMC4zMzAyNjMsMC41NTA5OSAwLjA2MTAzLDAuMTkyMjggMC42ODcyMjMsMC42Njg1MSAxLjExNjY3OCwwLjg0OTI1IDAuNzA2NzY4LDAuMjk3NDUgMS43MDI2NjIsMC4yNTU0NyAyLjQzMzkxOSwtMC4xMDI1OSB6IgogICAgICAgc3R5bGU9ImZpbGw6IzAxMDEwMjtzdHJva2Utd2lkdGg6MC4wNzg2ODI2OSI+CiAgICAgIDx0aXRsZQogICAgICAgICBpZD0idGl0bGUzMzk1Ij5rLkxBQiBFbGVwaGFudDwvdGl0bGU+CiAgICA8L3BhdGg+CiAgPC9nPgo8L3N2Zz4K"},XXY3:function(t,e,n){},aAhD:function(t,e,n){"use strict";var i=n("M4pf"),s=n.n(i);s.a},dbei:function(t,e,n){},"kmF/":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"column bg-red-1"},[n("div",{staticClass:"col row full-height bg-red-1",attrs:{id:"viewer-container"}},[n("viewer")],1),n("div",{staticClass:"col-1 row bg-red-1"},[n("klab-log")],1),n("klab-main-control"),n("q-modal",{directives:[{name:"show",rawName:"v-show",value:t.connectionState===t.$constants.CONNECTION_UNKNOWN||t.connectionState===t.$constants.CONNECTION_ERROR||t.connectionState===t.$constants.CONNECTION_WORKING,expression:"connectionState === $constants.CONNECTION_UNKNOWN ||\n              connectionState === $constants.CONNECTION_ERROR ||\n              connectionState === $constants.CONNECTION_WORKING"}],attrs:{minimized:"","no-esc-dismiss":"","no-backdrop-dismiss":"","content-css":{width:"30vw","background-color":"rgba("+t.hexToRgb(t.modalColor)+", .5)"},"content-classes":["text-center","round-modal","q-ma-sm"]},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[n("div",{staticClass:"bg-white q-ma-md round-modal"},[t.connectionState===t.$constants.CONNECTION_DOWN?n("div",[n("div",{staticClass:"q-display-1 q-pa-md bg-opaque-white round-modal text-bol",style:{color:t.modalColor}},[t._v("\n          "+t._s(t.modalText)+"\n        ")]),n("q-btn",{attrs:{color:"secondary"},on:{click:t.reconnect}},[t._v(t._s(t.$t("label.reconnect"))+"\n        ")])],1):n("div",[n("div",{staticClass:"q-display-1 q-pa-md round-modal text-bold",style:{color:t.modalColor}},[t._v("\n          "+t._s(t.modalText)+"\n        ")]),n("klab-spinner",{attrs:{color:t.modalColor,size:200}})],1)])])],1)},s=[];i._withStripped=!0;var a=n("lSNA"),o=n.n(a),c=n("MVZn"),r=n.n(c),l=n("L2JU"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"main-control-container",on:{"search-on":t.searchActivated}},[n("transition",{attrs:{appear:"","enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[n("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.isHidden,expression:"isHidden"}],staticClass:"fixed shadow-1",staticStyle:{left:".5em",top:"1.5em"},attrs:{color:t.controlColor.name,round:"",size:"17px",icon:"ion-ios-bookmarks"},on:{click:t.show}})],1),n("transition",{attrs:{appear:"","enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[n("q-card",{directives:[{name:"show",rawName:"v-show",value:!t.isHidden,expression:"!isHidden"},{name:"draggable",rawName:"v-draggable",value:t.draggableConfig,expression:"draggableConfig"}],class:["no-box","shadow","bg-transparent",t.hasContext?"with-context":"without-context","absolute-position"],attrs:{flat:!0}},[n("q-card-title",{ref:"dr-handler",class:[t.hasContext?"no-b-radius":"","q-pa-xs","no-margin","q-ma-xs"],style:{"background-color":"rgba("+t.hexToRgb(t.controlColor.value)+",.3)"},attrs:{id:"q-card-title"}},[n("div",{style:{border:"2px solid "+t.controlColor.value},attrs:{id:"spinner-div"}},[n("klab-spinner",{attrs:{id:"main-spinner","store-controlled":!0,color:t.controlColor.value,size:40,ball:25},nativeOn:{dblclick:function(e){return t.hide(e)}}})],1),t.searchIsActive?n("div",{staticClass:"q-pa-md",attrs:{id:"search-div"}},[n("q-search",{attrs:{placeholder:"not working",color:t.controlColor.name,autofocus:!0,clearable:!1},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"esc",27,e.key,"Escape")?(e.preventDefault(),t.searchStop(e)):null}},model:{value:t.searchInKeylab,callback:function(e){t.searchInKeylab=e},expression:"searchInKeylab"}},[n("q-autocomplete")],1)],1):n("div",{staticClass:"q-pa-md text-white",attrs:{id:"text-div"}},[t._v("\n        "+t._s(null===t.contextLabel?t.$t("label.noContext"):t.contextLabel)+"\n      ")]),n("q-btn",{attrs:{color:t.controlColor.name,round:"",size:"sm",icon:"ion-ios-arrow-back",id:"hide-btn"},on:{click:t.hide}})],1),n("q-card-main",{directives:[{name:"show",rawName:"v-show",value:t.hasContext&&!t.isHidden,expression:"hasContext && !isHidden"}],staticClass:"q-pa-xs no-margin"},[n(t.content,{tag:"component"})],1)],1)],1)],1)},g=[];d._withStripped=!0;var M=n("on+m"),N=n("JXPH"),I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.tree.length>0?n("q-tree",{ref:"klabTree",attrs:{nodes:t.tree,"node-key":"id",ticked:t.ticked,selected:t.selected,"tick-strategy":"strict","text-color":"white","control-color":"white",color:"white",dark:!0},on:{"update:ticked":function(e){t.ticked=e},"update:selected":function(e){t.selected=e}}}):n("div",{staticClass:"q-ma-md text-center text-white"},[t._v("\n  "+t._s(t.$t("label.noObservation"))+"\n")])},u=[];I._withStripped=!0;var C=n("RIqP"),w=n.n(C),h=(n("rGqo"),n("sSqL")),O={name:"klabTree",data:function(){return{ticked:[],selected:null}},computed:r()({},Object(l["c"])("data",["tree"])),methods:r()({},Object(l["b"])("data",["hideNode","showNode","selectNode"]),Object(l["b"])("view",["setSpinner"])),watch:{selected:function(t){this.selectNode(t),this.selected=null},ticked:function(t,e){var n=this;if(e!==t)if(e.length>t.length){var i=e.filter(function(e){return t.indexOf(e)<0})[0],s=h["b"].findNodeById(this.tree,i);if(s)if(s.type===h["a"].GEOMTYP_FOLDER){var a=[],o=function t(e){e.forEach(function(e){e.noTick||(a.push(e.id),n.hideNode(e.id)),e.children&&e.children.length>0&&t(e.children)})};o(s.children),a.length>0&&(this.ticked=this.ticked.filter(function(t){return-1===a.indexOf(t)}))}else null!==s.folderId&&-1!==this.ticked.indexOf(s.folderId)&&this.ticked.splice(this.ticked.indexOf(s.folderId),1),this.hideNode(i)}else{var c=t[t.length-1],r=h["b"].findNodeById(this.tree,c);if(r.type===h["a"].GEOMTYP_FOLDER){var l=[],d=function t(e){var i,s=!0;(e.forEach(function(e){e.noTick||(l.push(e.id),n.showNode({nodeId:e.id,selectMainViewer:s}),s&&(s=!1)),e.children&&e.children.length>0&&t(e.children)}),l.length>0)&&(l=l.filter(function(t){return-1===n.ticked.indexOf(t)}),(i=n.ticked).push.apply(i,w()(l)))};d(r.children)}else this.showNode({nodeId:c,selectMainViewer:!0})}}}},A=O,L=(n("JFNH"),n("KHd+")),T=Object(L["a"])(A,I,u,!1,null,null,null),j=T.exports,y={name:"klabMainControl",data:function(){return{isHidden:!1,draggableConfig:{handle:void 0,resetInitialPos:!0,boundingElement:void 0},content:"KlabTree",searchActive:!1,searchInKeylab:""}},computed:r()({},Object(l["c"])("data",["contextLabel","hasContext"]),Object(l["c"])("view",["spinner","searchIsActive"]),{controlColor:function(){return{value:this.spinner.colorValue,name:this.spinner.color}}}),methods:r()({},Object(l["b"])("view",["searchStop"]),{hide:function(){this.draggableConfig.resetInitialPos=!1,this.isHidden=!0},show:function(){this.draggableConfig.resetInitialPos=!0,this.isHidden=!1},searchActivated:function(){}}),watch:{},mounted:function(){var t=this;this.draggableConfig.handle=this.$refs["dr-handler"],this.draggableConfig.boundingRect=document.getElementById("viewer-container").getBoundingClientRect(),this.$eventBus.$on("map-size-changed",function(){t.draggableConfig.boundingRect=document.getElementById("viewer-container").getBoundingClientRect()})},directives:{Draggable:M["Draggable"]},components:{KlabTree:j,KlabSpinner:N["a"]}},m=y,v=(n("mYuV"),Object(L["a"])(m,d,g,!1,null,null,null)),p=v.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row full-width bg-gray-1"},[n("div",{staticClass:"col-1 no-padding stomp-status bg-gray-1"},[n("q-icon",{attrs:{name:t.CONN_INDICATOR[t.connectionState].icon,color:t.CONN_INDICATOR[t.connectionState].color}})],1),n("div",{staticClass:"col-3 message-log q-pt-xs stomp-message bg-gray-1"},[n("q-icon",{attrs:{name:"call_received",color:t.hasError?"negative":"positive"}}),n("span",{class:"text-"+(t.hasError?"negative":"positive")},[t._v(t._s(t.receivedMessage))])],1),n("div",{staticClass:"ic"}),n("div",{staticClass:"col-4 message-log q-pt-xs stomp-message bg-gray-1"},[n("q-icon",{attrs:{name:"call_made"}}),n("span",[t._v(t._s(t.sendedMessage))])],1),n("div",{staticClass:"col-4 message-log q-pt-xs stomp-message bg-gray-1"},[n("q-icon",{attrs:{name:"ion-at",color:t.lastLogActionMessage.color}}),n("span",{class:["text-"+t.lastLogActionMessage.color]},[t._v("\n      "+t._s(t.lastLogActionMessage.text)+" / "+t._s(t.lastLogActionMessage.time)+"\n    ")])],1)])},z=[];b._withStripped=!0;var D={name:"KLabLog",data:function(){var t;return{CONN_INDICATOR:(t={},o()(t,this.$constants.CONNECTION_UP,{icon:"signal_wifi_4_bar",color:"positive"}),o()(t,this.$constants.CONNECTION_DOWN,{icon:"signal_wifi_off",color:"positive"}),o()(t,this.$constants.CONNECTION_WORKING,{icon:"sync",color:"warning"}),o()(t,this.$constants.CONNECTION_UNKNOWN,{icon:"signal_wifi_4_bar",color:"positive"}),o()(t,this.$constants.CONNECTION_ERROR,{icon:"signal_wifi_off",color:"negative"}),t)}},computed:r()({},Object(l["d"])("stomp",["connectionState"]),Object(l["c"])("stomp",["lastSendedMessage","lastReceivedMessage","queuedMessage"]),Object(l["c"])("view",["lastLogAction"]),{hasError:function(){return this.lastReceivedMessage&&this.lastReceivedMessage.type===this.$constants.TYPE_ERROR},receivedMessage:function(){if(this.lastReceivedMessage){if(this.lastReceivedMessage.type===this.$constants.TYPE_ERROR)return""===this.lastReceivedMessage.message.reason?this.$t("label.klabUnknownError"):this.lastReceivedMessage.message.reason;if(""!==this.lastReceivedMessage.message.body){var t,e=JSON.parse(this.lastReceivedMessage.message.body);return t="string"===typeof e.payload?e.payload:e.type||this.lastReceivedMessage.message.body.command,"".concat(t," - ").concat(this.lastReceivedMessage.date)}return"".concat(this.lastReceivedMessage.message.command," - ").concat(this.lastReceivedMessage.date)}return this.$t("label.klabNoMessage")},sendedMessage:function(){return this.queuedMessage?this.$t("label.klabMessagesToSend"):this.lastSendedMessage?"".concat(this.lastSendedMessage.date," [").concat(h["b"].formatExtent(this.lastSendedMessage.payload),"]")||this.$t("label.klabNoDate"):this.$t("label.klabNoMessage")},lastLogActionMessage:function(){var t=this.lastLogAction();return t&&t.payload?{text:t.payload.message||t.payload,time:t.time?t.time.format("HH:mm:ss"):"no time",color:t.type===this.$constants.TYPE_ERROR?"negative":t.type===this.$constants.TYPE_WARN?"warning":"positive"}:this.$t("label.klabNoMessage")}}),watch:{},mounted:function(){}},x=D,f=(n("aAhD"),Object(L["a"])(x,b,z,!1,null,null,null)),E=f.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"no-padding relative-position full-width"},t._l(t.viewers,function(e){return n("div",{key:e.idx,class:["no-padding",e.main?"absolute-top full-height full-width":"absolute thumb-view"],style:t.viewerStyle(e)},[e.main?t._e():n("div",{staticClass:"thumb-viewer-title absolute-top"},[n("div",{staticClass:"relative-position"},[n("div",{staticClass:"thumb-viewer-label float-left q-ma-sm"},[t._v("\n        "+t._s(e.idx)+"\n      ")]),n("div",{staticClass:"float-right q-ma-sm"},[n("q-btn",{staticClass:"shadow-1",attrs:{round:"",color:"red-6",size:"xs",icon:"ion-ios-arrow-up"},on:{click:function(n){t.setMainViewer(e.idx)}}})],1)])]),n(e.type,{tag:"component",attrs:{idx:e.idx}})],1)}))},k=[];S._withStripped=!0;var Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fit no-padding map-viewer"},[n("div",{ref:"map"+t.idx,staticClass:"fit",attrs:{id:"map"+t.idx}}),n("q-resize-observable",{on:{resize:t.handleResize}})],1)},R=[];Y._withStripped=!0;n("dRSK"),n("xfY5");var _=n("J4zp"),G=n.n(_),Z=n("0kf8"),Q=n("I2m6"),U=n("wd/R"),B=n.n(U);function W(t,e,n,i,s){var a=Q["b"].validateJsonSchema(i,n);return{validated:a,body:{messageClass:t,type:e,payloadClass:n,payload:i,identity:s,timestamp:B()().valueOf(),inResponseTo:null}}}var P={SPATIAL_EXTENT:function(t){var e=G()(t,4),n=e[0],i=e[1],s=e[2],a=e[3];return{south:i,west:n,north:a,east:s}}},H={REGION_OF_INTEREST:function(t,e){return W(Z["b"].CLASS_USERCONTEXTCHANGE,Z["b"].TYPE_REGIONOFINTEREST,Z["b"].PAYLOAD_CLASS_SPATIALEXTENT,P.SPATIAL_EXTENT(t),e)}},X=n("SAzV"),$=n("0OmE"),J=n("Jz61"),K=n("LvFn"),q=n("oiaU"),V=n("jzpJ"),F=n("JW8z"),tt=n("fMpr"),et={OSM_LAYER:new X["a"]({title:"Open Street Map",baseLayer:!0,source:new $["b"]}),STAMEN_WATER_COLOR_LAYER:new X["a"]({title:"Stamen Watercolor",baseLayer:!0,source:new J["a"]({layer:"watercolor"})}),OPEN_TOPO_MAT:new X["a"]({title:"Open Topo",baseLayer:!0,source:new K["a"]({url:"//{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:"© OpenTopoMap"})}),GOOGLE_HYBRID:new X["a"]({title:"Google Hybrid",baseLayer:!0,source:new K["a"]({crossOrigin:"anonymous",url:"http://mt0.google.com/vt/lyrs=y&hl=en&x={x}&y={y}&z={z}&s=Ga",attribution:"© 2018 Google, Inc"})}),GOOGLE_STREET:new X["a"]({title:"Google Street",baseLayer:!0,source:new K["a"]({crossOrigin:"anonymous",url:"http://mt{0-3}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:"© 2018 Google, Inc"})}),GOOGLE_TERRAIN:new X["a"]({title:"Google Terrain",baseLayer:!0,source:new K["a"]({crossOrigin:"anonymous",url:"https://mt1.google.com/vt/lyrs=t&x={x}&y={y}&z={z}",attribution:"© 2018 Google, Inc"})}),BING_IMAGINERY:new X["a"]({title:"Bing Imagery",baseLayer:!0,source:new q["a"]({crossOrigin:"anonymous",maxZoom:19,key:tt["a"].BING_KEY,imagerySet:"AerialWithLabels",attribution:"© 2017 Bing, Inc"})})},nt={controls:V["a"]({attribution:!1}).extend([]),layers:[et.GOOGLE_TERRAIN],target:"map",projection:tt["a"].PROJ_EPSG_4326,center:F["g"](tt["a"].COORD_BC3,tt["a"].PROJ_EPSG_4326,tt["a"].PROJ_EPSG_3857),zoom:13},it=n("Xu5n"),st=n("oscj"),at=n("nHi6"),ot=n("4wAk"),ct=n("CvXi"),rt={name:"MapViewer",props:{idx:{type:Number,required:!0}},data:function(){return{center:nt.center,zoom:nt.zoom,map:null,view:null,layers:new ot["a"],zIndexCounter:0}},computed:r()({observations:function(){return this.$store.getters["data/observations"](this.idx)}},Object(l["c"])("data",["hasContext","session"]),Object(l["c"])("view",["contextLayer"])),methods:r()({},Object(l["b"])("view",["pushLogAction","setSpinner"]),{handleResize:function(){null!==this.map&&(console.log("handleResize called!!!"),this.map.updateSize(),this.$eventBus.$emit("map-size-changed"))},onMoveEnd:function(t){if(!this.hasContext){var e=t.map,n=null;try{n=H.REGION_OF_INTEREST(F["h"](e.getView().calculateExtent(e.getSize()),"EPSG:3857","EPSG:4326"),this.session)}catch(t){this.pushLogAction({type:this.$constants.TYPE_ERROR,payload:t})}n&&n.body&&(this.sendStompMessage(n.body),this.pushLogAction({type:n.validated?this.$constants.TYPE_INFO:this.$constants.TYPE_WARN,payload:{message:"Message ".concat(n.validated?"":"not "," validated"),other:n}}))}},findLayerById:function(t){if(this.layers&&null!==this.layers){var e=this.layers.getArray(),n=e.find(function(e){return e.get("id")===t});return"undefined"!==typeof n?n:null}return null},drawContextLayer:function(t,e){if(null!==this.contextLayer){var n=this.contextLayer.getSource().getFeatures()[0].getGeometry();null!==e&&this.layers.clear(),this.layers.push(this.contextLayer),this.view.fit(n,{padding:[30,30,30,30],constrainResolution:!1})}},drawObservations:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.observations&&this.observations.length>0){var n=null,i=null;this.observations.forEach(function(s){var a=t.findLayerById(s.id);if(null===a&&(console.log("Creating layer: ".concat(s.label)),a=h["b"].getLayerObject(s,{projection:t.proj}),t.zIndexCounter+=1,s.zIndex=t.zIndexCounter,a.setZIndex(s.zIndex),t.layers.push(a)),a.setVisible(s.visible),s.top?a.setZIndex(999):a.setZIndex(s.zIndex),s.visible&&e){var o=a.getSource().getExtent();s.shapeType===t.$constants.SHAPE_POINT?i=[n[0],n[1]]:n=null!==n?ct["q"](n,o):o}}),e&&(null!==i?this.center=i:null!==n&&this.view.fit(n))}}}),watch:{contextLayer:function(t,e){this.drawContextLayer(t,e)},observations:{handler:function(){this.drawObservations(!1)},deep:!0},center:function(){this.view.setCenter(this.center)}},mounted:function(){this.map=new it["a"]({view:new st["a"]({center:this.center,zoom:this.zoom}),layers:nt.layers,target:"map".concat(this.idx),loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0}),this.map.on("moveend",this.onMoveEnd),this.view=this.map.getView(),this.proj=this.view.getProjection(),this.map.addLayer(new at["a"]({layers:this.layers})),this.drawContextLayer(),this.drawObservations(!0)}},lt=rt,dt=(n("6BcA"),Object(L["a"])(lt,Y,R,!1,null,null,null)),gt=dt.exports,Mt=[],Nt={computed:r()({},Object(l["c"])("view",["viewers","mainViewer"])),methods:r()({},Object(l["b"])("view",["setMainViewer"]),{viewerStyle:function(t){return t.main?"":(Mt.push(t),0===Mt.length?"left: 0":"left: ".concat(200*(Mt.length-1)+10*(Mt.length-1),"px"))}}),watch:{mainViewer:function(){Mt=[]}},components:{MapViewer:gt},beforeUpdate:function(){Mt=[]},mounted:function(){Mt=[]}},It=Nt,ut=(n("KbJ9"),Object(L["a"])(It,S,k,!1,null,"7cfb8796",null)),Ct=ut.exports,wt=n("4IOb"),ht={name:"IndexPage",computed:r()({},Object(l["c"])("stomp",["connectionState"]),Object(l["c"])("view",["searchIsActive"]),{modalVisible:function(){return this.connectionState!==this.$constants.CONNECTION_UP},modalText:function(){var t;return(t={},o()(t,this.$constants.CONNECTION_UNKNOWN,this.$t("messages.connectionClosed")),o()(t,this.$constants.CONNECTION_DOWN,this.$t("messages.connectionClosed")),o()(t,this.$constants.CONNECTION_WORKING,this.$t("messages.connectionWorking")),o()(t,this.$constants.CONNECTION_ERROR,this.$t("errors.connectionError")),t)[this.connectionState]},modalColor:function(){var t;return(t={},o()(t,this.$constants.CONNECTION_UNKNOWN,wt["H"].getBrand("warning")),o()(t,this.$constants.CONNECTION_DOWN,wt["H"].getBrand("warning")),o()(t,this.$constants.CONNECTION_WORKING,wt["H"].getBrand("info")),o()(t,this.$constants.CONNECTION_ERROR,wt["H"].getBrand("negative")),t)[this.connectionState]}}),methods:r()({},Object(l["b"])("view",["searchStart"])),components:{KlabMainControl:p,KlabLog:E,Viewer:Ct,KlabSpinner:N["a"]},watch:{},mounted:function(){var t=this;window.addEventListener("keypress",function(){t.searchIsActive||t.searchStart()})}},Ot=ht,At=(n("qdje"),n("7QM7"),Object(L["a"])(Ot,i,s,!1,null,"a0dd7100",null));e["default"]=At.exports},mALo:function(t,e,n){},mYuV:function(t,e,n){"use strict";var i=n("mALo"),s=n.n(i);s.a},ofTP:function(t,e,n){},qdje:function(t,e,n){"use strict";var i=n("OZQF"),s=n.n(i);s.a},wxf7:function(t,e,n){}}]);
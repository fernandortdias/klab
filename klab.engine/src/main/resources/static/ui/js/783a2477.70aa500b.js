(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["783a2477"],{"0300":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(o.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(o.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(o.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(o.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(o.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(o.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,o){var i=n.filter(function(e){return!t(e)});i.length>0?e._map.set(o,i):e._map.delete(o)})},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(o.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(t,n){t.forEach(function(t){return e.add(n,t.clone())})}),e},t.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},t}();e.Lookup=i},"0332":function(t,e,n){},"0483":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("b485"),a=new o.ContainerModule(function(t){t(i.TYPES.MouseListener).to(r.OpenMouseListener)});e.default=a},"04c2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("4741"),a=new o.ContainerModule(function(t){t(i.TYPES.IButtonHandler).toConstructor(r.ExpandButtonHandler)});e.default=a},"064a":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("393a"),c=n("e1c6"),u=n("6923"),d=n("302f"),l=n("3864"),p=n("dd02"),h=function(t){function e(e){var n=t.call(this)||this;return n.registerDefaults(),e.forEach(function(t){return n.register(t.type,t.constr)}),n}return o(e,t),e.prototype.registerDefaults=function(){this.register(d.EMPTY_ROOT.type,y)},e.prototype.missing=function(t){return new v},e=i([c.injectable(),a(0,c.multiInject(u.TYPES.ViewRegistration)),a(0,c.optional()),r("design:paramtypes",[Array])],e),e}(l.ProviderRegistry);function f(t,e,n,o){t.bind(u.TYPES.SModelElementRegistration).toConstantValue({type:e,constr:n}),t.bind(u.TYPES.ViewRegistration).toConstantValue({type:e,constr:o})}e.ViewRegistry=h,e.configureModelElement=f;var y=function(){function t(){}return t.prototype.render=function(t,e){return s.svg("svg",{"class-sprotty-empty":!0})},t}();e.EmptyView=y;var v=function(){function t(){}return t.prototype.render=function(t,e){var n=t.position||p.ORIGIN_POINT;return s.svg("text",{"class-sprotty-missing":!0,x:n.x,y:n.y},"?",t.id,"?")},t}();e.MissingView=v},"07d6":function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},"0bd8":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=function(){function t(t){this.options=t}return t.prototype.decorate=function(t,e){return t},t.prototype.postUpdate=function(){var t=document.getElementById(this.options.popupDiv);if(null!==t&&"undefined"!==typeof window){var e=t.getBoundingClientRect();window.innerHeight<e.height+e.top&&(t.style.top=window.scrollY+window.innerHeight-e.height-5+"px"),window.innerWidth<e.left+e.width&&(t.style.left=window.scrollX+window.innerWidth-e.width-5+"px"),e.left<0&&(t.style.left="0px"),e.top<0&&(t.style.top="0px")}},t=o([a.injectable(),r(0,a.inject(s.TYPES.ViewerOptions)),i("design:paramtypes",[Object])],t),t}();e.PopupPositionUpdater=c},"0be1":function(t,e,n){"use strict";function o(t,e,n){return{red:t,green:e,blue:n}}function i(t){return"rgb("+t.red+","+t.green+","+t.blue+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.rgb=o,e.toSVG=i;var r=function(){function t(t){this.stops=t}return t.prototype.getColor=function(t){t=Math.max(0,Math.min(.99999999,t));var e=Math.floor(t*this.stops.length);return this.stops[e]},t}();e.ColorMap=r},"0d7a":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=function(){function t(t){this.viewerOptions=t}return t.prototype.getPrefix=function(){var t=void 0!==this.viewerOptions&&void 0!==this.viewerOptions.baseDiv?this.viewerOptions.baseDiv+"_":"";return t},t.prototype.createUniqueDOMElementId=function(t){return this.getPrefix()+t.id},t.prototype.findSModelIdByDOMElement=function(t){return t.id.replace(this.getPrefix(),"")},t=o([a.injectable(),r(0,a.inject(s.TYPES.ViewerOptions)),i("design:paramtypes",[Object])],t),t}();e.DOMHelper=c},"0f4c":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("c146"),r=function(t){function e(e,n,o,i){void 0===i&&(i=!1);var r=t.call(this,o)||this;return r.model=e,r.elementResizes=n,r.reverse=i,r}return o(e,t),e.prototype.tween=function(t){var e=this;return this.elementResizes.forEach(function(n){var o=n.element,i=e.reverse?{width:(1-t)*n.toDimension.width+t*n.fromDimension.width,height:(1-t)*n.toDimension.height+t*n.fromDimension.height}:{width:(1-t)*n.fromDimension.width+t*n.toDimension.width,height:(1-t)*n.fromDimension.height+t*n.toDimension.height};o.bounds={x:o.bounds.x,y:o.bounds.y,width:i.width,height:i.height}}),this.model},e}(i.Animation);e.ResizeAnimation=r},"0fb6":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=n("302f"),u=n("538c"),d=n("3f0a"),l=n("c20e"),p=n("510b"),h=n("be02"),f=function(){function t(t,e,n,o){this.actionHandlerRegistry=t,this.commandStack=e,this.logger=n,this.syncer=o,this.postponedActions=[],this.postponedActions=[];var i=new d.SetModelCommand(new d.SetModelAction(c.EMPTY_ROOT));this.blockUntil=i.blockUntil,this.commandStack.execute(i)}return t.prototype.dispatchAll=function(t){var e=this;return Promise.all(t.map(function(t){return e.dispatch(t)}))},t.prototype.dispatch=function(t){return void 0!==this.blockUntil?this.handleBlocked(t,this.blockUntil):t.kind===l.UndoAction.KIND?this.commandStack.undo().then(function(){}):t.kind===l.RedoAction.KIND?this.commandStack.redo().then(function(){}):this.handleAction(t)},t.prototype.handleAction=function(t){this.logger.log(this,"handle",t);var e=this.actionHandlerRegistry.get(t.kind);if(e.length>0){for(var n=[],o=0,i=e;o<i.length;o++){var r=i[o],a=r.handle(t);p.isAction(a)?n.push(this.dispatch(a)):void 0!==a&&(n.push(this.commandStack.execute(a)),this.blockUntil=a.blockUntil)}return Promise.all(n)}return this.logger.warn(this,"Missing handler for action",t),Promise.reject("Missing handler for action '"+t.kind+"'")},t.prototype.handleBlocked=function(t,e){var n=this;if(e(t)){this.blockUntil=void 0;var o=this.handleAction(t),i=this.postponedActions;this.postponedActions=[];for(var r=0,a=i;r<a.length;r++){var s=a[r];this.dispatch(s.action).then(s.resolve,s.reject)}return o}return this.logger.log(this,"Action is postponed due to block condition",t),new Promise(function(e,o){n.postponedActions.push({action:t,resolve:e,reject:o})})},t=o([a.injectable(),r(0,a.inject(s.TYPES.ActionHandlerRegistry)),r(1,a.inject(s.TYPES.ICommandStack)),r(2,a.inject(s.TYPES.ILogger)),r(3,a.inject(s.TYPES.AnimationFrameSyncer)),i("design:paramtypes",[h.ActionHandlerRegistry,Object,Object,u.AnimationFrameSyncer])],t),t}();e.ActionDispatcher=f},"0fd9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e801"),i=n("e34e"),r=n("cf81"),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new o.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},1077:function(t,e,n){"use strict";var o=n("bd42"),i=n.n(o);i.a},1417:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=n("3a92"),u=n("e45b"),d=function(){function t(t,e){void 0===e&&(e=[]),this.actionDispatcher=t,this.keyListeners=e}return t.prototype.register=function(t){this.keyListeners.push(t)},t.prototype.deregister=function(t){var e=this.keyListeners.indexOf(t);e>=0&&this.keyListeners.splice(e,1)},t.prototype.handleEvent=function(t,e,n){var o=this.keyListeners.map(function(o){return o[t].apply(o,[e,n])}).reduce(function(t,e){return t.concat(e)});o.length>0&&(n.preventDefault(),this.actionDispatcher.dispatchAll(o))},t.prototype.keyDown=function(t,e){this.handleEvent("keyDown",t,e)},t.prototype.focus=function(){},t.prototype.decorate=function(t,e){return e instanceof c.SModelRoot&&(u.on(t,"focus",this.focus.bind(this),e),u.on(t,"keydown",this.keyDown.bind(this),e)),t},t.prototype.postUpdate=function(){},t=o([a.injectable(),r(0,a.inject(s.TYPES.IActionDispatcher)),r(1,a.multiInject(s.TYPES.KeyListener)),r(1,a.optional()),i("design:paramtypes",[Object,Array])],t),t}();e.KeyTool=d;var l=function(){function t(){}return t.prototype.keyDown=function(t,e){return[]},t=o([a.injectable()],t),t}();e.KeyListener=l},"155f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingScopeEnum=o;var i={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.BindingTypeEnum=i;var r={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};e.TargetTypeEnum=r},"160b":function(t,e,n){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o["throw"](t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n("e1c6"),d=n("6923"),l=n("302f"),p=n("538c"),h=n("9757"),f=function(){function t(t,e,n,o,i){this.modelFactory=t,this.viewerProvider=e,this.logger=n,this.syncer=o,this.options=i,this.undoStack=[],this.redoStack=[],this.offStack=[],this.currentPromise=Promise.resolve({root:t.createRoot(l.EMPTY_ROOT),hiddenRoot:void 0,popupRoot:void 0,rootChanged:!1,hiddenRootChanged:!1,popupChanged:!1})}return Object.defineProperty(t.prototype,"currentModel",{get:function(){return this.currentPromise.then(function(t){return t.root})},enumerable:!0,configurable:!0}),t.prototype.executeAll=function(t){var e=this;return t.forEach(function(t){e.logger.log(e,"Executing",t),e.handleCommand(t,t.execute,e.mergeOrPush)}),this.thenUpdate()},t.prototype.execute=function(t){return this.logger.log(this,"Executing",t),this.handleCommand(t,t.execute,this.mergeOrPush),this.thenUpdate()},t.prototype.undo=function(){var t=this;this.undoOffStackSystemCommands(),this.undoPreceedingSystemCommands();var e=this.undoStack.pop();return void 0!==e&&(this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,function(e,n){t.redoStack.push(e)})),this.thenUpdate()},t.prototype.redo=function(){var t=this;this.undoOffStackSystemCommands();var e=this.redoStack.pop();return void 0!==e&&(this.logger.log(this,"Redoing",e),this.handleCommand(e,e.redo,function(e,n){t.pushToUndoStack(e)})),this.redoFollowingSystemCommands(),this.thenUpdate()},t.prototype.handleCommand=function(t,e,n){var i=this;this.currentPromise=this.currentPromise.then(function(r){return new Promise(function(a,s){var c,u=i.createContext(r.root);try{c=e.call(t,u)}catch(t){i.logger.error(i,"Failed to execute command:",t),c=r.root}t instanceof h.HiddenCommand?a(o({},r,{hiddenRoot:c,hiddenRootChanged:!0})):t instanceof h.PopupCommand?a(o({},r,{popupRoot:c,popupChanged:!0})):c instanceof Promise?c.then(function(e){n.call(i,t,u),a(o({},r,{root:e,rootChanged:!0}))}):(n.call(i,t,u),a(o({},r,{root:c,rootChanged:!0})))})})},t.prototype.pushToUndoStack=function(t){this.undoStack.push(t),this.options.undoHistoryLimit>=0&&this.undoStack.length>this.options.undoHistoryLimit&&this.undoStack.splice(0,this.undoStack.length-this.options.undoHistoryLimit)},t.prototype.thenUpdate=function(){var t=this;return this.currentPromise=this.currentPromise.then(function(e){return s(t,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return e.hiddenRootChanged&&void 0!==e.hiddenRoot?[4,this.updateHidden(e.hiddenRoot)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.rootChanged?[4,this.update(e.root)]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.popupChanged&&void 0!==e.popupRoot?[4,this.updatePopup(e.popupRoot)]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2,{root:e.root,hiddenRoot:void 0,popupRoot:void 0,rootChanged:!1,hiddenRootChanged:!1,popupChanged:!1}]}})})}),this.currentModel},t.prototype.update=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return void 0!==this.viewer?[3,2]:(e=this,[4,this.viewerProvider()]);case 1:e.viewer=n.sent(),n.label=2;case 2:return this.viewer.update(t),[2]}})})},t.prototype.updateHidden=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return void 0!==this.viewer?[3,2]:(e=this,[4,this.viewerProvider()]);case 1:e.viewer=n.sent(),n.label=2;case 2:return this.viewer.updateHidden(t),[2]}})})},t.prototype.updatePopup=function(t){return s(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return void 0!==this.viewer?[3,2]:(e=this,[4,this.viewerProvider()]);case 1:e.viewer=n.sent(),n.label=2;case 2:return this.viewer.updatePopup(t),[2]}})})},t.prototype.mergeOrPush=function(t,e){var n=this;if(!(t instanceof h.HiddenCommand))if(t instanceof h.SystemCommand&&this.redoStack.length>0)this.offStack.push(t);else{if(this.offStack.forEach(function(t){return n.undoStack.push(t)}),this.offStack=[],this.redoStack=[],this.undoStack.length>0){var o=this.undoStack[this.undoStack.length-1];if(o instanceof h.MergeableCommand&&o.merge(t,e))return}this.pushToUndoStack(t)}},t.prototype.undoOffStackSystemCommands=function(){var t=this.offStack.pop();while(void 0!==t)this.logger.log(this,"Undoing off-stack",t),this.handleCommand(t,t.undo,function(){}),t=this.offStack.pop()},t.prototype.undoPreceedingSystemCommands=function(){var t=this,e=this.undoStack[this.undoStack.length-1];while(void 0!==e&&e instanceof h.SystemCommand)this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,function(e,n){t.redoStack.push(e)}),e=this.undoStack[this.undoStack.length-1]},t.prototype.redoFollowingSystemCommands=function(){var t=this,e=this.redoStack[this.redoStack.length-1];while(void 0!==e&&e instanceof h.SystemCommand)this.redoStack.pop(),this.logger.log(this,"Redoing ",e),this.handleCommand(e,e.redo,function(e,n){t.pushToUndoStack(e)}),e=this.redoStack[this.redoStack.length-1]},t.prototype.createContext=function(t){return{root:t,modelChanged:this,modelFactory:this.modelFactory,duration:this.options.defaultDuration,logger:this.logger,syncer:this.syncer}},t=i([u.injectable(),a(0,u.inject(d.TYPES.IModelFactory)),a(1,u.inject(d.TYPES.IViewerProvider)),a(2,u.inject(d.TYPES.ILogger)),a(3,u.inject(d.TYPES.AnimationFrameSyncer)),a(4,u.inject(d.TYPES.CommandStackOptions)),r("design:paramtypes",[Object,Function,Object,p.AnimationFrameSyncer,Object])],t),t}();e.CommandStack=f},1979:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===o.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=i},"19b5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("393a"),i=n("9964"),r=n("3623"),a=function(){function t(){}return t.prototype.render=function(t,e){var n=r.findParentByFeature(t,i.isExpandable),a=void 0!==n&&n.expanded?"M 1,5 L 8,12 L 15,5 Z":"M 1,8 L 8,15 L 8,1 Z";return o.svg("g",{"class-sprotty-button":"{true}","class-enabled":"{button.enabled}"},o.svg("rect",{x:0,y:0,width:16,height:16,opacity:0}),o.svg("path",{d:a}))},t}();e.ExpandButtonView=a},"1cd9":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("9757"),u=n("4c18"),d=n("3a92"),l=n("1417"),p=n("b669"),h=n("7faf"),f=n("5d19"),y=n("302f"),v=n("5eb6"),g=n("e4f0"),m=n("6923"),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.keyDown=function(t,e){return p.matchesKeystroke(e,"KeyE","ctrlCmd","shift")?[new b]:[]},e=i([s.injectable()],e),e}(l.KeyListener);e.ExportSvgKeyListener=_;var b=function(){function t(){this.kind=w.KIND}return t}();e.RequestExportSvgAction=b;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.execute=function(t){if(h.isExportable(t.root)){var e=t.modelFactory.createRoot(t.modelFactory.createSchema(t.root));if(h.isExportable(e))return e.export=!0,v.isViewport(e)&&(e.zoom=1,e.scroll={x:0,y:0}),e.index.all().forEach(function(t){u.isSelectable(t)&&t.selected&&(t.selected=!1),g.isHoverable(t)&&t.hoverFeedback&&(t.hoverFeedback=!1)}),e}return t.modelFactory.createRoot(y.EMPTY_ROOT)},e.KIND="requestExportSvg",e}(c.HiddenCommand);e.ExportSvgCommand=w;var S=function(){function t(t){this.svgExporter=t}return t.prototype.decorate=function(t,e){return e instanceof d.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(){this.root&&h.isExportable(this.root)&&this.root.export&&this.svgExporter.export(this.root)},t=i([s.injectable(),a(0,s.inject(m.TYPES.SvgExporter)),r("design:paramtypes",[f.SvgExporter])],t),t}();e.ExportSvgDecorator=S},"1e19":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("ed4f"),a=n("c444"),s=n("cf98"),c=n("fe37"),u=new o.ContainerModule(function(t){t(i.TYPES.ICommand).toConstructor(r.CenterCommand),t(i.TYPES.ICommand).toConstructor(r.FitToScreenCommand),t(i.TYPES.ICommand).toConstructor(a.ViewportCommand),t(i.TYPES.KeyListener).to(r.CenterKeyboardListener),t(i.TYPES.MouseListener).to(s.ScrollMouseListener),t(i.TYPES.MouseListener).to(c.ZoomMouseListener)});e.default=u},"1e94":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.of=function(e,n){var o=new t;return o.bindings=e,o.middleware=n,o},t}();e.ContainerSnapshot=o},"1f89":function(t,e,n){"use strict";function o(t){return t.hasFeature(e.openFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.openFeature=Symbol("openFeature"),e.isOpenable=o},"218d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("393a"),i=n("47b7"),r=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return o.svg("svg",null,o.svg("g",{transform:n},e.renderChildren(t)))},t}();e.SvgViewportView=r;var a=function(){function t(){}return t.prototype.render=function(t,e){var n=this.getRadius(t);return o.svg("g",null,o.svg("circle",{"class-sprotty-node":t instanceof i.SNode,"class-sprotty-port":t instanceof i.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,r:n,cx:n,cy:n}),e.renderChildren(t))},t.prototype.getRadius=function(t){var e=Math.min(t.size.width,t.size.height);return e>0?e/2:0},t}();e.CircularNodeView=a;var s=function(){function t(){}return t.prototype.render=function(t,e){return o.svg("g",null,o.svg("rect",{"class-sprotty-node":t instanceof i.SNode,"class-sprotty-port":t instanceof i.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:Math.max(t.size.width,0),height:Math.max(t.size.height,0)}),e.renderChildren(t))},t}();e.RectangularNodeView=s},2440:function(t,e,n){var o,i=i||function(t){"use strict";if(!("undefined"===typeof t||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in o,r=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",d=4e4,l=function(t){var e=function(){"string"===typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,d)},p=function(t,e,n){e=[].concat(e);var o=e.length;while(o--){var i=t["on"+e[o]];if("function"===typeof i)try{i.call(t,n||t)}catch(t){c(t)}}},h=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},f=function(e,c,d){d||(e=h(e));var f,y=this,v=e.type,g=v===u,m=function(){p(y,"writestart progress write writeend".split(" "))},_=function(){if((s||g&&a)&&t.FileReader){var o=new FileReader;return o.onloadend=function(){var e=s?o.result:o.result.replace(/^data:[^;]*;/,"data:attachment/file;"),n=t.open(e,"_blank");n||(t.location.href=e),e=void 0,y.readyState=y.DONE,m()},o.readAsDataURL(e),void(y.readyState=y.INIT)}if(f||(f=n().createObjectURL(e)),g)t.location.href=f;else{var i=t.open(f,"_blank");i||(t.location.href=f)}y.readyState=y.DONE,m(),l(f)};if(y.readyState=y.INIT,i)return f=n().createObjectURL(e),void setTimeout(function(){o.href=f,o.download=c,r(o),m(),l(f),y.readyState=y.DONE});_()},y=f.prototype,v=function(t,e,n){return new f(t,e||t.name||"download",n)};return"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=h(t)),navigator.msSaveOrOpenBlob(t,e)}:(y.abort=function(){},y.readyState=y.INIT=0,y.WRITING=1,y.DONE=2,y.error=y.onwritestart=y.onprogress=y.onwrite=y.onabort=y.onerror=y.onwriteend=null,v)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */t.exports?t.exports.saveAs=i:null!==n("07d6")&&null!==n("3c35")&&(o=function(){return i}.call(e,n,e,t),void 0===o||(t.exports=o))},"26ad":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=n("be02"),u=n("3f0a"),d=n("5d19"),l=function(){function t(t,e,n){this.actionDispatcher=t,this.viewerOptions=n,this.initialize(e)}return t.prototype.initialize=function(t){t.registerCommand(u.SetModelCommand),t.register(u.RequestModelAction.KIND,this),t.register(d.ExportSvgAction.KIND,this)},t=o([a.injectable(),r(0,a.inject(s.TYPES.IActionDispatcher)),r(1,a.inject(s.TYPES.ActionHandlerRegistry)),r(2,a.inject(s.TYPES.ViewerOptions)),i("design:paramtypes",[Object,c.ActionHandlerRegistry,Object])],t),t}();e.ModelSource=l},"29fa":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("393a"),s=n("dd7b"),c=n("6af2"),u=n("ff70"),d=n("9016"),l=n("6907"),p=n("f923"),h=n("e1c6"),f=n("6923"),y=n("dd02"),v=n("33b2"),g=n("e45b"),m=n("8d53"),_=n("302f"),b=function(){function t(t,e){this.viewRegistry=t,this.decorators=e}return t.prototype.decorate=function(t,e){return m.isThunk(t)?t:this.decorators.reduce(function(t,n){return n.decorate(t,e)},t)},t.prototype.renderElement=function(t,e){var n=this.viewRegistry.get(t.type,void 0).render(t,this,e);return this.decorate(n,t)},t.prototype.renderChildren=function(t,e){var n=this;return t.children.map(function(t){return n.renderElement(t,e)})},t.prototype.postUpdate=function(){this.decorators.forEach(function(t){return t.postUpdate()})},t}();e.ModelRenderer=b;var w=function(){function t(t,e,n,o,i,r,a){var s=this;this.decorators=e,this.hiddenDecorators=n,this.popupDecorators=o,this.options=i,this.logger=r,this.actiondispatcher=a,this.onWindowResize=function(t){var e=document.getElementById(s.options.baseDiv);if(null!==e){var n=s.getBoundsInPage(e);s.actiondispatcher.dispatch(new v.InitializeCanvasBoundsAction(n))}},this.patcher=this.createPatcher(),this.renderer=t(e),this.hiddenRenderer=t(n),this.popupRenderer=t(o)}return t.prototype.createModules=function(){return[c.propsModule,u.attributesModule,p.classModule,d.styleModule,l.eventListenersModule]},t.prototype.createPatcher=function(){return s.init(this.createModules())},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n="undefined"!==typeof window?{x:window.scrollX,y:window.scrollY}:y.ORIGIN_POINT;return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},t.prototype.update=function(t){var e=this;this.logger.log(this,"rendering",t);var n=a.html("div",{id:this.options.baseDiv},this.renderer.renderElement(t));if(void 0!==this.lastVDOM){var o=this.hasFocus();g.copyClassesFromVNode(this.lastVDOM,n),this.lastVDOM=this.patcher.call(this,this.lastVDOM,n),this.restoreFocus(o)}else if("undefined"!==typeof document){var i=document.getElementById(this.options.baseDiv);null!==i?("undefined"!==typeof window&&window.addEventListener("resize",function(){e.onWindowResize(n)}),g.copyClassesFromElement(i,n),g.setClass(n,this.options.baseClass,!0),this.lastVDOM=this.patcher.call(this,i,n)):this.logger.error(this,"element not in DOM:",this.options.baseDiv)}this.renderer.postUpdate()},t.prototype.hasFocus=function(){if("undefined"!==typeof document&&document.activeElement&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var t=this.lastVDOM.children[0];if("object"===typeof t){var e=t.elm;return document.activeElement===e}}return!1},t.prototype.restoreFocus=function(t){if(t&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var e=this.lastVDOM.children[0];if("object"===typeof e){var n=e.elm;n&&"function"===typeof n.focus&&n.focus()}}},t.prototype.updateHidden=function(t){var e;if(this.logger.log(this,"rendering hidden"),t.type===_.EMPTY_ROOT.type)e=a.html("div",{id:this.options.hiddenDiv});else{var n=this.hiddenRenderer.renderElement(t);g.setAttr(n,"opacity",0),e=a.html("div",{id:this.options.hiddenDiv},n)}if(void 0!==this.lastHiddenVDOM)g.copyClassesFromVNode(this.lastHiddenVDOM,e),this.lastHiddenVDOM=this.patcher.call(this,this.lastHiddenVDOM,e);else{var o=document.getElementById(this.options.hiddenDiv);null===o?(o=document.createElement("div"),document.body.appendChild(o)):g.copyClassesFromElement(o,e),g.setClass(e,this.options.baseClass,!0),g.setClass(e,this.options.hiddenClass,!0),this.lastHiddenVDOM=this.patcher.call(this,o,e)}this.hiddenRenderer.postUpdate()},t.prototype.updatePopup=function(t){this.logger.log(this,"rendering popup",t);var e,n=t.type===_.EMPTY_ROOT.type;if(n)e=a.html("div",{id:this.options.popupDiv});else{var o=t.canvasBounds,i={top:o.y+"px",left:o.x+"px"};e=a.html("div",{id:this.options.popupDiv,style:i},this.popupRenderer.renderElement(t))}if(void 0!==this.lastPopupVDOM)g.copyClassesFromVNode(this.lastPopupVDOM,e),g.setClass(e,this.options.popupClosedClass,n),this.lastPopupVDOM=this.patcher.call(this,this.lastPopupVDOM,e);else if("undefined"!==typeof document){var r=document.getElementById(this.options.popupDiv);null===r?(r=document.createElement("div"),document.body.appendChild(r)):g.copyClassesFromElement(r,e),g.setClass(e,this.options.popupClass,!0),g.setClass(e,this.options.popupClosedClass,n),this.lastPopupVDOM=this.patcher.call(this,r,e)}this.popupRenderer.postUpdate()},t=o([h.injectable(),r(0,h.inject(f.TYPES.ModelRendererFactory)),r(1,h.multiInject(f.TYPES.IVNodeDecorator)),r(1,h.optional()),r(2,h.multiInject(f.TYPES.HiddenVNodeDecorator)),r(2,h.optional()),r(3,h.multiInject(f.TYPES.PopupVNodeDecorator)),r(3,h.optional()),r(4,h.inject(f.TYPES.ViewerOptions)),r(5,h.inject(f.TYPES.ILogger)),r(6,h.inject(f.TYPES.IActionDispatcher)),i("design:paramtypes",[Function,Array,Array,Array,Object,Object,Object])],t),t}();e.Viewer=w},"2cac":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e34e"),i=n("cf81"),r=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=r},"2e0b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("155f"),i=n("77d3"),r=function(){function t(t,e){this.id=i.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=o.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=r},"2eed":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("81aa"),i=n("6b35");function r(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var o=0;o<e.length;++o){var i=e[o].data;void 0!==i&&r(i,e[o].children,e[o].sel)}}function a(t,e,n){var a,s,c,u={};if(void 0!==n?(u=e,i.array(n)?a=n:i.primitive(n)?s=n:n&&n.sel&&(a=[n])):void 0!==e&&(i.array(e)?a=e:i.primitive(e)?s=e:e&&e.sel?a=[e]:u=e),void 0!==a)for(c=0;c<a.length;++c)i.primitive(a[c])&&(a[c]=o.vnode(void 0,void 0,void 0,a[c],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||r(u,a,t),o.vnode(t,u,a,s,void 0)}e.h=a,e.default=a},"302f":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("6923"),u=n("3864"),d=n("3a92"),l=function(){function t(t){this.registry=t}return t.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof d.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else n=new d.SChildElement;return this.initializeChild(n,t,e)},t.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof d.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else e=new d.SModelRoot;return this.initializeRoot(e,t)},t.prototype.createSchema=function(t){var e=this,n={};for(var o in t)if(!this.isReserved(t,o)){var i=t[o];"function"!==typeof i&&(n[o]=i)}return t instanceof d.SParentElement&&(n["children"]=t.children.map(function(t){return e.createSchema(t)})),n},t.prototype.initializeElement=function(t,e){for(var n in e)if(!this.isReserved(t,n)){var o=e[n];"function"!==typeof o&&(t[n]=o)}return t},t.prototype.isReserved=function(t,e){if(["children","parent","index"].indexOf(e)>=0)return!0;var n=t;do{var o=Object.getOwnPropertyDescriptor(n,e);if(void 0!==o)return void 0!==o.get;n=Object.getPrototypeOf(n)}while(n);return!1},t.prototype.initializeParent=function(t,e){var n=this;return this.initializeElement(t,e),d.isParent(e)&&(t.children=e.children.map(function(e){return n.createElement(e,t)})),t},t.prototype.initializeChild=function(t,e,n){return this.initializeParent(t,e),void 0!==n&&(t.parent=n),t},t.prototype.initializeRoot=function(t,e){return this.initializeParent(t,e),t.index.add(t),t},t=i([s.injectable(),a(0,s.inject(c.TYPES.SModelRegistry)),r("design:paramtypes",[p])],t),t}();e.SModelFactory=l,e.EMPTY_ROOT=Object.freeze({type:"NONE",id:"EMPTY"});var p=function(t){function e(e){var n=t.call(this)||this;return e.forEach(function(t){return n.register(t.type,t.constr)}),n}return o(e,t),e=i([s.injectable(),a(0,s.multiInject(c.TYPES.SModelElementRegistration)),a(0,s.optional()),r("design:paramtypes",[Array])],e),e}(u.ProviderRegistry);e.SModelRegistry=p},"30e3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},"320b":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("6923"),u=n("3864"),d=n("dd02"),l=n("66f9"),p=n("da84"),h=n("4b75"),f=n("ac2a"),y=function(t){function e(){var e=t.call(this)||this;return e.register(p.VBoxLayouter.KIND,new p.VBoxLayouter),e.register(h.HBoxLayouter.KIND,new h.HBoxLayouter),e.register(f.StackLayouter.KIND,new f.StackLayouter),e}return o(e,t),e}(u.InstanceRegistry);e.LayoutRegistry=y;var v=function(){function t(t,e){this.layoutRegistry=t,this.logger=e}return t.prototype.layout=function(t){new g(t,this.layoutRegistry,this.logger).layout()},t=i([s.injectable(),a(0,s.inject(c.TYPES.LayoutRegistry)),a(1,s.inject(c.TYPES.ILogger)),r("design:paramtypes",[y,Object])],t),t}();e.Layouter=v;var g=function(){function t(t,e,n){var o=this;this.element2boundsData=t,this.layoutRegistry=e,this.log=n,this.toBeLayouted=[],t.forEach(function(t,e){l.isLayoutContainer(e)&&o.toBeLayouted.push(e)})}return t.prototype.getBoundsData=function(t){var e=this.element2boundsData.get(t),n=t.bounds;return l.isLayoutContainer(t)&&this.toBeLayouted.indexOf(t)>=0&&(n=this.doLayout(t)),e||(e={bounds:n,boundsChanged:!1,alignmentChanged:!1},this.element2boundsData.set(t,e)),e},t.prototype.layout=function(){while(this.toBeLayouted.length>0){var t=this.toBeLayouted[0];this.doLayout(t)}},t.prototype.doLayout=function(t){var e=this.toBeLayouted.indexOf(t);e>=0&&this.toBeLayouted.splice(e,1);var n=this.layoutRegistry.get(t.layout);n&&n.layout(t,this);var o=this.element2boundsData.get(t);return void 0!==o&&void 0!==o.bounds?o.bounds:(this.log.error(t,"Layout failed"),d.EMPTY_BOUNDS)},t}();e.StatefulLayouter=g},"33b2":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("6923"),u=n("dd02"),d=n("3a92"),l=n("9757"),p=function(){function t(t){this.actionDispatcher=t}return t.prototype.decorate=function(t,e){return e instanceof d.SModelRoot&&!u.isValidDimension(e.canvasBounds)&&(this.rootAndVnode=[e,t]),t},t.prototype.postUpdate=function(){if(void 0!==this.rootAndVnode){var t=this.rootAndVnode[1].elm,e=this.rootAndVnode[0].canvasBounds;if(void 0!==t){var n=this.getBoundsInPage(t);u.almostEquals(n.x,e.x)&&u.almostEquals(n.y,e.y)&&u.almostEquals(n.width,e.width)&&u.almostEquals(n.height,e.width)||this.actionDispatcher.dispatch(new h(n))}this.rootAndVnode=void 0}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n="undefined"!==typeof window?{x:window.scrollX,y:window.scrollY}:u.ORIGIN_POINT;return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},t=i([s.injectable(),a(0,s.inject(c.TYPES.IActionDispatcher)),r("design:paramtypes",[Object])],t),t}();e.CanvasBoundsInitializer=p;var h=function(){function t(t){this.newCanvasBounds=t,this.kind=f.KIND}return t}();e.InitializeCanvasBoundsAction=h;var f=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return o(e,t),e.prototype.execute=function(t){return this.newCanvasBounds=this.action.newCanvasBounds,t.root.canvasBounds=this.newCanvasBounds,t.root},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND="initializeCanvasBounds",e}(l.SystemCommand);e.InitializeCanvasBoundsCommand=f},"359b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("393a"),i=n("e45b"),r=function(){function t(){}return t.prototype.render=function(t,e){for(var n=o.html("div",null,e.renderChildren(t)),r=0,a=t.classes;r<a.length;r++){var s=a[r];i.setClass(n,s,!0)}return n},t}();e.HtmlRootView=r},3623:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("3a92");function i(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(0,e):t.type}function r(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(e+1):t.type}function a(t,e){if(t.id===e)return t;if(void 0!==t.children)for(var n=0,o=t.children;n<o.length;n++){var i=o[n],r=a(i,e);if(void 0!==r)return r}}function s(t,e){var n=t;while(void 0!==n){if(e(n))return n;n=n instanceof o.SChildElement?n.parent:void 0}return n}function c(t,e){var n=t;while(void 0!==n){if(e(n))return n;n=n instanceof o.SChildElement?n.parent:void 0}return n}function u(t,e,n){if(e!==n){while(e instanceof o.SChildElement)if(t=e.localToParent(t),e=e.parent,e===n)return t;var i=[];while(n instanceof o.SChildElement)i.push(n),n=n.parent;if(e!==n)throw new Error("Incompatible source and target: "+e.id+", "+n.id);for(var r=i.length-1;r>=0;r--)t=i[r].parentToLocal(t)}return t}e.getBasicType=i,e.getSubType=r,e.findElement=a,e.findParent=s,e.findParentByFeature=c,e.translatePoint=u},3672:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("a5f4"),a=new o.ContainerModule(function(t){t(i.TYPES.ICommand).toConstructor(r.SwitchEditModeCommand),t(i.TYPES.ICommand).toConstructor(r.MoveRoutingHandleCommand)});e.default=a},"37a9":function(t,e,n){"use strict";var o=n("ddfc"),i=n.n(o);i.a},3864:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),r=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?new n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},t=o([i.injectable()],t),t}();e.ProviderRegistry=r;var a=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t){var e=this.elements.get(t);return e||this.missing(t)},t.prototype.missing=function(t){throw new Error("Unknown registry key: "+t)},t=o([i.injectable()],t),t}();e.InstanceRegistry=a;var s=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");var n=this.elements.get(t);void 0!==n?n.push(e):this.elements.set(t,[e])},t.prototype.deregisterAll=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.get=function(t){var e=this.elements.get(t);return void 0!==e?e:[]},t=o([i.injectable()],t),t}();e.MultiInstanceRegistry=s},"38e8":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("66f9"),r=n("7d36"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e}return o(e,t),e.prototype.hasFeature=function(t){return t===i.boundsFeature||t===r.fadeFeature||t===i.layoutableChildFeature},e}(i.SShapeElement);e.SButton=a},"393a":function(t,e,n){"use strict";var o="http://www.w3.org/2000/svg",i=["hook","on","style","class","props","attrs","dataset"],r=Array.prototype.slice;function a(t){return"string"===typeof t||"number"===typeof t||"boolean"===typeof t||"symbol"===typeof t||null===t||void 0===t}function s(t,e,n,o){for(var i={ns:e},r=0,a=o.length;r<a;r++){var s=o[r];t[s]&&(i[s]=t[s])}for(var c in t)if("key"!==c&&"classNames"!==c&&"selector"!==c){var u=c.indexOf("-");u>0?d(c.slice(0,u),c.slice(u+1),t[c]):i[c]||d(n,c,t[c])}return i;function d(t,e,n){var o=i[t]||(i[t]={});o[e]=n}}function c(t,e,n,o,i,r){if(i.selector&&(o+=i.selector),i.classNames){var c=i.classNames;o=o+"."+(Array.isArray(c)?c.join("."):c.replace(/\s+/g,"."))}return{sel:o,data:s(i,t,e,n),children:r.map(function(t){return a(t)?{text:t}:t}),key:i.key}}function u(t,e,n,o,i,r){var a;if("function"===typeof o)a=o(i,r);else if(o&&"function"===typeof o.view)a=o.view(i,r);else{if(!o||"function"!==typeof o.render)throw"JSX tag must be either a string, a function or an object with 'view' or 'render' methods";a=o.render(i,r)}return a.key=i.key,a}function d(t,e,n){for(var o=e,i=t.length;o<i;o++){var r=t[o];Array.isArray(r)?d(r,0,n):n.push(r)}}function l(t){if(t)for(var e=0,n=t.length;e<n;e++)if(Array.isArray(t[e])){var o=t.slice(0,e);d(t,e,o),t=o;break}return t}function p(t,e,n,o,i,r){return i=i||{},r=l(r),"string"===typeof o?c(t,e,n,o,i,r):u(t,e,n,o,i,r)}function h(t,e,n){return function(o,a,s){return(arguments.length>3||!Array.isArray(s))&&(s=r.call(arguments,2)),p(t,e||"props",n||i,o,a,s)}}t.exports={html:h(void 0),svg:h(o,"attrs"),JSX:h}},"3a92":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd02"),r=n("e629"),a=function(){function t(){}return Object.defineProperty(t.prototype,"root",{get:function(){var t=this;while(t){if(t instanceof d)return t;t=t instanceof u?t.parent:void 0}throw new Error("Element has no root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.root.index},enumerable:!0,configurable:!0}),t.prototype.hasFeature=function(t){return!1},t}();function s(t){var e=t.children;return void 0!==e&&e.constructor===Array}e.SModelElement=a,e.isParent=s;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return o(e,t),e.prototype.add=function(t,e){var n=this.children;if(void 0===e)n.push(t);else{if(e<0||e>this.children.length)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(e,0,t)}t.parent=this,this.index.add(t)},e.prototype.remove=function(t){var e=this.children,n=e.indexOf(t);if(n<0)throw new Error("No such child "+t.id);e.splice(n,1),delete t.parent,this.index.remove(t)},e.prototype.removeAll=function(t){var e=this,n=this.children;if(void 0!==t){for(var o=n.length-1;o>=0;o--)if(t(n[o])){var i=n.splice(o,1)[0];delete i.parent,this.index.remove(i)}}else n.forEach(function(t){delete t.parent,e.index.remove(t)}),n.splice(0,n.length)},e.prototype.move=function(t,e){var n=this.children,o=n.indexOf(t);if(-1===o)throw new Error("No such child "+t.id);if(e<0||e>n.length-1)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(o,1),n.splice(e,0,t)},e.prototype.localToParent=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e.prototype.parentToLocal=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e}(a);e.SParentElement=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(c);e.SChildElement=u;var d=function(t){function e(e){void 0===e&&(e=new h);var n=t.call(this)||this;return n.canvasBounds=i.EMPTY_BOUNDS,Object.defineProperty(n,"index",{value:e,writable:!1}),n}return o(e,t),e}(c);e.SModelRoot=d;var l="0123456789abcdefghijklmnopqrstuvwxyz";function p(t){void 0===t&&(t=8);for(var e="",n=0;n<t;n++)e+=l.charAt(Math.floor(Math.random()*l.length));return e}e.createRandomId=p;var h=function(){function t(){this.id2element=new Map}return t.prototype.add=function(t){if(t.id){if(this.contains(t))throw new Error("Duplicate ID in model: "+t.id)}else do{t.id=p()}while(this.contains(t));if(this.id2element.set(t.id,t),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];this.add(o)}},t.prototype.remove=function(t){if(this.id2element.delete(t.id),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];this.remove(o)}},t.prototype.contains=function(t){return this.id2element.has(t.id)},t.prototype.getById=function(t){return this.id2element.get(t)},t.prototype.getAttachedElements=function(t){return[]},t.prototype.all=function(){return r.mapIterable(this.id2element,function(t){t[0];var e=t[1];return e})},t}();e.SModelIndex=h},"3b4c":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("6923"),u=n("3a92"),d=n("510b"),l=n("e45b"),p=n("0d7a"),h=function(){function t(t,e,n){void 0===n&&(n=[]),this.actionDispatcher=t,this.domHelper=e,this.mouseListeners=n}return t.prototype.register=function(t){this.mouseListeners.push(t)},t.prototype.deregister=function(t){var e=this.mouseListeners.indexOf(t);e>=0&&this.mouseListeners.splice(e,1)},t.prototype.getTargetElement=function(t,e){var n=e.target,o=t.index;while(n){if(n.id){var i=o.getById(this.domHelper.findSModelIdByDOMElement(n));if(void 0!==i)return i}n=n.parentNode}},t.prototype.handleEvent=function(t,e,n){var o=this;this.focusOnMouseEvent(t,e);var i=this.getTargetElement(e,n);if(i){var r=this.mouseListeners.map(function(e){return e[t].apply(e,[i,n])}).reduce(function(t,e){return t.concat(e)});if(r.length>0){n.preventDefault();for(var a=0,s=r;a<s.length;a++){var c=s[a];d.isAction(c)?this.actionDispatcher.dispatch(c):c.then(function(t){o.actionDispatcher.dispatch(t)})}}}},t.prototype.focusOnMouseEvent=function(t,e){if(document){var n=document.getElementById(this.domHelper.createUniqueDOMElementId(e));"mouseDown"===t&&null!==n&&"function"===typeof n.focus&&n.focus()}},t.prototype.mouseOver=function(t,e){this.handleEvent("mouseOver",t,e)},t.prototype.mouseOut=function(t,e){this.handleEvent("mouseOut",t,e)},t.prototype.mouseEnter=function(t,e){this.handleEvent("mouseEnter",t,e)},t.prototype.mouseLeave=function(t,e){this.handleEvent("mouseLeave",t,e)},t.prototype.mouseDown=function(t,e){this.handleEvent("mouseDown",t,e)},t.prototype.mouseMove=function(t,e){this.handleEvent("mouseMove",t,e)},t.prototype.mouseUp=function(t,e){this.handleEvent("mouseUp",t,e)},t.prototype.wheel=function(t,e){this.handleEvent("wheel",t,e)},t.prototype.doubleClick=function(t,e){this.handleEvent("doubleClick",t,e)},t.prototype.decorate=function(t,e){return e instanceof u.SModelRoot&&(l.on(t,"mouseover",this.mouseOver.bind(this),e),l.on(t,"mouseout",this.mouseOut.bind(this),e),l.on(t,"mouseenter",this.mouseEnter.bind(this),e),l.on(t,"mouseleave",this.mouseLeave.bind(this),e),l.on(t,"mousedown",this.mouseDown.bind(this),e),l.on(t,"mouseup",this.mouseUp.bind(this),e),l.on(t,"mousemove",this.mouseMove.bind(this),e),l.on(t,"wheel",this.wheel.bind(this),e),l.on(t,"contextmenu",function(t,e){e.preventDefault()},e),l.on(t,"dblclick",this.doubleClick.bind(this),e)),t=this.mouseListeners.reduce(function(t,n){return n.decorate(t,e)},t),t},t.prototype.postUpdate=function(){},t=i([s.injectable(),a(0,s.inject(c.TYPES.IActionDispatcher)),a(1,s.inject(c.TYPES.DOMHelper)),a(2,s.multiInject(c.TYPES.MouseListener)),a(2,s.optional()),r("design:paramtypes",[Object,p.DOMHelper,Array])],t),t}();e.MouseTool=h;var f=function(t){function e(e,n,o){void 0===o&&(o=[]);var i=t.call(this,e,n,o)||this;return i.actionDispatcher=e,i.domHelper=n,i.mouseListeners=o,i}return o(e,t),e=i([s.injectable(),a(0,s.inject(c.TYPES.IActionDispatcher)),a(1,s.inject(c.TYPES.DOMHelper)),a(2,s.multiInject(c.TYPES.PopupMouseListener)),a(2,s.optional()),r("design:paramtypes",[Object,p.DOMHelper,Array])],e),e}(h);e.PopupMouseTool=f;var y=function(){function t(){}return t.prototype.mouseOver=function(t,e){return[]},t.prototype.mouseOut=function(t,e){return[]},t.prototype.mouseEnter=function(t,e){return[]},t.prototype.mouseLeave=function(t,e){return[]},t.prototype.mouseDown=function(t,e){return[]},t.prototype.mouseMove=function(t,e){return[]},t.prototype.mouseUp=function(t,e){return[]},t.prototype.wheel=function(t,e){return[]},t.prototype.doubleClick=function(t,e){return[]},t.prototype.decorate=function(t,e){return t},t=i([s.injectable()],t),t}();e.MouseListener=y},"3b62":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd02"),r=n("3a92"),a=n("5eb6"),s=n("7faf"),c=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll={x:0,y:0},n.zoom=1,n.export=!1,n}return o(e,t),e.prototype.hasFeature=function(t){return t===a.viewportFeature||t===s.exportFeature},e.prototype.localToParent=function(t){var e={x:(t.x-this.scroll.x)*this.zoom,y:(t.y-this.scroll.y)*this.zoom,width:-1,height:-1};return i.isBounds(t)&&(e.width=t.width*this.zoom,e.height=t.height*this.zoom),e},e.prototype.parentToLocal=function(t){var e={x:t.x/this.zoom+this.scroll.x,y:t.y/this.zoom+this.scroll.y,width:-1,height:-1};return i.isBounds(t)&&i.isValidDimension(t)&&(e.width=t.width/this.zoom,e.height=t.height/this.zoom),e},e}(r.SModelRoot);e.ViewportRootElement=c},"3b74":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("c20e"),a=new o.ContainerModule(function(t){t(i.TYPES.KeyListener).to(r.UndoRedoKeyListener)});e.default=a},"3f0a":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("9757"),c=n("33b2"),u=function(){function t(e){this.options=e,this.kind=t.KIND}return t.KIND="requestModel",t}();e.RequestModelAction=u;var d=function(){function t(t){this.newRoot=t,this.kind=l.KIND}return t}();e.SetModelAction=d;var l=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return o(e,t),e.prototype.execute=function(t){return this.oldRoot=t.modelFactory.createRoot(t.root),this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===c.InitializeCanvasBoundsCommand.KIND}},enumerable:!0,configurable:!0}),e.KIND="setModel",e=i([a.injectable(),r("design:paramtypes",[d])],e),e}(s.Command);e.SetModelCommand=l},4022:function(t,e,n){},4047:function(t,e){t.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},"42d6":function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),o(n("510b")),o(n("0fb6")),o(n("be02")),o(n("538c")),o(n("c146")),o(n("987d")),o(n("5e9c")),o(n("160b")),o(n("9757")),o(n("33b2")),o(n("3f0a")),o(n("302f")),o(n("7436")),o(n("3623")),o(n("3a92")),o(n("1417")),o(n("3b4c")),o(n("8d53")),o(n("064a")),o(n("8794")),o(n("65d1")),o(n("29fa")),o(n("d4ec")),o(n("e45b")),o(n("6923"));var i=n("8122");e.defaultModule=i.default,o(n("42f7")),o(n("320b")),o(n("66f9")),o(n("da84")),o(n("4b75")),o(n("ac2a")),o(n("70d9")),o(n("38e8")),o(n("a5f4")),o(n("cc26")),o(n("4741")),o(n("9964")),o(n("19b5")),o(n("1cd9")),o(n("7faf")),o(n("5d19")),o(n("e7fa")),o(n("7d36")),o(n("f4cb")),o(n("e4f0")),o(n("a0af")),o(n("559d")),o(n("b485")),o(n("1f89")),o(n("4c18")),o(n("bcbd")),o(n("c20e")),o(n("d084")),o(n("cf61")),o(n("ed4f")),o(n("5eb6")),o(n("cf98")),o(n("3b62")),o(n("c444")),o(n("fe37"));var r=n("520d");e.moveModule=r.default;var a=n("72dd");e.boundsModule=a.default;var s=n("9811");e.fadeModule=s.default;var c=n("c4e6");e.selectModule=c.default;var u=n("3b74");e.undoRedoModule=u.default;var d=n("1e19");e.viewportModule=d.default;var l=n("c95e");e.hoverModule=l.default;var p=n("3672");e.edgeEditModule=p.default;var h=n("9f8d");e.exportModule=h.default;var f=n("04c2");e.expandModule=f.default;var y=n("0483");e.openModule=y.default;var v=n("54f8");e.buttonModule=v.default,o(n("dfc0")),o(n("47b7")),o(n("6bb9")),o(n("9ad4")),o(n("359b")),o(n("87fa")),o(n("218d")),o(n("945d")),o(n("df60")),o(n("cb6e")),o(n("85ed")),o(n("26ad")),o(n("484b"));var g=n("8e65");e.modelSourceModule=g.default,o(n("ba30")),o(n("fba3")),o(n("0be1")),o(n("dd02")),o(n("9e2e")),o(n("3864"))},"42f7":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("9757"),r=n("66f9"),a=function(){function t(t){this.bounds=t,this.kind=u.KIND}return t}();e.SetBoundsAction=a;var s=function(){function t(t){this.newRoot=t,this.kind=d.KIND}return t}();e.RequestBoundsAction=s;var c=function(){function t(e,n,o){this.bounds=e,this.revision=n,this.alignments=o,this.kind=t.KIND}return t.KIND="computedBounds",t}();e.ComputedBoundsAction=c;var u=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.bounds=[],n}return o(e,t),e.prototype.execute=function(t){var e=this;return this.action.bounds.forEach(function(n){var o=t.root.index.getById(n.elementId);o&&r.isBoundsAware(o)&&e.bounds.push({element:o,oldBounds:o.bounds,newBounds:n.newBounds})}),this.redo(t)},e.prototype.undo=function(t){return this.bounds.forEach(function(t){return t.element.bounds=t.oldBounds}),t.root},e.prototype.redo=function(t){return this.bounds.forEach(function(t){return t.element.bounds=t.newBounds}),t.root},e.KIND="setBounds",e}(i.SystemCommand);e.SetBoundsCommand=u;var d=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return o(e,t),e.prototype.execute=function(t){return t.modelFactory.createRoot(this.action.newRoot)},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===c.KIND}},enumerable:!0,configurable:!0}),e.KIND="requestBounds",e}(i.HiddenCommand);e.RequestBoundsCommand=d},4332:function(t,e,n){"use strict";var o=n("4022"),i=n.n(o);i.a},"451f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=n("1979"),r=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||r(n,e))};e.traverseAncerstors=r;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new i.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(o.NAMED_TAG);e.namedConstraint=s;var c=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"===typeof t){var o=n.serviceIdentifier;return o===t}var i=e.bindings[0].implementationType;return t===i}return!1}};e.typeConstraint=c},4741:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n("3623"),r=n("9964"),a=n("e1c6"),s=function(){function t(e,n){this.expandIds=e,this.collapseIds=n,this.kind=t.KIND}return t.KIND="collapseExpand",t}();e.CollapseExpandAction=s;var c=function(){function t(e){void 0===e&&(e=!0),this.expand=e,this.kind=t.KIND}return t.KIND="collapseExpandAll",t}();e.CollapseExpandAllAction=c;var u=function(){function t(){}return t.prototype.buttonPressed=function(t){var e=i.findParentByFeature(t,r.isExpandable);return void 0!==e?[new s(e.expanded?[]:[e.id],e.expanded?[e.id]:[])]:[]},t.TYPE="button:expand",t=o([a.injectable()],t),t}();e.ExpandButtonHandler=u},"47b7":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("e629"),r=n("3a92"),a=n("66f9"),s=n("7d36"),c=n("e4f0"),u=n("a0af"),d=n("4c18"),l=n("3b62"),p=n("dd02"),h=n("66f9"),f=n("cc26"),y=n("3623"),v=n("7959"),g=function(t){function e(e){return void 0===e&&(e=new E),t.call(this,e)||this}return o(e,t),e}(l.ViewportRootElement);e.SGraph=g;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"incomingEdges",{get:function(){return this.index.getIncomingEdges(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingEdges",{get:function(){return this.index.getOutgoingEdges(this)},enumerable:!0,configurable:!0}),e.prototype.getAnchor=function(t,e){return p.center(this.bounds)},e.prototype.getTranslatedAnchor=function(t,e,n,o){var i=y.translatePoint(t,e,this.parent),r=this.getAnchor(i,o);return y.translatePoint(r,this.parent,n.parent)},e}(h.SShapeElement);e.SConnectableElement=m;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return o(e,t),e.prototype.hasFeature=function(t){return t===d.selectFeature||t===u.moveFeature||t===a.boundsFeature||t===a.layoutContainerFeature||t===s.fadeFeature||t===c.hoverFeedbackFeature||t===c.popupFeature},e}(m);e.SNode=_;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return o(e,t),e.prototype.hasFeature=function(t){return t===d.selectFeature||t===a.boundsFeature||t===s.fadeFeature||t===c.hoverFeedbackFeature},e}(m);e.SPort=b;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.routingPoints=[],e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return o(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.index.getById(this.sourceId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.index.getById(this.targetId)},enumerable:!0,configurable:!0}),e.prototype.route=function(){void 0===this.router&&(this.router=new v.LinearEdgeRouter);var t=this.router.route(this);return f.filterEditModeHandles(t,this)},e.prototype.hasFeature=function(t){return t===s.fadeFeature||t===d.selectFeature||t===f.editFeature||t===c.hoverFeedbackFeature},e}(r.SChildElement);e.SEdge=w;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.alignment=p.ORIGIN_POINT,e.opacity=1,e}return o(e,t),e.prototype.hasFeature=function(t){return t===a.boundsFeature||t===a.alignFeature||t===s.fadeFeature||t===a.layoutableChildFeature},e}(h.SShapeElement);e.SLabel=S;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opacity=1,e}return o(e,t),e.prototype.hasFeature=function(t){return t===a.boundsFeature||t===a.layoutContainerFeature||t===a.layoutableChildFeature||t===s.fadeFeature},e}(h.SShapeElement);e.SCompartment=O;var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outgoing=new Map,e.incoming=new Map,e}return o(e,t),e.prototype.add=function(e){if(t.prototype.add.call(this,e),e instanceof w){if(e.sourceId){var n=this.outgoing.get(e.sourceId);void 0===n?this.outgoing.set(e.sourceId,[e]):n.push(e)}if(e.targetId){var o=this.incoming.get(e.targetId);void 0===o?this.incoming.set(e.targetId,[e]):o.push(e)}}},e.prototype.remove=function(e){if(t.prototype.remove.call(this,e),e instanceof w){var n=this.outgoing.get(e.sourceId);if(void 0!==n){var o=n.indexOf(e);o>=0&&(1===n.length?this.outgoing.delete(e.sourceId):n.splice(o,1))}var i=this.incoming.get(e.targetId);if(void 0!==i){o=i.indexOf(e);o>=0&&(1===i.length?this.incoming.delete(e.targetId):i.splice(o,1))}}},e.prototype.getAttachedElements=function(t){var e=this;return new i.FluentIterableImpl(function(){return{outgoing:e.outgoing.get(t.id),incoming:e.incoming.get(t.id),nextOutgoingIndex:0,nextIncomingIndex:0}},function(t){var e=t.nextOutgoingIndex;if(void 0!==t.outgoing&&e<t.outgoing.length)return t.nextOutgoingIndex=e+1,{done:!1,value:t.outgoing[e]};if(e=t.nextIncomingIndex,void 0!==t.incoming)while(e<t.incoming.length){var n=t.incoming[e];if(n.sourceId!==n.targetId)return t.nextIncomingIndex=e+1,{done:!1,value:n};e++}return{done:!0,value:void 0}})},e.prototype.getIncomingEdges=function(t){return this.incoming.get(t.id)||[]},e.prototype.getOutgoingEdges=function(t){return this.outgoing.get(t.id)||[]},e}(r.SModelIndex);e.SGraphIndex=E},"484b":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),a=n("945d"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.listen=function(t){var e=this;t.addEventListener("message",function(t){e.messageReceived(t.data)}),t.addEventListener("error",function(t){e.logger.error(e,"error event received",t)}),this.webSocket=t},e.prototype.disconnect=function(){this.webSocket&&(this.webSocket.close(),this.webSocket=void 0)},e.prototype.sendMessage=function(t){if(!this.webSocket)throw new Error("WebSocket is not connected");this.webSocket.send(JSON.stringify(t))},e=i([r.injectable()],e),e}(a.DiagramServer);e.WebSocketDiagramServer=s},"4a4f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=n("c5f4"),r=n("1979");function a(){return function(t,e,n){var a=new r.Metadata(i.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,t.constructor))throw new Error(o.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,a,t.constructor)}}e.postConstruct=a},"4b75":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("dd02"),a=n("a2e1"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=0,i=-1,a=!0;return t.children.forEach(function(t){var s=n.getBoundsData(t).bounds;void 0!==s&&r.isValidDimension(s)&&(a?a=!1:o+=e.hGap,o+=s.width,i=Math.max(i,s.height))}),{width:o,height:i}},e.prototype.layoutChild=function(t,e,n,o,i,r,a,s){var c=this.getDy(o.vAlign,n,s);return e.bounds={x:r.x+t.bounds.x-n.x,y:i.paddingTop+t.bounds.y-n.y+c,width:n.width,height:n.height},e.boundsChanged=!0,{x:r.x+n.width+i.hGap,y:r.y}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hGap:1,vAlign:"center"}},e.prototype.spread=function(t,e){return i({},t,e)},e.KIND="hbox",e}(a.AbstractLayout);e.HBoxLayouter=s},"4c18":function(t,e,n){"use strict";function o(t){return t.hasFeature(e.selectFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.selectFeature=Symbol("selectFeature"),e.isSelectable=o},"510b":function(t,e,n){"use strict";function o(t){return void 0!==t&&t.hasOwnProperty("kind")&&"string"===typeof t["kind"]}Object.defineProperty(e,"__esModule",{value:!0}),e.isAction=o},"51c0":function(t,e,n){"use strict";function o(t){return void 0!==t.source&&void 0!==t.target}function i(t){return void 0!==t.sources&&void 0!==t.targets}Object.defineProperty(e,"__esModule",{value:!0}),e.isPrimitive=o,e.isExtended=i},"520d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("559d"),a=new o.ContainerModule(function(t){t(i.TYPES.MouseListener).to(r.MoveMouseListener),t(i.TYPES.ICommand).toConstructor(r.MoveCommand),t(i.TYPES.IVNodeDecorator).to(r.LocationDecorator),t(i.TYPES.HiddenVNodeDecorator).to(r.LocationDecorator)});e.default=a},"538c":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),r=function(){function t(){this.tasks=[],this.endTasks=[],this.triggered=!1}return t.prototype.isAvailable=function(){return"function"===typeof requestAnimationFrame},t.prototype.onNextFrame=function(t){this.tasks.push(t),this.trigger()},t.prototype.onEndOfNextFrame=function(t){this.endTasks.push(t),this.trigger()},t.prototype.trigger=function(){var t=this;this.triggered||(this.triggered=!0,this.isAvailable()?requestAnimationFrame(function(e){return t.run(e)}):setTimeout(function(e){return t.run(e)}))},t.prototype.run=function(t){var e=this.tasks,n=this.endTasks;this.triggered=!1,this.tasks=[],this.endTasks=[],e.forEach(function(e){return e.call(void 0,t)}),n.forEach(function(e){return e.call(void 0,t)})},t=o([i.injectable()],t),t}();e.AnimationFrameSyncer=r},"54f8":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("70d9"),r=new o.ContainerModule(function(t){t(i.ButtonHandlerRegistry).toSelf().inSingletonScope()});e.default=r},"559d":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),a=n("dd02"),s=n("3a92"),c=n("3a92"),u=n("3623"),d=n("9757"),l=n("c146"),p=n("3b4c"),h=n("e45b"),f=n("5eb6"),y=n("4c18"),v=n("66f9"),g=n("cc26"),m=n("a5f4"),_=n("a0af"),b=function(){function t(t,e){void 0===e&&(e=!0),this.moves=t,this.animate=e,this.kind=w.KIND}return t}();e.MoveAction=b;var w=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedMoves=new Map,n.resolvedRoutes=new Map,n}return o(e,t),e.prototype.execute=function(t){var e=this,n=t.root,o=new Set;return this.action.moves.forEach(function(t){var i=e.resolve(t,n.index);void 0!==i&&(e.resolvedMoves.set(i.elementId,i),n.index.getAttachedElements(i.element).forEach(function(t){return o.add(t)}))}),o.forEach(function(t){return e.handleAttachedElement(t)}),this.action.animate?new S(n,this.resolvedMoves,this.resolvedRoutes,t).start():this.doMove(t)},e.prototype.resolve=function(t,e){var n=e.getById(t.elementId);if(void 0!==n&&_.isLocateable(n)){var o=t.fromPosition||{x:n.position.x,y:n.position.y};return{elementId:t.elementId,element:n,fromPosition:o,toPosition:t.toPosition}}},e.prototype.handleAttachedElement=function(t){if(g.isRoutable(t)){var e=t.source,n=e?this.resolvedMoves.get(e.id):void 0,o=t.target,i=o?this.resolvedMoves.get(o.id):void 0;if(void 0!==n&&void 0!==i){var r=i.toPosition.x-i.fromPosition.x,a=i.toPosition.y-i.fromPosition.y;this.resolvedRoutes.set(t.id,{elementId:t.id,element:t,fromRoute:t.routingPoints,toRoute:t.routingPoints.map(function(t){return{x:t.x+r,y:t.y+a}})})}}},e.prototype.doMove=function(t,e){return this.resolvedMoves.forEach(function(t){t.element.position=e?t.fromPosition:t.toPosition}),this.resolvedRoutes.forEach(function(t){t.element.routingPoints=e?t.fromRoute:t.toRoute}),t.root},e.prototype.undo=function(t){return new S(t.root,this.resolvedMoves,this.resolvedRoutes,t,!0).start()},e.prototype.redo=function(t){return new S(t.root,this.resolvedMoves,this.resolvedRoutes,t,!1).start()},e.prototype.merge=function(t,n){var o=this;return!this.action.animate&&t instanceof e&&(t.action.moves.forEach(function(t){var e=o.resolvedMoves.get(t.elementId);if(e)e.toPosition=t.toPosition;else{var i=o.resolve(t,n.root.index);i&&o.resolvedMoves.set(i.elementId,i)}}),!0)},e.KIND="move",e}(d.MergeableCommand);e.MoveCommand=w;var S=function(t){function e(e,n,o,i,r){void 0===r&&(r=!1);var a=t.call(this,i)||this;return a.model=e,a.elementMoves=n,a.elementRoutes=o,a.reverse=r,a}return o(e,t),e.prototype.tween=function(t){var e=this;return this.elementMoves.forEach(function(n){e.reverse?n.element.position={x:(1-t)*n.toPosition.x+t*n.fromPosition.x,y:(1-t)*n.toPosition.y+t*n.fromPosition.y}:n.element.position={x:(1-t)*n.fromPosition.x+t*n.toPosition.x,y:(1-t)*n.fromPosition.y+t*n.toPosition.y}}),this.elementRoutes.forEach(function(n){for(var o=[],i=0;i<n.fromRoute.length&&i<n.toRoute.length;i++){var r=n.fromRoute[i],a=n.toRoute[i];e.reverse?o.push({x:(1-t)*a.x+t*r.x,y:(1-t)*a.y+t*r.y}):o.push({x:(1-t)*r.x+t*a.x,y:(1-t)*r.y+t*a.y})}n.element.routingPoints=o}),this.model},e}(l.Animation);e.MoveAnimation=S;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasDragged=!1,e}return o(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){var o=u.findParentByFeature(t,_.isMoveable),i=t instanceof g.SRoutingHandle;this.lastDragPosition=void 0!==o||i?{x:e.pageX,y:e.pageY}:void 0,this.hasDragged=!1,i&&n.push(new m.SwitchEditModeAction([t.id],[]))}return n},e.prototype.mouseMove=function(t,e){var n=this,o=[];if(0===e.buttons)this.mouseUp(t,e);else if(this.lastDragPosition){var i=u.findParentByFeature(t,f.isViewport);this.hasDragged=!0;var r=i?i.zoom:1,a=(e.pageX-this.lastDragPosition.x)/r,s=(e.pageY-this.lastDragPosition.y)/r,c=[],d=[];t.root.index.all().filter(function(t){return y.isSelectable(t)&&t.selected}).forEach(function(t){if(_.isMoveable(t))c.push({elementId:t.id,fromPosition:{x:t.position.x,y:t.position.y},toPosition:{x:t.position.x+a,y:t.position.y+s}});else if(t instanceof g.SRoutingHandle){var e=n.getHandlePosition(t);void 0!==e&&d.push({elementId:t.id,fromPosition:e,toPosition:{x:e.x+a,y:e.y+s}})}}),this.lastDragPosition={x:e.pageX,y:e.pageY},c.length>0&&o.push(new b(c,!1)),d.length>0&&o.push(new m.MoveRoutingHandleAction(d,!1))}return o},e.prototype.getHandlePosition=function(t){var e=t.parent;if(g.isRoutable(e))if("line"===t.kind){for(var n=function(t){return void 0!==t.pointIndex?t.pointIndex:"target"===t.kind?e.routingPoints.length:-1},o=e.route(),i=void 0,r=void 0,s=0,c=o;s<c.length;s++){var u=c[s],d=n(u);d<=t.pointIndex&&(void 0===i||d>n(i))&&(i=u),d>t.pointIndex&&(void 0===r||d<n(r))&&(r=u)}if(void 0!==i&&void 0!==r)return a.centerOfLine(i,r)}else if(t.pointIndex>=0)return e.routingPoints[t.pointIndex]},e.prototype.mouseEnter=function(t,e){return t instanceof c.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){var n=[];return this.lastDragPosition&&t.root.index.all().forEach(function(t){t instanceof g.SRoutingHandle&&t.editMode&&n.push(new m.SwitchEditModeAction([],[t.id]))}),this.hasDragged=!1,this.lastDragPosition=void 0,n},e.prototype.decorate=function(t,e){return t},e}(p.MouseListener);e.MoveMouseListener=O;var E=function(){function t(){}return t.prototype.decorate=function(t,e){var n="";return _.isLocateable(e)&&e instanceof s.SChildElement&&void 0!==e.parent&&(n="translate("+e.position.x+", "+e.position.y+")"),v.isAlignable(e)&&(n.length>0&&(n+=" "),n+="translate("+e.alignment.x+", "+e.alignment.y+")"),n.length>0&&h.setAttr(t,"transform",n),t},t.prototype.postUpdate=function(){},t=i([r.injectable()],t),t}();e.LocationDecorator=E},"5bc0":function(t,e,n){},"5d19":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("66f9"),s=n("0fb6"),c=n("6923"),u=n("dd02"),d=n("e1c6"),l=function(){function t(e){this.svg=e,this.kind=t.KIND}return t.KIND="exportSvg",t}();e.ExportSvgAction=l;var p=function(){function t(t,e,n){this.options=t,this.actionDispatcher=e,this.log=n}return t.prototype.export=function(t){if("undefined"!==typeof document){var e=document.getElementById(this.options.hiddenDiv);if(null!==e&&e.firstElementChild&&"svg"===e.firstElementChild.tagName){var n=e.firstElementChild,o=this.createSvg(n,t);this.actionDispatcher.dispatch(new l(o))}}},t.prototype.createSvg=function(t,e){var n=new XMLSerializer,o=n.serializeToString(t),i=document.createElement("iframe");if(document.body.appendChild(i),!i.contentWindow)throw new Error("IFrame has no contentWindow");var r=i.contentWindow.document;r.open(),r.write(o),r.close();var a=r.getElementById(t.id);a.removeAttribute("opacity"),this.copyStyles(t,a,["width","height","opacity"]),a.setAttribute("version","1.1");var s=this.getBounds(e);a.setAttribute("viewBox",s.x+" "+s.y+" "+s.width+" "+s.height);var c=n.serializeToString(a);return document.body.removeChild(i),c},t.prototype.copyStyles=function(t,e,n){for(var o=getComputedStyle(t),i=getComputedStyle(e),r="",a=0;a<o.length;a++){var s=o[a];if(-1===n.indexOf(s)){var c=o.getPropertyValue(s);i.getPropertyValue(s)!==c&&(r+=s+":"+c+";")}}""!==r&&e.setAttribute("style",r);for(a=0;a<t.childNodes.length;++a){var u=t.childNodes[a],d=e.childNodes[a];u instanceof Element&&this.copyStyles(u,d,[])}},t.prototype.getBounds=function(t){var e=[u.EMPTY_BOUNDS];return t.children.forEach(function(t){a.isBoundsAware(t)&&e.push(t.bounds)}),e.reduce(function(t,e){return u.combine(t,e)})},t=o([d.injectable(),r(0,d.inject(c.TYPES.ViewerOptions)),r(1,d.inject(c.TYPES.IActionDispatcher)),r(2,d.inject(c.TYPES.ILogger)),i("design:paramtypes",[Object,s.ActionDispatcher,Object])],t),t}();e.SvgExporter=p},"5e9c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("6923");function i(t,e){var n=t.get(o.TYPES.CommandStackOptions);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}e.overrideCommandStackOptions=i},"5eb6":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("3a92");function i(t){return t instanceof o.SModelRoot&&t.hasFeature(e.viewportFeature)&&"zoom"in t&&"scroll"in t}e.viewportFeature=Symbol("viewportFeature"),e.isViewport=i},"61bf":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=n("dd02"),u=n("3a92"),d=n("42f7"),l=n("66f9"),p=n("320b"),h=n("7faf"),f=function(){function t(){}return t}();e.BoundsData=f;var y=function(){function t(t,e){this.actionDispatcher=t,this.layouter=e,this.element2boundsData=new Map}return t.prototype.decorate=function(t,e){return(l.isSizeable(e)||l.isLayoutContainer(e))&&this.element2boundsData.set(e,{vnode:t,bounds:e.bounds,boundsChanged:!1,alignmentChanged:!1}),e instanceof u.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(){if(void 0===this.root||!h.isExportable(this.root)||!this.root.export){this.getBoundsFromDOM(),this.layouter.layout(this.element2boundsData);var t=[],e=[];this.element2boundsData.forEach(function(n,o){n.boundsChanged&&void 0!==n.bounds&&t.push({elementId:o.id,newBounds:n.bounds}),n.alignmentChanged&&void 0!==n.alignment&&e.push({elementId:o.id,newAlignment:n.alignment})});var n=void 0!==this.root?this.root.revision:void 0;this.actionDispatcher.dispatch(new d.ComputedBoundsAction(t,n,e)),this.element2boundsData.clear()}},t.prototype.getBoundsFromDOM=function(){var t=this;this.element2boundsData.forEach(function(e,n){if(e.bounds&&l.isSizeable(n)){var o=e.vnode;if(o&&o.elm){var i=t.getBounds(o.elm,n);!l.isAlignable(n)||c.almostEquals(i.x,0)&&c.almostEquals(i.y,0)||(e.alignment={x:-i.x,y:-i.y},e.alignmentChanged=!0);var r={x:n.bounds.x,y:n.bounds.y,width:i.width,height:i.height};c.almostEquals(r.x,n.bounds.x)&&c.almostEquals(r.y,n.bounds.y)&&c.almostEquals(r.width,n.bounds.width)&&c.almostEquals(r.height,n.bounds.height)||(e.bounds=r,e.boundsChanged=!0)}}})},t.prototype.getBounds=function(t,e){var n=t.getBBox();return{x:n.x,y:n.y,width:n.width,height:n.height}},t=o([a.injectable(),r(0,a.inject(s.TYPES.IActionDispatcher)),r(1,a.inject(s.TYPES.Layouter)),i("design:paramtypes",[Object,p.Layouter])],t),t}();e.HiddenBoundsUpdater=y},"624f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=n("c5f4"),r=n("1979"),a=n("66d7"),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();function c(t){return function(e,n,s){if(void 0===t)throw new Error(o.UNDEFINED_INJECT_ANNOTATION(e.name));var c=new r.Metadata(i.INJECT_TAG,t);"number"===typeof s?a.tagParameter(e,n,s,c):a.tagProperty(e,n,c)}}e.LazyServiceIdentifer=s,e.inject=c},6592:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextVNode=a,e.transformName=s,e.unescapeEntities=d;var o=n("81aa"),i=r(o);function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return(0,i.default)(void 0,void 0,void 0,d(t,e))}function s(t){t=t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()});var e=t.charAt(0).toLowerCase();return""+e+t.substring(1)}var c=new RegExp("&[a-z0-9#]+;","gi"),u=null;function d(t,e){return u||(u=e.createElement("div")),t.replace(c,function(t){return u.innerHTML=t,u.textContent})}},"65d1":function(t,e,n){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n("6923");function r(t,n){var r=o({},e.defaultViewerOptions(),n);t.isBound(i.TYPES.ViewerOptions)?t.rebind(i.TYPES.ViewerOptions).toConstantValue(r):t.bind(i.TYPES.ViewerOptions).toConstantValue(r)}function a(t,e){var n=t.get(i.TYPES.ViewerOptions);for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);return n}e.defaultViewerOptions=function(){return{baseDiv:"sprotty",baseClass:"sprotty",hiddenDiv:"sprotty-hidden",hiddenClass:"sprotty-hidden",popupDiv:"sprotty-popup",popupClass:"sprotty-popup",popupClosedClass:"sprotty-popup-closed",needsClientLayout:!0,needsServerLayout:!1,popupOpenDelay:1e3,popupCloseDelay:300}},e.configureViewerOptions=r,e.overrideViewerOptions=a},"66d7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=n("c5f4");function r(t,e,n,o){var r=i.TAGGED;s(r,t,e,o,n)}function a(t,e,n){var o=i.TAGGED_PROP;s(o,t.constructor,e,n)}function s(t,e,n,i,r){var a={},s="number"===typeof r,c=void 0!==r&&s?r.toString():n;if(s&&void 0!==n)throw new Error(o.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var u=a[c];if(Array.isArray(u))for(var d=0,l=u;d<l.length;d++){var p=l[d];if(p.key===i.key)throw new Error(o.DUPLICATED_METADATA+" "+p.key.toString())}else u=[];u.push(i),a[c]=u,Reflect.defineMetadata(t,a,e)}function c(t,e){Reflect.decorate(t,e)}function u(t,e){return function(n,o){e(n,o,t)}}function d(t,e,n){"number"===typeof n?c([u(n,t)],e):"string"===typeof n?Reflect.decorate([t],e,n):c([t],e)}e.tagParameter=r,e.tagProperty=a,e.decorate=d},"66f9":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd02"),r=n("3a92"),a=n("3623");function s(t){return"bounds"in t}function c(t){return s(t)&&t.hasFeature(e.layoutContainerFeature)&&"layout"in t}function u(t){return s(t)&&t.hasFeature(e.layoutableChildFeature)}function d(t){return t.hasFeature(e.boundsFeature)&&s(t)}function l(t){return t.hasFeature(e.alignFeature)&&"alignment"in t}function p(t){var e=a.findParentByFeature(t,s);if(void 0!==e){var n=e.bounds,o=e;while(o instanceof r.SChildElement){var c=o.parent;n=c.localToParent(n),o=c}return n}if(t instanceof r.SModelRoot){var u=t.canvasBounds;return{x:0,y:0,width:u.width,height:u.height}}return i.EMPTY_BOUNDS}e.boundsFeature=Symbol("boundsFeature"),e.layoutContainerFeature=Symbol("layoutContainerFeature"),e.layoutableChildFeature=Symbol("layoutableChildFeature"),e.alignFeature=Symbol("alignFeature"),e.isBoundsAware=s,e.isLayoutContainer=c,e.isLayoutableChild=u,e.isSizeable=d,e.isAlignable=l,e.getAbsoluteBounds=p;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=i.ORIGIN_POINT,e.size=i.EMPTY_DIMENSION,e}return o(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.localToParent=function(t){var e={x:t.x+this.position.x,y:t.y+this.position.y,width:-1,height:-1};return i.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e.prototype.parentToLocal=function(t){var e={x:t.x-this.position.x,y:t.y-this.position.y,width:-1,height:-1};return i.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e}(r.SChildElement);e.SShapeElement=h},6730:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=n("1979"),r=n("66d7");function a(t){return function(e,n,a){var s=new i.Metadata(o.NAMED_TAG,t);"number"===typeof a?r.tagParameter(e,n,a,s):r.tagProperty(e,n,s)}}e.named=a},"68f1":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=n("155f"),r=n("a8af"),a=n("ba33"),s=n("7122"),c=function(t,e,n){try{return n()}catch(n){throw r.isStackOverflowExeption(n)?new Error(o.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},u=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,d=e.target&&e.target.isArray(),l=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(d&&l)return r.map(function(e){var n=u(t);return n(e)});var p=null;if(!e.target.isOptional()||0!==n.length){var h=n[0],f=h.scope===i.BindingScopeEnum.Singleton,y=h.scope===i.BindingScopeEnum.Request;if(f&&h.activated)return h.cache;if(y&&null!==t&&t.has(h.id))return t.get(h.id);if(h.type===i.BindingTypeEnum.ConstantValue)p=h.cache;else if(h.type===i.BindingTypeEnum.Function)p=h.cache;else if(h.type===i.BindingTypeEnum.Constructor)p=h.implementationType;else if(h.type===i.BindingTypeEnum.DynamicValue&&null!==h.dynamicValue)p=c("toDynamicValue",h.serviceIdentifier,function(){return h.dynamicValue(e.parentContext)});else if(h.type===i.BindingTypeEnum.Factory&&null!==h.factory)p=c("toFactory",h.serviceIdentifier,function(){return h.factory(e.parentContext)});else if(h.type===i.BindingTypeEnum.Provider&&null!==h.provider)p=c("toProvider",h.serviceIdentifier,function(){return h.provider(e.parentContext)});else{if(h.type!==i.BindingTypeEnum.Instance||null===h.implementationType){var v=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(o.INVALID_BINDING_TYPE+" "+v)}p=s.resolveInstance(h.implementationType,r,u(t))}return"function"===typeof h.onActivation&&(p=h.onActivation(e.parentContext,p)),f&&(h.cache=p,h.activated=!0),y&&null!==t&&!t.has(h.id)&&t.set(h.id,p),p}}};function d(t){var e=u(t.plan.rootRequest.requestScope);return e(t.plan.rootRequest)}e.resolve=d},6907:function(t,e,n){"use strict";function o(t,e,n){if("function"===typeof t)t.call(e,n,e);else if("object"===typeof t)if("function"===typeof t[0])if(2===t.length)t[0].call(e,t[1],n,e);else{var i=t.slice(1);i.push(n),i.push(e),t[0].apply(e,i)}else for(var r=0;r<t.length;r++)o(t[r])}function i(t,e){var n=t.type,i=e.data.on;i&&i[n]&&o(i[n],e,t)}function r(){return function t(e){i(e,t.vnode)}}function a(t,e){var n,o=t.data.on,i=t.listener,a=t.elm,s=e&&e.data.on,c=e&&e.elm;if(o!==s){if(o&&i)if(s)for(n in o)s[n]||a.removeEventListener(n,i,!1);else for(n in o)a.removeEventListener(n,i,!1);if(s){var u=e.listener=t.listener||r();if(u.vnode=e,o)for(n in s)o[n]||c.addEventListener(n,u,!1);else for(n in s)c.addEventListener(n,u,!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventListenersModule={create:a,update:a,destroy:a},e.default=e.eventListenersModule},6923:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={IActionDispatcher:Symbol("IActionDispatcher"),IActionDispatcherProvider:Symbol("IActionDispatcherProvider"),IActionHandlerInitializer:Symbol("IActionHandlerInitializer"),ActionHandlerRegistry:Symbol("ActionHandlerRegistry"),AnimationFrameSyncer:Symbol("AnimationFrameSyncer"),CommandStackOptions:Symbol("CommandStackOptions"),IButtonHandler:Symbol("IButtonHandler"),ICommand:Symbol("ICommand"),ICommandStack:Symbol("ICommandStack"),ICommandStackProvider:Symbol("ICommandStackProvider"),DOMHelper:Symbol("DOMHelper"),HiddenVNodeDecorator:Symbol("HiddenVNodeDecorator"),HoverState:Symbol("HoverState"),KeyListener:Symbol("KeyListener"),Layouter:Symbol("Layouter"),LayoutRegistry:Symbol("LayoutRegistry"),ILogger:Symbol("ILogger"),LogLevel:Symbol("LogLevel"),IModelFactory:Symbol("IModelFactory"),IModelLayoutEngine:Symbol("IModelLayoutEngine"),ModelRendererFactory:Symbol("ModelRendererFactory"),ModelSource:Symbol("ModelSource"),ModelSourceProvider:Symbol("ModelSourceProvider"),MouseListener:Symbol("MouseListener"),PopupModelFactory:Symbol("PopupModelFactory"),IPopupModelProvider:Symbol("IPopupModelProvider"),PopupMouseListener:Symbol("PopupMouseListener"),PopupVNodeDecorator:Symbol("PopupVNodeDecorator"),SModelElementRegistration:Symbol("SModelElementRegistration"),SModelRegistry:Symbol("SModelRegistry"),SModelStorage:Symbol("SModelStorage"),StateAwareModelProvider:Symbol("StateAwareModelProvider"),SvgExporter:Symbol("SvgExporter"),IViewer:Symbol("IViewer"),ViewerOptions:Symbol("ViewerOptions"),IViewerProvider:Symbol("IViewerProvider"),ViewRegistration:Symbol("ViewRegistration"),ViewRegistry:Symbol("ViewRegistry"),IVNodeDecorator:Symbol("IVNodeDecorator")}},"6af2":function(t,e,n){"use strict";function o(t,e){var n,o,i,r=e.elm,a=t.data.props,s=e.data.props;if((a||s)&&a!==s){for(n in a=a||{},s=s||{},a)s[n]||delete r[n];for(n in s)o=s[n],i=a[n],i===o||"value"===n&&r[n]===o||(r[n]=o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:o,update:o},e.default=e.propsModule},"6b35":function(t,e,n){"use strict";function o(t){return"string"===typeof t||"number"===typeof t}Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=o},"6bb9":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("393a"),i=n("dd02"),r=n("e45b"),a=n("3623"),s=n("cc26"),c=function(){function t(){}return t.prototype.render=function(t,e){var n="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return o.svg("svg",{"class-sprotty-graph":!0},o.svg("g",{transform:n},e.renderChildren(t)))},t}();e.SGraphView=c;var u=function(){function t(){}return t.prototype.render=function(t,e){var n=t.route();return 0===n.length?this.renderDanglingEdge("Cannot compute route",t,e):o.svg("g",{"class-sprotty-edge":!0,"class-mouseover":t.hoverFeedback},this.renderLine(t,n,e),this.renderAdditionals(t,n,e),e.renderChildren(t,{route:n}))},t.prototype.renderLine=function(t,e,n){for(var i=e[0],r="M "+i.x+","+i.y,a=1;a<e.length;a++){var s=e[a];r+=" L "+s.x+","+s.y}return o.svg("path",{d:r})},t.prototype.renderAdditionals=function(t,e,n){return[]},t.prototype.renderDanglingEdge=function(t,e,n){return o.svg("text",{"class-sprotty-edge-dangling":!0,title:t},"?")},t}();e.PolylineEdgeView=u;var d=function(){function t(){this.minimalPointDistance=10}return t.prototype.render=function(t,e,n){if(n&&n.route){var i=this.getPosition(t,n.route);if(void 0!==i){var a=o.svg("circle",{"class-sprotty-routing-handle":!0,"class-selected":t.selected,"class-mouseover":t.hoverFeedback,cx:i.x,cy:i.y});return r.setAttr(a,"data-kind",t.kind),a}}return o.svg("g",null)},t.prototype.getPosition=function(t,e){return"line"===t.kind?this.getLinePosition(t,e):this.getJunctionPosition(t,e)},t.prototype.getJunctionPosition=function(t,e){return e.find(function(e){return e.pointIndex===t.pointIndex})},t.prototype.getLinePosition=function(t,e){var n=t.parent;if(s.isRoutable(n)){for(var o=function(t){return void 0!==t.pointIndex?t.pointIndex:"target"===t.kind?n.routingPoints.length:-1},r=void 0,a=void 0,c=0,u=e;c<u.length;c++){var d=u[c],l=o(d);l<=t.pointIndex&&(void 0===r||l>o(r))&&(r=d),l>t.pointIndex&&(void 0===a||l<o(a))&&(a=d)}if(void 0!==r&&void 0!==a){if(o(r)!==t.pointIndex&&t.pointIndex>=0){var p=n.routingPoints[t.pointIndex];if(i.maxDistance(p,r)>=i.maxDistance(p,a))return}if(o(a)!==t.pointIndex+1&&t.pointIndex+1<n.routingPoints.length){p=n.routingPoints[t.pointIndex+1];if(i.maxDistance(p,r)<i.maxDistance(p,a))return}if(i.maxDistance(r,a)>=this.minimalPointDistance)return i.centerOfLine(r,a)}}},t}();e.SRoutingHandleView=d;var l=function(){function t(){}return t.prototype.render=function(t,e){var n=o.svg("text",{"class-sprotty-label":!0},t.text),i=a.getSubType(t);return i&&r.setAttr(n,"class",i),n},t}();e.SLabelView=l;var p=function(){function t(){}return t.prototype.render=function(t,e){var n="translate("+t.bounds.x+", "+t.bounds.y+")",i=o.svg("g",{transform:n,"class-sprotty-comp":"{true}"},e.renderChildren(t)),s=a.getSubType(t);return s&&r.setAttr(i,"class",s),i},t}();e.SCompartmentView=p},"6eba":function(t,e,n){},"70d9":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("3864"),c=n("e1c6"),u=n("6923"),d=function(t){function e(e){var n=t.call(this)||this;return e.forEach(function(t){return n.register(t.TYPE,new t)}),n}return o(e,t),e=i([c.injectable(),a(0,c.multiInject(u.TYPES.IButtonHandler)),a(0,c.optional()),r("design:paramtypes",[Array])],e),e}(s.InstanceRegistry);e.ButtonHandlerRegistry=d},7122:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=n("155f"),r=n("c5f4");function a(t,e,n){var o=e.filter(function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty}),r=o.map(n);return o.forEach(function(e,n){var o="";o=e.target.name.value();var i=r[n];t[o]=i}),t}function s(t,e){return new(t.bind.apply(t,[void 0].concat(e)))}function c(t,e){if(Reflect.hasMetadata(r.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(r.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(o.POST_CONSTRUCT_ERROR(t.name,e.message))}}}function u(t,e,n){var o=null;if(e.length>0){var r=e.filter(function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument}),u=r.map(n);o=s(t,u),o=a(o,e,n)}else o=new t;return c(t,o),o}e.resolveInstance=u},"719e":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=n("c5f4");function r(){return function(t){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,t))throw new Error(o.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(i.PARAM_TYPES,e,t),t}}e.injectable=r},"72dd":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("42f7"),a=n("61bf"),s=n("320b"),c=new o.ContainerModule(function(t){t(i.TYPES.ICommand).toConstructor(r.SetBoundsCommand),t(i.TYPES.ICommand).toConstructor(r.RequestBoundsCommand),t(i.TYPES.HiddenVNodeDecorator).to(a.HiddenBoundsUpdater).inSingletonScope(),t(i.TYPES.Layouter).to(s.Layouter).inSingletonScope(),t(i.TYPES.LayoutRegistry).to(s.LayoutRegistry).inSingletonScope()});e.default=c},7436:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),a=n("6923"),s=n("302f"),c=function(){function t(){this.localCache=new Map}return t.prototype.store=function(t){this.isLocalStorageAvailable()?localStorage.setItem(this.key,JSON.stringify(t)):this.localCache.set(this.key,JSON.stringify(t))},t.prototype.load=function(){var t=this.isLocalStorageAvailable()?localStorage.getItem(this.key):this.localCache.get(this.key);return t?JSON.parse(t):s.EMPTY_ROOT},t.prototype.isLocalStorageAvailable=function(){try{return"object"===typeof localStorage&&null!==localStorage}catch(t){return!1}},Object.defineProperty(t.prototype,"key",{get:function(){return this.viewerOptions.baseDiv},enumerable:!0,configurable:!0}),o([r.inject(a.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"viewerOptions",void 0),t=o([r.injectable()],t),t}();e.SModelStorage=c},"757d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=n("77d3"),r=n("1979"),a=n("cf13"),s=function(){function t(t,e,n,s){this.id=i.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var c=null;"string"===typeof s?c=new r.Metadata(o.NAMED_TAG,s):s instanceof r.Metadata&&(c=s),null!==c&&this.metadata.push(c)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){var o=n[e];if(o.key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(o.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(o.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(o.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG})},t.prototype.isOptional=function(){return this.matchesTag(o.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===o.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG}):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(o.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var o=0,i=e.metadata;o<i.length;o++){var r=i[o];if(r.key===t&&r.value===n)return!0}return!1}},t}();e.Target=s},7685:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};e.BindingCount=o},"771c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("77d3"),i=function(){function t(t){this.id=o.id(),this.registry=t}return t}();e.ContainerModule=i;var r=function(){function t(t){this.id=o.id(),this.registry=t}return t}();e.AsyncContainerModule=r},"77d3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=0;function i(){return o++}e.id=i},7890:function(t,e,n){"use strict";var o=n("d741"),i=n.n(o);i.a},7959:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),r=n("dd02"),a=function(){function t(){}return t.prototype.route=function(t,e){void 0===e&&(e={minimalPointDistance:2});var n,o,i=t.source,a=t.target;if(void 0===i||void 0===a)return[];var s=void 0!==t.routingPoints?t.routingPoints.length:0;if(s>=1){var c=t.routingPoints[0];n=i.getTranslatedAnchor(c,t.parent,t,t.sourceAnchorCorrection);var u=t.routingPoints[s-1];o=a.getTranslatedAnchor(u,t.parent,t,t.targetAnchorCorrection)}else{var d=r.center(a.bounds);n=i.getTranslatedAnchor(d,a.parent,t,t.sourceAnchorCorrection);var l=r.center(i.bounds);o=a.getTranslatedAnchor(l,i.parent,t,t.targetAnchorCorrection)}var p=[];p.push({kind:"source",x:n.x,y:n.y});for(var h=0;h<s;h++){var f=t.routingPoints[h];(h>0&&h<s-1||0===h&&r.maxDistance(n,f)>=e.minimalPointDistance+(t.sourceAnchorCorrection||0)||h===s-1&&r.maxDistance(f,o)>=e.minimalPointDistance+(t.targetAnchorCorrection||0))&&p.push({kind:"linear",x:f.x,y:f.y,pointIndex:h})}return p.push({kind:"target",x:o.x,y:o.y}),p},t=o([i.injectable()],t),t}();e.LinearEdgeRouter=a},"7d36":function(t,e,n){"use strict";function o(t){return t.hasFeature(e.fadeFeature)&&void 0!==t["opacity"]}Object.defineProperty(e,"__esModule",{value:!0}),e.fadeFeature=Symbol("fadeFeature"),e.isFadeable=o},"7dba":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("624f"),i=n("30e3"),r=n("155f"),a=n("c5f4"),s=n("ba33");e.getFunctionName=s.getFunctionName;var c=n("757d");function u(t,e){var n=s.getFunctionName(e),o=d(t,n,e,!1);return o}function d(t,e,n,o){var r=t.getConstructorMetadata(n),a=r.compilerGeneratedMetadata;if(void 0===a){var s=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var c=r.userGeneratedMetadata,u=Object.keys(c),d=0===n.length&&u.length>0,l=d?u.length:n.length,f=p(o,e,a,c,l),y=h(t,n),v=f.concat(y);return v}function l(t,e,n,a,s){var u=s[t.toString()]||[],d=y(u),l=!0!==d.unmanaged,p=a[t],h=d.inject||d.multiInject;if(p=h||p,p instanceof o.LazyServiceIdentifer&&(p=p.unwrap()),l){var f=p===Object,v=p===Function,g=void 0===p,m=f||v||g;if(!e&&m){var _=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(_)}var b=new c.Target(r.TargetTypeEnum.ConstructorArgument,d.targetName,p);return b.metadata=u,b}return null}function p(t,e,n,o,i){for(var r=[],a=0;a<i;a++){var s=a,c=l(s,t,e,n,o);null!==c&&r.push(c)}return r}function h(t,e){for(var n=t.getPropertiesMetadata(e),o=[],i=Object.keys(n),a=0,s=i;a<s.length;a++){var u=s[a],d=n[u],l=y(n[u]),p=l.targetName||u,f=l.inject||l.multiInject,v=new c.Target(r.TargetTypeEnum.ClassProperty,p,f);v.metadata=d,o.push(v)}var g=Object.getPrototypeOf(e.prototype).constructor;if(g!==Object){var m=h(t,g);o=o.concat(m)}return o}function f(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var o=s.getFunctionName(n),i=d(t,o,n,!0),r=i.map(function(t){return t.metadata.filter(function(t){return t.key===a.UNMANAGED_TAG})}),c=[].concat.apply([],r).length,u=i.length-c;return u>0?u:f(t,n)}return 0}function y(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[a.INJECT_TAG],multiInject:e[a.MULTI_INJECT_TAG],targetName:e[a.NAME_TAG],unmanaged:e[a.UNMANAGED_TAG]}}e.getDependencies=u,e.getBaseClassDependencyCount=f},"7faf":function(t,e,n){"use strict";function o(t){return t.hasFeature(e.exportFeature)&&void 0!==t["export"]}Object.defineProperty(e,"__esModule",{value:!0}),e.exportFeature=Symbol("exportFeature"),e.isExportable=o},8025:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),r=n("f4cb"),a=n("302f"),s=n("ed4f"),c=n("c444"),u=n("559d"),d=function(){function t(){this.popupOpen=!1}return t.prototype.handle=function(t){if(t.kind===r.SetPopupModelCommand.KIND)this.popupOpen=t.newRoot.type!==a.EMPTY_ROOT.type;else if(this.popupOpen)return new r.SetPopupModelAction({id:a.EMPTY_ROOT.id,type:a.EMPTY_ROOT.type})},t}(),l=function(){function t(){}return t.prototype.initialize=function(t){var e=new d;t.register(s.FitToScreenCommand.KIND,e),t.register(s.CenterCommand.KIND,e),t.register(c.ViewportCommand.KIND,e),t.register(r.SetPopupModelCommand.KIND,e),t.register(u.MoveCommand.KIND,e)},t=o([i.injectable()],t),t}();e.PopupActionHandlerInitializer=l},8122:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("7436"),r=n("6923"),a=n("33b2"),s=n("9e2e"),c=n("0fb6"),u=n("be02"),d=n("160b"),l=n("302f"),p=n("538c"),h=n("29fa"),f=n("65d1"),y=n("3b4c"),v=n("1417"),g=n("d4ec"),m=n("064a"),_=n("8794"),b=n("0d7a"),w=n("ed79"),S=n("9757"),O=new o.ContainerModule(function(t){t(r.TYPES.ILogger).to(s.NullLogger).inSingletonScope(),t(r.TYPES.LogLevel).toConstantValue(s.LogLevel.warn),t(r.TYPES.SModelRegistry).to(l.SModelRegistry).inSingletonScope(),t(r.TYPES.ActionHandlerRegistry).to(u.ActionHandlerRegistry).inSingletonScope(),t(r.TYPES.ViewRegistry).to(m.ViewRegistry).inSingletonScope(),t(r.TYPES.IModelFactory).to(l.SModelFactory).inSingletonScope(),t(r.TYPES.IActionDispatcher).to(c.ActionDispatcher).inSingletonScope(),t(r.TYPES.IActionDispatcherProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(r.TYPES.IActionDispatcher))})}}),t(r.TYPES.IActionHandlerInitializer).to(S.CommandActionHandlerInitializer),t(r.TYPES.ICommandStack).to(d.CommandStack).inSingletonScope(),t(r.TYPES.ICommandStackProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(r.TYPES.ICommandStack))})}}),t(r.TYPES.CommandStackOptions).toConstantValue({defaultDuration:250,undoHistoryLimit:50}),t(h.Viewer).toSelf().inSingletonScope(),t(r.TYPES.IViewer).toDynamicValue(function(t){return t.container.get(h.Viewer)}).inSingletonScope().whenTargetNamed("delegate"),t(_.ViewerCache).toSelf().inSingletonScope(),t(r.TYPES.IViewer).toDynamicValue(function(t){return t.container.get(_.ViewerCache)}).inSingletonScope().whenTargetIsDefault(),t(r.TYPES.IViewerProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(r.TYPES.IViewer))})}}),t(r.TYPES.ViewerOptions).toConstantValue(f.defaultViewerOptions()),t(r.TYPES.DOMHelper).to(b.DOMHelper).inSingletonScope(),t(r.TYPES.ModelRendererFactory).toFactory(function(t){return function(e){var n=t.container.get(r.TYPES.ViewRegistry);return new h.ModelRenderer(n,e)}}),t(w.IdDecorator).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(w.IdDecorator)}).inSingletonScope(),t(y.MouseTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(y.MouseTool)}).inSingletonScope(),t(v.KeyTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(v.KeyTool)}).inSingletonScope(),t(g.FocusFixDecorator).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(g.FocusFixDecorator)}).inSingletonScope(),t(r.TYPES.PopupVNodeDecorator).toDynamicValue(function(t){return t.container.get(w.IdDecorator)}).inSingletonScope(),t(y.PopupMouseTool).toSelf().inSingletonScope(),t(r.TYPES.PopupVNodeDecorator).toDynamicValue(function(t){return t.container.get(y.PopupMouseTool)}).inSingletonScope(),t(r.TYPES.HiddenVNodeDecorator).toDynamicValue(function(t){return t.container.get(w.IdDecorator)}).inSingletonScope(),t(r.TYPES.AnimationFrameSyncer).to(p.AnimationFrameSyncer).inSingletonScope(),t(r.TYPES.ICommand).toConstructor(a.InitializeCanvasBoundsCommand),t(a.CanvasBoundsInitializer).toSelf().inSingletonScope(),t(r.TYPES.IVNodeDecorator).toDynamicValue(function(t){return t.container.get(a.CanvasBoundsInitializer)}).inSingletonScope(),t(r.TYPES.SModelStorage).to(i.SModelStorage).inSingletonScope()});e.default=O},8195:function(t,e,n){},"81aa":function(t,e,n){"use strict";function o(t,e,n,o,i){var r=void 0===e?void 0:e.key;return{sel:t,data:e,children:n,text:o,elm:i,key:r}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=o,e.default=o},"82c4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("51c0"),i=function(){function t(){this.nodeIds=new Set,this.edgeIds=new Set,this.portIds=new Set,this.labelIds=new Set,this.sectionIds=new Set}return t.prototype.transform=function(t){var e,n,o=this,i={type:"graph",id:t.id||"root",children:[]};if(t.children){var r=t.children.map(function(t){return o.transformElkNode(t)});(e=i.children).push.apply(e,r)}if(t.edges){var a=t.edges.map(function(t){return o.transformElkEdge(t)});(n=i.children).push.apply(n,a)}return i},t.prototype.transformElkNode=function(t){var e,n,o,i,r=this;this.checkAndRememberId(t,this.nodeIds);var a={type:"node",id:t.id,position:this.pos(t),size:this.size(t),status:t.status||"waiting",children:[]};if(t.children){var s=t.children.map(function(t){return r.transformElkNode(t)});(e=a.children).push.apply(e,s)}if(t.ports){var c=t.ports.map(function(t){return r.transformElkPort(t)});(n=a.children).push.apply(n,c)}if(t.labels){var u=t.labels.map(function(t){return r.transformElkLabel(t)});(o=a.children).push.apply(o,u)}if(t.edges){var d=t.edges.map(function(t){return r.transformElkEdge(t)});(i=a.children).push.apply(i,d)}return a},t.prototype.transformElkPort=function(t){this.checkAndRememberId(t,this.portIds);var e={type:"port",id:t.id,position:this.pos(t),size:this.size(t),children:[]};return e},t.prototype.transformElkLabel=function(t){return this.checkAndRememberId(t,this.labelIds),{type:"label",id:t.id,text:t.text,position:this.pos(t),size:this.size(t)}},t.prototype.transformElkEdge=function(t){var e,n,i=this;this.checkAndRememberId(t,this.edgeIds);var r={type:"edge",id:t.id,sourceId:"",targetId:"",routingPoints:[],children:[]};if(o.isPrimitive(t)?(r.sourceId=t.source,r.targetId=t.target,t.sourcePoint&&r.routingPoints.push(t.sourcePoint),t.bendPoints&&(e=r.routingPoints).push.apply(e,t.bendPoints),t.targetPoint&&r.routingPoints.push(t.targetPoint)):o.isExtended(t)&&(r.sourceId=t.sources[0],r.targetId=t.targets[0],t.sections&&t.sections.forEach(function(t){var e;i.checkAndRememberId(t,i.sectionIds),r.routingPoints.push(t.startPoint),t.bendPoints&&(e=r.routingPoints).push.apply(e,t.bendPoints),r.routingPoints.push(t.endPoint)})),t.junctionPoints&&t.junctionPoints.forEach(function(e,n){var o={type:"junction",id:t.id+"_j"+n,position:e};r.children.push(o)}),t.labels){var a=t.labels.map(function(t){return i.transformElkLabel(t)});(n=r.children).push.apply(n,a)}return r},t.prototype.pos=function(t){return{x:t.x||0,y:t.y||0}},t.prototype.size=function(t){return{width:t.width||0,height:t.height||0}},t.prototype.checkAndRememberId=function(t,e){if(void 0==t.id)throw Error("An element is missing an id.");if(e.has(t.id))throw Error("Duplicate id: "+t.id+".");e.add(t.id)},t}();e.ElkGraphJsonToSprotty=i},8336:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3"),i=n("155f"),r=n("0fd9"),a=n("2cac"),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new r.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!==typeof this._binding.serviceIdentifier)throw new Error(""+o.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new r.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!==typeof t)throw new Error(o.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){var n=function(){return e.container.get(t)};return n},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},t}();e.BindingToSyntax=s},"85ed":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("9e2e"),c=n("6923"),u=function(){function t(e,n,o,i,r){this.severity=e,this.time=n,this.caller=o,this.message=i,this.params=r,this.kind=t.KIND}return t.KIND="logging",t}();e.LoggingAction=u;var d=function(){function t(t,e){this.modelSourceProvider=t,this.logLevel=e}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.error&&this.forward(t,e,s.LogLevel.error,n)},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.warn&&this.forward(t,e,s.LogLevel.warn,n)},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.info&&this.forward(t,e,s.LogLevel.info,n)},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=s.LogLevel.log)try{var i="object"===typeof t?t.constructor.name:String(t);console.log.apply(t,[i+": "+e].concat(n))}catch(t){}},t.prototype.forward=function(t,e,n,o){var i=new Date,r=new u(s.LogLevel[n],i.toLocaleTimeString(),"object"===typeof t?t.constructor.name:String(t),e,o.map(function(t){return JSON.stringify(t)}));this.modelSourceProvider().then(function(n){try{n.handle(r)}catch(n){try{console.log.apply(t,[e,r,n])}catch(t){}}})},t=o([a.injectable(),r(0,a.inject(c.TYPES.ModelSourceProvider)),r(1,a.inject(c.TYPES.LogLevel)),i("design:paramtypes",[Function,Number])],t),t}();e.ForwardingLogger=d},"861d":function(t,e,n){var o=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,i=n("c4ec"),r=Object.create?Object.create(null):{};function a(t,e,n,o,i){var r=e.indexOf("<",o),a=e.slice(o,-1===r?void 0:r);/^\s*$/.test(a)&&(a=" "),(!i&&r>-1&&n+t.length>=0||" "!==a)&&t.push({type:"text",content:a})}t.exports=function(t,e){e||(e={}),e.components||(e.components=r);var n,s=[],c=-1,u=[],d={},l=!1;return t.replace(o,function(o,r){if(l){if(o!=="</"+n.name+">")return;l=!1}var p,h="/"!==o.charAt(1),f=0===o.indexOf("\x3c!--"),y=r+o.length,v=t.charAt(y);h&&!f&&(c++,n=i(o),"tag"===n.type&&e.components[n.name]&&(n.type="component",l=!0),n.voidElement||l||!v||"<"===v||a(n.children,t,c,y,e.ignoreWhitespace),d[n.tagName]=n,0===c&&s.push(n),p=u[c-1],p&&p.children.push(n),u[c]=n),(f||!h||n.voidElement)&&(f||c--,!l&&"<"!==v&&v&&(p=-1===c?s:u[c].children,a(p,t,c,y,e.ignoreWhitespace)))}),!s.length&&t.length&&a(s,t,0,0,e.ignoreWhitespace),s}},8794:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=n("538c"),u=function(){function t(t,e){this.delegate=t,this.syncer=e}return t.prototype.isCacheEmpty=function(){return void 0===this.cachedModelRoot&&void 0===this.cachedHiddenModelRoot&&void 0===this.cachedPopup},t.prototype.updatePopup=function(t){var e=this.isCacheEmpty();this.cachedPopup=t,e&&this.scheduleUpdate()},t.prototype.update=function(t){var e=this.isCacheEmpty();this.cachedModelRoot=t,e&&this.scheduleUpdate()},t.prototype.updateHidden=function(t){var e=this.isCacheEmpty();this.cachedHiddenModelRoot=t,e&&this.scheduleUpdate()},t.prototype.scheduleUpdate=function(){var t=this;this.syncer.onEndOfNextFrame(function(){if(t.cachedHiddenModelRoot){var e=t.cachedHiddenModelRoot;t.delegate.updateHidden(e),t.cachedHiddenModelRoot=void 0}if(t.cachedModelRoot){var n=t.cachedModelRoot;t.delegate.update(n),t.cachedModelRoot=void 0}if(t.cachedPopup){n=t.cachedPopup;t.delegate.updatePopup(n),t.cachedPopup=void 0}})},t=o([a.injectable(),r(0,a.inject(s.TYPES.IViewer)),r(0,a.named("delegate")),r(1,a.inject(s.TYPES.AnimationFrameSyncer)),i("design:paramtypes",[Object,c.AnimationFrameSyncer])],t),t}();e.ViewerCache=u},"87b3":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7685"),i=n("30e3"),r=n("155f"),a=n("c5f4"),s=n("a8af"),c=n("ba33"),u=n("a32f"),d=n("1979"),l=n("c8c0"),p=n("7dba"),h=n("c622"),f=n("757d");function y(t){return t._bindingDictionary}function v(t,e,n,o,i,r){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,c=new d.Metadata(s,n),u=new f.Target(e,o,n,c);if(void 0!==i){var l=new d.Metadata(i,r);u.metadata.push(l)}return u}function g(t,e,n,i,r){var a=b(n.container,r.serviceIdentifier),s=[];return a.length===o.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"===typeof r.serviceIdentifier&&t.getConstructorMetadata(r.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(r.serviceIdentifier).toSelf(),a=b(n.container,r.serviceIdentifier)),s=e?a:a.filter(function(t){var e=new h.Request(t.serviceIdentifier,n,i,t,r);return t.constraint(e)}),m(r.serviceIdentifier,s,r,n.container),s}function m(t,e,n,r){switch(e.length){case o.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=c.getServiceIdentifierAsString(t),s=i.NOT_REGISTERED;throw s+=c.listMetadataForTarget(a,n),s+=c.listRegisteredBindingsForServiceIdentifier(r,a,b),new Error(s);case o.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case o.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=c.getServiceIdentifierAsString(t),s=i.AMBIGUOUS_MATCH+" "+a;throw s+=c.listRegisteredBindingsForServiceIdentifier(r,a,b),new Error(s)}}function _(t,e,n,o,a,s){var c,u;if(null===a){c=g(t,e,o,null,s),u=new h.Request(n,o,null,c,s);var d=new l.Plan(o,u);o.addPlan(d)}else c=g(t,e,o,a,s),u=a.addChildRequest(s.serviceIdentifier,c,s);c.forEach(function(e){var n=null;if(s.isArray())n=u.addChildRequest(e.serviceIdentifier,e,s);else{if(e.cache)return;n=u}if(e.type===r.BindingTypeEnum.Instance&&null!==e.implementationType){var a=p.getDependencies(t,e.implementationType);if(!o.container.options.skipBaseClassChecks){var c=p.getBaseClassDependencyCount(t,e.implementationType);if(a.length<c){var d=i.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(e.implementationType));throw new Error(d)}}a.forEach(function(e){_(t,!1,e.serviceIdentifier,o,n,e)})}})}function b(t,e){var n=[],o=y(t);return o.hasKey(e)?n=o.get(e):null!==t.parent&&(n=b(t.parent,e)),n}function w(t,e,n,o,i,r,a,d){void 0===d&&(d=!1);var l=new u.Context(e),p=v(n,o,i,"",r,a);try{return _(t,d,i,l,null,p),l}catch(t){throw s.isStackOverflowExeption(t)&&l.plan&&c.circularDependencyToException(l.plan.rootRequest),t}}function S(t,e,n,o){var i=new f.Target(r.TargetTypeEnum.Variable,"",e,new d.Metadata(n,o)),a=new u.Context(t),s=new h.Request(e,a,null,[],i);return s}e.getBindingDictionary=y,e.plan=w,e.createMockRequest=S},"87fa":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("3a92"),r=n("dd02"),a=n("ba30"),s=n("66f9"),c=n("a0af"),u=n("4c18"),d=n("47b7"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return o(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){var t=Math.min(this.size.width,this.size.height);return t>0?t/2:0},enumerable:!0,configurable:!0}),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return a.computeCircleAnchor(this.position,this.radius,t,e+n)},e}(d.SNode);e.CircularNode=l;var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return o(e,t),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return a.computeRectangleAnchor(this.bounds,t,e+n)},e}(d.SNode);e.RectangularNode=p;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return o(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){var t=Math.min(this.size.width,this.size.height);return t>0?t/2:0},enumerable:!0,configurable:!0}),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return a.computeCircleAnchor(this.position,this.radius,t,e+n)},e}(d.SPort);e.CircularPort=h;var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return o(e,t),e.prototype.getAnchor=function(t,e){void 0===e&&(e=0);var n=.5*this.strokeWidth;return a.computeRectangleAnchor(this.bounds,t,e+n)},e}(d.SPort);e.RectangularPort=f;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.classes=[],e}return o(e,t),e}(i.SModelRoot);e.HtmlRoot=y;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(i.SChildElement);e.PreRenderedElement=v;var g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=r.ORIGIN_POINT,e.size=r.EMPTY_DIMENSION,e.selected=!1,e.alignment=r.ORIGIN_POINT,e}return o(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.hasFeature=function(t){return t===c.moveFeature||t===s.boundsFeature||t===u.selectFeature||t===s.alignFeature},e}(v);e.ShapedPreRenderedElement=g},"8b1b":function(t,e,n){},"8c88":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=n("1979"),r=n("66d7");function a(t){return function(e,n,a){var s=new i.Metadata(o.MULTI_INJECT_TAG,t);"number"===typeof a?r.tagParameter(e,n,a,s):r.tagProperty(e,n,s)}}e.multiInject=a},"8d53":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd7b"),i=function(){function t(){}return t.prototype.render=function(t,e){var n=this;return o.h(this.selector(t),{key:t.id,hook:{init:this.init.bind(this),prepatch:this.prepatch.bind(this)},fn:function(){return n.renderAndDecorate(t,e)},args:this.watchedArgs(t),thunk:!0})},t.prototype.renderAndDecorate=function(t,e){var n=this.doRender(t,e);return e.decorate(n,t),n},t.prototype.copyToThunk=function(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm},t.prototype.init=function(t){var e=t.data,n=e.fn.apply(void 0,e.args);this.copyToThunk(n,t)},t.prototype.prepatch=function(t,e){var n=t.data,o=e.data;this.equals(n.args,o.args)?this.copyToThunk(t,e):this.copyToThunk(o.fn.apply(void 0,o.args),e)},t.prototype.equals=function(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<e.length;++n)if(!this.equals(t[n],e[n]))return!1}else if("object"===typeof t&&"object"===typeof e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if("parent"!==o&&"root"!==o&&(!(o in e)||!this.equals(t[o],e[o])))return!1}else if(t!==e)return!1;return!0},t}();function r(t){return"thunk"in t}e.ThunkView=i,e.isThunk=r},"8d8c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=n("1979"),r=n("66d7");function a(){return function(t,e,n){var a=new i.Metadata(o.OPTIONAL_TAG,!0);"number"===typeof n?r.tagParameter(t,e,n,a):r.tagProperty(t,e,a)}}e.optional=a},"8e65":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=new o.ContainerModule(function(t){t(i.TYPES.ModelSourceProvider).toProvider(function(t){return function(){return new Promise(function(e){e(t.container.get(i.TYPES.ModelSource))})}})});e.default=r},9016:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="undefined"!==typeof window&&window.requestAnimationFrame||setTimeout,i=function(t){o(function(){o(t)})},r=!1;function a(t,e,n){i(function(){t[e]=n})}function s(t,e){var n,o,i=e.elm,r=t.data.style,s=e.data.style;if((r||s)&&r!==s){r=r||{},s=s||{};var c="delayed"in r;for(o in r)s[o]||("-"===o[0]&&"-"===o[1]?i.style.removeProperty(o):i.style[o]="");for(o in s)if(n=s[o],"delayed"===o&&s.delayed)for(var u in s.delayed)n=s.delayed[u],c&&n===r.delayed[u]||a(i.style,u,n);else"remove"!==o&&n!==r[o]&&("-"===o[0]&&"-"===o[1]?i.style.setProperty(o,n):i.style[o]=n)}}function c(t){var e,n,o=t.elm,i=t.data.style;if(i&&(e=i.destroy))for(n in e)o.style[n]=e[n]}function u(t,e){var n=t.data.style;if(n&&n.remove){r||(getComputedStyle(document.body).transform,r=!0);var o,i,a=t.elm,s=0,c=n.remove,u=0,d=[];for(o in c)d.push(o),a.style[o]=c[o];i=getComputedStyle(a);for(var l=i["transition-property"].split(", ");s<l.length;++s)-1!==d.indexOf(l[s])&&u++;a.addEventListener("transitionend",function(t){t.target===a&&--u,0===u&&e()})}else e()}function d(){r=!1}e.styleModule={pre:d,create:s,update:s,destroy:c,remove:u},e.default=e.styleModule},9175:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t}();e.Deferred=o},9261:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"column"},[n("div",{staticClass:"col row full-height",attrs:{id:"viewer-container"}},[n("keep-alive",[n(t.mainViewer.name,{tag:"component"})],1),n("q-resize-observable",{on:{resize:t.setSiblingsToAskFor}})],1),n("div",{staticClass:"col-1 row"},[t.logVisible?n("klab-log"):t._e()],1),n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[t.mainViewer.mainControl?n("klab-main-control"):t._e()],1),n("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[t.askForUndocking&&!t.mainViewer.mainControl?n("div",{staticClass:"full-height full-width",attrs:{id:"mc-undocking"}}):t._e()]),n("q-modal",{attrs:{id:"modal-connection-status","no-esc-dismiss":"","no-backdrop-dismiss":"","content-css":{"background-color":"rgba("+t.hexToRgbValues(t.modalColor)+", 0.5)"},"content-classes":["modal-borders","no-padding","no-margin"]},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[n("div",{staticClass:"bg-opaque-white modal-borders"},[n("div",{staticClass:"q-pa-xs text-bold modal-klab-content",style:{color:t.modalColor}},[n("klab-spinner",{attrs:{color:t.modalColor,size:40,ball:18,id:"modal-spinner",animated:t.modalAnimated,wrapperId:"modal-connection-status"}}),n("span",{staticClass:"text-white"},[t._v(t._s(t.modalText))])],1)])])],1)},i=[];o._withStripped=!0;var r=n("9523"),a=n.n(r),s=n("3156"),c=n.n(s),u=n("2f62"),d=n("7cca"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDrawMode,expression:"!isDrawMode"}],ref:"main-control-container",staticClass:"print-hide small",attrs:{id:"mc-container"}},[n("transition",{attrs:{appear:"","enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isHidden,expression:"isHidden"}],staticClass:"klab-spinner-div",style:{left:t.defaultLeft+"px",top:t.defaultTop+"px","border-color":t.hasTasks()?t.spinnerColor.color:"rgba(0,0,0,0)"},attrs:{id:"spinner-lonely-div"}},[n("klab-spinner",{attrs:{id:"spinner-lonely","store-controlled":!0,size:40,ball:22,wrapperId:"spinner-lonely-div"},nativeOn:{dblclick:function(e){return t.show(e)},touchstart:function(e){t.handleTouch(e,null,t.show)}}})],1)]),n("transition",{attrs:{appear:"","enter-active-class":"animated fadeInLeft","leave-active-class":"animated fadeOutLeft"}},[n("q-card",{directives:[{name:"draggable",rawName:"v-draggable",value:t.dragMCConfig,expression:"dragMCConfig"},{name:"show",rawName:"v-show",value:!t.isHidden,expression:"!isHidden"}],staticClass:"no-box-shadow absolute lot-of-flow",class:[t.hasContext?"":"bg-transparent",t.hasContext?"with-context":"without-context"],style:{top:t.defaultTop+"px",left:t.centeredLeft+"px"},attrs:{id:"mc-q-card",flat:!0},nativeOn:{contextmenu:function(t){t.preventDefault()}}},[n("q-card-title",{ref:"mc-draggable",staticClass:"q-pa-xs",style:{"background-color":t.getBGColor(t.hasContext?"1.0":t.searchIsFocused?".6":".2")},attrs:{id:"mc-q-card-title"}},[n("klab-search-bar",{ref:"klab-search-bar"})],1),n("q-card-main",{directives:[{name:"show",rawName:"v-show",value:t.hasContext&&!t.isHidden,expression:"hasContext && !isHidden"}],staticClass:"no-margin relative-position"},[n("keep-alive",[n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[n(t.selectedTab,{tag:"component"})],1)],1)],1),n("q-card-actions",{directives:[{name:"show",rawName:"v-show",value:t.hasContext&&!t.isHidden,expression:"hasContext && !isHidden"}],staticClass:"no-margin",attrs:{id:"context-actions"}},[n("div",{attrs:{id:"mc-tabs"}},[n("div",{staticClass:"klab-button mc-tab",class:["tab-button",{active:"klab-log-pane"===t.selectedTab}],on:{click:function(e){t.selectedTab="klab-log-pane"}}},[n("q-icon",{attrs:{name:"mdi-console"}},[n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.logPane")))])],1)],1),n("div",{staticClass:"klab-button mc-tab",class:["tab-button",{active:"klab-tree-pane"===t.selectedTab}],on:{click:function(e){t.selectedTab="klab-tree-pane"}}},[n("q-icon",{attrs:{name:"mdi-file-tree"}},[n("q-tooltip",{attrs:{offset:[0,8],self:"top middle",anchor:"bottom middle"}},[t._v(t._s(t.$t("tooltips.treePane")))])],1)],1)]),n("div",{staticClass:"mc-scalereference",attrs:{id:"mc-spacereference"}},[n("scale-reference",{attrs:{width:"110px","scale-type":"space",editable:!1}})],1),n("div",{staticClass:"mc-separator",staticStyle:{right:"290px"}}),n("div",{staticClass:"mc-scalereference",attrs:{id:"mc-timereference"}},[n("scale-reference",{attrs:{width:"110px","scale-type":"time",editable:!1}})],1),n("div",{staticClass:"mc-separator",staticStyle:{right:"160px"}}),n("main-actions-buttons",{attrs:{orientation:"horizontal","separator-class":"mc-separator"}}),n("stop-actions-buttons")],1)],1)],1),n("scale-change-dialog"),n("transition",{attrs:{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[t.askForDocking?n("div",{staticClass:"mc-docking full-height",style:{width:t.leftMenuMaximized}}):t._e()])],1)},p=[];l._withStripped=!0;var h=n("31cf"),f=n("abcf"),y=n("1fe0"),v=n("e464"),g=n("236d"),m=n("2573"),_=n("a817"),b=n("9967"),w=n("0880"),S=n("cbc9"),O=n("8784"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!==t.scaleReference?n("q-dialog",{attrs:{title:t.$t("label.titleChangeScale",{type:"space"===t.scaleEditingType?t.$t("label.labelSpatial"):t.$t("label.labelTemporal")}),color:"info",cancel:!0,ok:!1},on:{show:t.initValues},scopedSlots:t._u([{key:"buttons",fn:function(e){return[n("q-btn",{attrs:{color:"info",outline:"",label:"Cancel"},on:{click:e.cancel}}),n("q-btn",{attrs:{color:"info",label:"Ok"},on:{click:function(n){t.choose(e.ok)}}})]}}]),model:{value:t.scaleEditing,callback:function(e){t.scaleEditing=e},expression:"scaleEditing"}},[n("div",{attrs:{slot:"body"},slot:"body"},[n("q-input",{attrs:{type:"number",min:"0",color:"info",autofocus:"",after:[{icon:"warning",error:!0,condition:t.resolutionError}],"stack-label":t.resolutionError?t.$t("messages.changeScaleResolutionError"):t.$t("label.resolutionLabel")},model:{value:t.resolution,callback:function(e){t.resolution=e},expression:"resolution"}}),n("q-select",{attrs:{"float-label":t.$t("label.unitLabel"),color:"info",options:t.units},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1)]):t._e()},P=[];E._withStripped=!0;n("96cf");var x=n("c973"),C=n.n(x),T=n("17dc"),M={name:"ScaleChangeDialog",data:function(){return{resolution:null,unit:null,units:[{label:this.$t("label.labelCm"),value:"cm"},{label:this.$t("label.labelM"),value:"m"},{label:this.$t("label.labelKm"),value:"km"}],resolutionError:!1}},computed:c()({},Object(u["c"])("data",["scaleReference"]),Object(u["c"])("view",["scaleEditingType"]),{scaleEditing:{get:function(){return this.$store.getters["view/isScaleEditing"]},set:function(t){this.setScaleEditing({active:t,type:this.scaleEditingType})}}}),methods:c()({},Object(u["b"])("data",["setScaleLocked","updateScaleReference"]),Object(u["b"])("view",["setScaleEditing"]),{choose:function(){var t=C()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.info("Resolution: ".concat(this.resolution," and unit: ").concat(this.unit)),!(""===this.resolution||this.resolution<=0)){t.next=5;break}this.resolutionError=!0,t.next=12;break;case 5:return t.next=7,e();case 7:this.resolutionError=!1,this.sendStompMessage(T["a"].SCALE_REFERENCE(c()({scaleReference:this.scaleReference},"space"===this.scaleEditingType&&{spaceResolutionConverted:this.resolution},"space"===this.scaleEditingType&&{spaceUnit:this.unit},"time"===this.scaleEditingType&&{timeResolution:this.resolution},"time"===this.scaleEditingType&&{timeUnit:this.unit}),this.$store.state.data.session).body),this.setScaleLocked({scaleType:this.scaleEditingType,scaleLocked:!0}),this.updateScaleReference({type:this.scaleEditingType,resolution:this.resolution,unit:this.unit}),this.$q.notify({message:this.$t("messages.updateScale",{type:this.scaleEditingType,resolution:this.resolution,unit:this.unit}),type:"info",timeout:1e3});case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),initValues:function(){null!==this.scaleReference&&(this.resolution="space"===this.scaleEditingType?this.scaleReference.spaceResolutionConverted:this.scaleReference.timeResolution,this.unit="space"===this.scaleEditingType?this.scaleReference.spaceUnit:this.scaleReference.timeUnit)}})},I=M,R=(n("a101"),n("2877")),A=Object(R["a"])(I,E,P,!1,null,null,null);A.options.__file="ScaleChangeDialog.vue";var j=A.exports,N=n("0755"),D=f["b"].width,k=f["b"].height,L={name:"klabMainControl",components:{KlabSpinner:m["a"],KlabSearchBar:_["a"],KlabTreePane:b["a"],KlabLogPane:w["a"],ScrollingText:S["a"],ScaleReference:O["a"],ScaleChangeDialog:j,MainActionsButtons:v["a"],StopActionsButtons:g["a"]},directives:{Draggable:h["a"]},mixins:[N["a"]],data:function(){var t=this;return{isHidden:!1,dragMCConfig:{handle:void 0,resetInitialPos:!1,onPositionChange:Object(y["a"])(function(e,n){t.onDebouncedPositionChanged(n)},100),onDragStart:function(){t.dragging=!0},onDragEnd:this.checkWhereWasDragged,fingers:2},dragging:!1,askForDocking:!1,leftMenuMaximized:"".concat(d["f"].LEFTMENU_MAXSIZE,"px"),boundingElement:void 0,selectedTab:"klab-tree-pane",draggableElement:void 0,draggableElementWidth:0,centeredLeft:this.defaultLeft}},computed:c()({},Object(u["c"])("data",["hasContext"]),Object(u["c"])("view",["spinnerColor","searchIsFocused","isDrawMode"]),Object(u["c"])("stomp",["hasTasks"])),methods:c()({},Object(u["b"])("view",["setMainViewer"]),{callStartType:function(t){this.searchIsFocused?t.evt.stopPropagation():this.$refs["klab-search-bar"].startType(t)},onDebouncedPositionChanged:function(t){this.hasContext&&this.dragging&&t&&t.left<-this.draggableElementWidth/3?this.askForDocking=!0:this.askForDocking=!1},hide:function(){this.dragMCConfig.resetInitialPos=!1,this.isHidden=!0},show:function(){this.dragMCConfig.resetInitialPos=!1,this.isHidden=!1},getCenteredLeft:function(){if("undefined"!==typeof this.draggableElement&&!this.hasContext){var t=this.draggableElementWidth,e=D(this.boundingElement);return(e-t)/2}return this.defaultLeft},changeDraggablePosition:function(t){this.draggableElement.style.left="".concat(t.left,"px"),this.draggableElement.style.top="".concat(t.top,"px");var e=JSON.parse(this.dragMCConfig.handle.getAttribute("draggable-state"));e.startDragPosition=t,e.currentDragPosition=t,document.getElementById("mc-q-card-title").setAttribute("draggable-state",JSON.stringify(e))},checkWhereWasDragged:function(){if(this.dragging=!1,this.askForDocking)return this.askForDocking=!1,void this.setMainViewer(d["g"].DOCKED_DATA_VIEWER);this.draggableElement.offsetTop<0&&this.changeDraggablePosition({top:0,left:Math.max(this.draggableElement.offsetLeft,0)}),this.draggableElement.offsetLeft+this.draggableElement.offsetWidth<=0&&this.changeDraggablePosition({top:Math.max(this.draggableElement.offsetTop,0),left:0}),this.draggableElement.offsetLeft>=D(this.boundingElement)&&this.changeDraggablePosition({top:Math.max(this.draggableElement.offsetTop,0),left:Math.max(D(this.boundingElement)-this.draggableElement.offsetWidth,0)}),this.draggableElement.offsetTop>=k(this.boundingElement)&&this.changeDraggablePosition({top:Math.max(k(this.boundingElement)-this.draggableElement.offsetHeight,0),left:Math.max(this.draggableElement.offsetLeft,0)})},getBGColor:function(t){return"rgba(".concat(this.spinnerColor.rgb.r,",").concat(this.spinnerColor.rgb.g,",").concat(this.spinnerColor.rgb.b,", ").concat(t,")")}}),watch:{hasContext:function(){var t=this;this.$nextTick(function(){t.changeDraggablePosition({top:t.defaultTop,left:t.hasContext?t.defaultLeft:t.getCenteredLeft()})})}},created:function(){this.defaultTop=25,this.defaultLeft=15,this.VIEWERS=d["g"]},mounted:function(){var t=this;this.draggableElement=document.getElementById("mc-q-card"),this.draggableElementWidth=D(this.draggableElement),this.dragMCConfig.handle=document.getElementById("mc-q-card-title"),this.boundingElement=document.getElementById("viewer-container"),this.centeredLeft=this.getCenteredLeft(),this.dragMCConfig.initialPosition={left:this.centeredLeft,top:this.defaultTop},this.$eventBus.$on(d["a"].SPINNER_DOUBLE_CLICK,function(){t.hide()}),this.$eventBus.$on(d["a"].MAP_SIZE_CHANGED,function(){t.dragMCConfig.initialPosition={left:t.centeredLeft,top:t.defaultTop},t.checkWhereWasDragged()})},beforeDestroy:function(){this.$eventBus.$off(d["a"].MAP_SIZE_CHANGED)}},F=L,B=(n("96fa"),Object(R["a"])(F,l,p,!1,null,null,null));B.options.__file="KlabMainControl.vue";var V=B.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"no-padding relative-position full-width"},t._l(t.dataViewers,function(e){return n("div",{key:e.idx,class:["no-padding",e.main?"absolute-top full-height full-width":"absolute thumb-view"],style:t.viewerStyle(e)},[e.main?t._e():n("div",{staticClass:"thumb-viewer-title absolute-top"},[n("div",{staticClass:"relative-position"},[n("div",{staticClass:"thumb-viewer-label float-left q-ma-sm"},[t._v("\n        "+t._s(e.idx)+"\n      ")]),n("div",{staticClass:"float-right q-ma-sm"},[n("q-btn",{staticClass:"shadow-1",attrs:{round:"",color:"red-6",size:"xs",icon:"mdi-chevron-up"},on:{click:function(n){t.setMainDataViewer(e.idx)}}})],1)])]),n(e.type,{tag:"component",attrs:{idx:e.idx}})],1)}))},U=[];G._withStripped=!0;var Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"upload-single-file",rawName:"v-upload-single-file",value:t.uploadConfig,expression:"uploadConfig"}],staticClass:"fit no-padding map-viewer"},[n("div",{ref:"map"+t.idx,staticClass:"fit",class:{"mv-exploring":t.exploreMode||null!==t.topLayer},attrs:{id:"map"+t.idx}}),n("q-icon",{staticClass:"map-selection-marker",attrs:{name:"mdi-crop-free",id:"msm-"+t.idx}}),n("q-resize-observable",{on:{resize:t.handleResize}}),t.isDrawMode?n("map-drawer",{attrs:{map:t.map},on:{drawend:t.sendSpatialLocation}}):t._e(),n("q-modal",{attrs:{"no-esc-dismiss":"","no-backdrop-dismiss":"","content-classes":["gl-msg-content"]},model:{value:t.geolocationWaiting,callback:function(e){t.geolocationWaiting=e},expression:"geolocationWaiting"}},[n("div",{staticClass:"bg-opaque-white"},[n("div",{staticClass:"q-pa-xs"},[n("h5",[t._v(t._s(t.$t("messages.geolocationWaitingTitle")))]),n("p",{domProps:{innerHTML:t._s(t.$t("messages.geolocationWaitingText"))}}),n("p",{directives:[{name:"show",rawName:"v-show",value:null!==t.geolocationIncidence,expression:"geolocationIncidence !== null"}],staticClass:"gl-incidence"},[t._v(t._s(t.geolocationIncidence))]),n("div",{staticClass:"gl-btn-container"},[n("q-btn",{directives:[{name:"show",rawName:"v-show",value:null!==t.geolocationIncidence,expression:"geolocationIncidence !== null"}],attrs:{label:t.$t("label.appRetry"),color:"primary"},on:{click:t.retryGeolocation}}),n("q-btn",{attrs:{label:t.$t("label.appCancel"),color:"mc-main"},on:{click:function(e){t.stopGeolocation(!0)}}})],1)])])]),n("q-modal",{attrs:{"no-route-dismiss":!0,"no-esc-dismiss":!0,"no-backdrop-dismiss":!0},model:{value:t.progressBarVisible,callback:function(e){t.progressBarVisible=e},expression:"progressBarVisible"}},[n("q-progress",{attrs:{percentage:t.uploadProgress,color:"mc-main",stripe:!0,animate:!0,height:"1em"}})],1),n("div",{ref:"mv-popup",staticClass:"ol-popup",attrs:{id:"mv-popup"}},[n("q-btn",{staticClass:"ol-popup-closer",attrs:{icon:"mdi-close",color:"grey-8",size:"xs",flat:"",round:""},on:{click:t.closePopup}}),n("div",{staticClass:"ol-popup-content",attrs:{id:"mv-popup-content"},domProps:{innerHTML:t._s(t.popupContent)}})],1)],1)},K=[];Y._withStripped=!0;n("ac6a"),n("7514"),n("c5f6");var H=n("1442"),z=n("b12a"),q=(n("7f7f"),n("278c")),W=n.n(q),$=n("2b0e"),J=n("be3b"),X="".concat("").concat("/modeler/resource/put"),Z="1024MB",Q=Z.substr(Z.length-2),tt="KB"===Q?1:"MB"===Q?2:"GB"===Q?3:"PB"===Q?4:0,et=parseInt(Z.substring(0,Z.length-2),10)*Math.pow(1024,tt);function nt(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window}var ot=$["a"].directive("upload",{inserted:function(t,e){if(nt()){var n=null,o=e.value&&e.value.onUploadProgress&&"function"===typeof e.value.onUploadProgress?e.value.onUploadProgress:function(){},i=e.value&&e.value.onUploadEnd&&"function"===typeof e.value.onUploadEnd?e.value.onUploadEnd:function(){console.debug("Upload complete")},r=e.value&&e.value.onUploadError&&"function"===typeof e.value.onUploadError?e.value.onUploadError:function(t){console.error(JSON.stringify(t,null,4))};["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){t.addEventListener(e,function(t){t.preventDefault(),t.stopPropagation()},!1)}),t.addEventListener("drop",function(t){var a=W()(t.dataTransfer.files,1);if(n=a[0],null!==n){if(n.size>et)return r("File is too large, max sixe is ".concat(Z)),void(n=null);var s=new FormData;s.append("file",n),s.append("refId",e.value.refId||null),J["a"].post(X,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){o(parseInt(Math.round(100*t.loaded/t.total),10))}}).then(function(){i(null!==n?n.name:null),n=null}).catch(function(t){r(t,null!==n?n.name:null),n=null})}})}}}),it=n("741d"),rt=n("256f"),at=n("5eee"),st=n("a2c7"),ct=n("e300"),ut=n("9c78"),dt=n("c810"),lt=n("592d"),pt=n("e269"),ht={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},ft=n("cd7e"),yt=n("0999"),vt=n("1e8d"),gt=n("0af5"),mt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},_t=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+ft["d"],this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(vt["a"])(this,Object(pt["b"])(mt.ELEMENT),this.handleElementChanged,this),Object(vt["a"])(this,Object(pt["b"])(mt.MAP),this.handleMapChanged,this),Object(vt["a"])(this,Object(pt["b"])(mt.OFFSET),this.handleOffsetChanged,this),Object(vt["a"])(this,Object(pt["b"])(mt.POSITION),this.handlePositionChanged,this),Object(vt["a"])(this,Object(pt["b"])(mt.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:ht.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(mt.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(mt.MAP)},e.prototype.getOffset=function(){return this.get(mt.OFFSET)},e.prototype.getPosition=function(){return this.get(mt.POSITION)},e.prototype.getPositioning=function(){return this.get(mt.POSITIONING)},e.prototype.handleElementChanged=function(){Object(yt["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(yt["e"])(this.element),Object(vt["e"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(vt["a"])(t,lt["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(mt.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(mt.ELEMENT,t)},e.prototype.setMap=function(t){this.set(mt.MAP,t)},e.prototype.setOffset=function(t){this.set(mt.OFFSET,t)},e.prototype.setPosition=function(t){this.set(mt.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),o=this.getRect(n,[Object(yt["c"])(n),Object(yt["b"])(n)]),i=this.autoPanMargin;if(!Object(gt["g"])(e,o)){var r=o[0]-e[0],a=e[2]-o[2],s=o[1]-e[1],c=e[3]-o[3],u=[0,0];if(r<0?u[0]=r-i:a<0&&(u[0]=Math.abs(a)+i),s<0?u[1]=s-i:c<0&&(u[1]=Math.abs(c)+i),0!==u[0]||0!==u[1]){var d=t.getView().getCenter(),l=t.getPixelFromCoordinate(d),p=[l[0]+u[0],l[1]+u[1]];t.getView().animate({center:t.getCoordinateFromPixel(p),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),o=n.left+window.pageXOffset,i=n.top+window.pageYOffset;return[o,i,o+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(mt.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(n,o)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,o=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var r=o[0],a=o[1];if(i==ht.BOTTOM_RIGHT||i==ht.CENTER_RIGHT||i==ht.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=n.left="");var s=Math.round(e[0]-t[0]-r)+"px";this.rendered.right_!=s&&(this.rendered.right_=n.right=s)}else{""!==this.rendered.right_&&(this.rendered.right_=n.right=""),i!=ht.BOTTOM_CENTER&&i!=ht.CENTER_CENTER&&i!=ht.TOP_CENTER||(r-=this.element.offsetWidth/2);var c=Math.round(t[0]+r)+"px";this.rendered.left_!=c&&(this.rendered.left_=n.left=c)}if(i==ht.BOTTOM_LEFT||i==ht.BOTTOM_CENTER||i==ht.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=n.top="");var u=Math.round(e[1]-t[1]-a)+"px";this.rendered.bottom_!=u&&(this.rendered.bottom_=n.bottom=u)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=n.bottom=""),i!=ht.CENTER_LEFT&&i!=ht.CENTER_CENTER&&i!=ht.CENTER_RIGHT||(a-=this.element.offsetHeight/2);var d=Math.round(t[1]+a)+"px";this.rendered.top_!=d&&(this.rendered.top_=n.top=d)}},e.prototype.getOptions=function(){return this.options},e}(pt["a"]),bt=_t,wt=n("b2da"),St=n.n(wt),Ot=n("64d9"),Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"draggable",rawName:"v-draggable",value:t.dragDCConfig,expression:"dragDCConfig"}],staticClass:"md-draw-controls"},[n("div",{staticClass:"md-title"},[t._v("Draw mode")]),n("div",{staticClass:"md-controls"},[n("q-icon",{staticClass:"md-control md-ok",attrs:{name:"mdi-check-circle-outline"},nativeOn:{click:function(e){t.drawOk()}}}),n("q-icon",{staticClass:"md-control md-erase",class:[t.hasCustomContextFeatures?"":"disabled"],attrs:{name:"mdi-delete-variant"},nativeOn:{click:function(e){t.hasCustomContextFeatures&&t.drawErase()}}}),n("q-icon",{staticClass:"md-control md-cancel",attrs:{name:"mdi-close-circle-outline"},nativeOn:{click:function(e){t.drawCancel()}}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.selectors,expression:"selectors"}],staticClass:"md-selector"},[n("q-btn-toggle",{attrs:{"toggle-color":"mc-main",size:"md",options:[{tabindex:1,icon:"mdi-vector-point",value:"Point"},{tabindex:2,icon:"mdi-vector-line",value:"LineString"},{tabindex:3,icon:"mdi-vector-polygon",value:"Polygon"},{tabindex:4,icon:"mdi-vector-circle-variant",value:"Circle"}]},model:{value:t.drawType,callback:function(e){t.drawType=e},expression:"drawType"}})],1)])},Pt=[];Et._withStripped=!0;var xt=n("a27f"),Ct=n("8e19"),Tt=n("3e6b"),Mt=n("5831"),It=n("6c77"),Rt=n("83a6"),At=n("8682"),jt=n("ce2c"),Nt=n("ac29"),Dt=n("c807"),kt=n("f822"),Lt=n("5bc3"),Ft=n("f403"),Bt=n("7a09"),Vt=n("9a44"),Gt=n("47e4"),Ut=n("88da"),Yt=n("049d"),Kt=n("4cdf"),Ht=n("b0b2"),zt={name:"MapDrawer",props:{map:{type:Object,required:!0},selectors:{type:Boolean,required:!1,default:!0},fillColor:{type:String,required:!1,default:"rgba(17, 170, 187, 0.3)"},strokeColor:{type:String,required:!1,default:"rgb(17, 170, 187)"},strokeWidth:{type:Number,required:!1,default:2},pointRadius:{type:Number,required:!1,default:5}},data:function(){return{drawerLayer:void 0,drawer:void 0,drawerModify:void 0,dragDCConfig:{resetInitialPos:!0},jstsParser:void 0,drawType:"Polygon"}},computed:{hasCustomContextFeatures:function(){return this.drawerLayer&&this.drawerLayer.getSource().getFeatures().length>0}},methods:c()({},Object(u["b"])("view",["setDrawMode"]),{drawOk:function(){var t=this.drawerLayer.getSource().getFeatures().filter(function(t){return null!==t.getGeometry()}),e=t.length,n=[];if(0!==e){for(var o=null,i=0;i<e;i+=1){var r=t[i].getGeometry();if(r instanceof kt["a"]||r instanceof Lt["a"]){var a=Object(Ht["b"])(this.parseGeometry(t[i].getGeometry()));o=null===o?a:o.union(a)}else n.push(t[i])}null!==o&&n.push(new Kt["a"]({geometry:this.jstsParser.write(o)})),this.$emit("drawend",n)}this.drawerLayer.getSource().clear(),this.setDrawMode(!1)},drawErase:function(){var t=this.drawerLayer.getSource().getFeatures().filter(function(t){return null!==t.getGeometry()});t.length>0&&t.pop(),this.drawerLayer.getSource().clear(!0),this.drawerLayer.getSource().addFeatures(t)},drawCancel:function(){this.$emit("drawcancel"),this.drawerLayer.getSource().clear(),this.setDrawMode(!1)},setDrawer:function(){var t=this;this.drawer=new Nt["a"]({source:this.drawerLayer.getSource(),type:this.drawType}),this.drawer.on("drawend",function(e){var n=t.parseGeometry(e.feature.getGeometry());n.isValid()||(t.$q.notify({message:t.$t("messages.invalidGeometry"),type:"negative",timeout:1e3}),e.feature.setGeometry(null))}),this.map.addInteraction(this.drawer)},parseGeometry:function(t){return t instanceof kt["a"]&&(t=Object(Lt["b"])(t)),this.jstsParser.read(t)}}),watch:{drawType:function(){this.map.removeInteraction(this.drawer),this.setDrawer()}},directives:{Draggable:xt["Draggable"]},mounted:function(){this.jstsParser=new Ct["io"].OL3Parser,this.jstsParser.inject(Ft["a"],Bt["a"],Yt["a"],Lt["a"],Vt["a"],Gt["a"],Ut["a"]);var t=new Mt["a"];this.drawerModify=new Dt["a"]({source:t}),this.drawerLayer=new Tt["a"]({id:"DrawerLayer",source:t,visible:!0,style:new It["c"]({fill:new Rt["a"]({color:this.fillColor}),stroke:new At["a"]({color:this.strokeColor,width:this.strokeWidth}),image:new jt["a"]({radius:this.pointRadius,fill:new Rt["a"]({color:this.strokeColor})})})}),this.dragDCConfig.boundingElement=document.getElementById(this.map.get("target")),this.map.addLayer(this.drawerLayer),this.map.addInteraction(this.drawerModify),this.setDrawer()},beforeDestroy:function(){this.map.removeInteraction(this.drawer),this.map.removeInteraction(this.drawerModify),this.drawerLayer.getSource().clear(!0)}},qt=zt,Wt=(n("37a9"),Object(R["a"])(qt,Et,Pt,!1,null,null,null));Wt.options.__file="MapDrawer.vue";var $t=Wt.exports,Jt=(n("c58e"),{name:"MapViewer",components:{MapDrawer:$t},props:{idx:{type:Number,required:!0}},directives:{UploadSingleFile:ot},data:function(){var t=this;return{center:this.$mapDefaults.center,zoom:this.$mapDefaults.zoom,map:null,view:null,layers:new ct["a"],zIndexCounter:0,baseLayers:null,visibleBaseLayer:null,mapSelectionMarker:void 0,wktInstance:new Ot["a"],geolocationWaiting:!0,geolocationId:null,geolocationIncidence:null,popupContent:"",popupOverlay:void 0,uploadConfig:{refId:null,onUploadProgress:function(e){t.uploadProgress=e},onUploadEnd:function(e){t.$q.notify({message:t.$t("messages.uploadComplete",{fileName:e}),type:"info",timeout:1e3}),t.uploadProgress=null},onUploadError:function(e,n){t.$q.notify({message:"".concat(t.$t("errors.uploadError",{fileName:n}),"\n").concat(e),type:"negative",timeout:1e3}),t.uploadProgress=null}},uploadProgress:null}},computed:c()({observations:function(){return this.$store.getters["data/observationsOfViewer"](this.idx)}},Object(u["c"])("data",["hasContext","contextId","session"]),Object(u["c"])("view",["contextGeometry","observationInfo","exploreMode","mapSelection","isDrawMode","topLayer"]),Object(u["d"])("view",["saveLocation"]),{hasCustomContextFeatures:function(){return this.drawerLayer&&this.drawerLayer.getSource().getFeatures().length>0},progressBarVisible:function(){return null!==this.uploadProgress}}),methods:c()({},Object(u["b"])("view",["addToKexplorerLog","setSpinner","setMapSelection","setDrawMode","setTopLayer"]),{handleResize:function(){null!==this.map&&(console.debug("HandleResize called!!!"),this.map.updateSize(),this.$eventBus.$emit(d["a"].MAP_SIZE_CHANGED))},onMoveEnd:function(){this.hasContext||this.isDrawMode||this.sendRegionOfInterest()},sendRegionOfInterest:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.geolocationWaiting){var t=null,e=this.map.getView(),n=Object(rt["k"])(e.getCenter(),H["d"].PROJ_EPSG_3857,H["d"].PROJ_EPSG_4326);Math.abs(n[0])>180&&(n[0]%=180,e.animate({center:Object(rt["k"])(n,H["d"].PROJ_EPSG_4326,H["d"].PROJ_EPSG_3857),duration:500}));try{var o=e.calculateExtent(this.map.getSize());t=T["a"].REGION_OF_INTEREST(Object(rt["l"])(o,"EPSG:3857","EPSG:4326"),this.session)}catch(t){console.error(t),this.addToKexplorerLog({type:this.$constants.TYPE_ERROR,payload:{message:t.message,attach:t}})}t&&t.body&&(this.sendStompMessage(t.body),this.saveLocation&&it["a"].set(z["a"].COOKIE_MAPDEFAULT,{center:e.getCenter(),zoom:e.getZoom()},{expires:30,path:"/"}))}},findExistingLayerById:function(t){if(this.layers&&null!==this.layers){var e=this.layers.getArray();return e.find(function(e){return e.get("id")===t.id})}return null},findLayerById:function(){var t=C()(regeneratorRuntime.mark(function t(e){var n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.findExistingLayerById(e),"undefined"===typeof n||null===n){t.next=3;break}return t.abrupt("return",n);case 3:return t.prev=3,console.debug("Creating layer: ".concat(e.label)),t.next=7,z["b"].getLayerObject(e,{projection:this.proj});case 7:return o=t.sent,this.zIndexCounter+=1,e.zIndex=this.zIndexCounter+e.zIndexOffset,o.setZIndex(e.zIndex),this.layers.push(o),t.abrupt("return",o);case 15:return t.prev=15,t.t0=t["catch"](3),console.error(t.t0.message),this.$q.notify({message:t.t0.message,type:"negative",timeout:3e3}),t.abrupt("return",null);case 20:case"end":return t.stop()}},t,this,[[3,15]])}));return function(e){return t.apply(this,arguments)}}(),drawContext:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==e&&(this.layers.clear(),this.baseLayers.removeMask()),null===this.contextGeometry)return console.debug("No context, send region of interest"),void this.sendRegionOfInterest();this.baseLayers.setMask(this.contextGeometry),this.view.fit(this.contextGeometry,{padding:[10,10,10,10],constrainResolution:!1})},drawObservations:function(){var t=this;this.observations&&this.observations.length>0&&this.observations.forEach(function(e){t.findLayerById(e).then(function(n){null!==n&&(n.setVisible(e.visible),n.setOpacity(e.layerOpacity),e.top?n.setZIndex(e.zIndexOffset+(H["d"].ZINDEX_OFFSET-1)):n.setZIndex(e.zIndex),e.visible&&e.top&&z["b"].isRaster(e)&&e.dataSummary.histogram.length>0&&(null===t.topLayer||t.topLayer.id!==e.id)?(t.setTopLayer({id:e.id,desc:e.label}),t.closePopup()):e.visible&&e.top||null===t.topLayer||t.topLayer.id!==e.id||(t.setTopLayer(null),t.closePopup()))})})},sendSpatialLocation:function(t){if(t){var e=this.wktInstance.writeFeaturesText(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this.sendStompMessage(T["a"].SPATIAL_LOCATION({wktShape:e},this.session).body)}},doGeolocation:function(){var t=this;null!==this.geolocationId&&navigator.geolocation.clearWatch(this.geolocationId),this.geolocationId=navigator.geolocation.watchPosition(function(e){t.center=Object(rt["k"])([e.coords.longitude,e.coords.latitude],H["d"].PROJ_EPSG_4326,H["d"].PROJ_EPSG_3857),t.stopGeolocation()},function(e){switch(e.code){case e.PERMISSION_DENIED:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break;case e.POSITION_UNAVAILABLE:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break;case e.TIMEOUT:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break;default:t.geolocationIncidence=t.$t("messages.geolocationErrorPermissionDenied");break}},{enableHighAccuracy:!0,maximumAge:3e4,timeout:6e4})},retryGeolocation:function(){this.geolocationIncidence=null,this.doGeolocation()},stopGeolocation:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];navigator.geolocation.clearWatch(this.geolocationId),this.$nextTick(function(){t.geolocationWaiting=!1,e&&t.sendRegionOfInterest()})},closePopup:function(){this.setMapSelection(d["c"]),this.popupOverlay.setPosition(void 0)}}),watch:{contextGeometry:function(t,e){this.drawContext(t,e)},observations:{handler:function(){this.drawObservations(!1)},deep:!0},center:function(){this.view.setCenter(this.center)},mapSelection:function(t){if("undefined"!==typeof t&&null!==t&&null!==t.pixelSelected){if(this.mapSelectionMarker.setPosition(t.pixelSelected),null!==this.topLayer){var e=Object(rt["k"])(t.pixelSelected,"EPSG:3857","EPSG:4326");this.popupContent="<h3>".concat(this.topLayer.desc,'</h3>\n              <div class="mv-popup-separator"></div>\n              <p class="mv-popup-value">').concat(t.value,'</p>\n              <div class="mv-popup-separator"></div>\n              <p class="mv-popup-coord">').concat(e[1].toFixed(6),", ").concat(e[0].toFixed(6),"</p>"),this.exploreMode||this.popupOverlay.setPosition(t.pixelSelected)}}else this.mapSelectionMarker.setPosition(void 0)},hasContext:function(t){this.uploadConfig.refId=this.contextId,t?this.setDrawMode(!1):(this.sendRegionOfInterest(),this.popupOverlay.setPosition(void 0))},topLayer:function(t){null===t&&this.closePopup()},exploreMode:function(t){t&&this.closePopup()}},created:function(){this.geolocationWaiting="geolocation"in navigator&&!it["a"].has(z["a"].COOKIE_MAPDEFAULT)},mounted:function(){var t=this;this.baseLayers=H["a"],this.baseLayers.layers.forEach(function(e){e.get("name")===t.$baseLayer&&(e.setVisible(!0),t.visibleBaseLayer=e);var n=e;n.on("propertychange",function(e){t.visibleBaseLayer=n,"propertychange"===e.type&&"visible"===e.key&&e.target.get(e.key)&&it["a"].set(z["a"].COOKIE_BASELAYER,n.get("name"),{expires:30,path:"/"})})}),this.map=new at["a"]({view:new st["a"]({center:this.center,zoom:this.zoom}),layers:this.baseLayers.layers,target:"map".concat(this.idx),loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0}),this.map.on("moveend",this.onMoveEnd),this.map.on("click",function(e){if((t.exploreMode||null!==t.topLayer)&&t.contextGeometry.intersectsCoordinate(e.coordinate))if(t.exploreMode){var n=t.findExistingLayerById(t.observationInfo),o=new dt["a"]({id:"cl_".concat(t.observationInfo.id),source:n.getSource()});t.setMapSelection({pixelSelected:e.coordinate,layerSelected:o})}else t.setMapSelection({pixelSelected:e.coordinate,observationId:t.topLayer.id})}),this.view=this.map.getView(),this.proj=this.view.getProjection(),this.map.addLayer(new ut["a"]({layers:this.layers}));var e=new St.a;this.map.addControl(e),this.mapSelectionMarker=new bt({element:document.getElementById("msm-".concat(this.idx)),positioning:"center-center"}),this.map.addOverlay(this.mapSelectionMarker),this.popupOverlay=new bt({element:document.getElementById("mv-popup"),autoPan:!0,autoPanAnimation:{duration:250}}),this.map.addOverlay(this.popupOverlay),this.drawContext(),this.drawObservations(),this.geolocationWaiting&&this.doGeolocation(),this.$eventBus.$on(d["a"].NEED_FIT_MAP,function(){t.contextGeometry&&null!==t.contextGeometry&&setTimeout(function(){t.view.fit(t.contextGeometry,{duration:400,padding:[10,10,10,10],constrainResolution:!1})},200)})}}),Xt=Jt,Zt=(n("c612"),Object(R["a"])(Xt,Y,K,!1,null,null,null));Zt.options.__file="MapViewer.vue";var Qt=Zt.exports,te=[],ee={components:{MapViewer:Qt},computed:c()({},Object(u["c"])("view",["dataViewers","mainDataViewer"])),methods:c()({},Object(u["b"])("view",["setMainDataViewer"]),{viewerStyle:function(t){return t.main?"":(te.push(t),0===te.length?"left: 0":"left: ".concat(200*(te.length-1)+10*(te.length-1),"px"))}}),watch:{mainDataViewer:function(){te=[]}},beforeUpdate:function(){te=[]},mounted:function(){te=[]}},ne=ee,oe=(n("9627"),Object(R["a"])(ne,G,U,!1,null,"29559f57",null));oe.options.__file="DataViewer.vue";var ie=oe.exports,re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"full-width",attrs:{id:"mc-report-wrapper"}},[n("div",{attrs:{id:"mc-report-content"},domProps:{innerHTML:t._s(t.report)}})])},ae=[];re._withStripped=!0;var se={name:"ReportViewer",data:function(){return{report:this.$t("messages.noLoadedReport"),scrollBar:void 0}},computed:c()({},Object(u["c"])("data",["hasContext","contextId","hasObservations"]),Object(u["d"])("view",["reloadReport"])),methods:c()({},Object(u["b"])("view",["setReloadReport"]),{loadReport:function(){var t=this;this.reloadReport&&this.hasContext&&this.hasObservations&&J["a"].get("".concat("").concat("/modeler/engine/session/observation/","report/").concat(this.contextId),{}).then(function(e){var n=e.data;""===n&&(console.warn("Empty report"),n=t.$t("messages.emptyReport")),t.report=n,t.setReloadReport(!1)})}}),watch:{reloadReport:function(){this._inactive||this.loadReport()}},activated:function(){this.loadReport()}},ce=se,ue=(n("d5b4"),Object(R["a"])(ce,re,ae,!1,null,null,null));ue.options.__file="ReportViewer.vue";var de=ue.exports,le=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},pe=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fit no-padding with-background",attrs:{id:"dfv-container"}},[n("div",{attrs:{id:"sprotty"}})])}];le._withStripped=!0;n("98db");var he=n("970b"),fe=n.n(he),ye=n("5bc30"),ve=n.n(ye),ge=n("8449f"),me=n("42d6"),_e=n("e1c6"),be=function(){function t(){fe()(this,t)}return ve()(t,[{key:"handle",value:function(t){t instanceof me["SelectAction"]&&ge["b"].$emit(d["a"].GRAPH_NODE_SELECTED,t)}}]),t}(),we=function(){function t(){fe()(this,t)}return ve()(t,[{key:"initialize",value:function(t){t.register(me["SelectCommand"].KIND,new be)}}]),t}();_e.decorate(_e.injectable(),we);var Se=n("db4a"),Oe={name:"DataflowViewer",data:function(){return{graph:null,modelSource:null,actionDispatcher:null,interval:null,processing:!1,visible:!1,needsUpdate:!0}},computed:c()({},Object(u["c"])("data",["dataflow","dataflowStatuses","contextId"]),{reloadDataflow:{get:function(){return this.$store.state.view.reloadDataflow},set:function(t){this.$store.state.view.reloadDataflow=t}}}),methods:c()({},Object(u["b"])("data",["addDataflow"]),{loadDataflow:function(){var t=this;console.info("Ask for dataflow"),J["a"].get("".concat("").concat("/modeler/engine/session/observation/","dataflow/").concat(this.contextId),{}).then(function(e){var n=e.data;if("undefined"!==typeof n.jsonElkLayout&&null!==n.jsonElkLayout)try{var o=JSON.parse(n.jsonElkLayout);t.addDataflow(o)}catch(t){console.error("Error in dataflos layout for the context ".concat(n.taskId,": ").concat(t))}else console.error("Dataflow in task ".concat(n.taskId," has no layout"))})},doGraph:function(){if(null!==this.dataflow)if(this.processing)setTimeout(this.doGraph(),100);else if(this.visible){var t=JSON.parse(JSON.stringify(this.dataflow));this.processing=!0,this.graph=(new Se["ElkGraphJsonToSprotty"]).transform(t),this.modelSource.setModel(this.graph),console.debug(JSON.stringify(this.graph,null,4)),this.actionDispatcher.dispatch(new me["FitToScreenAction"]([])),this.processing=!1,this.reloadDataflow=!1}else this.needsUpdate=!0},updateStatuses:function(){if(this.visible){if(0!==this.dataflowStatuses.length)for(var t=this.dataflowStatuses.length,e=0;e<t;e++){var n=this.dataflowStatuses[e],o=n.id,i=n.status,r=z["b"].findNodeById(this.graph,o);null!==r&&(r.status=i,this.modelSource.updateModel())}}else this.needsUpdate=!0}}),watch:{dataflow:function(){null!==this.dataflow&&this.doGraph()},dataflowStatuses:{handler:function(){null!==this.dataflow&&this.updateStatuses()},deep:!0}},mounted:function(){var t=this,e=Object(Se["createContainer"])({needsClientLayout:!1,needsServerLayout:!0},"info");e.bind(me["TYPES"].IActionHandlerInitializer).to(we),this.modelSource=e.get(me["TYPES"].ModelSource),this.actionDispatcher=e.get(me["TYPES"].IActionDispatcher),this.$eventBus.$on(d["a"].GRAPH_NODE_SELECTED,function(e){if(null!==e&&e.selectedElementsIDs)for(var n=e.selectedElementsIDs.length,o=n-1;o>=0;o-=1)t.sendStompMessage(T["a"].DATAFLOW_NODE_DETAILS({nodeId:e.selectedElementsIDs[o]},t.session).body)})},activated:function(){this.visible=!0,null===this.dataflow?this.loadDataflow():this.needsUpdate&&(this.doGraph(),this.updateStatuses(),this.needsUpdate=!1)},deactivated:function(){this.visible=!1}},Ee=Oe,Pe=(n("7890"),Object(R["a"])(Ee,le,pe,!1,null,null,null));Pe.options.__file="DataflowViewer.vue";var xe=Pe.exports,Ce=n("fb82"),Te=(n("5bc0"),n("8195"),{name:"IndexPage",components:{KlabMainControl:V,DataViewer:ie,ReportViewer:de,DataflowViewer:xe,KlabSpinner:m["a"]},data:function(){return{askForUndocking:!1}},computed:c()({},Object(u["c"])("stomp",["connectionState"]),Object(u["c"])("view",["searchIsActive","searchIsFocused","mainViewerName","mainViewer","isScaleEditing","isDrawMode"]),{logVisible:function(){return this.$logVisibility===this.$constants.PARAMS_LOG_VISIBLE},modalVisible:{get:function(){return this.connectionState!==this.$constants.CONNECTION_UP},set:function(t){console.warn("Try to set modalVisible as ".concat(t))}},modalText:function(){var t;return(t={},a()(t,this.$constants.CONNECTION_UNKNOWN,this.$t("messages.connectionClosed")),a()(t,this.$constants.CONNECTION_DOWN,this.$t("messages.connectionClosed")),a()(t,this.$constants.CONNECTION_WORKING,this.$t("messages.connectionWorking")),a()(t,this.$constants.CONNECTION_ERROR,this.$t("errors.connectionError")),t)[this.connectionState]},modalColor:function(){var t;return(t={},a()(t,this.$constants.CONNECTION_UNKNOWN,Ce["a"].getBrand("warning")),a()(t,this.$constants.CONNECTION_DOWN,Ce["a"].getBrand("warning")),a()(t,this.$constants.CONNECTION_WORKING,Ce["a"].getBrand("info")),a()(t,this.$constants.CONNECTION_ERROR,Ce["a"].getBrand("negative")),t)[this.connectionState]},modalAnimated:function(){var t;return(t={},a()(t,this.$constants.CONNECTION_UNKNOWN,!1),a()(t,this.$constants.CONNECTION_DOWN,!1),a()(t,this.$constants.CONNECTION_WORKING,!0),a()(t,this.$constants.CONNECTION_ERROR,!1),t)[this.connectionState]}}),methods:c()({},Object(u["b"])("view",["searchStart","searchStop","searchFocus","setMainViewer"]),{setSiblingsToAskFor:function(){var t=Math.floor(window.innerHeight*parseInt(getComputedStyle(document.documentElement).getPropertyValue("--main-control-max-height"),10)/100),e=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--q-tree-no-child-min-height"),10),n=Math.floor(t/e);console.info("Setted max siblings as ".concat(n)),this.$store.state.data.siblingsToAskFor=n}}),watch:{},created:function(){"undefined"===typeof this.mainViewer&&this.setMainViewer(d["g"].DATA_VIEWER)},mounted:function(){var t=this;window.addEventListener("keydown",function(e){if(!(t.modalVisible||t.isScaleEditing||t.isDrawMode))return 27===e.keyCode&&t.searchIsActive?(t.searchStop(),void e.preventDefault()):void((38===e.keyCode||40===e.keyCode||32===e.keyCode||e.keyCode>=65&&e.keyCode<=90)&&(t.searchIsActive?t.searchIsFocused||(t.searchFocus({char:e.key,focused:!0}),e.preventDefault()):(t.searchStart(e.key),e.preventDefault())))}),this.setSiblingsToAskFor(),this.$eventBus.$on(d["a"].ASK_FOR_UNDOCK,function(e){t.askForUndocking=e})}}),Me=Te,Ie=(n("1077"),n("4332"),Object(R["a"])(Me,o,i,!1,null,"db631912",null));Ie.options.__file="index.vue";e["default"]=Ie.exports},"945d":function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("6923"),u=n("3a92"),d=n("7436"),l=n("be02"),p=n("3f0a"),h=n("cf61"),f=n("42f7"),y=n("f4cb"),v=n("26ad"),g=n("5d19"),m=n("2440"),_=n("4741"),b=n("b485");function w(t){return void 0!==t&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("action")}e.isActionMessage=w;var S=function(){function t(){this.kind=t.KIND}return t.KIND="serverStatus",t}();e.ServerStatusAction=S;var O="__receivedFromServer",E=function(t){function e(e,n,o,i,r){var a=t.call(this,e,n,o)||this;return a.storage=i,a.logger=r,a.currentRoot={type:"NONE",id:"ROOT"},a.clientId=a.viewerOptions.baseDiv,a}return o(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.registerCommand(h.UpdateModelCommand),e.register(f.ComputedBoundsAction.KIND,this),e.register(f.RequestBoundsCommand.KIND,this),e.register(y.RequestPopupModelAction.KIND,this),e.register(_.CollapseExpandAction.KIND,this),e.register(_.CollapseExpandAllAction.KIND,this),e.register(b.OpenAction.KIND,this),e.register(S.KIND,this)},e.prototype.handle=function(t){var e=this.handleLocally(t);if(e){var n={clientId:this.clientId,action:t};this.logger.log(this,"sending",n),this.sendMessage(n)}},e.prototype.messageReceived=function(t){var e=this,n="string"===typeof t?JSON.parse(t):t;w(n)&&n.action?n.clientId&&n.clientId!==this.clientId||(n.action[O]=!0,this.logger.log(this,"receiving",n),this.actionDispatcher.dispatch(n.action).then(function(){e.storeNewModel(n.action)})):this.logger.error(this,"received data is not an action message",n)},e.prototype.handleLocally=function(t){switch(this.storeNewModel(t),t.kind){case f.ComputedBoundsAction.KIND:return this.handleComputedBounds(t);case f.RequestBoundsCommand.KIND:return!1;case g.ExportSvgAction.KIND:return this.handleExportSvgAction(t);case S.KIND:return this.handleServerStateAction(t)}return!t[O]},e.prototype.storeNewModel=function(t){if(t.kind===p.SetModelCommand.KIND||t.kind===h.UpdateModelCommand.KIND||t.kind===f.RequestBoundsCommand.KIND){var e=t.newRoot;e&&(this.currentRoot=e,t.kind!==p.SetModelCommand.KIND&&t.kind!==h.UpdateModelCommand.KIND||(this.lastSubmittedModelType=e.type),this.storage.store(this.currentRoot))}},e.prototype.handleComputedBounds=function(t){if(this.viewerOptions.needsServerLayout)return!0;var e=new u.SModelIndex,n=this.currentRoot;e.add(n);for(var o=0,i=t.bounds;o<i.length;o++){var r=i[o],a=e.getById(r.elementId);void 0!==a&&this.applyBounds(a,r.newBounds)}if(void 0!==t.alignments)for(var s=0,c=t.alignments;s<c.length;s++){var d=c[s];a=e.getById(d.elementId);void 0!==a&&this.applyAlignment(a,d.newAlignment)}return n.type===this.lastSubmittedModelType?this.actionDispatcher.dispatch(new h.UpdateModelAction(n)):this.actionDispatcher.dispatch(new p.SetModelAction(n)),this.lastSubmittedModelType=n.type,!1},e.prototype.applyBounds=function(t,e){var n=t;n.position={x:e.x,y:e.y},n.size={width:e.width,height:e.height}},e.prototype.applyAlignment=function(t,e){var n=t;n.alignment={x:e.x,y:e.y}},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});return m.saveAs(e,"diagram.svg"),!1},e.prototype.handleServerStateAction=function(t){return!1},e=i([s.injectable(),a(0,s.inject(c.TYPES.IActionDispatcher)),a(1,s.inject(c.TYPES.ActionHandlerRegistry)),a(2,s.inject(c.TYPES.ViewerOptions)),a(3,s.inject(c.TYPES.SModelStorage)),a(4,s.inject(c.TYPES.ILogger)),r("design:paramtypes",[Object,l.ActionHandlerRegistry,Object,d.SModelStorage,Object])],e),e}(v.ModelSource);e.DiagramServer=E},9627:function(t,e,n){"use strict";var o=n("6eba"),i=n.n(o);i.a},"96fa":function(t,e,n){"use strict";var o=n("fd0f"),i=n.n(o);i.a},9757:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("6923"),u=function(){function t(){}return t}();e.Command=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.merge=function(t,e){return!1},e}(u);e.MergeableCommand=d;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.undo=function(t){return t.logger.error(this,"Cannot undo a hidden command"),t.root},e.prototype.redo=function(t){return t.logger.error(this,"Cannot redo a hidden command"),t.root},e}(u);e.HiddenCommand=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(u);e.PopupCommand=p;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(u);e.SystemCommand=h;var f=function(){function t(t){this.commandType=t}return t.prototype.handle=function(t){return new this.commandType(t)},t}();e.CommandActionHandler=f;var y=function(){function t(t){this.commandCtrs=t}return t.prototype.initialize=function(t){this.commandCtrs.forEach(function(e){return t.registerCommand(e)})},t=i([s.injectable(),a(0,s.multiInject(c.TYPES.ICommand)),a(0,s.optional()),r("design:paramtypes",[Array])],t),t}();e.CommandActionHandlerInitializer=y},9811:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("e7fa"),a=new o.ContainerModule(function(t){t(i.TYPES.IVNodeDecorator).to(r.ElementFader).inSingletonScope()});e.default=a},"987d":function(t,e,n){"use strict";function o(t){return t<.5?t*t*2:1-(1-t)*(1-t)*2}Object.defineProperty(e,"__esModule",{value:!0}),e.easeInOut=o},"98db":function(t,e,n){(function(t,e){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;(function(n){(function(t){var o="object"===typeof e?e:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),i=r(n);function r(t,e){return function(n,o){"function"!==typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:o}),e&&e(n,o)}}"undefined"===typeof o.Reflect?o.Reflect=n:i=r(o.Reflect,i),t(i)})(function(e){var n=Object.prototype.hasOwnProperty,o="function"===typeof Symbol,i=o&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=o&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",a="function"===typeof Object.create,s={__proto__:[]}instanceof Array,c=!a&&!s,u={create:a?function(){return rt(Object.create(null))}:s?function(){return rt({__proto__:null})}:function(){return rt({})},has:c?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},d=Object.getPrototypeOf(Function),l="object"===typeof t&&Object({NODE_ENV:"production",CLIENT:!0,SERVER:!1,DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",WS_BASE_URL:"",STOMP_CLIENT_DEBUG:!1,ENGINE_URL:"/modeler",ENGINE_SHARED:"/modeler/shared/",WS_URL:"/modeler/message",WS_SUBSCRIBE:"/message",WS_MESSAGE_DESTINATION:"/klab/message",REST_STATUS:"/modeler/engine/status",REST_SESSION_VIEW:"/modeler/engine/session/view/",REST_SESSION_OBSERVATION:"/modeler/engine/session/observation/",REST_UPLOAD:"/modeler/resource/put",REST_UPLOAD_MAX_SIZE:"1024MB",VUE_ROUTER_MODE:"hash",VUE_ROUTER_BASE:"",APP_URL:"undefined"})&&"true"===Object({NODE_ENV:"production",CLIENT:!0,SERVER:!1,DEV:!1,PROD:!0,THEME:"mat",MODE:"spa",WS_BASE_URL:"",STOMP_CLIENT_DEBUG:!1,ENGINE_URL:"/modeler",ENGINE_SHARED:"/modeler/shared/",WS_URL:"/modeler/message",WS_SUBSCRIBE:"/message",WS_MESSAGE_DESTINATION:"/klab/message",REST_STATUS:"/modeler/engine/status",REST_SESSION_VIEW:"/modeler/engine/session/view/",REST_SESSION_OBSERVATION:"/modeler/engine/session/observation/",REST_UPLOAD:"/modeler/resource/put",REST_UPLOAD_MAX_SIZE:"1024MB",VUE_ROUTER_MODE:"hash",VUE_ROUTER_BASE:"",APP_URL:"undefined"})["REFLECT_METADATA_USE_MAP_POLYFILL"],p=l||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?nt():Map,h=l||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?ot():Set,f=l||"function"!==typeof WeakMap?it():WeakMap,y=new f;function v(t,e,n,o){if(L(n)){if(!z(t))throw new TypeError;if(!W(e))throw new TypeError;return x(t,e)}if(!z(t))throw new TypeError;if(!V(e))throw new TypeError;if(!V(o)&&!L(o)&&!F(o))throw new TypeError;return F(o)&&(o=void 0),n=H(n),C(t,e,n,o)}function g(t,e){function n(n,o){if(!V(n))throw new TypeError;if(!L(o)&&!$(o))throw new TypeError;j(t,e,n,o)}return n}function m(t,e,n,o){if(!V(n))throw new TypeError;return L(o)||(o=H(o)),j(t,e,n,o)}function _(t,e,n){if(!V(e))throw new TypeError;return L(n)||(n=H(n)),M(t,e,n)}function b(t,e,n){if(!V(e))throw new TypeError;return L(n)||(n=H(n)),I(t,e,n)}function w(t,e,n){if(!V(e))throw new TypeError;return L(n)||(n=H(n)),R(t,e,n)}function S(t,e,n){if(!V(e))throw new TypeError;return L(n)||(n=H(n)),A(t,e,n)}function O(t,e){if(!V(t))throw new TypeError;return L(e)||(e=H(e)),N(t,e)}function E(t,e){if(!V(t))throw new TypeError;return L(e)||(e=H(e)),D(t,e)}function P(t,e,n){if(!V(e))throw new TypeError;L(n)||(n=H(n));var o=T(e,n,!1);if(L(o))return!1;if(!o.delete(t))return!1;if(o.size>0)return!0;var i=y.get(e);return i.delete(n),i.size>0||(y.delete(e),!0)}function x(t,e){for(var n=t.length-1;n>=0;--n){var o=t[n],i=o(e);if(!L(i)&&!F(i)){if(!W(i))throw new TypeError;e=i}}return e}function C(t,e,n,o){for(var i=t.length-1;i>=0;--i){var r=t[i],a=r(e,n,o);if(!L(a)&&!F(a)){if(!V(a))throw new TypeError;o=a}}return o}function T(t,e,n){var o=y.get(t);if(L(o)){if(!n)return;o=new p,y.set(t,o)}var i=o.get(e);if(L(i)){if(!n)return;i=new p,o.set(e,i)}return i}function M(t,e,n){var o=I(t,e,n);if(o)return!0;var i=et(e);return!F(i)&&M(t,i,n)}function I(t,e,n){var o=T(e,n,!1);return!L(o)&&Y(o.has(t))}function R(t,e,n){var o=I(t,e,n);if(o)return A(t,e,n);var i=et(e);return F(i)?void 0:R(t,i,n)}function A(t,e,n){var o=T(e,n,!1);if(!L(o))return o.get(t)}function j(t,e,n,o){var i=T(n,o,!0);i.set(t,e)}function N(t,e){var n=D(t,e),o=et(t);if(null===o)return n;var i=N(o,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var r=new h,a=[],s=0,c=n;s<c.length;s++){var u=c[s],d=r.has(u);d||(r.add(u),a.push(u))}for(var l=0,p=i;l<p.length;l++){u=p[l],d=r.has(u);d||(r.add(u),a.push(u))}return a}function D(t,e){var n=[],o=T(t,e,!1);if(L(o))return n;var i=o.keys(),r=X(i),a=0;while(1){var s=Q(r);if(!s)return n.length=a,n;var c=Z(s);try{n[a]=c}catch(t){try{tt(r)}finally{throw t}}a++}}function k(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function L(t){return void 0===t}function F(t){return null===t}function B(t){return"symbol"===typeof t}function V(t){return"object"===typeof t?null!==t:"function"===typeof t}function G(t,e){switch(k(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var n=3===e?"string":5===e?"number":"default",o=J(t,i);if(void 0!==o){var r=o.call(t,n);if(V(r))throw new TypeError;return r}return U(t,"default"===n?"number":n)}function U(t,e){if("string"===e){var n=t.toString;if(q(n)){var o=n.call(t);if(!V(o))return o}var i=t.valueOf;if(q(i)){o=i.call(t);if(!V(o))return o}}else{i=t.valueOf;if(q(i)){o=i.call(t);if(!V(o))return o}var r=t.toString;if(q(r)){o=r.call(t);if(!V(o))return o}}throw new TypeError}function Y(t){return!!t}function K(t){return""+t}function H(t){var e=G(t,3);return B(e)?e:K(e)}function z(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function q(t){return"function"===typeof t}function W(t){return"function"===typeof t}function $(t){switch(k(t)){case 3:return!0;case 4:return!0;default:return!1}}function J(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!q(n))throw new TypeError;return n}}function X(t){var e=J(t,r);if(!q(e))throw new TypeError;var n=e.call(t);if(!V(n))throw new TypeError;return n}function Z(t){return t.value}function Q(t){var e=t.next();return!e.done&&e}function tt(t){var e=t["return"];e&&e.call(t)}function et(t){var e=Object.getPrototypeOf(t);if("function"!==typeof t||t===d)return e;if(e!==d)return e;var n=t.prototype,o=n&&Object.getPrototypeOf(n);if(null==o||o===Object.prototype)return e;var i=o.constructor;return"function"!==typeof i?e:i===t?e:i}function nt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[r]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var o=this._keys.length,i=n+1;i<o;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,o)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[r]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function o(t,e){return t}function i(t,e){return e}function a(t,e){return[t,e]}}function ot(){return function(){function t(){this._map=new p}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[r]=function(){return this.keys()},t}()}function it(){var t=16,e=u.create(),o=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=r(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=r(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){var n=r(t,!0);return n[this._key]=e,this},t.prototype.delete=function(t){var e=r(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+c()}while(u.has(e,t));return e[t]=!0,t}function r(t,e){if(!n.call(t,o)){if(!e)return;Object.defineProperty(t,o,{value:u.create()})}return t[o]}function a(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(t){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):a(new Uint8Array(t),t):a(new Array(t),t)}function c(){var e=s(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",o=0;o<t;++o){var i=e[o];4!==o&&6!==o&&8!==o||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function rt(t){return t.__=void 0,delete t.__,t}e("decorate",v),e("metadata",g),e("defineMetadata",m),e("hasMetadata",_),e("hasOwnMetadata",b),e("getMetadata",w),e("getOwnMetadata",S),e("getMetadataKeys",O),e("getOwnMetadataKeys",E),e("deleteMetadata",P)})})(n||(n={}))}).call(this,n("4362"),n("c8ba"))},9964:function(t,e,n){"use strict";function o(t){return t.hasFeature(e.expandFeature)&&"expanded"in t}Object.defineProperty(e,"__esModule",{value:!0}),e.expandFeature=Symbol("expandFeature"),e.isExpandable=o},"9ad4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("ee16"),i=function(){function t(){}return t.prototype.render=function(t,e){var n=o.default(t.code);return this.correctNamespace(n),n},t.prototype.correctNamespace=function(t){"svg"!==t.sel&&"g"!==t.sel||this.setNamespace(t,"http://www.w3.org/2000/svg")},t.prototype.setNamespace=function(t,e){void 0===t.data&&(t.data={}),t.data.ns=e;var n=t.children;if(void 0!==n)for(var o=0;o<n.length;o++){var i=n[o];"string"!==typeof i&&this.setNamespace(i,e)}},t}();e.PreRenderedView=i},"9e2e":function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n("e1c6"),c=n("6923");(function(t){t[t["none"]=0]="none",t[t["error"]=1]="error",t[t["warn"]=2]="warn",t[t["info"]=3]="info",t[t["log"]=4]="log"})(a=e.LogLevel||(e.LogLevel={}));var u=function(){function t(){this.logLevel=a.none}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t=o([s.injectable()],t),t}();e.NullLogger=u;var d=function(){function t(t,e){void 0===t&&(t=a.log),void 0===e&&(e={baseDiv:""}),this.logLevel=t,this.viewOptions=e}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.error)try{console.error.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.warn)try{console.warn.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.info)try{console.info.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=a.log)try{console.log.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.consoleArguments=function(t,e,n){var o;o="object"===typeof t?t.constructor.name:t;var i=new Date;return[i.toLocaleTimeString()+" "+this.viewOptions.baseDiv+" "+o+": "+e].concat(n)},t=o([s.injectable(),r(0,s.inject(c.TYPES.LogLevel)),r(1,s.inject(c.TYPES.ViewerOptions)),i("design:paramtypes",[Number,Object])],t),t}();e.ConsoleLogger=d},"9f62":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=n("1979"),r=n("66d7");function a(){return function(t,e,n){var a=new i.Metadata(o.UNMANAGED_TAG,!0);r.tagParameter(t,e,n,a)}}e.unmanaged=a},"9f8d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("1cd9"),a=n("5d19"),s=new o.ContainerModule(function(t){t(i.TYPES.KeyListener).to(r.ExportSvgKeyListener).inSingletonScope(),t(i.TYPES.HiddenVNodeDecorator).to(r.ExportSvgDecorator).inSingletonScope(),t(i.TYPES.ICommand).toConstructor(r.ExportSvgCommand),t(i.TYPES.SvgExporter).to(a.SvgExporter).inSingletonScope()});e.default=s},a0af:function(t,e,n){"use strict";function o(t){return void 0!==t["position"]}function i(t){return t.hasFeature(e.moveFeature)&&o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.moveFeature=Symbol("moveFeature"),e.isLocateable=o,e.isMoveable=i},a101:function(t,e,n){"use strict";var o=n("e524"),i=n.n(o);i.a},a1a5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=n("1979"),r=n("66d7");function a(t){return function(e,n,a){var s=new i.Metadata(o.NAME_TAG,t);r.tagParameter(e,n,a,s)}}e.targetName=a},a27f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("bcc9");e.Draggable=o.Draggable},a2e1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd02"),i=n("3a92"),r=n("66f9"),a=function(){function t(){}return t.prototype.layout=function(t,e){var n=e.getBoundsData(t),o=this.getLayoutOptions(t),i=this.getChildrenSize(t,o,e),r=o.paddingFactor*(o.resizeContainer?i.width:Math.max(0,this.getFixedContainerBounds(t,o,e).width)-o.paddingLeft-o.paddingRight),a=o.paddingFactor*(o.resizeContainer?i.height:Math.max(0,this.getFixedContainerBounds(t,o,e).height)-o.paddingTop-o.paddingBottom);if(r>0&&a>0){var s=this.layoutChildren(t,e,o,r,a);n.bounds=this.getFinalContainerBounds(t,s,o,r,a),n.boundsChanged=!0}},t.prototype.getFinalContainerBounds=function(t,e,n,o,i){return{x:t.bounds.x,y:t.bounds.y,width:o+n.paddingLeft+n.paddingRight,height:i+n.paddingTop+n.paddingBottom}},t.prototype.getFixedContainerBounds=function(t,e,n){var a=t;while(1){if(r.isBoundsAware(a)){var s=a.bounds;if(r.isLayoutContainer(a)&&e.resizeContainer&&n.log.error(a,"Resizable container found while detecting fixed bounds"),o.isValidDimension(s))return s}if(!(a instanceof i.SChildElement))return n.log.error(a,"Cannot detect fixed bounds"),o.EMPTY_BOUNDS;a=a.parent}},t.prototype.layoutChildren=function(t,e,n,i,a){var s=this,c={x:n.paddingLeft+.5*(i-i/n.paddingFactor),y:n.paddingTop+.5*(a-a/n.paddingFactor)};return t.children.forEach(function(t){if(r.isLayoutableChild(t)){var u=e.getBoundsData(t),d=u.bounds,l=s.getChildLayoutOptions(t,n);void 0!==d&&o.isValidDimension(d)&&(c=s.layoutChild(t,u,d,l,n,c,i,a))}}),c},t.prototype.getDx=function(t,e,n){switch(t){case"left":return 0;case"center":return.5*(n-e.width);case"right":return n-e.width}},t.prototype.getDy=function(t,e,n){switch(t){case"top":return 0;case"center":return.5*(n-e.height);case"bottom":return n-e.height}},t.prototype.getChildLayoutOptions=function(t,e){var n=t.layoutOptions;return void 0===n?e:this.spread(e,n)},t.prototype.getLayoutOptions=function(t){var e=this,n=t,o=[];while(void 0!==n){var r=n.layoutOptions;if(void 0!==r&&o.push(r),!(n instanceof i.SChildElement))break;n=n.parent}return o.reverse().reduce(function(t,n){return e.spread(t,n)},this.getDefaultLayoutOptions())},t}();e.AbstractLayout=a},a32f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("77d3"),i=function(){function t(t){this.id=o.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=i},a5f4:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("cc26"),c=n("9757"),u=n("3a92"),d=n("c146");function l(t,e,n){var o=new s.SRoutingHandle;return o.type="junction"===t?"routing-point":"volatile-routing-point",o.kind=t,o.pointIndex=n,o}function p(t){var e=t.routingPoints.length,n=t.id;t.add(l("line",n,-1));for(var o=0;o<e;o++)t.add(l("junction",n,o)),t.add(l("line",n,o))}e.createRoutingHandle=l,e.createRoutingHandles=p;var h=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.elementsToActivate=t,this.elementsToDeactivate=e,this.kind=f.KIND}return t}();e.SwitchEditModeAction=h;var f=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.elementsToActivate=[],n.elementsToDeactivate=[],n.handlesToRemove=[],n}return o(e,t),e.prototype.execute=function(t){var e=this,n=t.root.index;return this.action.elementsToActivate.forEach(function(t){var o=n.getById(t);void 0!==o&&e.elementsToActivate.push(o)}),this.action.elementsToDeactivate.forEach(function(t){var o=n.getById(t);if(void 0!==o&&e.elementsToDeactivate.push(o),o instanceof s.SRoutingHandle&&s.isRoutable(o.parent)){var i=o.parent;e.shouldRemoveHandle(o,i)&&(e.handlesToRemove.push({handle:o,parent:i}),e.elementsToDeactivate.push(i),e.elementsToActivate.push(i))}}),this.doExecute(t)},e.prototype.doExecute=function(t){return this.handlesToRemove.forEach(function(t){t.point=t.parent.routingPoints.splice(t.handle.pointIndex,1)[0]}),this.elementsToDeactivate.forEach(function(t){s.isRoutable(t)&&t instanceof u.SParentElement?t.removeAll(function(t){return t instanceof s.SRoutingHandle}):t instanceof s.SRoutingHandle&&(t.editMode=!1)}),this.elementsToActivate.forEach(function(t){s.canEditRouting(t)&&t instanceof u.SParentElement?p(t):t instanceof s.SRoutingHandle&&(t.editMode=!0)}),t.root},e.prototype.shouldRemoveHandle=function(t,e){if("junction"===t.kind){var n=e.route();return void 0===n.find(function(e){return e.pointIndex===t.pointIndex})}return!1},e.prototype.undo=function(t){return this.handlesToRemove.forEach(function(t){void 0!==t.point&&t.parent.routingPoints.splice(t.handle.pointIndex,0,t.point)}),this.elementsToActivate.forEach(function(t){s.isRoutable(t)&&t instanceof u.SParentElement?t.removeAll(function(t){return t instanceof s.SRoutingHandle}):t instanceof s.SRoutingHandle&&(t.editMode=!1)}),this.elementsToDeactivate.forEach(function(t){s.canEditRouting(t)&&t instanceof u.SParentElement?p(t):t instanceof s.SRoutingHandle&&(t.editMode=!0)}),t.root},e.prototype.redo=function(t){return this.doExecute(t)},e.KIND="switchEditMode",e=i([a.injectable(),r("design:paramtypes",[h])],e),e}(c.Command);e.SwitchEditModeCommand=f;var y=function(){function t(t,e){void 0===e&&(e=!0),this.moves=t,this.animate=e,this.kind=v.KIND}return t}();e.MoveRoutingHandleAction=y;var v=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedMoves=new Map,n.originalRoutingPoints=new Map,n}return o(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.moves.forEach(function(t){var o=e.resolve(t,n.index);if(void 0!==o){e.resolvedMoves.set(o.elementId,o);var i=o.parent;s.isRoutable(i)&&e.originalRoutingPoints.set(i.id,i.routingPoints.slice())}}),this.action.animate?new g(n,this.resolvedMoves,this.originalRoutingPoints,t).start():this.doMove(t)},e.prototype.resolve=function(t,e){var n=e.getById(t.elementId);if(n instanceof s.SRoutingHandle)return{elementId:t.elementId,element:n,parent:n.parent,fromPosition:t.fromPosition,toPosition:t.toPosition}},e.prototype.doMove=function(t){return this.resolvedMoves.forEach(function(t){var e=t.element,n=t.parent;if(s.isRoutable(n)){var o=n.routingPoints,i=e.pointIndex;"line"===e.kind&&(e.kind="junction",e.type="routing-point",o.splice(i+1,0,t.fromPosition||o[Math.max(i,0)]),n.children.forEach(function(t){t instanceof s.SRoutingHandle&&(t===e||t.pointIndex>i)&&t.pointIndex++}),n.add(l("line",n.id,i)),n.add(l("line",n.id,i+1)),i++),i>=0&&i<o.length&&(o[i]=t.toPosition)}}),t.root},e.prototype.undo=function(t){var e=this;return this.action.animate?new g(t.root,this.resolvedMoves,this.originalRoutingPoints,t,!0).start():(this.resolvedMoves.forEach(function(t){var n=t.parent,o=e.originalRoutingPoints.get(n.id);void 0!==o&&s.isRoutable(n)&&(n.routingPoints=o,n.removeAll(function(t){return t instanceof s.SRoutingHandle}),p(n))}),t.root)},e.prototype.redo=function(t){return this.action.animate?new g(t.root,this.resolvedMoves,this.originalRoutingPoints,t,!1).start():this.doMove(t)},e.KIND="moveHandle",e=i([a.injectable(),r("design:paramtypes",[y])],e),e}(c.Command);e.MoveRoutingHandleCommand=v;var g=function(t){function e(e,n,o,i,r){void 0===r&&(r=!1);var a=t.call(this,i)||this;return a.model=e,a.handleMoves=n,a.originalRoutingPoints=o,a.reverse=r,a}return o(e,t),e.prototype.tween=function(t){var e=this;return this.handleMoves.forEach(function(n){var o=n.parent;if(s.isRoutable(o)&&void 0!==n.fromPosition){if(e.reverse&&1===t){var i=e.originalRoutingPoints.get(o.id);if(void 0!==i)return o.routingPoints=i,o.removeAll(function(t){return t instanceof s.SRoutingHandle}),void p(o)}var r=o.routingPoints,a=n.element.pointIndex;a>=0&&a<r.length&&(e.reverse?r[a]={x:(1-t)*n.toPosition.x+t*n.fromPosition.x,y:(1-t)*n.toPosition.y+t*n.fromPosition.y}:r[a]={x:(1-t)*n.fromPosition.x+t*n.toPosition.x,y:(1-t)*n.fromPosition.y+t*n.toPosition.y})}}),this.model},e}(d.Animation);e.MoveHandlesAnimation=g},a8af:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3");function i(t){return t instanceof RangeError||t.message===o.STACK_OVERFLOW}e.isStackOverflowExeption=i},ac29:function(t,e,n){"use strict";var o=n("01d4"),i=n("4cdf"),r=n("0b2d"),a=n("de46"),s=n("e269"),c=n("a568"),u=n("1e8d"),d=n("cef7"),l=n("06f8"),p=(n("0af5"),n("57cb")),h=n("f822"),f=n("f623"),y=n("7a09"),v=n("47e4"),g=n("9a44"),m=n("88da"),_=n("5dca"),b=n("f403"),w=n("5bc3"),S=n("4105"),O=n("bf62"),E=n("3e6b"),P=n("5831"),x=n("6c77"),C={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},T={DRAWSTART:"drawstart",DRAWEND:"drawend"},M=function(t){function e(e,n){t.call(this,e),this.feature=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(d["a"]),I=function(t){function e(e){var n=e;n.stopDown||(n.stopDown=p["a"]),t.call(this,n),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=A(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===C.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:p["b"];var o=e.geometryFunction;if(!o)if(this.type_===f["a"].CIRCLE)o=function(t,e){var n=e||new h["a"]([NaN,NaN]),o=Object(c["g"])(t[0],t[1]);return n.setCenterAndRadius(t[0],Math.sqrt(o)),n};else{var i,r=this.mode_;r===C.POINT?i=b["a"]:r===C.LINE_STRING?i=y["a"]:r===C.POLYGON&&(i=w["a"]),o=function(t,e){var n=e;return n?r===C.POLYGON?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new i(t),n}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new E["a"]({source:new P["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:R(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:l["g"],this.freehandCondition_,e.freehand?this.freehandCondition_=l["c"]:this.freehandCondition_=e.freehandCondition?e.freehandCondition:l["i"],Object(u["a"])(this,Object(s["b"])(O["a"].ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===o["a"].CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==C.POINT&&this.freehandCondition_(e);var n=e.type===r["a"].POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===r["a"].POINTERDRAG){var a=Date.now();a-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===r["a"].POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),i=!1):this.freehand_&&e.type===r["a"].POINTERDOWN?i=!1:n?(i=e.type===r["a"].POINTERMOVE,i&&this.freehand_?i=this.handlePointerMove_(e):(e.pointerEvent.pointerType==_["b"]||e.type===r["a"].POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===r["a"].DBLCLICK&&(i=!1),t.prototype.handleEvent.call(this,e)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a["a"](r["a"].POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var n=this.mode_===C.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||n?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===C.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,n=t.pixel,o=e[0]-n[0],i=e[1]-n[1],r=o*o+i*i;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var n=!1,o=[this.finishCoordinate_];if(this.mode_===C.LINE_STRING)n=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===C.POLYGON){var i=this.sketchCoords_;n=i[0].length>this.minPoints_,o=[i[0][0],i[0][i[0].length-2]]}if(n)for(var r=t.map,a=0,s=o.length;a<s;a++){var c=o[a],u=r.getPixelFromCoordinate(c),d=t.pixel,l=d[0]-u[0],p=d[1]-u[1],h=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+p*p)<=h,e){this.finishCoordinate_=c;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(this.sketchPoint_){var n=this.sketchPoint_.getGeometry();n.setCoordinates(e)}else this.sketchPoint_=new i["a"](new b["a"](e)),this.updateSketchFeatures_()},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===C.POINT?this.sketchCoords_=e.slice():this.mode_===C.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new i["a"](new y["a"](this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new i["a"],this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new M(T.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,n,o,r=t.coordinate,a=this.sketchFeature_.getGeometry();if(this.mode_===C.POINT?n=this.sketchCoords_:this.mode_===C.POLYGON?(e=this.sketchCoords_[0],n=e[e.length-1],this.atFinish_(t)&&(r=this.finishCoordinate_.slice())):(e=this.sketchCoords_,n=e[e.length-1]),n[0]=r[0],n[1]=r[1],this.geometryFunction_(this.sketchCoords_,a),this.sketchPoint_){var s=this.sketchPoint_.getGeometry();s.setCoordinates(r)}if(a.getType()==f["a"].POLYGON&&this.mode_!==C.POLYGON){this.sketchLine_||(this.sketchLine_=new i["a"]);var c=a.getLinearRing(0);o=this.sketchLine_.getGeometry(),o?(o.setFlatCoordinates(c.getLayout(),c.getFlatCoordinates()),o.changed()):(o=new y["a"](c.getFlatCoordinates(),c.getLayout()),this.sketchLine_.setGeometry(o))}else this.sketchLineCoords_&&(o=this.sketchLine_.getGeometry(),o.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,n,o=t.coordinate,i=this.sketchFeature_.getGeometry();this.mode_===C.LINE_STRING?(this.finishCoordinate_=o.slice(),n=this.sketchCoords_,n.length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(o.slice()),this.geometryFunction_(n,i)):this.mode_===C.POLYGON&&(n=this.sketchCoords_[0],n.length>=this.maxPoints_&&(this.freehand_?n.pop():e=!0),n.push(o.slice()),e&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e,n=this.sketchFeature_.getGeometry();this.mode_===C.LINE_STRING?(t=this.sketchCoords_,t.splice(-2,1),this.geometryFunction_(t,n),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===C.POLYGON&&(t=this.sketchCoords_[0],t.splice(-2,1),e=this.sketchLine_.getGeometry(),e.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,n)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,n=t.getGeometry();this.mode_===C.LINE_STRING?(e.pop(),this.geometryFunction_(e,n)):this.mode_===C.POLYGON&&(e[0].pop(),this.geometryFunction_(e,n),e=n.getCoordinates()),this.type_===f["a"].MULTI_POINT?t.setGeometry(new g["a"]([e])):this.type_===f["a"].MULTI_LINE_STRING?t.setGeometry(new v["a"]([e])):this.type_===f["a"].MULTI_POLYGON&&t.setGeometry(new m["a"]([e])),this.dispatchEvent(new M(T.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry(),n=e;this.sketchFeature_=t,this.sketchCoords_=n.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new M(T.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(S["b"]);function R(){var t=Object(x["b"])();return function(e,n){return t[e.getGeometry().getType()]}}function A(t){var e;return t===f["a"].POINT||t===f["a"].MULTI_POINT?e=C.POINT:t===f["a"].LINE_STRING||t===f["a"].MULTI_LINE_STRING?e=C.LINE_STRING:t===f["a"].POLYGON||t===f["a"].MULTI_POLYGON?e=C.POLYGON:t===f["a"].CIRCLE&&(e=C.CIRCLE),e}e["a"]=I},ac2a:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("dd02"),a=n("a2e1"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,i=-1;return t.children.forEach(function(t){var e=n.getBoundsData(t).bounds;void 0!==e&&r.isValidDimension(e)&&(o=Math.max(o,e.width),i=Math.max(i,e.height))}),{width:o,height:i}},e.prototype.layoutChild=function(t,e,n,o,i,r,a,s){var c=this.getDx(o.hAlign,n,a),u=this.getDy(o.vAlign,n,s);return e.bounds={x:i.paddingLeft+t.bounds.x-n.x+c,y:i.paddingTop+t.bounds.y-n.y+u,width:n.width,height:n.height},e.boundsChanged=!0,r},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hAlign:"center",vAlign:"center"}},e.prototype.spread=function(t,e){return i({},t,e)},e.KIND="stack",e}(a.AbstractLayout);e.StackLayouter=s},b2da:function(t,e,n){(function(e,o){t.exports=o(n("3900"),n("35a7"))})(0,function(t,e){"use strict";t="default"in t?t["default"]:t,e="default"in e?e["default"]:e;var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(o):void 0},r=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},s="layer-switcher-",c=function(t){function c(t){n(this,c);var e=t||{},o=e.tipLabel?e.tipLabel:"Legend",i=document.createElement("div"),r=a(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,{element:i,target:e.target}));r.mapListeners=[],r.hiddenClassName="ol-unselectable ol-control layer-switcher",c.isTouchDevice_()&&(r.hiddenClassName+=" touch"),r.shownClassName="shown",i.className=r.hiddenClassName;var s=document.createElement("button");s.setAttribute("title",o),i.appendChild(s),r.panel=document.createElement("div"),r.panel.className="panel",i.appendChild(r.panel),c.enableTouchScroll_(r.panel);var u=r;return s.onmouseover=function(t){u.showPanel()},s.onclick=function(t){t=t||window.event,u.showPanel(),t.preventDefault()},u.panel.onmouseout=function(t){t=t||window.event,u.panel.contains(t.toElement||t.relatedTarget)||u.hidePanel()},r}return r(c,t),o(c,[{key:"setMap",value:function(t){for(var n=0;n<this.mapListeners.length;n++)e.unByKey(this.mapListeners[n]);if(this.mapListeners.length=0,i(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"setMap",this).call(this,t),t){var o=this;this.mapListeners.push(t.on("pointerdown",function(){o.hidePanel()})),this.renderPanel()}}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){c.renderPanel(this.getMap(),this.panel)}}],[{key:"renderPanel",value:function(t,e){c.ensureTopVisibleBaseLayerShown_(t);while(e.firstChild)e.removeChild(e.firstChild);var n=document.createElement("ul");e.appendChild(n),c.renderLayers_(t,t,n)}},{key:"ensureTopVisibleBaseLayerShown_",value:function(t){var e;c.forEachRecursive(t,function(t,n,o){"base"===t.get("type")&&t.getVisible()&&(e=t)}),e&&c.setVisible_(t,e,!0)}},{key:"setVisible_",value:function(t,e,n){e.setVisible(n),n&&"base"===e.get("type")&&c.forEachRecursive(t,function(t,n,o){t!=e&&"base"===t.get("type")&&t.setVisible(!1)})}},{key:"renderLayer_",value:function(t,e,n){var o=document.createElement("li"),i=e.get("title"),r=c.uuid(),a=document.createElement("label");if(e.getLayers&&!e.get("combine")){o.className="group",e.get("fold")&&(o.classList.add(s+"fold"),o.classList.add(s+e.get("fold")),a.onclick=function(t){c.toggleFold_(e,o)}),a.innerHTML=i,o.appendChild(a);var u=document.createElement("ul");o.appendChild(u),c.renderLayers_(t,e,u)}else{o.className="layer";var d=document.createElement("input");"base"===e.get("type")?(d.type="radio",d.name="base"):d.type="checkbox",d.id=r,d.checked=e.get("visible"),d.onchange=function(n){c.setVisible_(t,e,n.target.checked)},o.appendChild(d),a.htmlFor=r,a.innerHTML=i;var l=t.getView().getResolution();(l>e.getMaxResolution()||l<e.getMinResolution())&&(a.className+=" disabled"),o.appendChild(a)}return o}},{key:"renderLayers_",value:function(t,e,n){for(var o,i=e.getLayers().getArray().slice().reverse(),r=0;r<i.length;r++)o=i[r],o.get("title")&&n.appendChild(c.renderLayer_(t,o,r))}},{key:"forEachRecursive",value:function(t,e){t.getLayers().forEach(function(t,n,o){e(t,n,o),t.getLayers&&c.forEachRecursive(t,e)})}},{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}},{key:"enableTouchScroll_",value:function(t){if(c.isTouchDevice_()){var e=0;t.addEventListener("touchstart",function(t){e=this.scrollTop+t.touches[0].pageY},!1),t.addEventListener("touchmove",function(t){this.scrollTop=e-t.touches[0].pageY},!1)}}},{key:"isTouchDevice_",value:function(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}},{key:"toggleFold_",value:function(t,e){e.classList.remove(s+t.get("fold")),t.set("fold","open"===t.get("fold")?"close":"open"),e.classList.add(s+t.get("fold"))}}]),c}(t);return window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=c),c})},b485:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("3b4c"),r=n("3623"),a=n("1f89"),s=function(){function t(e){this.elementId=e,this.kind=t.KIND}return t.KIND="open",t}();e.OpenAction=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.doubleClick=function(t,e){var n=r.findParentByFeature(t,a.isOpenable);return void 0!==n?[new s(n.id)]:[]},e}(i.MouseListener);e.OpenMouseListener=c},b669:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("fba3");function i(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(r(t)!==e)return!1;if(o.isMac()){if(t.ctrlKey!==n.findIndex(function(t){return"ctrl"===t})>=0)return!1;if(t.metaKey!==n.findIndex(function(t){return"meta"===t||"ctrlCmd"===t})>=0)return!1}else{if(t.ctrlKey!==n.findIndex(function(t){return"ctrl"===t||"ctrlCmd"===t})>=0)return!1;if(t.metaKey!==n.findIndex(function(t){return"meta"===t})>=0)return!1}return t.altKey===n.findIndex(function(t){return"alt"===t})>=0&&t.shiftKey===n.findIndex(function(t){return"shift"===t})>=0}function r(t){if(t.keyCode){var e=a[t.keyCode];if(void 0!==e)return e}return t.code}e.matchesKeystroke=i,e.getActualCode=r;var a=new Array(256);(function(){function t(t,e){void 0===a[e]&&(a[e]=t)}t("Pause",3),t("Backspace",8),t("Tab",9),t("Enter",13),t("ShiftLeft",16),t("ShiftRight",16),t("ControlLeft",17),t("ControlRight",17),t("AltLeft",18),t("AltRight",18),t("CapsLock",20),t("Escape",27),t("Space",32),t("PageUp",33),t("PageDown",34),t("End",35),t("Home",36),t("ArrowLeft",37),t("ArrowUp",38),t("ArrowRight",39),t("ArrowDown",40),t("Insert",45),t("Delete",46),t("Digit1",49),t("Digit2",50),t("Digit3",51),t("Digit4",52),t("Digit5",53),t("Digit6",54),t("Digit7",55),t("Digit8",56),t("Digit9",57),t("Digit0",48),t("KeyA",65),t("KeyB",66),t("KeyC",67),t("KeyD",68),t("KeyE",69),t("KeyF",70),t("KeyG",71),t("KeyH",72),t("KeyI",73),t("KeyJ",74),t("KeyK",75),t("KeyL",76),t("KeyM",77),t("KeyN",78),t("KeyO",79),t("KeyP",80),t("KeyQ",81),t("KeyR",82),t("KeyS",83),t("KeyT",84),t("KeyU",85),t("KeyV",86),t("KeyW",87),t("KeyX",88),t("KeyY",89),t("KeyZ",90),t("OSLeft",91),t("MetaLeft",91),t("OSRight",92),t("MetaRight",92),t("ContextMenu",93),t("Numpad0",96),t("Numpad1",97),t("Numpad2",98),t("Numpad3",99),t("Numpad4",100),t("Numpad5",101),t("Numpad6",102),t("Numpad7",103),t("Numpad8",104),t("Numpad9",105),t("NumpadMultiply",106),t("NumpadAdd",107),t("NumpadSeparator",108),t("NumpadSubtract",109),t("NumpadDecimal",110),t("NumpadDivide",111),t("F1",112),t("F2",113),t("F3",114),t("F4",115),t("F5",116),t("F6",117),t("F7",118),t("F8",119),t("F9",120),t("F10",121),t("F11",122),t("F12",123),t("F13",124),t("F14",125),t("F15",126),t("F16",127),t("F17",128),t("F18",129),t("F19",130),t("F20",131),t("F21",132),t("F22",133),t("F23",134),t("F24",135),t("NumLock",144),t("ScrollLock",145),t("Semicolon",186),t("Equal",187),t("Comma",188),t("Minus",189),t("Period",190),t("Slash",191),t("Backquote",192),t("IntlRo",193),t("BracketLeft",219),t("Backslash",220),t("BracketRight",221),t("Quote",222),t("IntlYen",255)})()},ba30:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("dd02");function i(t,e,n,o){void 0===o&&(o=0);var i=t.x+e,r=t.y+e,a=i-n.x,s=r-n.y,c=Math.sqrt(a*a+s*s),u=a/c||0,d=s/c||0;return{x:i-u*(e+o),y:r-d*(e+o)}}function r(t,e,n){var o=(t-e.y)/(n.y-e.y);return(n.x-e.x)*o+e.x}function a(t,e,n){var o=(t-e.x)/(n.x-e.x);return(n.y-e.y)*o+e.y}e.computeCircleAnchor=i;var s=function(){function t(t,e){this.centerPoint=t,this.refPoint=e,this.currentDist=-1}return t.prototype.addCandidate=function(t,e){var n=this.refPoint.x-t,o=this.refPoint.y-e,i=n*n+o*o;(this.currentDist<0||i<this.currentDist)&&(this.currentBest={x:t,y:e},this.currentDist=i)},Object.defineProperty(t.prototype,"best",{get:function(){return void 0===this.currentBest?this.centerPoint:this.currentBest},enumerable:!0,configurable:!0}),t}();function c(t,e,n){var i=o.center(t),c=new s(i,e);if(!o.almostEquals(i.y,e.y)){var u=r(t.y,i,e);u>=t.x&&u<=t.x+t.width&&c.addCandidate(u,t.y-n);var d=r(t.y+t.height,i,e);d>=t.x&&d<=t.x+t.width&&c.addCandidate(d,t.y+t.height+n)}if(!o.almostEquals(i.x,e.x)){var l=a(t.x,i,e);l>=t.y&&l<=t.y+t.height&&c.addCandidate(t.x-n,l);var p=a(t.x+t.width,i,e);p>=t.y&&p<=t.y+t.height&&c.addCandidate(t.x+t.width+n,p)}return c.best}e.computeRectangleAnchor=c},ba33:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("30e3");function i(t){if("function"===typeof t){var e=t;return e.name}if("symbol"===typeof t)return t.toString();e=t;return e}function r(t,e,n){var o="",i=n(t,e);return 0!==i.length&&(o="\nRegistered bindings:",i.forEach(function(t){var e="Object";null!==t.implementationType&&(e=d(t.implementationType)),o=o+"\n "+e,t.constraint.metaData&&(o=o+" - "+t.constraint.metaData)})),o}function a(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||a(t.parentRequest,e))}function s(t){function e(t,n){void 0===n&&(n=[]);var o=i(t.serviceIdentifier);return n.push(o),null!==t.parentRequest?e(t.parentRequest,n):n}var n=e(t);return n.reverse().join(" --\x3e ")}function c(t){t.childRequests.forEach(function(t){if(a(t,t.serviceIdentifier)){var e=s(t);throw new Error(o.CIRCULAR_DEPENDENCY+" "+e)}c(t)})}function u(t,e){if(e.isTagged()||e.isNamed()){var n="",o=e.getNamedTag(),i=e.getCustomTags();return null!==o&&(n+=o.toString()+"\n"),null!==i&&i.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n}return" "+t}function d(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=i,e.listRegisteredBindingsForServiceIdentifier=r,e.circularDependencyToException=c,e.listMetadataForTarget=u,e.getFunctionName=d},bafd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=e.context||document;if(!t)return null;var o=[],r=d((0,i.default)(t),o,n),a=void 0;return a=r?1===r.length?r[0]:r:l({type:"text",content:t},o,n),e.hooks&&e.hooks.create&&o.forEach(function(t){e.hooks.create(t)}),a};var o=n("861d"),i=c(o),r=n("2eed"),a=c(r),s=n("6592");function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e,n){return t instanceof Array&&t.length>0?t.map(function(t){return l(t,e,n)}):void 0}function l(t,e,n){var o=void 0;return o="text"===t.type?(0,s.createTextVNode)(t.content,n):(0,a.default)(t.name,p(t,n),d(t.children,e,n)),e.push(o),o}function p(t,e){var n={};if(!t.attrs)return n;var o=Object.keys(t.attrs).reduce(function(n,o){if("style"!==o&&"class"!==o){var i=(0,s.unescapeEntities)(t.attrs[o],e);n?n[o]=i:n=u({},o,i)}return n},null);o&&(n.attrs=o);var i=h(t);i&&(n.style=i);var r=f(t);return r&&(n.class=r),n}function h(t){try{return t.attrs.style.split(";").reduce(function(t,e){var n=e.split(":"),o=(0,s.transformName)(n[0].trim());if(o){var i=n[1].replace("!important","").trim();t?t[o]=i:t=u({},o,i)}return t},null)}catch(t){return null}}function f(t){try{return t.attrs.class.split(" ").reduce(function(t,e){return e=e.trim(),e&&(t?t[e]=!0:t=u({},e,!0)),t},null)}catch(t){return null}}},bcbd:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("fba3"),u=n("b669"),d=n("e629"),l=n("3a92"),p=n("3623"),h=n("9757"),f=n("3b4c"),y=n("1417"),v=n("e45b"),g=n("70d9"),m=n("38e8"),_=n("cc26"),b=n("a5f4"),w=n("4c18"),S=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.selectedElementsIDs=t,this.deselectedElementsIDs=e,this.kind=E.KIND}return t}();e.SelectAction=S;var O=function(){function t(t){void 0===t&&(t=!0),this.select=t,this.kind=P.KIND}return t}();e.SelectAllAction=O;var E=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n.deselected=[],n}return o(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.selectedElementsIDs.forEach(function(t){var o=n.index.getById(t);o instanceof l.SChildElement&&w.isSelectable(o)&&e.selected.push({element:o,parent:o.parent,index:o.parent.children.indexOf(o)})}),this.action.deselectedElementsIDs.forEach(function(t){var o=n.index.getById(t);o instanceof l.SChildElement&&w.isSelectable(o)&&e.deselected.push({element:o,parent:o.parent,index:o.parent.children.indexOf(o)})}),this.redo(t)},e.prototype.undo=function(t){for(var e=this.selected.length-1;e>=0;--e){var n=this.selected[e],o=n.element;w.isSelectable(o)&&(o.selected=!1),n.parent.move(o,n.index)}return this.deselected.reverse().forEach(function(t){w.isSelectable(t.element)&&(t.element.selected=!0)}),t.root},e.prototype.redo=function(t){for(var e=0;e<this.selected.length;++e){var n=this.selected[e],o=n.element,i=n.parent.children.length;n.parent.move(o,i-1)}return this.deselected.forEach(function(t){w.isSelectable(t.element)&&(t.element.selected=!1)}),this.selected.forEach(function(t){w.isSelectable(t.element)&&(t.element.selected=!0)}),t.root},e.KIND="elementSelected",e}(h.Command);e.SelectCommand=E;var P=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return o(e,t),e.prototype.execute=function(t){return this.selectAll(t.root,this.action.select),t.root},e.prototype.selectAll=function(t,e){w.isSelectable(t)&&(this.previousSelection[t.id]=t.selected,t.selected=e);for(var n=0,o=t.children;n<o.length;n++){var i=o[n];this.selectAll(i,e)}},e.prototype.undo=function(t){var e=t.root.index;for(var n in this.previousSelection)if(this.previousSelection.hasOwnProperty(n)){var o=e.getById(n);void 0!==o&&w.isSelectable(o)&&(o.selected=this.previousSelection[n])}return t.root},e.prototype.redo=function(t){return this.selectAll(t.root,this.action.select),t.root},e.KIND="allSelected",e}(h.Command);e.SelectAllCommand=P;var x=function(t){function e(e){var n=t.call(this)||this;return n.buttonHandlerRegistry=e,n.wasSelected=!1,n.hasDragged=!1,n}return o(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){if(void 0!==this.buttonHandlerRegistry&&t instanceof m.SButton&&t.enabled){var o=this.buttonHandlerRegistry.get(t.type);if(void 0!==o)return o.buttonPressed(t)}var i=p.findParentByFeature(t,w.isSelectable);if(void 0!==i||t instanceof l.SModelRoot){this.hasDragged=!1;var r=[];if(c.isCtrlOrCmd(e)||(r=d.toArray(t.root.index.all().filter(function(t){return w.isSelectable(t)&&t.selected&&!(i instanceof _.SRoutingHandle&&t===i.parent)}))),void 0!==i)if(i.selected)c.isCtrlOrCmd(e)?(this.wasSelected=!1,n.push(new S([],[i.id])),_.isRoutable(i)&&n.push(new b.SwitchEditModeAction([],[i.id]))):this.wasSelected=!0;else{this.wasSelected=!1,n.push(new S([i.id],r.map(function(t){return t.id})));var a=r.filter(function(t){return _.isRoutable(t)}).map(function(t){return t.id});_.isRoutable(i)?n.push(new b.SwitchEditModeAction([i.id],a)):a.length>0&&n.push(new b.SwitchEditModeAction([],a))}else{n.push(new S([],r.map(function(t){return t.id})));a=r.filter(function(t){return _.isRoutable(t)}).map(function(t){return t.id});a.length>0&&n.push(new b.SwitchEditModeAction([],a))}}}return n},e.prototype.mouseMove=function(t,e){return this.hasDragged=!0,[]},e.prototype.mouseUp=function(t,e){if(0===e.button&&!this.hasDragged){var n=p.findParentByFeature(t,w.isSelectable);if(void 0!==n&&this.wasSelected)return[new S([n.id],[])]}return this.hasDragged=!1,[]},e.prototype.decorate=function(t,e){var n=p.findParentByFeature(e,w.isSelectable);return void 0!==n&&v.setClass(t,"selected",n.selected),t},e=i([a(0,s.inject(g.ButtonHandlerRegistry)),a(0,s.optional()),r("design:paramtypes",[g.ButtonHandlerRegistry])],e),e}(f.MouseListener);e.SelectMouseListener=x;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.keyDown=function(t,e){if(u.matchesKeystroke(e,"KeyA","ctrlCmd")){var n=d.toArray(t.root.index.all().filter(function(t){return w.isSelectable(t)}).map(function(t){return t.id}));return[new S(n,[])]}return[]},e}(y.KeyListener);e.SelectKeyboardListener=C},bcc9:function(t,e,n){"use strict";var o,i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function r(t){return t&&t.$el||t}function a(t,e,n,o,i){void 0===i&&(i={});var r={left:n,top:o},a=t.height,s=t.width,c=o,u=o+a,d=n,l=n+s,p=i.top||0,h=i.bottom||0,f=i.left||0,y=i.right||0,v=e.top+p,g=e.bottom-h,m=e.left+f,_=e.right-y;return c<v?r.top=v:u>g&&(r.top=g-a),d<m?r.left=m:l>_&&(r.left=_-s),r}Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t["Start"]=1]="Start",t[t["End"]=2]="End",t[t["Move"]=3]="Move"}(o||(o={})),e.Draggable={bind:function(t,n,o,i){e.Draggable.update(t,n,o,i)},update:function(t,e,n,s){if(!e.value||!e.value.stopDragging){var c=e.value&&e.value.handle&&r(e.value.handle)||t;e&&e.value&&e.value.resetInitialPos&&(v(),m()),c.getAttribute("draggable")||(t.removeEventListener("mousedown",t["listener"]),c.addEventListener("mousedown",h),c.setAttribute("draggable","true"),t["listener"]=h,v(),m())}function u(n){n.preventDefault();var o=e.value&&e.value.stopDragging;if(!o){var i=_();i.startDragPosition&&i.initialMousePos||(v(n),i=_());var r=n.clientX-i.initialMousePos.left,s=n.clientY-i.initialMousePos.top,c={left:i.startDragPosition.left+r,top:i.startDragPosition.top+s},u=d(),p=t.getBoundingClientRect();u&&p&&(c=a(p,u,c.left,c.top,e.value.boundingRectMargin)),g({currentDragPosition:c}),l(),m(n)}}function d(){if(e.value)return e.value.boundingRect||e.value.boundingElement&&e.value.boundingElement.getBoundingClientRect()}function l(){var e=_();e.currentDragPosition&&(t.style.position="fixed",t.style.left=e.currentDragPosition.left+"px",t.style.top=e.currentDragPosition.top+"px")}function p(t){t.preventDefault();var e=y();g({initialMousePos:void 0,startDragPosition:e,currentDragPosition:e}),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",p),m(t,o.End)}function h(t){g({initialMousePos:f(t)}),m(t,o.Start),document.addEventListener("mousemove",u),document.addEventListener("mouseup",p)}function f(t){return t&&{left:t.clientX,top:t.clientY}}function y(){var e=t.getBoundingClientRect();if(e.height&&e.width)return{left:e.left,top:e.top}}function v(t){var n=_(),o=e&&e.value&&e.value.initialPosition,i=n.initialPosition,r=y(),a=o||i||r;g({initialPosition:a,startDragPosition:a,currentDragPosition:a,initialMousePos:f(t)}),l()}function g(t){var e=_(),n=i({},e,t);c.setAttribute("draggable-state",JSON.stringify(n))}function m(t,n){var r=_(),a={x:0,y:0};r.currentDragPosition&&r.startDragPosition&&(a.x=r.currentDragPosition.left-r.startDragPosition.left,a.y=r.currentDragPosition.top-r.startDragPosition.top);var s=r.currentDragPosition&&i({},r.currentDragPosition);n===o.End?e.value&&e.value.onDragEnd&&r&&e.value.onDragEnd(a,s,t):n===o.Start?e.value&&e.value.onDragStart&&r&&e.value.onDragStart(a,s,t):e.value&&e.value.onPositionChange&&r&&e.value.onPositionChange(a,s,t)}function _(){return JSON.parse(c.getAttribute("draggable-state"))||{}}}}},bd42:function(t,e,n){},be02:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("6923"),u=n("3864"),d=n("9757"),l=function(t){function e(e){var n=t.call(this)||this;return e.forEach(function(t){return n.initializeActionHandler(t)}),n}return o(e,t),e.prototype.registerCommand=function(t){this.register(t.KIND,new d.CommandActionHandler(t))},e.prototype.initializeActionHandler=function(t){t.initialize(this)},e=i([s.injectable(),a(0,s.multiInject(c.TYPES.IActionHandlerInitializer)),a(0,s.optional()),r("design:paramtypes",[Array])],e),e}(u.MultiInstanceRegistry);e.ActionHandlerRegistry=l},c146:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("987d"),r=function(){function t(t,e){void 0===e&&(e=i.easeInOut),this.context=t,this.ease=e}return t.prototype.start=function(){var t=this;return new Promise(function(e,n){var o=void 0,i=0,r=function(n){var a;i++,void 0===o?(o=n,a=0):a=n-o;var s=Math.min(1,a/t.context.duration),c=t.tween(t.ease(s),t.context);t.context.modelChanged.update(c),1===s?(t.context.logger.log(t,1e3*i/t.context.duration+" fps"),e(c)):t.context.syncer.onNextFrame(r)};if(t.context.syncer.isAvailable())t.context.syncer.onNextFrame(r);else{var a=t.tween(1,t.context);e(a)}})},t}();e.Animation=r;var a=function(t){function e(e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=i.easeInOut);var a=t.call(this,n,r)||this;return a.model=e,a.context=n,a.components=o,a.ease=r,a}return o(e,t),e.prototype.include=function(t){return this.components.push(t),this},e.prototype.tween=function(t,e){for(var n=0,o=this.components;n<o.length;n++){var i=o[n];i.tween(t,e)}return this.model},e}(r);e.CompoundAnimation=a},c20e:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("b669"),r=n("1417"),a=function(){function t(){this.kind=t.KIND}return t.KIND="undo",t}();e.UndoAction=a;var s=function(){function t(){this.kind=t.KIND}return t.KIND="redo",t}();e.RedoAction=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.keyDown=function(t,e){return i.matchesKeystroke(e,"KeyZ","ctrlCmd")?[new a]:i.matchesKeystroke(e,"KeyZ","ctrlCmd","shift")?[new s]:[]},e}(r.KeyListener);e.UndoRedoKeyListener=c},c278:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4"),i=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){var e=Reflect.getMetadata(o.PARAM_TYPES,t),n=Reflect.getMetadata(o.TAGGED,t);return{compilerGeneratedMetadata:e,userGeneratedMetadata:n||{}}},t.prototype.getPropertiesMetadata=function(t){var e=Reflect.getMetadata(o.TAGGED_PROP,t)||[];return e},t}();e.MetadataReader=i},c444:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("9757"),r=n("c146"),a=n("5eb6"),s=function(){function t(t,e,n){this.elementId=t,this.newViewport=e,this.animate=n,this.kind=c.KIND}return t}();e.ViewportAction=s;var c=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.newViewport=e.newViewport,n}return o(e,t),e.prototype.execute=function(t){var e=t.root,n=e.index.getById(this.action.elementId);if(n&&a.isViewport(n)){if(this.element=n,this.oldViewport={scroll:this.element.scroll,zoom:this.element.zoom},this.action.animate)return new u(this.element,this.oldViewport,this.newViewport,t).start();this.element.scroll=this.newViewport.scroll,this.element.zoom=this.newViewport.zoom}return e},e.prototype.undo=function(t){return new u(this.element,this.newViewport,this.oldViewport,t).start()},e.prototype.redo=function(t){return new u(this.element,this.oldViewport,this.newViewport,t).start()},e.prototype.merge=function(t,n){return!this.action.animate&&t instanceof e&&this.element===t.element&&(this.newViewport=t.newViewport,!0)},e.KIND="viewport",e}(i.MergeableCommand);e.ViewportCommand=c;var u=function(t){function e(e,n,o,i){var r=t.call(this,i)||this;return r.element=e,r.oldViewport=n,r.newViewport=o,r.context=i,r.zoomFactor=Math.log(o.zoom/n.zoom),r}return o(e,t),e.prototype.tween=function(t,e){return this.element.scroll={x:(1-t)*this.oldViewport.scroll.x+t*this.newViewport.scroll.x,y:(1-t)*this.oldViewport.scroll.y+t*this.newViewport.scroll.y},this.element.zoom=this.oldViewport.zoom*Math.exp(t*this.zoomFactor),e.root},e}(r.Animation);e.ViewportAnimation=u},c4e6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("bcbd"),a=new o.ContainerModule(function(t){t(i.TYPES.ICommand).toConstructor(r.SelectCommand),t(i.TYPES.ICommand).toConstructor(r.SelectAllCommand),t(i.TYPES.KeyListener).to(r.SelectKeyboardListener),t(i.TYPES.MouseListener).to(r.SelectMouseListener)});e.default=a},c4ec:function(t,e,n){var o=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,i=n("4047");t.exports=function(t){var e,n=0,r=!0,a={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(o,function(o){if("="===o)return r=!0,void n++;r?0===n?((i[o]||"/"===t.charAt(t.length-2))&&(a.voidElement=!0),a.name=o):(a.attrs[e]=o.replace(/^['"]|['"]$/g,""),e=void 0):(e&&(a.attrs[e]=e),e=o),n++,r=!1}),a}},c58e:function(t,e,n){},c5f4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},c612:function(t,e,n){"use strict";var o=n("8b1b"),i=n.n(o);i.a},c622:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("77d3"),i=function(){function t(t,e,n,i,r){this.id=o.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=r,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,o){var i=new t(e,this.parentContext,this,n,o);return this.childRequests.push(i),i},t}();e.Request=i},c807:function(t,e,n){"use strict";var o=n("1300"),i=n("e300"),r=n("183a"),a=n("4cdf"),s=n("0b2d"),c=n("9f5e"),u=n("a568"),d=n("1e8d"),l=n("cef7"),p=n("01d4"),h=n("06f8"),f=n("0af5"),y=n("f623"),v=n("f403"),g=n("4105"),m=n("3e6b"),_=n("5831"),b=n("a43f"),w=n("4a7d"),S=n("6c77"),O=0,E=1,P={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},x=function(t){function e(e,n,o){t.call(this,e),this.features=n,this.mapBrowserEvent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l["a"]),C=function(t){function e(e){var n;if(t.call(this,e),this.condition_=e.condition?e.condition:h["h"],this.defaultDeleteCondition_=function(t){return Object(h["a"])(t)&&Object(h["j"])(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:h["c"],this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new w["a"],this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new m["a"]({source:new _["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:R(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,n=new i["a"](this.source_.getFeatures()),Object(d["a"])(this.source_,b["a"].ADDFEATURE,this.handleSourceAdd_,this),Object(d["a"])(this.source_,b["a"].REMOVEFEATURE,this.handleSourceRemove_,this)):n=e.features,!n)throw new Error("The modify interaction requires features or a source");this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),Object(d["a"])(this.features_,r["a"].ADD,this.handleFeatureAdd_,this),Object(d["a"])(this.features_,r["a"].REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),Object(d["a"])(t,p["a"].CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new x(P.MODIFYSTART,this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(d["c"])(t,p["a"].CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,n=[];e.forEach(function(e){t===e.feature&&n.push(e)});for(var o=n.length-1;o>=0;--o)e.remove(n[o])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var n=e.getCoordinates(),o={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),o)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var n=e.getCoordinates(),o=0,i=n.length;o<i;++o){var r=n[o],a={feature:t,geometry:e,depth:[o],index:o,segment:[r,r]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),o=0,i=n.length-1;o<i;++o){var r=n.slice(o,o+2),a={feature:t,geometry:e,index:o,segment:r};this.rBush_.insert(Object(f["b"])(r),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var n=e.getCoordinates(),o=0,i=n.length;o<i;++o)for(var r=n[o],a=0,s=r.length-1;a<s;++a){var c=r.slice(a,a+2),u={feature:t,geometry:e,depth:[o],index:a,segment:c};this.rBush_.insert(Object(f["b"])(c),u)}},e.prototype.writePolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),o=0,i=n.length;o<i;++o)for(var r=n[o],a=0,s=r.length-1;a<s;++a){var c=r.slice(a,a+2),u={feature:t,geometry:e,depth:[o],index:a,segment:c};this.rBush_.insert(Object(f["b"])(c),u)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var n=e.getCoordinates(),o=0,i=n.length;o<i;++o)for(var r=n[o],a=0,s=r.length;a<s;++a)for(var c=r[a],u=0,d=c.length-1;u<d;++u){var l=c.slice(u,u+2),p={feature:t,geometry:e,depth:[a,o],index:u,segment:l};this.rBush_.insert(Object(f["b"])(l),p)}},e.prototype.writeCircleGeometry_=function(t,e){var n=e.getCenter(),o={feature:t,geometry:e,index:O,segment:[n,n]},i={feature:t,geometry:e,index:E,segment:[n,n]},r=[o,i];o.featureSegments=i.featureSegments=r,this.rBush_.insert(Object(f["m"])(n),o),this.rBush_.insert(e.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var n=e.getGeometriesArray(),o=0;o<n.length;++o)this.SEGMENT_WRITERS_[n[o].getType()].call(this,t,n[o])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(e){var n=e.getGeometry();n.setCoordinates(t)}else e=new a["a"](new v["a"](t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e);return e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=s["a"].POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(n=!(e.type!=s["a"].SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==s["a"].SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!n);var n},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,n=0,o=this.dragSegments_.length;n<o;++n){var i=this.dragSegments_[n],r=i[0],a=r.depth,s=r.geometry,c=void 0,d=r.segment,l=i[1];while(e.length<s.getStride())e.push(d[l][e.length]);switch(s.getType()){case y["a"].POINT:c=e,d[0]=d[1]=e;break;case y["a"].MULTI_POINT:c=s.getCoordinates(),c[r.index]=e,d[0]=d[1]=e;break;case y["a"].LINE_STRING:c=s.getCoordinates(),c[r.index+l]=e,d[l]=e;break;case y["a"].MULTI_LINE_STRING:c=s.getCoordinates(),c[a[0]][r.index+l]=e,d[l]=e;break;case y["a"].POLYGON:c=s.getCoordinates(),c[a[0]][r.index+l]=e,d[l]=e;break;case y["a"].MULTI_POLYGON:c=s.getCoordinates(),c[a[1]][a[0]][r.index+l]=e,d[l]=e;break;case y["a"].CIRCLE:d[0]=d[1]=e,r.index===O?(this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius(Object(u["c"])(s.getCenter(),e)),this.changingFeature_=!1);break;default:}c&&this.setGeometryCoordinates_(s,c)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var n=this.vertexFeature_;if(n){var i=[],r=n.getGeometry(),a=r.getCoordinates(),s=Object(f["b"])([a]),c=this.rBush_.getInExtent(s),d={};c.sort(T);for(var l=0,p=c.length;l<p;++l){var h=c[l],v=h.segment,g=Object(o["c"])(h.feature),m=h.depth;if(m&&(g+="-"+m.join("-")),d[g]||(d[g]=new Array(2)),h.geometry.getType()===y["a"].CIRCLE&&h.index===E){var _=I(e,h);Object(u["d"])(_,a)&&!d[g][0]&&(this.dragSegments_.push([h,0]),d[g][0]=h)}else if(Object(u["d"])(v[0],a)&&!d[g][0])this.dragSegments_.push([h,0]),d[g][0]=h;else if(Object(u["d"])(v[1],a)&&!d[g][1]){if((h.geometry.getType()===y["a"].LINE_STRING||h.geometry.getType()===y["a"].MULTI_LINE_STRING)&&d[g][0]&&0===d[g][0].index)continue;this.dragSegments_.push([h,1]),d[g][1]=h}else this.insertVertexCondition_(t)&&Object(o["c"])(v)in this.vertexSegments_&&!d[g][0]&&!d[g][1]&&i.push([h,a])}i.length&&this.willModifyFeatures_(t);for(var b=i.length-1;b>=0;--b)this.insertVertex_.apply(this,i[b])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var n=this.dragSegments_[e][0],o=n.geometry;if(o.getType()===y["a"].CIRCLE){var i=o.getCenter(),r=n.featureSegments[0],a=n.featureSegments[1];r.segment[0]=r.segment[1]=i,a.segment[0]=a.segment[1]=i,this.rBush_.update(Object(f["m"])(i),r),this.rBush_.update(o.getExtent(),a)}else this.rBush_.update(Object(f["b"])(n.segment),n)}return this.modified_&&(this.dispatchEvent(new x(P.MODIFYEND,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var n=e.getCoordinateFromPixel(t),i=function(t,e){return M(n,t)-M(n,e)},r=Object(f["c"])(Object(f["m"])(n),e.getView().getResolution()*this.pixelTolerance_),a=this.rBush_,s=a.getInExtent(r);if(s.length>0){s.sort(i);var c=s[0],d=c.segment,l=I(n,c),p=e.getPixelFromCoordinate(l),h=Object(u["c"])(t,p);if(h<=this.pixelTolerance_){var v={};if(c.geometry.getType()===y["a"].CIRCLE&&c.index===E)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var g=e.getPixelFromCoordinate(d[0]),m=e.getPixelFromCoordinate(d[1]),_=Object(u["g"])(p,g),b=Object(u["g"])(p,m);h=Math.sqrt(Math.min(_,b)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(l=_>b?d[1]:d[0]),this.createOrUpdateVertexFeature_(l);for(var w=1,S=s.length;w<S;++w){var O=s[w].segment;if(!(Object(u["d"])(d[0],O[0])&&Object(u["d"])(d[1],O[1])||Object(u["d"])(d[0],O[1])&&Object(u["d"])(d[1],O[0])))break;v[Object(o["c"])(O)]=!0}}return v[Object(o["c"])(d)]=!0,void(this.vertexSegments_=v)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){var n,o=t.segment,i=t.feature,r=t.geometry,a=t.depth,s=t.index;while(e.length<r.getStride())e.push(0);switch(r.getType()){case y["a"].MULTI_LINE_STRING:n=r.getCoordinates(),n[a[0]].splice(s+1,0,e);break;case y["a"].POLYGON:n=r.getCoordinates(),n[a[0]].splice(s+1,0,e);break;case y["a"].MULTI_POLYGON:n=r.getCoordinates(),n[a[1]][a[0]].splice(s+1,0,e);break;case y["a"].LINE_STRING:n=r.getCoordinates(),n.splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(r,n);var c=this.rBush_;c.remove(t),this.updateSegmentIndices_(r,s,a,1);var u={segment:[o[0],e],feature:i,geometry:r,depth:a,index:s};c.insert(Object(f["b"])(u.segment),u),this.dragSegments_.push([u,1]);var d={segment:[e,o[1]],feature:i,geometry:r,depth:a,index:s+1};c.insert(Object(f["b"])(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s["a"].POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new x(P.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,n,i,r,a,s,c,u,d,l,p=this.dragSegments_,h={},v=!1;for(r=p.length-1;r>=0;--r)n=p[r],d=n[0],l=Object(o["c"])(d.feature),d.depth&&(l+="-"+d.depth.join("-")),l in h||(h[l]={}),0===n[1]?(h[l].right=d,h[l].index=d.index):1==n[1]&&(h[l].left=d,h[l].index=d.index+1);for(l in h){switch(u=h[l].right,s=h[l].left,a=h[l].index,c=a-1,d=void 0!==s?s:u,c<0&&(c=0),i=d.geometry,e=i.getCoordinates(),t=e,v=!1,i.getType()){case y["a"].MULTI_LINE_STRING:e[d.depth[0]].length>2&&(e[d.depth[0]].splice(a,1),v=!0);break;case y["a"].LINE_STRING:e.length>2&&(e.splice(a,1),v=!0);break;case y["a"].MULTI_POLYGON:t=t[d.depth[1]];case y["a"].POLYGON:t=t[d.depth[0]],t.length>4&&(a==t.length-1&&(a=0),t.splice(a,1),v=!0,0===a&&(t.pop(),t.push(t[0]),c=t.length-1));break;default:}if(v){this.setGeometryCoordinates_(i,e);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),g.push(u.segment[1])),void 0!==s&&void 0!==u){var m={depth:d.depth,feature:d.feature,geometry:d.geometry,index:c,segment:g};this.rBush_.insert(Object(f["b"])(m.segment),m)}this.updateSegmentIndices_(i,a,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return v},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,n,o){this.rBush_.forEachInExtent(t.getExtent(),function(i){i.geometry===t&&(void 0===n||void 0===i.depth||Object(c["b"])(i.depth,n))&&i.index>e&&(i.index+=o)})},e}(g["b"]);function T(t,e){return t.index-e.index}function M(t,e){var n=e.geometry;if(n.getType()===y["a"].CIRCLE){var o=n;if(e.index===E){var i=Object(u["g"])(o.getCenter(),t),r=Math.sqrt(i)-o.getRadius();return r*r}}return Object(u["h"])(t,e.segment)}function I(t,e){var n=e.geometry;return n.getType()===y["a"].CIRCLE&&e.index===E?n.getClosestPoint(t):Object(u["b"])(t,e.segment)}function R(){var t=Object(S["b"])();return function(e,n){return t[y["a"].POINT]}}e["a"]=C},c8c0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.parentContext=t,this.rootRequest=e}return t}();e.Plan=o},c95e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e1c6"),i=n("6923"),r=n("f4cb"),a=n("0bd8"),s=n("8025"),c=new o.ContainerModule(function(t){t(i.TYPES.PopupVNodeDecorator).to(a.PopupPositionUpdater).inSingletonScope(),t(i.TYPES.IActionHandlerInitializer).to(s.PopupActionHandlerInitializer),t(i.TYPES.ICommand).toConstructor(r.HoverFeedbackCommand),t(i.TYPES.ICommand).toConstructor(r.SetPopupModelCommand),t(i.TYPES.MouseListener).to(r.HoverMouseListener),t(i.TYPES.PopupMouseListener).to(r.PopupHoverMouseListener),t(i.TYPES.KeyListener).to(r.HoverKeyListener),t(i.TYPES.HoverState).toConstantValue({mouseOverTimer:void 0,mouseOutTimer:void 0,popupOpen:!1,previousPopupElement:void 0})});e.default=c},cb6e:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o["throw"](t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n("e1c6"),d=n("9175"),l=n("6923"),p=n("be02"),h=n("3623"),f=n("3f0a"),y=n("3a92"),v=n("42f7"),g=n("d084"),m=n("cf61"),_=n("f4cb"),b=n("26ad"),w=n("5d19"),S=n("2440"),O=n("4741"),E=n("df60"),P=function(t){function e(e,n,o,i,r,a,s){var c=t.call(this,e,n,o)||this;return c.logger=i,c.modelProvider=r,c.popupModelProvider=a,c.layoutEngine=s,c.currentRoot={type:"NONE",id:"ROOT"},c.diagramState={expansionState:new E.ExpansionState(c.currentRoot)},c.pendingUpdates=[],c}return o(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this.currentRoot},set:function(t){this.setModel(t)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.registerCommand(m.UpdateModelCommand),e.register(v.ComputedBoundsAction.KIND,this),e.register(_.RequestPopupModelAction.KIND,this),e.register(O.CollapseExpandAction.KIND,this),e.register(O.CollapseExpandAllAction.KIND,this)},e.prototype.setModel=function(t){return this.currentRoot=t,this.diagramState={expansionState:new E.ExpansionState(t)},this.submitModel(t,!1)},e.prototype.updateModel=function(t){return void 0===t?this.submitModel(this.currentRoot,!0):(this.currentRoot=t,this.submitModel(t,!0))},e.prototype.submitModel=function(t,e){if(this.viewerOptions.needsClientLayout){var n=new d.Deferred;return this.pendingUpdates.push(n),this.actionDispatcher.dispatch(new v.RequestBoundsAction(t)),n.promise}return this.doSubmitModel(t,e)},e.prototype.doSubmitModel=function(t,e,n){return s(this,void 0,void 0,function(){var o,i,r,a,s;return c(this,function(c){switch(c.label){case 0:if(void 0===this.layoutEngine)return[3,6];c.label=1;case 1:return c.trys.push([1,5,,6]),o=this.layoutEngine.layout(t,n),o instanceof Promise?[4,o]:[3,3];case 2:return t=c.sent(),[3,4];case 3:void 0!==o&&(t=o),c.label=4;case 4:return[3,6];case 5:return i=c.sent(),this.logger.error(this,i.toString(),i.stack),[3,6];case 6:return r=this.lastSubmittedModelType,this.lastSubmittedModelType=t.type,a=this.pendingUpdates,this.pendingUpdates=[],e&&t.type===r?(s=Array.isArray(e)?e:t,[4,this.actionDispatcher.dispatch(new m.UpdateModelAction(s))]):[3,8];case 7:return c.sent(),[3,10];case 8:return[4,this.actionDispatcher.dispatch(new f.SetModelAction(t))];case 9:c.sent(),c.label=10;case 10:return a.forEach(function(t){return t.resolve()}),[2]}})})},e.prototype.applyMatches=function(t){var e=this.currentRoot;return g.applyMatches(e,t),this.submitModel(e,t)},e.prototype.addElements=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var i=o[n],r=i;void 0!==r.element&&void 0!==r.parentId?e.push({right:r.element,rightParentId:r.parentId}):void 0!==r.id&&e.push({right:r,rightParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.removeElements=function(t){var e=[],n=new y.SModelIndex;n.add(this.currentRoot);for(var o=0,i=t;o<i.length;o++){var r=i[o],a=r;if(void 0!==a.elementId&&void 0!==a.parentId){var s=n.getById(a.elementId);void 0!==s&&e.push({left:s,leftParentId:a.parentId})}else{s=n.getById(a);void 0!==s&&e.push({left:s,leftParentId:this.currentRoot.id})}}return this.applyMatches(e)},e.prototype.handle=function(t){switch(t.kind){case f.RequestModelAction.KIND:this.handleRequestModel(t);break;case v.ComputedBoundsAction.KIND:this.handleComputedBounds(t);break;case _.RequestPopupModelAction.KIND:this.handleRequestPopupModel(t);break;case w.ExportSvgAction.KIND:this.handleExportSvgAction(t);break;case O.CollapseExpandAction.KIND:this.handleCollapseExpandAction(t);break;case O.CollapseExpandAllAction.KIND:this.handleCollapseExpandAllAction(t);break}},e.prototype.handleRequestModel=function(t){this.modelProvider&&(this.currentRoot=this.modelProvider.getModel(this.diagramState,this.currentRoot)),this.submitModel(this.currentRoot,!1)},e.prototype.handleComputedBounds=function(t){var e=this.currentRoot,n=new y.SModelIndex;n.add(e);for(var o=0,i=t.bounds;o<i.length;o++){var r=i[o],a=n.getById(r.elementId);void 0!==a&&this.applyBounds(a,r.newBounds)}if(void 0!==t.alignments)for(var s=0,c=t.alignments;s<c.length;s++){var u=c[s];a=n.getById(u.elementId);void 0!==a&&this.applyAlignment(a,u.newAlignment)}this.doSubmitModel(e,!0,n)},e.prototype.applyBounds=function(t,e){var n=t;n.position={x:e.x,y:e.y},n.size={width:e.width,height:e.height}},e.prototype.applyAlignment=function(t,e){var n=t;n.alignment={x:e.x,y:e.y}},e.prototype.handleRequestPopupModel=function(t){if(void 0!==this.popupModelProvider){var e=h.findElement(this.currentRoot,t.elementId),n=this.popupModelProvider.getPopupModel(t,e);void 0!==n&&(n.canvasBounds=t.bounds,this.actionDispatcher.dispatch(new _.SetPopupModelAction(n)))}},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});S.saveAs(e,"diagram.svg")},e.prototype.handleCollapseExpandAction=function(t){if(void 0!==this.modelProvider){this.diagramState.expansionState.apply(t);var e=this.modelProvider.getModel(this.diagramState,this.currentRoot);this.updateModel(e)}},e.prototype.handleCollapseExpandAllAction=function(t){if(void 0!==this.modelProvider){t.expand||this.diagramState.expansionState.collapseAll();var e=this.modelProvider.getModel(this.diagramState,this.currentRoot);this.updateModel(e)}},e=i([u.injectable(),a(0,u.inject(l.TYPES.IActionDispatcher)),a(1,u.inject(l.TYPES.ActionHandlerRegistry)),a(2,u.inject(l.TYPES.ViewerOptions)),a(3,u.inject(l.TYPES.ILogger)),a(4,u.inject(l.TYPES.StateAwareModelProvider)),a(4,u.optional()),a(5,u.inject(l.TYPES.IPopupModelProvider)),a(5,u.optional()),a(6,u.inject(l.TYPES.IModelLayoutEngine)),a(6,u.optional()),r("design:paramtypes",[Object,p.ActionHandlerRegistry,Object,Object,Object,Object,Object])],e),e}(b.ModelSource);e.LocalModelSource=P},cc26:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd02"),r=n("3a92"),a=n("4c18"),s=n("a0af"),c=n("e4f0");function u(t){return void 0!==t.routingPoints&&"function"===typeof t.route}function d(t){return u(t)&&t.hasFeature(e.editFeature)}e.editFeature=Symbol("editFeature"),e.isRoutable=u,e.canEditRouting=d;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editMode=!1,e.hoverFeedback=!1,e.selected=!1,e}return o(e,t),e.prototype.hasFeature=function(t){return t===a.selectFeature||t===s.moveFeature||t===c.hoverFeedbackFeature},e}(r.SChildElement);e.SRoutingHandle=l;var p=.1;function h(t,e){if(0===e.children.length)return t;var n=0,o=function(){var o=t[n];if(void 0!==o.pointIndex){var r=e.children.find(function(t){return t instanceof l&&"junction"===t.kind&&t.pointIndex===o.pointIndex});if(void 0!==r&&r.editMode&&n>0&&n<t.length-1){var a=t[n-1],s=t[n+1],c={x:a.x-o.x,y:a.y-o.y},u={x:s.x-o.x,y:s.y-o.y},d=i.angleBetweenPoints(c,u);if(Math.abs(Math.PI-d)<p)return t.splice(n,1),"continue"}}n++};while(n<t.length)o();return t}e.filterEditModeHandles=h},cf13:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=o},cf61:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("dd02"),c=n("c146"),u=n("9757"),d=n("e7fa"),l=n("3a92"),p=n("559d"),h=n("7d36"),f=n("a0af"),y=n("66f9"),v=n("3b62"),g=n("4c18"),m=n("d084"),_=n("0f4c"),b=function(){function t(t,e){void 0===e&&(e=!0),this.animate=e,this.kind=w.KIND,void 0!==t.id?this.newRoot=t:this.matches=t}return t}();e.UpdateModelAction=b;var w=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return o(e,t),e.prototype.execute=function(t){var e;return void 0!==this.action.newRoot?e=t.modelFactory.createRoot(this.action.newRoot):(e=t.modelFactory.createRoot(t.root),void 0!==this.action.matches&&this.applyMatches(e,this.action.matches,t)),this.oldRoot=t.root,this.newRoot=e,this.performUpdate(this.oldRoot,this.newRoot,t)},e.prototype.performUpdate=function(t,e,n){if(void 0!==this.action.animate&&!this.action.animate||t.id!==e.id)return t.type===e.type&&s.isValidDimension(t.canvasBounds)&&(e.canvasBounds=t.canvasBounds),e;var o=void 0;if(void 0===this.action.matches){var i=new m.ModelMatcher;o=i.match(t,e)}else o=this.convertToMatchResult(this.action.matches,t,e);var r=this.computeAnimation(e,o,n);return r instanceof c.Animation?r.start():r},e.prototype.applyMatches=function(t,e,n){for(var o=t.index,i=0,r=e;i<r.length;i++){var a=r[i];if(void 0!==a.left){var s=o.getById(a.left.id);s instanceof l.SChildElement&&s.parent.remove(s)}if(void 0!==a.right){s=n.modelFactory.createElement(a.right);var c=void 0;void 0!==a.rightParentId&&(c=o.getById(a.rightParentId)),c instanceof l.SParentElement?c.add(s):t.add(s)}}},e.prototype.convertToMatchResult=function(t,e,n){for(var o={},i=0,r=t;i<r.length;i++){var a=r[i],s={},c=void 0;void 0!==a.left&&(c=a.left.id,s.left=e.index.getById(c),s.leftParentId=a.leftParentId),void 0!==a.right&&(c=a.right.id,s.right=n.index.getById(c),s.rightParentId=a.rightParentId),void 0!==c&&(o[c]=s)}return o},e.prototype.computeAnimation=function(t,e,n){var o=this,i={fades:[]};m.forEachMatch(e,function(e,r){if(void 0!==r.left&&void 0!==r.right)o.updateElement(r.left,r.right,i);else if(void 0!==r.right){var a=r.right;h.isFadeable(a)&&(a.opacity=0,i.fades.push({element:a,type:"in"}))}else if(r.left instanceof l.SChildElement){var s=r.left;if(h.isFadeable(s)&&void 0!==r.leftParentId&&void 0===t.index.getById(s.id)){var c=t.index.getById(r.leftParentId);if(c instanceof l.SParentElement){var u=n.modelFactory.createElement(s);c.add(u),i.fades.push({element:u,type:"out"})}}}});var r=this.createAnimations(i,t,n);return r.length>=2?new c.CompoundAnimation(t,n,r):1===r.length?r[0]:t},e.prototype.updateElement=function(t,e,n){if(f.isLocateable(t)&&f.isLocateable(e)){var o=t.position,i=e.position;s.almostEquals(o.x,i.x)&&s.almostEquals(o.y,i.y)||(void 0===n.moves&&(n.moves=[]),n.moves.push({element:e,elementId:e.id,fromPosition:o,toPosition:i}),e.position=o)}y.isBoundsAware(t)&&y.isBoundsAware(e)&&(s.isValidDimension(e.bounds)?s.almostEquals(t.bounds.width,e.bounds.width)&&s.almostEquals(t.bounds.height,e.bounds.height)||(void 0===n.resizes&&(n.resizes=[]),n.resizes.push({element:e,fromDimension:{width:t.bounds.width,height:t.bounds.height},toDimension:{width:e.bounds.width,height:e.bounds.height}})):e.bounds={x:e.bounds.x,y:e.bounds.y,width:t.bounds.width,height:t.bounds.height}),g.isSelectable(t)&&g.isSelectable(e)&&(e.selected=t.selected),t instanceof l.SModelRoot&&e instanceof l.SModelRoot&&(e.canvasBounds=t.canvasBounds),t instanceof v.ViewportRootElement&&e instanceof v.ViewportRootElement&&(e.scroll=t.scroll,e.zoom=t.zoom)},e.prototype.createAnimations=function(t,e,n){var o=[];if(t.fades.length>0&&o.push(new d.FadeAnimation(e,t.fades,n,!0)),void 0!==t.moves&&t.moves.length>0){for(var i=new Map,r=0,a=t.moves;r<a.length;r++){var s=a[r];i.set(s.elementId,s)}o.push(new p.MoveAnimation(e,i,new Map,n,!1))}if(void 0!==t.resizes&&t.resizes.length>0){for(var c=new Map,u=0,l=t.resizes;u<l.length;u++){var h=l[u];c.set(h.element.id,h)}o.push(new _.ResizeAnimation(e,c,n,!1))}return o},e.prototype.undo=function(t){return this.performUpdate(this.newRoot,this.oldRoot,t)},e.prototype.redo=function(t){return this.performUpdate(this.oldRoot,this.newRoot,t)},e.KIND="updateModel",e=i([a.injectable(),r("design:paramtypes",[b])],e),e}(u.Command);e.UpdateModelCommand=w},cf81:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("e34e"),i=n("451f"),r=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var e=null!==t.target&&!t.target.isNamed()&&!t.target.isTagged();return e},new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new o.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=r},cf98:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("3a92"),r=n("3b4c"),a=n("3623"),s=n("c444"),c=n("5eb6"),u=n("a0af"),d=n("cc26");function l(t){return"scroll"in t}e.isScrollable=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.mouseDown=function(t,e){var n=a.findParentByFeature(t,u.isMoveable);if(void 0===n&&!(t instanceof d.SRoutingHandle)){var o=a.findParentByFeature(t,c.isViewport);this.lastScrollPosition=o?{x:e.pageX,y:e.pageY}:void 0}return[]},e.prototype.mouseMove=function(t,e){if(0===e.buttons)this.mouseUp(t,e);else if(this.lastScrollPosition){var n=a.findParentByFeature(t,c.isViewport);if(n){var o=(e.pageX-this.lastScrollPosition.x)/n.zoom,i=(e.pageY-this.lastScrollPosition.y)/n.zoom,r={scroll:{x:n.scroll.x-o,y:n.scroll.y-i},zoom:n.zoom};return this.lastScrollPosition={x:e.pageX,y:e.pageY},[new s.ViewportAction(n.id,r,!1)]}}return[]},e.prototype.mouseEnter=function(t,e){return t instanceof i.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){return this.lastScrollPosition=void 0,[]},e}(r.MouseListener);e.ScrollMouseListener=p},d084:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("3a92");function i(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}e.forEachMatch=i;var r=function(){function t(){}return t.prototype.match=function(t,e){var n={};return this.matchLeft(t,n),this.matchRight(e,n),n},t.prototype.matchLeft=function(t,e,n){var i=e[t.id];if(void 0!==i?(i.left=t,i.leftParentId=n):(i={left:t,leftParentId:n},e[t.id]=i),o.isParent(t))for(var r=0,a=t.children;r<a.length;r++){var s=a[r];this.matchLeft(s,e,t.id)}},t.prototype.matchRight=function(t,e,n){var i=e[t.id];if(void 0!==i?(i.right=t,i.rightParentId=n):(i={right:t,rightParentId:n},e[t.id]=i),o.isParent(t))for(var r=0,a=t.children;r<a.length;r++){var s=a[r];this.matchRight(s,e,t.id)}},t}();function a(t,e){var n;t instanceof o.SModelRoot?n=t.index:(n=new o.SModelIndex,n.add(t));for(var i=0,r=e;i<r.length;i++){var a=r[i],s=!1;if(void 0!==a.left&&void 0!==a.leftParentId){var c=n.getById(a.leftParentId);if(void 0!==c&&void 0!==c.children){var u=c.children.indexOf(a.left);u>=0&&(void 0!==a.right&&a.leftParentId===a.rightParentId?(c.children.splice(u,1,a.right),s=!0):c.children.splice(u,1)),n.remove(a.left)}}if(!s&&void 0!==a.right&&void 0!==a.rightParentId){var d=n.getById(a.rightParentId);void 0!==d&&(void 0===d.children&&(d.children=[]),d.children.push(a.right))}}}e.ModelMatcher=r,e.applyMatches=a},d204:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("1979"),i=n("66d7");function r(t,e){return function(n,r,a){var s=new o.Metadata(t,e);"number"===typeof a?i.tagParameter(n,r,a,s):i.tagProperty(n,r,s)}}e.tagged=r},d4ec:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),r=n("e45b"),a=function(){function t(){}var e;return e=t,t.prototype.decorate=function(t,n){return t.sel&&t.sel.startsWith("svg")&&r.setAttr(t,"tabindex",++e.tabIndex),t},t.prototype.postUpdate=function(){},t.tabIndex=1e3,t=e=o([i.injectable()],t),t}();e.FocusFixDecorator=a},d5b4:function(t,e,n){"use strict";var o=n("0332"),i=n.n(o);i.a},d741:function(t,e,n){},da84:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n("dd02"),a=n("a2e1"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,i=0,a=!0;return t.children.forEach(function(t){var s=n.getBoundsData(t).bounds;void 0!==s&&r.isValidDimension(s)&&(i+=s.height,a?a=!1:i+=e.vGap,o=Math.max(o,s.width))}),{width:o,height:i}},e.prototype.layoutChild=function(t,e,n,o,i,r,a,s){var c=this.getDx(o.hAlign,n,a);return e.bounds={x:i.paddingLeft+t.bounds.x-n.x+c,y:r.y+t.bounds.y-n.y,width:n.width,height:n.height},e.boundsChanged=!0,{x:r.x,y:r.y+n.height+i.vGap}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,vGap:1,hAlign:"center"}},e.prototype.spread=function(t,e){return i({},t,e)},e.KIND="vbox",e}(a.AbstractLayout);e.VBoxLayouter=s},db4a:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("82c4");e.ElkGraphJsonToSprotty=o.ElkGraphJsonToSprotty;var i=n("f1a1");e.createContainer=i.createContainer},dd02:function(t,e,n){"use strict";function o(t,e){return{x:t.x+e.x,y:t.y+e.y}}function i(t,e){return{x:t.x-e.x,y:t.y-e.y}}function r(t){return t.width>=0&&t.height>=0}function a(t){return"x"in t&&"y"in t&&"width"in t&&"height"in t}function s(t,e){var n=Math.min(t.x,e.x),o=Math.min(t.y,e.y),i=Math.max(t.x+(t.width>=0?t.width:0),e.x+(e.width>=0?e.width:0)),r=Math.max(t.y+(t.height>=0?t.height:0),e.y+(e.height>=0?e.height:0));return{x:n,y:o,width:i-n,height:r-o}}function c(t,e){return{x:t.x+e.x,y:t.y+e.y,width:t.width,height:t.height}}function u(t){return{x:t.x+(t.width>=0?.5*t.width:0),y:t.y+(t.height>=0?.5*t.height:0)}}function d(t,e){var n={x:t.x>e.x?e.x:t.x,y:t.y>e.y?e.y:t.y,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)};return u(n)}function l(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function p(t,e){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}function h(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function f(t,e){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}function y(t){return Math.atan2(t.y,t.x)}function v(t,e){var n=Math.sqrt((t.x*t.x+t.y*t.y)*(e.x*e.x+e.y*e.y));if(isNaN(n)||0===n)return NaN;var o=t.x*e.x+t.y*e.y;return Math.acos(o/n)}function g(t){return 180*t/Math.PI}function m(t){return t*Math.PI/180}function _(t,e){return Math.abs(t-e)<.001}Object.defineProperty(e,"__esModule",{value:!0}),e.ORIGIN_POINT=Object.freeze({x:0,y:0}),e.add=o,e.subtract=i,e.EMPTY_DIMENSION=Object.freeze({width:-1,height:-1}),e.isValidDimension=r,e.EMPTY_BOUNDS=Object.freeze({x:0,y:0,width:-1,height:-1}),e.isBounds=a,e.combine=s,e.translate=c,e.center=u,e.centerOfLine=d,e.includes=l,function(t){t[t["left"]=0]="left",t[t["right"]=1]="right",t[t["up"]=2]="up",t[t["down"]=3]="down"}(e.Direction||(e.Direction={})),e.euclideanDistance=p,e.manhattanDistance=h,e.maxDistance=f,e.angleOfPoint=y,e.angleBetweenPoints=v,e.toDegrees=g,e.toRadians=m,e.almostEquals=_},dd7b:function(t,e,n){"use strict";function o(t,e,n,o,i){var r=void 0===e?void 0:e.key;return{sel:t,data:e,children:n,text:o,elm:i,key:r}}n.r(e);var i=o,r=Array.isArray;function a(t){return"string"===typeof t||"number"===typeof t}function s(t){return document.createElement(t)}function c(t,e){return document.createElementNS(t,e)}function u(t){return document.createTextNode(t)}function d(t){return document.createComment(t)}function l(t,e,n){t.insertBefore(e,n)}function p(t,e){t.removeChild(e)}function h(t,e){t.appendChild(e)}function f(t){return t.parentNode}function y(t){return t.nextSibling}function v(t){return t.tagName}function g(t,e){t.textContent=e}function m(t){return t.textContent}function _(t){return 1===t.nodeType}function b(t){return 3===t.nodeType}function w(t){return 8===t.nodeType}var S={createElement:s,createElementNS:c,createTextNode:u,createComment:d,insertBefore:l,removeChild:p,appendChild:h,parentNode:f,nextSibling:y,tagName:v,setTextContent:g,getTextContent:m,isElement:_,isText:b,isComment:w},O=S;function E(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var o=0;o<e.length;++o){var i=e[o].data;void 0!==i&&E(i,e[o].children,e[o].sel)}}function P(t,e,n){var i,s,c,u={};if(void 0!==n?(u=e,r(n)?i=n:a(n)?s=n:n&&n.sel&&(i=[n])):void 0!==e&&(r(e)?i=e:a(e)?s=e:e&&e.sel?i=[e]:u=e),void 0!==i)for(c=0;c<i.length;++c)a(i[c])&&(i[c]=o(void 0,void 0,void 0,i[c],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||E(u,i,t),o(t,u,i,s,void 0)}function x(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function C(t){var e=t.data,n=e.fn.apply(void 0,e.args);x(n,t)}function T(t,e){var n,o=t.data,i=e.data,r=o.args,a=i.args;if(o.fn===i.fn&&r.length===a.length){for(n=0;n<a.length;++n)if(r[n]!==a[n])return void x(i.fn.apply(void 0,a),e);x(t,e)}else x(i.fn.apply(void 0,a),e)}var M=function(t,e,n,o){return void 0===o&&(o=n,n=e,e=void 0),P(t,{key:e,hook:{init:C,prepatch:T},fn:n,args:o})};function I(t){return void 0===t}function R(t){return void 0!==t}n.d(e,"init",function(){return L}),n.d(e,"h",function(){return P}),n.d(e,"thunk",function(){return M});var A=i("",{},[],void 0,void 0);function j(t,e){return t.key===e.key&&t.sel===e.sel}function N(t){return void 0!==t.sel}function D(t,e,n){var o,i,r,a={};for(o=e;o<=n;++o)r=t[o],null!=r&&(i=r.key,void 0!==i&&(a[i]=o));return a}var k=["create","update","remove","destroy","pre","post"];function L(t,e){var n,o,s={},c=void 0!==e?e:O;for(n=0;n<k.length;++n)for(s[k[n]]=[],o=0;o<t.length;++o){var u=t[o][k[n]];void 0!==u&&s[k[n]].push(u)}function d(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return i(c.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}function l(t,e){return function(){if(0===--e){var n=c.parentNode(t);c.removeChild(n,t)}}}function p(t,e){var n,o=t.data;void 0!==o&&R(n=o.hook)&&R(n=n.init)&&(n(t),o=t.data);var i=t.children,u=t.sel;if("!"===u)I(t.text)&&(t.text=""),t.elm=c.createComment(t.text);else if(void 0!==u){var d=u.indexOf("#"),l=u.indexOf(".",d),h=d>0?d:u.length,f=l>0?l:u.length,y=-1!==d||-1!==l?u.slice(0,Math.min(h,f)):u,v=t.elm=R(o)&&R(n=o.ns)?c.createElementNS(n,y):c.createElement(y);for(h<f&&v.setAttribute("id",u.slice(h+1,f)),l>0&&v.setAttribute("class",u.slice(f+1).replace(/\./g," ")),n=0;n<s.create.length;++n)s.create[n](A,t);if(r(i))for(n=0;n<i.length;++n){var g=i[n];null!=g&&c.appendChild(v,p(g,e))}else a(t.text)&&c.appendChild(v,c.createTextNode(t.text));n=t.data.hook,R(n)&&(n.create&&n.create(A,t),n.insert&&e.push(t))}else t.elm=c.createTextNode(t.text);return t.elm}function h(t,e,n,o,i,r){for(;o<=i;++o){var a=n[o];null!=a&&c.insertBefore(t,p(a,r),e)}}function f(t){var e,n,o=t.data;if(void 0!==o){for(R(e=o.hook)&&R(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)e=t.children[n],null!=e&&"string"!==typeof e&&f(e)}}function y(t,e,n,o){for(;n<=o;++n){var i=void 0,r=void 0,a=void 0,u=e[n];if(null!=u)if(R(u.sel)){for(f(u),r=s.remove.length+1,a=l(u.elm,r),i=0;i<s.remove.length;++i)s.remove[i](u,a);R(i=u.data)&&R(i=i.hook)&&R(i=i.remove)?i(u,a):a()}else c.removeChild(t,u.elm)}}function v(t,e,n,o){var i,r,a,s,u=0,d=0,l=e.length-1,f=e[0],v=e[l],m=n.length-1,_=n[0],b=n[m];while(u<=l&&d<=m)null==f?f=e[++u]:null==v?v=e[--l]:null==_?_=n[++d]:null==b?b=n[--m]:j(f,_)?(g(f,_,o),f=e[++u],_=n[++d]):j(v,b)?(g(v,b,o),v=e[--l],b=n[--m]):j(f,b)?(g(f,b,o),c.insertBefore(t,f.elm,c.nextSibling(v.elm)),f=e[++u],b=n[--m]):j(v,_)?(g(v,_,o),c.insertBefore(t,v.elm,f.elm),v=e[--l],_=n[++d]):(void 0===i&&(i=D(e,u,l)),r=i[_.key],I(r)?(c.insertBefore(t,p(_,o),f.elm),_=n[++d]):(a=e[r],a.sel!==_.sel?c.insertBefore(t,p(_,o),f.elm):(g(a,_,o),e[r]=void 0,c.insertBefore(t,a.elm,f.elm)),_=n[++d]));(u<=l||d<=m)&&(u>l?(s=null==n[m+1]?null:n[m+1].elm,h(t,s,n,d,m,o)):y(t,e,u,l))}function g(t,e,n){var o,i;R(o=e.data)&&R(i=o.hook)&&R(o=i.prepatch)&&o(t,e);var r=e.elm=t.elm,a=t.children,u=e.children;if(t!==e){if(void 0!==e.data){for(o=0;o<s.update.length;++o)s.update[o](t,e);o=e.data.hook,R(o)&&R(o=o.update)&&o(t,e)}I(e.text)?R(a)&&R(u)?a!==u&&v(r,a,u,n):R(u)?(R(t.text)&&c.setTextContent(r,""),h(r,null,u,0,u.length-1,n)):R(a)?y(r,a,0,a.length-1):R(t.text)&&c.setTextContent(r,""):t.text!==e.text&&c.setTextContent(r,e.text),R(i)&&R(o=i.postpatch)&&o(t,e)}}return function(t,e){var n,o,i,r=[];for(n=0;n<s.pre.length;++n)s.pre[n]();for(N(t)||(t=d(t)),j(t,e)?g(t,e,r):(o=t.elm,i=c.parentNode(o),p(e,r),null!==i&&(c.insertBefore(i,e.elm,c.nextSibling(o)),y(i,[t],0,0))),n=0;n<r.length;++n)r[n].data.hook.insert(r[n]);for(n=0;n<s.post.length;++n)s.post[n]();return e}}},ddfc:function(t,e,n){},dedd:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("393a"),r=n("42d6"),a={createElement:i.svg},s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(t,e){return a.createElement("g",null,a.createElement("rect",{"class-elknode":!0,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,"class-waiting":"waiting"===t.status,"class-processing":"processing"===t.status,"class-processed":"processed"===t.status,x:"0",y:"0",width:t.bounds.width,height:t.bounds.height}),e.renderChildren(t))},e}(r.RectangularNodeView);e.ElkNodeView=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(t,e){return a.createElement("g",null,a.createElement("rect",{"class-elkport":!0,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:t.bounds.width,height:t.bounds.height}),e.renderChildren(t))},e}(r.RectangularNodeView);e.ElkPortView=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.renderLine=function(t,e,n){for(var o=e[0],i="M "+o.x+","+o.y,r=1;r<e.length;r++){var s=e[r];i+=" L "+s.x+","+s.y}return a.createElement("path",{"class-elkedge":!0,d:i})},e.prototype.renderAdditionals=function(t,e,n){var o=e[e.length-2],i=e[e.length-1];return[a.createElement("path",{"class-edge":!0,"class-arrow":!0,d:"M 0,0 L 8,-3 L 8,3 Z",transform:"rotate("+r.toDegrees(r.angleOfPoint({x:o.x-i.x,y:o.y-i.y}))+" "+i.x+" "+i.y+") translate("+i.x+" "+i.y+")"})]},e}(r.PolylineEdgeView);e.ElkEdgeView=u;var d=function(){function t(){}return t.prototype.render=function(t,e){return a.createElement("text",{"class-elklabel":!0},t.text)},t}();e.ElkLabelView=d;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(t,e){var n=this.getRadius(t);return a.createElement("g",null,a.createElement("circle",{"class-elkjunction":!0,r:n}))},e.prototype.getRadius=function(t){return 2},e}(r.CircularNodeView);e.JunctionView=l},df60:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.expandedElementIds=[],this.initialize(t)}return t.prototype.initialize=function(t){var e=this;t.expanded&&this.expandedElementIds.push(t.id),void 0!==t.children&&t.children.forEach(function(t){return e.initialize(t)})},t.prototype.apply=function(t){for(var e=0,n=t.collapseIds;e<n.length;e++){var o=n[e],i=this.expandedElementIds.indexOf(o);-1!==i&&this.expandedElementIds.splice(i,1)}for(var r=0,a=t.expandIds;r<a.length;r++){var s=a[r];this.expandedElementIds.push(s)}},t.prototype.collapseAll=function(){this.expandedElementIds=[]},t}();e.ExpansionState=o},dfc0:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),a=n("302f"),s=n("3a92"),c=n("3623"),u=n("47b7"),d=n("38e8"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof s.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else n=this.isNodeSchema(t)?new u.SNode:this.isPortSchema(t)?new u.SPort:this.isEdgeSchema(t)?new u.SEdge:this.isLabelSchema(t)?new u.SLabel:this.isCompartmentSchema(t)?new u.SCompartment:this.isButtonSchema(t)?new d.SButton:new s.SChildElement;return this.initializeChild(n,t,e)},e.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof s.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else e=this.isGraphSchema(t)?new u.SGraph:new s.SModelRoot;return this.initializeRoot(e,t)},e.prototype.isGraphSchema=function(t){return"graph"===c.getBasicType(t)},e.prototype.isNodeSchema=function(t){return"node"===c.getBasicType(t)},e.prototype.isPortSchema=function(t){return"port"===c.getBasicType(t)},e.prototype.isEdgeSchema=function(t){return"edge"===c.getBasicType(t)},e.prototype.isLabelSchema=function(t){return"label"===c.getBasicType(t)},e.prototype.isCompartmentSchema=function(t){return"comp"===c.getBasicType(t)},e.prototype.isButtonSchema=function(t){return"button"===c.getBasicType(t)},e=i([r.injectable()],e),e}(a.SModelFactory);e.SGraphFactory=l},e1c6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("c5f4");e.METADATA_KEY=o;var i=n("f457");e.Container=i.Container;var r=n("155f");e.BindingScopeEnum=r.BindingScopeEnum,e.BindingTypeEnum=r.BindingTypeEnum,e.TargetTypeEnum=r.TargetTypeEnum;var a=n("771c");e.AsyncContainerModule=a.AsyncContainerModule,e.ContainerModule=a.ContainerModule;var s=n("719e");e.injectable=s.injectable;var c=n("d204");e.tagged=c.tagged;var u=n("6730");e.named=u.named;var d=n("624f");e.inject=d.inject,e.LazyServiceIdentifer=d.LazyServiceIdentifer;var l=n("8d8c");e.optional=l.optional;var p=n("9f62");e.unmanaged=p.unmanaged;var h=n("8c88");e.multiInject=h.multiInject;var f=n("a1a5");e.targetName=f.targetName;var y=n("4a4f");e.postConstruct=y.postConstruct;var v=n("c278");e.MetadataReader=v.MetadataReader;var g=n("77d3");e.id=g.id;var m=n("66d7");e.decorate=m.decorate;var _=n("451f");e.traverseAncerstors=_.traverseAncerstors,e.taggedConstraint=_.taggedConstraint,e.namedConstraint=_.namedConstraint,e.typeConstraint=_.typeConstraint;var b=n("ba33");e.getServiceIdentifierAsString=b.getServiceIdentifierAsString;var w=n("efc5");e.multiBindToService=w.multiBindToService},e34e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("cf81"),i=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new o.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=i},e45b:function(t,e,n){"use strict";var o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function i(t,e,n){d(t)[e]=n}function r(t,e,n){p(t)[e]=n}function a(t,e){var n=p(t);for(var o in n)n.hasOwnProperty(o)&&r(e,o,!0)}function s(t,e){for(var n=t.classList,o=0;o<n.length;o++){var i=n.item(o);i&&r(e,i,!0)}}function c(t,e){l(t).style=o({},l(t).style||{},e)}function u(t,e,n,o){var i=h(t);if(i[e])throw new Error("EventListener for "+e+" already registered on VNode");i[e]=[n,o]}function d(t){var e=l(t);return e.attrs||(e.attrs={}),e.attrs}function l(t){return t.data||(t.data={}),t.data}function p(t){var e=l(t);return e.class||(e.class={}),e.class}function h(t){var e=l(t);return e.on||(e.on={}),e.on}Object.defineProperty(e,"__esModule",{value:!0}),e.setAttr=i,e.setClass=r,e.copyClassesFromVNode=a,e.copyClassesFromElement=s,e.mergeStyle=c,e.on=u,e.getAttrs=d},e4f0:function(t,e,n){"use strict";function o(t){return t.hasFeature(e.hoverFeedbackFeature)}function i(t){return t.hasFeature(e.popupFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.hoverFeedbackFeature=Symbol("hoverFeedbackFeature"),e.isHoverable=o,e.popupFeature=Symbol("popupFeature"),e.hasPopupFeature=i},e524:function(t,e,n){},e629:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){this.startFn=t,this.nextFn=e}return t.prototype[Symbol.iterator]=function(){var t,e=this,n=(t={state:this.startFn(),next:function(){return e.nextFn(n.state)}},t[Symbol.iterator]=function(){return n},t);return n},t.prototype.filter=function(t){return r(this,t)},t.prototype.map=function(t){return a(this,t)},t.prototype.forEach=function(t){var e,n=this[Symbol.iterator](),o=0;do{e=n.next(),void 0!==e.value&&t(e.value,o),o++}while(!e.done)},t}();function i(t){if(t.constructor===Array)return t;var e=[];return t.forEach(function(t){return e.push(t)}),e}function r(t,e){return new o(function(){return s(t)},function(t){var n;do{n=t.next()}while(!n.done&&!e(n.value));return n})}function a(t,n){return new o(function(){return s(t)},function(t){var o=t.next(),i=o.done,r=o.value;return i?e.DONE_RESULT:{done:!1,value:n(r)}})}function s(t){var n=t[Symbol.iterator];if("function"===typeof n)return n.call(t);var o=t.length;return"number"===typeof o&&o>=0?new c(t):{next:function(){return e.DONE_RESULT}}}e.FluentIterableImpl=o,e.toArray=i,e.DONE_RESULT=Object.freeze({done:!0,value:void 0}),e.filterIterable=r,e.mapIterable=a;var c=function(){function t(t){this.array=t,this.index=0}return t.prototype.next=function(){return this.index<this.array.length?{done:!1,value:this.array[this.index++]}:e.DONE_RESULT},t.prototype[Symbol.iterator]=function(){return this},t}()},e7fa:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var r=n("e1c6"),a=n("c146"),s=n("3a92"),c=n("e45b"),u=n("7d36"),d=function(t){function e(e,n,o,i){void 0===i&&(i=!1);var r=t.call(this,o)||this;return r.model=e,r.elementFades=n,r.removeAfterFadeOut=i,r}return o(e,t),e.prototype.tween=function(t,e){for(var n=0,o=this.elementFades;n<o.length;n++){var i=o[n],r=i.element;"in"===i.type?r.opacity=t:"out"===i.type&&(r.opacity=1-t,1===t&&this.removeAfterFadeOut&&r instanceof s.SChildElement&&r.parent.remove(r))}return this.model},e}(a.Animation);e.FadeAnimation=d;var l=function(){function t(){}return t.prototype.decorate=function(t,e){return u.isFadeable(e)&&c.setAttr(t,"opacity",e.opacity),t},t.prototype.postUpdate=function(){},t=i([r.injectable()],t),t}();e.ElementFader=l},e801:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("155f"),i=n("2cac"),r=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=o.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=o.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=o.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=r},ed4f:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("dd02"),r=n("b669"),a=n("3a92"),s=n("9757"),c=n("1417"),u=n("66f9"),d=n("4c18"),l=n("c444"),p=n("5eb6"),h=function(){function t(t,e){void 0===e&&(e=!0),this.elementIds=t,this.animate=e,this.kind=v.KIND}return t}();e.CenterAction=h;var f=function(){function t(t,e,n,o){void 0===o&&(o=!0),this.elementIds=t,this.padding=e,this.maxZoom=n,this.animate=o,this.kind=g.KIND}return t}();e.FitToScreenAction=f;var y=function(t){function e(e){var n=t.call(this)||this;return n.animate=e,n}return o(e,t),e.prototype.initialize=function(t){var e=this;if(p.isViewport(t)){this.oldViewport={scroll:t.scroll,zoom:t.zoom};var n=[];if(this.getElementIds().forEach(function(o){var i=t.index.getById(o);i&&u.isBoundsAware(i)&&n.push(e.boundsInViewport(i,i.bounds,t))}),0===n.length&&t.index.all().forEach(function(o){d.isSelectable(o)&&o.selected&&u.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))}),0===n.length&&t.index.all().forEach(function(o){u.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))}),0!==n.length){var o=n.reduce(function(t,e){return i.combine(t,e)});i.isValidDimension(o)&&(this.newViewport=this.getNewViewport(o,t))}}},e.prototype.boundsInViewport=function(t,e,n){return t instanceof a.SChildElement&&t.parent!==n?this.boundsInViewport(t.parent,t.parent.localToParent(e),n):e},e.prototype.execute=function(t){return this.initialize(t.root),this.redo(t)},e.prototype.undo=function(t){var e=t.root;if(p.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new l.ViewportAnimation(e,this.newViewport,this.oldViewport,t).start();e.scroll=this.oldViewport.scroll,e.zoom=this.oldViewport.zoom}return e},e.prototype.redo=function(t){var e=t.root;if(p.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new l.ViewportAnimation(e,this.oldViewport,this.newViewport,t).start();e.scroll=this.newViewport.scroll,e.zoom=this.newViewport.zoom}return e},e.prototype.equal=function(t,e){return t.zoom===e.zoom&&t.scroll.x===e.scroll.x&&t.scroll.y===e.scroll.y},e}(s.Command);e.BoundsAwareViewportCommand=y;var v=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return o(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(i.isValidDimension(e.canvasBounds)){var n=i.center(t);return{scroll:{x:n.x-.5*e.canvasBounds.width,y:n.y-.5*e.canvasBounds.height},zoom:1}}},e.KIND="center",e}(y);e.CenterCommand=v;var g=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return o(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(i.isValidDimension(e.canvasBounds)){var n=i.center(t),o=void 0===this.action.padding?0:2*this.action.padding,r=Math.min(e.canvasBounds.width/(t.width+o),e.canvasBounds.height/t.height+o);return void 0!==this.action.maxZoom&&(r=Math.min(r,this.action.maxZoom)),{scroll:{x:n.x-.5*e.canvasBounds.width/r,y:n.y-.5*e.canvasBounds.height/r},zoom:r}}},e.KIND="fit",e}(y);e.FitToScreenCommand=g;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.keyDown=function(t,e){return r.matchesKeystroke(e,"KeyC","ctrlCmd","shift")?[new h([])]:r.matchesKeystroke(e,"KeyF","ctrlCmd","shift")?[new f([])]:[]},e}(c.KeyListener);e.CenterKeyboardListener=m},ed79:function(t,e,n){"use strict";var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var a=n("e1c6"),s=n("6923"),c=n("0d7a"),u=n("e45b"),d=function(){function t(t,e){this.logger=t,this.domHelper=e}return t.prototype.decorate=function(t,e){var n=u.getAttrs(t);return void 0!==n.id&&this.logger.warn(t,"Overriding id of vnode ("+n.id+"). Make sure not to set it manually in view."),n.id=this.domHelper.createUniqueDOMElementId(e),t.key||(t.key=e.id),t},t.prototype.postUpdate=function(){},t=o([a.injectable(),r(0,a.inject(s.TYPES.ILogger)),r(1,a.inject(s.TYPES.DOMHelper)),i("design:paramtypes",[Object,c.DOMHelper])],t),t}();e.IdDecorator=d},ee16:function(t,e,n){t.exports=n("bafd")},ef64:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("42d6"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.hasFeature=function(e){return e!==i.moveFeature&&t.prototype.hasFeature.call(this,e)},e}(i.RectangularNode);e.KlabElkNode=r;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.hasFeature=function(e){return e!==i.moveFeature&&t.prototype.hasFeature.call(this,e)},e}(i.RectangularPort);e.ElkPort=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.hasFeature=function(e){return e!==i.editFeature&&t.prototype.hasFeature.call(this,e)},e}(i.SEdge);e.ElkEdge=s;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.hasFeature=function(e){return e!==i.moveFeature&&e!==i.selectFeature&&e!==i.hoverFeedbackFeature&&t.prototype.hasFeature.call(this,e)},e}(i.SNode);e.ElkJunction=c},efc5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach(function(n){return t.bind(n).toService(e)})}}}},f1a1:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("e1c6"),r=n("42d6"),a=n("dedd"),s=n("ef64"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isExported=function(t){return null!==t.href&&(t.href.endsWith("diagram.css")||t.href.endsWith("sprotty.css"))},e}(r.SvgExporter);function u(t,e){var n=t.needsClientLayout,o=void 0!==n&&n,u=t.needsServerLayout,d=void 0===u?!o:u;void 0===e&&(e="warn");var l="debug"===e?r.LogLevel.log:"info"===e?r.LogLevel.info:"warn"===e?r.LogLevel.warn:"error"===e?r.LogLevel.error:r.LogLevel.none,p=new i.ContainerModule(function(t,e,n,i){t(r.TYPES.ModelSource).to(r.LocalModelSource).inSingletonScope(),i(r.TYPES.ILogger).to(r.ConsoleLogger).inSingletonScope(),i(r.TYPES.LogLevel).toConstantValue(l),i(r.TYPES.IModelFactory).to(r.SGraphFactory).inSingletonScope(),i(r.TYPES.SvgExporter).to(c).inSingletonScope();var u={bind:t,unbind:e,isBound:n,rebind:i};r.configureModelElement(u,"graph",r.SGraph,r.SGraphView),r.configureModelElement(u,"node",s.KlabElkNode,a.ElkNodeView),r.configureModelElement(u,"port",s.ElkPort,a.ElkPortView),r.configureModelElement(u,"edge",s.ElkEdge,a.ElkEdgeView),r.configureModelElement(u,"label",r.SLabel,a.ElkLabelView),r.configureModelElement(u,"junction",s.ElkJunction,a.JunctionView),r.configureViewerOptions(u,{needsClientLayout:o,needsServerLayout:d})}),h=new i.Container;return h.load(r.defaultModule,r.selectModule,r.boundsModule,r.moveModule,r.fadeModule,r.hoverModule,r.viewportModule,r.exportModule,r.edgeEditModule,p),h}e.createContainer=u},f457:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o["throw"](t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,o&&(i=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[0,i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var r=n("2e0b"),a=n("30e3"),s=n("155f"),c=n("c5f4"),u=n("c278"),d=n("87b3"),l=n("68f1"),p=n("8336"),h=n("77d3"),f=n("ba33"),y=n("1e94"),v=n("0300"),g=function(){function t(t){var e=t||{};if("object"!==typeof e)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!==typeof e.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!==typeof e.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=h.id(),this._bindingDictionary=new v.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return t.merge=function(e,n){var o=new t,i=d.getBindingDictionary(o),r=d.getBindingDictionary(e),a=d.getBindingDictionary(n);function s(t,e){t.traverse(function(t,n){n.forEach(function(t){e.add(t.serviceIdentifier,t.clone())})})}return s(r,i),s(a,i),o},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),o=0,i=t;o<i.length;o++){var r=i[o],a=n(r.id);r.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,function(){var e,n,o,r,a;return i(this,function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,o=t,i.label=1;case 1:return n<o.length?(r=o[n],a=e(r.id),[4,r.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=function(t){return function(e){return e.moduleId===t}};e.forEach(function(e){var n=o(e.id);t._bindingDictionary.removeByCondition(n)})},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new r.Binding(t,e);return this._bindingDictionary.add(t,n),new p.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(a.CANNOT_UNBIND+" "+f.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new v.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var o=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),r=d.createMockRequest(this,t,e,n);o=i.some(function(t){return t.constraint(r)})}return!o&&this.parent&&(o=this.parent.isBoundTagged(t,e,n)),o},t.prototype.snapshot=function(){this._snapshots.push(y.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(o){var i=t.bind.bind(t),r=i(o);return e(r,n),r}},o=function(e){return function(e){var n=t.unbind.bind(t);n(e)}},i=function(e){return function(e){var n=t.isBound.bind(t);return n(e)}},r=function(n){return function(o){var i=t.rebind.bind(t),r=i(o);return e(r,n),r}};return function(t){return{bindFunction:n(t),isboundFunction:i(t),rebindFunction:r(t),unbindFunction:o(t)}}},t.prototype._get=function(t,e,n,o,i,r){var s=null,c={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:o,targetType:n,value:r};if(this._middleware){if(s=this._middleware(c),void 0===s||null===s)throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(c);return s},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=d.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);n=e.contextInterceptor(n);var o=l.resolve(n);return o}},t}();e.Container=g},f4cb:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n("e1c6"),c=n("b669"),u=n("dd02"),d=n("6923"),l=n("3a92"),p=n("3b4c"),h=n("9757"),f=n("302f"),y=n("1417"),v=n("3623"),g=n("66f9"),m=n("e4f0"),_=function(){function t(t,e){this.mouseoverElement=t,this.mouseIsOver=e,this.kind=b.KIND}return t}();e.HoverFeedbackAction=_;var b=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return o(e,t),e.prototype.execute=function(t){var e=t.root,n=e.index.getById(this.action.mouseoverElement);return n&&m.isHoverable(n)&&(n.hoverFeedback=this.action.mouseIsOver),this.redo(t)},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND="hoverFeedback",e}(h.Command);e.HoverFeedbackCommand=b;var w=function(){function t(e,n){this.elementId=e,this.bounds=n,this.kind=t.KIND}return t.KIND="requestPopupModel",t}();e.RequestPopupModelAction=w;var S=function(){function t(t){this.newRoot=t,this.kind=O.KIND}return t}();e.SetPopupModelAction=S;var O=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return o(e,t),e.prototype.execute=function(t){return this.oldRoot=t.root,this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},e.KIND="setPopupModel",e}(h.PopupCommand);e.SetPopupModelCommand=O;var E=function(t){function e(e,n){var o=t.call(this)||this;return o.options=e,o.state=n,o}return o(e,t),e.prototype.stopMouseOutTimer=function(){void 0!==this.state.mouseOutTimer&&(window.clearTimeout(this.state.mouseOutTimer),this.state.mouseOutTimer=void 0)},e.prototype.startMouseOutTimer=function(){var t=this;return this.stopMouseOutTimer(),new Promise(function(e){t.state.mouseOutTimer=window.setTimeout(function(){t.state.popupOpen=!1,t.state.previousPopupElement=void 0,e(new S({type:f.EMPTY_ROOT.type,id:f.EMPTY_ROOT.id}))},t.options.popupCloseDelay)})},e.prototype.stopMouseOverTimer=function(){void 0!==this.state.mouseOverTimer&&(window.clearTimeout(this.state.mouseOverTimer),this.state.mouseOverTimer=void 0)},e=i([a(0,s.inject(d.TYPES.ViewerOptions)),a(1,s.inject(d.TYPES.HoverState)),r("design:paramtypes",[Object,Object])],e),e}(p.MouseListener);e.AbstractHoverMouseListener=E;var P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.computePopupBounds=function(t,e){var n={x:-5,y:20},o=g.getAbsoluteBounds(t),i=t.root.canvasBounds,r=u.translate(o,i),a=r.x+r.width-e.x,s=r.y+r.height-e.y;s<=a&&this.allowSidePosition(t,"below",s)?n={x:-5,y:Math.round(s+5)}:a<=s&&this.allowSidePosition(t,"right",a)&&(n={x:Math.round(a+5),y:-5});var c=e.x+n.x,d=i.x+i.width;c>d&&(c=d);var l=e.y+n.y,p=i.y+i.height;return l>p&&(l=p),{x:c,y:l,width:-1,height:-1}},e.prototype.allowSidePosition=function(t,e,n){return!(t instanceof l.SModelRoot)&&n<=150},e.prototype.startMouseOverTimer=function(t,e){var n=this;return this.stopMouseOverTimer(),new Promise(function(o){n.state.mouseOverTimer=window.setTimeout(function(){var i=n.computePopupBounds(t,{x:e.pageX,y:e.pageY});o(new w(t.id,i)),n.state.popupOpen=!0,n.state.previousPopupElement=t},n.options.popupOpenDelay)})},e.prototype.mouseOver=function(t,e){var n=[],o=v.findParent(t,m.hasPopupFeature);this.state.popupOpen&&(void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id!==o.id)?n.push(this.startMouseOutTimer()):(this.stopMouseOverTimer(),this.stopMouseOutTimer()),void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e));var i=v.findParentByFeature(t,m.isHoverable);return void 0!==i&&n.push(new _(i.id,!0)),n},e.prototype.mouseOut=function(t,e){var n=[];if(this.state.popupOpen){var o=v.findParent(t,m.hasPopupFeature);void 0!==this.state.previousPopupElement&&void 0!==o&&this.state.previousPopupElement.id===o.id&&n.push(this.startMouseOutTimer())}this.stopMouseOverTimer();var i=v.findParentByFeature(t,m.isHoverable);return void 0!==i&&n.push(new _(i.id,!1)),n},e.prototype.mouseMove=function(t,e){var n=[];void 0!==this.state.previousPopupElement&&this.closeOnMouseMove(this.state.previousPopupElement,e)&&n.push(this.startMouseOutTimer());var o=v.findParent(t,m.hasPopupFeature);return void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e)),n},e.prototype.closeOnMouseMove=function(t,e){return t instanceof l.SModelRoot},e=i([s.injectable()],e),e}(E);e.HoverMouseListener=P;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.mouseOut=function(t,e){return[this.startMouseOutTimer()]},e.prototype.mouseOver=function(t,e){return this.stopMouseOutTimer(),this.stopMouseOverTimer(),[]},e=i([s.injectable()],e),e}(E);e.PopupHoverMouseListener=x;var C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.keyDown=function(t,e){return c.matchesKeystroke(e,"Escape")?[new S({type:f.EMPTY_ROOT.type,id:f.EMPTY_ROOT.id})]:[]},e}(y.KeyListener);e.HoverKeyListener=C},f822:function(t,e,n){"use strict";var o=n("0af5"),i=n("f623"),r=n("9abc"),a=n("abb7"),s=function(t){function e(e,n,o){if(t.call(this),void 0!==o&&void 0===n)this.setFlatCoordinates(o,e);else{var i=n||0;this.setCenterAndRadius(e,i,o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,n,o){var i=this.flatCoordinates,r=t-i[0],a=e-i[1],s=r*r+a*a;if(s<o){if(0===s)for(var c=0;c<this.stride;++c)n[c]=i[c];else{var u=this.getRadius()/Math.sqrt(s);n[0]=i[0]+u*r,n[1]=i[1]+u*a;for(var d=2;d<this.stride;++d)n[d]=i[d]}return n.length=this.stride,s}return o},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,o=t-n[0],i=e-n[1];return o*o+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Object(o["k"])(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return i["a"].CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(o["F"])(t,e)){var n=this.getCenter();return t[0]<=n[0]&&t[2]>=n[0]||(t[1]<=n[1]&&t[3]>=n[1]||Object(o["t"])(t,this.intersectsCoordinate,this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],o=t.slice();o[e]=o[0]+n;for(var i=1;i<e;++i)o[e+i]=t[i];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,i=Object(a["a"])(o,0,t,this.stride);o[i++]=o[0]+e;for(var r=1,s=this.stride;r<s;++r)o[i++]=o[r];o.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(r["a"]);s.prototype.transform,e["a"]=s},f923:function(t,e,n){"use strict";function o(t,e){var n,o,i=e.elm,r=t.data.class,a=e.data.class;if((r||a)&&r!==a){for(o in r=r||{},a=a||{},r)a[o]||i.classList.remove(o);for(o in a)n=a[o],n!==r[o]&&i.classList[n?"add":"remove"](o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:o,update:o},e.default=e.classModule},fba3:function(t,e,n){"use strict";function o(t){return i()?t.metaKey:t.ctrlKey}function i(){return-1!==window.navigator.userAgent.indexOf("Mac")}function r(t){if(t&&"undefined"!==typeof window&&window.location){var e="";return window.location.protocol&&(e+=window.location.protocol+"//"),window.location.host&&(e+=window.location.host),e.length>0&&!t.startsWith(e)}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.isCtrlOrCmd=o,e.isMac=i,e.isCrossSite=r},fd0f:function(t,e,n){},fe37:function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n("3b4c"),r=n("3623"),a=n("c444"),s=n("5eb6");function c(t){return"zoom"in t}e.isZoomable=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.wheel=function(t,e){var n=r.findParentByFeature(t,s.isViewport);if(n){var o=Math.exp(.005*-e.deltaY),i=1/(o*n.zoom)-1/n.zoom,c={scroll:{x:-(i*e.offsetX-n.scroll.x),y:-(i*e.offsetY-n.scroll.y)},zoom:n.zoom*o};return[new a.ViewportAction(n.id,c,!1)]}return[]},e}(i.MouseListener);e.ZoomMouseListener=u},ff70:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="http://www.w3.org/1999/xlink",i="http://www.w3.org/XML/1998/namespace",r=58,a=120;function s(t,e){var n,s=e.elm,c=t.data.attrs,u=e.data.attrs;if((c||u)&&c!==u){for(n in c=c||{},u=u||{},u){var d=u[n],l=c[n];l!==d&&(!0===d?s.setAttribute(n,""):!1===d?s.removeAttribute(n):n.charCodeAt(0)!==a?s.setAttribute(n,d):n.charCodeAt(3)===r?s.setAttributeNS(i,n,d):n.charCodeAt(5)===r?s.setAttributeNS(o,n,d):s.setAttribute(n,d))}for(n in c)n in u||s.removeAttribute(n)}}e.attributesModule={create:s,update:s},e.default=e.attributesModule}}]);
worldview im;

@test(
	name = "tests.core.classification.simplest",
	description  = "Simplest classification test",
	observations = ("geography:Elevation by im:Level")
)
observe earth:Terrestrial earth:Region named tanzania-grr
	over space(shape="EPSG:4326 POLYGON((33.796 -7.086, 35.946 -7.086, 35.946 -9.41, 33.796 -9.41, 33.796 -7.086))", grid="1 km");
	
model geography:Slope by im:Level
	// This should lookup only private (data reduction -> private) and not finding, lookup a 
	// normalization model, then use it after observing elevation. Can have both deps if needed
	// and compute min/max etc the same way
	observing im:Normalized geography:Elevation
	using local:anonymous:test:dem90m
	classified into
		im:Low      if < 5,
		im:Moderate if < 25,
		im:High     otherwise;

model geography:Elevation by im:Level
	using gis.terrain()
	lookup (self, *, ?) into 
		  elevation | concept                 | magnitude
	      --------------------------------------------------------
	      < 500     | geography:Elevation     | im:Low,
	      < 1500    | geography:Slope         | im:Moderate,
	         *      | infrastructure:Road     | im:High,
	         #      | infrastructure:Building | agriculture:Manure
;

// special handling for data reduction trait, otherwise must be a classification. Need the category in 
// the core ontologies.
model im:Normalized using di.normalize();		